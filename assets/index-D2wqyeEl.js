(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ky={exports:{}},Wu={},Qy={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function F$(){if(OE)return at;OE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function b(z,Z,J){this.props=z,this.context=Z,this.refs=k,this.updater=J||v}b.prototype.isReactComponent={},b.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=b.prototype;function N(z,Z,J){this.props=z,this.context=Z,this.refs=k,this.updater=J||v}var E=N.prototype=new j;E.constructor=N,w(E,b.prototype),E.isPureReactComponent=!0;var P=Array.isArray,S=Object.prototype.hasOwnProperty,T={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R(z,Z,J){var oe,he={},ve=null,fe=null;if(Z!=null)for(oe in Z.ref!==void 0&&(fe=Z.ref),Z.key!==void 0&&(ve=""+Z.key),Z)S.call(Z,oe)&&!A.hasOwnProperty(oe)&&(he[oe]=Z[oe]);var ye=arguments.length-2;if(ye===1)he.children=J;else if(1<ye){for(var q=Array(ye),de=0;de<ye;de++)q[de]=arguments[de+2];he.children=q}if(z&&z.defaultProps)for(oe in ye=z.defaultProps,ye)he[oe]===void 0&&(he[oe]=ye[oe]);return{$$typeof:t,type:z,key:ve,ref:fe,props:he,_owner:T.current}}function M(z,Z){return{$$typeof:t,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function C(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(J){return Z[J]})}var F=/\/+/g;function L(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?C(""+z.key):Z.toString(36)}function Y(z,Z,J,oe,he){var ve=typeof z;(ve==="undefined"||ve==="boolean")&&(z=null);var fe=!1;if(z===null)fe=!0;else switch(ve){case"string":case"number":fe=!0;break;case"object":switch(z.$$typeof){case t:case e:fe=!0}}if(fe)return fe=z,he=he(fe),z=oe===""?"."+L(fe,0):oe,P(he)?(J="",z!=null&&(J=z.replace(F,"$&/")+"/"),Y(he,Z,J,"",function(de){return de})):he!=null&&(D(he)&&(he=M(he,J+(!he.key||fe&&fe.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+z)),Z.push(he)),1;if(fe=0,oe=oe===""?".":oe+":",P(z))for(var ye=0;ye<z.length;ye++){ve=z[ye];var q=oe+L(ve,ye);fe+=Y(ve,Z,J,q,he)}else if(q=y(z),typeof q=="function")for(z=q.call(z),ye=0;!(ve=z.next()).done;)ve=ve.value,q=oe+L(ve,ye++),fe+=Y(ve,Z,J,q,he);else if(ve==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return fe}function ne(z,Z,J){if(z==null)return z;var oe=[],he=0;return Y(z,oe,"","",function(ve){return Z.call(J,ve,he++)}),oe}function W(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(J){(z._status===0||z._status===-1)&&(z._status=1,z._result=J)},function(J){(z._status===0||z._status===-1)&&(z._status=2,z._result=J)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var G={current:null},X={transition:null},ee={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:X,ReactCurrentOwner:T};function re(){throw Error("act(...) is not supported in production builds of React.")}return at.Children={map:ne,forEach:function(z,Z,J){ne(z,function(){Z.apply(this,arguments)},J)},count:function(z){var Z=0;return ne(z,function(){Z++}),Z},toArray:function(z){return ne(z,function(Z){return Z})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},at.Component=b,at.Fragment=r,at.Profiler=a,at.PureComponent=N,at.StrictMode=n,at.Suspense=d,at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,at.act=re,at.cloneElement=function(z,Z,J){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var oe=w({},z.props),he=z.key,ve=z.ref,fe=z._owner;if(Z!=null){if(Z.ref!==void 0&&(ve=Z.ref,fe=T.current),Z.key!==void 0&&(he=""+Z.key),z.type&&z.type.defaultProps)var ye=z.type.defaultProps;for(q in Z)S.call(Z,q)&&!A.hasOwnProperty(q)&&(oe[q]=Z[q]===void 0&&ye!==void 0?ye[q]:Z[q])}var q=arguments.length-2;if(q===1)oe.children=J;else if(1<q){ye=Array(q);for(var de=0;de<q;de++)ye[de]=arguments[de+2];oe.children=ye}return{$$typeof:t,type:z.type,key:he,ref:ve,props:oe,_owner:fe}},at.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},at.createElement=R,at.createFactory=function(z){var Z=R.bind(null,z);return Z.type=z,Z},at.createRef=function(){return{current:null}},at.forwardRef=function(z){return{$$typeof:c,render:z}},at.isValidElement=D,at.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:W}},at.memo=function(z,Z){return{$$typeof:h,type:z,compare:Z===void 0?null:Z}},at.startTransition=function(z){var Z=X.transition;X.transition={};try{z()}finally{X.transition=Z}},at.unstable_act=re,at.useCallback=function(z,Z){return G.current.useCallback(z,Z)},at.useContext=function(z){return G.current.useContext(z)},at.useDebugValue=function(){},at.useDeferredValue=function(z){return G.current.useDeferredValue(z)},at.useEffect=function(z,Z){return G.current.useEffect(z,Z)},at.useId=function(){return G.current.useId()},at.useImperativeHandle=function(z,Z,J){return G.current.useImperativeHandle(z,Z,J)},at.useInsertionEffect=function(z,Z){return G.current.useInsertionEffect(z,Z)},at.useLayoutEffect=function(z,Z){return G.current.useLayoutEffect(z,Z)},at.useMemo=function(z,Z){return G.current.useMemo(z,Z)},at.useReducer=function(z,Z,J){return G.current.useReducer(z,Z,J)},at.useRef=function(z){return G.current.useRef(z)},at.useState=function(z){return G.current.useState(z)},at.useSyncExternalStore=function(z,Z,J){return G.current.useSyncExternalStore(z,Z,J)},at.useTransition=function(){return G.current.useTransition()},at.version="18.3.1",at}var RE;function d1(){return RE||(RE=1,Qy.exports=F$()),Qy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function V$(){if(DE)return Wu;DE=1;var t=d1(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,h){var m,p={},y=null,v=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)n.call(d,m)&&!s.hasOwnProperty(m)&&(p[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)p[m]===void 0&&(p[m]=d[m]);return{$$typeof:e,type:c,key:y,ref:v,props:p,_owner:a.current}}return Wu.Fragment=r,Wu.jsx=o,Wu.jsxs=o,Wu}var ME;function U$(){return ME||(ME=1,Ky.exports=V$()),Ky.exports}var i=U$(),V=d1();const Q=vt(V);var hm={},Yy={exports:{}},xn={},Xy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function B$(){return LE||(LE=1,(function(t){function e(X,ee){var re=X.length;X.push(ee);e:for(;0<re;){var z=re-1>>>1,Z=X[z];if(0<a(Z,ee))X[z]=ee,X[re]=Z,re=z;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],re=X.pop();if(re!==ee){X[0]=re;e:for(var z=0,Z=X.length,J=Z>>>1;z<J;){var oe=2*(z+1)-1,he=X[oe],ve=oe+1,fe=X[ve];if(0>a(he,re))ve<Z&&0>a(fe,he)?(X[z]=fe,X[ve]=re,z=ve):(X[z]=he,X[oe]=re,z=oe);else if(ve<Z&&0>a(fe,re))X[z]=fe,X[ve]=re,z=ve;else break e}}return ee}function a(X,ee){var re=X.sortIndex-ee.sortIndex;return re!==0?re:X.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,p=null,y=3,v=!1,w=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var ee=r(h);ee!==null;){if(ee.callback===null)n(h);else if(ee.startTime<=X)n(h),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=r(h)}}function P(X){if(k=!1,E(X),!w)if(r(d)!==null)w=!0,W(S);else{var ee=r(h);ee!==null&&G(P,ee.startTime-X)}}function S(X,ee){w=!1,k&&(k=!1,j(R),R=-1),v=!0;var re=y;try{for(E(ee),p=r(d);p!==null&&(!(p.expirationTime>ee)||X&&!C());){var z=p.callback;if(typeof z=="function"){p.callback=null,y=p.priorityLevel;var Z=z(p.expirationTime<=ee);ee=t.unstable_now(),typeof Z=="function"?p.callback=Z:p===r(d)&&n(d),E(ee)}else n(d);p=r(d)}if(p!==null)var J=!0;else{var oe=r(h);oe!==null&&G(P,oe.startTime-ee),J=!1}return J}finally{p=null,y=re,v=!1}}var T=!1,A=null,R=-1,M=5,D=-1;function C(){return!(t.unstable_now()-D<M)}function F(){if(A!==null){var X=t.unstable_now();D=X;var ee=!0;try{ee=A(!0,X)}finally{ee?L():(T=!1,A=null)}}else T=!1}var L;if(typeof N=="function")L=function(){N(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ne=Y.port2;Y.port1.onmessage=F,L=function(){ne.postMessage(null)}}else L=function(){b(F,0)};function W(X){A=X,T||(T=!0,L())}function G(X,ee){R=b(function(){X(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,W(S))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(X){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var re=y;y=ee;try{return X()}finally{y=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var re=y;y=X;try{return ee()}finally{y=re}},t.unstable_scheduleCallback=function(X,ee,re){var z=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?z+re:z):re=z,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,X={id:m++,callback:ee,priorityLevel:X,startTime:re,expirationTime:Z,sortIndex:-1},re>z?(X.sortIndex=re,e(h,X),r(d)===null&&X===r(h)&&(k?(j(R),R=-1):k=!0,G(P,re-z))):(X.sortIndex=Z,e(d,X),w||v||(w=!0,W(S))),X},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(X){var ee=y;return function(){var re=y;y=ee;try{return X.apply(this,arguments)}finally{y=re}}}})(Jy)),Jy}var $E;function q$(){return $E||($E=1,Xy.exports=B$()),Xy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function z$(){if(FE)return xn;FE=1;var t=d1(),e=q$();function r(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function s(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(a[l]=u,l=0;l<u.length;l++)n.add(u[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function y(l){return d.call(p,l)?!0:d.call(m,l)?!1:h.test(l)?p[l]=!0:(m[l]=!0,!1)}function v(l,u,f,x){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,u,f,x){if(u===null||typeof u>"u"||v(l,u,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function k(l,u,f,x,_,O,U){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=_,this.mustUseProperty=f,this.propertyName=l,this.type=u,this.sanitizeURL=O,this.removeEmptyString=U}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){b[l]=new k(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];b[u]=new k(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){b[l]=new k(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){b[l]=new k(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){b[l]=new k(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){b[l]=new k(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){b[l]=new k(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){b[l]=new k(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){b[l]=new k(l,5,!1,l.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function N(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(j,N);b[u]=new k(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(j,N);b[u]=new k(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(j,N);b[u]=new k(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){b[l]=new k(l,1,!1,l.toLowerCase(),null,!1,!1)}),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){b[l]=new k(l,1,!1,l.toLowerCase(),null,!0,!0)});function E(l,u,f,x){var _=b.hasOwnProperty(u)?b[u]:null;(_!==null?_.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(w(u,f,_,x)&&(f=null),x||_===null?y(u)&&(f===null?l.removeAttribute(u):l.setAttribute(u,""+f)):_.mustUseProperty?l[_.propertyName]=f===null?_.type===3?!1:"":f:(u=_.attributeName,x=_.attributeNamespace,f===null?l.removeAttribute(u):(_=_.type,f=_===3||_===4&&f===!0?"":""+f,x?l.setAttributeNS(x,u,f):l.setAttribute(u,f))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),C=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),X=Symbol.iterator;function ee(l){return l===null||typeof l!="object"?null:(l=X&&l[X]||l["@@iterator"],typeof l=="function"?l:null)}var re=Object.assign,z;function Z(l){if(z===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);z=u&&u[1]||""}return`
`+z+l}var J=!1;function oe(l,u){if(!l||J)return"";J=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ce){var x=ce}Reflect.construct(l,[],u)}else{try{u.call()}catch(ce){x=ce}l.call(u.prototype)}else{try{throw Error()}catch(ce){x=ce}l()}}catch(ce){if(ce&&x&&typeof ce.stack=="string"){for(var _=ce.stack.split(`
`),O=x.stack.split(`
`),U=_.length-1,H=O.length-1;1<=U&&0<=H&&_[U]!==O[H];)H--;for(;1<=U&&0<=H;U--,H--)if(_[U]!==O[H]){if(U!==1||H!==1)do if(U--,H--,0>H||_[U]!==O[H]){var K=`
`+_[U].replace(" at new "," at ");return l.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",l.displayName)),K}while(1<=U&&0<=H);break}}}finally{J=!1,Error.prepareStackTrace=f}return(l=l?l.displayName||l.name:"")?Z(l):""}function he(l){switch(l.tag){case 5:return Z(l.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return l=oe(l.type,!1),l;case 11:return l=oe(l.type.render,!1),l;case 1:return l=oe(l.type,!0),l;default:return""}}function ve(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case A:return"Fragment";case T:return"Portal";case M:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case Y:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case C:return(l.displayName||"Context")+".Consumer";case D:return(l._context.displayName||"Context")+".Provider";case F:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ne:return u=l.displayName||null,u!==null?u:ve(l.type)||"Memo";case W:u=l._payload,l=l._init;try{return ve(l(u))}catch{}}return null}function fe(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(u);case 8:return u===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ye(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function de(l){var u=q(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),x=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,O=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){x=""+U,O.call(this,U)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(U){x=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function pe(l){l._valueTracker||(l._valueTracker=de(l))}function le(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),x="";return l&&(x=q(l)?l.checked?"true":"false":l.value),l=x,l!==f?(u.setValue(l),!0):!1}function je(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Te(l,u){var f=u.checked;return re({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??l._wrapperState.initialChecked})}function Ze(l,u){var f=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;f=ye(u.value!=null?u.value:f),l._wrapperState={initialChecked:x,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function et(l,u){u=u.checked,u!=null&&E(l,"checked",u,!1)}function Nt(l,u){et(l,u);var f=ye(u.value),x=u.type;if(f!=null)x==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+f):l.value!==""+f&&(l.value=""+f);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?ct(l,u.type,f):u.hasOwnProperty("defaultValue")&&ct(l,u.type,ye(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function nr(l,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,f||u===l.value||(l.value=u),l.defaultValue=u}f=l.name,f!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,f!==""&&(l.name=f)}function ct(l,u,f){(u!=="number"||je(l.ownerDocument)!==l)&&(f==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+f&&(l.defaultValue=""+f))}var ge=Array.isArray;function Ce(l,u,f,x){if(l=l.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<l.length;f++)_=u.hasOwnProperty("$"+l[f].value),l[f].selected!==_&&(l[f].selected=_),_&&x&&(l[f].defaultSelected=!0)}else{for(f=""+ye(f),u=null,_=0;_<l.length;_++){if(l[_].value===f){l[_].selected=!0,x&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function tt(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(r(91));return re({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Ar(l,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(r(92));if(ge(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),f=u}l._wrapperState={initialValue:ye(f)}}function St(l,u){var f=ye(u.value),x=ye(u.defaultValue);f!=null&&(f=""+f,f!==l.value&&(l.value=f),u.defaultValue==null&&l.defaultValue!==f&&(l.defaultValue=f)),x!=null&&(l.defaultValue=""+x)}function un(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function qt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?qt(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ln,Qs=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,x,_){MSApp.execUnsafeLocalFunction(function(){return l(u,f,x,_)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ln.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function Ra(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var Be={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qe=["Webkit","ms","Moz","O"];Object.keys(Be).forEach(function(l){Qe.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),Be[u]=Be[l]})});function ft(l,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||Be.hasOwnProperty(l)&&Be[l]?(""+u).trim():u+"px"}function rt(l,u){l=l.style;for(var f in u)if(u.hasOwnProperty(f)){var x=f.indexOf("--")===0,_=ft(f,u[f],x);f==="float"&&(f="cssFloat"),x?l.setProperty(f,_):l[f]=_}}var zt=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vr(l,u){if(u){if(zt[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(r(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(r(61))}if(u.style!=null&&typeof u.style!="object")throw Error(r(62))}}function Wt(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function ll(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var cl=null,$n=null,Da=null;function ul(l){if(l=Cu(l)){if(typeof cl!="function")throw Error(r(280));var u=l.stateNode;u&&(u=Sf(u),cl(l.stateNode,l.type,u))}}function Ma(l){$n?Da?Da.push(l):Da=[l]:$n=l}function ou(){if($n){var l=$n,u=Da;if(Da=$n=null,ul(l),u)for(l=0;l<u.length;l++)ul(u[l])}}function Ys(l,u){return l(u)}function lu(){}var ui=!1;function cu(l,u,f){if(ui)return l(u,f);ui=!0;try{return Ys(l,u,f)}finally{ui=!1,($n!==null||Da!==null)&&(lu(),ou())}}function Zt(l,u){var f=l.stateNode;if(f===null)return null;var x=Sf(f);if(x===null)return null;f=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var dl=!1;if(c)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){dl=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{dl=!1}function Xs(l,u,f,x,_,O,U,H,K){var ce=Array.prototype.slice.call(arguments,3);try{u.apply(f,ce)}catch(we){this.onError(we)}}var Js=!1,hl=null,ia=!1,uu=null,kg={onError:function(l){Js=!0,hl=l}};function fl(l,u,f,x,_,O,U,H,K){Js=!1,hl=null,Xs.apply(kg,arguments)}function Yh(l,u,f,x,_,O,U,H,K){if(fl.apply(this,arguments),Js){if(Js){var ce=hl;Js=!1,hl=null}else throw Error(r(198));ia||(ia=!0,uu=ce)}}function sa(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function Zs(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function oa(l){if(sa(l)!==l)throw Error(r(188))}function Xh(l){var u=l.alternate;if(!u){if(u=sa(l),u===null)throw Error(r(188));return u!==l?null:l}for(var f=l,x=u;;){var _=f.return;if(_===null)break;var O=_.alternate;if(O===null){if(x=_.return,x!==null){f=x;continue}break}if(_.child===O.child){for(O=_.child;O;){if(O===f)return oa(_),l;if(O===x)return oa(_),u;O=O.sibling}throw Error(r(188))}if(f.return!==x.return)f=_,x=O;else{for(var U=!1,H=_.child;H;){if(H===f){U=!0,f=_,x=O;break}if(H===x){U=!0,x=_,f=O;break}H=H.sibling}if(!U){for(H=O.child;H;){if(H===f){U=!0,f=O,x=_;break}if(H===x){U=!0,x=O,f=_;break}H=H.sibling}if(!U)throw Error(r(189))}}if(f.alternate!==x)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:u}function du(l){return l=Xh(l),l!==null?ml(l):null}function ml(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ml(l);if(u!==null)return u;l=l.sibling}return null}var pl=e.unstable_scheduleCallback,hu=e.unstable_cancelCallback,Jh=e.unstable_shouldYield,_g=e.unstable_requestPaint,At=e.unstable_now,Zh=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,Yi=e.unstable_UserBlockingPriority,Fn=e.unstable_NormalPriority,fu=e.unstable_LowPriority,ef=e.unstable_IdlePriority,to=null,_n=null;function tf(l){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(to,l,void 0,(l.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:nf,mu=Math.log,rf=Math.LN2;function nf(l){return l>>>=0,l===0?32:31-(mu(l)/rf|0)|0}var gl=64,yl=4194304;function Xi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ro(l,u){var f=l.pendingLanes;if(f===0)return 0;var x=0,_=l.suspendedLanes,O=l.pingedLanes,U=f&268435455;if(U!==0){var H=U&~_;H!==0?x=Xi(H):(O&=U,O!==0&&(x=Xi(O)))}else U=f&~_,U!==0?x=Xi(U):O!==0&&(x=Xi(O));if(x===0)return 0;if(u!==0&&u!==x&&(u&_)===0&&(_=x&-x,O=u&-u,_>=O||_===16&&(O&4194240)!==0))return u;if((x&4)!==0&&(x|=f&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=x;0<u;)f=31-Jr(u),_=1<<f,x|=l[f],u&=~_;return x}function jg(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(l,u){for(var f=l.suspendedLanes,x=l.pingedLanes,_=l.expirationTimes,O=l.pendingLanes;0<O;){var U=31-Jr(O),H=1<<U,K=_[U];K===-1?((H&f)===0||(H&x)!==0)&&(_[U]=jg(H,u)):K<=u&&(l.expiredLanes|=H),O&=~H}}function jn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function no(){var l=gl;return gl<<=1,(gl&4194240)===0&&(gl=64),l}function Ji(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function Zi(l,u,f){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Jr(u),l[u]=f}function Et(l,u){var f=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<f;){var _=31-Jr(f),O=1<<_;u[_]=0,x[_]=-1,l[_]=-1,f&=~O}}function es(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var x=31-Jr(f),_=1<<x;_&u|l[x]&u&&(l[x]|=u),f&=~_}}var ot=0;function ts(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var af,xl,sf,of,lf,pu=!1,La=[],Cr=null,la=null,ca=null,rs=new Map,Vn=new Map,$a=[],Ng="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(l,u){switch(l){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":rs.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(u.pointerId)}}function dn(l,u,f,x,_,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:f,eventSystemFlags:x,nativeEvent:O,targetContainers:[_]},u!==null&&(u=Cu(u),u!==null&&xl(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function Sg(l,u,f,x,_){switch(u){case"focusin":return Cr=dn(Cr,l,u,f,x,_),!0;case"dragenter":return la=dn(la,l,u,f,x,_),!0;case"mouseover":return ca=dn(ca,l,u,f,x,_),!0;case"pointerover":var O=_.pointerId;return rs.set(O,dn(rs.get(O)||null,l,u,f,x,_)),!0;case"gotpointercapture":return O=_.pointerId,Vn.set(O,dn(Vn.get(O)||null,l,u,f,x,_)),!0}return!1}function uf(l){var u=lo(l.target);if(u!==null){var f=sa(u);if(f!==null){if(u=f.tag,u===13){if(u=Zs(f),u!==null){l.blockedOn=u,lf(l.priority,function(){sf(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function hi(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=vl(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(f===null){f=l.nativeEvent;var x=new f.constructor(f.type,f);Fr=x,f.target.dispatchEvent(x),Fr=null}else return u=Cu(f),u!==null&&xl(u),l.blockedOn=f,!1;u.shift()}return!0}function ao(l,u,f){hi(l)&&f.delete(u)}function df(){pu=!1,Cr!==null&&hi(Cr)&&(Cr=null),la!==null&&hi(la)&&(la=null),ca!==null&&hi(ca)&&(ca=null),rs.forEach(ao),Vn.forEach(ao)}function ua(l,u){l.blockedOn===u&&(l.blockedOn=null,pu||(pu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,df)))}function da(l){function u(_){return ua(_,l)}if(0<La.length){ua(La[0],l);for(var f=1;f<La.length;f++){var x=La[f];x.blockedOn===l&&(x.blockedOn=null)}}for(Cr!==null&&ua(Cr,l),la!==null&&ua(la,l),ca!==null&&ua(ca,l),rs.forEach(u),Vn.forEach(u),f=0;f<$a.length;f++)x=$a[f],x.blockedOn===l&&(x.blockedOn=null);for(;0<$a.length&&(f=$a[0],f.blockedOn===null);)uf(f),f.blockedOn===null&&$a.shift()}var fi=P.ReactCurrentBatchConfig,ns=!0;function Ft(l,u,f,x){var _=ot,O=fi.transition;fi.transition=null;try{ot=1,gu(l,u,f,x)}finally{ot=_,fi.transition=O}}function Eg(l,u,f,x){var _=ot,O=fi.transition;fi.transition=null;try{ot=4,gu(l,u,f,x)}finally{ot=_,fi.transition=O}}function gu(l,u,f,x){if(ns){var _=vl(l,u,f,x);if(_===null)$g(l,u,x,io,f),cf(l,x);else if(Sg(_,l,u,f,x))x.stopPropagation();else if(cf(l,x),u&4&&-1<Ng.indexOf(l)){for(;_!==null;){var O=Cu(_);if(O!==null&&af(O),O=vl(l,u,f,x),O===null&&$g(l,u,x,io,f),O===_)break;_=O}_!==null&&x.stopPropagation()}else $g(l,u,x,null,f)}}var io=null;function vl(l,u,f,x){if(io=null,l=ll(x),l=lo(l),l!==null)if(u=sa(l),u===null)l=null;else if(f=u.tag,f===13){if(l=Zs(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return io=l,null}function yu(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zh()){case eo:return 1;case Yi:return 4;case Fn:case fu:return 16;case ef:return 536870912;default:return 16}default:return 16}}var Nn=null,bl=null,hn=null;function xu(){if(hn)return hn;var l,u=bl,f=u.length,x,_="value"in Nn?Nn.value:Nn.textContent,O=_.length;for(l=0;l<f&&u[l]===_[l];l++);var U=f-l;for(x=1;x<=U&&u[f-x]===_[O-x];x++);return hn=_.slice(l,1<x?1-x:void 0)}function wl(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Fa(){return!0}function vu(){return!1}function Pr(l){function u(f,x,_,O,U){this._reactName=f,this._targetInst=_,this.type=x,this.nativeEvent=O,this.target=U,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(f=l[H],this[H]=f?f(O):O[H]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Fa:vu,this.isPropagationStopped=vu,this}return re(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),u}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=Pr(ha),Va=re({},ha,{view:0,detail:0}),Tg=Pr(Va),_l,mi,as,so=re({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==as&&(as&&l.type==="mousemove"?(_l=l.screenX-as.screenX,mi=l.screenY-as.screenY):mi=_l=0,as=l),_l)},movementY:function(l){return"movementY"in l?l.movementY:mi}}),jl=Pr(so),bu=re({},so,{dataTransfer:0}),hf=Pr(bu),Nl=re({},Va,{relatedTarget:0}),Sl=Pr(Nl),ff=re({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),pi=Pr(ff),mf=re({},ha,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),pf=Pr(mf),gf=re({},ha,{data:0}),wu=Pr(gf),El={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=yf[l])?!!u[l]:!1}function Ua(){return xf}var g=re({},Va,{key:function(l){if(l.key){var u=El[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=wl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Zr[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(l){return l.type==="keypress"?wl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?wl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),I=Pr(g),$=re({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B=Pr($),ae=re({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),ue=Pr(ae),Ee=re({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),bt=Pr(Ee),dr=re({},so,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ut=Pr(dr),br=[9,13,27,32],ar=c&&"CompositionEvent"in window,Un=null;c&&"documentMode"in document&&(Un=document.documentMode);var Sn=c&&"TextEvent"in window&&!Un,oo=c&&(!ar||Un&&8<Un&&11>=Un),Tl=" ",EN=!1;function TN(l,u){switch(l){case"keyup":return br.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AN(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Al=!1;function M5(l,u){switch(l){case"compositionend":return AN(u);case"keypress":return u.which!==32?null:(EN=!0,Tl);case"textInput":return l=u.data,l===Tl&&EN?null:l;default:return null}}function L5(l,u){if(Al)return l==="compositionend"||!ar&&TN(l,u)?(l=xu(),hn=bl=Nn=null,Al=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return oo&&u.locale!=="ko"?null:u.data;default:return null}}var $5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CN(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!$5[l.type]:u==="textarea"}function PN(l,u,f,x){Ma(x),u=_f(u,"onChange"),0<u.length&&(f=new kl("onChange","change",null,f,x),l.push({event:f,listeners:u}))}var ku=null,_u=null;function F5(l){QN(l,0)}function vf(l){var u=Rl(l);if(le(u))return l}function V5(l,u){if(l==="change")return u}var IN=!1;if(c){var Ag;if(c){var Cg="oninput"in document;if(!Cg){var ON=document.createElement("div");ON.setAttribute("oninput","return;"),Cg=typeof ON.oninput=="function"}Ag=Cg}else Ag=!1;IN=Ag&&(!document.documentMode||9<document.documentMode)}function RN(){ku&&(ku.detachEvent("onpropertychange",DN),_u=ku=null)}function DN(l){if(l.propertyName==="value"&&vf(_u)){var u=[];PN(u,_u,l,ll(l)),cu(F5,u)}}function U5(l,u,f){l==="focusin"?(RN(),ku=u,_u=f,ku.attachEvent("onpropertychange",DN)):l==="focusout"&&RN()}function B5(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vf(_u)}function q5(l,u){if(l==="click")return vf(u)}function z5(l,u){if(l==="input"||l==="change")return vf(u)}function W5(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var fa=typeof Object.is=="function"?Object.is:W5;function ju(l,u){if(fa(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),x=Object.keys(u);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var _=f[x];if(!d.call(u,_)||!fa(l[_],u[_]))return!1}return!0}function MN(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function LN(l,u){var f=MN(l);l=0;for(var x;f;){if(f.nodeType===3){if(x=l+f.textContent.length,l<=u&&x>=u)return{node:f,offset:u-l};l=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=MN(f)}}function $N(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?$N(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function FN(){for(var l=window,u=je();u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=je(l.document)}return u}function Pg(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function H5(l){var u=FN(),f=l.focusedElem,x=l.selectionRange;if(u!==f&&f&&f.ownerDocument&&$N(f.ownerDocument.documentElement,f)){if(x!==null&&Pg(f)){if(u=x.start,l=x.end,l===void 0&&(l=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(l,f.value.length);else if(l=(u=f.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var _=f.textContent.length,O=Math.min(x.start,_);x=x.end===void 0?O:Math.min(x.end,_),!l.extend&&O>x&&(_=x,x=O,O=_),_=LN(f,O);var U=LN(f,x);_&&U&&(l.rangeCount!==1||l.anchorNode!==_.node||l.anchorOffset!==_.offset||l.focusNode!==U.node||l.focusOffset!==U.offset)&&(u=u.createRange(),u.setStart(_.node,_.offset),l.removeAllRanges(),O>x?(l.addRange(u),l.extend(U.node,U.offset)):(u.setEnd(U.node,U.offset),l.addRange(u)))}}for(u=[],l=f;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)l=u[f],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var G5=c&&"documentMode"in document&&11>=document.documentMode,Cl=null,Ig=null,Nu=null,Og=!1;function VN(l,u,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Og||Cl==null||Cl!==je(x)||(x=Cl,"selectionStart"in x&&Pg(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Nu&&ju(Nu,x)||(Nu=x,x=_f(Ig,"onSelect"),0<x.length&&(u=new kl("onSelect","select",null,u,f),l.push({event:u,listeners:x}),u.target=Cl)))}function bf(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var Pl={animationend:bf("Animation","AnimationEnd"),animationiteration:bf("Animation","AnimationIteration"),animationstart:bf("Animation","AnimationStart"),transitionend:bf("Transition","TransitionEnd")},Rg={},UN={};c&&(UN=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function wf(l){if(Rg[l])return Rg[l];if(!Pl[l])return l;var u=Pl[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in UN)return Rg[l]=u[f];return l}var BN=wf("animationend"),qN=wf("animationiteration"),zN=wf("animationstart"),WN=wf("transitionend"),HN=new Map,GN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(l,u){HN.set(l,u),s(u,[l])}for(var Dg=0;Dg<GN.length;Dg++){var Mg=GN[Dg],K5=Mg.toLowerCase(),Q5=Mg[0].toUpperCase()+Mg.slice(1);is(K5,"on"+Q5)}is(BN,"onAnimationEnd"),is(qN,"onAnimationIteration"),is(zN,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(WN,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function KN(l,u,f){var x=l.type||"unknown-event";l.currentTarget=f,Yh(x,u,void 0,l),l.currentTarget=null}function QN(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var x=l[f],_=x.event;x=x.listeners;e:{var O=void 0;if(u)for(var U=x.length-1;0<=U;U--){var H=x[U],K=H.instance,ce=H.currentTarget;if(H=H.listener,K!==O&&_.isPropagationStopped())break e;KN(_,H,ce),O=K}else for(U=0;U<x.length;U++){if(H=x[U],K=H.instance,ce=H.currentTarget,H=H.listener,K!==O&&_.isPropagationStopped())break e;KN(_,H,ce),O=K}}}if(ia)throw l=uu,ia=!1,uu=null,l}function Rt(l,u){var f=u[zg];f===void 0&&(f=u[zg]=new Set);var x=l+"__bubble";f.has(x)||(YN(u,l,2,!1),f.add(x))}function Lg(l,u,f){var x=0;u&&(x|=4),YN(f,l,x,u)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Eu(l){if(!l[kf]){l[kf]=!0,n.forEach(function(f){f!=="selectionchange"&&(Y5.has(f)||Lg(f,!1,l),Lg(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[kf]||(u[kf]=!0,Lg("selectionchange",!1,u))}}function YN(l,u,f,x){switch(yu(u)){case 1:var _=Ft;break;case 4:_=Eg;break;default:_=gu}f=_.bind(null,u,f,l),_=void 0,!dl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),x?_!==void 0?l.addEventListener(u,f,{capture:!0,passive:_}):l.addEventListener(u,f,!0):_!==void 0?l.addEventListener(u,f,{passive:_}):l.addEventListener(u,f,!1)}function $g(l,u,f,x,_){var O=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var U=x.tag;if(U===3||U===4){var H=x.stateNode.containerInfo;if(H===_||H.nodeType===8&&H.parentNode===_)break;if(U===4)for(U=x.return;U!==null;){var K=U.tag;if((K===3||K===4)&&(K=U.stateNode.containerInfo,K===_||K.nodeType===8&&K.parentNode===_))return;U=U.return}for(;H!==null;){if(U=lo(H),U===null)return;if(K=U.tag,K===5||K===6){x=O=U;continue e}H=H.parentNode}}x=x.return}cu(function(){var ce=O,we=ll(f),_e=[];e:{var be=HN.get(l);if(be!==void 0){var Ae=kl,De=l;switch(l){case"keypress":if(wl(f)===0)break e;case"keydown":case"keyup":Ae=I;break;case"focusin":De="focus",Ae=Sl;break;case"focusout":De="blur",Ae=Sl;break;case"beforeblur":case"afterblur":Ae=Sl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=ue;break;case BN:case qN:case zN:Ae=pi;break;case WN:Ae=bt;break;case"scroll":Ae=Tg;break;case"wheel":Ae=ut;break;case"copy":case"cut":case"paste":Ae=pf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=B}var Me=(u&4)!==0,er=!Me&&l==="scroll",ie=Me?be!==null?be+"Capture":null:be;Me=[];for(var te=ce,se;te!==null;){se=te;var Ne=se.stateNode;if(se.tag===5&&Ne!==null&&(se=Ne,ie!==null&&(Ne=Zt(te,ie),Ne!=null&&Me.push(Tu(te,Ne,se)))),er)break;te=te.return}0<Me.length&&(be=new Ae(be,De,null,f,we),_e.push({event:be,listeners:Me}))}}if((u&7)===0){e:{if(be=l==="mouseover"||l==="pointerover",Ae=l==="mouseout"||l==="pointerout",be&&f!==Fr&&(De=f.relatedTarget||f.fromElement)&&(lo(De)||De[gi]))break e;if((Ae||be)&&(be=we.window===we?we:(be=we.ownerDocument)?be.defaultView||be.parentWindow:window,Ae?(De=f.relatedTarget||f.toElement,Ae=ce,De=De?lo(De):null,De!==null&&(er=sa(De),De!==er||De.tag!==5&&De.tag!==6)&&(De=null)):(Ae=null,De=ce),Ae!==De)){if(Me=jl,Ne="onMouseLeave",ie="onMouseEnter",te="mouse",(l==="pointerout"||l==="pointerover")&&(Me=B,Ne="onPointerLeave",ie="onPointerEnter",te="pointer"),er=Ae==null?be:Rl(Ae),se=De==null?be:Rl(De),be=new Me(Ne,te+"leave",Ae,f,we),be.target=er,be.relatedTarget=se,Ne=null,lo(we)===ce&&(Me=new Me(ie,te+"enter",De,f,we),Me.target=se,Me.relatedTarget=er,Ne=Me),er=Ne,Ae&&De)t:{for(Me=Ae,ie=De,te=0,se=Me;se;se=Il(se))te++;for(se=0,Ne=ie;Ne;Ne=Il(Ne))se++;for(;0<te-se;)Me=Il(Me),te--;for(;0<se-te;)ie=Il(ie),se--;for(;te--;){if(Me===ie||ie!==null&&Me===ie.alternate)break t;Me=Il(Me),ie=Il(ie)}Me=null}else Me=null;Ae!==null&&XN(_e,be,Ae,Me,!1),De!==null&&er!==null&&XN(_e,er,De,Me,!0)}}e:{if(be=ce?Rl(ce):window,Ae=be.nodeName&&be.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&be.type==="file")var $e=V5;else if(CN(be))if(IN)$e=z5;else{$e=B5;var Ve=U5}else(Ae=be.nodeName)&&Ae.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&($e=q5);if($e&&($e=$e(l,ce))){PN(_e,$e,f,we);break e}Ve&&Ve(l,be,ce),l==="focusout"&&(Ve=be._wrapperState)&&Ve.controlled&&be.type==="number"&&ct(be,"number",be.value)}switch(Ve=ce?Rl(ce):window,l){case"focusin":(CN(Ve)||Ve.contentEditable==="true")&&(Cl=Ve,Ig=ce,Nu=null);break;case"focusout":Nu=Ig=Cl=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,VN(_e,f,we);break;case"selectionchange":if(G5)break;case"keydown":case"keyup":VN(_e,f,we)}var Ue;if(ar)e:{switch(l){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Al?TN(l,f)&&(He="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(He="onCompositionStart");He&&(oo&&f.locale!=="ko"&&(Al||He!=="onCompositionStart"?He==="onCompositionEnd"&&Al&&(Ue=xu()):(Nn=we,bl="value"in Nn?Nn.value:Nn.textContent,Al=!0)),Ve=_f(ce,He),0<Ve.length&&(He=new wu(He,l,null,f,we),_e.push({event:He,listeners:Ve}),Ue?He.data=Ue:(Ue=AN(f),Ue!==null&&(He.data=Ue)))),(Ue=Sn?M5(l,f):L5(l,f))&&(ce=_f(ce,"onBeforeInput"),0<ce.length&&(we=new wu("onBeforeInput","beforeinput",null,f,we),_e.push({event:we,listeners:ce}),we.data=Ue))}QN(_e,u)})}function Tu(l,u,f){return{instance:l,listener:u,currentTarget:f}}function _f(l,u){for(var f=u+"Capture",x=[];l!==null;){var _=l,O=_.stateNode;_.tag===5&&O!==null&&(_=O,O=Zt(l,f),O!=null&&x.unshift(Tu(l,O,_)),O=Zt(l,u),O!=null&&x.push(Tu(l,O,_))),l=l.return}return x}function Il(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function XN(l,u,f,x,_){for(var O=u._reactName,U=[];f!==null&&f!==x;){var H=f,K=H.alternate,ce=H.stateNode;if(K!==null&&K===x)break;H.tag===5&&ce!==null&&(H=ce,_?(K=Zt(f,O),K!=null&&U.unshift(Tu(f,K,H))):_||(K=Zt(f,O),K!=null&&U.push(Tu(f,K,H)))),f=f.return}U.length!==0&&l.push({event:u,listeners:U})}var X5=/\r\n?/g,J5=/\u0000|\uFFFD/g;function JN(l){return(typeof l=="string"?l:""+l).replace(X5,`
`).replace(J5,"")}function jf(l,u,f){if(u=JN(u),JN(l)!==u&&f)throw Error(r(425))}function Nf(){}var Fg=null,Vg=null;function Ug(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,Z5=typeof clearTimeout=="function"?clearTimeout:void 0,ZN=typeof Promise=="function"?Promise:void 0,e$=typeof queueMicrotask=="function"?queueMicrotask:typeof ZN<"u"?function(l){return ZN.resolve(null).then(l).catch(t$)}:Bg;function t$(l){setTimeout(function(){throw l})}function qg(l,u){var f=u,x=0;do{var _=f.nextSibling;if(l.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"){if(x===0){l.removeChild(_),da(u);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=_}while(f);da(u)}function ss(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function eS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Ol,Au="__reactProps$"+Ol,gi="__reactContainer$"+Ol,zg="__reactEvents$"+Ol,r$="__reactListeners$"+Ol,n$="__reactHandles$"+Ol;function lo(l){var u=l[Ba];if(u)return u;for(var f=l.parentNode;f;){if(u=f[gi]||f[Ba]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=eS(l);l!==null;){if(f=l[Ba])return f;l=eS(l)}return u}l=f,f=l.parentNode}return null}function Cu(l){return l=l[Ba]||l[gi],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Rl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function Sf(l){return l[Au]||null}var Wg=[],Dl=-1;function os(l){return{current:l}}function Dt(l){0>Dl||(l.current=Wg[Dl],Wg[Dl]=null,Dl--)}function Ct(l,u){Dl++,Wg[Dl]=l.current,l.current=u}var ls={},Vr=os(ls),fn=os(!1),co=ls;function Ml(l,u){var f=l.type.contextTypes;if(!f)return ls;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var _={},O;for(O in f)_[O]=u[O];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=_),_}function mn(l){return l=l.childContextTypes,l!=null}function Ef(){Dt(fn),Dt(Vr)}function tS(l,u,f){if(Vr.current!==ls)throw Error(r(168));Ct(Vr,u),Ct(fn,f)}function rS(l,u,f){var x=l.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var _ in x)if(!(_ in u))throw Error(r(108,fe(l)||"Unknown",_));return re({},f,x)}function Tf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ls,co=Vr.current,Ct(Vr,l),Ct(fn,fn.current),!0}function nS(l,u,f){var x=l.stateNode;if(!x)throw Error(r(169));f?(l=rS(l,u,co),x.__reactInternalMemoizedMergedChildContext=l,Dt(fn),Dt(Vr),Ct(Vr,l)):Dt(fn),Ct(fn,f)}var yi=null,Af=!1,Hg=!1;function aS(l){yi===null?yi=[l]:yi.push(l)}function a$(l){Af=!0,aS(l)}function cs(){if(!Hg&&yi!==null){Hg=!0;var l=0,u=ot;try{var f=yi;for(ot=1;l<f.length;l++){var x=f[l];do x=x(!0);while(x!==null)}yi=null,Af=!1}catch(_){throw yi!==null&&(yi=yi.slice(l+1)),pl(eo,cs),_}finally{ot=u,Hg=!1}}return null}var Ll=[],$l=0,Cf=null,Pf=0,Bn=[],qn=0,uo=null,xi=1,vi="";function ho(l,u){Ll[$l++]=Pf,Ll[$l++]=Cf,Cf=l,Pf=u}function iS(l,u,f){Bn[qn++]=xi,Bn[qn++]=vi,Bn[qn++]=uo,uo=l;var x=xi;l=vi;var _=32-Jr(x)-1;x&=~(1<<_),f+=1;var O=32-Jr(u)+_;if(30<O){var U=_-_%5;O=(x&(1<<U)-1).toString(32),x>>=U,_-=U,xi=1<<32-Jr(u)+_|f<<_|x,vi=O+l}else xi=1<<O|f<<_|x,vi=l}function Gg(l){l.return!==null&&(ho(l,1),iS(l,1,0))}function Kg(l){for(;l===Cf;)Cf=Ll[--$l],Ll[$l]=null,Pf=Ll[--$l],Ll[$l]=null;for(;l===uo;)uo=Bn[--qn],Bn[qn]=null,vi=Bn[--qn],Bn[qn]=null,xi=Bn[--qn],Bn[qn]=null}var En=null,Tn=null,Vt=!1,ma=null;function sS(l,u){var f=Gn(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=l,u=l.deletions,u===null?(l.deletions=[f],l.flags|=16):u.push(f)}function oS(l,u){switch(l.tag){case 5:var f=l.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,En=l,Tn=ss(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,En=l,Tn=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=uo!==null?{id:xi,overflow:vi}:null,l.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=Gn(18,null,null,0),f.stateNode=u,f.return=l,l.child=f,En=l,Tn=null,!0):!1;default:return!1}}function Qg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Yg(l){if(Vt){var u=Tn;if(u){var f=u;if(!oS(l,u)){if(Qg(l))throw Error(r(418));u=ss(f.nextSibling);var x=En;u&&oS(l,u)?sS(x,f):(l.flags=l.flags&-4097|2,Vt=!1,En=l)}}else{if(Qg(l))throw Error(r(418));l.flags=l.flags&-4097|2,Vt=!1,En=l}}}function lS(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;En=l}function If(l){if(l!==En)return!1;if(!Vt)return lS(l),Vt=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Ug(l.type,l.memoizedProps)),u&&(u=Tn)){if(Qg(l))throw cS(),Error(r(418));for(;u;)sS(l,u),u=ss(u.nextSibling)}if(lS(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"){if(u===0){Tn=ss(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}l=l.nextSibling}Tn=null}}else Tn=En?ss(l.stateNode.nextSibling):null;return!0}function cS(){for(var l=Tn;l;)l=ss(l.nextSibling)}function Fl(){Tn=En=null,Vt=!1}function Xg(l){ma===null?ma=[l]:ma.push(l)}var i$=P.ReactCurrentBatchConfig;function Pu(l,u,f){if(l=f.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(r(309));var x=f.stateNode}if(!x)throw Error(r(147,l));var _=x,O=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===O?u.ref:(u=function(U){var H=_.refs;U===null?delete H[O]:H[O]=U},u._stringRef=O,u)}if(typeof l!="string")throw Error(r(284));if(!f._owner)throw Error(r(290,l))}return l}function Of(l,u){throw l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function uS(l){var u=l._init;return u(l._payload)}function dS(l){function u(ie,te){if(l){var se=ie.deletions;se===null?(ie.deletions=[te],ie.flags|=16):se.push(te)}}function f(ie,te){if(!l)return null;for(;te!==null;)u(ie,te),te=te.sibling;return null}function x(ie,te){for(ie=new Map;te!==null;)te.key!==null?ie.set(te.key,te):ie.set(te.index,te),te=te.sibling;return ie}function _(ie,te){return ie=ys(ie,te),ie.index=0,ie.sibling=null,ie}function O(ie,te,se){return ie.index=se,l?(se=ie.alternate,se!==null?(se=se.index,se<te?(ie.flags|=2,te):se):(ie.flags|=2,te)):(ie.flags|=1048576,te)}function U(ie){return l&&ie.alternate===null&&(ie.flags|=2),ie}function H(ie,te,se,Ne){return te===null||te.tag!==6?(te=By(se,ie.mode,Ne),te.return=ie,te):(te=_(te,se),te.return=ie,te)}function K(ie,te,se,Ne){var $e=se.type;return $e===A?we(ie,te,se.props.children,Ne,se.key):te!==null&&(te.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===W&&uS($e)===te.type)?(Ne=_(te,se.props),Ne.ref=Pu(ie,te,se),Ne.return=ie,Ne):(Ne=nm(se.type,se.key,se.props,null,ie.mode,Ne),Ne.ref=Pu(ie,te,se),Ne.return=ie,Ne)}function ce(ie,te,se,Ne){return te===null||te.tag!==4||te.stateNode.containerInfo!==se.containerInfo||te.stateNode.implementation!==se.implementation?(te=qy(se,ie.mode,Ne),te.return=ie,te):(te=_(te,se.children||[]),te.return=ie,te)}function we(ie,te,se,Ne,$e){return te===null||te.tag!==7?(te=bo(se,ie.mode,Ne,$e),te.return=ie,te):(te=_(te,se),te.return=ie,te)}function _e(ie,te,se){if(typeof te=="string"&&te!==""||typeof te=="number")return te=By(""+te,ie.mode,se),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return se=nm(te.type,te.key,te.props,null,ie.mode,se),se.ref=Pu(ie,null,te),se.return=ie,se;case T:return te=qy(te,ie.mode,se),te.return=ie,te;case W:var Ne=te._init;return _e(ie,Ne(te._payload),se)}if(ge(te)||ee(te))return te=bo(te,ie.mode,se,null),te.return=ie,te;Of(ie,te)}return null}function be(ie,te,se,Ne){var $e=te!==null?te.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return $e!==null?null:H(ie,te,""+se,Ne);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return se.key===$e?K(ie,te,se,Ne):null;case T:return se.key===$e?ce(ie,te,se,Ne):null;case W:return $e=se._init,be(ie,te,$e(se._payload),Ne)}if(ge(se)||ee(se))return $e!==null?null:we(ie,te,se,Ne,null);Of(ie,se)}return null}function Ae(ie,te,se,Ne,$e){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return ie=ie.get(se)||null,H(te,ie,""+Ne,$e);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return ie=ie.get(Ne.key===null?se:Ne.key)||null,K(te,ie,Ne,$e);case T:return ie=ie.get(Ne.key===null?se:Ne.key)||null,ce(te,ie,Ne,$e);case W:var Ve=Ne._init;return Ae(ie,te,se,Ve(Ne._payload),$e)}if(ge(Ne)||ee(Ne))return ie=ie.get(se)||null,we(te,ie,Ne,$e,null);Of(te,Ne)}return null}function De(ie,te,se,Ne){for(var $e=null,Ve=null,Ue=te,He=te=0,_r=null;Ue!==null&&He<se.length;He++){Ue.index>He?(_r=Ue,Ue=null):_r=Ue.sibling;var mt=be(ie,Ue,se[He],Ne);if(mt===null){Ue===null&&(Ue=_r);break}l&&Ue&&mt.alternate===null&&u(ie,Ue),te=O(mt,te,He),Ve===null?$e=mt:Ve.sibling=mt,Ve=mt,Ue=_r}if(He===se.length)return f(ie,Ue),Vt&&ho(ie,He),$e;if(Ue===null){for(;He<se.length;He++)Ue=_e(ie,se[He],Ne),Ue!==null&&(te=O(Ue,te,He),Ve===null?$e=Ue:Ve.sibling=Ue,Ve=Ue);return Vt&&ho(ie,He),$e}for(Ue=x(ie,Ue);He<se.length;He++)_r=Ae(Ue,ie,He,se[He],Ne),_r!==null&&(l&&_r.alternate!==null&&Ue.delete(_r.key===null?He:_r.key),te=O(_r,te,He),Ve===null?$e=_r:Ve.sibling=_r,Ve=_r);return l&&Ue.forEach(function(xs){return u(ie,xs)}),Vt&&ho(ie,He),$e}function Me(ie,te,se,Ne){var $e=ee(se);if(typeof $e!="function")throw Error(r(150));if(se=$e.call(se),se==null)throw Error(r(151));for(var Ve=$e=null,Ue=te,He=te=0,_r=null,mt=se.next();Ue!==null&&!mt.done;He++,mt=se.next()){Ue.index>He?(_r=Ue,Ue=null):_r=Ue.sibling;var xs=be(ie,Ue,mt.value,Ne);if(xs===null){Ue===null&&(Ue=_r);break}l&&Ue&&xs.alternate===null&&u(ie,Ue),te=O(xs,te,He),Ve===null?$e=xs:Ve.sibling=xs,Ve=xs,Ue=_r}if(mt.done)return f(ie,Ue),Vt&&ho(ie,He),$e;if(Ue===null){for(;!mt.done;He++,mt=se.next())mt=_e(ie,mt.value,Ne),mt!==null&&(te=O(mt,te,He),Ve===null?$e=mt:Ve.sibling=mt,Ve=mt);return Vt&&ho(ie,He),$e}for(Ue=x(ie,Ue);!mt.done;He++,mt=se.next())mt=Ae(Ue,ie,He,mt.value,Ne),mt!==null&&(l&&mt.alternate!==null&&Ue.delete(mt.key===null?He:mt.key),te=O(mt,te,He),Ve===null?$e=mt:Ve.sibling=mt,Ve=mt);return l&&Ue.forEach(function($$){return u(ie,$$)}),Vt&&ho(ie,He),$e}function er(ie,te,se,Ne){if(typeof se=="object"&&se!==null&&se.type===A&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case S:e:{for(var $e=se.key,Ve=te;Ve!==null;){if(Ve.key===$e){if($e=se.type,$e===A){if(Ve.tag===7){f(ie,Ve.sibling),te=_(Ve,se.props.children),te.return=ie,ie=te;break e}}else if(Ve.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===W&&uS($e)===Ve.type){f(ie,Ve.sibling),te=_(Ve,se.props),te.ref=Pu(ie,Ve,se),te.return=ie,ie=te;break e}f(ie,Ve);break}else u(ie,Ve);Ve=Ve.sibling}se.type===A?(te=bo(se.props.children,ie.mode,Ne,se.key),te.return=ie,ie=te):(Ne=nm(se.type,se.key,se.props,null,ie.mode,Ne),Ne.ref=Pu(ie,te,se),Ne.return=ie,ie=Ne)}return U(ie);case T:e:{for(Ve=se.key;te!==null;){if(te.key===Ve)if(te.tag===4&&te.stateNode.containerInfo===se.containerInfo&&te.stateNode.implementation===se.implementation){f(ie,te.sibling),te=_(te,se.children||[]),te.return=ie,ie=te;break e}else{f(ie,te);break}else u(ie,te);te=te.sibling}te=qy(se,ie.mode,Ne),te.return=ie,ie=te}return U(ie);case W:return Ve=se._init,er(ie,te,Ve(se._payload),Ne)}if(ge(se))return De(ie,te,se,Ne);if(ee(se))return Me(ie,te,se,Ne);Of(ie,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,te!==null&&te.tag===6?(f(ie,te.sibling),te=_(te,se),te.return=ie,ie=te):(f(ie,te),te=By(se,ie.mode,Ne),te.return=ie,ie=te),U(ie)):f(ie,te)}return er}var Vl=dS(!0),hS=dS(!1),Rf=os(null),Df=null,Ul=null,Jg=null;function Zg(){Jg=Ul=Df=null}function ey(l){var u=Rf.current;Dt(Rf),l._currentValue=u}function ty(l,u,f){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===f)break;l=l.return}}function Bl(l,u){Df=l,Jg=Ul=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(pn=!0),l.firstContext=null)}function zn(l){var u=l._currentValue;if(Jg!==l)if(l={context:l,memoizedValue:u,next:null},Ul===null){if(Df===null)throw Error(r(308));Ul=l,Df.dependencies={lanes:0,firstContext:l}}else Ul=Ul.next=l;return u}var fo=null;function ry(l){fo===null?fo=[l]:fo.push(l)}function fS(l,u,f,x){var _=u.interleaved;return _===null?(f.next=f,ry(u)):(f.next=_.next,_.next=f),u.interleaved=f,bi(l,x)}function bi(l,u){l.lanes|=u;var f=l.alternate;for(f!==null&&(f.lanes|=u),f=l,l=l.return;l!==null;)l.childLanes|=u,f=l.alternate,f!==null&&(f.childLanes|=u),f=l,l=l.return;return f.tag===3?f.stateNode:null}var us=!1;function ny(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mS(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function wi(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function ds(l,u,f){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(ht&2)!==0){var _=x.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),x.pending=u,bi(l,f)}return _=x.interleaved,_===null?(u.next=u,ry(x)):(u.next=_.next,_.next=u),x.interleaved=u,bi(l,f)}function Mf(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,es(l,f)}}function pS(l,u){var f=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var _=null,O=null;if(f=f.firstBaseUpdate,f!==null){do{var U={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};O===null?_=O=U:O=O.next=U,f=f.next}while(f!==null);O===null?_=O=u:O=O.next=u}else _=O=u;f={baseState:x.baseState,firstBaseUpdate:_,lastBaseUpdate:O,shared:x.shared,effects:x.effects},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}function Lf(l,u,f,x){var _=l.updateQueue;us=!1;var O=_.firstBaseUpdate,U=_.lastBaseUpdate,H=_.shared.pending;if(H!==null){_.shared.pending=null;var K=H,ce=K.next;K.next=null,U===null?O=ce:U.next=ce,U=K;var we=l.alternate;we!==null&&(we=we.updateQueue,H=we.lastBaseUpdate,H!==U&&(H===null?we.firstBaseUpdate=ce:H.next=ce,we.lastBaseUpdate=K))}if(O!==null){var _e=_.baseState;U=0,we=ce=K=null,H=O;do{var be=H.lane,Ae=H.eventTime;if((x&be)===be){we!==null&&(we=we.next={eventTime:Ae,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var De=l,Me=H;switch(be=u,Ae=f,Me.tag){case 1:if(De=Me.payload,typeof De=="function"){_e=De.call(Ae,_e,be);break e}_e=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Me.payload,be=typeof De=="function"?De.call(Ae,_e,be):De,be==null)break e;_e=re({},_e,be);break e;case 2:us=!0}}H.callback!==null&&H.lane!==0&&(l.flags|=64,be=_.effects,be===null?_.effects=[H]:be.push(H))}else Ae={eventTime:Ae,lane:be,tag:H.tag,payload:H.payload,callback:H.callback,next:null},we===null?(ce=we=Ae,K=_e):we=we.next=Ae,U|=be;if(H=H.next,H===null){if(H=_.shared.pending,H===null)break;be=H,H=be.next,be.next=null,_.lastBaseUpdate=be,_.shared.pending=null}}while(!0);if(we===null&&(K=_e),_.baseState=K,_.firstBaseUpdate=ce,_.lastBaseUpdate=we,u=_.shared.interleaved,u!==null){_=u;do U|=_.lane,_=_.next;while(_!==u)}else O===null&&(_.shared.lanes=0);go|=U,l.lanes=U,l.memoizedState=_e}}function gS(l,u,f){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var x=l[u],_=x.callback;if(_!==null){if(x.callback=null,x=f,typeof _!="function")throw Error(r(191,_));_.call(x)}}}var Iu={},qa=os(Iu),Ou=os(Iu),Ru=os(Iu);function mo(l){if(l===Iu)throw Error(r(174));return l}function ay(l,u){switch(Ct(Ru,u),Ct(Ou,l),Ct(qa,Iu),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:_t(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=_t(u,l)}Dt(qa),Ct(qa,u)}function ql(){Dt(qa),Dt(Ou),Dt(Ru)}function yS(l){mo(Ru.current);var u=mo(qa.current),f=_t(u,l.type);u!==f&&(Ct(Ou,l),Ct(qa,f))}function iy(l){Ou.current===l&&(Dt(qa),Dt(Ou))}var Ht=os(0);function $f(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var sy=[];function oy(){for(var l=0;l<sy.length;l++)sy[l]._workInProgressVersionPrimary=null;sy.length=0}var Ff=P.ReactCurrentDispatcher,ly=P.ReactCurrentBatchConfig,po=0,Gt=null,hr=null,wr=null,Vf=!1,Du=!1,Mu=0,s$=0;function Ur(){throw Error(r(321))}function cy(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!fa(l[f],u[f]))return!1;return!0}function uy(l,u,f,x,_,O){if(po=O,Gt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ff.current=l===null||l.memoizedState===null?u$:d$,l=f(x,_),Du){O=0;do{if(Du=!1,Mu=0,25<=O)throw Error(r(301));O+=1,wr=hr=null,u.updateQueue=null,Ff.current=h$,l=f(x,_)}while(Du)}if(Ff.current=qf,u=hr!==null&&hr.next!==null,po=0,wr=hr=Gt=null,Vf=!1,u)throw Error(r(300));return l}function dy(){var l=Mu!==0;return Mu=0,l}function za(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?Gt.memoizedState=wr=l:wr=wr.next=l,wr}function Wn(){if(hr===null){var l=Gt.alternate;l=l!==null?l.memoizedState:null}else l=hr.next;var u=wr===null?Gt.memoizedState:wr.next;if(u!==null)wr=u,hr=l;else{if(l===null)throw Error(r(310));hr=l,l={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},wr===null?Gt.memoizedState=wr=l:wr=wr.next=l}return wr}function Lu(l,u){return typeof u=="function"?u(l):u}function hy(l){var u=Wn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=hr,_=x.baseQueue,O=f.pending;if(O!==null){if(_!==null){var U=_.next;_.next=O.next,O.next=U}x.baseQueue=_=O,f.pending=null}if(_!==null){O=_.next,x=x.baseState;var H=U=null,K=null,ce=O;do{var we=ce.lane;if((po&we)===we)K!==null&&(K=K.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),x=ce.hasEagerState?ce.eagerState:l(x,ce.action);else{var _e={lane:we,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};K===null?(H=K=_e,U=x):K=K.next=_e,Gt.lanes|=we,go|=we}ce=ce.next}while(ce!==null&&ce!==O);K===null?U=x:K.next=H,fa(x,u.memoizedState)||(pn=!0),u.memoizedState=x,u.baseState=U,u.baseQueue=K,f.lastRenderedState=x}if(l=f.interleaved,l!==null){_=l;do O=_.lane,Gt.lanes|=O,go|=O,_=_.next;while(_!==l)}else _===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function fy(l){var u=Wn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=f.dispatch,_=f.pending,O=u.memoizedState;if(_!==null){f.pending=null;var U=_=_.next;do O=l(O,U.action),U=U.next;while(U!==_);fa(O,u.memoizedState)||(pn=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),f.lastRenderedState=O}return[O,x]}function xS(){}function vS(l,u){var f=Gt,x=Wn(),_=u(),O=!fa(x.memoizedState,_);if(O&&(x.memoizedState=_,pn=!0),x=x.queue,my(kS.bind(null,f,x,l),[l]),x.getSnapshot!==u||O||wr!==null&&wr.memoizedState.tag&1){if(f.flags|=2048,$u(9,wS.bind(null,f,x,_,u),void 0,null),kr===null)throw Error(r(349));(po&30)!==0||bS(f,u,_)}return _}function bS(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=Gt.updateQueue,u===null?(u={lastEffect:null,stores:null},Gt.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function wS(l,u,f,x){u.value=f,u.getSnapshot=x,_S(u)&&jS(l)}function kS(l,u,f){return f(function(){_S(u)&&jS(l)})}function _S(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!fa(l,f)}catch{return!0}}function jS(l){var u=bi(l,1);u!==null&&xa(u,l,1,-1)}function NS(l){var u=za();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:l},u.queue=l,l=l.dispatch=c$.bind(null,Gt,l),[u.memoizedState,l]}function $u(l,u,f,x){return l={tag:l,create:u,destroy:f,deps:x,next:null},u=Gt.updateQueue,u===null?(u={lastEffect:null,stores:null},Gt.updateQueue=u,u.lastEffect=l.next=l):(f=u.lastEffect,f===null?u.lastEffect=l.next=l:(x=f.next,f.next=l,l.next=x,u.lastEffect=l)),l}function SS(){return Wn().memoizedState}function Uf(l,u,f,x){var _=za();Gt.flags|=l,_.memoizedState=$u(1|u,f,void 0,x===void 0?null:x)}function Bf(l,u,f,x){var _=Wn();x=x===void 0?null:x;var O=void 0;if(hr!==null){var U=hr.memoizedState;if(O=U.destroy,x!==null&&cy(x,U.deps)){_.memoizedState=$u(u,f,O,x);return}}Gt.flags|=l,_.memoizedState=$u(1|u,f,O,x)}function ES(l,u){return Uf(8390656,8,l,u)}function my(l,u){return Bf(2048,8,l,u)}function TS(l,u){return Bf(4,2,l,u)}function AS(l,u){return Bf(4,4,l,u)}function CS(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function PS(l,u,f){return f=f!=null?f.concat([l]):null,Bf(4,4,CS.bind(null,u,l),f)}function py(){}function IS(l,u){var f=Wn();u=u===void 0?null:u;var x=f.memoizedState;return x!==null&&u!==null&&cy(u,x[1])?x[0]:(f.memoizedState=[l,u],l)}function OS(l,u){var f=Wn();u=u===void 0?null:u;var x=f.memoizedState;return x!==null&&u!==null&&cy(u,x[1])?x[0]:(l=l(),f.memoizedState=[l,u],l)}function RS(l,u,f){return(po&21)===0?(l.baseState&&(l.baseState=!1,pn=!0),l.memoizedState=f):(fa(f,u)||(f=no(),Gt.lanes|=f,go|=f,l.baseState=!0),u)}function o$(l,u){var f=ot;ot=f!==0&&4>f?f:4,l(!0);var x=ly.transition;ly.transition={};try{l(!1),u()}finally{ot=f,ly.transition=x}}function DS(){return Wn().memoizedState}function l$(l,u,f){var x=ps(l);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},MS(l))LS(u,f);else if(f=fS(l,u,f,x),f!==null){var _=tn();xa(f,l,x,_),$S(f,u,x)}}function c$(l,u,f){var x=ps(l),_={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(MS(l))LS(u,_);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var U=u.lastRenderedState,H=O(U,f);if(_.hasEagerState=!0,_.eagerState=H,fa(H,U)){var K=u.interleaved;K===null?(_.next=_,ry(u)):(_.next=K.next,K.next=_),u.interleaved=_;return}}catch{}finally{}f=fS(l,u,_,x),f!==null&&(_=tn(),xa(f,l,x,_),$S(f,u,x))}}function MS(l){var u=l.alternate;return l===Gt||u!==null&&u===Gt}function LS(l,u){Du=Vf=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function $S(l,u,f){if((f&4194240)!==0){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,es(l,f)}}var qf={readContext:zn,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useInsertionEffect:Ur,useLayoutEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useMutableSource:Ur,useSyncExternalStore:Ur,useId:Ur,unstable_isNewReconciler:!1},u$={readContext:zn,useCallback:function(l,u){return za().memoizedState=[l,u===void 0?null:u],l},useContext:zn,useEffect:ES,useImperativeHandle:function(l,u,f){return f=f!=null?f.concat([l]):null,Uf(4194308,4,CS.bind(null,u,l),f)},useLayoutEffect:function(l,u){return Uf(4194308,4,l,u)},useInsertionEffect:function(l,u){return Uf(4,2,l,u)},useMemo:function(l,u){var f=za();return u=u===void 0?null:u,l=l(),f.memoizedState=[l,u],l},useReducer:function(l,u,f){var x=za();return u=f!==void 0?f(u):u,x.memoizedState=x.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},x.queue=l,l=l.dispatch=l$.bind(null,Gt,l),[x.memoizedState,l]},useRef:function(l){var u=za();return l={current:l},u.memoizedState=l},useState:NS,useDebugValue:py,useDeferredValue:function(l){return za().memoizedState=l},useTransition:function(){var l=NS(!1),u=l[0];return l=o$.bind(null,l[1]),za().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,f){var x=Gt,_=za();if(Vt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),kr===null)throw Error(r(349));(po&30)!==0||bS(x,u,f)}_.memoizedState=f;var O={value:f,getSnapshot:u};return _.queue=O,ES(kS.bind(null,x,O,l),[l]),x.flags|=2048,$u(9,wS.bind(null,x,O,f,u),void 0,null),f},useId:function(){var l=za(),u=kr.identifierPrefix;if(Vt){var f=vi,x=xi;f=(x&~(1<<32-Jr(x)-1)).toString(32)+f,u=":"+u+"R"+f,f=Mu++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=s$++,u=":"+u+"r"+f.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},d$={readContext:zn,useCallback:IS,useContext:zn,useEffect:my,useImperativeHandle:PS,useInsertionEffect:TS,useLayoutEffect:AS,useMemo:OS,useReducer:hy,useRef:SS,useState:function(){return hy(Lu)},useDebugValue:py,useDeferredValue:function(l){var u=Wn();return RS(u,hr.memoizedState,l)},useTransition:function(){var l=hy(Lu)[0],u=Wn().memoizedState;return[l,u]},useMutableSource:xS,useSyncExternalStore:vS,useId:DS,unstable_isNewReconciler:!1},h$={readContext:zn,useCallback:IS,useContext:zn,useEffect:my,useImperativeHandle:PS,useInsertionEffect:TS,useLayoutEffect:AS,useMemo:OS,useReducer:fy,useRef:SS,useState:function(){return fy(Lu)},useDebugValue:py,useDeferredValue:function(l){var u=Wn();return hr===null?u.memoizedState=l:RS(u,hr.memoizedState,l)},useTransition:function(){var l=fy(Lu)[0],u=Wn().memoizedState;return[l,u]},useMutableSource:xS,useSyncExternalStore:vS,useId:DS,unstable_isNewReconciler:!1};function pa(l,u){if(l&&l.defaultProps){u=re({},u),l=l.defaultProps;for(var f in l)u[f]===void 0&&(u[f]=l[f]);return u}return u}function gy(l,u,f,x){u=l.memoizedState,f=f(x,u),f=f==null?u:re({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var zf={isMounted:function(l){return(l=l._reactInternals)?sa(l)===l:!1},enqueueSetState:function(l,u,f){l=l._reactInternals;var x=tn(),_=ps(l),O=wi(x,_);O.payload=u,f!=null&&(O.callback=f),u=ds(l,O,_),u!==null&&(xa(u,l,_,x),Mf(u,l,_))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var x=tn(),_=ps(l),O=wi(x,_);O.tag=1,O.payload=u,f!=null&&(O.callback=f),u=ds(l,O,_),u!==null&&(xa(u,l,_,x),Mf(u,l,_))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=tn(),x=ps(l),_=wi(f,x);_.tag=2,u!=null&&(_.callback=u),u=ds(l,_,x),u!==null&&(xa(u,l,x,f),Mf(u,l,x))}};function FS(l,u,f,x,_,O,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,O,U):u.prototype&&u.prototype.isPureReactComponent?!ju(f,x)||!ju(_,O):!0}function VS(l,u,f){var x=!1,_=ls,O=u.contextType;return typeof O=="object"&&O!==null?O=zn(O):(_=mn(u)?co:Vr.current,x=u.contextTypes,O=(x=x!=null)?Ml(l,_):ls),u=new u(f,O),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=zf,l.stateNode=u,u._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=_,l.__reactInternalMemoizedMaskedChildContext=O),u}function US(l,u,f,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,x),u.state!==l&&zf.enqueueReplaceState(u,u.state,null)}function yy(l,u,f,x){var _=l.stateNode;_.props=f,_.state=l.memoizedState,_.refs={},ny(l);var O=u.contextType;typeof O=="object"&&O!==null?_.context=zn(O):(O=mn(u)?co:Vr.current,_.context=Ml(l,O)),_.state=l.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(gy(l,u,O,f),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(u=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),u!==_.state&&zf.enqueueReplaceState(_,_.state,null),Lf(l,f,_,x),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308)}function zl(l,u){try{var f="",x=u;do f+=he(x),x=x.return;while(x);var _=f}catch(O){_=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:u,stack:_,digest:null}}function xy(l,u,f){return{value:l,source:null,stack:f??null,digest:u??null}}function vy(l,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var f$=typeof WeakMap=="function"?WeakMap:Map;function BS(l,u,f){f=wi(-1,f),f.tag=3,f.payload={element:null};var x=u.value;return f.callback=function(){Xf||(Xf=!0,Ry=x),vy(l,u)},f}function qS(l,u,f){f=wi(-1,f),f.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var _=u.value;f.payload=function(){return x(_)},f.callback=function(){vy(l,u)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(f.callback=function(){vy(l,u),typeof x!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})}),f}function zS(l,u,f){var x=l.pingCache;if(x===null){x=l.pingCache=new f$;var _=new Set;x.set(u,_)}else _=x.get(u),_===void 0&&(_=new Set,x.set(u,_));_.has(f)||(_.add(f),l=E$.bind(null,l,u,f),u.then(l,l))}function WS(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function HS(l,u,f,x,_){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=wi(-1,1),u.tag=2,ds(f,u,1))),f.lanes|=1),l):(l.flags|=65536,l.lanes=_,l)}var m$=P.ReactCurrentOwner,pn=!1;function en(l,u,f,x){u.child=l===null?hS(u,null,f,x):Vl(u,l.child,f,x)}function GS(l,u,f,x,_){f=f.render;var O=u.ref;return Bl(u,_),x=uy(l,u,f,x,O,_),f=dy(),l!==null&&!pn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~_,ki(l,u,_)):(Vt&&f&&Gg(u),u.flags|=1,en(l,u,x,_),u.child)}function KS(l,u,f,x,_){if(l===null){var O=f.type;return typeof O=="function"&&!Uy(O)&&O.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=O,QS(l,u,O,x,_)):(l=nm(f.type,null,x,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,(l.lanes&_)===0){var U=O.memoizedProps;if(f=f.compare,f=f!==null?f:ju,f(U,x)&&l.ref===u.ref)return ki(l,u,_)}return u.flags|=1,l=ys(O,x),l.ref=u.ref,l.return=u,u.child=l}function QS(l,u,f,x,_){if(l!==null){var O=l.memoizedProps;if(ju(O,x)&&l.ref===u.ref)if(pn=!1,u.pendingProps=x=O,(l.lanes&_)!==0)(l.flags&131072)!==0&&(pn=!0);else return u.lanes=l.lanes,ki(l,u,_)}return by(l,u,f,x,_)}function YS(l,u,f){var x=u.pendingProps,_=x.children,O=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Hl,An),An|=f;else{if((f&1073741824)===0)return l=O!==null?O.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Ct(Hl,An),An|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=O!==null?O.baseLanes:f,Ct(Hl,An),An|=x}else O!==null?(x=O.baseLanes|f,u.memoizedState=null):x=f,Ct(Hl,An),An|=x;return en(l,u,_,f),u.child}function XS(l,u){var f=u.ref;(l===null&&f!==null||l!==null&&l.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function by(l,u,f,x,_){var O=mn(f)?co:Vr.current;return O=Ml(u,O),Bl(u,_),f=uy(l,u,f,x,O,_),x=dy(),l!==null&&!pn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~_,ki(l,u,_)):(Vt&&x&&Gg(u),u.flags|=1,en(l,u,f,_),u.child)}function JS(l,u,f,x,_){if(mn(f)){var O=!0;Tf(u)}else O=!1;if(Bl(u,_),u.stateNode===null)Hf(l,u),VS(u,f,x),yy(u,f,x,_),x=!0;else if(l===null){var U=u.stateNode,H=u.memoizedProps;U.props=H;var K=U.context,ce=f.contextType;typeof ce=="object"&&ce!==null?ce=zn(ce):(ce=mn(f)?co:Vr.current,ce=Ml(u,ce));var we=f.getDerivedStateFromProps,_e=typeof we=="function"||typeof U.getSnapshotBeforeUpdate=="function";_e||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(H!==x||K!==ce)&&US(u,U,x,ce),us=!1;var be=u.memoizedState;U.state=be,Lf(u,x,U,_),K=u.memoizedState,H!==x||be!==K||fn.current||us?(typeof we=="function"&&(gy(u,f,we,x),K=u.memoizedState),(H=us||FS(u,f,H,x,be,K,ce))?(_e||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(u.flags|=4194308)):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=K),U.props=x,U.state=K,U.context=ce,x=H):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{U=u.stateNode,mS(l,u),H=u.memoizedProps,ce=u.type===u.elementType?H:pa(u.type,H),U.props=ce,_e=u.pendingProps,be=U.context,K=f.contextType,typeof K=="object"&&K!==null?K=zn(K):(K=mn(f)?co:Vr.current,K=Ml(u,K));var Ae=f.getDerivedStateFromProps;(we=typeof Ae=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(H!==_e||be!==K)&&US(u,U,x,K),us=!1,be=u.memoizedState,U.state=be,Lf(u,x,U,_);var De=u.memoizedState;H!==_e||be!==De||fn.current||us?(typeof Ae=="function"&&(gy(u,f,Ae,x),De=u.memoizedState),(ce=us||FS(u,f,ce,x,be,De,K)||!1)?(we||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,De,K),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,De,K)),typeof U.componentDidUpdate=="function"&&(u.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof U.componentDidUpdate!="function"||H===l.memoizedProps&&be===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&be===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=De),U.props=x,U.state=De,U.context=K,x=ce):(typeof U.componentDidUpdate!="function"||H===l.memoizedProps&&be===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&be===l.memoizedState||(u.flags|=1024),x=!1)}return wy(l,u,f,x,O,_)}function wy(l,u,f,x,_,O){XS(l,u);var U=(u.flags&128)!==0;if(!x&&!U)return _&&nS(u,f,!1),ki(l,u,O);x=u.stateNode,m$.current=u;var H=U&&typeof f.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,l!==null&&U?(u.child=Vl(u,l.child,null,O),u.child=Vl(u,null,H,O)):en(l,u,H,O),u.memoizedState=x.state,_&&nS(u,f,!0),u.child}function ZS(l){var u=l.stateNode;u.pendingContext?tS(l,u.pendingContext,u.pendingContext!==u.context):u.context&&tS(l,u.context,!1),ay(l,u.containerInfo)}function eE(l,u,f,x,_){return Fl(),Xg(_),u.flags|=256,en(l,u,f,x),u.child}var ky={dehydrated:null,treeContext:null,retryLane:0};function _y(l){return{baseLanes:l,cachePool:null,transitions:null}}function tE(l,u,f){var x=u.pendingProps,_=Ht.current,O=!1,U=(u.flags&128)!==0,H;if((H=U)||(H=l!==null&&l.memoizedState===null?!1:(_&2)!==0),H?(O=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(_|=1),Ct(Ht,_&1),l===null)return Yg(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(U=x.children,l=x.fallback,O?(x=u.mode,O=u.child,U={mode:"hidden",children:U},(x&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=U):O=am(U,x,0,null),l=bo(l,x,f,null),O.return=u,l.return=u,O.sibling=l,u.child=O,u.child.memoizedState=_y(f),u.memoizedState=ky,l):jy(u,U));if(_=l.memoizedState,_!==null&&(H=_.dehydrated,H!==null))return p$(l,u,U,x,H,_,f);if(O){O=x.fallback,U=u.mode,_=l.child,H=_.sibling;var K={mode:"hidden",children:x.children};return(U&1)===0&&u.child!==_?(x=u.child,x.childLanes=0,x.pendingProps=K,u.deletions=null):(x=ys(_,K),x.subtreeFlags=_.subtreeFlags&14680064),H!==null?O=ys(H,O):(O=bo(O,U,f,null),O.flags|=2),O.return=u,x.return=u,x.sibling=O,u.child=x,x=O,O=u.child,U=l.child.memoizedState,U=U===null?_y(f):{baseLanes:U.baseLanes|f,cachePool:null,transitions:U.transitions},O.memoizedState=U,O.childLanes=l.childLanes&~f,u.memoizedState=ky,x}return O=l.child,l=O.sibling,x=ys(O,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=f),x.return=u,x.sibling=null,l!==null&&(f=u.deletions,f===null?(u.deletions=[l],u.flags|=16):f.push(l)),u.child=x,u.memoizedState=null,x}function jy(l,u){return u=am({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Wf(l,u,f,x){return x!==null&&Xg(x),Vl(u,l.child,null,f),l=jy(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function p$(l,u,f,x,_,O,U){if(f)return u.flags&256?(u.flags&=-257,x=xy(Error(r(422))),Wf(l,u,U,x)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(O=x.fallback,_=u.mode,x=am({mode:"visible",children:x.children},_,0,null),O=bo(O,_,U,null),O.flags|=2,x.return=u,O.return=u,x.sibling=O,u.child=x,(u.mode&1)!==0&&Vl(u,l.child,null,U),u.child.memoizedState=_y(U),u.memoizedState=ky,O);if((u.mode&1)===0)return Wf(l,u,U,null);if(_.data==="$!"){if(x=_.nextSibling&&_.nextSibling.dataset,x)var H=x.dgst;return x=H,O=Error(r(419)),x=xy(O,x,void 0),Wf(l,u,U,x)}if(H=(U&l.childLanes)!==0,pn||H){if(x=kr,x!==null){switch(U&-U){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(x.suspendedLanes|U))!==0?0:_,_!==0&&_!==O.retryLane&&(O.retryLane=_,bi(l,_),xa(x,l,_,-1))}return Vy(),x=xy(Error(r(421))),Wf(l,u,U,x)}return _.data==="$?"?(u.flags|=128,u.child=l.child,u=T$.bind(null,l),_._reactRetry=u,null):(l=O.treeContext,Tn=ss(_.nextSibling),En=u,Vt=!0,ma=null,l!==null&&(Bn[qn++]=xi,Bn[qn++]=vi,Bn[qn++]=uo,xi=l.id,vi=l.overflow,uo=u),u=jy(u,x.children),u.flags|=4096,u)}function rE(l,u,f){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),ty(l.return,u,f)}function Ny(l,u,f,x,_){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:_}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=x,O.tail=f,O.tailMode=_)}function nE(l,u,f){var x=u.pendingProps,_=x.revealOrder,O=x.tail;if(en(l,u,x.children,f),x=Ht.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&rE(l,f,u);else if(l.tag===19)rE(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(Ct(Ht,x),(u.mode&1)===0)u.memoizedState=null;else switch(_){case"forwards":for(f=u.child,_=null;f!==null;)l=f.alternate,l!==null&&$f(l)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),Ny(u,!1,_,f,O);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&$f(l)===null){u.child=_;break}l=_.sibling,_.sibling=f,f=_,_=l}Ny(u,!0,f,null,O);break;case"together":Ny(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Hf(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ki(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),go|=u.lanes,(f&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,f=ys(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=ys(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function g$(l,u,f){switch(u.tag){case 3:ZS(u),Fl();break;case 5:yS(u);break;case 1:mn(u.type)&&Tf(u);break;case 4:ay(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,_=u.memoizedProps.value;Ct(Rf,x._currentValue),x._currentValue=_;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(Ct(Ht,Ht.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?tE(l,u,f):(Ct(Ht,Ht.current&1),l=ki(l,u,f),l!==null?l.sibling:null);Ct(Ht,Ht.current&1);break;case 19:if(x=(f&u.childLanes)!==0,(l.flags&128)!==0){if(x)return nE(l,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ct(Ht,Ht.current),x)break;return null;case 22:case 23:return u.lanes=0,YS(l,u,f)}return ki(l,u,f)}var aE,Sy,iE,sE;aE=function(l,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Sy=function(){},iE=function(l,u,f,x){var _=l.memoizedProps;if(_!==x){l=u.stateNode,mo(qa.current);var O=null;switch(f){case"input":_=Te(l,_),x=Te(l,x),O=[];break;case"select":_=re({},_,{value:void 0}),x=re({},x,{value:void 0}),O=[];break;case"textarea":_=tt(l,_),x=tt(l,x),O=[];break;default:typeof _.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=Nf)}vr(f,x);var U;f=null;for(ce in _)if(!x.hasOwnProperty(ce)&&_.hasOwnProperty(ce)&&_[ce]!=null)if(ce==="style"){var H=_[ce];for(U in H)H.hasOwnProperty(U)&&(f||(f={}),f[U]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(a.hasOwnProperty(ce)?O||(O=[]):(O=O||[]).push(ce,null));for(ce in x){var K=x[ce];if(H=_?.[ce],x.hasOwnProperty(ce)&&K!==H&&(K!=null||H!=null))if(ce==="style")if(H){for(U in H)!H.hasOwnProperty(U)||K&&K.hasOwnProperty(U)||(f||(f={}),f[U]="");for(U in K)K.hasOwnProperty(U)&&H[U]!==K[U]&&(f||(f={}),f[U]=K[U])}else f||(O||(O=[]),O.push(ce,f)),f=K;else ce==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,H=H?H.__html:void 0,K!=null&&H!==K&&(O=O||[]).push(ce,K)):ce==="children"?typeof K!="string"&&typeof K!="number"||(O=O||[]).push(ce,""+K):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(a.hasOwnProperty(ce)?(K!=null&&ce==="onScroll"&&Rt("scroll",l),O||H===K||(O=[])):(O=O||[]).push(ce,K))}f&&(O=O||[]).push("style",f);var ce=O;(u.updateQueue=ce)&&(u.flags|=4)}},sE=function(l,u,f,x){f!==x&&(u.flags|=4)};function Fu(l,u){if(!Vt)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Br(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,x=0;if(u)for(var _=l.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags&14680064,x|=_.flags&14680064,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags,x|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=x,l.childLanes=f,u}function y$(l,u,f){var x=u.pendingProps;switch(Kg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(u),null;case 1:return mn(u.type)&&Ef(),Br(u),null;case 3:return x=u.stateNode,ql(),Dt(fn),Dt(Vr),oy(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(If(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ma!==null&&(Ly(ma),ma=null))),Sy(l,u),Br(u),null;case 5:iy(u);var _=mo(Ru.current);if(f=u.type,l!==null&&u.stateNode!=null)iE(l,u,f,x,_),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(r(166));return Br(u),null}if(l=mo(qa.current),If(u)){x=u.stateNode,f=u.type;var O=u.memoizedProps;switch(x[Ba]=u,x[Au]=O,l=(u.mode&1)!==0,f){case"dialog":Rt("cancel",x),Rt("close",x);break;case"iframe":case"object":case"embed":Rt("load",x);break;case"video":case"audio":for(_=0;_<Su.length;_++)Rt(Su[_],x);break;case"source":Rt("error",x);break;case"img":case"image":case"link":Rt("error",x),Rt("load",x);break;case"details":Rt("toggle",x);break;case"input":Ze(x,O),Rt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!O.multiple},Rt("invalid",x);break;case"textarea":Ar(x,O),Rt("invalid",x)}vr(f,O),_=null;for(var U in O)if(O.hasOwnProperty(U)){var H=O[U];U==="children"?typeof H=="string"?x.textContent!==H&&(O.suppressHydrationWarning!==!0&&jf(x.textContent,H,l),_=["children",H]):typeof H=="number"&&x.textContent!==""+H&&(O.suppressHydrationWarning!==!0&&jf(x.textContent,H,l),_=["children",""+H]):a.hasOwnProperty(U)&&H!=null&&U==="onScroll"&&Rt("scroll",x)}switch(f){case"input":pe(x),nr(x,O,!0);break;case"textarea":pe(x),un(x);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(x.onclick=Nf)}x=_,u.updateQueue=x,x!==null&&(u.flags|=4)}else{U=_.nodeType===9?_:_.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=qt(f)),l==="http://www.w3.org/1999/xhtml"?f==="script"?(l=U.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=U.createElement(f,{is:x.is}):(l=U.createElement(f),f==="select"&&(U=l,x.multiple?U.multiple=!0:x.size&&(U.size=x.size))):l=U.createElementNS(l,f),l[Ba]=u,l[Au]=x,aE(l,u,!1,!1),u.stateNode=l;e:{switch(U=Wt(f,x),f){case"dialog":Rt("cancel",l),Rt("close",l),_=x;break;case"iframe":case"object":case"embed":Rt("load",l),_=x;break;case"video":case"audio":for(_=0;_<Su.length;_++)Rt(Su[_],l);_=x;break;case"source":Rt("error",l),_=x;break;case"img":case"image":case"link":Rt("error",l),Rt("load",l),_=x;break;case"details":Rt("toggle",l),_=x;break;case"input":Ze(l,x),_=Te(l,x),Rt("invalid",l);break;case"option":_=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},_=re({},x,{value:void 0}),Rt("invalid",l);break;case"textarea":Ar(l,x),_=tt(l,x),Rt("invalid",l);break;default:_=x}vr(f,_),H=_;for(O in H)if(H.hasOwnProperty(O)){var K=H[O];O==="style"?rt(l,K):O==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Qs(l,K)):O==="children"?typeof K=="string"?(f!=="textarea"||K!=="")&&Ra(l,K):typeof K=="number"&&Ra(l,""+K):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?K!=null&&O==="onScroll"&&Rt("scroll",l):K!=null&&E(l,O,K,U))}switch(f){case"input":pe(l),nr(l,x,!1);break;case"textarea":pe(l),un(l);break;case"option":x.value!=null&&l.setAttribute("value",""+ye(x.value));break;case"select":l.multiple=!!x.multiple,O=x.value,O!=null?Ce(l,!!x.multiple,O,!1):x.defaultValue!=null&&Ce(l,!!x.multiple,x.defaultValue,!0);break;default:typeof _.onClick=="function"&&(l.onclick=Nf)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Br(u),null;case 6:if(l&&u.stateNode!=null)sE(l,u,l.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(r(166));if(f=mo(Ru.current),mo(qa.current),If(u)){if(x=u.stateNode,f=u.memoizedProps,x[Ba]=u,(O=x.nodeValue!==f)&&(l=En,l!==null))switch(l.tag){case 3:jf(x.nodeValue,f,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&jf(x.nodeValue,f,(l.mode&1)!==0)}O&&(u.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[Ba]=u,u.stateNode=x}return Br(u),null;case 13:if(Dt(Ht),x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Vt&&Tn!==null&&(u.mode&1)!==0&&(u.flags&128)===0)cS(),Fl(),u.flags|=98560,O=!1;else if(O=If(u),x!==null&&x.dehydrated!==null){if(l===null){if(!O)throw Error(r(318));if(O=u.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));O[Ba]=u}else Fl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Br(u),O=!1}else ma!==null&&(Ly(ma),ma=null),O=!0;if(!O)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Ht.current&1)!==0?fr===0&&(fr=3):Vy())),u.updateQueue!==null&&(u.flags|=4),Br(u),null);case 4:return ql(),Sy(l,u),l===null&&Eu(u.stateNode.containerInfo),Br(u),null;case 10:return ey(u.type._context),Br(u),null;case 17:return mn(u.type)&&Ef(),Br(u),null;case 19:if(Dt(Ht),O=u.memoizedState,O===null)return Br(u),null;if(x=(u.flags&128)!==0,U=O.rendering,U===null)if(x)Fu(O,!1);else{if(fr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(U=$f(l),U!==null){for(u.flags|=128,Fu(O,!1),x=U.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=f,f=u.child;f!==null;)O=f,l=x,O.flags&=14680066,U=O.alternate,U===null?(O.childLanes=0,O.lanes=l,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=U.childLanes,O.lanes=U.lanes,O.child=U.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=U.memoizedProps,O.memoizedState=U.memoizedState,O.updateQueue=U.updateQueue,O.type=U.type,l=U.dependencies,O.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),f=f.sibling;return Ct(Ht,Ht.current&1|2),u.child}l=l.sibling}O.tail!==null&&At()>Gl&&(u.flags|=128,x=!0,Fu(O,!1),u.lanes=4194304)}else{if(!x)if(l=$f(U),l!==null){if(u.flags|=128,x=!0,f=l.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),Fu(O,!0),O.tail===null&&O.tailMode==="hidden"&&!U.alternate&&!Vt)return Br(u),null}else 2*At()-O.renderingStartTime>Gl&&f!==1073741824&&(u.flags|=128,x=!0,Fu(O,!1),u.lanes=4194304);O.isBackwards?(U.sibling=u.child,u.child=U):(f=O.last,f!==null?f.sibling=U:u.child=U,O.last=U)}return O.tail!==null?(u=O.tail,O.rendering=u,O.tail=u.sibling,O.renderingStartTime=At(),u.sibling=null,f=Ht.current,Ct(Ht,x?f&1|2:f&1),u):(Br(u),null);case 22:case 23:return Fy(),x=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(An&1073741824)!==0&&(Br(u),u.subtreeFlags&6&&(u.flags|=8192)):Br(u),null;case 24:return null;case 25:return null}throw Error(r(156,u.tag))}function x$(l,u){switch(Kg(u),u.tag){case 1:return mn(u.type)&&Ef(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ql(),Dt(fn),Dt(Vr),oy(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return iy(u),null;case 13:if(Dt(Ht),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Fl()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Dt(Ht),null;case 4:return ql(),null;case 10:return ey(u.type._context),null;case 22:case 23:return Fy(),null;case 24:return null;default:return null}}var Gf=!1,qr=!1,v$=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Wl(l,u){var f=l.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Qt(l,u,x)}else f.current=null}function Ey(l,u,f){try{f()}catch(x){Qt(l,u,x)}}var oE=!1;function b$(l,u){if(Fg=ns,l=FN(),Pg(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var _=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{f.nodeType,O.nodeType}catch{f=null;break e}var U=0,H=-1,K=-1,ce=0,we=0,_e=l,be=null;t:for(;;){for(var Ae;_e!==f||_!==0&&_e.nodeType!==3||(H=U+_),_e!==O||x!==0&&_e.nodeType!==3||(K=U+x),_e.nodeType===3&&(U+=_e.nodeValue.length),(Ae=_e.firstChild)!==null;)be=_e,_e=Ae;for(;;){if(_e===l)break t;if(be===f&&++ce===_&&(H=U),be===O&&++we===x&&(K=U),(Ae=_e.nextSibling)!==null)break;_e=be,be=_e.parentNode}_e=Ae}f=H===-1||K===-1?null:{start:H,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(Vg={focusedElem:l,selectionRange:f},ns=!1,Ie=u;Ie!==null;)if(u=Ie,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ie=l;else for(;Ie!==null;){u=Ie;try{var De=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Me=De.memoizedProps,er=De.memoizedState,ie=u.stateNode,te=ie.getSnapshotBeforeUpdate(u.elementType===u.type?Me:pa(u.type,Me),er);ie.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var se=u.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ne){Qt(u,u.return,Ne)}if(l=u.sibling,l!==null){l.return=u.return,Ie=l;break}Ie=u.return}return De=oE,oE=!1,De}function Vu(l,u,f){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var _=x=x.next;do{if((_.tag&l)===l){var O=_.destroy;_.destroy=void 0,O!==void 0&&Ey(u,f,O)}_=_.next}while(_!==x)}}function Kf(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&l)===l){var x=f.create;f.destroy=x()}f=f.next}while(f!==u)}}function Ty(l){var u=l.ref;if(u!==null){var f=l.stateNode;switch(l.tag){case 5:l=f;break;default:l=f}typeof u=="function"?u(l):u.current=l}}function lE(l){var u=l.alternate;u!==null&&(l.alternate=null,lE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[Ba],delete u[Au],delete u[zg],delete u[r$],delete u[n$])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function cE(l){return l.tag===5||l.tag===3||l.tag===4}function uE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||cE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ay(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(l,u):f.insertBefore(l,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(l,f)):(u=f,u.appendChild(l)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Nf));else if(x!==4&&(l=l.child,l!==null))for(Ay(l,u,f),l=l.sibling;l!==null;)Ay(l,u,f),l=l.sibling}function Cy(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(Cy(l,u,f),l=l.sibling;l!==null;)Cy(l,u,f),l=l.sibling}var Ir=null,ga=!1;function hs(l,u,f){for(f=f.child;f!==null;)dE(l,u,f),f=f.sibling}function dE(l,u,f){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(to,f)}catch{}switch(f.tag){case 5:qr||Wl(f,u);case 6:var x=Ir,_=ga;Ir=null,hs(l,u,f),Ir=x,ga=_,Ir!==null&&(ga?(l=Ir,f=f.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):Ir.removeChild(f.stateNode));break;case 18:Ir!==null&&(ga?(l=Ir,f=f.stateNode,l.nodeType===8?qg(l.parentNode,f):l.nodeType===1&&qg(l,f),da(l)):qg(Ir,f.stateNode));break;case 4:x=Ir,_=ga,Ir=f.stateNode.containerInfo,ga=!0,hs(l,u,f),Ir=x,ga=_;break;case 0:case 11:case 14:case 15:if(!qr&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){_=x=x.next;do{var O=_,U=O.destroy;O=O.tag,U!==void 0&&((O&2)!==0||(O&4)!==0)&&Ey(f,u,U),_=_.next}while(_!==x)}hs(l,u,f);break;case 1:if(!qr&&(Wl(f,u),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(H){Qt(f,u,H)}hs(l,u,f);break;case 21:hs(l,u,f);break;case 22:f.mode&1?(qr=(x=qr)||f.memoizedState!==null,hs(l,u,f),qr=x):hs(l,u,f);break;default:hs(l,u,f)}}function hE(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var f=l.stateNode;f===null&&(f=l.stateNode=new v$),u.forEach(function(x){var _=A$.bind(null,l,x);f.has(x)||(f.add(x),x.then(_,_))})}}function ya(l,u){var f=u.deletions;if(f!==null)for(var x=0;x<f.length;x++){var _=f[x];try{var O=l,U=u,H=U;e:for(;H!==null;){switch(H.tag){case 5:Ir=H.stateNode,ga=!1;break e;case 3:Ir=H.stateNode.containerInfo,ga=!0;break e;case 4:Ir=H.stateNode.containerInfo,ga=!0;break e}H=H.return}if(Ir===null)throw Error(r(160));dE(O,U,_),Ir=null,ga=!1;var K=_.alternate;K!==null&&(K.return=null),_.return=null}catch(ce){Qt(_,u,ce)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)fE(u,l),u=u.sibling}function fE(l,u){var f=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ya(u,l),Wa(l),x&4){try{Vu(3,l,l.return),Kf(3,l)}catch(Me){Qt(l,l.return,Me)}try{Vu(5,l,l.return)}catch(Me){Qt(l,l.return,Me)}}break;case 1:ya(u,l),Wa(l),x&512&&f!==null&&Wl(f,f.return);break;case 5:if(ya(u,l),Wa(l),x&512&&f!==null&&Wl(f,f.return),l.flags&32){var _=l.stateNode;try{Ra(_,"")}catch(Me){Qt(l,l.return,Me)}}if(x&4&&(_=l.stateNode,_!=null)){var O=l.memoizedProps,U=f!==null?f.memoizedProps:O,H=l.type,K=l.updateQueue;if(l.updateQueue=null,K!==null)try{H==="input"&&O.type==="radio"&&O.name!=null&&et(_,O),Wt(H,U);var ce=Wt(H,O);for(U=0;U<K.length;U+=2){var we=K[U],_e=K[U+1];we==="style"?rt(_,_e):we==="dangerouslySetInnerHTML"?Qs(_,_e):we==="children"?Ra(_,_e):E(_,we,_e,ce)}switch(H){case"input":Nt(_,O);break;case"textarea":St(_,O);break;case"select":var be=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!O.multiple;var Ae=O.value;Ae!=null?Ce(_,!!O.multiple,Ae,!1):be!==!!O.multiple&&(O.defaultValue!=null?Ce(_,!!O.multiple,O.defaultValue,!0):Ce(_,!!O.multiple,O.multiple?[]:"",!1))}_[Au]=O}catch(Me){Qt(l,l.return,Me)}}break;case 6:if(ya(u,l),Wa(l),x&4){if(l.stateNode===null)throw Error(r(162));_=l.stateNode,O=l.memoizedProps;try{_.nodeValue=O}catch(Me){Qt(l,l.return,Me)}}break;case 3:if(ya(u,l),Wa(l),x&4&&f!==null&&f.memoizedState.isDehydrated)try{da(u.containerInfo)}catch(Me){Qt(l,l.return,Me)}break;case 4:ya(u,l),Wa(l);break;case 13:ya(u,l),Wa(l),_=l.child,_.flags&8192&&(O=_.memoizedState!==null,_.stateNode.isHidden=O,!O||_.alternate!==null&&_.alternate.memoizedState!==null||(Oy=At())),x&4&&hE(l);break;case 22:if(we=f!==null&&f.memoizedState!==null,l.mode&1?(qr=(ce=qr)||we,ya(u,l),qr=ce):ya(u,l),Wa(l),x&8192){if(ce=l.memoizedState!==null,(l.stateNode.isHidden=ce)&&!we&&(l.mode&1)!==0)for(Ie=l,we=l.child;we!==null;){for(_e=Ie=we;Ie!==null;){switch(be=Ie,Ae=be.child,be.tag){case 0:case 11:case 14:case 15:Vu(4,be,be.return);break;case 1:Wl(be,be.return);var De=be.stateNode;if(typeof De.componentWillUnmount=="function"){x=be,f=be.return;try{u=x,De.props=u.memoizedProps,De.state=u.memoizedState,De.componentWillUnmount()}catch(Me){Qt(x,f,Me)}}break;case 5:Wl(be,be.return);break;case 22:if(be.memoizedState!==null){gE(_e);continue}}Ae!==null?(Ae.return=be,Ie=Ae):gE(_e)}we=we.sibling}e:for(we=null,_e=l;;){if(_e.tag===5){if(we===null){we=_e;try{_=_e.stateNode,ce?(O=_.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(H=_e.stateNode,K=_e.memoizedProps.style,U=K!=null&&K.hasOwnProperty("display")?K.display:null,H.style.display=ft("display",U))}catch(Me){Qt(l,l.return,Me)}}}else if(_e.tag===6){if(we===null)try{_e.stateNode.nodeValue=ce?"":_e.memoizedProps}catch(Me){Qt(l,l.return,Me)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===l)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===l)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===l)break e;we===_e&&(we=null),_e=_e.return}we===_e&&(we=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:ya(u,l),Wa(l),x&4&&hE(l);break;case 21:break;default:ya(u,l),Wa(l)}}function Wa(l){var u=l.flags;if(u&2){try{e:{for(var f=l.return;f!==null;){if(cE(f)){var x=f;break e}f=f.return}throw Error(r(160))}switch(x.tag){case 5:var _=x.stateNode;x.flags&32&&(Ra(_,""),x.flags&=-33);var O=uE(l);Cy(l,O,_);break;case 3:case 4:var U=x.stateNode.containerInfo,H=uE(l);Ay(l,H,U);break;default:throw Error(r(161))}}catch(K){Qt(l,l.return,K)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function w$(l,u,f){Ie=l,mE(l)}function mE(l,u,f){for(var x=(l.mode&1)!==0;Ie!==null;){var _=Ie,O=_.child;if(_.tag===22&&x){var U=_.memoizedState!==null||Gf;if(!U){var H=_.alternate,K=H!==null&&H.memoizedState!==null||qr;H=Gf;var ce=qr;if(Gf=U,(qr=K)&&!ce)for(Ie=_;Ie!==null;)U=Ie,K=U.child,U.tag===22&&U.memoizedState!==null?yE(_):K!==null?(K.return=U,Ie=K):yE(_);for(;O!==null;)Ie=O,mE(O),O=O.sibling;Ie=_,Gf=H,qr=ce}pE(l)}else(_.subtreeFlags&8772)!==0&&O!==null?(O.return=_,Ie=O):pE(l)}}function pE(l){for(;Ie!==null;){var u=Ie;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:qr||Kf(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!qr)if(f===null)x.componentDidMount();else{var _=u.elementType===u.type?f.memoizedProps:pa(u.type,f.memoizedProps);x.componentDidUpdate(_,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var O=u.updateQueue;O!==null&&gS(u,O,x);break;case 3:var U=u.updateQueue;if(U!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}gS(u,U,f)}break;case 5:var H=u.stateNode;if(f===null&&u.flags&4){f=H;var K=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&f.focus();break;case"img":K.src&&(f.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var ce=u.alternate;if(ce!==null){var we=ce.memoizedState;if(we!==null){var _e=we.dehydrated;_e!==null&&da(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}qr||u.flags&512&&Ty(u)}catch(be){Qt(u,u.return,be)}}if(u===l){Ie=null;break}if(f=u.sibling,f!==null){f.return=u.return,Ie=f;break}Ie=u.return}}function gE(l){for(;Ie!==null;){var u=Ie;if(u===l){Ie=null;break}var f=u.sibling;if(f!==null){f.return=u.return,Ie=f;break}Ie=u.return}}function yE(l){for(;Ie!==null;){var u=Ie;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{Kf(4,u)}catch(K){Qt(u,f,K)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var _=u.return;try{x.componentDidMount()}catch(K){Qt(u,_,K)}}var O=u.return;try{Ty(u)}catch(K){Qt(u,O,K)}break;case 5:var U=u.return;try{Ty(u)}catch(K){Qt(u,U,K)}}}catch(K){Qt(u,u.return,K)}if(u===l){Ie=null;break}var H=u.sibling;if(H!==null){H.return=u.return,Ie=H;break}Ie=u.return}}var k$=Math.ceil,Qf=P.ReactCurrentDispatcher,Py=P.ReactCurrentOwner,Hn=P.ReactCurrentBatchConfig,ht=0,kr=null,ir=null,Or=0,An=0,Hl=os(0),fr=0,Uu=null,go=0,Yf=0,Iy=0,Bu=null,gn=null,Oy=0,Gl=1/0,_i=null,Xf=!1,Ry=null,fs=null,Jf=!1,ms=null,Zf=0,qu=0,Dy=null,em=-1,tm=0;function tn(){return(ht&6)!==0?At():em!==-1?em:em=At()}function ps(l){return(l.mode&1)===0?1:(ht&2)!==0&&Or!==0?Or&-Or:i$.transition!==null?(tm===0&&(tm=no()),tm):(l=ot,l!==0||(l=window.event,l=l===void 0?16:yu(l.type)),l)}function xa(l,u,f,x){if(50<qu)throw qu=0,Dy=null,Error(r(185));Zi(l,f,x),((ht&2)===0||l!==kr)&&(l===kr&&((ht&2)===0&&(Yf|=f),fr===4&&gs(l,Or)),yn(l,x),f===1&&ht===0&&(u.mode&1)===0&&(Gl=At()+500,Af&&cs()))}function yn(l,u){var f=l.callbackNode;di(l,u);var x=ro(l,l===kr?Or:0);if(x===0)f!==null&&hu(f),l.callbackNode=null,l.callbackPriority=0;else if(u=x&-x,l.callbackPriority!==u){if(f!=null&&hu(f),u===1)l.tag===0?a$(vE.bind(null,l)):aS(vE.bind(null,l)),e$(function(){(ht&6)===0&&cs()}),f=null;else{switch(ts(x)){case 1:f=eo;break;case 4:f=Yi;break;case 16:f=Fn;break;case 536870912:f=ef;break;default:f=Fn}f=EE(f,xE.bind(null,l))}l.callbackPriority=u,l.callbackNode=f}}function xE(l,u){if(em=-1,tm=0,(ht&6)!==0)throw Error(r(327));var f=l.callbackNode;if(Kl()&&l.callbackNode!==f)return null;var x=ro(l,l===kr?Or:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||u)u=rm(l,x);else{u=x;var _=ht;ht|=2;var O=wE();(kr!==l||Or!==u)&&(_i=null,Gl=At()+500,xo(l,u));do try{N$();break}catch(H){bE(l,H)}while(!0);Zg(),Qf.current=O,ht=_,ir!==null?u=0:(kr=null,Or=0,u=fr)}if(u!==0){if(u===2&&(_=jn(l),_!==0&&(x=_,u=My(l,_))),u===1)throw f=Uu,xo(l,0),gs(l,x),yn(l,At()),f;if(u===6)gs(l,x);else{if(_=l.current.alternate,(x&30)===0&&!_$(_)&&(u=rm(l,x),u===2&&(O=jn(l),O!==0&&(x=O,u=My(l,O))),u===1))throw f=Uu,xo(l,0),gs(l,x),yn(l,At()),f;switch(l.finishedWork=_,l.finishedLanes=x,u){case 0:case 1:throw Error(r(345));case 2:vo(l,gn,_i);break;case 3:if(gs(l,x),(x&130023424)===x&&(u=Oy+500-At(),10<u)){if(ro(l,0)!==0)break;if(_=l.suspendedLanes,(_&x)!==x){tn(),l.pingedLanes|=l.suspendedLanes&_;break}l.timeoutHandle=Bg(vo.bind(null,l,gn,_i),u);break}vo(l,gn,_i);break;case 4:if(gs(l,x),(x&4194240)===x)break;for(u=l.eventTimes,_=-1;0<x;){var U=31-Jr(x);O=1<<U,U=u[U],U>_&&(_=U),x&=~O}if(x=_,x=At()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*k$(x/1960))-x,10<x){l.timeoutHandle=Bg(vo.bind(null,l,gn,_i),x);break}vo(l,gn,_i);break;case 5:vo(l,gn,_i);break;default:throw Error(r(329))}}}return yn(l,At()),l.callbackNode===f?xE.bind(null,l):null}function My(l,u){var f=Bu;return l.current.memoizedState.isDehydrated&&(xo(l,u).flags|=256),l=rm(l,u),l!==2&&(u=gn,gn=f,u!==null&&Ly(u)),l}function Ly(l){gn===null?gn=l:gn.push.apply(gn,l)}function _$(l){for(var u=l;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var _=f[x],O=_.getSnapshot;_=_.value;try{if(!fa(O(),_))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function gs(l,u){for(u&=~Iy,u&=~Yf,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var f=31-Jr(u),x=1<<f;l[f]=-1,u&=~x}}function vE(l){if((ht&6)!==0)throw Error(r(327));Kl();var u=ro(l,0);if((u&1)===0)return yn(l,At()),null;var f=rm(l,u);if(l.tag!==0&&f===2){var x=jn(l);x!==0&&(u=x,f=My(l,x))}if(f===1)throw f=Uu,xo(l,0),gs(l,u),yn(l,At()),f;if(f===6)throw Error(r(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,vo(l,gn,_i),yn(l,At()),null}function $y(l,u){var f=ht;ht|=1;try{return l(u)}finally{ht=f,ht===0&&(Gl=At()+500,Af&&cs())}}function yo(l){ms!==null&&ms.tag===0&&(ht&6)===0&&Kl();var u=ht;ht|=1;var f=Hn.transition,x=ot;try{if(Hn.transition=null,ot=1,l)return l()}finally{ot=x,Hn.transition=f,ht=u,(ht&6)===0&&cs()}}function Fy(){An=Hl.current,Dt(Hl)}function xo(l,u){l.finishedWork=null,l.finishedLanes=0;var f=l.timeoutHandle;if(f!==-1&&(l.timeoutHandle=-1,Z5(f)),ir!==null)for(f=ir.return;f!==null;){var x=f;switch(Kg(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ef();break;case 3:ql(),Dt(fn),Dt(Vr),oy();break;case 5:iy(x);break;case 4:ql();break;case 13:Dt(Ht);break;case 19:Dt(Ht);break;case 10:ey(x.type._context);break;case 22:case 23:Fy()}f=f.return}if(kr=l,ir=l=ys(l.current,null),Or=An=u,fr=0,Uu=null,Iy=Yf=go=0,gn=Bu=null,fo!==null){for(u=0;u<fo.length;u++)if(f=fo[u],x=f.interleaved,x!==null){f.interleaved=null;var _=x.next,O=f.pending;if(O!==null){var U=O.next;O.next=_,x.next=U}f.pending=x}fo=null}return l}function bE(l,u){do{var f=ir;try{if(Zg(),Ff.current=qf,Vf){for(var x=Gt.memoizedState;x!==null;){var _=x.queue;_!==null&&(_.pending=null),x=x.next}Vf=!1}if(po=0,wr=hr=Gt=null,Du=!1,Mu=0,Py.current=null,f===null||f.return===null){fr=1,Uu=u,ir=null;break}e:{var O=l,U=f.return,H=f,K=u;if(u=Or,H.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ce=K,we=H,_e=we.tag;if((we.mode&1)===0&&(_e===0||_e===11||_e===15)){var be=we.alternate;be?(we.updateQueue=be.updateQueue,we.memoizedState=be.memoizedState,we.lanes=be.lanes):(we.updateQueue=null,we.memoizedState=null)}var Ae=WS(U);if(Ae!==null){Ae.flags&=-257,HS(Ae,U,H,O,u),Ae.mode&1&&zS(O,ce,u),u=Ae,K=ce;var De=u.updateQueue;if(De===null){var Me=new Set;Me.add(K),u.updateQueue=Me}else De.add(K);break e}else{if((u&1)===0){zS(O,ce,u),Vy();break e}K=Error(r(426))}}else if(Vt&&H.mode&1){var er=WS(U);if(er!==null){(er.flags&65536)===0&&(er.flags|=256),HS(er,U,H,O,u),Xg(zl(K,H));break e}}O=K=zl(K,H),fr!==4&&(fr=2),Bu===null?Bu=[O]:Bu.push(O),O=U;do{switch(O.tag){case 3:O.flags|=65536,u&=-u,O.lanes|=u;var ie=BS(O,K,u);pS(O,ie);break e;case 1:H=K;var te=O.type,se=O.stateNode;if((O.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(fs===null||!fs.has(se)))){O.flags|=65536,u&=-u,O.lanes|=u;var Ne=qS(O,H,u);pS(O,Ne);break e}}O=O.return}while(O!==null)}_E(f)}catch($e){u=$e,ir===f&&f!==null&&(ir=f=f.return);continue}break}while(!0)}function wE(){var l=Qf.current;return Qf.current=qf,l===null?qf:l}function Vy(){(fr===0||fr===3||fr===2)&&(fr=4),kr===null||(go&268435455)===0&&(Yf&268435455)===0||gs(kr,Or)}function rm(l,u){var f=ht;ht|=2;var x=wE();(kr!==l||Or!==u)&&(_i=null,xo(l,u));do try{j$();break}catch(_){bE(l,_)}while(!0);if(Zg(),ht=f,Qf.current=x,ir!==null)throw Error(r(261));return kr=null,Or=0,fr}function j$(){for(;ir!==null;)kE(ir)}function N$(){for(;ir!==null&&!Jh();)kE(ir)}function kE(l){var u=SE(l.alternate,l,An);l.memoizedProps=l.pendingProps,u===null?_E(l):ir=u,Py.current=null}function _E(l){var u=l;do{var f=u.alternate;if(l=u.return,(u.flags&32768)===0){if(f=y$(f,u,An),f!==null){ir=f;return}}else{if(f=x$(f,u),f!==null){f.flags&=32767,ir=f;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fr=6,ir=null;return}}if(u=u.sibling,u!==null){ir=u;return}ir=u=l}while(u!==null);fr===0&&(fr=5)}function vo(l,u,f){var x=ot,_=Hn.transition;try{Hn.transition=null,ot=1,S$(l,u,f,x)}finally{Hn.transition=_,ot=x}return null}function S$(l,u,f,x){do Kl();while(ms!==null);if((ht&6)!==0)throw Error(r(327));f=l.finishedWork;var _=l.finishedLanes;if(f===null)return null;if(l.finishedWork=null,l.finishedLanes=0,f===l.current)throw Error(r(177));l.callbackNode=null,l.callbackPriority=0;var O=f.lanes|f.childLanes;if(Et(l,O),l===kr&&(ir=kr=null,Or=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Jf||(Jf=!0,EE(Fn,function(){return Kl(),null})),O=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||O){O=Hn.transition,Hn.transition=null;var U=ot;ot=1;var H=ht;ht|=4,Py.current=null,b$(l,f),fE(f,l),H5(Vg),ns=!!Fg,Vg=Fg=null,l.current=f,w$(f),_g(),ht=H,ot=U,Hn.transition=O}else l.current=f;if(Jf&&(Jf=!1,ms=l,Zf=_),O=l.pendingLanes,O===0&&(fs=null),tf(f.stateNode),yn(l,At()),u!==null)for(x=l.onRecoverableError,f=0;f<u.length;f++)_=u[f],x(_.value,{componentStack:_.stack,digest:_.digest});if(Xf)throw Xf=!1,l=Ry,Ry=null,l;return(Zf&1)!==0&&l.tag!==0&&Kl(),O=l.pendingLanes,(O&1)!==0?l===Dy?qu++:(qu=0,Dy=l):qu=0,cs(),null}function Kl(){if(ms!==null){var l=ts(Zf),u=Hn.transition,f=ot;try{if(Hn.transition=null,ot=16>l?16:l,ms===null)var x=!1;else{if(l=ms,ms=null,Zf=0,(ht&6)!==0)throw Error(r(331));var _=ht;for(ht|=4,Ie=l.current;Ie!==null;){var O=Ie,U=O.child;if((Ie.flags&16)!==0){var H=O.deletions;if(H!==null){for(var K=0;K<H.length;K++){var ce=H[K];for(Ie=ce;Ie!==null;){var we=Ie;switch(we.tag){case 0:case 11:case 15:Vu(8,we,O)}var _e=we.child;if(_e!==null)_e.return=we,Ie=_e;else for(;Ie!==null;){we=Ie;var be=we.sibling,Ae=we.return;if(lE(we),we===ce){Ie=null;break}if(be!==null){be.return=Ae,Ie=be;break}Ie=Ae}}}var De=O.alternate;if(De!==null){var Me=De.child;if(Me!==null){De.child=null;do{var er=Me.sibling;Me.sibling=null,Me=er}while(Me!==null)}}Ie=O}}if((O.subtreeFlags&2064)!==0&&U!==null)U.return=O,Ie=U;else e:for(;Ie!==null;){if(O=Ie,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Vu(9,O,O.return)}var ie=O.sibling;if(ie!==null){ie.return=O.return,Ie=ie;break e}Ie=O.return}}var te=l.current;for(Ie=te;Ie!==null;){U=Ie;var se=U.child;if((U.subtreeFlags&2064)!==0&&se!==null)se.return=U,Ie=se;else e:for(U=te;Ie!==null;){if(H=Ie,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Kf(9,H)}}catch($e){Qt(H,H.return,$e)}if(H===U){Ie=null;break e}var Ne=H.sibling;if(Ne!==null){Ne.return=H.return,Ie=Ne;break e}Ie=H.return}}if(ht=_,cs(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(to,l)}catch{}x=!0}return x}finally{ot=f,Hn.transition=u}}return!1}function jE(l,u,f){u=zl(f,u),u=BS(l,u,1),l=ds(l,u,1),u=tn(),l!==null&&(Zi(l,1,u),yn(l,u))}function Qt(l,u,f){if(l.tag===3)jE(l,l,f);else for(;u!==null;){if(u.tag===3){jE(u,l,f);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(fs===null||!fs.has(x))){l=zl(f,l),l=qS(u,l,1),u=ds(u,l,1),l=tn(),u!==null&&(Zi(u,1,l),yn(u,l));break}}u=u.return}}function E$(l,u,f){var x=l.pingCache;x!==null&&x.delete(u),u=tn(),l.pingedLanes|=l.suspendedLanes&f,kr===l&&(Or&f)===f&&(fr===4||fr===3&&(Or&130023424)===Or&&500>At()-Oy?xo(l,0):Iy|=f),yn(l,u)}function NE(l,u){u===0&&((l.mode&1)===0?u=1:(u=yl,yl<<=1,(yl&130023424)===0&&(yl=4194304)));var f=tn();l=bi(l,u),l!==null&&(Zi(l,u,f),yn(l,f))}function T$(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),NE(l,f)}function A$(l,u){var f=0;switch(l.tag){case 13:var x=l.stateNode,_=l.memoizedState;_!==null&&(f=_.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(r(314))}x!==null&&x.delete(u),NE(l,f)}var SE;SE=function(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps||fn.current)pn=!0;else{if((l.lanes&f)===0&&(u.flags&128)===0)return pn=!1,g$(l,u,f);pn=(l.flags&131072)!==0}else pn=!1,Vt&&(u.flags&1048576)!==0&&iS(u,Pf,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;Hf(l,u),l=u.pendingProps;var _=Ml(u,Vr.current);Bl(u,f),_=uy(null,u,x,l,_,f);var O=dy();return u.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,mn(x)?(O=!0,Tf(u)):O=!1,u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,ny(u),_.updater=zf,u.stateNode=_,_._reactInternals=u,yy(u,x,l,f),u=wy(null,u,x,!0,O,f)):(u.tag=0,Vt&&O&&Gg(u),en(null,u,_,f),u=u.child),u;case 16:x=u.elementType;e:{switch(Hf(l,u),l=u.pendingProps,_=x._init,x=_(x._payload),u.type=x,_=u.tag=P$(x),l=pa(x,l),_){case 0:u=by(null,u,x,l,f);break e;case 1:u=JS(null,u,x,l,f);break e;case 11:u=GS(null,u,x,l,f);break e;case 14:u=KS(null,u,x,pa(x.type,l),f);break e}throw Error(r(306,x,""))}return u;case 0:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:pa(x,_),by(l,u,x,_,f);case 1:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:pa(x,_),JS(l,u,x,_,f);case 3:e:{if(ZS(u),l===null)throw Error(r(387));x=u.pendingProps,O=u.memoizedState,_=O.element,mS(l,u),Lf(u,x,null,f);var U=u.memoizedState;if(x=U.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){_=zl(Error(r(423)),u),u=eE(l,u,x,f,_);break e}else if(x!==_){_=zl(Error(r(424)),u),u=eE(l,u,x,f,_);break e}else for(Tn=ss(u.stateNode.containerInfo.firstChild),En=u,Vt=!0,ma=null,f=hS(u,null,x,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Fl(),x===_){u=ki(l,u,f);break e}en(l,u,x,f)}u=u.child}return u;case 5:return yS(u),l===null&&Yg(u),x=u.type,_=u.pendingProps,O=l!==null?l.memoizedProps:null,U=_.children,Ug(x,_)?U=null:O!==null&&Ug(x,O)&&(u.flags|=32),XS(l,u),en(l,u,U,f),u.child;case 6:return l===null&&Yg(u),null;case 13:return tE(l,u,f);case 4:return ay(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=Vl(u,null,x,f):en(l,u,x,f),u.child;case 11:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:pa(x,_),GS(l,u,x,_,f);case 7:return en(l,u,u.pendingProps,f),u.child;case 8:return en(l,u,u.pendingProps.children,f),u.child;case 12:return en(l,u,u.pendingProps.children,f),u.child;case 10:e:{if(x=u.type._context,_=u.pendingProps,O=u.memoizedProps,U=_.value,Ct(Rf,x._currentValue),x._currentValue=U,O!==null)if(fa(O.value,U)){if(O.children===_.children&&!fn.current){u=ki(l,u,f);break e}}else for(O=u.child,O!==null&&(O.return=u);O!==null;){var H=O.dependencies;if(H!==null){U=O.child;for(var K=H.firstContext;K!==null;){if(K.context===x){if(O.tag===1){K=wi(-1,f&-f),K.tag=2;var ce=O.updateQueue;if(ce!==null){ce=ce.shared;var we=ce.pending;we===null?K.next=K:(K.next=we.next,we.next=K),ce.pending=K}}O.lanes|=f,K=O.alternate,K!==null&&(K.lanes|=f),ty(O.return,f,u),H.lanes|=f;break}K=K.next}}else if(O.tag===10)U=O.type===u.type?null:O.child;else if(O.tag===18){if(U=O.return,U===null)throw Error(r(341));U.lanes|=f,H=U.alternate,H!==null&&(H.lanes|=f),ty(U,f,u),U=O.sibling}else U=O.child;if(U!==null)U.return=O;else for(U=O;U!==null;){if(U===u){U=null;break}if(O=U.sibling,O!==null){O.return=U.return,U=O;break}U=U.return}O=U}en(l,u,_.children,f),u=u.child}return u;case 9:return _=u.type,x=u.pendingProps.children,Bl(u,f),_=zn(_),x=x(_),u.flags|=1,en(l,u,x,f),u.child;case 14:return x=u.type,_=pa(x,u.pendingProps),_=pa(x.type,_),KS(l,u,x,_,f);case 15:return QS(l,u,u.type,u.pendingProps,f);case 17:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:pa(x,_),Hf(l,u),u.tag=1,mn(x)?(l=!0,Tf(u)):l=!1,Bl(u,f),VS(u,x,_),yy(u,x,_,f),wy(null,u,x,!0,l,f);case 19:return nE(l,u,f);case 22:return YS(l,u,f)}throw Error(r(156,u.tag))};function EE(l,u){return pl(l,u)}function C$(l,u,f,x){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(l,u,f,x){return new C$(l,u,f,x)}function Uy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function P$(l){if(typeof l=="function")return Uy(l)?1:0;if(l!=null){if(l=l.$$typeof,l===F)return 11;if(l===ne)return 14}return 2}function ys(l,u){var f=l.alternate;return f===null?(f=Gn(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&14680064,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f}function nm(l,u,f,x,_,O){var U=2;if(x=l,typeof l=="function")Uy(l)&&(U=1);else if(typeof l=="string")U=5;else e:switch(l){case A:return bo(f.children,_,O,u);case R:U=8,_|=8;break;case M:return l=Gn(12,f,u,_|2),l.elementType=M,l.lanes=O,l;case L:return l=Gn(13,f,u,_),l.elementType=L,l.lanes=O,l;case Y:return l=Gn(19,f,u,_),l.elementType=Y,l.lanes=O,l;case G:return am(f,_,O,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case D:U=10;break e;case C:U=9;break e;case F:U=11;break e;case ne:U=14;break e;case W:U=16,x=null;break e}throw Error(r(130,l==null?l:typeof l,""))}return u=Gn(U,f,u,_),u.elementType=l,u.type=x,u.lanes=O,u}function bo(l,u,f,x){return l=Gn(7,l,x,u),l.lanes=f,l}function am(l,u,f,x){return l=Gn(22,l,x,u),l.elementType=G,l.lanes=f,l.stateNode={isHidden:!1},l}function By(l,u,f){return l=Gn(6,l,null,u),l.lanes=f,l}function qy(l,u,f){return u=Gn(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function I$(l,u,f,x,_){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ji(0),this.expirationTimes=Ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.identifierPrefix=x,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function zy(l,u,f,x,_,O,U,H,K){return l=new I$(l,u,f,H,K),u===1?(u=1,O===!0&&(u|=8)):u=0,O=Gn(3,null,null,u),l.current=O,O.stateNode=l,O.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ny(O),l}function O$(l,u,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:x==null?null:""+x,children:l,containerInfo:u,implementation:f}}function TE(l){if(!l)return ls;l=l._reactInternals;e:{if(sa(l)!==l||l.tag!==1)throw Error(r(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(mn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(r(171))}if(l.tag===1){var f=l.type;if(mn(f))return rS(l,f,u)}return u}function AE(l,u,f,x,_,O,U,H,K){return l=zy(f,x,!0,l,_,O,U,H,K),l.context=TE(null),f=l.current,x=tn(),_=ps(f),O=wi(x,_),O.callback=u??null,ds(f,O,_),l.current.lanes=_,Zi(l,_,x),yn(l,x),l}function im(l,u,f,x){var _=u.current,O=tn(),U=ps(_);return f=TE(f),u.context===null?u.context=f:u.pendingContext=f,u=wi(O,U),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=ds(_,u,U),l!==null&&(xa(l,_,U,O),Mf(l,_,U)),U}function sm(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function CE(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function Wy(l,u){CE(l,u),(l=l.alternate)&&CE(l,u)}function R$(){return null}var PE=typeof reportError=="function"?reportError:function(l){console.error(l)};function Hy(l){this._internalRoot=l}om.prototype.render=Hy.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));im(l,u,null,null)},om.prototype.unmount=Hy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;yo(function(){im(null,l,null,null)}),u[gi]=null}};function om(l){this._internalRoot=l}om.prototype.unstable_scheduleHydration=function(l){if(l){var u=of();l={blockedOn:null,target:l,priority:u};for(var f=0;f<$a.length&&u!==0&&u<$a[f].priority;f++);$a.splice(f,0,l),f===0&&uf(l)}};function Gy(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function lm(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function IE(){}function D$(l,u,f,x,_){if(_){if(typeof x=="function"){var O=x;x=function(){var ce=sm(U);O.call(ce)}}var U=AE(u,x,l,0,null,!1,!1,"",IE);return l._reactRootContainer=U,l[gi]=U.current,Eu(l.nodeType===8?l.parentNode:l),yo(),U}for(;_=l.lastChild;)l.removeChild(_);if(typeof x=="function"){var H=x;x=function(){var ce=sm(K);H.call(ce)}}var K=zy(l,0,!1,null,null,!1,!1,"",IE);return l._reactRootContainer=K,l[gi]=K.current,Eu(l.nodeType===8?l.parentNode:l),yo(function(){im(u,K,f,x)}),K}function cm(l,u,f,x,_){var O=f._reactRootContainer;if(O){var U=O;if(typeof _=="function"){var H=_;_=function(){var K=sm(U);H.call(K)}}im(u,U,l,_)}else U=D$(f,u,l,_,x);return sm(U)}af=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var f=Xi(u.pendingLanes);f!==0&&(es(u,f|1),yn(u,At()),(ht&6)===0&&(Gl=At()+500,cs()))}break;case 13:yo(function(){var x=bi(l,1);if(x!==null){var _=tn();xa(x,l,1,_)}}),Wy(l,1)}},xl=function(l){if(l.tag===13){var u=bi(l,134217728);if(u!==null){var f=tn();xa(u,l,134217728,f)}Wy(l,134217728)}},sf=function(l){if(l.tag===13){var u=ps(l),f=bi(l,u);if(f!==null){var x=tn();xa(f,l,u,x)}Wy(l,u)}},of=function(){return ot},lf=function(l,u){var f=ot;try{return ot=l,u()}finally{ot=f}},cl=function(l,u,f){switch(u){case"input":if(Nt(l,f),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var x=f[u];if(x!==l&&x.form===l.form){var _=Sf(x);if(!_)throw Error(r(90));le(x),Nt(x,_)}}}break;case"textarea":St(l,f);break;case"select":u=f.value,u!=null&&Ce(l,!!f.multiple,u,!1)}},Ys=$y,lu=yo;var M$={usingClientEntryPoint:!1,Events:[Cu,Rl,Sf,Ma,ou,$y]},zu={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L$={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=du(l),l===null?null:l.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||R$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{to=um.inject(L$),_n=um}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M$,xn.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gy(u))throw Error(r(200));return O$(l,u,null,f)},xn.createRoot=function(l,u){if(!Gy(l))throw Error(r(299));var f=!1,x="",_=PE;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(_=u.onRecoverableError)),u=zy(l,1,!1,null,null,f,!1,x,_),l[gi]=u.current,Eu(l.nodeType===8?l.parentNode:l),new Hy(u)},xn.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=du(u),l=l===null?null:l.stateNode,l},xn.flushSync=function(l){return yo(l)},xn.hydrate=function(l,u,f){if(!lm(u))throw Error(r(200));return cm(null,l,u,!0,f)},xn.hydrateRoot=function(l,u,f){if(!Gy(l))throw Error(r(405));var x=f!=null&&f.hydratedSources||null,_=!1,O="",U=PE;if(f!=null&&(f.unstable_strictMode===!0&&(_=!0),f.identifierPrefix!==void 0&&(O=f.identifierPrefix),f.onRecoverableError!==void 0&&(U=f.onRecoverableError)),u=AE(u,null,l,1,f??null,_,!1,O,U),l[gi]=u.current,Eu(l),x)for(l=0;l<x.length;l++)f=x[l],_=f._getVersion,_=_(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,_]:u.mutableSourceEagerHydrationData.push(f,_);return new om(u)},xn.render=function(l,u,f){if(!lm(u))throw Error(r(200));return cm(null,l,u,!1,f)},xn.unmountComponentAtNode=function(l){if(!lm(l))throw Error(r(40));return l._reactRootContainer?(yo(function(){cm(null,null,l,!1,function(){l._reactRootContainer=null,l[gi]=null})}),!0):!1},xn.unstable_batchedUpdates=$y,xn.unstable_renderSubtreeIntoContainer=function(l,u,f,x){if(!lm(f))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return cm(l,u,f,!1,x)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var VE;function W$(){if(VE)return Yy.exports;VE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yy.exports=z$(),Yy.exports}var UE;function H$(){if(UE)return hm;UE=1;var t=W$();return hm.createRoot=t.createRoot,hm.hydrateRoot=t.hydrateRoot,hm}var G$=H$();const K$=vt(G$);var BE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},Q$=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,m=s>>2,p=(s&3)<<4|c>>4;let y=(c&15)<<2|h>>6,v=h&63;d||(v=64,o||(y=64)),n.push(r[m],r[p],r[y],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Q$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const p=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||c==null||h==null||p==null)throw new Y$;const y=s<<2|c>>4;if(n.push(y),h!==64){const v=c<<4&240|h>>2;if(n.push(v),p!==64){const w=h<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X$=function(t){const e=yD(t);return xD.encodeByteArray(e,!0)},Ym=function(t){return X$(t).replace(/\./g,"")},vD=function(t){try{return xD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$=()=>J$().__FIREBASE_DEFAULTS__,eF=()=>{if(typeof process>"u"||typeof BE>"u")return;const t=BE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vD(t[1]);return e&&JSON.parse(e)},u0=()=>{try{return Z$()||eF()||tF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bD=t=>{var e,r;return(r=(e=u0())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},wD=t=>{const e=bD(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},kD=()=>{var t;return(t=u0())===null||t===void 0?void 0:t.config},_D=t=>{var e;return(e=u0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ym(JSON.stringify(r)),Ym(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xr())}function aF(){var t;const e=(t=u0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lF(){const t=Xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cF(){return!aF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uF(){try{return typeof indexedDB=="object"}catch{return!1}}function dF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="FirebaseError";class oi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=hF,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_h.prototype.create)}}class _h{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?fF(s,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new oi(a,c,n)}}function fF(t,e){return t.replace(mF,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const mF=/\{\$([^}]+)}/g;function pF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(qE(s)&&qE(o)){if(!Xm(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function qE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function nd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function ad(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function gF(t,e){const r=new yF(t,e);return r.subscribe.bind(r)}class yF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");xF(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=Zy),a.error===void 0&&(a.error=Zy),a.complete===void 0&&(a.complete=Zy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Zy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class Ms{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new rF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),a=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wF(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:bF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bF(t){return t===jo?void 0:t}function wF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new vF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const _F={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},jF=lt.INFO,NF={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},SF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=NF[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h1{constructor(e){this.name=e,this._logLevel=jF,this._logHandler=SF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const EF=(t,e)=>e.some(r=>t instanceof r);let zE,WE;function TF(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AF(){return WE||(WE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ND=new WeakMap,gk=new WeakMap,SD=new WeakMap,ex=new WeakMap,f1=new WeakMap;function CF(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Cs(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&ND.set(r,t)}).catch(()=>{}),f1.set(e,t),e}function PF(t){if(gk.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gk.set(t,e)}let yk={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return gk.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SD.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Cs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IF(t){yk=t(yk)}function OF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(tx(this),e,...r);return SD.set(n,e.sort?e.sort():[e]),Cs(n)}:AF().includes(t)?function(...e){return t.apply(tx(this),e),Cs(ND.get(this))}:function(...e){return Cs(t.apply(tx(this),e))}}function RF(t){return typeof t=="function"?OF(t):(t instanceof IDBTransaction&&PF(t),EF(t,TF())?new Proxy(t,yk):t)}function Cs(t){if(t instanceof IDBRequest)return CF(t);if(ex.has(t))return ex.get(t);const e=RF(t);return e!==t&&(ex.set(t,e),f1.set(e,t)),e}const tx=t=>f1.get(t);function DF(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),c=Cs(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Cs(o.result),d.oldVersion,d.newVersion,Cs(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const MF=["get","getKey","getAll","getAllKeys","count"],LF=["put","add","delete","clear"],rx=new Map;function HE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rx.get(e))return rx.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=LF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||MF.includes(r)))return;const s=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return rx.set(e,s),s}IF(t=>({...t,get:(e,r,n)=>HE(e,r)||t.get(e,r,n),has:(e,r)=>!!HE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(FF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function FF(t){const e=t.getComponent();return e?.type==="VERSION"}const xk="@firebase/app",GE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new h1("@firebase/app"),VF="@firebase/app-compat",UF="@firebase/analytics-compat",BF="@firebase/analytics",qF="@firebase/app-check-compat",zF="@firebase/app-check",WF="@firebase/auth",HF="@firebase/auth-compat",GF="@firebase/database",KF="@firebase/data-connect",QF="@firebase/database-compat",YF="@firebase/functions",XF="@firebase/functions-compat",JF="@firebase/installations",ZF="@firebase/installations-compat",eV="@firebase/messaging",tV="@firebase/messaging-compat",rV="@firebase/performance",nV="@firebase/performance-compat",aV="@firebase/remote-config",iV="@firebase/remote-config-compat",sV="@firebase/storage",oV="@firebase/storage-compat",lV="@firebase/firestore",cV="@firebase/vertexai-preview",uV="@firebase/firestore-compat",dV="firebase",hV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="[DEFAULT]",fV={[xk]:"fire-core",[VF]:"fire-core-compat",[BF]:"fire-analytics",[UF]:"fire-analytics-compat",[zF]:"fire-app-check",[qF]:"fire-app-check-compat",[WF]:"fire-auth",[HF]:"fire-auth-compat",[GF]:"fire-rtdb",[KF]:"fire-data-connect",[QF]:"fire-rtdb-compat",[YF]:"fire-fn",[XF]:"fire-fn-compat",[JF]:"fire-iid",[ZF]:"fire-iid-compat",[eV]:"fire-fcm",[tV]:"fire-fcm-compat",[rV]:"fire-perf",[nV]:"fire-perf-compat",[aV]:"fire-rc",[iV]:"fire-rc-compat",[sV]:"fire-gcs",[oV]:"fire-gcs-compat",[lV]:"fire-fst",[uV]:"fire-fst-compat",[cV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map,mV=new Map,bk=new Map;function KE(t,e){try{t.container.addComponent(e)}catch(r){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Vo(t){const e=t.name;if(bk.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;bk.set(e,t);for(const r of Jm.values())KE(r,t);for(const r of mV.values())KE(r,t);return!0}function d0(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ha(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new _h("app","Firebase",pV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=hV;function ED(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:vk,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw Ps.create("bad-app-name",{appName:String(a)});if(r||(r=kD()),!r)throw Ps.create("no-options");const s=Jm.get(a);if(s){if(Xm(r,s.options)&&Xm(n,s.config))return s;throw Ps.create("duplicate-app",{appName:a})}const o=new kF(a);for(const d of bk.values())o.addComponent(d);const c=new gV(r,n,o);return Jm.set(a,c),c}function m1(t=vk){const e=Jm.get(t);if(!e&&t===vk&&kD())return ED();if(!e)throw Ps.create("no-app",{appName:t});return e}function Qa(t,e,r){var n;let a=(n=fV[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(c.join(" "));return}Vo(new Ms(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="firebase-heartbeat-database",xV=1,Ed="firebase-heartbeat-store";let nx=null;function TD(){return nx||(nx=DF(yV,xV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),nx}async function vV(t){try{const r=(await TD()).transaction(Ed),n=await r.objectStore(Ed).get(AD(t));return await r.done,n}catch(e){if(e instanceof oi)Li.warn(e.message);else{const r=Ps.create("idb-get",{originalErrorMessage:e?.message});Li.warn(r.message)}}}async function QE(t,e){try{const n=(await TD()).transaction(Ed,"readwrite");await n.objectStore(Ed).put(e,AD(t)),await n.done}catch(r){if(r instanceof oi)Li.warn(r.message);else{const n=Ps.create("idb-set",{originalErrorMessage:r?.message});Li.warn(n.message)}}}function AD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=1024,wV=720*60*60*1e3;class kV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new jV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=YE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=wV}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Li.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=YE(),{heartbeatsToSend:n,unsentEntries:a}=_V(this._heartbeatsCache.heartbeats),s=Ym(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Li.warn(r),""}}}function YE(){return new Date().toISOString().substring(0,10)}function _V(t,e=bV){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),XE(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),XE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class jV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uF()?dF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vV(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return QE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return QE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function XE(t){return Ym(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t){Vo(new Ms("platform-logger",e=>new $F(e),"PRIVATE")),Vo(new Ms("heartbeat",e=>new kV(e),"PRIVATE")),Qa(xk,GE,t),Qa(xk,GE,"esm2017"),Qa("fire-js","")}NV("");var SV="firebase",EV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qa(SV,EV,"app");function p1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function CD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TV=CD,PD=new _h("auth","Firebase",CD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new h1("@firebase/auth");function AV(t,...e){Zm.logLevel<=lt.WARN&&Zm.warn(`Auth (${Zo}): ${t}`,...e)}function Fm(t,...e){Zm.logLevel<=lt.ERROR&&Zm.error(`Auth (${Zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,...e){throw g1(t,...e)}function Ya(t,...e){return g1(t,...e)}function ID(t,e,r){const n=Object.assign(Object.assign({},TV()),{[e]:r});return new _h("auth","Firebase",n).create(e,{appName:t.name})}function Oi(t){return ID(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return PD.create(t,...e)}function ze(t,e,...r){if(!t)throw g1(e,...r)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fm(e),new Error(e)}function $i(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CV(){return JE()==="http:"||JE()==="https:"}function JE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CV()||sF()||"connection"in navigator)?navigator.onLine:!0}function IV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.shortDelay=e,this.longDelay=r,$i(r>e,"Short delay should be less than long delay!"),this.isMobile=nF()||oF()}get(){return PV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e){$i(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new Nh(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qs(t,e,r,n,a={}){return RD(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const c=jh(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},s);return iF()||(h.referrerPolicy="no-referrer"),OD.fetch()(DD(t,t.config.apiHost,r,c),h)})}async function RD(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},OV),e);try{const a=new MV(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fm(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw fm(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw fm(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw fm(t,"user-disabled",o);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ID(t,m,h);Ta(t,m)}}catch(a){if(a instanceof oi)throw a;Ta(t,"network-request-failed",{message:String(a)})}}async function Sh(t,e,r,n,a={}){const s=await qs(t,e,r,n,a);return"mfaPendingCredential"in s&&Ta(t,"multi-factor-auth-required",{_serverResponse:s}),s}function DD(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?y1(t.config,a):`${t.config.apiScheme}://${a}`}function DV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ya(this.auth,"network-request-failed")),RV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Ya(t,e,n);return a.customData._tokenResponse=r,a}function ZE(t){return t!==void 0&&t.enterprise!==void 0}class LV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return DV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function $V(t,e){return qs(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){return qs(t,"POST","/v1/accounts:delete",e)}async function MD(t,e){return qs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VV(t,e=!1){const r=$t(t),n=await r.getIdToken(e),a=x1(n);ze(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s?.sign_in_provider;return{claims:a,token:n,authTime:fd(ax(a.auth_time)),issuedAtTime:fd(ax(a.iat)),expirationTime:fd(ax(a.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function ax(t){return Number(t)*1e3}function x1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Fm("JWT malformed, contained fewer than 3 sections"),null;try{const a=vD(r);return a?JSON.parse(a):(Fm("Failed to decode base64 JWT payload"),null)}catch(a){return Fm("Caught error parsing JWT payload as JSON",a?.toString()),null}}function eT(t){const e=x1(t);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof oi&&UV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function UV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fd(this.lastLoginAt),this.creationTime=fd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Td(t,MD(r,{idToken:n}));ze(a?.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?LD(s.providerUserInfo):[],c=zV(t.providerData,o),d=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!c?.length,m=d?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new kk(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function qV(t){const e=$t(t);await ep(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zV(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function LD(t){return t.map(e=>{var{providerId:r}=e,n=p1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e){const r=await RD(t,{},async()=>{const n=jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=DD(t,a,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",OD.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function HV(t,e){return qs(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const r=eT(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await WV(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new lc;return n&&(ze(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(ze(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(ze(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lc,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ti{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=p1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Td(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return VV(this,e)}reload(){return qV(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ep(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ha(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Td(this,FV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,c,d,h,m;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,v=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,k=(c=r.tenantId)!==null&&c!==void 0?c:void 0,b=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=r.createdAt)!==null&&h!==void 0?h:void 0,N=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:E,emailVerified:P,isAnonymous:S,providerData:T,stsTokenManager:A}=r;ze(E&&A,e,"internal-error");const R=lc.fromJSON(this.name,A);ze(typeof E=="string",e,"internal-error"),vs(p,e.name),vs(y,e.name),ze(typeof P=="boolean",e,"internal-error"),ze(typeof S=="boolean",e,"internal-error"),vs(v,e.name),vs(w,e.name),vs(k,e.name),vs(b,e.name),vs(j,e.name),vs(N,e.name);const M=new Ti({uid:E,auth:e,email:y,emailVerified:P,displayName:p,isAnonymous:S,photoURL:w,phoneNumber:v,tenantId:k,stsTokenManager:R,createdAt:j,lastLoginAt:N});return T&&Array.isArray(T)&&(M.providerData=T.map(D=>Object.assign({},D))),b&&(M._redirectEventId=b),M}static async _fromIdTokenResponse(e,r,n=!1){const a=new lc;a.updateFromServerResponse(r);const s=new Ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await ep(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];ze(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?LD(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!s?.length,c=new lc;c.updateFromIdToken(n);const d=new Ti({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new kk(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!s?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;function Ai(t){$i(t instanceof Function,"Expected a class definition");let e=tT.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}$D.type="NONE";const rT=$D;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e,r){return`firebase:${t}:${e}:${r}`}class cc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=Vm(this.userKey,a.apiKey,s),this.fullPersistenceKey=Vm("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new cc(Ai(rT),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=a[0]||Ai(rT);const o=Vm(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const m=await h._get(o);if(m){const p=Ti._fromJSON(e,m);h!==s&&(c=p),s=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new cc(s,e,n):(s=d[0],c&&await s._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new cc(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zD(e))return"Blackberry";if(WD(e))return"Webos";if(VD(e))return"Safari";if((e.includes("chrome/")||UD(e))&&!e.includes("edge/"))return"Chrome";if(qD(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function FD(t=Xr()){return/firefox\//i.test(t)}function VD(t=Xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UD(t=Xr()){return/crios\//i.test(t)}function BD(t=Xr()){return/iemobile/i.test(t)}function qD(t=Xr()){return/android/i.test(t)}function zD(t=Xr()){return/blackberry/i.test(t)}function WD(t=Xr()){return/webos/i.test(t)}function v1(t=Xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GV(t=Xr()){var e;return v1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KV(){return lF()&&document.documentMode===10}function HD(t=Xr()){return v1(t)||qD(t)||WD(t)||zD(t)||/windows phone/i.test(t)||BD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e=[]){let r;switch(t){case"Browser":r=nT(Xr());break;case"Worker":r=`${nT(Xr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,c)=>{try{const d=e(s);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e={}){return qs(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=6;class JV{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:XV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aT(this),this.idTokenSubscription=new aT(this),this.beforeStateQueue=new QV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ai(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await cc.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await MD(this,{idToken:e}),n=await Ti._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ha(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(a=d.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ep(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ha(this.app))return Promise.reject(Oi(this));const r=e?$t(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ha(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ha(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YV(this),r=new JV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _h("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await HV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ai(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await cc.create(this,[Ai(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&AV(`Error while retrieving App Check token: ${r.error}`),r?.token}}function el(t){return $t(t)}class aT{constructor(e){this.auth=e,this.observer=null,this.addObserver=gF(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e9(t){h0=t}function KD(t){return h0.loadJS(t)}function t9(){return h0.recaptchaEnterpriseScript}function r9(){return h0.gapiScript}function n9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const a9="recaptcha-enterprise",i9="NO_RECAPTCHA";class s9{constructor(e){this.type=a9,this.auth=el(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{$V(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new LV(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(d=>{c(d)})})}function a(s,o,c){const d=window.grecaptcha;ZE(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(i9)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(c=>{if(!r&&ZE(window.grecaptcha))a(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=t9();d.length!==0&&(d+=c),KD(d).then(()=>{a(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function iT(t,e,r,n=!1){const a=new s9(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _k(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await iT(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await iT(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t,e){const r=d0(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Xm(s,e??{}))return a;Ta(a,"already-initialized")}return r.initialize({options:e})}function l9(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Ai);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function c9(t,e,r){const n=el(t);ze(n._canInitEmulator,n,"emulator-config-failed"),ze(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=QD(e),{host:o,port:c}=u9(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),d9()}function QD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u9(t){const e=QD(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:sT(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:sT(o)}}}function sT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d9(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,r){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function h9(t,e){return qs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9(t,e){return Sh(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e){return Sh(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function p9(t,e){return Sh(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends b1{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Ad(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ad(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _k(e,r,"signInWithPassword",f9);case"emailLink":return m9(e,{email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _k(e,n,"signUpPassword",h9);case"emailLink":return p9(e,{idToken:r,email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e){return Sh(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="http://localhost";class Uo extends b1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ta("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=p1(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Uo(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return uc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,uc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,uc(e,r)}buildRequest(){const e={requestUri:g9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=jh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x9(t){const e=nd(ad(t)).link,r=e?nd(ad(e)).deep_link_id:null,n=nd(ad(t)).deep_link_id;return(n?nd(ad(n)).link:null)||n||r||e||t}class w1{constructor(e){var r,n,a,s,o,c;const d=nd(ad(e)),h=(r=d.apiKey)!==null&&r!==void 0?r:null,m=(n=d.oobCode)!==null&&n!==void 0?n:null,p=y9((a=d.mode)!==null&&a!==void 0?a:null);ze(h&&m&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=m,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const r=x9(e);try{return new w1(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.providerId=Qc.PROVIDER_ID}static credential(e,r){return Ad._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=w1.parseLink(r);return ze(n,"argument-error"),Ad._fromEmailAndCode(e,n.code,n.tenantId)}}Qc.PROVIDER_ID="password";Qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends YD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Eh{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Uo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return _s.credential(r,n)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Eh{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Eh{constructor(){super("twitter.com")}static credential(e,r){return Uo._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ns.credential(r,n)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v9(t,e){return Sh(t,"POST","/v1/accounts:signUp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Ti._fromIdTokenResponse(e,n,a),o=oT(n);return new Bo({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=oT(n);return new Bo({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function oT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends oi{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,tp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new tp(e,r,n,a)}}function XD(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?tp._fromErrorAndOperation(t,s,e,n):s})}async function b9(t,e,r=!1){const n=await Td(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Bo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e,r=!1){const{auth:n}=t;if(Ha(n.app))return Promise.reject(Oi(n));const a="reauthenticate";try{const s=await Td(t,XD(n,a,e,t),r);ze(s.idToken,n,"internal-error");const o=x1(s.idToken);ze(o,n,"internal-error");const{sub:c}=o;return ze(t.uid===c,n,"user-mismatch"),Bo._forOperation(t,a,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ta(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(t,e,r=!1){if(Ha(t.app))return Promise.reject(Oi(t));const n="signIn",a=await XD(t,n,e),s=await Bo._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function k9(t,e){return JD(el(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(t){const e=el(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _9(t,e,r){if(Ha(t.app))return Promise.reject(Oi(t));const n=el(t),o=await _k(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v9).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ZD(t),d}),c=await Bo._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function j9(t,e,r){return Ha(t.app)?Promise.reject(Oi(t)):k9($t(t),Qc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&ZD(t),n})}function N9(t,e,r,n){return $t(t).onIdTokenChanged(e,r,n)}function S9(t,e,r){return $t(t).beforeAuthStateChanged(e,r)}function E9(t,e,r,n){return $t(t).onAuthStateChanged(e,r,n)}function T9(t){return $t(t).signOut()}const rp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(rp,"1"),this.storage.removeItem(rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=1e3,C9=10;class tM extends eM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);KV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,C9):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},A9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}tM.type="LOCAL";const P9=tM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM extends eM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}rM.type="SESSION";const nM=rM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new f0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,s)),d=await I9(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}f0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((c,d)=>{const h=k1("",20);a.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(p){const y=p;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return window}function R9(t){Xa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return typeof Xa().WorkerGlobalScope<"u"&&typeof Xa().importScripts=="function"}async function D9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function L9(){return aM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="firebaseLocalStorageDb",$9=1,np="firebaseLocalStorage",sM="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function m0(t,e){return t.transaction([np],e?"readwrite":"readonly").objectStore(np)}function F9(){const t=indexedDB.deleteDatabase(iM);return new Th(t).toPromise()}function jk(){const t=indexedDB.open(iM,$9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(np,{keyPath:sM})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(np)?e(n):(n.close(),await F9(),e(await jk()))})})}async function lT(t,e,r){const n=m0(t,!0).put({[sM]:e,value:r});return new Th(n).toPromise()}async function V9(t,e){const r=m0(t,!1).get(e),n=await new Th(r).toPromise();return n===void 0?null:n.value}function cT(t,e){const r=m0(t,!0).delete(e);return new Th(r).toPromise()}const U9=800,B9=3;class oM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jk(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>B9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=f0._getInstance(L9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await D9(),!this.activeServiceWorker)return;this.sender=new O9(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jk();return await lT(e,rp,"1"),await cT(e,rp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>lT(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>V9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>cT(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=m0(a,!1).getAll();return new Th(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oM.type="LOCAL";const q9=oM;new Nh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t,e){return e?Ai(e):(ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends b1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return uc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function W9(t){return JD(t.auth,new _1(t),t.bypassAuthState)}function H9(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),w9(r,new _1(t),t.bypassAuthState)}async function G9(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),b9(r,new _1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W9;case"linkViaPopup":case"linkViaRedirect":return G9;case"reauthViaPopup":case"reauthViaRedirect":return H9;default:Ta(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=new Nh(2e3,1e4);class rc extends lM{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,rc.currentPopupAction&&rc.currentPopupAction.cancel(),rc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=k1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ya(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ya(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ya(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K9.get())};e()}}rc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="pendingRedirect",Um=new Map;class Y9 extends lM{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Um.get(this.auth._key());if(!e){try{const n=await X9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Um.set(this.auth._key(),e)}return this.bypassAuthState||Um.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X9(t,e){const r=e7(e),n=Z9(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function J9(t,e){Um.set(t._key(),e)}function Z9(t){return Ai(t._redirectPersistence)}function e7(t){return Vm(Q9,t.config.apiKey,t.name)}async function t7(t,e,r=!1){if(Ha(t.app))return Promise.reject(Oi(t));const n=el(t),a=z9(n,e),o=await new Y9(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=600*1e3;class n7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a7(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!cM(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ya(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r7&&this.cachedEventUids.clear(),this.cachedEventUids.has(uT(e))}saveEventToCache(e){this.cachedEventUids.add(uT(e)),this.lastProcessedEventTime=Date.now()}}function uT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function a7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e={}){return qs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o7=/^https?/;async function l7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i7(t);for(const r of e)try{if(c7(r))return}catch{}Ta(t,"unauthorized-domain")}function c7(t){const e=wk(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!o7.test(r))return!1;if(s7.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=new Nh(3e4,6e4);function dT(){const t=Xa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function d7(t){return new Promise((e,r)=>{var n,a,s;function o(){dT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dT(),r(Ya(t,"network-request-failed"))},timeout:u7.get()})}if(!((a=(n=Xa().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Xa().gapi)===null||s===void 0)&&s.load)o();else{const c=n9("iframefcb");return Xa()[c]=()=>{gapi.load?o():r(Ya(t,"network-request-failed"))},KD(`${r9()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Bm=null,e})}let Bm=null;function h7(t){return Bm=Bm||d7(t),Bm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new Nh(5e3,15e3),m7="__/auth/iframe",p7="emulator/auth/iframe",g7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x7(t){const e=t.config;ze(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?y1(e,p7):`https://${t.config.authDomain}/${m7}`,n={apiKey:e.apiKey,appName:t.name,v:Zo},a=y7.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${jh(n).slice(1)}`}async function v7(t){const e=await h7(t),r=Xa().gapi;return ze(r,t,"internal-error"),e.open({where:document.body,url:x7(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g7,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Ya(t,"network-request-failed"),c=Xa().setTimeout(()=>{s(o)},f7.get());function d(){Xa().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w7=500,k7=600,_7="_blank",j7="http://localhost";class hT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N7(t,e,r,n=w7,a=k7){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},b7),{width:n.toString(),height:a.toString(),top:s,left:o}),h=Xr().toLowerCase();r&&(c=UD(h)?_7:r),FD(h)&&(e=e||j7,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[v,w])=>`${y}${v}=${w},`,"");if(GV(h)&&c!=="_self")return S7(e||"",c),new hT(null);const p=window.open(e||"",c,m);ze(p,t,"popup-blocked");try{p.focus()}catch{}return new hT(p)}function S7(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7="__/auth/handler",T7="emulator/auth/handler",A7=encodeURIComponent("fac");async function fT(t,e,r,n,a,s){ze(t.config.authDomain,t,"auth-domain-config-required"),ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zo,eventId:a};if(e instanceof YD){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof Eh){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),h=d?`#${A7}=${encodeURIComponent(d)}`:"";return`${C7(t)}?${jh(c).slice(1)}${h}`}function C7({config:t}){return t.emulator?y1(t,T7):`https://${t.authDomain}/${E7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="webStorageSupport";class P7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nM,this._completeRedirectFn=t7,this._overrideRedirectResult=J9}async _openPopup(e,r,n,a){var s;$i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await fT(e,r,n,wk(),a);return N7(e,o,k1())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await fT(e,r,n,wk(),a);return R9(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):($i(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await v7(e),n=new n7(e);return r.register("authEvent",a=>(ze(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ix,{type:ix},a=>{var s;const o=(s=a?.[0])===null||s===void 0?void 0:s[ix];o!==void 0&&r(!!o),Ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=l7(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return HD()||VD()||v1()}}const I7=P7;var mT="@firebase/auth",pT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D7(t){Vo(new Ms("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;ze(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GD(t)},h=new ZV(n,a,s,d);return l9(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Vo(new Ms("auth-internal",e=>{const r=el(e.getProvider("auth").getImmediate());return(n=>new O7(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qa(mT,pT,R7(t)),Qa(mT,pT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=300,L7=_D("authIdTokenMaxAge")||M7;let gT=null;const $7=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>L7)return;const a=r?.token;gT!==a&&(gT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uM(t=m1()){const e=d0(t,"auth");if(e.isInitialized())return e.getImmediate();const r=o9(t,{popupRedirectResolver:I7,persistence:[q9,P9,nM]}),n=_D("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=$7(s.toString());S9(r,o,()=>o(r.currentUser)),N9(r,c=>o(c))}}const a=bD("auth");return a&&c9(r,`http://${a}`),r}function F7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}e9({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Ya("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",F7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D7("Browser");var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro,dM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function M(){}M.prototype=R.prototype,A.D=R.prototype,A.prototype=new M,A.prototype.constructor=A,A.C=function(D,C,F){for(var L=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)L[Y-2]=arguments[Y];return R.prototype[C].apply(D,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,R,M){M||(M=0);var D=Array(16);if(typeof R=="string")for(var C=0;16>C;++C)D[C]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(C=0;16>C;++C)D[C]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=A.g[0],M=A.g[1],C=A.g[2];var F=A.g[3],L=R+(F^M&(C^F))+D[0]+3614090360&4294967295;R=M+(L<<7&4294967295|L>>>25),L=F+(C^R&(M^C))+D[1]+3905402710&4294967295,F=R+(L<<12&4294967295|L>>>20),L=C+(M^F&(R^M))+D[2]+606105819&4294967295,C=F+(L<<17&4294967295|L>>>15),L=M+(R^C&(F^R))+D[3]+3250441966&4294967295,M=C+(L<<22&4294967295|L>>>10),L=R+(F^M&(C^F))+D[4]+4118548399&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(C^R&(M^C))+D[5]+1200080426&4294967295,F=R+(L<<12&4294967295|L>>>20),L=C+(M^F&(R^M))+D[6]+2821735955&4294967295,C=F+(L<<17&4294967295|L>>>15),L=M+(R^C&(F^R))+D[7]+4249261313&4294967295,M=C+(L<<22&4294967295|L>>>10),L=R+(F^M&(C^F))+D[8]+1770035416&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(C^R&(M^C))+D[9]+2336552879&4294967295,F=R+(L<<12&4294967295|L>>>20),L=C+(M^F&(R^M))+D[10]+4294925233&4294967295,C=F+(L<<17&4294967295|L>>>15),L=M+(R^C&(F^R))+D[11]+2304563134&4294967295,M=C+(L<<22&4294967295|L>>>10),L=R+(F^M&(C^F))+D[12]+1804603682&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(C^R&(M^C))+D[13]+4254626195&4294967295,F=R+(L<<12&4294967295|L>>>20),L=C+(M^F&(R^M))+D[14]+2792965006&4294967295,C=F+(L<<17&4294967295|L>>>15),L=M+(R^C&(F^R))+D[15]+1236535329&4294967295,M=C+(L<<22&4294967295|L>>>10),L=R+(C^F&(M^C))+D[1]+4129170786&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^C&(R^M))+D[6]+3225465664&4294967295,F=R+(L<<9&4294967295|L>>>23),L=C+(R^M&(F^R))+D[11]+643717713&4294967295,C=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(C^F))+D[0]+3921069994&4294967295,M=C+(L<<20&4294967295|L>>>12),L=R+(C^F&(M^C))+D[5]+3593408605&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^C&(R^M))+D[10]+38016083&4294967295,F=R+(L<<9&4294967295|L>>>23),L=C+(R^M&(F^R))+D[15]+3634488961&4294967295,C=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(C^F))+D[4]+3889429448&4294967295,M=C+(L<<20&4294967295|L>>>12),L=R+(C^F&(M^C))+D[9]+568446438&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^C&(R^M))+D[14]+3275163606&4294967295,F=R+(L<<9&4294967295|L>>>23),L=C+(R^M&(F^R))+D[3]+4107603335&4294967295,C=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(C^F))+D[8]+1163531501&4294967295,M=C+(L<<20&4294967295|L>>>12),L=R+(C^F&(M^C))+D[13]+2850285829&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^C&(R^M))+D[2]+4243563512&4294967295,F=R+(L<<9&4294967295|L>>>23),L=C+(R^M&(F^R))+D[7]+1735328473&4294967295,C=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(C^F))+D[12]+2368359562&4294967295,M=C+(L<<20&4294967295|L>>>12),L=R+(M^C^F)+D[5]+4294588738&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^C)+D[8]+2272392833&4294967295,F=R+(L<<11&4294967295|L>>>21),L=C+(F^R^M)+D[11]+1839030562&4294967295,C=F+(L<<16&4294967295|L>>>16),L=M+(C^F^R)+D[14]+4259657740&4294967295,M=C+(L<<23&4294967295|L>>>9),L=R+(M^C^F)+D[1]+2763975236&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^C)+D[4]+1272893353&4294967295,F=R+(L<<11&4294967295|L>>>21),L=C+(F^R^M)+D[7]+4139469664&4294967295,C=F+(L<<16&4294967295|L>>>16),L=M+(C^F^R)+D[10]+3200236656&4294967295,M=C+(L<<23&4294967295|L>>>9),L=R+(M^C^F)+D[13]+681279174&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^C)+D[0]+3936430074&4294967295,F=R+(L<<11&4294967295|L>>>21),L=C+(F^R^M)+D[3]+3572445317&4294967295,C=F+(L<<16&4294967295|L>>>16),L=M+(C^F^R)+D[6]+76029189&4294967295,M=C+(L<<23&4294967295|L>>>9),L=R+(M^C^F)+D[9]+3654602809&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^C)+D[12]+3873151461&4294967295,F=R+(L<<11&4294967295|L>>>21),L=C+(F^R^M)+D[15]+530742520&4294967295,C=F+(L<<16&4294967295|L>>>16),L=M+(C^F^R)+D[2]+3299628645&4294967295,M=C+(L<<23&4294967295|L>>>9),L=R+(C^(M|~F))+D[0]+4096336452&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~C))+D[7]+1126891415&4294967295,F=R+(L<<10&4294967295|L>>>22),L=C+(R^(F|~M))+D[14]+2878612391&4294967295,C=F+(L<<15&4294967295|L>>>17),L=M+(F^(C|~R))+D[5]+4237533241&4294967295,M=C+(L<<21&4294967295|L>>>11),L=R+(C^(M|~F))+D[12]+1700485571&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~C))+D[3]+2399980690&4294967295,F=R+(L<<10&4294967295|L>>>22),L=C+(R^(F|~M))+D[10]+4293915773&4294967295,C=F+(L<<15&4294967295|L>>>17),L=M+(F^(C|~R))+D[1]+2240044497&4294967295,M=C+(L<<21&4294967295|L>>>11),L=R+(C^(M|~F))+D[8]+1873313359&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~C))+D[15]+4264355552&4294967295,F=R+(L<<10&4294967295|L>>>22),L=C+(R^(F|~M))+D[6]+2734768916&4294967295,C=F+(L<<15&4294967295|L>>>17),L=M+(F^(C|~R))+D[13]+1309151649&4294967295,M=C+(L<<21&4294967295|L>>>11),L=R+(C^(M|~F))+D[4]+4149444226&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~C))+D[11]+3174756917&4294967295,F=R+(L<<10&4294967295|L>>>22),L=C+(R^(F|~M))+D[2]+718787259&4294967295,C=F+(L<<15&4294967295|L>>>17),L=M+(F^(C|~R))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(C+(L<<21&4294967295|L>>>11))&4294967295,A.g[2]=A.g[2]+C&4294967295,A.g[3]=A.g[3]+F&4294967295}n.prototype.u=function(A,R){R===void 0&&(R=A.length);for(var M=R-this.blockSize,D=this.B,C=this.h,F=0;F<R;){if(C==0)for(;F<=M;)a(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<R;)if(D[C++]=A.charCodeAt(F++),C==this.blockSize){a(this,D),C=0;break}}else for(;F<R;)if(D[C++]=A[F++],C==this.blockSize){a(this,D),C=0;break}}this.h=C,this.o+=R},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;var M=8*this.o;for(R=A.length-8;R<A.length;++R)A[R]=M&255,M/=256;for(this.u(A),A=Array(16),R=M=0;4>R;++R)for(var D=0;32>D;D+=8)A[M++]=this.g[R]>>>D&255;return A};function s(A,R){var M=c;return Object.prototype.hasOwnProperty.call(M,A)?M[A]:M[A]=R(A)}function o(A,R){this.h=R;for(var M=[],D=!0,C=A.length-1;0<=C;C--){var F=A[C]|0;D&&F==R||(M[C]=F,D=!1)}this.g=M}var c={};function d(A){return-128<=A&&128>A?s(A,function(R){return new o([R|0],0>R?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return b(h(-A));for(var R=[],M=1,D=0;A>=M;D++)R[D]=A/M|0,M*=4294967296;return new o(R,0)}function m(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return b(m(A.substring(1),R));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(R,8)),D=p,C=0;C<A.length;C+=8){var F=Math.min(8,A.length-C),L=parseInt(A.substring(C,C+F),R);8>F?(F=h(Math.pow(R,F)),D=D.j(F).add(h(L))):(D=D.j(M),D=D.add(h(L)))}return D}var p=d(0),y=d(1),v=d(16777216);t=o.prototype,t.m=function(){if(k(this))return-b(this).m();for(var A=0,R=1,M=0;M<this.g.length;M++){var D=this.i(M);A+=(0<=D?D:4294967296+D)*R,R*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(k(this))return"-"+b(this).toString(A);for(var R=h(Math.pow(A,6)),M=this,D="";;){var C=P(M,R).g;M=j(M,C.j(R));var F=((0<M.g.length?M.g[0]:M.h)>>>0).toString(A);if(M=C,w(M))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(var R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function k(A){return A.h==-1}t.l=function(A){return A=j(this,A),k(A)?-1:w(A)?0:1};function b(A){for(var R=A.g.length,M=[],D=0;D<R;D++)M[D]=~A.g[D];return new o(M,~A.h).add(y)}t.abs=function(){return k(this)?b(this):this},t.add=function(A){for(var R=Math.max(this.g.length,A.g.length),M=[],D=0,C=0;C<=R;C++){var F=D+(this.i(C)&65535)+(A.i(C)&65535),L=(F>>>16)+(this.i(C)>>>16)+(A.i(C)>>>16);D=L>>>16,F&=65535,L&=65535,M[C]=L<<16|F}return new o(M,M[M.length-1]&-2147483648?-1:0)};function j(A,R){return A.add(b(R))}t.j=function(A){if(w(this)||w(A))return p;if(k(this))return k(A)?b(this).j(b(A)):b(b(this).j(A));if(k(A))return b(this.j(b(A)));if(0>this.l(v)&&0>A.l(v))return h(this.m()*A.m());for(var R=this.g.length+A.g.length,M=[],D=0;D<2*R;D++)M[D]=0;for(D=0;D<this.g.length;D++)for(var C=0;C<A.g.length;C++){var F=this.i(D)>>>16,L=this.i(D)&65535,Y=A.i(C)>>>16,ne=A.i(C)&65535;M[2*D+2*C]+=L*ne,N(M,2*D+2*C),M[2*D+2*C+1]+=F*ne,N(M,2*D+2*C+1),M[2*D+2*C+1]+=L*Y,N(M,2*D+2*C+1),M[2*D+2*C+2]+=F*Y,N(M,2*D+2*C+2)}for(D=0;D<R;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=R;D<2*R;D++)M[D]=0;return new o(M,0)};function N(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function E(A,R){this.g=A,this.h=R}function P(A,R){if(w(R))throw Error("division by zero");if(w(A))return new E(p,p);if(k(A))return R=P(b(A),R),new E(b(R.g),b(R.h));if(k(R))return R=P(A,b(R)),new E(b(R.g),R.h);if(30<A.g.length){if(k(A)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var M=y,D=R;0>=D.l(A);)M=S(M),D=S(D);var C=T(M,1),F=T(D,1);for(D=T(D,2),M=T(M,2);!w(D);){var L=F.add(D);0>=L.l(A)&&(C=C.add(M),F=L),D=T(D,1),M=T(M,1)}return R=j(A,C.j(R)),new E(C,R)}for(C=p;0<=A.l(R);){for(M=Math.max(1,Math.floor(A.m()/R.m())),D=Math.ceil(Math.log(M)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=h(M),L=F.j(R);k(L)||0<L.l(A);)M-=D,F=h(M),L=F.j(R);w(F)&&(F=y),C=C.add(F),A=j(A,L)}return new E(C,A)}t.A=function(A){return P(this,A).h},t.and=function(A){for(var R=Math.max(this.g.length,A.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)&A.i(D);return new o(M,this.h&A.h)},t.or=function(A){for(var R=Math.max(this.g.length,A.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)|A.i(D);return new o(M,this.h|A.h)},t.xor=function(A){for(var R=Math.max(this.g.length,A.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)^A.i(D);return new o(M,this.h^A.h)};function S(A){for(var R=A.g.length+1,M=[],D=0;D<R;D++)M[D]=A.i(D)<<1|A.i(D-1)>>>31;return new o(M,A.h)}function T(A,R){var M=R>>5;R%=32;for(var D=A.g.length-M,C=[],F=0;F<D;F++)C[F]=0<R?A.i(F+M)>>>R|A.i(F+M+1)<<32-R:A.i(F+M);return new o(C,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,dM=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Ro=o}).apply(typeof yT<"u"?yT:typeof self<"u"?self:typeof window<"u"?window:{});var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hM,id,fM,qm,Nk,mM,pM,gM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,I,$){return g==Array.prototype||g==Object.prototype||(g[I]=$.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof mm=="object"&&mm];for(var I=0;I<g.length;++I){var $=g[I];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=r(this);function a(g,I){if(I)e:{var $=n;g=g.split(".");for(var B=0;B<g.length-1;B++){var ae=g[B];if(!(ae in $))break e;$=$[ae]}g=g[g.length-1],B=$[g],I=I(B),I!=B&&I!=null&&e($,g,{configurable:!0,writable:!0,value:I})}}function s(g,I){g instanceof String&&(g+="");var $=0,B=!1,ae={next:function(){if(!B&&$<g.length){var ue=$++;return{value:I(ue,g[ue]),done:!1}}return B=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}a("Array.prototype.values",function(g){return g||function(){return s(this,function(I,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(g){var I=typeof g;return I=I!="object"?I:g?Array.isArray(g)?"array":I:"null",I=="array"||I=="object"&&typeof g.length=="number"}function h(g){var I=typeof g;return I=="object"&&g!=null||I=="function"}function m(g,I,$){return g.call.apply(g.bind,arguments)}function p(g,I,$){if(!g)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,B),g.apply(I,ae)}}return function(){return g.apply(I,arguments)}}function y(g,I,$){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function v(g,I){var $=Array.prototype.slice.call(arguments,1);return function(){var B=$.slice();return B.push.apply(B,arguments),g.apply(this,B)}}function w(g,I){function $(){}$.prototype=I.prototype,g.aa=I.prototype,g.prototype=new $,g.prototype.constructor=g,g.Qb=function(B,ae,ue){for(var Ee=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)Ee[bt-2]=arguments[bt];return I.prototype[ae].apply(B,Ee)}}function k(g){const I=g.length;if(0<I){const $=Array(I);for(let B=0;B<I;B++)$[B]=g[B];return $}return[]}function b(g,I){for(let $=1;$<arguments.length;$++){const B=arguments[$];if(d(B)){const ae=g.length||0,ue=B.length||0;g.length=ae+ue;for(let Ee=0;Ee<ue;Ee++)g[ae+Ee]=B[Ee]}else g.push(B)}}class j{constructor(I,$){this.i=I,this.j=$,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function N(g){return/^[\s\xa0]*$/.test(g)}function E(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function P(g){return P[" "](g),g}P[" "]=function(){};var S=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function T(g,I,$){for(const B in g)I.call($,g[B],B,g)}function A(g,I){for(const $ in g)I.call(void 0,g[$],$,g)}function R(g){const I={};for(const $ in g)I[$]=g[$];return I}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(g,I){let $,B;for(let ae=1;ae<arguments.length;ae++){B=arguments[ae];for($ in B)g[$]=B[$];for(let ue=0;ue<M.length;ue++)$=M[ue],Object.prototype.hasOwnProperty.call(B,$)&&(g[$]=B[$])}}function C(g){var I=1;g=g.split(":");const $=[];for(;0<I&&g.length;)$.push(g.shift()),I--;return g.length&&$.push(g.join(":")),$}function F(g){c.setTimeout(()=>{throw g},0)}function L(){var g=ee;let I=null;return g.g&&(I=g.g,g.g=g.g.next,g.g||(g.h=null),I.next=null),I}class Y{constructor(){this.h=this.g=null}add(I,$){const B=ne.get();B.set(I,$),this.h?this.h.next=B:this.g=B,this.h=B}}var ne=new j(()=>new W,g=>g.reset());class W{constructor(){this.next=this.g=this.h=null}set(I,$){this.h=I,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let G,X=!1,ee=new Y,re=()=>{const g=c.Promise.resolve(void 0);G=()=>{g.then(z)}};var z=()=>{for(var g;g=L();){try{g.h.call(g.g)}catch($){F($)}var I=ne;I.j(g),100>I.h&&(I.h++,g.next=I.g,I.g=g)}X=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(g,I){this.type=g,this.g=this.target=I,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,I=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const $=()=>{};c.addEventListener("test",$,I),c.removeEventListener("test",$,I)}catch{}return g})();function he(g,I){if(J.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var $=this.type=g.type,B=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=I,I=g.relatedTarget){if(S){e:{try{P(I.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(I=null)}}else $=="mouseover"?I=g.fromElement:$=="mouseout"&&(I=g.toElement);this.relatedTarget=I,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:ve[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&he.aa.h.call(this)}}w(he,J);var ve={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ye=0;function q(g,I,$,B,ae){this.listener=g,this.proxy=null,this.src=I,this.type=$,this.capture=!!B,this.ha=ae,this.key=++ye,this.da=this.fa=!1}function de(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,I,$,B,ae){var ue=g.toString();g=this.g[ue],g||(g=this.g[ue]=[],this.h++);var Ee=je(g,I,B,ae);return-1<Ee?(I=g[Ee],$||(I.fa=!1)):(I=new q(I,this.src,ue,!!B,ae),I.fa=$,g.push(I)),I};function le(g,I){var $=I.type;if($ in g.g){var B=g.g[$],ae=Array.prototype.indexOf.call(B,I,void 0),ue;(ue=0<=ae)&&Array.prototype.splice.call(B,ae,1),ue&&(de(I),g.g[$].length==0&&(delete g.g[$],g.h--))}}function je(g,I,$,B){for(var ae=0;ae<g.length;++ae){var ue=g[ae];if(!ue.da&&ue.listener==I&&ue.capture==!!$&&ue.ha==B)return ae}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),Ze={};function et(g,I,$,B,ae){if(Array.isArray(I)){for(var ue=0;ue<I.length;ue++)et(g,I[ue],$,B,ae);return null}return $=un($),g&&g[fe]?g.K(I,$,h(B)?!!B.capture:!1,ae):Nt(g,I,$,!1,B,ae)}function Nt(g,I,$,B,ae,ue){if(!I)throw Error("Invalid event type");var Ee=h(ae)?!!ae.capture:!!ae,bt=Ar(g);if(bt||(g[Te]=bt=new pe(g)),$=bt.add(I,$,B,Ee,ue),$.proxy)return $;if(B=nr(),$.proxy=B,B.src=g,B.listener=$,g.addEventListener)oe||(ae=Ee),ae===void 0&&(ae=!1),g.addEventListener(I.toString(),B,ae);else if(g.attachEvent)g.attachEvent(Ce(I.toString()),B);else if(g.addListener&&g.removeListener)g.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return $}function nr(){function g($){return I.call(g.src,g.listener,$)}const I=tt;return g}function ct(g,I,$,B,ae){if(Array.isArray(I))for(var ue=0;ue<I.length;ue++)ct(g,I[ue],$,B,ae);else B=h(B)?!!B.capture:!!B,$=un($),g&&g[fe]?(g=g.i,I=String(I).toString(),I in g.g&&(ue=g.g[I],$=je(ue,$,B,ae),-1<$&&(de(ue[$]),Array.prototype.splice.call(ue,$,1),ue.length==0&&(delete g.g[I],g.h--)))):g&&(g=Ar(g))&&(I=g.g[I.toString()],g=-1,I&&(g=je(I,$,B,ae)),($=-1<g?I[g]:null)&&ge($))}function ge(g){if(typeof g!="number"&&g&&!g.da){var I=g.src;if(I&&I[fe])le(I.i,g);else{var $=g.type,B=g.proxy;I.removeEventListener?I.removeEventListener($,B,g.capture):I.detachEvent?I.detachEvent(Ce($),B):I.addListener&&I.removeListener&&I.removeListener(B),($=Ar(I))?(le($,g),$.h==0&&($.src=null,I[Te]=null)):de(g)}}}function Ce(g){return g in Ze?Ze[g]:Ze[g]="on"+g}function tt(g,I){if(g.da)g=!0;else{I=new he(I,this);var $=g.listener,B=g.ha||g.src;g.fa&&ge(g),g=$.call(B,I)}return g}function Ar(g){return g=g[Te],g instanceof pe?g:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(g){return typeof g=="function"?g:(g[St]||(g[St]=function(I){return g.handleEvent(I)}),g[St])}function qt(){Z.call(this),this.i=new pe(this),this.M=this,this.F=null}w(qt,Z),qt.prototype[fe]=!0,qt.prototype.removeEventListener=function(g,I,$,B){ct(this,g,I,$,B)};function _t(g,I){var $,B=g.F;if(B)for($=[];B;B=B.F)$.push(B);if(g=g.M,B=I.type||I,typeof I=="string")I=new J(I,g);else if(I instanceof J)I.target=I.target||g;else{var ae=I;I=new J(B,g),D(I,ae)}if(ae=!0,$)for(var ue=$.length-1;0<=ue;ue--){var Ee=I.g=$[ue];ae=Ln(Ee,B,!0,I)&&ae}if(Ee=I.g=g,ae=Ln(Ee,B,!0,I)&&ae,ae=Ln(Ee,B,!1,I)&&ae,$)for(ue=0;ue<$.length;ue++)Ee=I.g=$[ue],ae=Ln(Ee,B,!1,I)&&ae}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var g=this.i,I;for(I in g.g){for(var $=g.g[I],B=0;B<$.length;B++)de($[B]);delete g.g[I],g.h--}}this.F=null},qt.prototype.K=function(g,I,$,B){return this.i.add(String(g),I,!1,$,B)},qt.prototype.L=function(g,I,$,B){return this.i.add(String(g),I,!0,$,B)};function Ln(g,I,$,B){if(I=g.i.g[String(I)],!I)return!0;I=I.concat();for(var ae=!0,ue=0;ue<I.length;++ue){var Ee=I[ue];if(Ee&&!Ee.da&&Ee.capture==$){var bt=Ee.listener,dr=Ee.ha||Ee.src;Ee.fa&&le(g.i,Ee),ae=bt.call(dr,B)!==!1&&ae}}return ae&&!B.defaultPrevented}function Qs(g,I,$){if(typeof g=="function")$&&(g=y(g,$));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:c.setTimeout(g,I||0)}function Ra(g){g.g=Qs(()=>{g.g=null,g.i&&(g.i=!1,Ra(g))},g.l);const I=g.h;g.h=null,g.m.apply(null,I)}class Be extends Z{constructor(I,$){super(),this.m=I,this.l=$,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Ra(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(g){Z.call(this),this.h=g,this.g={}}w(Qe,Z);var ft=[];function rt(g){T(g.g,function(I,$){this.g.hasOwnProperty($)&&ge(I)},g),g.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),rt(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=c.JSON.stringify,vr=c.JSON.parse,Wt=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Fr(){}Fr.prototype.h=null;function ll(g){return g.h||(g.h=g.i())}function cl(){}var $n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Da(){J.call(this,"d")}w(Da,J);function ul(){J.call(this,"c")}w(ul,J);var Ma={},ou=null;function Ys(){return ou=ou||new qt}Ma.La="serverreachability";function lu(g){J.call(this,Ma.La,g)}w(lu,J);function ui(g){const I=Ys();_t(I,new lu(I))}Ma.STAT_EVENT="statevent";function cu(g,I){J.call(this,Ma.STAT_EVENT,g),this.stat=I}w(cu,J);function Zt(g){const I=Ys();_t(I,new cu(I,g))}Ma.Ma="timingevent";function dl(g,I){J.call(this,Ma.Ma,g),this.size=I}w(dl,J);function aa(g,I){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},I)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function Js(g,I,$,B,ae,ue){g.info(function(){if(g.g)if(ue)for(var Ee="",bt=ue.split("&"),dr=0;dr<bt.length;dr++){var ut=bt[dr].split("=");if(1<ut.length){var br=ut[0];ut=ut[1];var ar=br.split("_");Ee=2<=ar.length&&ar[1]=="type"?Ee+(br+"="+ut+"&"):Ee+(br+"=redacted&")}}else Ee=null;else Ee=ue;return"XMLHTTP REQ ("+B+") [attempt "+ae+"]: "+I+`
`+$+`
`+Ee})}function hl(g,I,$,B,ae,ue,Ee){g.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ae+"]: "+I+`
`+$+`
`+ue+" "+Ee})}function ia(g,I,$,B){g.info(function(){return"XMLHTTP TEXT ("+I+"): "+kg(g,$)+(B?" "+B:"")})}function uu(g,I){g.info(function(){return"TIMEOUT: "+I})}Xs.prototype.info=function(){};function kg(g,I){if(!g.g)return I;if(!I)return null;try{var $=JSON.parse(I);if($){for(g=0;g<$.length;g++)if(Array.isArray($[g])){var B=$[g];if(!(2>B.length)){var ae=B[1];if(Array.isArray(ae)&&!(1>ae.length)){var ue=ae[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Ee=1;Ee<ae.length;Ee++)ae[Ee]=""}}}}return zt($)}catch{return I}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sa;function Zs(){}w(Zs,Fr),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},sa=new Zs;function oa(g,I,$,B){this.j=g,this.i=I,this.l=$,this.R=B||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xh}function Xh(){this.i=null,this.g="",this.h=!1}var du={},ml={};function pl(g,I,$){g.L=1,g.v=es(jn(I)),g.m=$,g.P=!0,hu(g,null)}function hu(g,I){g.F=Date.now(),At(g),g.A=jn(g.v);var $=g.A,B=g.R;Array.isArray(B)||(B=[String(B)]),rs($.i,"t",B),g.C=0,$=g.j.J,g.h=new Xh,g.g=gf(g.j,$?I:null,!g.m),0<g.O&&(g.M=new Be(y(g.Y,g,g.g),g.O)),I=g.U,$=g.g,B=g.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(ft[0]=ae.toString()),ae=ft);for(var ue=0;ue<ae.length;ue++){var Ee=et($,ae[ue],B||I.handleEvent,!1,I.h||I);if(!Ee)break;I.g[Ee.key]=Ee}I=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,I)):(g.u="GET",g.g.ea(g.A,g.u,null,I)),ui(),Js(g.i,g.u,g.A,g.l,g.R,g.m)}oa.prototype.ca=function(g){g=g.target;const I=this.M;I&&hn(g)==3?I.j():this.Y(g)},oa.prototype.Y=function(g){try{if(g==this.g)e:{const ar=hn(this.g);var I=this.g.Ba();const Un=this.g.Z();if(!(3>ar)&&(ar!=3||this.g&&(this.h.h||this.g.oa()||xu(this.g)))){this.J||ar!=4||I==7||(I==8||0>=Un?ui(3):ui(2)),eo(this);var $=this.g.Z();this.X=$;t:if(Jh(this)){var B=xu(this.g);g="";var ae=B.length,ue=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),Yi(this);var Ee="";break t}this.h.i=new c.TextDecoder}for(I=0;I<ae;I++)this.h.h=!0,g+=this.h.i.decode(B[I],{stream:!(ue&&I==ae-1)});B.length=0,this.h.g+=g,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=$==200,hl(this.i,this.u,this.A,this.l,this.R,ar,$),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,dr=this.g;if((bt=dr.g?dr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(bt)){var ut=bt;break t}}ut=null}if($=ut)ia(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fu(this,$);else{this.o=!1,this.s=3,Zt(12),Fn(this),Yi(this);break e}}if(this.P){$=!0;let Sn;for(;!this.J&&this.C<Ee.length;)if(Sn=_g(this,Ee),Sn==ml){ar==4&&(this.s=4,Zt(14),$=!1),ia(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==du){this.s=4,Zt(15),ia(this.i,this.l,Ee,"[Invalid Chunk]"),$=!1;break}else ia(this.i,this.l,Sn,null),fu(this,Sn);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ar!=4||Ee.length!=0||this.h.h||(this.s=1,Zt(16),$=!1),this.o=this.o&&$,!$)ia(this.i,this.l,Ee,"[Invalid Chunked Response]"),Fn(this),Yi(this);else if(0<Ee.length&&!this.W){this.W=!0;var br=this.j;br.g==this&&br.ba&&!br.M&&(br.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),bu(br),br.M=!0,Zt(11))}}else ia(this.i,this.l,Ee,null),fu(this,Ee);ar==4&&Fn(this),this.o&&!this.J&&(ar==4?Sl(this.j,this):(this.o=!1,At(this)))}else wl(this.g),$==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),Fn(this),Yi(this)}}}catch{}finally{}};function Jh(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function _g(g,I){var $=g.C,B=I.indexOf(`
`,$);return B==-1?ml:($=Number(I.substring($,B)),isNaN($)?du:(B+=1,B+$>I.length?ml:(I=I.slice(B,B+$),g.C=B+$,I)))}oa.prototype.cancel=function(){this.J=!0,Fn(this)};function At(g){g.S=Date.now()+g.I,Zh(g,g.I)}function Zh(g,I){if(g.B!=null)throw Error("WatchDog timer not null");g.B=aa(y(g.ba,g),I)}function eo(g){g.B&&(c.clearTimeout(g.B),g.B=null)}oa.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(uu(this.i,this.A),this.L!=2&&(ui(),Zt(17)),Fn(this),this.s=2,Yi(this)):Zh(this,this.S-g)};function Yi(g){g.j.G==0||g.J||Sl(g.j,g)}function Fn(g){eo(g);var I=g.M;I&&typeof I.ma=="function"&&I.ma(),g.M=null,rt(g.U),g.g&&(I=g.g,g.g=null,I.abort(),I.ma())}function fu(g,I){try{var $=g.j;if($.G!=0&&($.g==g||Jr($.h,g))){if(!g.K&&Jr($.h,g)&&$.G==3){try{var B=$.Da.g.parse(I)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ae=B;if(ae[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<g.F)Nl($),ha($);else break e;jl($),Zt(18)}}else $.za=ae[1],0<$.za-$.T&&37500>ae[2]&&$.F&&$.v==0&&!$.C&&($.C=aa(y($.Za,$),6e3));if(1>=tf($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else pi($,11)}else if((g.K||$.g==g)&&Nl($),!N(I))for(ae=$.Da.g.parse(I),I=0;I<ae.length;I++){let ut=ae[I];if($.T=ut[0],ut=ut[1],$.G==2)if(ut[0]=="c"){$.K=ut[1],$.ia=ut[2];const br=ut[3];br!=null&&($.la=br,$.j.info("VER="+$.la));const ar=ut[4];ar!=null&&($.Aa=ar,$.j.info("SVER="+$.Aa));const Un=ut[5];Un!=null&&typeof Un=="number"&&0<Un&&(B=1.5*Un,$.L=B,$.j.info("backChannelRequestTimeoutMs_="+B)),B=$;const Sn=g.g;if(Sn){const oo=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var ue=B.h;ue.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(mu(ue,ue.h),ue.h=null))}if(B.D){const Tl=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(B.ya=Tl,Et(B.I,B.D,Tl))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-g.F,$.j.info("Handshake RTT: "+$.R+"ms")),B=$;var Ee=g;if(B.qa=pf(B,B.J?B.ia:null,B.W),Ee.K){rf(B.h,Ee);var bt=Ee,dr=B.L;dr&&(bt.I=dr),bt.B&&(eo(bt),At(bt)),B.g=Ee}else so(B);0<$.i.length&&Va($)}else ut[0]!="stop"&&ut[0]!="close"||pi($,7);else $.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?pi($,7):Pr($):ut[0]!="noop"&&$.l&&$.l.ta(ut),$.v=0)}}ui(4)}catch{}}var ef=class{constructor(g,I){this.g=g,this.map=I}};function to(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _n(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function tf(g){return g.h?1:g.g?g.g.size:0}function Jr(g,I){return g.h?g.h==I:g.g?g.g.has(I):!1}function mu(g,I){g.g?g.g.add(I):g.h=I}function rf(g,I){g.h&&g.h==I?g.h=null:g.g&&g.g.has(I)&&g.g.delete(I)}to.prototype.cancel=function(){if(this.i=nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function nf(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let I=g.i;for(const $ of g.g.values())I=I.concat($.D);return I}return k(g.i)}function gl(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var I=[],$=g.length,B=0;B<$;B++)I.push(g[B]);return I}I=[],$=0;for(B in g)I[$++]=g[B];return I}function yl(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var I=[];g=g.length;for(var $=0;$<g;$++)I.push($);return I}I=[],$=0;for(const B in g)I[$++]=B;return I}}}function Xi(g,I){if(g.forEach&&typeof g.forEach=="function")g.forEach(I,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,I,void 0);else for(var $=yl(g),B=gl(g),ae=B.length,ue=0;ue<ae;ue++)I.call(void 0,B[ue],$&&$[ue],g)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jg(g,I){if(g){g=g.split("&");for(var $=0;$<g.length;$++){var B=g[$].indexOf("="),ae=null;if(0<=B){var ue=g[$].substring(0,B);ae=g[$].substring(B+1)}else ue=g[$];I(ue,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function di(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof di){this.h=g.h,no(this,g.j),this.o=g.o,this.g=g.g,Ji(this,g.s),this.l=g.l;var I=g.i,$=new La;$.i=I.i,I.g&&($.g=new Map(I.g),$.h=I.h),Zi(this,$),this.m=g.m}else g&&(I=String(g).match(ro))?(this.h=!1,no(this,I[1]||"",!0),this.o=ot(I[2]||""),this.g=ot(I[3]||"",!0),Ji(this,I[4]),this.l=ot(I[5]||"",!0),Zi(this,I[6]||"",!0),this.m=ot(I[7]||"")):(this.h=!1,this.i=new La(null,this.h))}di.prototype.toString=function(){var g=[],I=this.j;I&&g.push(ts(I,xl,!0),":");var $=this.g;return($||I=="file")&&(g.push("//"),(I=this.o)&&g.push(ts(I,xl,!0),"@"),g.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&g.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&g.push("/"),g.push(ts($,$.charAt(0)=="/"?of:sf,!0))),($=this.i.toString())&&g.push("?",$),($=this.m)&&g.push("#",ts($,pu)),g.join("")};function jn(g){return new di(g)}function no(g,I,$){g.j=$?ot(I,!0):I,g.j&&(g.j=g.j.replace(/:$/,""))}function Ji(g,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);g.s=I}else g.s=null}function Zi(g,I,$){I instanceof La?(g.i=I,$a(g.i,g.h)):($||(I=ts(I,lf)),g.i=new La(I,g.h))}function Et(g,I,$){g.i.set(I,$)}function es(g){return Et(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function ot(g,I){return g?I?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ts(g,I,$){return typeof g=="string"?(g=encodeURI(g).replace(I,af),$&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function af(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var xl=/[#\/\?@]/g,sf=/[#\?:]/g,of=/[#\?]/g,lf=/[#\?@]/g,pu=/#/g;function La(g,I){this.h=this.g=null,this.i=g||null,this.j=!!I}function Cr(g){g.g||(g.g=new Map,g.h=0,g.i&&jg(g.i,function(I,$){g.add(decodeURIComponent(I.replace(/\+/g," ")),$)}))}t=La.prototype,t.add=function(g,I){Cr(this),this.i=null,g=Vn(this,g);var $=this.g.get(g);return $||this.g.set(g,$=[]),$.push(I),this.h+=1,this};function la(g,I){Cr(g),I=Vn(g,I),g.g.has(I)&&(g.i=null,g.h-=g.g.get(I).length,g.g.delete(I))}function ca(g,I){return Cr(g),I=Vn(g,I),g.g.has(I)}t.forEach=function(g,I){Cr(this),this.g.forEach(function($,B){$.forEach(function(ae){g.call(I,ae,B,this)},this)},this)},t.na=function(){Cr(this);const g=Array.from(this.g.values()),I=Array.from(this.g.keys()),$=[];for(let B=0;B<I.length;B++){const ae=g[B];for(let ue=0;ue<ae.length;ue++)$.push(I[B])}return $},t.V=function(g){Cr(this);let I=[];if(typeof g=="string")ca(this,g)&&(I=I.concat(this.g.get(Vn(this,g))));else{g=Array.from(this.g.values());for(let $=0;$<g.length;$++)I=I.concat(g[$])}return I},t.set=function(g,I){return Cr(this),this.i=null,g=Vn(this,g),ca(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[I]),this.h+=1,this},t.get=function(g,I){return g?(g=this.V(g),0<g.length?String(g[0]):I):I};function rs(g,I,$){la(g,I),0<$.length&&(g.i=null,g.g.set(Vn(g,I),k($)),g.h+=$.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],I=Array.from(this.g.keys());for(var $=0;$<I.length;$++){var B=I[$];const ue=encodeURIComponent(String(B)),Ee=this.V(B);for(B=0;B<Ee.length;B++){var ae=ue;Ee[B]!==""&&(ae+="="+encodeURIComponent(String(Ee[B]))),g.push(ae)}}return this.i=g.join("&")};function Vn(g,I){return I=String(I),g.j&&(I=I.toLowerCase()),I}function $a(g,I){I&&!g.j&&(Cr(g),g.i=null,g.g.forEach(function($,B){var ae=B.toLowerCase();B!=ae&&(la(this,B),rs(this,ae,$))},g)),g.j=I}function Ng(g,I){const $=new Xs;if(c.Image){const B=new Image;B.onload=v(dn,$,"TestLoadImage: loaded",!0,I,B),B.onerror=v(dn,$,"TestLoadImage: error",!1,I,B),B.onabort=v(dn,$,"TestLoadImage: abort",!1,I,B),B.ontimeout=v(dn,$,"TestLoadImage: timeout",!1,I,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=g}else I(!1)}function cf(g,I){const $=new Xs,B=new AbortController,ae=setTimeout(()=>{B.abort(),dn($,"TestPingServer: timeout",!1,I)},1e4);fetch(g,{signal:B.signal}).then(ue=>{clearTimeout(ae),ue.ok?dn($,"TestPingServer: ok",!0,I):dn($,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ae),dn($,"TestPingServer: error",!1,I)})}function dn(g,I,$,B,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),B($)}catch{}}function Sg(){this.g=new Wt}function uf(g,I,$){const B=$||"";try{Xi(g,function(ae,ue){let Ee=ae;h(ae)&&(Ee=zt(ae)),I.push(B+ue+"="+encodeURIComponent(Ee))})}catch(ae){throw I.push(B+"type="+encodeURIComponent("_badmap")),ae}}function hi(g){this.l=g.Ub||null,this.j=g.eb||!1}w(hi,Fr),hi.prototype.g=function(){return new ao(this.l,this.j)},hi.prototype.i=(function(g){return function(){return g}})({});function ao(g,I){qt.call(this),this.D=g,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ao,qt),t=ao.prototype,t.open=function(g,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=I,this.readyState=1,da(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(I.body=g),(this.D||c).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,da(this)),this.g&&(this.readyState=3,da(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;df(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function df(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var I=g.value?g.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!g.done}))&&(this.response=this.responseText+=I)}g.done?ua(this):da(this),this.readyState==3&&df(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,ua(this))},t.Qa=function(g){this.g&&(this.response=g,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(g){g.readyState=4,g.l=null,g.j=null,g.v=null,da(g)}t.setRequestHeader=function(g,I){this.u.append(g,I)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],I=this.h.entries();for(var $=I.next();!$.done;)$=$.value,g.push($[0]+": "+$[1]),$=I.next();return g.join(`\r
`)};function da(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function fi(g){let I="";return T(g,function($,B){I+=B,I+=":",I+=$,I+=`\r
`}),I}function ns(g,I,$){e:{for(B in $){var B=!1;break e}B=!0}B||($=fi($),typeof g=="string"?$!=null&&encodeURIComponent(String($)):Et(g,I,$))}function Ft(g){qt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ft,qt);var Eg=/^https?$/i,gu=["POST","PUT"];t=Ft.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,I,$,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);I=I?I.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sa.g(),this.v=this.o?ll(this.o):ll(sa),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(I,String(g),!0),this.B=!1}catch(ue){io(this,ue);return}if(g=$||"",$=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ae in B)$.set(ae,B[ae]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())$.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from($.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(gu,I,void 0))||B||ae||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ee]of $)this.g.setRequestHeader(ue,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bl(this),this.u=!0,this.g.send(g),this.u=!1}catch(ue){io(this,ue)}};function io(g,I){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=I,g.m=5,vl(g),Nn(g)}function vl(g){g.A||(g.A=!0,_t(g,"complete"),_t(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,_t(this,"complete"),_t(this,"abort"),Nn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nn(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},t.bb=function(){yu(this)};function yu(g){if(g.h&&typeof o<"u"&&(!g.v[1]||hn(g)!=4||g.Z()!=2)){if(g.u&&hn(g)==4)Qs(g.Ea,0,g);else if(_t(g,"readystatechange"),hn(g)==4){g.h=!1;try{const Ee=g.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var $;if(!($=I)){var B;if(B=Ee===0){var ae=String(g.D).match(ro)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),B=!Eg.test(ae?ae.toLowerCase():"")}$=B}if($)_t(g,"complete"),_t(g,"success");else{g.m=6;try{var ue=2<hn(g)?g.g.statusText:""}catch{ue=""}g.l=ue+" ["+g.Z()+"]",vl(g)}}finally{Nn(g)}}}}function Nn(g,I){if(g.g){bl(g);const $=g.g,B=g.v[0]?()=>{}:null;g.g=null,g.v=null,I||_t(g,"ready");try{$.onreadystatechange=B}catch{}}}function bl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function hn(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var I=this.g.responseText;return g&&I.indexOf(g)==0&&(I=I.substring(g.length)),vr(I)}};function xu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(g){const I={};g=(g.g&&2<=hn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<g.length;B++){if(N(g[B]))continue;var $=C(g[B]);const ae=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ue=I[ae]||[];I[ae]=ue,ue.push($)}A(I,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(g,I,$){return $&&$.internalChannelParams&&$.internalChannelParams[g]||I}function vu(g){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,g),this.cb=Fa("retryDelaySeedMs",1e4,g),this.Wa=Fa("forwardChannelMaxRetries",2,g),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new to(g&&g.concurrentRequestLimit),this.Da=new Sg,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vu.prototype,t.la=8,t.G=1,t.connect=function(g,I,$,B){Zt(0),this.W=g,this.H=I||{},$&&B!==void 0&&(this.H.OSID=$,this.H.OAID=B),this.F=this.X,this.I=pf(this,null,this.W),Va(this)};function Pr(g){if(kl(g),g.G==3){var I=g.U++,$=jn(g.I);if(Et($,"SID",g.K),Et($,"RID",I),Et($,"TYPE","terminate"),mi(g,$),I=new oa(g,g.j,I),I.L=2,I.v=es(jn($)),$=!1,c.navigator&&c.navigator.sendBeacon)try{$=c.navigator.sendBeacon(I.v.toString(),"")}catch{}!$&&c.Image&&(new Image().src=I.v,$=!0),$||(I.g=gf(I.j,null),I.g.ea(I.v)),I.F=Date.now(),At(I)}mf(g)}function ha(g){g.g&&(bu(g),g.g.cancel(),g.g=null)}function kl(g){ha(g),g.u&&(c.clearTimeout(g.u),g.u=null),Nl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Va(g){if(!_n(g.h)&&!g.s){g.s=!0;var I=g.Ga;G||re(),X||(G(),X=!0),ee.add(I,g),g.B=0}}function Tg(g,I){return tf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=I.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=aa(y(g.Ga,g,I),ff(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ae=new oa(this,this.j,g);let ue=this.o;if(this.S&&(ue?(ue=R(ue),D(ue,this.S)):ue=this.S),this.m!==null||this.O||(ae.H=ue,ue=null),this.P)e:{for(var I=0,$=0;$<this.i.length;$++){t:{var B=this.i[$];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(I+=B,4096<I){I=$;break e}if(I===4096||$===this.i.length-1){I=$+1;break e}}I=1e3}else I=1e3;I=as(this,ae,I),$=jn(this.I),Et($,"RID",g),Et($,"CVER",22),this.D&&Et($,"X-HTTP-Session-Id",this.D),mi(this,$),ue&&(this.O?I="headers="+encodeURIComponent(String(fi(ue)))+"&"+I:this.m&&ns($,this.m,ue)),mu(this.h,ae),this.Ua&&Et($,"TYPE","init"),this.P?(Et($,"$req",I),Et($,"SID","null"),ae.T=!0,pl(ae,$,null)):pl(ae,$,I),this.G=2}}else this.G==3&&(g?_l(this,g):this.i.length==0||_n(this.h)||_l(this))};function _l(g,I){var $;I?$=I.l:$=g.U++;const B=jn(g.I);Et(B,"SID",g.K),Et(B,"RID",$),Et(B,"AID",g.T),mi(g,B),g.m&&g.o&&ns(B,g.m,g.o),$=new oa(g,g.j,$,g.B+1),g.m===null&&($.H=g.o),I&&(g.i=I.D.concat(g.i)),I=as(g,$,1e3),$.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),mu(g.h,$),pl($,B,I)}function mi(g,I){g.H&&T(g.H,function($,B){Et(I,B,$)}),g.l&&Xi({},function($,B){Et(I,B,$)})}function as(g,I,$){$=Math.min(g.i.length,$);var B=g.l?y(g.l.Na,g.l,g):null;e:{var ae=g.i;let ue=-1;for(;;){const Ee=["count="+$];ue==-1?0<$?(ue=ae[0].g,Ee.push("ofs="+ue)):ue=0:Ee.push("ofs="+ue);let bt=!0;for(let dr=0;dr<$;dr++){let ut=ae[dr].g;const br=ae[dr].map;if(ut-=ue,0>ut)ue=Math.max(0,ae[dr].g-100),bt=!1;else try{uf(br,Ee,"req"+ut+"_")}catch{B&&B(br)}}if(bt){B=Ee.join("&");break e}}}return g=g.i.splice(0,$),I.D=g,B}function so(g){if(!g.g&&!g.u){g.Y=1;var I=g.Fa;G||re(),X||(G(),X=!0),ee.add(I,g),g.v=0}}function jl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=aa(y(g.Fa,g),ff(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,hf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=aa(y(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),ha(this),hf(this))};function bu(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function hf(g){g.g=new oa(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var I=jn(g.qa);Et(I,"RID","rpc"),Et(I,"SID",g.K),Et(I,"AID",g.T),Et(I,"CI",g.F?"0":"1"),!g.F&&g.ja&&Et(I,"TO",g.ja),Et(I,"TYPE","xmlhttp"),mi(g,I),g.m&&g.o&&ns(I,g.m,g.o),g.L&&(g.g.I=g.L);var $=g.g;g=g.ia,$.L=1,$.v=es(jn(I)),$.m=null,$.P=!0,hu($,g)}t.Za=function(){this.C!=null&&(this.C=null,ha(this),jl(this),Zt(19))};function Nl(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Sl(g,I){var $=null;if(g.g==I){Nl(g),bu(g),g.g=null;var B=2}else if(Jr(g.h,I))$=I.D,rf(g.h,I),B=1;else return;if(g.G!=0){if(I.o)if(B==1){$=I.m?I.m.length:0,I=Date.now()-I.F;var ae=g.B;B=Ys(),_t(B,new dl(B,$)),Va(g)}else so(g);else if(ae=I.s,ae==3||ae==0&&0<I.X||!(B==1&&Tg(g,I)||B==2&&jl(g)))switch($&&0<$.length&&(I=g.h,I.i=I.i.concat($)),ae){case 1:pi(g,5);break;case 4:pi(g,10);break;case 3:pi(g,6);break;default:pi(g,2)}}}function ff(g,I){let $=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||($*=2),$*I}function pi(g,I){if(g.j.info("Error code "+I),I==2){var $=y(g.fb,g),B=g.Xa;const ae=!B;B=new di(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||no(B,"https"),es(B),ae?Ng(B.toString(),$):cf(B.toString(),$)}else Zt(2);g.G=0,g.l&&g.l.sa(I),mf(g),kl(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function mf(g){if(g.G=0,g.ka=[],g.l){const I=nf(g.h);(I.length!=0||g.i.length!=0)&&(b(g.ka,I),b(g.ka,g.i),g.h.i.length=0,k(g.i),g.i.length=0),g.l.ra()}}function pf(g,I,$){var B=$ instanceof di?jn($):new di($);if(B.g!="")I&&(B.g=I+"."+B.g),Ji(B,B.s);else{var ae=c.location;B=ae.protocol,I=I?I+"."+ae.hostname:ae.hostname,ae=+ae.port;var ue=new di(null);B&&no(ue,B),I&&(ue.g=I),ae&&Ji(ue,ae),$&&(ue.l=$),B=ue}return $=g.D,I=g.ya,$&&I&&Et(B,$,I),Et(B,"VER",g.la),mi(g,B),B}function gf(g,I,$){if(I&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=g.Ca&&!g.pa?new Ft(new hi({eb:$})):new Ft(g.pa),I.Ha(g.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wu(){}t=wu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(g,I){return new Zr(g,I)};function Zr(g,I){qt.call(this),this.g=new vu(I),this.l=g,this.h=I&&I.messageUrlParams||null,g=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(g?g["X-WebChannel-Content-Type"]=I.messageContentType:g={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(g?g["X-WebChannel-Client-Profile"]=I.va:g={"X-WebChannel-Client-Profile":I.va}),this.g.S=g,(g=I&&I.Sb)&&!N(g)&&(this.g.m=g),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!N(I)&&(this.g.D=I,g=this.h,g!==null&&I in g&&(g=this.h,I in g&&delete g[I])),this.j=new Ua(this)}w(Zr,qt),Zr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zr.prototype.close=function(){Pr(this.g)},Zr.prototype.o=function(g){var I=this.g;if(typeof g=="string"){var $={};$.__data__=g,g=$}else this.u&&($={},$.__data__=zt(g),g=$);I.i.push(new ef(I.Ya++,g)),I.G==3&&Va(I)},Zr.prototype.N=function(){this.g.l=null,delete this.j,Pr(this.g),delete this.g,Zr.aa.N.call(this)};function yf(g){Da.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var I=g.__sm__;if(I){e:{for(const $ in I){g=$;break e}g=void 0}(this.i=g)&&(g=this.i,I=I!==null&&g in I?I[g]:void 0),this.data=I}else this.data=g}w(yf,Da);function xf(){ul.call(this),this.status=1}w(xf,ul);function Ua(g){this.g=g}w(Ua,wu),Ua.prototype.ua=function(){_t(this.g,"a")},Ua.prototype.ta=function(g){_t(this.g,new yf(g))},Ua.prototype.sa=function(g){_t(this.g,new xf)},Ua.prototype.ra=function(){_t(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Zr.prototype.send=Zr.prototype.o,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,gM=function(){return new El},pM=function(){return Ys()},mM=Ma,Nk={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,qm=fl,Yh.COMPLETE="complete",fM=Yh,cl.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",qt.prototype.listen=qt.prototype.K,id=cl,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,hM=Ft}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});const xT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new h1("@firebase/firestore");function Hu(){return qo.logLevel}function Le(t,...e){if(qo.logLevel<=lt.DEBUG){const r=e.map(j1);qo.debug(`Firestore (${Yc}): ${t}`,...r)}}function Fi(t,...e){if(qo.logLevel<=lt.ERROR){const r=e.map(j1);qo.error(`Firestore (${Yc}): ${t}`,...r)}}function xc(t,...e){if(qo.logLevel<=lt.WARN){const r=e.map(j1);qo.warn(`Firestore (${Yc}): ${t}`,...r)}}function j1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t="Unexpected state"){const e=`FIRESTORE (${Yc}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function kt(t,e){t||Ke()}function Je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends oi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Hr.UNAUTHENTICATED)))}shutdown(){}}class U7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class B7{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){kt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let s=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ri,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ri)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string"),new yM(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string"),new Hr(e)}}class q7{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z7{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new q7(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Hr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){kt(this.o===void 0);const n=s=>{s.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const a=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>a(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(kt(typeof r.token=="string"),this.R=r.token,new W7(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=G7(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function pt(t,e){return t<e?-1:t>e?1:0}function vc(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Pe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Pe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Pe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new yr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new yr(0,0))}static max(){return new Xe(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ke(),n===void 0?n=e.length-r:n>e.length-r&&Ke(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Cd.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Cd?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Lt extends Cd{construct(e,r,n){return new Lt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pe(xe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Lt(r)}static emptyPath(){return new Lt([])}}const K7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Cd{construct(e,r,n){return new Mr(e,r,n)}static isValidIdentifier(e){return K7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Pe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new Pe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Pe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(s(),a++)}if(s(),o)throw new Pe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(r)}static emptyPath(){return new Mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Lt.fromString(e))}static fromName(e){return new Fe(Lt.fromString(e).popFirst(5))}static empty(){return new Fe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Lt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Lt(e.slice()))}}function Q7(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Xe.fromTimestamp(n===1e9?new yr(r+1,0):new yr(r,n));return new Ls(a,Fe.empty(),e)}function Y7(t){return new Ls(t.readTime,t.key,-1)}class Ls{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ls(Xe.min(),Fe.empty(),-1)}static max(){return new Ls(Xe.max(),Fe.empty(),-1)}}function X7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(t.documentKey,e.documentKey),r!==0?r:pt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==J7)throw t;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ke(((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof ke?r:ke.resolve(r)}catch(r){return ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.reject(r)}static resolve(e){return new ke(((r,n)=>{r(e)}))}static reject(e){return new ke(((r,n)=>{n(e)}))}static waitFor(e){return new ke(((r,n)=>{let a=0,s=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++s,o&&s===a&&r()}),(d=>n(d)))})),o=!0,s===a&&r()}))}static or(e){let r=ke.resolve(!1);for(const n of e)r=r.next((a=>a?ke.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,s)=>{n.push(r.call(this,a,s))})),this.waitFor(n)}static mapArray(e,r){return new ke(((n,a)=>{const s=e.length,o=new Array(s);let c=0;for(let d=0;d<s;d++){const h=d;r(e[h]).next((m=>{o[h]=m,++c,c===s&&n(o)}),(m=>a(m)))}}))}static doWhile(e,r){return new ke(((n,a)=>{const s=()=>{e()===!0?r().next((()=>{s()}),a):n()};s()}))}}function e8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ch(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}N1.oe=-1;function p0(t){return t==null}function ap(t){return t===0&&1/t==-1/0}function t8(t){return typeof t=="number"&&Number.isInteger(t)&&!ap(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function tl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,r){this.comparator=e,this.root=r||Dr.EMPTY}insert(e,r){return new Kt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pm(this.root,e,this.comparator,!0)}}class pm{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Dr.RED,this.left=a??Dr.EMPTY,this.right=s??Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Dr(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Dr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Dr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new bT(this.data.getIterator())}getIteratorFrom(e){return new bT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Lr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Lr(this.comparator);return r.data=e,r}}class bT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new On([])}unionWith(e){let r=new Lr(Mr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new On(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bM("Invalid base64 string: "+s):s}})(e);return new $r(r)}static fromUint8Array(e){const r=(function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s})(e);return new $r(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const r8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(t){if(kt(!!t),typeof t=="string"){let e=0;const r=r8.exec(t);if(kt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tr(t.seconds),nanos:tr(t.nanos)}}function tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zo(t){return typeof t=="string"?$r.fromBase64String(t):$r.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function E1(t){const e=t.mapValue.fields.__previous_value__;return S1(e)?E1(e):e}function Pd(t){const e=$s(t.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r,n,a,s,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Id{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm={mapValue:{}};function Wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S1(t)?4:i8(t)?9007199254740991:a8(t)?10:11:Ke()}function ni(t,e){if(t===e)return!0;const r=Wo(t);if(r!==Wo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pd(t).isEqual(Pd(e));case 3:return(function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=$s(a.timestampValue),c=$s(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,s){return zo(a.bytesValue).isEqual(zo(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,s){return tr(a.geoPointValue.latitude)===tr(s.geoPointValue.latitude)&&tr(a.geoPointValue.longitude)===tr(s.geoPointValue.longitude)})(t,e);case 2:return(function(a,s){if("integerValue"in a&&"integerValue"in s)return tr(a.integerValue)===tr(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=tr(a.doubleValue),c=tr(s.doubleValue);return o===c?ap(o)===ap(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return vc(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return(function(a,s){const o=a.mapValue.fields||{},c=s.mapValue.fields||{};if(vT(o)!==vT(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!ni(o[d],c[d])))return!1;return!0})(t,e);default:return Ke()}}function Od(t,e){return(t.values||[]).find((r=>ni(r,e)))!==void 0}function bc(t,e){if(t===e)return 0;const r=Wo(t),n=Wo(e);if(r!==n)return pt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return pt(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const c=tr(s.integerValue||s.doubleValue),d=tr(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return wT(t.timestampValue,e.timestampValue);case 4:return wT(Pd(t),Pd(e));case 5:return pt(t.stringValue,e.stringValue);case 6:return(function(s,o){const c=zo(s),d=zo(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const c=s.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const m=pt(c[h],d[h]);if(m!==0)return m}return pt(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const c=pt(tr(s.latitude),tr(o.latitude));return c!==0?c:pt(tr(s.longitude),tr(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return kT(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var c,d,h,m;const p=s.fields||{},y=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,w=(d=y.value)===null||d===void 0?void 0:d.arrayValue,k=pt(((h=v?.values)===null||h===void 0?void 0:h.length)||0,((m=w?.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:kT(v,w)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===gm.mapValue&&o===gm.mapValue)return 0;if(s===gm.mapValue)return 1;if(o===gm.mapValue)return-1;const c=s.fields||{},d=Object.keys(c),h=o.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const y=pt(d[p],m[p]);if(y!==0)return y;const v=bc(c[d[p]],h[m[p]]);if(v!==0)return v}return pt(d.length,m.length)})(t.mapValue,e.mapValue);default:throw Ke()}}function wT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pt(t,e);const r=$s(t),n=$s(e),a=pt(r.seconds,n.seconds);return a!==0?a:pt(r.nanos,n.nanos)}function kT(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=bc(r[a],n[a]);if(s)return s}return pt(r.length,n.length)}function wc(t){return Sk(t)}function Sk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=$s(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return zo(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Fe.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Sk(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${Sk(r.fields[o])}`;return a+"}"})(t.mapValue):Ke()}function _T(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ek(t){return!!t&&"integerValue"in t}function T1(t){return!!t&&"arrayValue"in t}function jT(t){return!!t&&"nullValue"in t}function NT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zm(t){return!!t&&"mapValue"in t}function a8(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function md(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tl(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=md(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=md(t.arrayValue.values[r]);return e}return Object.assign({},t)}function i8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!zm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(r)}setAll(e){let r=Mr.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=md(o):a.push(c.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());zm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];zm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){tl(r,((a,s)=>e[a]=s));for(const a of n)delete e[a]}clone(){return new vn(md(this.value))}}function wM(t){const e=[];return tl(t.fields,((r,n)=>{const a=new Mr([r]);if(zm(n)){const s=wM(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,r,n,a,s,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Gr(e,0,Xe.min(),Xe.min(),Xe.min(),vn.empty(),0)}static newFoundDocument(e,r,n,a){return new Gr(e,1,r,Xe.min(),n,a,0)}static newNoDocument(e,r){return new Gr(e,2,r,Xe.min(),Xe.min(),vn.empty(),0)}static newUnknownDocument(e,r){return new Gr(e,3,r,Xe.min(),Xe.min(),vn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,r){this.position=e,this.inclusive=r}}function ST(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Fe.comparator(Fe.fromName(o.referenceValue),r.key):n=bc(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function ET(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ni(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,r="asc"){this.field=e,this.dir=r}}function s8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kM=class{};class cr extends kM{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new l8(e,r,n):r==="array-contains"?new d8(e,n):r==="in"?new h8(e,n):r==="not-in"?new f8(e,n):r==="array-contains-any"?new m8(e,n):new cr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new c8(e,n):new u8(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(bc(r,this.value)):r!==null&&Wo(this.value)===Wo(r)&&this.matchesComparison(bc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Aa extends kM{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Aa(e,r)}matches(e){return _M(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _M(t){return t.op==="and"}function jM(t){return o8(t)&&_M(t)}function o8(t){for(const e of t.filters)if(e instanceof Aa)return!1;return!0}function Tk(t){if(t instanceof cr)return t.field.canonicalString()+t.op.toString()+wc(t.value);if(jM(t))return t.filters.map((e=>Tk(e))).join(",");{const e=t.filters.map((r=>Tk(r))).join(",");return`${t.op}(${e})`}}function NM(t,e){return t instanceof cr?(function(n,a){return a instanceof cr&&n.op===a.op&&n.field.isEqual(a.field)&&ni(n.value,a.value)})(t,e):t instanceof Aa?(function(n,a){return a instanceof Aa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((s,o,c)=>s&&NM(o,a.filters[c])),!0):!1})(t,e):void Ke()}function SM(t){return t instanceof cr?(function(r){return`${r.field.canonicalString()} ${r.op} ${wc(r.value)}`})(t):t instanceof Aa?(function(r){return r.op.toString()+" {"+r.getFilters().map(SM).join(" ,")+"}"})(t):"Filter"}class l8 extends cr{constructor(e,r,n){super(e,r,n),this.key=Fe.fromName(n.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class c8 extends cr{constructor(e,r){super(e,"in",r),this.keys=EM("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class u8 extends cr{constructor(e,r){super(e,"not-in",r),this.keys=EM("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function EM(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Fe.fromName(n.referenceValue)))}class d8 extends cr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return T1(r)&&Od(r.arrayValue,this.value)}}class h8 extends cr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Od(this.value.arrayValue,r)}}class f8 extends cr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Od(this.value.arrayValue,r)}}class m8 extends cr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!T1(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Od(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,r=null,n=[],a=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function TT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new p8(t,e,r,n,a,s,o)}function A1(t){const e=Je(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Tk(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),p0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>wc(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>wc(n))).join(",")),e.ue=r}return e.ue}function C1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!s8(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!NM(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ET(t.startAt,e.startAt)&&ET(t.endAt,e.endAt)}function Ak(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r=null,n=[],a=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function g8(t,e,r,n,a,s,o,c){return new Ph(t,e,r,n,a,s,o,c)}function g0(t){return new Ph(t)}function AT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TM(t){return t.collectionGroup!==null}function pd(t){const e=Je(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Lr(Mr.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new sp(s,n))})),r.has(Mr.keyField().canonicalString())||e.ce.push(new sp(Mr.keyField(),n))}return e.ce}function Ja(t){const e=Je(t);return e.le||(e.le=y8(e,pd(t))),e.le}function y8(t,e){if(t.limitType==="F")return TT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const s=a.dir==="desc"?"asc":"desc";return new sp(a.field,s)}));const r=t.endAt?new ip(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ip(t.startAt.position,t.startAt.inclusive):null;return TT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ck(t,e){const r=t.filters.concat([e]);return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Pk(t,e,r){return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function y0(t,e){return C1(Ja(t),Ja(e))&&t.limitType===e.limitType}function AM(t){return`${A1(Ja(t))}|lt:${t.limitType}`}function Zl(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>SM(a))).join(", ")}]`),p0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>wc(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>wc(a))).join(",")),`Target(${n})`})(Ja(t))}; limitType=${t.limitType})`}function x0(t,e){return e.isFoundDocument()&&(function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Fe.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,a){for(const s of pd(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=ST(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,pd(n),a)||n.endAt&&!(function(o,c,d){const h=ST(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,pd(n),a))})(t,e)}function x8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CM(t){return(e,r)=>{let n=!1;for(const a of pd(t)){const s=v8(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function v8(t,e,r){const n=t.field.isKeyField()?Fe.comparator(e.key,r.key):(function(s,o,c){const d=o.data.field(s),h=c.data.field(s);return d!==null&&h!==null?bc(d,h):Ke()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,((r,n)=>{for(const[a,s]of n)e(a,s)}))}isEmpty(){return vM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new Kt(Fe.comparator);function Vi(){return b8}const PM=new Kt(Fe.comparator);function sd(...t){let e=PM;for(const r of t)e=e.insert(r.key,r);return e}function IM(t){let e=PM;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function To(){return gd()}function OM(){return gd()}function gd(){return new Xc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const w8=new Kt(Fe.comparator),k8=new Lr(Fe.comparator);function st(...t){let e=k8;for(const r of t)e=e.add(r);return e}const _8=new Lr(pt);function j8(){return _8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function RM(t){return{integerValue:""+t}}function N8(t,e){return t8(e)?RM(e):P1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this._=void 0}}function S8(t,e,r){return t instanceof Rd?(function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&S1(s)&&(s=E1(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}})(r,e):t instanceof Dd?MM(t,e):t instanceof Md?LM(t,e):(function(a,s){const o=DM(a,s),c=CT(o)+CT(a.Pe);return Ek(o)&&Ek(a.Pe)?RM(c):P1(a.serializer,c)})(t,e)}function E8(t,e,r){return t instanceof Dd?MM(t,e):t instanceof Md?LM(t,e):r}function DM(t,e){return t instanceof op?(function(n){return Ek(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class Rd extends v0{}class Dd extends v0{constructor(e){super(),this.elements=e}}function MM(t,e){const r=$M(e);for(const n of t.elements)r.some((a=>ni(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Md extends v0{constructor(e){super(),this.elements=e}}function LM(t,e){let r=$M(e);for(const n of t.elements)r=r.filter((a=>!ni(a,n)));return{arrayValue:{values:r}}}class op extends v0{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function CT(t){return tr(t.integerValue||t.doubleValue)}function $M(t){return T1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,r){this.field=e,this.transform=r}}function A8(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Dd&&a instanceof Dd||n instanceof Md&&a instanceof Md?vc(n.elements,a.elements,ni):n instanceof op&&a instanceof op?ni(n.Pe,a.Pe):n instanceof Rd&&a instanceof Rd})(t.transform,e.transform)}class C8{constructor(e,r){this.version=e,this.transformResults=r}}class ln{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class b0{}function FM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w0(t.key,ln.none()):new Ih(t.key,t.data,ln.none());{const r=t.data,n=vn.empty();let a=new Lr(Mr.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new zs(t.key,n,new On(a.toArray()),ln.none())}}function P8(t,e,r){t instanceof Ih?(function(a,s,o){const c=a.value.clone(),d=IT(a.fieldTransforms,s,o.transformResults);c.setAll(d),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof zs?(function(a,s,o){if(!Wm(a.precondition,s))return void s.convertToUnknownDocument(o.version);const c=IT(a.fieldTransforms,s,o.transformResults),d=s.data;d.setAll(VM(a)),d.setAll(c),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function yd(t,e,r,n){return t instanceof Ih?(function(s,o,c,d){if(!Wm(s.precondition,o))return c;const h=s.value.clone(),m=OT(s.fieldTransforms,d,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof zs?(function(s,o,c,d){if(!Wm(s.precondition,o))return c;const h=OT(s.fieldTransforms,d,o),m=o.data;return m.setAll(VM(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(s,o,c){return Wm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function I8(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=DM(n.transform,a||null);s!=null&&(r===null&&(r=vn.empty()),r.set(n.field,s))}return r||null}function PT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&vc(n,a,((s,o)=>A8(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ih extends b0{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zs extends b0{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VM(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function IT(t,e,r){const n=new Map;kt(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,c=e.data.field(s.field);n.set(s.field,E8(o,c,r[a]))}return n}function OT(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,S8(s,o,e))}return n}class w0 extends b0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O8 extends b0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&P8(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=yd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=yd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=OM();return this.mutations.forEach((a=>{const s=e.get(a.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=r.has(a.key)?null:c;const d=FM(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Xe.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),st())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,((r,n)=>PT(r,n)))&&vc(this.baseMutations,e.baseMutations,((r,n)=>PT(r,n)))}}class I1{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){kt(e.mutations.length===n.length);let a=(function(){return w8})();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new I1(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr,dt;function L8(t){switch(t){default:return Ke();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function UM(t){if(t===void 0)return Fi("GRPC error has no .code"),xe.UNKNOWN;switch(t){case sr.OK:return xe.OK;case sr.CANCELLED:return xe.CANCELLED;case sr.UNKNOWN:return xe.UNKNOWN;case sr.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case sr.INTERNAL:return xe.INTERNAL;case sr.UNAVAILABLE:return xe.UNAVAILABLE;case sr.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case sr.NOT_FOUND:return xe.NOT_FOUND;case sr.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case sr.ABORTED:return xe.ABORTED;case sr.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case sr.DATA_LOSS:return xe.DATA_LOSS;default:return Ke()}}(dt=sr||(sr={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=new Ro([4294967295,4294967295],0);function RT(t){const e=$8().encode(t),r=new dM;return r.update(e),new Uint8Array(r.digest())}function DT(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ro([r,n],0),new Ro([a,s],0)]}class O1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new od(`Invalid padding: ${r}`);if(n<0)throw new od(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new od(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new od(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ro.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Ro.fromNumber(n)));return a.compare(F8)===1&&(a=new Ro([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=RT(e),[n,a]=DT(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new O1(s,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=RT(e),[n,a]=DT(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new k0(Xe.min(),a,new Kt(pt),Vi(),st())}}class Oh{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Oh(n,r,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class BM{constructor(e,r){this.targetId=e,this.me=r}}class qM{constructor(e,r,n=$r.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class MT{constructor(){this.fe=0,this.ge=$T(),this.pe=$r.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=st(),r=st(),n=st();return this.ge.forEach(((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Ke()}})),new Oh(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=$T()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,kt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class V8{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vi(),this.qe=LT(),this.Qe=new Kt(pt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ke()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(Ak(s))if(n===0){const o=new Fe(s.path);this.Ue(r,o,Gr.newNoDocument(o,Xe.min()))}else kt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,c;try{o=zo(n).toUint8Array()}catch(d){if(d instanceof bM)return xc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new O1(o,a,s)}catch(d){return xc(d instanceof od?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,s,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((s,o)=>{const c=this.Je(o);if(c){if(s.current&&Ak(c.target)){const d=new Fe(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Gr.newNoDocument(d,e))}s.be&&(r.set(o,s.ve()),s.Ce())}}));let n=st();this.qe.forEach(((s,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.ke.forEach(((s,o)=>o.setReadTime(e)));const a=new k0(e,r,this.Qe,this.ke,n);return this.ke=Vi(),this.qe=LT(),this.Qe=new Kt(pt),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new MT,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Lr(pt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Le("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new MT),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function LT(){return new Kt(Fe.comparator)}function $T(){return new Kt(Fe.comparator)}const U8={asc:"ASCENDING",desc:"DESCENDING"},B8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q8={and:"AND",or:"OR"};class z8{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ik(t,e){return t.useProto3Json||p0(e)?e:{value:e}}function lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W8(t,e){return lp(t,e.toTimestamp())}function Za(t){return kt(!!t),Xe.fromTimestamp((function(r){const n=$s(r);return new yr(n.seconds,n.nanos)})(t))}function R1(t,e){return Ok(t,e).canonicalString()}function Ok(t,e){const r=(function(a){return new Lt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function WM(t){const e=Lt.fromString(t);return kt(YM(e)),e}function Rk(t,e){return R1(t.databaseId,e.path)}function sx(t,e){const r=WM(e);if(r.get(1)!==t.databaseId.projectId)throw new Pe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Pe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Fe(GM(r))}function HM(t,e){return R1(t.databaseId,e)}function H8(t){const e=WM(t);return e.length===4?Lt.emptyPath():GM(e)}function Dk(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GM(t){return kt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FT(t,e,r){return{name:Rk(t,e),fields:r.value.mapValue.fields}}function G8(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ke()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(kt(m===void 0||typeof m=="string"),$r.fromBase64String(m||"")):(kt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),$r.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const m=h.code===void 0?xe.UNKNOWN:UM(h.code);return new Pe(m,h.message||"")})(o);r=new qM(n,a,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=sx(t,n.document.name),s=Za(n.document.updateTime),o=n.document.createTime?Za(n.document.createTime):Xe.min(),c=new vn({mapValue:{fields:n.document.fields}}),d=Gr.newFoundDocument(a,s,o,c),h=n.targetIds||[],m=n.removedTargetIds||[];r=new Hm(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=sx(t,n.document),s=n.readTime?Za(n.readTime):Xe.min(),o=Gr.newNoDocument(a,s),c=n.removedTargetIds||[];r=new Hm([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=sx(t,n.document),s=n.removedTargetIds||[];r=new Hm([],s,a,null)}else{if(!("filter"in e))return Ke();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new M8(a,s),c=n.targetId;r=new BM(c,o)}}return r}function K8(t,e){let r;if(e instanceof Ih)r={update:FT(t,e.key,e.value)};else if(e instanceof w0)r={delete:Rk(t,e.key)};else if(e instanceof zs)r={update:FT(t,e.key,e.data),updateMask:nU(e.fieldMask)};else{if(!(e instanceof O8))return Ke();r={verify:Rk(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,o){const c=o.transform;if(c instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Md)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof op)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Ke()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,s){return s.updateTime!==void 0?{updateTime:W8(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ke()})(t,e.precondition)),r}function Q8(t,e){return t&&t.length>0?(kt(e!==void 0),t.map((r=>(function(a,s){let o=a.updateTime?Za(a.updateTime):Za(s);return o.isEqual(Xe.min())&&(o=Za(s)),new C8(o,a.transformResults||[])})(r,e)))):[]}function Y8(t,e){return{documents:[HM(t,e.path)]}}function X8(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HM(t,a);const s=(function(h){if(h.length!==0)return QM(Aa.create(h,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const o=(function(h){if(h.length!==0)return h.map((m=>(function(y){return{field:ec(y.field),direction:eU(y.dir)}})(m)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=Ik(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function J8(t){let e=H8(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){kt(n===1);const m=r.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let s=[];r.where&&(s=(function(p){const y=KM(p);return y instanceof Aa&&jM(y)?y.getFilters():[y]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((y=>(function(w){return new sp(tc(w.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,p0(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(p){const y=!!p.before,v=p.values||[];return new ip(v,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(p){const y=!p.before,v=p.values||[];return new ip(v,y)})(r.endAt)),g8(e,a,o,s,c,"F",d,h)}function Z8(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function KM(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=tc(r.unaryFilter.field);return cr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=tc(r.unaryFilter.field);return cr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tc(r.unaryFilter.field);return cr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tc(r.unaryFilter.field);return cr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}})(t):t.fieldFilter!==void 0?(function(r){return cr.create(tc(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Aa.create(r.compositeFilter.filters.map((n=>KM(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ke()}})(r.compositeFilter.op))})(t):Ke()}function eU(t){return U8[t]}function tU(t){return B8[t]}function rU(t){return q8[t]}function ec(t){return{fieldPath:t.canonicalString()}}function tc(t){return Mr.fromServerFormat(t.fieldPath)}function QM(t){return t instanceof cr?(function(r){if(r.op==="=="){if(NT(r.value))return{unaryFilter:{field:ec(r.field),op:"IS_NAN"}};if(jT(r.value))return{unaryFilter:{field:ec(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(NT(r.value))return{unaryFilter:{field:ec(r.field),op:"IS_NOT_NAN"}};if(jT(r.value))return{unaryFilter:{field:ec(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ec(r.field),op:tU(r.op),value:r.value}}})(t):t instanceof Aa?(function(r){const n=r.getFilters().map((a=>QM(a)));return n.length===1?n[0]:{compositeFilter:{op:rU(r.op),filters:n}}})(t):Ke()}function nU(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function YM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r,n,a,s=Xe.min(),o=Xe.min(),c=$r.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.ct=e}}function iU(t){const e=J8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pk(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.un=new oU}addToCollectionParentIndex(e,r){return this.un.add(r),ke.resolve()}getCollectionParents(e,r){return ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ke.resolve()}deleteFieldIndex(e,r){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,r){return ke.resolve()}getDocumentsMatchingTarget(e,r){return ke.resolve(null)}getIndexType(e,r){return ke.resolve(0)}getFieldIndexes(e,r){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,r){return ke.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,r){return ke.resolve(Ls.min())}updateCollectionGroup(e,r,n){return ke.resolve()}updateIndexEntries(e,r){return ke.resolve()}}class oU{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Lr(Lt.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Lr(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new kc(0)}static kn(){return new kc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.changes=new Xc((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&yd(n.mutation,a,On.empty(),yr.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,st()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=st()){const a=To();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((s=>{let o=sd();return s.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=To();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,st())))}populateOverlays(e,r,n){const a=[];return n.forEach((s=>{r.has(s)||a.push(s)})),this.documentOverlayCache.getOverlays(e,a).next((s=>{s.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let s=Vi();const o=gd(),c=(function(){return gd()})();return r.forEach(((d,h)=>{const m=n.get(h.key);a.has(h.key)&&(m===void 0||m.mutation instanceof zs)?s=s.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),yd(m.mutation,h,m.mutation.getFieldMask(),yr.now())):o.set(h.key,On.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>o.set(h,m))),r.forEach(((h,m)=>{var p;return c.set(h,new cU(m,(p=o.get(h))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=gd();let a=new Kt(((o,c)=>o-c)),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let m=n.get(d)||On.empty();m=c.applyToLocalView(h,m),n.set(d,m);const p=(a.get(c.batchId)||st()).add(d);a=a.insert(c.batchId,p)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,m=d.value,p=OM();m.forEach((y=>{if(!s.has(y)){const v=FM(r.get(y),n.get(y));v!==null&&p.set(y,v),s=s.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return ke.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return Fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):TM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):ke.resolve(To());let c=-1,d=s;return o.next((h=>ke.forEach(h,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(m)?ke.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,st()))).next((m=>({batchId:c,changes:IM(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next((n=>{let a=sd();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=sd();return this.indexManager.getCollectionParents(e,s).next((c=>ke.forEach(c,(d=>{const h=(function(p,y){return new Ph(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((m=>{m.forEach(((p,y)=>{o=o.insert(p,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a)))).next((o=>{s.forEach(((d,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Gr.newInvalidDocument(m)))}));let c=sd();return o.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&yd(m.mutation,h,On.empty(),yr.now()),x0(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Za(a.createTime)}})(r)),ke.resolve()}getNamedQuery(e,r){return ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:iU(a.bundledQuery),readTime:Za(a.readTime)}})(r)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(){this.overlays=new Kt(Fe.comparator),this.Ir=new Map}getOverlay(e,r){return ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=To();return ke.forEach(r,(a=>this.getOverlay(e,a).next((s=>{s!==null&&n.set(a,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,s)=>{this.ht(e,r,s)})),ke.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),ke.resolve()}getOverlaysForCollection(e,r,n){const a=To(),s=r.length+1,o=new Fe(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>n&&a.set(d.getKey(),d)}return ke.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Kt(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let m=s.get(h.largestBatchId);m===null&&(m=To(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=To(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=a)););return ke.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new D8(r,n));let s=this.Ir.get(r);s===void 0&&(s=st(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.sessionToken=$r.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.Tr=new Lr(jr.Er),this.dr=new Lr(jr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new jr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new jr(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Fe(new Lt([])),n=new jr(r,e),a=new jr(r,e+1),s=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),s.push(o.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Fe(new Lt([])),n=new jr(r,e),a=new jr(r,e+1);let s=st();return this.dr.forEachInRange([n,a],(o=>{s=s.add(o.key)})),s}containsKey(e){const r=new jr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class jr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Fe.comparator(e.key,r.key)||pt(e.wr,r.wr)}static Ar(e,r){return pt(e.wr,r.wr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Lr(jr.Er)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new R8(s,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new jr(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,r){return ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new jr(r,0),a=new jr(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);s.push(c)})),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Lr(pt);return r.forEach((a=>{const s=new jr(a,0),o=new jr(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],(c=>{n=n.add(c.wr)}))})),ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Fe.isDocumentKey(s)||(s=s.child(""));const o=new jr(new Fe(s),0);let c=new Lr(pt);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),ke.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){kt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ke.forEach(r.mutations,(a=>{const s=new jr(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new jr(r,0),a=this.br.firstAfterOrEqual(n);return ke.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.Mr=e,this.docs=(function(){return new Kt(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ke.resolve(n?n.document.mutableCopy():Gr.newInvalidDocument(r))}getEntries(e,r){let n=Vi();return r.forEach((a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Gr.newInvalidDocument(a))})),ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Vi();const o=r.path,c=new Fe(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||X7(Y7(m),n)<=0||(a.has(m.key)||x0(r,m))&&(s=s.insert(m.key,m.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Ke()}Or(e,r){return ke.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new gU(this)}getSize(e){return ke.resolve(this.size)}}class gU extends lU{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.persistence=e,this.Nr=new Xc((r=>A1(r)),C1),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new D1,this.targetCount=0,this.kr=kc.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new kc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ke.resolve()}updateTargetData(e,r){return this.Kn(r),ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),ke.waitFor(s).next((()=>a))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach((o=>{s.push(a.markPotentiallyOrphaned(e,o))})),ke.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ke.resolve(n)}containsKey(e,r){return ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,r){this.qr={},this.overlays={},this.Qr=new N1(0),this.Kr=!1,this.Kr=!0,this.$r=new fU,this.referenceDelegate=e(this),this.Ur=new yU(this),this.indexManager=new sU,this.remoteDocumentCache=(function(a){return new pU(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new aU(r),this.Gr=new dU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new hU,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new mU(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Le("MemoryPersistence","Starting transaction:",e);const a=new vU(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((s=>this.referenceDelegate.jr(a).next((()=>s)))).toPromise().then((s=>(a.raiseOnCommittedEvent(),s)))}Hr(e,r){return ke.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class vU extends Z7{constructor(e){super(),this.currentSequenceNumber=e}}class M1{constructor(e){this.persistence=e,this.Jr=new D1,this.Yr=null}static Zr(e){return new M1(e)}get Xr(){if(this.Yr)return this.Yr;throw Ke()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,(n=>{const a=Fe.fromPath(n);return this.ei(e,a).next((s=>{s||r.removeEntry(a,Xe.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return ke.or([()=>ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=st(),a=st();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new L1(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return cF()?8:e8(Xr())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.Zi(e,r,a,n).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new bU;return this.Xi(e,r,o).next((c=>{if(s.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>s.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(Hu()<=lt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Zl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(Hu()<=lt.DEBUG&&Le("QueryEngine","Query:",Zl(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Hu()<=lt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Zl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ja(r))):ke.resolve())}Yi(e,r){if(AT(r))return ke.resolve(null);let n=Ja(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Pk(r,null,"F"),n=Ja(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const o=st(...s);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Pk(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return AT(r)||a.isEqual(Xe.min())?ke.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?ke.resolve(null):(Hu()<=lt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Zl(r)),this.rs(e,o,r,Q7(a,-1)).next((c=>c)))}))}ts(e,r){let n=new Lr(CM(e));return r.forEach(((a,s)=>{x0(e,s)&&(n=n.add(s))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Hu()<=lt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Zl(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ls.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((s=>(r.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Kt(pt),this._s=new Xc((s=>A1(s)),C1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function _U(t,e,r,n){return new kU(t,e,r,n)}async function XM(t,e){const r=Je(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const o=[],c=[];let d=st();for(const h of a){o.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){c.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function jU(t,e){const r=Je(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,m){const p=h.batch,y=p.keys();let v=ke.resolve();return y.forEach((w=>{v=v.next((()=>m.getEntry(d,w))).next((k=>{const b=h.docVersions.get(w);kt(b!==null),k.version.compareTo(b)<0&&(p.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),m.addEntry(k)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=st();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function JM(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function NU(t,e){const r=Je(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((m,p)=>{const y=a.get(p);if(!y)return;c.push(r.Ur.removeMatchingKeys(s,m.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(s,m.addedDocuments,p))));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken($r.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,n)),a=a.insert(p,v),(function(k,b,j){return k.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(y,v,m)&&c.push(r.Ur.updateTargetData(s,v))}));let d=Vi(),h=st();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(s,m))})),c.push(SU(s,o,e.documentUpdates).next((m=>{d=m.Ps,h=m.Is}))),!n.isEqual(Xe.min())){const m=r.Ur.getLastRemoteSnapshotVersion(s).next((p=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(m)}return ke.waitFor(c).next((()=>o.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(r.os=a,s)))}function SU(t,e,r){let n=st(),a=st();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let o=Vi();return r.forEach(((c,d)=>{const h=s.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Xe.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):Le("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function EU(t,e){const r=Je(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function TU(t,e){const r=Je(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((s=>s?(a=s,ke.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Ts(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Mk(t,e,r){const n=Je(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Ch(o))throw o;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function VT(t,e,r){const n=Je(t);let a=Xe.min(),s=st();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,m){const p=Je(d),y=p._s.get(m);return y!==void 0?ke.resolve(p.os.get(y)):p.Ur.getTargetData(h,m)})(n,o,Ja(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{s=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Xe.min(),r?s:st()))).next((c=>(AU(n,x8(e),c),{documents:c,Ts:s})))))}function AU(t,e,r){let n=t.us.get(e)||Xe.min();r.forEach(((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}class UT{constructor(){this.activeTargetIds=j8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CU{constructor(){this.so=new UT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new UT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym=null;function ox(){return ym===null?ym=(function(){return 268435456+Math.round(2147483648*Math.random())})():ym++,"0x"+ym.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="WebChannelConnection";class RU extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const c=ox(),d=this.xo(r,n.toUriEncodedString());Le("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(r,d,h,a).then((m=>(Le("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw xc("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",d,"request:",a),m}))}Lo(r,n,a,s,o,c){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yc})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>r[o]=s)),a&&a.headers.forEach(((s,o)=>r[o]=s))}xo(r,n){const a=IU[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=ox();return new Promise(((o,c)=>{const d=new hM;d.setWithCredentials(!0),d.listenOnce(fM.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case qm.NO_ERROR:const m=d.getResponseJson();Le(zr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case qm.TIMEOUT:Le(zr,`RPC '${e}' ${s} timed out`),c(new Pe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const p=d.getStatus();if(Le(zr,`RPC '${e}' ${s} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y?.error;if(v&&v.status&&v.message){const w=(function(b){const j=b.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(j)>=0?j:xe.UNKNOWN})(v.status);c(new Pe(w,v.message))}else c(new Pe(xe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Pe(xe.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Le(zr,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(a);Le(zr,`RPC '${e}' ${s} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=ox(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gM(),c=pM(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const m=s.join("");Le(zr,`Creating RPC '${e}' stream ${a}: ${m}`,d);const p=o.createWebChannel(m,d);let y=!1,v=!1;const w=new OU({Io:b=>{v?Le(zr,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(y||(Le(zr,`Opening RPC '${e}' stream ${a} transport.`),p.open(),y=!0),Le(zr,`RPC '${e}' stream ${a} sending:`,b),p.send(b))},To:()=>p.close()}),k=(b,j,N)=>{b.listen(j,(E=>{try{N(E)}catch(P){setTimeout((()=>{throw P}),0)}}))};return k(p,id.EventType.OPEN,(()=>{v||(Le(zr,`RPC '${e}' stream ${a} transport opened.`),w.yo())})),k(p,id.EventType.CLOSE,(()=>{v||(v=!0,Le(zr,`RPC '${e}' stream ${a} transport closed`),w.So())})),k(p,id.EventType.ERROR,(b=>{v||(v=!0,xc(zr,`RPC '${e}' stream ${a} transport errored:`,b),w.So(new Pe(xe.UNAVAILABLE,"The operation could not be completed")))})),k(p,id.EventType.MESSAGE,(b=>{var j;if(!v){const N=b.data[0];kt(!!N);const E=N,P=E.error||((j=E[0])===null||j===void 0?void 0:j.error);if(P){Le(zr,`RPC '${e}' stream ${a} received error:`,P);const S=P.status;let T=(function(M){const D=sr[M];if(D!==void 0)return UM(D)})(S),A=P.message;T===void 0&&(T=xe.INTERNAL,A="Unknown error status: "+S+" with message "+P.message),v=!0,w.So(new Pe(T,A)),p.close()}else Le(zr,`RPC '${e}' stream ${a} received:`,N),w.bo(N)}})),k(c,mM.STAT_EVENT,(b=>{b.stat===Nk.PROXY?Le(zr,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===Nk.NOPROXY&&Le(zr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}function lx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t){return new z8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,r,n,a,s,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZM(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===xe.RESOURCE_EXHAUSTED?(Fi(r.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new Pe(xe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DU extends e4{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=G8(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Xe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Xe.min():o.readTime?Za(o.readTime):Xe.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Dk(this.serializer),r.addTarget=(function(s,o){let c;const d=o.target;if(c=Ak(d)?{documents:Y8(s,d)}:{query:X8(s,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=zM(s,o.resumeToken);const h=Ik(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Xe.min())>0){c.readTime=lp(s,o.snapshotVersion.toTimestamp());const h=Ik(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Z8(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Dk(this.serializer),r.removeTarget=e,this.a_(r)}}class MU extends e4{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return kt(!!e.streamToken),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Q8(e.writeResults,e.commitTime),n=Za(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Dk(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>K8(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Pe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Mo(e,Ok(r,n),a,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(xe.UNKNOWN,s.toString())}))}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,Ok(r,n),a,o,c,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(xe.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class $U{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fi(r),this.D_=!1):Le("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((o=>{n.enqueueAndForget((async()=>{rl(this)&&(Le("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Je(d);h.L_.add(4),await Rh(h),h.q_.set("Unknown"),h.L_.delete(4),await j0(h)})(this))}))})),this.q_=new $U(n,a)}}async function j0(t){if(rl(t))for(const e of t.B_)await e(!0)}async function Rh(t){for(const e of t.B_)await e(!1)}function t4(t,e){const r=Je(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),U1(r)?V1(r):Jc(r).r_()&&F1(r,e))}function $1(t,e){const r=Je(t),n=Jc(r);r.N_.delete(e),n.r_()&&r4(r,e),r.N_.size===0&&(n.r_()?n.o_():rl(r)&&r.q_.set("Unknown"))}function F1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Jc(t).A_(e)}function r4(t,e){t.Q_.xe(e),Jc(t).R_(e)}function V1(t){t.Q_=new V8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Jc(t).start(),t.q_.v_()}function U1(t){return rl(t)&&!Jc(t).n_()&&t.N_.size>0}function rl(t){return Je(t).L_.size===0}function n4(t){t.Q_=void 0}async function VU(t){t.q_.set("Online")}async function UU(t){t.N_.forEach(((e,r)=>{F1(t,e)}))}async function BU(t,e){n4(t),U1(t)?(t.q_.M_(e),V1(t)):t.q_.set("Unknown")}async function qU(t,e,r){if(t.q_.set("Online"),e instanceof qM&&e.state===2&&e.cause)try{await(async function(a,s){const o=s.cause;for(const c of s.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await cp(t,n)}else if(e instanceof Hm?t.Q_.Ke(e):e instanceof BM?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Xe.min()))try{const n=await JM(t.localStore);r.compareTo(n)>=0&&await(function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.N_.get(h);m&&s.N_.set(h,m.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const m=s.N_.get(d);if(!m)return;s.N_.set(d,m.withResumeToken($r.EMPTY_BYTE_STRING,m.snapshotVersion)),r4(s,d);const p=new Ts(m.target,d,h,m.sequenceNumber);F1(s,p)})),s.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Le("RemoteStore","Failed to raise snapshot:",n),await cp(t,n)}}async function cp(t,e,r){if(!Ch(e))throw e;t.L_.add(1),await Rh(t),t.q_.set("Offline"),r||(r=()=>JM(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Le("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await j0(t)}))}function a4(t,e){return e().catch((r=>cp(t,r,e)))}async function N0(t){const e=Je(t),r=Fs(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zU(e);)try{const a=await EU(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,WU(e,a)}catch(a){await cp(e,a)}i4(e)&&s4(e)}function zU(t){return rl(t)&&t.O_.length<10}function WU(t,e){t.O_.push(e);const r=Fs(t);r.r_()&&r.V_&&r.m_(e.mutations)}function i4(t){return rl(t)&&!Fs(t).n_()&&t.O_.length>0}function s4(t){Fs(t).start()}async function HU(t){Fs(t).p_()}async function GU(t){const e=Fs(t);for(const r of t.O_)e.m_(r.mutations)}async function KU(t,e,r){const n=t.O_.shift(),a=I1.from(n,e,r);await a4(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await N0(t)}async function QU(t,e){e&&Fs(t).V_&&await(async function(n,a){if((function(o){return L8(o)&&o!==xe.ABORTED})(a.code)){const s=n.O_.shift();Fs(n).s_(),await a4(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a))),await N0(n)}})(t,e),i4(t)&&s4(t)}async function qT(t,e){const r=Je(t);r.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const n=rl(r);r.L_.add(3),await Rh(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await j0(r)}async function YU(t,e){const r=Je(t);e?(r.L_.delete(2),await j0(r)):e||(r.L_.add(2),await Rh(r),r.q_.set("Unknown"))}function Jc(t){return t.K_||(t.K_=(function(r,n,a){const s=Je(r);return s.w_(),new DU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Eo:VU.bind(null,t),Ro:UU.bind(null,t),mo:BU.bind(null,t),d_:qU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),U1(t)?V1(t):t.q_.set("Unknown")):(await t.K_.stop(),n4(t))}))),t.K_}function Fs(t){return t.U_||(t.U_=(function(r,n,a){const s=Je(r);return s.w_(),new MU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HU.bind(null,t),mo:QU.bind(null,t),f_:GU.bind(null,t),g_:KU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await N0(t)):(await t.U_.stop(),t.O_.length>0&&(Le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,c=new B1(e,r,o,a,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q1(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),Ch(t))return new Pe(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Fe.comparator(r.key,n.key):(r,n)=>Fe.comparator(r.key,n.key),this.keyedMap=sd(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new dc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new dc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.W_=new Kt(Fe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ke():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class _c{constructor(e,r,n,a,s,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new _c(e,r,dc.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&y0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class JU{constructor(){this.queries=WT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Je(r),s=a.queries;a.queries=WT(),s.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new Pe(xe.ABORTED,"Firestore shutting down"))}}function WT(){return new Xc((t=>AM(t)),y0)}async function z1(t,e){const r=Je(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new XU,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=q1(o,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&H1(r)}async function W1(t,e){const r=Je(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function ZU(t,e){const r=Je(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&H1(r)}function eB(t,e,r){const n=Je(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function H1(t){t.Y_.forEach((e=>{e.next()}))}var Lk,HT;(HT=Lk||(Lk={})).ea="default",HT.Cache="cache";class G1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new _c(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.key=e}}class l4{constructor(e){this.key=e}}class tB{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=st(),this.mutatedKeys=st(),this.Aa=CM(e),this.Ra=new dc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new zT,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((m,p)=>{const y=a.get(m),v=x0(this.query,p)?p:null,w=!!y&&this.mutatedKeys.has(y.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;y&&v?y.data.isEqual(v.data)?w!==k&&(n.track({type:3,doc:v}),b=!0):this.ga(y,v)||(n.track({type:2,doc:v}),b=!0,(d&&this.Aa(v,d)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!y&&v?(n.track({type:0,doc:v}),b=!0):y&&!v&&(n.track({type:1,doc:y}),b=!0,(d||h)&&(c=!0)),b&&(v?(o=o.add(v),s=k?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),n.track({type:1,doc:m})}return{Ra:o,fa:n,ns:c,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,p)=>(function(v,w){const k=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return k(v)-k(w)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new _c(this.query,e.Ra,s,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=st(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new l4(n))})),this.da.forEach((n=>{e.has(n)||r.push(new o4(n))})),r}ba(e){this.Ta=e.Ts,this.da=st();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return _c.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class rB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class nB{constructor(e){this.key=e,this.va=!1}}class aB{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xc((c=>AM(c)),y0),this.Ma=new Map,this.xa=new Set,this.Oa=new Kt(Fe.comparator),this.Na=new Map,this.La=new D1,this.Ba={},this.ka=new Map,this.qa=kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iB(t,e,r=!0){const n=m4(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await c4(n,e,r,!0),a}async function sB(t,e){const r=m4(t);await c4(r,e,!0,!1)}async function c4(t,e,r,n){const a=await TU(t.localStore,Ja(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let c;return n&&(c=await oB(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&t4(t.remoteStore,a),c}async function oB(t,e,r,n,a){t.Ka=(p,y,v)=>(async function(k,b,j,N){let E=b.view.ma(j);E.ns&&(E=await VT(k.localStore,b.query,!1).then((({documents:A})=>b.view.ma(A,E))));const P=N&&N.targetChanges.get(b.targetId),S=N&&N.targetMismatches.get(b.targetId)!=null,T=b.view.applyChanges(E,k.isPrimaryClient,P,S);return KT(k,b.targetId,T.wa),T.snapshot})(t,p,y,v);const s=await VT(t.localStore,e,!0),o=new tB(e,s.Ts),c=o.ma(s.documents),d=Oh.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);KT(t,r,h.wa);const m=new rB(e,r,o);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function lB(t,e,r){const n=Je(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter((o=>!y0(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Mk(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&$1(n.remoteStore,a.targetId),$k(n,a.targetId)})).catch(Ah)):($k(n,a.targetId),await Mk(n.localStore,a.targetId,!0))}async function cB(t,e){const r=Je(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$1(r.remoteStore,n.targetId))}async function uB(t,e,r){const n=yB(t);try{const a=await(function(o,c){const d=Je(o),h=yr.now(),m=c.reduce(((v,w)=>v.add(w.key)),st());let p,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let w=Vi(),k=st();return d.cs.getEntries(v,m).next((b=>{w=b,w.forEach(((j,N)=>{N.isValidDocument()||(k=k.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,w))).next((b=>{p=b;const j=[];for(const N of c){const E=I8(N,p.get(N.key).overlayedDocument);E!=null&&j.push(new zs(N.key,E,wM(E.value.mapValue),ln.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,j,c)})).next((b=>{y=b;const j=b.applyToLocalDocumentSet(p,k);return d.documentOverlayCache.saveOverlays(v,b.batchId,j)}))})).then((()=>({batchId:y.batchId,changes:IM(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Kt(pt)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Dh(n,a.changes),await N0(n.remoteStore)}catch(a){const s=q1(a,"Failed to persist write");r.reject(s)}}async function u4(t,e){const r=Je(t);try{const n=await NU(r.localStore,e);e.targetChanges.forEach(((a,s)=>{const o=r.Na.get(s);o&&(kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?kt(o.va):a.removedDocuments.size>0&&(kt(o.va),o.va=!1))})),await Dh(r,n,e)}catch(n){await Ah(n)}}function GT(t,e,r){const n=Je(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((s,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Je(o);d.onlineState=c;let h=!1;d.queries.forEach(((m,p)=>{for(const y of p.j_)y.Z_(c)&&(h=!0)})),h&&H1(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function dB(t,e,r){const n=Je(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Kt(Fe.comparator);o=o.insert(s,Gr.newNoDocument(s,Xe.min()));const c=st().add(s),d=new k0(Xe.min(),new Map,new Kt(pt),o,c);await u4(n,d),n.Oa=n.Oa.remove(s),n.Na.delete(e),K1(n)}else await Mk(n.localStore,e,!1).then((()=>$k(n,e,r))).catch(Ah)}async function hB(t,e){const r=Je(t),n=e.batch.batchId;try{const a=await jU(r.localStore,e);h4(r,n,null),d4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Dh(r,a)}catch(a){await Ah(a)}}async function fB(t,e,r){const n=Je(t);try{const a=await(function(o,c){const d=Je(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,c).next((p=>(kt(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(h,p)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(n.localStore,e);h4(n,e,r),d4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Dh(n,a)}catch(a){await Ah(a)}}function d4(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function h4(t,e,r){const n=Je(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function $k(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||f4(t,n)}))}function f4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&($1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),K1(t))}function KT(t,e,r){for(const n of r)n instanceof o4?(t.La.addReference(n.key,e),mB(t,n)):n instanceof l4?(Le("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||f4(t,n.key)):Ke()}function mB(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Le("SyncEngine","New document in limbo: "+r),t.xa.add(n),K1(t))}function K1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Fe(Lt.fromString(e)),n=t.qa.next();t.Na.set(n,new nB(r)),t.Oa=t.Oa.insert(r,n),t4(t.remoteStore,new Ts(Ja(g0(r.path)),n,"TargetPurposeLimboResolution",N1.oe))}}async function Dh(t,e,r){const n=Je(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var m;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(m=r?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(h){a.push(h);const p=L1.Wi(d.targetId,h);s.push(p)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const m=Je(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>ke.forEach(h,(y=>ke.forEach(y.$i,(v=>m.persistence.referenceDelegate.addReference(p,y.targetId,v))).next((()=>ke.forEach(y.Ui,(v=>m.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))))))}catch(p){if(!Ch(p))throw p;Le("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const v=m.os.get(y),w=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(w);m.os=m.os.insert(y,k)}}})(n.localStore,s))}async function pB(t,e){const r=Je(t);if(!r.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const n=await XM(r.localStore,e);r.currentUser=e,(function(s,o){s.ka.forEach((c=>{c.forEach((d=>{d.reject(new Pe(xe.CANCELLED,o))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Dh(r,n.hs)}}function gB(t,e){const r=Je(t),n=r.Na.get(e);if(n&&n.va)return st().add(n.key);{let a=st();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}function m4(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dB.bind(null,e),e.Ca.d_=ZU.bind(null,e.eventManager),e.Ca.$a=eB.bind(null,e.eventManager),e}function yB(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fB.bind(null,e),e}class up{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return _U(this.persistence,new wU,e.initialUser,this.serializer)}Ga(e){return new xU(M1.Zr,this.serializer)}Wa(e){return new CU}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}up.provider={build:()=>new up};class Fk{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>GT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=pB.bind(null,this.syncEngine),await YU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JU})()}createDatastore(e){const r=_0(e.databaseInfo.databaseId),n=(function(s){return new RU(s)})(e.databaseInfo);return(function(s,o,c,d){return new LU(s,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,s,o,c){return new FU(n,a,s,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>GT(this.syncEngine,r,0)),(function(){return BT.D()?new BT:new PU})())}createSyncEngine(e,r){return(function(a,s,o,c,d,h,m){const p=new aB(a,s,o,c,d,h);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const s=Je(a);Le("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Rh(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Fk.provider={build:()=>new Fk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Hr.UNAUTHENTICATED,this.clientId=xM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async o=>{Le("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=q1(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cx(t,e){t.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await XM(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function QT(t,e){t.asyncQueue.verifyOperationInProgress();const r=await vB(t);Le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>qT(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>qT(e.remoteStore,a))),t._onlineComponents=e}async function vB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{await cx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===xe.FAILED_PRECONDITION||a.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;xc("Error using user provided cache. Falling back to memory cache: "+r),await cx(t,new up)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),await cx(t,new up);return t._offlineComponents}async function p4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),await QT(t,t._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),await QT(t,new Fk))),t._onlineComponents}function bB(t){return p4(t).then((e=>e.syncEngine))}async function dp(t){const e=await p4(t),r=e.eventManager;return r.onListen=iB.bind(null,e.syncEngine),r.onUnlisten=lB.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=sB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=cB.bind(null,e.syncEngine),r}function wB(t,e,r={}){const n=new Ri;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,d,h){const m=new Q1({next:y=>{m.Za(),o.enqueueAndForget((()=>W1(s,p)));const v=y.docs.has(c);!v&&y.fromCache?h.reject(new Pe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&d&&d.source==="server"?h.reject(new Pe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new G1(g0(c.path),m,{includeMetadataChanges:!0,_a:!0});return z1(s,p)})(await dp(t),t.asyncQueue,e,r,n))),n.promise}function kB(t,e,r={}){const n=new Ri;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,d,h){const m=new Q1({next:y=>{m.Za(),o.enqueueAndForget((()=>W1(s,p))),y.fromCache&&d.source==="server"?h.reject(new Pe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new G1(c,m,{includeMetadataChanges:!0,_a:!0});return z1(s,p)})(await dp(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e,r){if(!r)throw new Pe(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _B(t,e,r,n){if(e===!0&&n===!0)throw new Pe(xe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function XT(t){if(!Fe.isDocumentKey(t))throw new Pe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JT(t){if(Fe.isDocumentKey(t))throw new Pe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function S0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ke()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=S0(t);throw new Pe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_B("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Pe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZT(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new V7;switch(n.type){case"firstParty":return new z7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Pe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=YT.get(r);n&&(Le("ComponentProvider","Removing Datastore"),YT.delete(r),n.terminate())})(this),Promise.resolve()}}function jB(t,e,r,n={}){var a;const s=(t=cn(t,E0))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,d;if(typeof n.mockUserToken=="string")c=n.mockUserToken,d=Hr.MOCK_USER;else{c=jD(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Pe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Hr(h)}t._authCredentials=new U7(new yM(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class Yr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yr(this.firestore,e,this._key)}}class Is extends nl{constructor(e,r,n){super(e,r,g0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yr(this.firestore,null,new Fe(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function hc(t,e,...r){if(t=$t(t),y4("collection","path",e),t instanceof E0){const n=Lt.fromString(e,...r);return JT(n),new Is(t,null,n)}{if(!(t instanceof Yr||t instanceof Is))throw new Pe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Lt.fromString(e,...r));return JT(n),new Is(t.firestore,null,n)}}function lr(t,e,...r){if(t=$t(t),arguments.length===1&&(e=xM.newId()),y4("doc","path",e),t instanceof E0){const n=Lt.fromString(e,...r);return XT(n),new Yr(t,null,new Fe(n))}{if(!(t instanceof Yr||t instanceof Is))throw new Pe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Lt.fromString(e,...r));return XT(n),new Yr(t.firestore,t instanceof Is?t.converter:null,new Fe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZM(this,"async_queue_retry"),this.Vu=()=>{const n=lx();n&&Le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=lx();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=lx();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Ri;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ch(e))throw e;Le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw Fi("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=B1.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(a),a}fu(){this.Eu&&Ke()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function tA(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1})(t,["next","error","complete"])}class ai extends E0{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new eA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eA(e),this._firestoreClient=void 0,await e}}}function NB(t,e){const r=typeof t=="object"?t:m1(),n=typeof t=="string"?t:"(default)",a=d0(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=wD("firestore");s&&jB(a,...s)}return a}function Mh(t){if(t._terminated)throw new Pe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SB(t),t._firestoreClient}function SB(t){var e,r,n;const a=t._freezeSettings(),s=(function(c,d,h,m){return new n8(c,d,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,g4(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new xB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jc($r.fromBase64String(e))}catch(r){throw new Pe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new jc($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Pe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Pe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Pe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=/^__.*__$/;class TB{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ih(e,this.data,r,this.fieldTransforms)}}class x4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new zs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function v4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class J1{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new J1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(v4(this.Cu)&&EB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AB{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||_0(e)}Qu(e,r,n,a=!1){return new J1({Cu:e,methodName:r,qu:n,path:Mr.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(t){const e=t._freezeSettings(),r=_0(t._databaseId);return new AB(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Z1(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);tj("Data must be an object, but it was:",o,n);const c=k4(n,o);let d,h;if(s.merge)d=new On(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const p of s.mergeFields){const y=Vk(e,p,r);if(!o.contains(y))throw new Pe(xe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);j4(m,y)||m.push(y)}d=new On(m),h=o.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,h=o.fieldTransforms;return new TB(new vn(c),d,h)}class A0 extends T0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A0}}class ej extends T0{_toFieldTransform(e){return new T8(e.path,new Rd)}isEqual(e){return e instanceof ej}}function b4(t,e,r,n){const a=t.Qu(1,e,r);tj("Data must be an object, but it was:",a,n);const s=[],o=vn.empty();tl(n,((d,h)=>{const m=rj(e,d,r);h=$t(h);const p=a.Nu(m);if(h instanceof A0)s.push(m);else{const y=Fh(h,p);y!=null&&(s.push(m),o.set(m,y))}}));const c=new On(s);return new x4(o,c,a.fieldTransforms)}function w4(t,e,r,n,a,s){const o=t.Qu(1,e,r),c=[Vk(e,n,r)],d=[a];if(s.length%2!=0)throw new Pe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(Vk(e,s[y])),d.push(s[y+1]);const h=[],m=vn.empty();for(let y=c.length-1;y>=0;--y)if(!j4(h,c[y])){const v=c[y];let w=d[y];w=$t(w);const k=o.Nu(v);if(w instanceof A0)h.push(v);else{const b=Fh(w,k);b!=null&&(h.push(v),m.set(v,b))}}const p=new On(h);return new x4(m,p,o.fieldTransforms)}function CB(t,e,r,n=!1){return Fh(r,t.Qu(n?4:3,e))}function Fh(t,e){if(_4(t=$t(t)))return tj("Unsupported field value:",e,t),k4(t,e);if(t instanceof T0)return(function(n,a){if(!v4(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const s=[];let o=0;for(const c of n){let d=Fh(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),o++}return{arrayValue:{values:s}}})(t,e)}return(function(n,a){if((n=$t(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return N8(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=yr.fromDate(n);return{timestampValue:lp(a.serializer,s)}}if(n instanceof yr){const s=new yr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:lp(a.serializer,s)}}if(n instanceof Y1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof jc)return{bytesValue:zM(a.serializer,n._byteString)};if(n instanceof Yr){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:R1(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof X1)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return P1(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${S0(n)}`)})(t,e)}function k4(t,e){const r={};return vM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tl(t,((n,a)=>{const s=Fh(a,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function _4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yr||t instanceof Y1||t instanceof jc||t instanceof Yr||t instanceof T0||t instanceof X1)}function tj(t,e,r){if(!_4(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=S0(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Vk(t,e,r){if((e=$t(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return rj(t,e);throw hp("Field path arguments must be of type string or ",t,!1,void 0,r)}const PB=new RegExp("[~\\*/\\[\\]]");function rj(t,e,r){if(e.search(PB)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Lh(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function hp(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new Pe(xe.INVALID_ARGUMENT,c+t+d)}function j4(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(S4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class IB extends N4{data(){return super.data()}}function S4(t,e){return typeof e=="string"?rj(t,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nj{}class OB extends nj{}function T4(t,e,...r){let n=[];e instanceof nj&&n.push(e),n=n.concat(r),(function(s){const o=s.filter((d=>d instanceof ij)).length,c=s.filter((d=>d instanceof aj)).length;if(o>1||o>0&&c>0)throw new Pe(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class aj extends OB{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new aj(e,r,n)}_apply(e){const r=this._parse(e);return A4(e._query,r),new nl(e.firestore,e.converter,Ck(e._query,r))}_parse(e){const r=$h(e.firestore);return(function(s,o,c,d,h,m,p){let y;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Pe(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){nA(p,m);const v=[];for(const w of p)v.push(rA(d,s,w));y={arrayValue:{values:v}}}else y=rA(d,s,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||nA(p,m),y=CB(c,o,p,m==="in"||m==="not-in");return cr.create(h,m,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class ij extends nj{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ij(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Aa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,s){let o=a;const c=s.getFlattenedFilters();for(const d of c)A4(o,d),o=Ck(o,d)})(e._query,r),new nl(e.firestore,e.converter,Ck(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rA(t,e,r){if(typeof(r=$t(r))=="string"){if(r==="")throw new Pe(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TM(e)&&r.indexOf("/")!==-1)throw new Pe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Lt.fromString(r));if(!Fe.isDocumentKey(n))throw new Pe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return _T(t,new Fe(n))}if(r instanceof Yr)return _T(t,r._key);throw new Pe(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S0(r)}.`)}function nA(t,e){if(!Array.isArray(t)||t.length===0)throw new Pe(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A4(t,e){const r=(function(a,s){for(const o of a)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Pe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class RB{convertValue(e,r="none"){switch(Wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return tl(e,((a,s)=>{n[a]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>tr(o.doubleValue)));return new X1(s)}convertGeoPoint(e){return new Y1(tr(e.latitude),tr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=E1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const r=$s(e);return new yr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Lt.fromString(e);kt(YM(n));const a=new Id(n.get(1),n.get(3)),s=new Fe(n.popFirst(5));return a.isEqual(r)||Fi(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class C4 extends N4{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(S4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Gm extends C4{data(e={}){return super.data(e)}}class P4{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new ld(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Gm(this._firestore,this._userDataWriter,n.key,n,new ld(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Pe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new Gm(a._firestore,a._userDataWriter,c.doc.key,c.doc,new ld(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const d=new Gm(a._firestore,a._userDataWriter,c.doc.key,c.doc,new ld(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:DB(c.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function DB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){t=cn(t,Yr);const e=cn(t.firestore,ai);return wB(Mh(e),t._key).then((r=>O4(e,t,r)))}class lj extends RB{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,r)}}function MB(t){t=cn(t,nl);const e=cn(t.firestore,ai),r=Mh(e),n=new lj(e);return E4(t._query),kB(r,t._query).then((a=>new P4(e,n,t,a)))}function Na(t,e,r){t=cn(t,Yr);const n=cn(t.firestore,ai),a=sj(t.converter,e,r);return Vh(n,[Z1($h(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ln.none())])}function Zn(t,e,r,...n){t=cn(t,Yr);const a=cn(t.firestore,ai),s=$h(a);let o;return o=typeof(e=$t(e))=="string"||e instanceof Lh?w4(s,"updateDoc",t._key,e,r,n):b4(s,"updateDoc",t._key,e),Vh(a,[o.toMutation(t._key,ln.exists(!0))])}function cj(t){return Vh(cn(t.firestore,ai),[new w0(t._key,ln.none())])}function I4(t,e){const r=cn(t.firestore,ai),n=lr(t),a=sj(t.converter,e);return Vh(r,[Z1($h(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ln.exists(!1))]).then((()=>n))}function xd(t,...e){var r,n,a;t=$t(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||tA(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(tA(e[o])){const p=e[o];e[o]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(a=p.complete)===null||a===void 0?void 0:a.bind(p)}let d,h,m;if(t instanceof Yr)h=cn(t.firestore,ai),m=g0(t._key.path),d={next:p=>{e[o]&&e[o](O4(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=cn(t,nl);h=cn(p.firestore,ai),m=p._query;const y=new lj(h);d={next:v=>{e[o]&&e[o](new P4(h,y,p,v))},error:e[o+1],complete:e[o+2]},E4(t._query)}return(function(y,v,w,k){const b=new Q1(k),j=new G1(v,b,w);return y.asyncQueue.enqueueAndForget((async()=>z1(await dp(y),j))),()=>{b.Za(),y.asyncQueue.enqueueAndForget((async()=>W1(await dp(y),j)))}})(Mh(h),m,c,d)}function Vh(t,e){return(function(n,a){const s=new Ri;return n.asyncQueue.enqueueAndForget((async()=>uB(await bB(n),a,s))),s.promise})(Mh(t),e)}function O4(t,e,r){const n=r.docs.get(e._key),a=new lj(t);return new C4(t,a,e._key,n,new ld(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=$h(e)}set(e,r,n){this._verifyNotCommitted();const a=ux(e,this._firestore),s=sj(a.converter,r,n),o=Z1(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,ln.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=ux(e,this._firestore);let o;return o=typeof(r=$t(r))=="string"||r instanceof Lh?w4(this._dataReader,"WriteBatch.update",s._key,r,n,a):b4(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ux(e,this._firestore);return this._mutations=this._mutations.concat(new w0(r._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ux(t,e){if((t=$t(t)).firestore!==e)throw new Pe(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ut(){return new ej("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){return Mh(t=cn(t,ai)),new LB(t,(e=>Vh(t,e)))}(function(e,r=!0){(function(a){Yc=a})(Zo),Vo(new Ms("firestore",((n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new ai(new B7(n.getProvider("auth-internal")),new H7(n.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Pe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(h.options.projectId,m)})(o,a),o);return s=Object.assign({useFetchStreams:r},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),Qa(xT,"4.7.3",e),Qa(xT,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="firebasestorage.googleapis.com",D4="storageBucket",$B=120*1e3,FB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends oi{constructor(e,r,n=0){super(dx(e),`Firebase Storage: ${r} (${dx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function dx(t){return"storage/"+t}function uj(){const t="An unknown error occurred, please check the error payload for server response.";return new Jt(Xt.UNKNOWN,t)}function VB(t){return new Jt(Xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function UB(t){return new Jt(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Xt.UNAUTHENTICATED,t)}function qB(){return new Jt(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zB(t){return new Jt(Xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WB(){return new Jt(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HB(){return new Jt(Xt.CANCELED,"User canceled the upload/download.")}function GB(t){return new Jt(Xt.INVALID_URL,"Invalid URL '"+t+"'.")}function KB(t){return new Jt(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function QB(){return new Jt(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D4+"' property when initializing the app?")}function YB(){return new Jt(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XB(){return new Jt(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JB(t){return new Jt(Xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bk(t){return new Jt(Xt.INVALID_ARGUMENT,t)}function M4(){return new Jt(Xt.APP_DELETED,"The Firebase app was deleted.")}function ZB(t){return new Jt(Xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new Jt(Xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gu(t){throw new Jt(Xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Rn.makeFromUrl(e,r)}catch{return new Rn(e,"")}if(n.path==="")return n;throw KB(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${m}/b/${a}/o${y}`,"i"),w={bucket:1,path:3},k=r===R4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",j=new RegExp(`^https?://${k}/${a}/${b}`,"i"),E=[{regex:c,indices:d,postModify:s},{regex:v,indices:w,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<E.length;P++){const S=E[P],T=S.regex.exec(e);if(T){const A=T[S.indices.bucket];let R=T[S.indices.path];R||(R=""),n=new Rn(A,R),S.postModify(n);break}}if(n==null)throw GB(e);return n}}class eq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t,e,r){let n=1,a=null,s=null,o=!1,c=0;function d(){return c===2}let h=!1;function m(...b){h||(h=!0,e.apply(null,b))}function p(b){a=setTimeout(()=>{a=null,t(v,d())},b)}function y(){s&&clearTimeout(s)}function v(b,...j){if(h){y();return}if(b){y(),m.call(null,b,...j);return}if(d()||o){y(),m.call(null,b,...j);return}n<64&&(n*=2);let E;c===1?(c=2,E=0):E=(n+Math.random())*1e3,p(E)}let w=!1;function k(b){w||(w=!0,y(),!h&&(a!==null?(b||(c=2),clearTimeout(a),p(0)):b||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,k(!0)},r),k}function rq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){return t!==void 0}function aq(t){return typeof t=="object"&&!Array.isArray(t)}function dj(t){return typeof t=="string"||t instanceof String}function aA(t){return hj()&&t instanceof Blob}function hj(){return typeof Blob<"u"}function iA(t,e,r,n){if(n<e)throw Bk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Bk(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function L4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Do;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Do||(Do={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e,r,n,a,s,o,c,d,h,m,p,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new xm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Do.NO_ERROR,d=s.getStatus();if(!c||iq(d,this.additionalRetryCodes_)&&this.retry){const m=s.getErrorCode()===Do.ABORT;n(!1,new xm(!1,null,m));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new xm(h,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());nq(d)?s(d):s()}catch(d){o(d)}else if(c!==null){const d=uj();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?M4():HB();o(d)}else{const d=WB();o(d)}};this.canceled_?r(!1,new xm(!1,null,!0)):this.backoffId_=tq(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xm{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function oq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dq(t,e,r,n,a,s,o=!0){const c=L4(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return cq(h,e),oq(h,r),lq(h,s),uq(h,n),new sq(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fq(...t){const e=hq();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(hj())return new Blob(t);throw new Jt(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mq(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){if(typeof atob>"u")throw JB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hx{constructor(e,r){this.data=e,this.contentType=r||null}}function gq(t,e){switch(t){case Ga.RAW:return new hx($4(e));case Ga.BASE64:case Ga.BASE64URL:return new hx(F4(t,e));case Ga.DATA_URL:return new hx(xq(e),vq(e))}throw uj()}function $4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=t.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function yq(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(Ga.DATA_URL,"Malformed data URL.")}return $4(e)}function F4(t,e){switch(t){case Ga.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw vd(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ga.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw vd(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=pq(e)}catch(a){throw a.message.includes("polyfill")?a:vd(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class V4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw vd(Ga.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=bq(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function xq(t){const e=new V4(t);return e.base64?F4(Ga.BASE64,e.rest):yq(e.rest)}function vq(t){return new V4(t).contentType}function bq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,r){let n=0,a="";aA(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(aA(this.data_)){const n=this.data_,a=mq(n,e,r);return a===null?null:new Ss(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ss(n,!0)}}static getBlob(...e){if(hj()){const r=e.map(n=>n instanceof Ss?n.data_:n);return new Ss(fq.apply(null,r))}else{const r=e.map(o=>dj(o)?gq(Ga.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[s++]=o[c]}),new Ss(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){let e;try{e=JSON.parse(t)}catch{return null}return aq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kq(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function B4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t,e){return e}class rn{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||_q}}let vm=null;function jq(t){return!dj(t)||t.length<2?t:B4(t)}function q4(){if(vm)return vm;const t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(s,o){return jq(o)}const r=new rn("name");r.xform=e,t.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new rn("size");return a.xform=n,t.push(a),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),vm=t,vm}function Nq(t,e){function r(){const n=t.bucket,a=t.fullPath,s=new Rn(n,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function Sq(t,e,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,e[o.server])}return Nq(n,t),n}function z4(t,e,r){const n=U4(e);return n===null?null:Sq(t,n,r)}function Eq(t,e,r,n){const a=U4(e);if(a===null||!dj(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const m=t.bucket,p=t.fullPath,y="/b/"+o(m)+"/o/"+o(p),v=fj(y,r,n),w=L4({alt:"media",token:h});return v+w})[0]}function Tq(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const s=e[a];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class W4{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){if(!t)throw uj()}function Aq(t,e){function r(n,a){const s=z4(t,a,e);return H4(s!==null),s}return r}function Cq(t,e){function r(n,a){const s=z4(t,a,e);return H4(s!==null),Eq(s,a,t.host,t._protocol)}return r}function G4(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=qB():a=BB():r.getStatus()===402?a=UB(t.bucket):r.getStatus()===403?a=zB(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function Pq(t){const e=G4(t);function r(n,a){let s=e(n,a);return n.getStatus()===404&&(s=VB(t.path)),s.serverResponse=a.serverResponse,s}return r}function Iq(t,e,r){const n=e.fullServerUrl(),a=fj(n,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new W4(a,s,Cq(t,r),o);return c.errorHandler=Pq(e),c}function Oq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Rq(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Oq(null,e)),n}function Dq(t,e,r,n,a){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let P=0;P<2;P++)E=E+Math.random().toString().slice(2);return E}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Rq(e,n,a),m=Tq(h,r),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",v=Ss.getBlob(p,n,y);if(v===null)throw YB();const w={name:h.fullPath},k=fj(s,t.host,t._protocol),b="POST",j=t.maxUploadRetryTime,N=new W4(k,b,Aq(t,r),j);return N.urlParams=w,N.headers=o,N.body=v.uploadData(),N.errorHandler=G4(e),N}class Mq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw Gu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Lq extends Mq{initXhr(){this.xhr_.responseType="text"}}function K4(){return new Lq}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,r){this._service=e,r instanceof Rn?this._location=r:this._location=Rn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ho(e,r)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B4(this._location.path)}get storage(){return this._service}get parent(){const e=wq(this._location.path);if(e===null)return null;const r=new Rn(this._location.bucket,e);return new Ho(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw ZB(e)}}function $q(t,e,r){t._throwIfRoot("uploadBytes");const n=Dq(t.storage,t._location,q4(),new Ss(e,!0),r);return t.storage.makeRequestWithTokens(n,K4).then(a=>({metadata:a,ref:t}))}function Fq(t){t._throwIfRoot("getDownloadURL");const e=Iq(t.storage,t._location,q4());return t.storage.makeRequestWithTokens(e,K4).then(r=>{if(r===null)throw XB();return r})}function Vq(t,e){const r=kq(t._location.path,e),n=new Rn(t._location.bucket,r);return new Ho(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uq(t){return/^[A-Za-z]+:\/\//.test(t)}function Bq(t,e){return new Ho(t,e)}function Q4(t,e){if(t instanceof mj){const r=t;if(r._bucket==null)throw QB();const n=new Ho(r,r._bucket);return e!=null?Q4(n,e):n}else return e!==void 0?Vq(t,e):t}function qq(t,e){if(e&&Uq(e)){if(t instanceof mj)return Bq(t,e);throw Bk("To use ref(service, url), the first argument must be a Storage instance.")}else return Q4(t,e)}function sA(t,e){const r=e?.[D4];return r==null?null:Rn.makeFromBucketSpec(r,t)}function zq(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:jD(a,t.app.options.projectId))}class mj{constructor(e,r,n,a,s){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._bucket=null,this._host=R4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$B,this._maxUploadRetryTime=FB,this._requests=new Set,a!=null?this._bucket=Rn.makeFromBucketSpec(a,this._host):this._bucket=sA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=sA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ho(this,e)}_makeRequest(e,r,n,a,s=!0){if(this._deleted)return new eq(M4());{const o=dq(e,this._appId,n,a,r,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const oA="@firebase/storage",lA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="storage";function Wq(t,e,r){return t=$t(t),$q(t,e,r)}function Hq(t){return t=$t(t),Fq(t)}function Gq(t,e){return t=$t(t),qq(t,e)}function Kq(t=m1(),e){t=$t(t);const n=d0(t,Y4).getImmediate({identifier:e}),a=wD("storage");return a&&Qq(n,...a),n}function Qq(t,e,r,n={}){zq(t,e,r,n)}function Yq(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new mj(r,n,a,e,Zo)}function Xq(){Vo(new Ms(Y4,Yq,"PUBLIC").setMultipleInstances(!0)),Qa(oA,lA,""),Qa(oA,lA,"esm2017")}Xq();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X4=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...c},d)=>V.createElement("svg",{ref:d,...Zq,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:X4("lucide",a),...c},[...o.map(([h,m])=>V.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const r=V.forwardRef(({className:n,...a},s)=>V.createElement(ez,{ref:s,iconNode:e,className:X4(`lucide-${Jq(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Re("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=Re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Re("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=Re("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=Re("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Re("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=Re("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Re("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=Re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Re("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Re("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Re("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=Re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=Re("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=Re("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=Re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=Re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Re("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Re("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=Re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=Re("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=Re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=Re("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=Re("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Re("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Re("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bz=({setUserId:t})=>{const[e,r]=V.useState(!0),[n,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState(!1),p=uM(),y=async v=>{v.preventDefault(),d(""),m(!0);try{e?await j9(p,n,s):await _9(p,n,s)}catch(w){d(w.message)}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex flex-col justify-center items-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(Er,{className:"mx-auto h-12 w-auto text-cyan-500"}),i.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e?"Sign in to your account":"Create a new account"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-xl rounded-2xl p-8",children:[i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:v=>a(v.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:v=>o(v.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),c&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:h,className:"flex w-full justify-center rounded-md border border-transparent bg-cyan-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-400",children:h?"Processing...":e?"Sign in":"Create account"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[e?"Don't have an account?":"Already have an account?",i.jsx("button",{onClick:()=>r(!e),className:"font-medium text-cyan-600 hover:text-cyan-500 ml-1",children:e?"Sign up":"Sign in"})]})})]})]})})},Ao=({title:t,value:e,icon:r,color:n,subtext:a})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:t}),i.jsx("div",{className:`text-${n}-500 dark:text-${n}-400`,children:r})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-white mt-2",children:e}),a&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:a})]})]});function o3(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=o3(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function nt(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=o3(t))&&(n&&(n+=" "),n+=e);return n}var mx,hA;function wn(){if(hA)return mx;hA=1;var t=Array.isArray;return mx=t,mx}var px,fA;function l3(){if(fA)return px;fA=1;var t=typeof dm=="object"&&dm&&dm.Object===Object&&dm;return px=t,px}var gx,mA;function li(){if(mA)return gx;mA=1;var t=l3(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return gx=r,gx}var yx,pA;function Bh(){if(pA)return yx;pA=1;var t=li(),e=t.Symbol;return yx=e,yx}var xx,gA;function wz(){if(gA)return xx;gA=1;var t=Bh(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function s(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var m=n.call(o);return h&&(c?o[a]=d:delete o[a]),m}return xx=s,xx}var vx,yA;function kz(){if(yA)return vx;yA=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return vx=r,vx}var bx,xA;function Hi(){if(xA)return bx;xA=1;var t=Bh(),e=wz(),r=kz(),n="[object Null]",a="[object Undefined]",s=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:s&&s in Object(c)?e(c):r(c)}return bx=o,bx}var wx,vA;function Gi(){if(vA)return wx;vA=1;function t(e){return e!=null&&typeof e=="object"}return wx=t,wx}var kx,bA;function Zc(){if(bA)return kx;bA=1;var t=Hi(),e=Gi(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return kx=n,kx}var _x,wA;function gj(){if(wA)return _x;wA=1;var t=wn(),e=Zc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){if(t(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||e(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return _x=a,_x}var jx,kA;function Ws(){if(kA)return jx;kA=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return jx=t,jx}var Nx,_A;function yj(){if(_A)return Nx;_A=1;var t=Hi(),e=Ws(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==s}return Nx=o,Nx}var Sx,jA;function _z(){if(jA)return Sx;jA=1;var t=li(),e=t["__core-js_shared__"];return Sx=e,Sx}var Ex,NA;function jz(){if(NA)return Ex;NA=1;var t=_z(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return Ex=r,Ex}var Tx,SA;function c3(){if(SA)return Tx;SA=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Tx=r,Tx}var Ax,EA;function Nz(){if(EA)return Ax;EA=1;var t=yj(),e=jz(),r=Ws(),n=c3(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,m=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!r(y)||e(y))return!1;var v=t(y)?m:s;return v.test(n(y))}return Ax=p,Ax}var Cx,TA;function Sz(){if(TA)return Cx;TA=1;function t(e,r){return e?.[r]}return Cx=t,Cx}var Px,AA;function al(){if(AA)return Px;AA=1;var t=Nz(),e=Sz();function r(n,a){var s=e(n,a);return t(s)?s:void 0}return Px=r,Px}var Ix,CA;function D0(){if(CA)return Ix;CA=1;var t=al(),e=t(Object,"create");return Ix=e,Ix}var Ox,PA;function Ez(){if(PA)return Ox;PA=1;var t=D0();function e(){this.__data__=t?t(null):{},this.size=0}return Ox=e,Ox}var Rx,IA;function Tz(){if(IA)return Rx;IA=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Rx=t,Rx}var Dx,OA;function Az(){if(OA)return Dx;OA=1;var t=D0(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(s){var o=this.__data__;if(t){var c=o[s];return c===e?void 0:c}return n.call(o,s)?o[s]:void 0}return Dx=a,Dx}var Mx,RA;function Cz(){if(RA)return Mx;RA=1;var t=D0(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var s=this.__data__;return t?s[a]!==void 0:r.call(s,a)}return Mx=n,Mx}var Lx,DA;function Pz(){if(DA)return Lx;DA=1;var t=D0(),e="__lodash_hash_undefined__";function r(n,a){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=t&&a===void 0?e:a,this}return Lx=r,Lx}var $x,MA;function Iz(){if(MA)return $x;MA=1;var t=Ez(),e=Tz(),r=Az(),n=Cz(),a=Pz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,$x=s,$x}var Fx,LA;function Oz(){if(LA)return Fx;LA=1;function t(){this.__data__=[],this.size=0}return Fx=t,Fx}var Vx,$A;function xj(){if($A)return Vx;$A=1;function t(e,r){return e===r||e!==e&&r!==r}return Vx=t,Vx}var Ux,FA;function M0(){if(FA)return Ux;FA=1;var t=xj();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Ux=e,Ux}var Bx,VA;function Rz(){if(VA)return Bx;VA=1;var t=M0(),e=Array.prototype,r=e.splice;function n(a){var s=this.__data__,o=t(s,a);if(o<0)return!1;var c=s.length-1;return o==c?s.pop():r.call(s,o,1),--this.size,!0}return Bx=n,Bx}var qx,UA;function Dz(){if(UA)return qx;UA=1;var t=M0();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return qx=e,qx}var zx,BA;function Mz(){if(BA)return zx;BA=1;var t=M0();function e(r){return t(this.__data__,r)>-1}return zx=e,zx}var Wx,qA;function Lz(){if(qA)return Wx;qA=1;var t=M0();function e(r,n){var a=this.__data__,s=t(a,r);return s<0?(++this.size,a.push([r,n])):a[s][1]=n,this}return Wx=e,Wx}var Hx,zA;function L0(){if(zA)return Hx;zA=1;var t=Oz(),e=Rz(),r=Dz(),n=Mz(),a=Lz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,Hx=s,Hx}var Gx,WA;function vj(){if(WA)return Gx;WA=1;var t=al(),e=li(),r=t(e,"Map");return Gx=r,Gx}var Kx,HA;function $z(){if(HA)return Kx;HA=1;var t=Iz(),e=L0(),r=vj();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Kx=n,Kx}var Qx,GA;function Fz(){if(GA)return Qx;GA=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Qx=t,Qx}var Yx,KA;function $0(){if(KA)return Yx;KA=1;var t=Fz();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Yx=e,Yx}var Xx,QA;function Vz(){if(QA)return Xx;QA=1;var t=$0();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Xx=e,Xx}var Jx,YA;function Uz(){if(YA)return Jx;YA=1;var t=$0();function e(r){return t(this,r).get(r)}return Jx=e,Jx}var Zx,XA;function Bz(){if(XA)return Zx;XA=1;var t=$0();function e(r){return t(this,r).has(r)}return Zx=e,Zx}var ev,JA;function qz(){if(JA)return ev;JA=1;var t=$0();function e(r,n){var a=t(this,r),s=a.size;return a.set(r,n),this.size+=a.size==s?0:1,this}return ev=e,ev}var tv,ZA;function bj(){if(ZA)return tv;ZA=1;var t=$z(),e=Vz(),r=Uz(),n=Bz(),a=qz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,tv=s,tv}var rv,e2;function u3(){if(e2)return rv;e2=1;var t=bj(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var s=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=s.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return s.cache=d.set(c,h)||d,h};return s.cache=new(r.Cache||t),s}return r.Cache=t,rv=r,rv}var nv,t2;function zz(){if(t2)return nv;t2=1;var t=u3(),e=500;function r(n){var a=t(n,function(o){return s.size===e&&s.clear(),o}),s=a.cache;return a}return nv=r,nv}var av,r2;function Wz(){if(r2)return av;r2=1;var t=zz(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(e,function(o,c,d,h){s.push(d?h.replace(r,"$1"):c||o)}),s});return av=n,av}var iv,n2;function wj(){if(n2)return iv;n2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,s=Array(a);++n<a;)s[n]=r(e[n],n,e);return s}return iv=t,iv}var sv,a2;function Hz(){if(a2)return sv;a2=1;var t=Bh(),e=wj(),r=wn(),n=Zc(),a=t?t.prototype:void 0,s=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return s?s.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return sv=o,sv}var ov,i2;function d3(){if(i2)return ov;i2=1;var t=Hz();function e(r){return r==null?"":t(r)}return ov=e,ov}var lv,s2;function h3(){if(s2)return lv;s2=1;var t=wn(),e=gj(),r=Wz(),n=d3();function a(s,o){return t(s)?s:e(s,o)?[s]:r(n(s))}return lv=a,lv}var cv,o2;function F0(){if(o2)return cv;o2=1;var t=Zc();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return cv=e,cv}var uv,l2;function kj(){if(l2)return uv;l2=1;var t=h3(),e=F0();function r(n,a){a=t(a,n);for(var s=0,o=a.length;n!=null&&s<o;)n=n[e(a[s++])];return s&&s==o?n:void 0}return uv=r,uv}var dv,c2;function f3(){if(c2)return dv;c2=1;var t=kj();function e(r,n,a){var s=r==null?void 0:t(r,n);return s===void 0?a:s}return dv=e,dv}var Gz=f3();const Mn=vt(Gz);var hv,u2;function Kz(){if(u2)return hv;u2=1;function t(e){return e==null}return hv=t,hv}var Qz=Kz();const it=vt(Qz);var fv,d2;function Yz(){if(d2)return fv;d2=1;var t=Hi(),e=wn(),r=Gi(),n="[object String]";function a(s){return typeof s=="string"||!e(s)&&r(s)&&t(s)==n}return fv=a,fv}var Xz=Yz();const Go=vt(Xz);var Jz=yj();const Ge=vt(Jz);var Zz=Ws();const eu=vt(Zz);var mv={exports:{}},yt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function eW(){if(h2)return yt;h2=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function k(b){if(typeof b=="object"&&b!==null){var j=b.$$typeof;switch(j){case t:switch(b=b.type,b){case r:case a:case n:case h:case m:return b;default:switch(b=b&&b.$$typeof,b){case c:case o:case d:case y:case p:case s:return b;default:return j}}case e:return j}}}return yt.ContextConsumer=o,yt.ContextProvider=s,yt.Element=t,yt.ForwardRef=d,yt.Fragment=r,yt.Lazy=y,yt.Memo=p,yt.Portal=e,yt.Profiler=a,yt.StrictMode=n,yt.Suspense=h,yt.SuspenseList=m,yt.isAsyncMode=function(){return!1},yt.isConcurrentMode=function(){return!1},yt.isContextConsumer=function(b){return k(b)===o},yt.isContextProvider=function(b){return k(b)===s},yt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},yt.isForwardRef=function(b){return k(b)===d},yt.isFragment=function(b){return k(b)===r},yt.isLazy=function(b){return k(b)===y},yt.isMemo=function(b){return k(b)===p},yt.isPortal=function(b){return k(b)===e},yt.isProfiler=function(b){return k(b)===a},yt.isStrictMode=function(b){return k(b)===n},yt.isSuspense=function(b){return k(b)===h},yt.isSuspenseList=function(b){return k(b)===m},yt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===a||b===n||b===h||b===m||b===v||typeof b=="object"&&b!==null&&(b.$$typeof===y||b.$$typeof===p||b.$$typeof===s||b.$$typeof===o||b.$$typeof===d||b.$$typeof===w||b.getModuleId!==void 0)},yt.typeOf=k,yt}var f2;function tW(){return f2||(f2=1,mv.exports=eW()),mv.exports}var rW=tW(),pv,m2;function m3(){if(m2)return pv;m2=1;var t=Hi(),e=Gi(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return pv=n,pv}var gv,p2;function nW(){if(p2)return gv;p2=1;var t=m3();function e(r){return t(r)&&r!=+r}return gv=e,gv}var aW=nW();const qh=vt(aW);var iW=m3();const sW=vt(iW);var an=function(e){return e===0?0:e>0?1:-1},Co=function(e){return Go(e)&&e.indexOf("%")===e.length-1},Se=function(e){return sW(e)&&!qh(e)},oW=function(e){return it(e)},gr=function(e){return Se(e)||Go(e)},lW=0,zh=function(e){var r=++lW;return"".concat(e||"").concat(r)},sn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Se(e)&&!Go(e))return n;var s;if(Co(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return qh(s)&&(s=n),a&&s>r&&(s=r),s},Es=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},cW=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},bs=function(e,r){return Se(e)&&Se(r)?function(n){return e+n*(r-e)}:function(){return r}};function zk(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Mn(n,e))===r})}var uW=function(e,r){return Se(e)&&Se(r)?e-r:Go(e)&&Go(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function pc(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Wk(t){"@babel/helpers - typeof";return Wk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wk(t)}var dW=["viewBox","children"],hW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g2=["points","pathLength"],yv={svg:dW,polygon:g2,polyline:g2},_j=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],pp=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(V.isValidElement(e)&&(n=e.props),!eu(n))return null;var a={};return Object.keys(n).forEach(function(s){_j.includes(s)&&(a[s]=r||function(o){return n[s](n,o)})}),a},fW=function(e,r,n){return function(a){return e(r,n,a),null}},Ko=function(e,r,n){if(!eu(e)||Wk(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var o=e[s];_j.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=fW(o,r,n))}),a},mW=["children"],pW=["children"];function y2(t,e){if(t==null)return{};var r=gW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var x2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Di=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v2=null,xv=null,jj=function t(e){if(e===v2&&Array.isArray(xv))return xv;var r=[];return V.Children.forEach(e,function(n){it(n)||(rW.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),xv=r,v2=e,r};function ta(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Di(a)}):n=[Di(e)],jj(t).forEach(function(a){var s=Mn(a,"type.displayName")||Mn(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}function Pn(t,e){var r=ta(t,e);return r&&r[0]}var b2=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!Se(n)||n<=0||!Se(a)||a<=0)},yW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],xW=function(e){return e&&e.type&&Go(e.type)&&yW.indexOf(e.type)>=0},vW=function(e,r,n,a){var s,o=(s=yv?.[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ge(e)&&(a&&o.includes(r)||hW.includes(r))||n&&_j.includes(r)},We=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(V.isValidElement(e)&&(a=e.props),!eu(a))return null;var s={};return Object.keys(a).forEach(function(o){var c;vW((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(s[o]=a[o])}),s},Hk=function t(e,r){if(e===r)return!0;var n=V.Children.count(e);if(n!==V.Children.count(r))return!1;if(n===0)return!0;if(n===1)return w2(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=e[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!w2(s,o))return!1}return!0},w2=function(e,r){if(it(e)&&it(r))return!0;if(!it(e)&&!it(r)){var n=e.props||{},a=n.children,s=y2(n,mW),o=r.props||{},c=o.children,d=y2(o,pW);return a&&c?pc(s,d)&&Hk(a,c):!a&&!c?pc(s,d):!1}return!1},k2=function(e,r){var n=[],a={};return jj(e).forEach(function(s,o){if(xW(s))n.push(s);else if(s){var c=Di(s.type),d=r[c]||{},h=d.handler,m=d.once;if(h&&(!m||!a[c])){var p=h(s,c,o);n.push(p),a[c]=!0}}}),n},bW=function(e){var r=e&&e.type;return r&&x2[r]?x2[r]:null},wW=function(e,r){return jj(r).indexOf(e)},kW=["children","width","height","viewBox","className","style","title","desc"];function Gk(){return Gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gk.apply(this,arguments)}function _W(t,e){if(t==null)return{};var r=jW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Kk(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,s=t.className,o=t.style,c=t.title,d=t.desc,h=_W(t,kW),m=a||{width:r,height:n,x:0,y:0},p=nt("recharts-surface",s);return Q.createElement("svg",Gk({},We(h,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),Q.createElement("title",null,c),Q.createElement("desc",null,d),e)}var NW=["children","className"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qk.apply(this,arguments)}function SW(t,e){if(t==null)return{};var r=EW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var wt=Q.forwardRef(function(t,e){var r=t.children,n=t.className,a=SW(t,NW),s=nt("recharts-layer",n);return Q.createElement("g",Qk({className:s},We(a,!0),{ref:e}),r)}),Sa=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]},vv,_2;function TW(){if(_2)return vv;_2=1;function t(e,r,n){var a=-1,s=e.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+r];return o}return vv=t,vv}var bv,j2;function AW(){if(j2)return bv;j2=1;var t=TW();function e(r,n,a){var s=r.length;return a=a===void 0?s:a,!n&&a>=s?r:t(r,n,a)}return bv=e,bv}var wv,N2;function p3(){if(N2)return wv;N2=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+s+"]");function d(h){return c.test(h)}return wv=d,wv}var kv,S2;function CW(){if(S2)return kv;S2=1;function t(e){return e.split("")}return kv=t,kv}var _v,E2;function PW(){if(E2)return _v;E2=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,s="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",m="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",w=h+"?",k="["+s+"]?",b="(?:"+v+"(?:"+[m,p,y].join("|")+")"+k+w+")*",j=k+w+b,N="(?:"+[m+c+"?",c,p,y,o].join("|")+")",E=RegExp(d+"(?="+d+")|"+N+j,"g");function P(S){return S.match(E)||[]}return _v=P,_v}var jv,T2;function IW(){if(T2)return jv;T2=1;var t=CW(),e=p3(),r=PW();function n(a){return e(a)?r(a):t(a)}return jv=n,jv}var Nv,A2;function OW(){if(A2)return Nv;A2=1;var t=AW(),e=p3(),r=IW(),n=d3();function a(s){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[s]()+h}}return Nv=a,Nv}var Sv,C2;function RW(){if(C2)return Sv;C2=1;var t=OW(),e=t("toUpperCase");return Sv=e,Sv}var DW=RW();const V0=vt(DW);function It(t){return function(){return t}}const g3=Math.cos,gp=Math.sin,Oa=Math.sqrt,yp=Math.PI,U0=2*yp,Yk=Math.PI,Xk=2*Yk,No=1e-6,MW=Xk-No;function y3(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function LW(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return y3;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class $W{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?y3:LW(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,m=o-e,p=c-r,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>No)if(!(Math.abs(p*d-h*m)>No)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let v=n-o,w=a-c,k=d*d+h*h,b=v*v+w*w,j=Math.sqrt(k),N=Math.sqrt(y),E=s*Math.tan((Yk-Math.acos((k+y-b)/(2*j*N)))/2),P=E/N,S=E/j;Math.abs(P-1)>No&&this._append`L${e+P*m},${r+P*p}`,this._append`A${s},${s},0,0,${+(p*v>m*w)},${this._x1=e+S*d},${this._y1=r+S*h}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,m=r+d,p=1^o,y=o?a-s:s-a;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>No||Math.abs(this._y1-m)>No)&&this._append`L${h},${m}`,n&&(y<0&&(y=y%Xk+Xk),y>MW?this._append`A${n},${n},0,1,${p},${e-c},${r-d}A${n},${n},0,1,${p},${this._x1=h},${this._y1=m}`:y>No&&this._append`A${n},${n},0,${+(y>=Yk)},${p},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Nj(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new $W(e)}function Sj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function x3(t){this._context=t}x3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function B0(t){return new x3(t)}function v3(t){return t[0]}function b3(t){return t[1]}function w3(t,e){var r=It(!0),n=null,a=B0,s=null,o=Nj(c);t=typeof t=="function"?t:t===void 0?v3:It(t),e=typeof e=="function"?e:e===void 0?b3:It(e);function c(d){var h,m=(d=Sj(d)).length,p,y=!1,v;for(n==null&&(s=a(v=o())),h=0;h<=m;++h)!(h<m&&r(p=d[h],h,d))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(p,h,d),+e(p,h,d));if(v)return s=null,v+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:It(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:It(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:It(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(s=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=s=null:s=a(n=d),c):n},c}function _m(t,e,r){var n=null,a=It(!0),s=null,o=B0,c=null,d=Nj(h);t=typeof t=="function"?t:t===void 0?v3:It(+t),e=typeof e=="function"?e:It(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?b3:It(+r);function h(p){var y,v,w,k=(p=Sj(p)).length,b,j=!1,N,E=new Array(k),P=new Array(k);for(s==null&&(c=o(N=d())),y=0;y<=k;++y){if(!(y<k&&a(b=p[y],y,p))===j)if(j=!j)v=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=y-1;w>=v;--w)c.point(E[w],P[w]);c.lineEnd(),c.areaEnd()}j&&(E[y]=+t(b,y,p),P[y]=+e(b,y,p),c.point(n?+n(b,y,p):E[y],r?+r(b,y,p):P[y]))}if(N)return c=null,N+""||null}function m(){return w3().defined(a).curve(o).context(s)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:It(+p),n=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:It(+p),h):t},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:It(+p),h):n},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:It(+p),r=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:It(+p),h):e},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:It(+p),h):r},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(r)},h.lineX1=function(){return m().x(n).y(e)},h.defined=function(p){return arguments.length?(a=typeof p=="function"?p:It(!!p),h):a},h.curve=function(p){return arguments.length?(o=p,s!=null&&(c=o(s)),h):o},h.context=function(p){return arguments.length?(p==null?s=c=null:c=o(s=p),h):s},h}class k3{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function FW(t){return new k3(t,!0)}function VW(t){return new k3(t,!1)}const Ej={draw(t,e){const r=Oa(e/yp);t.moveTo(r,0),t.arc(0,0,r,0,U0)}},UW={draw(t,e){const r=Oa(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},_3=Oa(1/3),BW=_3*2,qW={draw(t,e){const r=Oa(e/BW),n=r*_3;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},zW={draw(t,e){const r=Oa(e),n=-r/2;t.rect(n,n,r,r)}},WW=.8908130915292852,j3=gp(yp/10)/gp(7*yp/10),HW=gp(U0/10)*j3,GW=-g3(U0/10)*j3,KW={draw(t,e){const r=Oa(e*WW),n=HW*r,a=GW*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=U0*s/5,c=g3(o),d=gp(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},Ev=Oa(3),QW={draw(t,e){const r=-Oa(e/(Ev*3));t.moveTo(0,r*2),t.lineTo(-Ev*r,-r),t.lineTo(Ev*r,-r),t.closePath()}},Kn=-.5,Qn=Oa(3)/2,Jk=1/Oa(12),YW=(Jk/2+1)*3,XW={draw(t,e){const r=Oa(e/YW),n=r/2,a=r*Jk,s=n,o=r*Jk+r,c=-s,d=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(c,d),t.lineTo(Kn*n-Qn*a,Qn*n+Kn*a),t.lineTo(Kn*s-Qn*o,Qn*s+Kn*o),t.lineTo(Kn*c-Qn*d,Qn*c+Kn*d),t.lineTo(Kn*n+Qn*a,Kn*a-Qn*n),t.lineTo(Kn*s+Qn*o,Kn*o-Qn*s),t.lineTo(Kn*c+Qn*d,Kn*d-Qn*c),t.closePath()}};function JW(t,e){let r=null,n=Nj(a);t=typeof t=="function"?t:It(t||Ej),e=typeof e=="function"?e:It(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:It(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:It(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function xp(){}function vp(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function N3(t){this._context=t}N3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZW(t){return new N3(t)}function S3(t){this._context=t}S3.prototype={areaStart:xp,areaEnd:xp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eH(t){return new S3(t)}function E3(t){this._context=t}E3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:vp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tH(t){return new E3(t)}function T3(t){this._context=t}T3.prototype={areaStart:xp,areaEnd:xp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function rH(t){return new T3(t)}function P2(t){return t<0?-1:1}function I2(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(s*a+o*n)/(n+a);return(P2(s)+P2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(c))||0}function O2(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Tv(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,c=(s-n)/3;t._context.bezierCurveTo(n+c,a+c*e,s-c,o-c*r,s,o)}function bp(t){this._context=t}bp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tv(this,this._t0,O2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Tv(this,O2(this,r=I2(this,t,e)),r);break;default:Tv(this,this._t0,r=I2(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function A3(t){this._context=new C3(t)}(A3.prototype=Object.create(bp.prototype)).point=function(t,e){bp.prototype.point.call(this,e,t)};function C3(t){this._context=t}C3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function nH(t){return new bp(t)}function aH(t){return new A3(t)}function P3(t){this._context=t}P3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=R2(t),a=R2(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function R2(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function iH(t){return new P3(t)}function q0(t,e){this._context=t,this._t=e}q0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function sH(t){return new q0(t,.5)}function oH(t){return new q0(t,0)}function lH(t){return new q0(t,1)}function Nc(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,c=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<c;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Zk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function cH(t,e){return t[e]}function uH(t){const e=[];return e.key=t,e}function dH(){var t=It([]),e=Zk,r=Nc,n=cH;function a(s){var o=Array.from(t.apply(this,arguments),uH),c,d=o.length,h=-1,m;for(const p of s)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(p,o[c].key,h,s)]).data=p;for(c=0,m=Sj(e(o));c<d;++c)o[m[c]].index=c;return r(o,m),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:It(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:It(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?Zk:typeof s=="function"?s:It(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Nc,a):r},a}function hH(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Nc(t,e)}}function fH(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Nc(t,e)}}function mH(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var c=0,d=0,h=0;c<o;++c){for(var m=t[e[c]],p=m[n][1]||0,y=m[n-1][1]||0,v=(p-y)/2,w=0;w<c;++w){var k=t[e[w]],b=k[n][1]||0,j=k[n-1][1]||0;v+=b-j}d+=p,h+=v*p}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Nc(t,e)}}function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}var pH=["type","size","sizeType"];function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e_.apply(this,arguments)}function D2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(r),!0).forEach(function(n){gH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gH(t,e,r){return e=yH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yH(t){var e=xH(t,"string");return Bd(e)=="symbol"?e:e+""}function xH(t,e){if(Bd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vH(t,e){if(t==null)return{};var r=bH(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bH(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var I3={symbolCircle:Ej,symbolCross:UW,symbolDiamond:qW,symbolSquare:zW,symbolStar:KW,symbolTriangle:QW,symbolWye:XW},wH=Math.PI/180,kH=function(e){var r="symbol".concat(V0(e));return I3[r]||Ej},_H=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*wH;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jH=function(e,r){I3["symbol".concat(V0(e))]=r},Tj=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,s=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=vH(e,pH),h=M2(M2({},d),{},{type:n,size:s,sizeType:c}),m=function(){var b=kH(n),j=JW().type(b).size(_H(s,c,n));return j()},p=h.className,y=h.cx,v=h.cy,w=We(h,!0);return y===+y&&v===+v&&s===+s?Q.createElement("path",e_({},w,{className:nt("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(v,")"),d:m()})):null};Tj.registerSymbol=jH;function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t_.apply(this,arguments)}function L2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(r),!0).forEach(function(n){qd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R3(n.key),n)}}function TH(t,e,r){return e&&EH(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AH(t,e,r){return e=wp(e),CH(t,O3()?Reflect.construct(e,r||[],wp(t).constructor):e.apply(t,r))}function CH(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PH(t)}function PH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O3=function(){return!!t})()}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wp(t)}function IH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r_(t,e)}function r_(t,e){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},r_(t,e)}function qd(t,e,r){return e=R3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R3(t){var e=OH(t,"string");return Sc(e)=="symbol"?e:e+""}function OH(t,e){if(Sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yn=32,Aj=(function(t){function e(){return SH(this,e),AH(this,e,arguments)}return IH(e,t),TH(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=Yn/2,o=Yn/6,c=Yn/3,d=n.inactive?a:n.color;if(n.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Yn,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(s,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(s,`
            H`).concat(Yn,"M").concat(2*c,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return Q.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Yn/8,"h").concat(Yn,"v").concat(Yn*3/4,"h").concat(-Yn,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(n.legendIcon)){var h=NH({},n);return delete h.legendIcon,Q.cloneElement(n.legendIcon,h)}return Q.createElement(Tj,{fill:d,cx:s,cy:s,size:Yn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,m={x:0,y:0,width:Yn,height:Yn},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(v,w){var k=v.formatter||d,b=nt(qd(qd({"recharts-legend-item":!0},"legend-item-".concat(w),!0),"inactive",v.inactive));if(v.type==="none")return null;var j=Ge(v.value)?null:v.value;Sa(!Ge(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=v.inactive?h:v.color;return Q.createElement("li",t_({className:b,style:p,key:"legend-item-".concat(w)},Ko(n.props,v,w)),Q.createElement(Kk,{width:o,height:o,viewBox:m,style:y},n.renderIcon(v)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},k?k(j,v,w):j))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(V.PureComponent);qd(Aj,"displayName","Legend");qd(Aj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Av,$2;function RH(){if($2)return Av;$2=1;var t=L0();function e(){this.__data__=new t,this.size=0}return Av=e,Av}var Cv,F2;function DH(){if(F2)return Cv;F2=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Cv=t,Cv}var Pv,V2;function MH(){if(V2)return Pv;V2=1;function t(e){return this.__data__.get(e)}return Pv=t,Pv}var Iv,U2;function LH(){if(U2)return Iv;U2=1;function t(e){return this.__data__.has(e)}return Iv=t,Iv}var Ov,B2;function $H(){if(B2)return Ov;B2=1;var t=L0(),e=vj(),r=bj(),n=200;function a(s,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([s,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(s,o),this.size=c.size,this}return Ov=a,Ov}var Rv,q2;function D3(){if(q2)return Rv;q2=1;var t=L0(),e=RH(),r=DH(),n=MH(),a=LH(),s=$H();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=s,Rv=o,Rv}var Dv,z2;function FH(){if(z2)return Dv;z2=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Dv=e,Dv}var Mv,W2;function VH(){if(W2)return Mv;W2=1;function t(e){return this.__data__.has(e)}return Mv=t,Mv}var Lv,H2;function M3(){if(H2)return Lv;H2=1;var t=bj(),e=FH(),r=VH();function n(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new t;++s<o;)this.add(a[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,Lv=n,Lv}var $v,G2;function L3(){if(G2)return $v;G2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return $v=t,$v}var Fv,K2;function $3(){if(K2)return Fv;K2=1;function t(e,r){return e.has(r)}return Fv=t,Fv}var Vv,Q2;function F3(){if(Q2)return Vv;Q2=1;var t=M3(),e=L3(),r=$3(),n=1,a=2;function s(o,c,d,h,m,p){var y=d&n,v=o.length,w=c.length;if(v!=w&&!(y&&w>v))return!1;var k=p.get(o),b=p.get(c);if(k&&b)return k==c&&b==o;var j=-1,N=!0,E=d&a?new t:void 0;for(p.set(o,c),p.set(c,o);++j<v;){var P=o[j],S=c[j];if(h)var T=y?h(S,P,j,c,o,p):h(P,S,j,o,c,p);if(T!==void 0){if(T)continue;N=!1;break}if(E){if(!e(c,function(A,R){if(!r(E,R)&&(P===A||m(P,A,d,h,p)))return E.push(R)})){N=!1;break}}else if(!(P===S||m(P,S,d,h,p))){N=!1;break}}return p.delete(o),p.delete(c),N}return Vv=s,Vv}var Uv,Y2;function UH(){if(Y2)return Uv;Y2=1;var t=li(),e=t.Uint8Array;return Uv=e,Uv}var Bv,X2;function BH(){if(X2)return Bv;X2=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,s){n[++r]=[s,a]}),n}return Bv=t,Bv}var qv,J2;function Cj(){if(J2)return qv;J2=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return qv=t,qv}var zv,Z2;function qH(){if(Z2)return zv;Z2=1;var t=Bh(),e=UH(),r=xj(),n=F3(),a=BH(),s=Cj(),o=1,c=2,d="[object Boolean]",h="[object Date]",m="[object Error]",p="[object Map]",y="[object Number]",v="[object RegExp]",w="[object Set]",k="[object String]",b="[object Symbol]",j="[object ArrayBuffer]",N="[object DataView]",E=t?t.prototype:void 0,P=E?E.valueOf:void 0;function S(T,A,R,M,D,C,F){switch(R){case N:if(T.byteLength!=A.byteLength||T.byteOffset!=A.byteOffset)return!1;T=T.buffer,A=A.buffer;case j:return!(T.byteLength!=A.byteLength||!C(new e(T),new e(A)));case d:case h:case y:return r(+T,+A);case m:return T.name==A.name&&T.message==A.message;case v:case k:return T==A+"";case p:var L=a;case w:var Y=M&o;if(L||(L=s),T.size!=A.size&&!Y)return!1;var ne=F.get(T);if(ne)return ne==A;M|=c,F.set(T,A);var W=n(L(T),L(A),M,D,C,F);return F.delete(T),W;case b:if(P)return P.call(T)==P.call(A)}return!1}return zv=S,zv}var Wv,eC;function V3(){if(eC)return Wv;eC=1;function t(e,r){for(var n=-1,a=r.length,s=e.length;++n<a;)e[s+n]=r[n];return e}return Wv=t,Wv}var Hv,tC;function zH(){if(tC)return Hv;tC=1;var t=V3(),e=wn();function r(n,a,s){var o=a(n);return e(n)?o:t(o,s(n))}return Hv=r,Hv}var Gv,rC;function WH(){if(rC)return Gv;rC=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,s=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[s++]=c)}return o}return Gv=t,Gv}var Kv,nC;function HH(){if(nC)return Kv;nC=1;function t(){return[]}return Kv=t,Kv}var Qv,aC;function GH(){if(aC)return Qv;aC=1;var t=WH(),e=HH(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return Qv=s,Qv}var Yv,iC;function KH(){if(iC)return Yv;iC=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Yv=t,Yv}var Xv,sC;function QH(){if(sC)return Xv;sC=1;var t=Hi(),e=Gi(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return Xv=n,Xv}var Jv,oC;function Pj(){if(oC)return Jv;oC=1;var t=QH(),e=Gi(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return Jv=s,Jv}var cd={exports:{}},Zv,lC;function YH(){if(lC)return Zv;lC=1;function t(){return!1}return Zv=t,Zv}cd.exports;var cC;function U3(){return cC||(cC=1,(function(t,e){var r=li(),n=YH(),a=e&&!e.nodeType&&e,s=a&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(cd,cd.exports)),cd.exports}var eb,uC;function Ij(){if(uC)return eb;uC=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var s=typeof n;return a=a??t,!!a&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return eb=r,eb}var tb,dC;function Oj(){if(dC)return tb;dC=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return tb=e,tb}var rb,hC;function XH(){if(hC)return rb;hC=1;var t=Hi(),e=Oj(),r=Gi(),n="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",m="[object Number]",p="[object Object]",y="[object RegExp]",v="[object Set]",w="[object String]",k="[object WeakMap]",b="[object ArrayBuffer]",j="[object DataView]",N="[object Float32Array]",E="[object Float64Array]",P="[object Int8Array]",S="[object Int16Array]",T="[object Int32Array]",A="[object Uint8Array]",R="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",C={};C[N]=C[E]=C[P]=C[S]=C[T]=C[A]=C[R]=C[M]=C[D]=!0,C[n]=C[a]=C[b]=C[s]=C[j]=C[o]=C[c]=C[d]=C[h]=C[m]=C[p]=C[y]=C[v]=C[w]=C[k]=!1;function F(L){return r(L)&&e(L.length)&&!!C[t(L)]}return rb=F,rb}var nb,fC;function B3(){if(fC)return nb;fC=1;function t(e){return function(r){return e(r)}}return nb=t,nb}var ud={exports:{}};ud.exports;var mC;function JH(){return mC||(mC=1,(function(t,e){var r=l3(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===n,o=s&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(ud,ud.exports)),ud.exports}var ab,pC;function q3(){if(pC)return ab;pC=1;var t=XH(),e=B3(),r=JH(),n=r&&r.isTypedArray,a=n?e(n):t;return ab=a,ab}var ib,gC;function ZH(){if(gC)return ib;gC=1;var t=KH(),e=Pj(),r=wn(),n=U3(),a=Ij(),s=q3(),o=Object.prototype,c=o.hasOwnProperty;function d(h,m){var p=r(h),y=!p&&e(h),v=!p&&!y&&n(h),w=!p&&!y&&!v&&s(h),k=p||y||v||w,b=k?t(h.length,String):[],j=b.length;for(var N in h)(m||c.call(h,N))&&!(k&&(N=="length"||v&&(N=="offset"||N=="parent")||w&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||a(N,j)))&&b.push(N);return b}return ib=d,ib}var sb,yC;function eG(){if(yC)return sb;yC=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return sb=e,sb}var ob,xC;function z3(){if(xC)return ob;xC=1;function t(e,r){return function(n){return e(r(n))}}return ob=t,ob}var lb,vC;function tG(){if(vC)return lb;vC=1;var t=z3(),e=t(Object.keys,Object);return lb=e,lb}var cb,bC;function rG(){if(bC)return cb;bC=1;var t=eG(),e=tG(),r=Object.prototype,n=r.hasOwnProperty;function a(s){if(!t(s))return e(s);var o=[];for(var c in Object(s))n.call(s,c)&&c!="constructor"&&o.push(c);return o}return cb=a,cb}var ub,wC;function Wh(){if(wC)return ub;wC=1;var t=yj(),e=Oj();function r(n){return n!=null&&e(n.length)&&!t(n)}return ub=r,ub}var db,kC;function z0(){if(kC)return db;kC=1;var t=ZH(),e=rG(),r=Wh();function n(a){return r(a)?t(a):e(a)}return db=n,db}var hb,_C;function nG(){if(_C)return hb;_C=1;var t=zH(),e=GH(),r=z0();function n(a){return t(a,r,e)}return hb=n,hb}var fb,jC;function aG(){if(jC)return fb;jC=1;var t=nG(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(s,o,c,d,h,m){var p=c&e,y=t(s),v=y.length,w=t(o),k=w.length;if(v!=k&&!p)return!1;for(var b=v;b--;){var j=y[b];if(!(p?j in o:n.call(o,j)))return!1}var N=m.get(s),E=m.get(o);if(N&&E)return N==o&&E==s;var P=!0;m.set(s,o),m.set(o,s);for(var S=p;++b<v;){j=y[b];var T=s[j],A=o[j];if(d)var R=p?d(A,T,j,o,s,m):d(T,A,j,s,o,m);if(!(R===void 0?T===A||h(T,A,c,d,m):R)){P=!1;break}S||(S=j=="constructor")}if(P&&!S){var M=s.constructor,D=o.constructor;M!=D&&"constructor"in s&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(P=!1)}return m.delete(s),m.delete(o),P}return fb=a,fb}var mb,NC;function iG(){if(NC)return mb;NC=1;var t=al(),e=li(),r=t(e,"DataView");return mb=r,mb}var pb,SC;function sG(){if(SC)return pb;SC=1;var t=al(),e=li(),r=t(e,"Promise");return pb=r,pb}var gb,EC;function W3(){if(EC)return gb;EC=1;var t=al(),e=li(),r=t(e,"Set");return gb=r,gb}var yb,TC;function oG(){if(TC)return yb;TC=1;var t=al(),e=li(),r=t(e,"WeakMap");return yb=r,yb}var xb,AC;function lG(){if(AC)return xb;AC=1;var t=iG(),e=vj(),r=sG(),n=W3(),a=oG(),s=Hi(),o=c3(),c="[object Map]",d="[object Object]",h="[object Promise]",m="[object Set]",p="[object WeakMap]",y="[object DataView]",v=o(t),w=o(e),k=o(r),b=o(n),j=o(a),N=s;return(t&&N(new t(new ArrayBuffer(1)))!=y||e&&N(new e)!=c||r&&N(r.resolve())!=h||n&&N(new n)!=m||a&&N(new a)!=p)&&(N=function(E){var P=s(E),S=P==d?E.constructor:void 0,T=S?o(S):"";if(T)switch(T){case v:return y;case w:return c;case k:return h;case b:return m;case j:return p}return P}),xb=N,xb}var vb,CC;function cG(){if(CC)return vb;CC=1;var t=D3(),e=F3(),r=qH(),n=aG(),a=lG(),s=wn(),o=U3(),c=q3(),d=1,h="[object Arguments]",m="[object Array]",p="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function w(k,b,j,N,E,P){var S=s(k),T=s(b),A=S?m:a(k),R=T?m:a(b);A=A==h?p:A,R=R==h?p:R;var M=A==p,D=R==p,C=A==R;if(C&&o(k)){if(!o(b))return!1;S=!0,M=!1}if(C&&!M)return P||(P=new t),S||c(k)?e(k,b,j,N,E,P):r(k,b,A,j,N,E,P);if(!(j&d)){var F=M&&v.call(k,"__wrapped__"),L=D&&v.call(b,"__wrapped__");if(F||L){var Y=F?k.value():k,ne=L?b.value():b;return P||(P=new t),E(Y,ne,j,N,P)}}return C?(P||(P=new t),n(k,b,j,N,E,P)):!1}return vb=w,vb}var bb,PC;function Rj(){if(PC)return bb;PC=1;var t=cG(),e=Gi();function r(n,a,s,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,s,o,r,c)}return bb=r,bb}var wb,IC;function uG(){if(IC)return wb;IC=1;var t=D3(),e=Rj(),r=1,n=2;function a(s,o,c,d){var h=c.length,m=h,p=!d;if(s==null)return!m;for(s=Object(s);h--;){var y=c[h];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++h<m;){y=c[h];var v=y[0],w=s[v],k=y[1];if(p&&y[2]){if(w===void 0&&!(v in s))return!1}else{var b=new t;if(d)var j=d(w,k,v,s,o,b);if(!(j===void 0?e(k,w,r|n,d,b):j))return!1}}return!0}return wb=a,wb}var kb,OC;function H3(){if(OC)return kb;OC=1;var t=Ws();function e(r){return r===r&&!t(r)}return kb=e,kb}var _b,RC;function dG(){if(RC)return _b;RC=1;var t=H3(),e=z0();function r(n){for(var a=e(n),s=a.length;s--;){var o=a[s],c=n[o];a[s]=[o,c,t(c)]}return a}return _b=r,_b}var jb,DC;function G3(){if(DC)return jb;DC=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return jb=t,jb}var Nb,MC;function hG(){if(MC)return Nb;MC=1;var t=uG(),e=dG(),r=G3();function n(a){var s=e(a);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===a||t(o,a,s)}}return Nb=n,Nb}var Sb,LC;function fG(){if(LC)return Sb;LC=1;function t(e,r){return e!=null&&r in Object(e)}return Sb=t,Sb}var Eb,$C;function mG(){if($C)return Eb;$C=1;var t=h3(),e=Pj(),r=wn(),n=Ij(),a=Oj(),s=F0();function o(c,d,h){d=t(d,c);for(var m=-1,p=d.length,y=!1;++m<p;){var v=s(d[m]);if(!(y=c!=null&&h(c,v)))break;c=c[v]}return y||++m!=p?y:(p=c==null?0:c.length,!!p&&a(p)&&n(v,p)&&(r(c)||e(c)))}return Eb=o,Eb}var Tb,FC;function pG(){if(FC)return Tb;FC=1;var t=fG(),e=mG();function r(n,a){return n!=null&&e(n,a,t)}return Tb=r,Tb}var Ab,VC;function gG(){if(VC)return Ab;VC=1;var t=Rj(),e=f3(),r=pG(),n=gj(),a=H3(),s=G3(),o=F0(),c=1,d=2;function h(m,p){return n(m)&&a(p)?s(o(m),p):function(y){var v=e(y,m);return v===void 0&&v===p?r(y,m):t(p,v,c|d)}}return Ab=h,Ab}var Cb,UC;function tu(){if(UC)return Cb;UC=1;function t(e){return e}return Cb=t,Cb}var Pb,BC;function yG(){if(BC)return Pb;BC=1;function t(e){return function(r){return r?.[e]}}return Pb=t,Pb}var Ib,qC;function xG(){if(qC)return Ib;qC=1;var t=kj();function e(r){return function(n){return t(n,r)}}return Ib=e,Ib}var Ob,zC;function vG(){if(zC)return Ob;zC=1;var t=yG(),e=xG(),r=gj(),n=F0();function a(s){return r(s)?t(n(s)):e(s)}return Ob=a,Ob}var Rb,WC;function ci(){if(WC)return Rb;WC=1;var t=hG(),e=gG(),r=tu(),n=wn(),a=vG();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Rb=s,Rb}var Db,HC;function K3(){if(HC)return Db;HC=1;function t(e,r,n,a){for(var s=e.length,o=n+(a?1:-1);a?o--:++o<s;)if(r(e[o],o,e))return o;return-1}return Db=t,Db}var Mb,GC;function bG(){if(GC)return Mb;GC=1;function t(e){return e!==e}return Mb=t,Mb}var Lb,KC;function wG(){if(KC)return Lb;KC=1;function t(e,r,n){for(var a=n-1,s=e.length;++a<s;)if(e[a]===r)return a;return-1}return Lb=t,Lb}var $b,QC;function kG(){if(QC)return $b;QC=1;var t=K3(),e=bG(),r=wG();function n(a,s,o){return s===s?r(a,s,o):t(a,e,o)}return $b=n,$b}var Fb,YC;function _G(){if(YC)return Fb;YC=1;var t=kG();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return Fb=e,Fb}var Vb,XC;function jG(){if(XC)return Vb;XC=1;function t(e,r,n){for(var a=-1,s=e==null?0:e.length;++a<s;)if(n(r,e[a]))return!0;return!1}return Vb=t,Vb}var Ub,JC;function NG(){if(JC)return Ub;JC=1;function t(){}return Ub=t,Ub}var Bb,ZC;function SG(){if(ZC)return Bb;ZC=1;var t=W3(),e=NG(),r=Cj(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(s){return new t(s)}:e;return Bb=a,Bb}var qb,eP;function EG(){if(eP)return qb;eP=1;var t=M3(),e=_G(),r=jG(),n=$3(),a=SG(),s=Cj(),o=200;function c(d,h,m){var p=-1,y=e,v=d.length,w=!0,k=[],b=k;if(m)w=!1,y=r;else if(v>=o){var j=h?null:a(d);if(j)return s(j);w=!1,y=n,b=new t}else b=h?[]:k;e:for(;++p<v;){var N=d[p],E=h?h(N):N;if(N=m||N!==0?N:0,w&&E===E){for(var P=b.length;P--;)if(b[P]===E)continue e;h&&b.push(E),k.push(N)}else y(b,E,m)||(b!==k&&b.push(E),k.push(N))}return k}return qb=c,qb}var zb,tP;function TG(){if(tP)return zb;tP=1;var t=ci(),e=EG();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return zb=r,zb}var AG=TG();const rP=vt(AG);function Q3(t,e,r){return e===!0?rP(t,r):Ge(e)?rP(t,e):t}function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}var CG=["ref"];function nP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ji(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nP(Object(r),!0).forEach(function(n){W0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X3(n.key),n)}}function IG(t,e,r){return e&&aP(t.prototype,e),r&&aP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OG(t,e,r){return e=kp(e),RG(t,Y3()?Reflect.construct(e,r||[],kp(t).constructor):e.apply(t,r))}function RG(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DG(t)}function DG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y3=function(){return!!t})()}function kp(t){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kp(t)}function MG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n_(t,e)}function n_(t,e){return n_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},n_(t,e)}function W0(t,e,r){return e=X3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X3(t){var e=LG(t,"string");return Ec(e)=="symbol"?e:e+""}function LG(t,e){if(Ec(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $G(t,e){if(t==null)return{};var r=FG(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function VG(t){return t.value}function UG(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var r=$G(e,CG);return Q.createElement(Aj,r)}var iP=1,Lo=(function(t){function e(){var r;PG(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=OG(this,e,[].concat(a)),W0(r,"lastBoundingBox",{width:-1,height:-1}),r}return MG(e,t),IG(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>iP||Math.abs(a.height-this.lastBoundingBox.height)>iP)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ji({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,m=a.chartHeight,p,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var v=this.getBBoxSnapshot();p={left:((h||0)-v.width)/2}}else p=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var w=this.getBBoxSnapshot();y={top:((m||0)-w.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return ji(ji({},p),y)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,m=a.payload,p=ji(ji({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return Q.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(v){n.wrapperNode=v}},UG(s,ji(ji({},this.props),{},{payload:Q3(m,h,VG)})))}}],[{key:"getWithHeight",value:function(n,a){var s=ji(ji({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&Se(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(V.PureComponent);W0(Lo,"displayName","Legend");W0(Lo,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Wb,sP;function BG(){if(sP)return Wb;sP=1;var t=Bh(),e=Pj(),r=wn(),n=t?t.isConcatSpreadable:void 0;function a(s){return r(s)||e(s)||!!(n&&s&&s[n])}return Wb=a,Wb}var Hb,oP;function J3(){if(oP)return Hb;oP=1;var t=V3(),e=BG();function r(n,a,s,o,c){var d=-1,h=n.length;for(s||(s=e),c||(c=[]);++d<h;){var m=n[d];a>0&&s(m)?a>1?r(m,a-1,s,o,c):t(c,m):o||(c[c.length]=m)}return c}return Hb=r,Hb}var Gb,lP;function qG(){if(lP)return Gb;lP=1;function t(e){return function(r,n,a){for(var s=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++s];if(n(o[h],h,o)===!1)break}return r}}return Gb=t,Gb}var Kb,cP;function zG(){if(cP)return Kb;cP=1;var t=qG(),e=t();return Kb=e,Kb}var Qb,uP;function Z3(){if(uP)return Qb;uP=1;var t=zG(),e=z0();function r(n,a){return n&&t(n,a,e)}return Qb=r,Qb}var Yb,dP;function WG(){if(dP)return Yb;dP=1;var t=Wh();function e(r,n){return function(a,s){if(a==null)return a;if(!t(a))return r(a,s);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&s(d[c],c,d)!==!1;);return a}}return Yb=e,Yb}var Xb,hP;function Dj(){if(hP)return Xb;hP=1;var t=Z3(),e=WG(),r=e(t);return Xb=r,Xb}var Jb,fP;function e6(){if(fP)return Jb;fP=1;var t=Dj(),e=Wh();function r(n,a){var s=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++s]=a(c,d,h)}),o}return Jb=r,Jb}var Zb,mP;function HG(){if(mP)return Zb;mP=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return Zb=t,Zb}var ew,pP;function GG(){if(pP)return ew;pP=1;var t=Zc();function e(r,n){if(r!==n){var a=r!==void 0,s=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,m=n===n,p=t(n);if(!h&&!p&&!c&&r>n||c&&d&&m&&!h&&!p||s&&d&&m||!a&&m||!o)return 1;if(!s&&!c&&!p&&r<n||p&&a&&o&&!s&&!c||h&&a&&o||!d&&o||!m)return-1}return 0}return ew=e,ew}var tw,gP;function KG(){if(gP)return tw;gP=1;var t=GG();function e(r,n,a){for(var s=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++s<d;){var m=t(o[s],c[s]);if(m){if(s>=h)return m;var p=a[s];return m*(p=="desc"?-1:1)}}return r.index-n.index}return tw=e,tw}var rw,yP;function QG(){if(yP)return rw;yP=1;var t=wj(),e=kj(),r=ci(),n=e6(),a=HG(),s=B3(),o=KG(),c=tu(),d=wn();function h(m,p,y){p.length?p=t(p,function(k){return d(k)?function(b){return e(b,k.length===1?k[0]:k)}:k}):p=[c];var v=-1;p=t(p,s(r));var w=n(m,function(k,b,j){var N=t(p,function(E){return E(k)});return{criteria:N,index:++v,value:k}});return a(w,function(k,b){return o(k,b,y)})}return rw=h,rw}var nw,xP;function YG(){if(xP)return nw;xP=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return nw=t,nw}var aw,vP;function XG(){if(vP)return aw;vP=1;var t=YG(),e=Math.max;function r(n,a,s){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var m=Array(a+1);++c<a;)m[c]=o[c];return m[a]=s(h),t(n,this,m)}}return aw=r,aw}var iw,bP;function JG(){if(bP)return iw;bP=1;function t(e){return function(){return e}}return iw=t,iw}var sw,wP;function t6(){if(wP)return sw;wP=1;var t=al(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return sw=e,sw}var ow,kP;function ZG(){if(kP)return ow;kP=1;var t=JG(),e=t6(),r=tu(),n=e?function(a,s){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:r;return ow=n,ow}var lw,_P;function eK(){if(_P)return lw;_P=1;var t=800,e=16,r=Date.now;function n(a){var s=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++s>=t)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return lw=n,lw}var cw,jP;function tK(){if(jP)return cw;jP=1;var t=ZG(),e=eK(),r=e(t);return cw=r,cw}var uw,NP;function rK(){if(NP)return uw;NP=1;var t=tu(),e=XG(),r=tK();function n(a,s){return r(e(a,s,t),a+"")}return uw=n,uw}var dw,SP;function H0(){if(SP)return dw;SP=1;var t=xj(),e=Wh(),r=Ij(),n=Ws();function a(s,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],s):!1}return dw=a,dw}var hw,EP;function nK(){if(EP)return hw;EP=1;var t=J3(),e=QG(),r=rK(),n=H0(),a=r(function(s,o){if(s==null)return[];var c=o.length;return c>1&&n(s,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return hw=a,hw}var aK=nK();const Mj=vt(aK);function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}function a_(){return a_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a_.apply(this,arguments)}function iK(t,e){return cK(t)||lK(t,e)||oK(t,e)||sK()}function sK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oK(t,e){if(t){if(typeof t=="string")return TP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TP(t,e)}}function TP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function cK(t){if(Array.isArray(t))return t}function AP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(r),!0).forEach(function(n){uK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uK(t,e,r){return e=dK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dK(t){var e=hK(t,"string");return zd(e)=="symbol"?e:e+""}function hK(t,e){if(zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fK(t){return Array.isArray(t)&&gr(t[0])&&gr(t[1])?t.join(" ~ "):t}var mK=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,s=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,m=e.payload,p=e.formatter,y=e.itemSorter,v=e.wrapperClassName,w=e.labelClassName,k=e.label,b=e.labelFormatter,j=e.accessibilityLayer,N=j===void 0?!1:j,E=function(){if(m&&m.length){var F={padding:0,margin:0},L=(y?Mj(m,y):m).map(function(Y,ne){if(Y.type==="none")return null;var W=fw({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},c),G=Y.formatter||p||fK,X=Y.value,ee=Y.name,re=X,z=ee;if(G&&re!=null&&z!=null){var Z=G(X,ee,Y,ne,m);if(Array.isArray(Z)){var J=iK(Z,2);re=J[0],z=J[1]}else re=Z}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ne),style:W},gr(z)?Q.createElement("span",{className:"recharts-tooltip-item-name"},z):null,gr(z)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},re),Q.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:F},L)}return null},P=fw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),S=fw({margin:0},h),T=!it(k),A=T?k:"",R=nt("recharts-default-tooltip",v),M=nt("recharts-tooltip-label",w);T&&b&&m!==void 0&&m!==null&&(A=b(k,m));var D=N?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",a_({className:R,style:P},D),Q.createElement("p",{className:M,style:S},Q.isValidElement(A)?A:"".concat(A)),E())};function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function jm(t,e,r){return e=pK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pK(t){var e=gK(t,"string");return Wd(e)=="symbol"?e:e+""}function gK(t,e){if(Wd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ku="recharts-tooltip-wrapper",yK={visibility:"hidden"};function xK(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return nt(Ku,jm(jm(jm(jm({},"".concat(Ku,"-right"),Se(r)&&e&&Se(e.x)&&r>=e.x),"".concat(Ku,"-left"),Se(r)&&e&&Se(e.x)&&r<e.x),"".concat(Ku,"-bottom"),Se(n)&&e&&Se(e.y)&&n>=e.y),"".concat(Ku,"-top"),Se(n)&&e&&Se(e.y)&&n<e.y))}function CP(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(s&&Se(s[n]))return s[n];var m=r[n]-c-a,p=r[n]+a;if(e[n])return o[n]?m:p;if(o[n]){var y=m,v=d[n];return y<v?Math.max(p,d[n]):Math.max(m,d[n])}var w=p+c,k=d[n]+h;return w>k?Math.max(m,d[n]):Math.max(p,d[n])}function vK(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function bK(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,m,p;return o.height>0&&o.width>0&&r?(m=CP({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),p=CP({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=vK({translateX:m,translateY:p,useTranslate3d:c})):h=yK,{cssProperties:h,cssClasses:xK({translateX:m,translateY:p,coordinate:r})}}function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function PP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function IP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(r),!0).forEach(function(n){s_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n6(n.key),n)}}function _K(t,e,r){return e&&kK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jK(t,e,r){return e=_p(e),NK(t,r6()?Reflect.construct(e,r||[],_p(t).constructor):e.apply(t,r))}function NK(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SK(t)}function SK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r6=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(t)}function EK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i_(t,e)}function i_(t,e){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},i_(t,e)}function s_(t,e,r){return e=n6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n6(t){var e=TK(t,"string");return Tc(e)=="symbol"?e:e+""}function TK(t,e){if(Tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var OP=1,AK=(function(t){function e(){var r;wK(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=jK(this,e,[].concat(a)),s_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),s_(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&h!==void 0?h:0}})}}),r}return EK(e,t),_K(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>OP||Math.abs(n.height-this.state.lastBoundingBox.height)>OP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,m=a.coordinate,p=a.hasPayload,y=a.isAnimationActive,v=a.offset,w=a.position,k=a.reverseDirection,b=a.useTranslate3d,j=a.viewBox,N=a.wrapperStyle,E=bK({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:v,position:w,reverseDirection:k,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:j}),P=E.cssClasses,S=E.cssProperties,T=IP(IP({transition:y&&s?"transform ".concat(c,"ms ").concat(d):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},N);return Q.createElement("div",{tabIndex:-1,className:P,style:T,ref:function(R){n.wrapperNode=R}},h)}}])})(V.PureComponent),CK=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ru={isSsr:CK()};function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function RP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function DP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(r),!0).forEach(function(n){Lj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i6(n.key),n)}}function OK(t,e,r){return e&&IK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RK(t,e,r){return e=jp(e),DK(t,a6()?Reflect.construct(e,r||[],jp(t).constructor):e.apply(t,r))}function DK(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MK(t)}function MK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a6=function(){return!!t})()}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jp(t)}function LK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o_(t,e)}function o_(t,e){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o_(t,e)}function Lj(t,e,r){return e=i6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i6(t){var e=$K(t,"string");return Ac(e)=="symbol"?e:e+""}function $K(t,e){if(Ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FK(t){return t.dataKey}function VK(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(mK,e)}var wa=(function(t){function e(){return PK(this,e),RK(this,e,arguments)}return LK(e,t),OK(e,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,m=a.coordinate,p=a.filterNull,y=a.isAnimationActive,v=a.offset,w=a.payload,k=a.payloadUniqBy,b=a.position,j=a.reverseDirection,N=a.useTranslate3d,E=a.viewBox,P=a.wrapperStyle,S=w??[];p&&S.length&&(S=Q3(w.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),k,FK));var T=S.length>0;return Q.createElement(AK,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:y,active:s,coordinate:m,hasPayload:T,offset:v,position:b,reverseDirection:j,useTranslate3d:N,viewBox:E,wrapperStyle:P},VK(h,DP(DP({},this.props),{},{payload:S})))}}])})(V.PureComponent);Lj(wa,"displayName","Tooltip");Lj(wa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ru.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var mw,MP;function UK(){if(MP)return mw;MP=1;var t=li(),e=function(){return t.Date.now()};return mw=e,mw}var pw,LP;function BK(){if(LP)return pw;LP=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return pw=e,pw}var gw,$P;function qK(){if($P)return gw;$P=1;var t=BK(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return gw=r,gw}var yw,FP;function s6(){if(FP)return yw;FP=1;var t=qK(),e=Ws(),r=Zc(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=t(h);var p=s.test(h);return p||o.test(h)?c(h.slice(2),p?2:8):a.test(h)?n:+h}return yw=d,yw}var xw,VP;function zK(){if(VP)return xw;VP=1;var t=Ws(),e=UK(),r=s6(),n="Expected a function",a=Math.max,s=Math.min;function o(c,d,h){var m,p,y,v,w,k,b=0,j=!1,N=!1,E=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(j=!!h.leading,N="maxWait"in h,y=N?a(r(h.maxWait)||0,d):y,E="trailing"in h?!!h.trailing:E);function P(L){var Y=m,ne=p;return m=p=void 0,b=L,v=c.apply(ne,Y),v}function S(L){return b=L,w=setTimeout(R,d),j?P(L):v}function T(L){var Y=L-k,ne=L-b,W=d-Y;return N?s(W,y-ne):W}function A(L){var Y=L-k,ne=L-b;return k===void 0||Y>=d||Y<0||N&&ne>=y}function R(){var L=e();if(A(L))return M(L);w=setTimeout(R,T(L))}function M(L){return w=void 0,E&&m?P(L):(m=p=void 0,v)}function D(){w!==void 0&&clearTimeout(w),b=0,m=k=p=w=void 0}function C(){return w===void 0?v:M(e())}function F(){var L=e(),Y=A(L);if(m=arguments,p=this,k=L,Y){if(w===void 0)return S(k);if(N)return clearTimeout(w),w=setTimeout(R,d),P(k)}return w===void 0&&(w=setTimeout(R,d)),v}return F.cancel=D,F.flush=C,F}return xw=o,xw}var vw,UP;function WK(){if(UP)return vw;UP=1;var t=zK(),e=Ws(),r="Expected a function";function n(a,s,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,s,{leading:c,maxWait:s,trailing:d})}return vw=n,vw}var HK=WK();const o6=vt(HK);function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}function BP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(r),!0).forEach(function(n){GK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GK(t,e,r){return e=KK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=QK(t,"string");return Hd(e)=="symbol"?e:e+""}function QK(t,e){if(Hd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YK(t,e){return eQ(t)||ZK(t,e)||JK(t,e)||XK()}function XK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(t,e){if(t){if(typeof t=="string")return qP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qP(t,e)}}function qP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function eQ(t){if(Array.isArray(t))return t}var l6=V.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,m=h===void 0?0:h,p=t.minHeight,y=t.maxHeight,v=t.children,w=t.debounce,k=w===void 0?0:w,b=t.id,j=t.className,N=t.onResize,E=t.style,P=E===void 0?{}:E,S=V.useRef(null),T=V.useRef();T.current=N,V.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var A=V.useState({containerWidth:a.width,containerHeight:a.height}),R=YK(A,2),M=R[0],D=R[1],C=V.useCallback(function(L,Y){D(function(ne){var W=Math.round(L),G=Math.round(Y);return ne.containerWidth===W&&ne.containerHeight===G?ne:{containerWidth:W,containerHeight:G}})},[]);V.useEffect(function(){var L=function(ee){var re,z=ee[0].contentRect,Z=z.width,J=z.height;C(Z,J),(re=T.current)===null||re===void 0||re.call(T,Z,J)};k>0&&(L=o6(L,k,{trailing:!0,leading:!1}));var Y=new ResizeObserver(L),ne=S.current.getBoundingClientRect(),W=ne.width,G=ne.height;return C(W,G),Y.observe(S.current),function(){Y.disconnect()}},[C,k]);var F=V.useMemo(function(){var L=M.containerWidth,Y=M.containerHeight;if(L<0||Y<0)return null;Sa(Co(o)||Co(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Sa(!r||r>0,"The aspect(%s) must be greater than zero.",r);var ne=Co(o)?L:o,W=Co(d)?Y:d;r&&r>0&&(ne?W=ne/r:W&&(ne=W*r),y&&W>y&&(W=y)),Sa(ne>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ne,W,o,d,m,p,r);var G=!Array.isArray(v)&&Di(v.type).endsWith("Chart");return Q.Children.map(v,function(X){return Q.isValidElement(X)?V.cloneElement(X,Nm({width:ne,height:W},G?{style:Nm({height:"100%",width:"100%",maxHeight:W,maxWidth:ne},X.props.style)}:{})):X})},[r,v,d,y,p,m,M,o]);return Q.createElement("div",{id:b?"".concat(b):void 0,className:nt("recharts-responsive-container",j),style:Nm(Nm({},P),{},{width:o,height:d,minWidth:m,minHeight:p,maxHeight:y}),ref:S},F)}),G0=function(e){return null};G0.displayName="Cell";function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function zP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function l_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(r),!0).forEach(function(n){tQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tQ(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=nQ(t,"string");return Gd(e)=="symbol"?e:e+""}function nQ(t,e){if(Gd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ql={widthCache:{},cacheCount:0},aQ=2e3,iQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WP="recharts_measurement_span";function sQ(t){var e=l_({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var bd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ru.isSsr)return{width:0,height:0};var n=sQ(r),a=JSON.stringify({text:e,copyStyle:n});if(Ql.widthCache[a])return Ql.widthCache[a];try{var s=document.getElementById(WP);s||(s=document.createElement("span"),s.setAttribute("id",WP),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=l_(l_({},iQ),n);Object.assign(s.style,o),s.textContent="".concat(e);var c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return Ql.widthCache[a]=d,++Ql.cacheCount>aQ&&(Ql.cacheCount=0,Ql.widthCache={}),d}catch{return{width:0,height:0}}},oQ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function Np(t,e){return dQ(t)||uQ(t,e)||cQ(t,e)||lQ()}function lQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cQ(t,e){if(t){if(typeof t=="string")return HP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HP(t,e)}}function HP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function dQ(t){if(Array.isArray(t))return t}function hQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mQ(n.key),n)}}function fQ(t,e,r){return e&&GP(t.prototype,e),r&&GP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mQ(t){var e=pQ(t,"string");return Kd(e)=="symbol"?e:e+""}function pQ(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,c6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xQ=Object.keys(c6),nc="NaN";function vQ(t,e){return t*c6[e]}var Sm=(function(){function t(e,r){hQ(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!gQ.test(r)&&(this.num=NaN,this.unit=""),xQ.includes(r)&&(this.num=vQ(e,r),this.unit="px")}return fQ(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=yQ.exec(r))!==null&&n!==void 0?n:[],s=Np(a,3),o=s[1],c=s[2];return new t(parseFloat(o),c??"")}}])})();function u6(t){if(t.includes(nc))return nc;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=KP.exec(e))!==null&&r!==void 0?r:[],a=Np(n,4),s=a[1],o=a[2],c=a[3],d=Sm.parse(s??""),h=Sm.parse(c??""),m=o==="*"?d.multiply(h):d.divide(h);if(m.isNaN())return nc;e=e.replace(KP,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=QP.exec(e))!==null&&p!==void 0?p:[],v=Np(y,4),w=v[1],k=v[2],b=v[3],j=Sm.parse(w??""),N=Sm.parse(b??""),E=k==="+"?j.add(N):j.subtract(N);if(E.isNaN())return nc;e=e.replace(QP,E.toString())}return e}var YP=/\(([^()]*)\)/;function bQ(t){for(var e=t;e.includes("(");){var r=YP.exec(e),n=Np(r,2),a=n[1];e=e.replace(YP,u6(a))}return e}function wQ(t){var e=t.replace(/\s+/g,"");return e=bQ(e),e=u6(e),e}function kQ(t){try{return wQ(t)}catch{return nc}}function bw(t){var e=kQ(t.slice(5,-1));return e===nc?"":e}var _Q=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jQ=["dx","dy","angle","className","breakAll"];function c_(){return c_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c_.apply(this,arguments)}function XP(t,e){if(t==null)return{};var r=NQ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JP(t,e){return AQ(t)||TQ(t,e)||EQ(t,e)||SQ()}function SQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(t,e){if(t){if(typeof t=="string")return ZP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZP(t,e)}}function ZP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function AQ(t){if(Array.isArray(t))return t}var d6=/[ \f\n\r\t\v\u2028\u2029]+/,h6=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var s=[];it(r)||(n?s=r.toString().split(""):s=r.toString().split(d6));var o=s.map(function(d){return{word:d,width:bd(d,a).width}}),c=n?0:bd("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},CQ=function(e,r,n,a,s){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,m=Se(o),p=c,y=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ne.reduce(function(W,G){var X=G.word,ee=G.width,re=W[W.length-1];if(re&&(a==null||s||re.width+ee+n<Number(a)))re.words.push(X),re.width+=ee+n;else{var z={words:[X],width:ee};W.push(z)}return W},[])},v=y(r),w=function(ne){return ne.reduce(function(W,G){return W.width>G.width?W:G})};if(!m)return v;for(var k="",b=function(ne){var W=p.slice(0,ne),G=h6({breakAll:h,style:d,children:W+k}).wordsWithComputedWidth,X=y(G),ee=X.length>o||w(X).width>Number(a);return[ee,X]},j=0,N=p.length-1,E=0,P;j<=N&&E<=p.length-1;){var S=Math.floor((j+N)/2),T=S-1,A=b(T),R=JP(A,2),M=R[0],D=R[1],C=b(S),F=JP(C,1),L=F[0];if(!M&&!L&&(j=S+1),M&&L&&(N=S-1),!M&&L){P=D;break}E++}return P||v},eI=function(e){var r=it(e)?[]:e.toString().split(d6);return[{words:r}]},PQ=function(e){var r=e.width,n=e.scaleToFit,a=e.children,s=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!ru.isSsr){var d,h,m=h6({breakAll:o,children:a,style:s});if(m){var p=m.wordsWithComputedWidth,y=m.spaceWidth;d=p,h=y}else return eI(a);return CQ({breakAll:o,children:a,maxLines:c,style:s},d,h,r,n)}return eI(a)},tI="#808080",Qo=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,y=e.textAnchor,v=y===void 0?"start":y,w=e.verticalAnchor,k=w===void 0?"end":w,b=e.fill,j=b===void 0?tI:b,N=XP(e,_Q),E=V.useMemo(function(){return PQ({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:p,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,p,N.style,N.width]),P=N.dx,S=N.dy,T=N.angle,A=N.className,R=N.breakAll,M=XP(N,jQ);if(!gr(n)||!gr(s))return null;var D=n+(Se(P)?P:0),C=s+(Se(S)?S:0),F;switch(k){case"start":F=bw("calc(".concat(h,")"));break;case"middle":F=bw("calc(".concat((E.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:F=bw("calc(".concat(E.length-1," * -").concat(c,")"));break}var L=[];if(p){var Y=E[0].width,ne=N.width;L.push("scale(".concat((Se(ne)?ne/Y:1)/Y,")"))}return T&&L.push("rotate(".concat(T,", ").concat(D,", ").concat(C,")")),L.length&&(M.transform=L.join(" ")),Q.createElement("text",c_({},We(M,!0),{x:D,y:C,className:nt("recharts-text",A),textAnchor:v,fill:j.includes("url")?tI:j}),E.map(function(W,G){var X=W.words.join(R?"":" ");return Q.createElement("tspan",{x:D,dy:G===0?F:c,key:"".concat(X,"-").concat(G)},X)}))};function Rs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IQ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $j(t){let e,r,n;t.length!==2?(e=Rs,r=(c,d)=>Rs(t(c),d),n=(c,d)=>t(c)-d):(e=t===Rs||t===IQ?t:OQ,r=t,n=t);function a(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<0?h=p+1:m=p}while(h<m)}return h}function s(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<=0?h=p+1:m=p}while(h<m)}return h}function o(c,d,h=0,m=c.length){const p=a(c,d,h,m-1);return p>h&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:a,center:o,right:s}}function OQ(){return 0}function f6(t){return t===null?NaN:+t}function*RQ(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const DQ=$j(Rs),Hh=DQ.right;$j(f6).center;class rI extends Map{constructor(e,r=$Q){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(nI(this,e))}has(e){return super.has(nI(this,e))}set(e,r){return super.set(MQ(this,e),r)}delete(e){return super.delete(LQ(this,e))}}function nI({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function MQ({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function LQ({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function $Q(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FQ(t=Rs){if(t===Rs)return m6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function m6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const VQ=Math.sqrt(50),UQ=Math.sqrt(10),BQ=Math.sqrt(2);function Sp(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=VQ?10:s>=UQ?5:s>=BQ?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Sp(t,e,r*2):[c,d,h]}function u_(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?Sp(e,t,r):Sp(t,e,r);if(!(s>=a))return[];const c=s-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(s-h)/-o;else for(let h=0;h<c;++h)d[h]=(s-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function d_(t,e,r){return e=+e,t=+t,r=+r,Sp(t,e,r)[2]}function h_(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?d_(e,t,r):d_(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function aI(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function iI(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function p6(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?m6:FQ(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(d-p)/d)*(h-d/2<0?-1:1),v=Math.max(r,Math.floor(e-h*p/d+y)),w=Math.min(n,Math.floor(e+(d-h)*p/d+y));p6(t,e,v,w,a)}const s=t[e];let o=r,c=n;for(Qu(t,r,e),a(t[n],s)>0&&Qu(t,r,n);o<c;){for(Qu(t,o,c),++o,--c;a(t[o],s)<0;)++o;for(;a(t[c],s)>0;)--c}a(t[r],s)===0?Qu(t,r,c):(++c,Qu(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Qu(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function qQ(t,e,r){if(t=Float64Array.from(RQ(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return iI(t);if(e>=1)return aI(t);var n,a=(n-1)*e,s=Math.floor(a),o=aI(p6(t,s).subarray(0,s+1)),c=iI(t.subarray(s+1));return o+(c-o)*(a-s)}}function zQ(t,e,r=f6){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),c=+r(t[s+1],s+1,t);return o+(c-o)*(a-s)}}function WQ(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function na(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ki(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const f_=Symbol("implicit");function Fj(){var t=new rI,e=[],r=[],n=f_;function a(s){let o=t.get(s);if(o===void 0){if(n!==f_)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new rI;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Fj(e,r).unknown(n)},na.apply(a,arguments),a}function Qd(){var t=Fj().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,c=!1,d=0,h=0,m=.5;delete t.unknown;function p(){var y=e().length,v=a<n,w=v?a:n,k=v?n:a;s=(k-w)/Math.max(1,y-d+h*2),c&&(s=Math.floor(s)),w+=(k-w-s*(y-d))*m,o=s*(1-d),c&&(w=Math.round(w),o=Math.round(o));var b=WQ(y).map(function(j){return w+s*j});return r(v?b.reverse():b)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,p()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),p()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,p()):h},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return Qd(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(m)},na.apply(p(),arguments)}function g6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return g6(e())},t}function wd(){return g6(Qd.apply(null,arguments).paddingInner(1))}function Vj(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function y6(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Gh(){}var Yd=.7,Ep=1/Yd,gc="\\s*([+-]?\\d+)\\s*",Xd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HQ=/^#([0-9a-f]{3,8})$/,GQ=new RegExp(`^rgb\\(${gc},${gc},${gc}\\)$`),KQ=new RegExp(`^rgb\\(${ti},${ti},${ti}\\)$`),QQ=new RegExp(`^rgba\\(${gc},${gc},${gc},${Xd}\\)$`),YQ=new RegExp(`^rgba\\(${ti},${ti},${ti},${Xd}\\)$`),XQ=new RegExp(`^hsl\\(${Xd},${ti},${ti}\\)$`),JQ=new RegExp(`^hsla\\(${Xd},${ti},${ti},${Xd}\\)$`),sI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vj(Gh,Jd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oI,formatHex:oI,formatHex8:ZQ,formatHsl:eY,formatRgb:lI,toString:lI});function oI(){return this.rgb().formatHex()}function ZQ(){return this.rgb().formatHex8()}function eY(){return x6(this).formatHsl()}function lI(){return this.rgb().formatRgb()}function Jd(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=HQ.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?cI(e):r===3?new bn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Em(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Em(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=GQ.exec(t))?new bn(e[1],e[2],e[3],1):(e=KQ.exec(t))?new bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QQ.exec(t))?Em(e[1],e[2],e[3],e[4]):(e=YQ.exec(t))?Em(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XQ.exec(t))?hI(e[1],e[2]/100,e[3]/100,1):(e=JQ.exec(t))?hI(e[1],e[2]/100,e[3]/100,e[4]):sI.hasOwnProperty(t)?cI(sI[t]):t==="transparent"?new bn(NaN,NaN,NaN,0):null}function cI(t){return new bn(t>>16&255,t>>8&255,t&255,1)}function Em(t,e,r,n){return n<=0&&(t=e=r=NaN),new bn(t,e,r,n)}function tY(t){return t instanceof Gh||(t=Jd(t)),t?(t=t.rgb(),new bn(t.r,t.g,t.b,t.opacity)):new bn}function m_(t,e,r,n){return arguments.length===1?tY(t):new bn(t,e,r,n??1)}function bn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Vj(bn,m_,y6(Gh,{brighter(t){return t=t==null?Ep:Math.pow(Ep,t),new bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Yd:Math.pow(Yd,t),new bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bn($o(this.r),$o(this.g),$o(this.b),Tp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uI,formatHex:uI,formatHex8:rY,formatRgb:dI,toString:dI}));function uI(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function rY(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function dI(){const t=Tp(this.opacity);return`${t===1?"rgb(":"rgba("}${$o(this.r)}, ${$o(this.g)}, ${$o(this.b)}${t===1?")":`, ${t})`}`}function Tp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $o(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Po(t){return t=$o(t),(t<16?"0":"")+t.toString(16)}function hI(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ja(t,e,r,n)}function x6(t){if(t instanceof ja)return new ja(t.h,t.s,t.l,t.opacity);if(t instanceof Gh||(t=Jd(t)),!t)return new ja;if(t instanceof ja)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,c=s-a,d=(s+a)/2;return c?(e===s?o=(r-n)/c+(r<n)*6:r===s?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?s+a:2-s-a,o*=60):c=d>0&&d<1?0:o,new ja(o,c,d,t.opacity)}function nY(t,e,r,n){return arguments.length===1?x6(t):new ja(t,e,r,n??1)}function ja(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Vj(ja,nY,y6(Gh,{brighter(t){return t=t==null?Ep:Math.pow(Ep,t),new ja(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Yd:Math.pow(Yd,t),new ja(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new bn(ww(t>=240?t-240:t+120,a,n),ww(t,a,n),ww(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new ja(fI(this.h),Tm(this.s),Tm(this.l),Tp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tp(this.opacity);return`${t===1?"hsl(":"hsla("}${fI(this.h)}, ${Tm(this.s)*100}%, ${Tm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fI(t){return t=(t||0)%360,t<0?t+360:t}function Tm(t){return Math.max(0,Math.min(1,t||0))}function ww(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Uj=t=>()=>t;function aY(t,e){return function(r){return t+r*e}}function iY(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function sY(t){return(t=+t)==1?v6:function(e,r){return r-e?iY(e,r,t):Uj(isNaN(e)?r:e)}}function v6(t,e){var r=e-t;return r?aY(t,r):Uj(isNaN(t)?e:t)}const mI=(function t(e){var r=sY(e);function n(a,s){var o=r((a=m_(a)).r,(s=m_(s)).r),c=r(a.g,s.g),d=r(a.b,s.b),h=v6(a.opacity,s.opacity);return function(m){return a.r=o(m),a.g=c(m),a.b=d(m),a.opacity=h(m),a+""}}return n.gamma=t,n})(1);function oY(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function lY(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cY(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=nu(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(c){for(o=0;o<n;++o)s[o]=a[o](c);return s}}function uY(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ap(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function dY(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=nu(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var p_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kw=new RegExp(p_.source,"g");function hY(t){return function(){return t}}function fY(t){return function(e){return t(e)+""}}function mY(t,e){var r=p_.lastIndex=kw.lastIndex=0,n,a,s,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=p_.exec(t))&&(a=kw.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),c[o]?c[o]+=s:c[++o]=s),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:Ap(n,a)})),r=kw.lastIndex;return r<e.length&&(s=e.slice(r),c[o]?c[o]+=s:c[++o]=s),c.length<2?d[0]?fY(d[0].x):hY(e):(e=d.length,function(h){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(h);return c.join("")})}function nu(t,e){var r=typeof e,n;return e==null||r==="boolean"?Uj(e):(r==="number"?Ap:r==="string"?(n=Jd(e))?(e=n,mI):mY:e instanceof Jd?mI:e instanceof Date?uY:lY(e)?oY:Array.isArray(e)?cY:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dY:Ap)(t,e)}function Bj(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function pY(t,e){e===void 0&&(e=t,t=nu);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[c](o-c)}}function gY(t){return function(){return t}}function Cp(t){return+t}var pI=[0,1];function on(t){return t}function g_(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:gY(isNaN(e)?NaN:.5)}function yY(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function xY(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=g_(a,n),s=r(o,s)):(n=g_(n,a),s=r(s,o)),function(c){return s(n(c))}}function vY(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=g_(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(c){var d=Hh(t,c,1,n)-1;return s[d](a[d](c))}}function Kh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function K0(){var t=pI,e=pI,r=nu,n,a,s,o=on,c,d,h;function m(){var y=Math.min(t.length,e.length);return o!==on&&(o=yY(t[0],t[y-1])),c=y>2?vY:xY,d=h=null,p}function p(y){return y==null||isNaN(y=+y)?s:(d||(d=c(t.map(n),e,r)))(n(o(y)))}return p.invert=function(y){return o(a((h||(h=c(e,t.map(n),Ap)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,Cp),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),r=Bj,m()},p.clamp=function(y){return arguments.length?(o=y?!0:on,m()):o!==on},p.interpolate=function(y){return arguments.length?(r=y,m()):r},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,v){return n=y,a=v,m()}}function qj(){return K0()(on,on)}function bY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Pp(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Cc(t){return t=Pp(Math.abs(t)),t?t[1]:NaN}function wY(t,e){return function(r,n){for(var a=r.length,s=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),s.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function kY(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var _Y=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zd(t){if(!(e=_Y.exec(t)))throw new Error("invalid format: "+t);var e;return new zj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Zd.prototype=zj.prototype;function zj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}zj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jY(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var b6;function NY(t,e){var r=Pp(t,e);if(!r)return t+"";var n=r[0],a=r[1],s=a-(b6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Pp(t,Math.max(0,e+s-1))[0]}function gI(t,e){var r=Pp(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const yI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:bY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gI(t*100,e),r:gI,s:NY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xI(t){return t}var vI=Array.prototype.map,bI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SY(t){var e=t.grouping===void 0||t.thousands===void 0?xI:wY(vI.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xI:kY(vI.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(p){p=Zd(p);var y=p.fill,v=p.align,w=p.sign,k=p.symbol,b=p.zero,j=p.width,N=p.comma,E=p.precision,P=p.trim,S=p.type;S==="n"?(N=!0,S="g"):yI[S]||(E===void 0&&(E=12),P=!0,S="g"),(b||y==="0"&&v==="=")&&(b=!0,y="0",v="=");var T=k==="$"?r:k==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",A=k==="$"?n:/[%p]/.test(S)?o:"",R=yI[S],M=/[defgprs%]/.test(S);E=E===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function D(C){var F=T,L=A,Y,ne,W;if(S==="c")L=R(C)+L,C="";else{C=+C;var G=C<0||1/C<0;if(C=isNaN(C)?d:R(Math.abs(C),E),P&&(C=jY(C)),G&&+C==0&&w!=="+"&&(G=!1),F=(G?w==="("?w:c:w==="-"||w==="("?"":w)+F,L=(S==="s"?bI[8+b6/3]:"")+L+(G&&w==="("?")":""),M){for(Y=-1,ne=C.length;++Y<ne;)if(W=C.charCodeAt(Y),48>W||W>57){L=(W===46?a+C.slice(Y+1):C.slice(Y))+L,C=C.slice(0,Y);break}}}N&&!b&&(C=e(C,1/0));var X=F.length+C.length+L.length,ee=X<j?new Array(j-X+1).join(y):"";switch(N&&b&&(C=e(ee+C,ee.length?j-L.length:1/0),ee=""),v){case"<":C=F+C+L+ee;break;case"=":C=F+ee+C+L;break;case"^":C=ee.slice(0,X=ee.length>>1)+F+C+L+ee.slice(X);break;default:C=ee+F+C+L;break}return s(C)}return D.toString=function(){return p+""},D}function m(p,y){var v=h((p=Zd(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Cc(y)/3)))*3,k=Math.pow(10,-w),b=bI[8+w/3];return function(j){return v(k*j)+b}}return{format:h,formatPrefix:m}}var Am,Wj,w6;EY({thousands:",",grouping:[3],currency:["$",""]});function EY(t){return Am=SY(t),Wj=Am.format,w6=Am.formatPrefix,Am}function TY(t){return Math.max(0,-Cc(Math.abs(t)))}function AY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cc(e)/3)))*3-Cc(Math.abs(t)))}function CY(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cc(e)-Cc(t))+1}function k6(t,e,r,n){var a=h_(t,e,r),s;switch(n=Zd(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=AY(a,o))&&(n.precision=s),w6(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=CY(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=TY(a))&&(n.precision=s-(n.type==="%")*2);break}}return Wj(n)}function Hs(t){var e=t.domain;return t.ticks=function(r){var n=e();return u_(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return k6(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],c=n[s],d,h,m=10;for(c<o&&(h=o,o=c,c=h,h=a,a=s,s=h);m-- >0;){if(h=d_(o,c,r),h===d)return n[a]=o,n[s]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Ip(){var t=qj();return t.copy=function(){return Kh(t,Ip())},na.apply(t,arguments),Hs(t)}function _6(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Cp),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return _6(t).unknown(e)},t=arguments.length?Array.from(t,Cp):[0,1],Hs(r)}function j6(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function wI(t){return Math.log(t)}function kI(t){return Math.exp(t)}function PY(t){return-Math.log(-t)}function IY(t){return-Math.exp(-t)}function OY(t){return isFinite(t)?+("1e"+t):t<0?0:t}function RY(t){return t===10?OY:t===Math.E?Math.exp:e=>Math.pow(t,e)}function DY(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function _I(t){return(e,r)=>-t(-e,r)}function Hj(t){const e=t(wI,kI),r=e.domain;let n=10,a,s;function o(){return a=DY(n),s=RY(n),r()[0]<0?(a=_I(a),s=_I(s),t(PY,IY)):t(wI,kI),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],m=d[d.length-1];const p=m<h;p&&([h,m]=[m,h]);let y=a(h),v=a(m),w,k;const b=c==null?10:+c;let j=[];if(!(n%1)&&v-y<b){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(w=1;w<n;++w)if(k=y<0?w/s(-y):w*s(y),!(k<h)){if(k>m)break;j.push(k)}}else for(;y<=v;++y)for(w=n-1;w>=1;--w)if(k=y>0?w/s(-y):w*s(y),!(k<h)){if(k>m)break;j.push(k)}j.length*2<b&&(j=u_(h,m,b))}else j=u_(y,v,Math.min(v-y,b)).map(s);return p?j.reverse():j},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Zd(d)).precision==null&&(d.trim=!0),d=Wj(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/s(Math.round(a(m)));return p*n<n-.5&&(p*=n),p<=h?d(m):""}},e.nice=()=>r(j6(r(),{floor:c=>s(Math.floor(a(c))),ceil:c=>s(Math.ceil(a(c)))})),e}function N6(){const t=Hj(K0()).domain([1,10]);return t.copy=()=>Kh(t,N6()).base(t.base()),na.apply(t,arguments),t}function jI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function NI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Gj(t){var e=1,r=t(jI(e),NI(e));return r.constant=function(n){return arguments.length?t(jI(e=+n),NI(e)):e},Hs(r)}function S6(){var t=Gj(K0());return t.copy=function(){return Kh(t,S6()).constant(t.constant())},na.apply(t,arguments)}function SI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function MY(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function LY(t){return t<0?-t*t:t*t}function Kj(t){var e=t(on,on),r=1;function n(){return r===1?t(on,on):r===.5?t(MY,LY):t(SI(r),SI(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Hs(e)}function Qj(){var t=Kj(K0());return t.copy=function(){return Kh(t,Qj()).exponent(t.exponent())},na.apply(t,arguments),t}function $Y(){return Qj.apply(null,arguments).exponent(.5)}function EI(t){return Math.sign(t)*t*t}function FY(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function E6(){var t=qj(),e=[0,1],r=!1,n;function a(s){var o=FY(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(EI(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,Cp)).map(EI)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return E6(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},na.apply(a,arguments),Hs(a)}function T6(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=zQ(t,o/c);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Hh(r,o)]}return s.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Rs),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return T6().domain(t).range(e).unknown(n)},na.apply(s,arguments)}function A6(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(d){return d!=null&&d<=d?a[Hh(n,d,0,r)]:s}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(s=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return A6().domain([t,e]).range(a).unknown(s)},na.apply(Hs(o),arguments)}function C6(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Hh(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return C6().domain(t).range(e).unknown(r)},na.apply(a,arguments)}const _w=new Date,jw=new Date;function xr(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),c=a.ceil(s);return s-o<c-s?o:c},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,c)=>{const d=[];if(s=a.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return d;let h;do d.push(h=new Date(+s)),e(s,c),t(s);while(h<s&&s<o);return d},a.filter=s=>xr(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(_w.setTime(+s),jw.setTime(+o),t(_w),t(jw),Math.floor(r(_w,jw))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Op=xr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Op.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?xr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Op);Op.range;const Ci=1e3,Jn=Ci*60,Pi=Jn*60,Bi=Pi*24,Yj=Bi*7,TI=Bi*30,Nw=Bi*365,Io=xr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ci)},(t,e)=>(e-t)/Ci,t=>t.getUTCSeconds());Io.range;const Xj=xr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ci)},(t,e)=>{t.setTime(+t+e*Jn)},(t,e)=>(e-t)/Jn,t=>t.getMinutes());Xj.range;const Jj=xr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Jn)},(t,e)=>(e-t)/Jn,t=>t.getUTCMinutes());Jj.range;const Zj=xr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ci-t.getMinutes()*Jn)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getHours());Zj.range;const eN=xr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getUTCHours());eN.range;const Qh=xr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Jn)/Bi,t=>t.getDate()-1);Qh.range;const Q0=xr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bi,t=>t.getUTCDate()-1);Q0.range;const P6=xr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bi,t=>Math.floor(t/Bi));P6.range;function il(t){return xr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Jn)/Yj)}const Y0=il(0),Rp=il(1),VY=il(2),UY=il(3),Pc=il(4),BY=il(5),qY=il(6);Y0.range;Rp.range;VY.range;UY.range;Pc.range;BY.range;qY.range;function sl(t){return xr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Yj)}const X0=sl(0),Dp=sl(1),zY=sl(2),WY=sl(3),Ic=sl(4),HY=sl(5),GY=sl(6);X0.range;Dp.range;zY.range;WY.range;Ic.range;HY.range;GY.range;const tN=xr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());tN.range;const rN=xr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());rN.range;const qi=xr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());qi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:xr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});qi.range;const zi=xr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:xr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});zi.range;function I6(t,e,r,n,a,s){const o=[[Io,1,Ci],[Io,5,5*Ci],[Io,15,15*Ci],[Io,30,30*Ci],[s,1,Jn],[s,5,5*Jn],[s,15,15*Jn],[s,30,30*Jn],[a,1,Pi],[a,3,3*Pi],[a,6,6*Pi],[a,12,12*Pi],[n,1,Bi],[n,2,2*Bi],[r,1,Yj],[e,1,TI],[e,3,3*TI],[t,1,Nw]];function c(h,m,p){const y=m<h;y&&([h,m]=[m,h]);const v=p&&typeof p.range=="function"?p:d(h,m,p),w=v?v.range(h,+m+1):[];return y?w.reverse():w}function d(h,m,p){const y=Math.abs(m-h)/p,v=$j(([,,b])=>b).right(o,y);if(v===o.length)return t.every(h_(h/Nw,m/Nw,p));if(v===0)return Op.every(Math.max(h_(h,m,p),1));const[w,k]=o[y/o[v-1][2]<o[v][2]/y?v-1:v];return w.every(k)}return[c,d]}const[KY,QY]=I6(zi,rN,X0,P6,eN,Jj),[YY,XY]=I6(qi,tN,Y0,Qh,Zj,Xj);function Sw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ew(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Yu(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function JY(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=Xu(a),m=Ju(a),p=Xu(s),y=Ju(s),v=Xu(o),w=Ju(o),k=Xu(c),b=Ju(c),j=Xu(d),N=Ju(d),E={a:G,A:X,b:ee,B:re,c:null,d:RI,e:RI,f:wX,g:PX,G:OX,H:xX,I:vX,j:bX,L:O6,m:kX,M:_X,p:z,q:Z,Q:LI,s:$I,S:jX,u:NX,U:SX,V:EX,w:TX,W:AX,x:null,X:null,y:CX,Y:IX,Z:RX,"%":MI},P={a:J,A:oe,b:he,B:ve,c:null,d:DI,e:DI,f:$X,g:KX,G:YX,H:DX,I:MX,j:LX,L:D6,m:FX,M:VX,p:fe,q:ye,Q:LI,s:$I,S:UX,u:BX,U:qX,V:zX,w:WX,W:HX,x:null,X:null,y:GX,Y:QX,Z:XX,"%":MI},S={a:D,A:C,b:F,B:L,c:Y,d:II,e:II,f:mX,g:PI,G:CI,H:OI,I:OI,j:uX,L:fX,m:cX,M:dX,p:M,q:lX,Q:gX,s:yX,S:hX,u:nX,U:aX,V:iX,w:rX,W:sX,x:ne,X:W,y:PI,Y:CI,Z:oX,"%":pX};E.x=T(r,E),E.X=T(n,E),E.c=T(e,E),P.x=T(r,P),P.X=T(n,P),P.c=T(e,P);function T(q,de){return function(pe){var le=[],je=-1,Te=0,Ze=q.length,et,Nt,nr;for(pe instanceof Date||(pe=new Date(+pe));++je<Ze;)q.charCodeAt(je)===37&&(le.push(q.slice(Te,je)),(Nt=AI[et=q.charAt(++je)])!=null?et=q.charAt(++je):Nt=et==="e"?" ":"0",(nr=de[et])&&(et=nr(pe,Nt)),le.push(et),Te=je+1);return le.push(q.slice(Te,je)),le.join("")}}function A(q,de){return function(pe){var le=Yu(1900,void 0,1),je=R(le,q,pe+="",0),Te,Ze;if(je!=pe.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(de&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Te=Ew(Yu(le.y,0,1)),Ze=Te.getUTCDay(),Te=Ze>4||Ze===0?Dp.ceil(Te):Dp(Te),Te=Q0.offset(Te,(le.V-1)*7),le.y=Te.getUTCFullYear(),le.m=Te.getUTCMonth(),le.d=Te.getUTCDate()+(le.w+6)%7):(Te=Sw(Yu(le.y,0,1)),Ze=Te.getDay(),Te=Ze>4||Ze===0?Rp.ceil(Te):Rp(Te),Te=Qh.offset(Te,(le.V-1)*7),le.y=Te.getFullYear(),le.m=Te.getMonth(),le.d=Te.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ze="Z"in le?Ew(Yu(le.y,0,1)).getUTCDay():Sw(Yu(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ze+5)%7:le.w+le.U*7-(Ze+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,Ew(le)):Sw(le)}}function R(q,de,pe,le){for(var je=0,Te=de.length,Ze=pe.length,et,Nt;je<Te;){if(le>=Ze)return-1;if(et=de.charCodeAt(je++),et===37){if(et=de.charAt(je++),Nt=S[et in AI?de.charAt(je++):et],!Nt||(le=Nt(q,pe,le))<0)return-1}else if(et!=pe.charCodeAt(le++))return-1}return le}function M(q,de,pe){var le=h.exec(de.slice(pe));return le?(q.p=m.get(le[0].toLowerCase()),pe+le[0].length):-1}function D(q,de,pe){var le=v.exec(de.slice(pe));return le?(q.w=w.get(le[0].toLowerCase()),pe+le[0].length):-1}function C(q,de,pe){var le=p.exec(de.slice(pe));return le?(q.w=y.get(le[0].toLowerCase()),pe+le[0].length):-1}function F(q,de,pe){var le=j.exec(de.slice(pe));return le?(q.m=N.get(le[0].toLowerCase()),pe+le[0].length):-1}function L(q,de,pe){var le=k.exec(de.slice(pe));return le?(q.m=b.get(le[0].toLowerCase()),pe+le[0].length):-1}function Y(q,de,pe){return R(q,e,de,pe)}function ne(q,de,pe){return R(q,r,de,pe)}function W(q,de,pe){return R(q,n,de,pe)}function G(q){return o[q.getDay()]}function X(q){return s[q.getDay()]}function ee(q){return d[q.getMonth()]}function re(q){return c[q.getMonth()]}function z(q){return a[+(q.getHours()>=12)]}function Z(q){return 1+~~(q.getMonth()/3)}function J(q){return o[q.getUTCDay()]}function oe(q){return s[q.getUTCDay()]}function he(q){return d[q.getUTCMonth()]}function ve(q){return c[q.getUTCMonth()]}function fe(q){return a[+(q.getUTCHours()>=12)]}function ye(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var de=T(q+="",E);return de.toString=function(){return q},de},parse:function(q){var de=A(q+="",!1);return de.toString=function(){return q},de},utcFormat:function(q){var de=T(q+="",P);return de.toString=function(){return q},de},utcParse:function(q){var de=A(q+="",!0);return de.toString=function(){return q},de}}}var AI={"-":"",_:" ",0:"0"},Tr=/^\s*\d+/,ZY=/^%/,eX=/[\\^$*+?|[\]().{}]/g;function gt(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function tX(t){return t.replace(eX,"\\$&")}function Xu(t){return new RegExp("^(?:"+t.map(tX).join("|")+")","i")}function Ju(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function rX(t,e,r){var n=Tr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function nX(t,e,r){var n=Tr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function aX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function iX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function sX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function CI(t,e,r){var n=Tr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function PI(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oX(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lX(t,e,r){var n=Tr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function cX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function II(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function uX(t,e,r){var n=Tr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function OI(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function dX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function hX(t,e,r){var n=Tr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function fX(t,e,r){var n=Tr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function mX(t,e,r){var n=Tr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function pX(t,e,r){var n=ZY.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function gX(t,e,r){var n=Tr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function yX(t,e,r){var n=Tr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function RI(t,e){return gt(t.getDate(),e,2)}function xX(t,e){return gt(t.getHours(),e,2)}function vX(t,e){return gt(t.getHours()%12||12,e,2)}function bX(t,e){return gt(1+Qh.count(qi(t),t),e,3)}function O6(t,e){return gt(t.getMilliseconds(),e,3)}function wX(t,e){return O6(t,e)+"000"}function kX(t,e){return gt(t.getMonth()+1,e,2)}function _X(t,e){return gt(t.getMinutes(),e,2)}function jX(t,e){return gt(t.getSeconds(),e,2)}function NX(t){var e=t.getDay();return e===0?7:e}function SX(t,e){return gt(Y0.count(qi(t)-1,t),e,2)}function R6(t){var e=t.getDay();return e>=4||e===0?Pc(t):Pc.ceil(t)}function EX(t,e){return t=R6(t),gt(Pc.count(qi(t),t)+(qi(t).getDay()===4),e,2)}function TX(t){return t.getDay()}function AX(t,e){return gt(Rp.count(qi(t)-1,t),e,2)}function CX(t,e){return gt(t.getFullYear()%100,e,2)}function PX(t,e){return t=R6(t),gt(t.getFullYear()%100,e,2)}function IX(t,e){return gt(t.getFullYear()%1e4,e,4)}function OX(t,e){var r=t.getDay();return t=r>=4||r===0?Pc(t):Pc.ceil(t),gt(t.getFullYear()%1e4,e,4)}function RX(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function DI(t,e){return gt(t.getUTCDate(),e,2)}function DX(t,e){return gt(t.getUTCHours(),e,2)}function MX(t,e){return gt(t.getUTCHours()%12||12,e,2)}function LX(t,e){return gt(1+Q0.count(zi(t),t),e,3)}function D6(t,e){return gt(t.getUTCMilliseconds(),e,3)}function $X(t,e){return D6(t,e)+"000"}function FX(t,e){return gt(t.getUTCMonth()+1,e,2)}function VX(t,e){return gt(t.getUTCMinutes(),e,2)}function UX(t,e){return gt(t.getUTCSeconds(),e,2)}function BX(t){var e=t.getUTCDay();return e===0?7:e}function qX(t,e){return gt(X0.count(zi(t)-1,t),e,2)}function M6(t){var e=t.getUTCDay();return e>=4||e===0?Ic(t):Ic.ceil(t)}function zX(t,e){return t=M6(t),gt(Ic.count(zi(t),t)+(zi(t).getUTCDay()===4),e,2)}function WX(t){return t.getUTCDay()}function HX(t,e){return gt(Dp.count(zi(t)-1,t),e,2)}function GX(t,e){return gt(t.getUTCFullYear()%100,e,2)}function KX(t,e){return t=M6(t),gt(t.getUTCFullYear()%100,e,2)}function QX(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function YX(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Ic(t):Ic.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function XX(){return"+0000"}function MI(){return"%"}function LI(t){return+t}function $I(t){return Math.floor(+t/1e3)}var Yl,L6,$6;JX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JX(t){return Yl=JY(t),L6=Yl.format,Yl.parse,$6=Yl.utcFormat,Yl.utcParse,Yl}function ZX(t){return new Date(t)}function eJ(t){return t instanceof Date?+t:+new Date(+t)}function nN(t,e,r,n,a,s,o,c,d,h){var m=qj(),p=m.invert,y=m.domain,v=h(".%L"),w=h(":%S"),k=h("%I:%M"),b=h("%I %p"),j=h("%a %d"),N=h("%b %d"),E=h("%B"),P=h("%Y");function S(T){return(d(T)<T?v:c(T)<T?w:o(T)<T?k:s(T)<T?b:n(T)<T?a(T)<T?j:N:r(T)<T?E:P)(T)}return m.invert=function(T){return new Date(p(T))},m.domain=function(T){return arguments.length?y(Array.from(T,eJ)):y().map(ZX)},m.ticks=function(T){var A=y();return t(A[0],A[A.length-1],T??10)},m.tickFormat=function(T,A){return A==null?S:h(A)},m.nice=function(T){var A=y();return(!T||typeof T.range!="function")&&(T=e(A[0],A[A.length-1],T??10)),T?y(j6(A,T)):m},m.copy=function(){return Kh(m,nN(t,e,r,n,a,s,o,c,d,h))},m}function tJ(){return na.apply(nN(YY,XY,qi,tN,Y0,Qh,Zj,Xj,Io,L6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rJ(){return na.apply(nN(KY,QY,zi,rN,X0,Q0,eN,Jj,Io,$6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J0(){var t=0,e=1,r,n,a,s,o=on,c=!1,d;function h(p){return p==null||isNaN(p=+p)?d:o(a===0?.5:(p=(s(p)-r)*a,c?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e]=p,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(p){return arguments.length?(c=!!p,h):c},h.interpolator=function(p){return arguments.length?(o=p,h):o};function m(p){return function(y){var v,w;return arguments.length?([v,w]=y,o=p(v,w),h):[o(0),o(1)]}}return h.range=m(nu),h.rangeRound=m(Bj),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return s=p,r=p(t),n=p(e),a=r===n?0:1/(n-r),h}}function Gs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function F6(){var t=Hs(J0()(on));return t.copy=function(){return Gs(t,F6())},Ki.apply(t,arguments)}function V6(){var t=Hj(J0()).domain([1,10]);return t.copy=function(){return Gs(t,V6()).base(t.base())},Ki.apply(t,arguments)}function U6(){var t=Gj(J0());return t.copy=function(){return Gs(t,U6()).constant(t.constant())},Ki.apply(t,arguments)}function aN(){var t=Kj(J0());return t.copy=function(){return Gs(t,aN()).exponent(t.exponent())},Ki.apply(t,arguments)}function nJ(){return aN.apply(null,arguments).exponent(.5)}function B6(){var t=[],e=on;function r(n){if(n!=null&&!isNaN(n=+n))return e((Hh(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Rs),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>qQ(t,s/n))},r.copy=function(){return B6(e).domain(t)},Ki.apply(r,arguments)}function Z0(){var t=0,e=.5,r=1,n=1,a,s,o,c,d,h=on,m,p=!1,y;function v(k){return isNaN(k=+k)?y:(k=.5+((k=+m(k))-s)*(n*k<n*s?c:d),h(p?Math.max(0,Math.min(1,k)):k))}v.domain=function(k){return arguments.length?([t,e,r]=k,a=m(t=+t),s=m(e=+e),o=m(r=+r),c=a===s?0:.5/(s-a),d=s===o?0:.5/(o-s),n=s<a?-1:1,v):[t,e,r]},v.clamp=function(k){return arguments.length?(p=!!k,v):p},v.interpolator=function(k){return arguments.length?(h=k,v):h};function w(k){return function(b){var j,N,E;return arguments.length?([j,N,E]=b,h=pY(k,[j,N,E]),v):[h(0),h(.5),h(1)]}}return v.range=w(nu),v.rangeRound=w(Bj),v.unknown=function(k){return arguments.length?(y=k,v):y},function(k){return m=k,a=k(t),s=k(e),o=k(r),c=a===s?0:.5/(s-a),d=s===o?0:.5/(o-s),n=s<a?-1:1,v}}function q6(){var t=Hs(Z0()(on));return t.copy=function(){return Gs(t,q6())},Ki.apply(t,arguments)}function z6(){var t=Hj(Z0()).domain([.1,1,10]);return t.copy=function(){return Gs(t,z6()).base(t.base())},Ki.apply(t,arguments)}function W6(){var t=Gj(Z0());return t.copy=function(){return Gs(t,W6()).constant(t.constant())},Ki.apply(t,arguments)}function iN(){var t=Kj(Z0());return t.copy=function(){return Gs(t,iN()).exponent(t.exponent())},Ki.apply(t,arguments)}function aJ(){return iN.apply(null,arguments).exponent(.5)}const FI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qd,scaleDiverging:q6,scaleDivergingLog:z6,scaleDivergingPow:iN,scaleDivergingSqrt:aJ,scaleDivergingSymlog:W6,scaleIdentity:_6,scaleImplicit:f_,scaleLinear:Ip,scaleLog:N6,scaleOrdinal:Fj,scalePoint:wd,scalePow:Qj,scaleQuantile:T6,scaleQuantize:A6,scaleRadial:E6,scaleSequential:F6,scaleSequentialLog:V6,scaleSequentialPow:aN,scaleSequentialQuantile:B6,scaleSequentialSqrt:nJ,scaleSequentialSymlog:U6,scaleSqrt:$Y,scaleSymlog:S6,scaleThreshold:C6,scaleTime:tJ,scaleUtc:rJ,tickFormat:k6},Symbol.toStringTag,{value:"Module"}));var Tw,VI;function eg(){if(VI)return Tw;VI=1;var t=Zc();function e(r,n,a){for(var s=-1,o=r.length;++s<o;){var c=r[s],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,m=c}return m}return Tw=e,Tw}var Aw,UI;function H6(){if(UI)return Aw;UI=1;function t(e,r){return e>r}return Aw=t,Aw}var Cw,BI;function iJ(){if(BI)return Cw;BI=1;var t=eg(),e=H6(),r=tu();function n(a){return a&&a.length?t(a,r,e):void 0}return Cw=n,Cw}var sJ=iJ();const tg=vt(sJ);var Pw,qI;function G6(){if(qI)return Pw;qI=1;function t(e,r){return e<r}return Pw=t,Pw}var Iw,zI;function oJ(){if(zI)return Iw;zI=1;var t=eg(),e=G6(),r=tu();function n(a){return a&&a.length?t(a,r,e):void 0}return Iw=n,Iw}var lJ=oJ();const rg=vt(lJ);var Ow,WI;function cJ(){if(WI)return Ow;WI=1;var t=wj(),e=ci(),r=e6(),n=wn();function a(s,o){var c=n(s)?t:r;return c(s,e(o,3))}return Ow=a,Ow}var Rw,HI;function uJ(){if(HI)return Rw;HI=1;var t=J3(),e=cJ();function r(n,a){return t(e(n,a),1)}return Rw=r,Rw}var dJ=uJ();const hJ=vt(dJ);var Dw,GI;function fJ(){if(GI)return Dw;GI=1;var t=Rj();function e(r,n){return t(r,n)}return Dw=e,Dw}var mJ=fJ();const ng=vt(mJ);var au=1e9,pJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oN,Bt=!0,ra="[DecimalError] ",Fo=ra+"Invalid argument: ",sN=ra+"Exponent out of range: ",iu=Math.floor,So=Math.pow,gJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,In,Nr=1e7,Mt=7,K6=9007199254740991,Mp=iu(K6/Mt),Oe={};Oe.absoluteValue=Oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Oe.comparedTo=Oe.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Mt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Oe.dividedBy=Oe.div=function(t){return Mi(this,new this.constructor(t))};Oe.dividedToIntegerBy=Oe.idiv=function(t){var e=this,r=e.constructor;return Tt(Mi(e,new r(t),0,1),r.precision)};Oe.equals=Oe.eq=function(t){return!this.cmp(t)};Oe.exponent=function(){return ur(this)};Oe.greaterThan=Oe.gt=function(t){return this.cmp(t)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(t){return this.cmp(t)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(t){return this.cmp(t)<0};Oe.lessThanOrEqualTo=Oe.lte=function(t){return this.cmp(t)<1};Oe.logarithm=Oe.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(In))throw Error(ra+"NaN");if(r.s<1)throw Error(ra+(r.s?"NaN":"-Infinity"));return r.eq(In)?new n(0):(Bt=!1,e=Mi(eh(r,s),eh(t,s),s),Bt=!0,Tt(e,a))};Oe.minus=Oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?X6(e,t):Q6(e,(t.s=-t.s,t))};Oe.modulo=Oe.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(ra+"NaN");return r.s?(Bt=!1,e=Mi(r,t,0,1).times(t),Bt=!0,r.minus(e)):Tt(new n(r),a)};Oe.naturalExponential=Oe.exp=function(){return Y6(this)};Oe.naturalLogarithm=Oe.ln=function(){return eh(this)};Oe.negated=Oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Oe.plus=Oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Q6(e,t):X6(e,(t.s=-t.s,t))};Oe.precision=Oe.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Fo+t);if(e=ur(a)+1,n=a.d.length-1,r=n*Mt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Oe.squareRoot=Oe.sqrt=function(){var t,e,r,n,a,s,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(ra+"NaN")}for(t=ur(c),Bt=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Ka(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=iu((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(s=n,n=s.plus(Mi(c,s,o+2)).times(.5),Ka(s.d).slice(0,o)===(e=Ka(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Tt(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if(e!="9999")break;o+=4}return Bt=!0,Tt(n,r)};Oe.times=Oe.mul=function(t){var e,r,n,a,s,o,c,d,h,m=this,p=m.constructor,y=m.d,v=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,d=y.length,h=v.length,d<h&&(s=y,y=v,v=s,o=d,d=h,h=o),s=[],o=d+h,n=o;n--;)s.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=s[a]+v[n]*y[a-n-1]+e,s[a--]=c%Nr|0,e=c/Nr|0;s[a]=(s[a]+e)%Nr|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Bt?Tt(t,p.precision):t};Oe.toDecimalPlaces=Oe.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(si(t,0,au),e===void 0?e=n.rounding:si(e,0,8),Tt(r,t+ur(r)+1,e))};Oe.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Yo(n,!0):(si(t,0,au),e===void 0?e=a.rounding:si(e,0,8),n=Tt(new a(n),t+1,e),r=Yo(n,!0,t+1)),r};Oe.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Yo(a):(si(t,0,au),e===void 0?e=s.rounding:si(e,0,8),n=Tt(new s(a),t+ur(a)+1,e),r=Yo(n.abs(),!1,t+ur(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Oe.toInteger=Oe.toint=function(){var t=this,e=t.constructor;return Tt(new e(t),ur(t)+1,e.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(t){var e,r,n,a,s,o,c=this,d=c.constructor,h=12,m=+(t=new d(t));if(!t.s)return new d(In);if(c=new d(c),!c.s){if(t.s<1)throw Error(ra+"Infinity");return c}if(c.eq(In))return c;if(n=d.precision,t.eq(In))return Tt(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=c.s,o){if((r=m<0?-m:m)<=K6){for(a=new d(In),e=Math.ceil(n/Mt+4),Bt=!1;r%2&&(a=a.times(c),QI(a.d,e)),r=iu(r/2),r!==0;)c=c.times(c),QI(c.d,e);return Bt=!0,t.s<0?new d(In).div(a):Tt(a,n)}}else if(s<0)throw Error(ra+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Bt=!1,a=t.times(eh(c,n+h)),Bt=!0,a=Y6(a),a.s=s,a};Oe.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=ur(a),n=Yo(a,r<=s.toExpNeg||r>=s.toExpPos)):(si(t,1,au),e===void 0?e=s.rounding:si(e,0,8),a=Tt(new s(a),t,e),r=ur(a),n=Yo(a,t<=r||r<=s.toExpNeg,t)),n};Oe.toSignificantDigits=Oe.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(si(t,1,au),e===void 0?e=n.rounding:si(e,0,8)),Tt(new n(r),t,e)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ur(t),r=t.constructor;return Yo(t,e<=r.toExpNeg||e>=r.toExpPos)};function Q6(t,e){var r,n,a,s,o,c,d,h,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),Bt?Tt(e,p):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),s=o-a,s){for(s<0?(n=d,s=-s,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(p/Mt),c=o>c?o+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=d.length,s=h.length,c-s<0&&(s=c,n=h,h=d,d=n),r=0;s;)r=(d[--s]=d[s]+h[s]+r)/Nr|0,d[s]%=Nr;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Bt?Tt(e,p):e}function si(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Fo+t)}function Ka(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Mt-n.length,r&&(s+=ws(r)),s+=n;o=t[e],n=o+"",r=Mt-n.length,r&&(s+=ws(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Mi=(function(){function t(n,a){var s,o=0,c=n.length;for(n=n.slice();c--;)s=n[c]*a+o,n[c]=s%Nr|0,o=s/Nr|0;return o&&n.unshift(o),n}function e(n,a,s,o){var c,d;if(s!=o)d=s>o?1:-1;else for(c=d=0;c<s;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Nr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var c,d,h,m,p,y,v,w,k,b,j,N,E,P,S,T,A,R,M=n.constructor,D=n.s==a.s?1:-1,C=n.d,F=a.d;if(!n.s)return new M(n);if(!a.s)throw Error(ra+"Division by zero");for(d=n.e-a.e,A=F.length,S=C.length,v=new M(D),w=v.d=[],h=0;F[h]==(C[h]||0);)++h;if(F[h]>(C[h]||0)&&--d,s==null?N=s=M.precision:o?N=s+(ur(n)-ur(a))+1:N=s,N<0)return new M(0);if(N=N/Mt+2|0,h=0,A==1)for(m=0,F=F[0],N++;(h<S||m)&&N--;h++)E=m*Nr+(C[h]||0),w[h]=E/F|0,m=E%F|0;else{for(m=Nr/(F[0]+1)|0,m>1&&(F=t(F,m),C=t(C,m),A=F.length,S=C.length),P=A,k=C.slice(0,A),b=k.length;b<A;)k[b++]=0;R=F.slice(),R.unshift(0),T=F[0],F[1]>=Nr/2&&++T;do m=0,c=e(F,k,A,b),c<0?(j=k[0],A!=b&&(j=j*Nr+(k[1]||0)),m=j/T|0,m>1?(m>=Nr&&(m=Nr-1),p=t(F,m),y=p.length,b=k.length,c=e(p,k,y,b),c==1&&(m--,r(p,A<y?R:F,y))):(m==0&&(c=m=1),p=F.slice()),y=p.length,y<b&&p.unshift(0),r(k,p,b),c==-1&&(b=k.length,c=e(F,k,A,b),c<1&&(m++,r(k,A<b?R:F,b))),b=k.length):c===0&&(m++,k=[0]),w[h++]=m,c&&k[0]?k[b++]=C[P]||0:(k=[C[P]],b=1);while((P++<S||k[0]!==void 0)&&N--)}return w[0]||w.shift(),v.e=d,Tt(v,o?s+ur(v)+1:s)}})();function Y6(t,e){var r,n,a,s,o,c,d=0,h=0,m=t.constructor,p=m.precision;if(ur(t)>16)throw Error(sN+ur(t));if(!t.s)return new m(In);for(Bt=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,c+=n,r=a=s=new m(In),m.precision=c;;){if(a=Tt(a.times(t),c),r=r.times(++d),o=s.plus(Mi(a,r,c)),Ka(o.d).slice(0,c)===Ka(s.d).slice(0,c)){for(;h--;)s=Tt(s.times(s),c);return m.precision=p,e==null?(Bt=!0,Tt(s,p)):s}s=o}}function ur(t){for(var e=t.e*Mt,r=t.d[0];r>=10;r/=10)e++;return e}function Mw(t,e,r){if(e>t.LN10.sd())throw Bt=!0,r&&(t.precision=r),Error(ra+"LN10 precision limit exceeded");return Tt(new t(t.LN10),e)}function ws(t){for(var e="";t--;)e+="0";return e}function eh(t,e){var r,n,a,s,o,c,d,h,m,p=1,y=10,v=t,w=v.d,k=v.constructor,b=k.precision;if(v.s<1)throw Error(ra+(v.s?"NaN":"-Infinity"));if(v.eq(In))return new k(0);if(e==null?(Bt=!1,h=b):h=e,v.eq(10))return e==null&&(Bt=!0),Mw(k,h);if(h+=y,k.precision=h,r=Ka(w),n=r.charAt(0),s=ur(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Ka(v.d),n=r.charAt(0),p++;s=ur(v),n>1?(v=new k("0."+r),s++):v=new k(n+"."+r.slice(1))}else return d=Mw(k,h+2,b).times(s+""),v=eh(new k(n+"."+r.slice(1)),h-y).plus(d),k.precision=b,e==null?(Bt=!0,Tt(v,b)):v;for(c=o=v=Mi(v.minus(In),v.plus(In),h),m=Tt(v.times(v),h),a=3;;){if(o=Tt(o.times(m),h),d=c.plus(Mi(o,new k(a),h)),Ka(d.d).slice(0,h)===Ka(c.d).slice(0,h))return c=c.times(2),s!==0&&(c=c.plus(Mw(k,h+2,b).times(s+""))),c=Mi(c,new k(p),h),k.precision=b,e==null?(Bt=!0,Tt(c,b)):c;c=d,a+=2}}function KI(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=iu(r/Mt),t.d=[],n=(r+1)%Mt,r<0&&(n+=Mt),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Mt;n<a;)t.d.push(+e.slice(n,n+=Mt));e=e.slice(n),n=Mt-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Bt&&(t.e>Mp||t.e<-Mp))throw Error(sN+r)}else t.s=0,t.e=0,t.d=[0];return t}function Tt(t,e,r){var n,a,s,o,c,d,h,m,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Mt,a=e,h=p[m=0];else{if(m=Math.ceil((n+1)/Mt),s=p.length,m>=s)return t;for(h=s=p[m],o=1;s>=10;s/=10)o++;n%=Mt,a=n-Mt+o}if(r!==void 0&&(s=So(10,o-a-1),c=h/s%10|0,d=e<0||p[m+1]!==void 0||h%s,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/So(10,o-a):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return d?(s=ur(t),p.length=1,e=e-s-1,p[0]=So(10,(Mt-e%Mt)%Mt),t.e=iu(-e/Mt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,s=1,m--):(p.length=m+1,s=So(10,Mt-n),p[m]=a>0?(h/So(10,o-a)%So(10,a)|0)*s:0),d)for(;;)if(m==0){(p[0]+=s)==Nr&&(p[0]=1,++t.e);break}else{if(p[m]+=s,p[m]!=Nr)break;p[m--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(Bt&&(t.e>Mp||t.e<-Mp))throw Error(sN+ur(t));return t}function X6(t,e){var r,n,a,s,o,c,d,h,m,p,y=t.constructor,v=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Bt?Tt(e,v):e;if(d=t.d,p=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(m=o<0,m?(r=d,o=-o,c=p.length):(r=p,n=h,c=d.length),a=Math.max(Math.ceil(v/Mt),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=p.length,m=a<c,m&&(c=a),a=0;a<c;a++)if(d[a]!=p[a]){m=d[a]<p[a];break}o=0}for(m&&(r=d,d=p,p=r,e.s=-e.s),c=d.length,a=p.length-c;a>0;--a)d[c++]=0;for(a=p.length;a>o;){if(d[--a]<p[a]){for(s=a;s&&d[--s]===0;)d[s]=Nr-1;--d[s],d[a]+=Nr}d[a]-=p[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Bt?Tt(e,v):e):new y(0)}function Yo(t,e,r){var n,a=ur(t),s=Ka(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+ws(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+ws(-a-1)+s,r&&(n=r-o)>0&&(s+=ws(n))):a>=o?(s+=ws(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+ws(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=ws(n))),t.s<0?"-"+s:s}function QI(t,e){if(t.length>e)return t.length=e,!0}function J6(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Fo+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return KI(o,s.toString())}else if(typeof s!="string")throw Error(Fo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,gJ.test(s))KI(o,s);else throw Error(Fo+s)}if(a.prototype=Oe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=J6,a.config=a.set=yJ,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function yJ(t){if(!t||typeof t!="object")throw Error(ra+"Object expected");var e,r,n,a=["precision",1,au,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(iu(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Fo+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Fo+r+": "+n);return this}var oN=J6(pJ);In=new oN(1);const jt=oN;function xJ(t){return kJ(t)||wJ(t)||bJ(t)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(t,e){if(t){if(typeof t=="string")return y_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y_(t,e)}}function wJ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function kJ(t){if(Array.isArray(t))return y_(t)}function y_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _J=function(e){return e},Z6={},eL=function(e){return e===Z6},YI=function(e){return function r(){return arguments.length===0||arguments.length===1&&eL(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},jJ=function t(e,r){return e===1?r:YI(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(function(c){return c!==Z6}).length;return o>=e?r.apply(void 0,a):t(e-o,YI(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=a.map(function(p){return eL(p)?d.shift():p});return r.apply(void 0,xJ(m).concat(d))}))})},ag=function(e){return jJ(e.length,e)},x_=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},NJ=ag(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),SJ=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return _J;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},s.apply(void 0,arguments))}},v_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},tL=function(e){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(c,d){return c===r[d]})||(r=s,n=e.apply(void 0,s)),n}};function EJ(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function TJ(t,e,r){for(var n=new jt(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var AJ=ag(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),CJ=ag(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),PJ=ag(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const ig={rangeStep:TJ,getDigitCount:EJ,interpolateNumber:AJ,uninterpolateNumber:CJ,uninterpolateTruncation:PJ};function b_(t){return RJ(t)||OJ(t)||rL(t)||IJ()}function IJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function RJ(t){if(Array.isArray(t))return w_(t)}function th(t,e){return LJ(t)||MJ(t,e)||rL(t,e)||DJ()}function DJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rL(t,e){if(t){if(typeof t=="string")return w_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w_(t,e)}}function w_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MJ(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,s=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function LJ(t){if(Array.isArray(t))return t}function nL(t){var e=th(t,2),r=e[0],n=e[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function aL(t,e,r){if(t.lte(0))return new jt(0);var n=ig.getDigitCount(t.toNumber()),a=new jt(10).pow(n),s=t.div(a),o=n!==1?.05:.1,c=new jt(Math.ceil(s.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new jt(Math.ceil(d))}function $J(t,e,r){var n=1,a=new jt(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new jt(10).pow(ig.getDigitCount(t)-1),a=new jt(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new jt(Math.floor(t)))}else t===0?a=new jt(Math.floor((e-1)/2)):r||(a=new jt(Math.floor(t)));var o=Math.floor((e-1)/2),c=SJ(NJ(function(d){return a.add(new jt(d-o).mul(n)).toNumber()}),x_);return c(0,e)}function iL(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var s=aL(new jt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new jt(0):(o=new jt(t).add(e).div(2),o=o.sub(new jt(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),d=Math.ceil(new jt(e).sub(o).div(s).toNumber()),h=c+d+1;return h>r?iL(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:s,tickMin:o.sub(new jt(c).mul(s)),tickMax:o.add(new jt(d).mul(s))})}function FJ(t){var e=th(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=nL([r,n]),d=th(c,2),h=d[0],m=d[1];if(h===-1/0||m===1/0){var p=m===1/0?[h].concat(b_(x_(0,a-1).map(function(){return 1/0}))):[].concat(b_(x_(0,a-1).map(function(){return-1/0})),[m]);return r>n?v_(p):p}if(h===m)return $J(h,a,s);var y=iL(h,m,o,s),v=y.step,w=y.tickMin,k=y.tickMax,b=ig.rangeStep(w,k.add(new jt(.1).mul(v)),v);return r>n?v_(b):b}function VJ(t,e){var r=th(t,2),n=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=nL([n,a]),c=th(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var m=Math.max(e,2),p=aL(new jt(h).sub(d).div(m-1),s,0),y=[].concat(b_(ig.rangeStep(new jt(d),new jt(h).sub(new jt(.99).mul(p)),p)),[h]);return n>a?v_(y):y}var UJ=tL(FJ),BJ=tL(VJ),qJ="Invariant failed";function Xo(t,e){throw new Error(qJ)}var zJ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Oc(t){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(t)}function Lp(){return Lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lp.apply(this,arguments)}function WJ(t,e){return QJ(t)||KJ(t,e)||GJ(t,e)||HJ()}function HJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(t,e){if(t){if(typeof t=="string")return XI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XI(t,e)}}function XI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function QJ(t){if(Array.isArray(t))return t}function YJ(t,e){if(t==null)return{};var r=XJ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lL(n.key),n)}}function eZ(t,e,r){return e&&ZJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tZ(t,e,r){return e=$p(e),rZ(t,sL()?Reflect.construct(e,r||[],$p(t).constructor):e.apply(t,r))}function rZ(t,e){if(e&&(Oc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nZ(t)}function nZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sL=function(){return!!t})()}function $p(t){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(t)}function aZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k_(t,e)}function k_(t,e){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},k_(t,e)}function oL(t,e,r){return e=lL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lL(t){var e=iZ(t,"string");return Oc(e)=="symbol"?e:e+""}function iZ(t,e){if(Oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sg=(function(t){function e(){return JJ(this,e),tZ(this,e,arguments)}return aZ(e,t),eZ(e,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,y=YJ(n,zJ),v=We(y,!1);this.props.direction==="x"&&m.type!=="number"&&Xo();var w=d.map(function(k){var b=h(k,c),j=b.x,N=b.y,E=b.value,P=b.errorVal;if(!P)return null;var S=[],T,A;if(Array.isArray(P)){var R=WJ(P,2);T=R[0],A=R[1]}else T=A=P;if(s==="vertical"){var M=m.scale,D=N+a,C=D+o,F=D-o,L=M(E-T),Y=M(E+A);S.push({x1:Y,y1:C,x2:Y,y2:F}),S.push({x1:L,y1:D,x2:Y,y2:D}),S.push({x1:L,y1:C,x2:L,y2:F})}else if(s==="horizontal"){var ne=p.scale,W=j+a,G=W-o,X=W+o,ee=ne(E-T),re=ne(E+A);S.push({x1:G,y1:re,x2:X,y2:re}),S.push({x1:W,y1:ee,x2:W,y2:re}),S.push({x1:G,y1:ee,x2:X,y2:ee})}return Q.createElement(wt,Lp({className:"recharts-errorBar",key:"bar-".concat(S.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},v),S.map(function(z){return Q.createElement("line",Lp({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return Q.createElement(wt,{className:"recharts-errorBars"},w)}}])})(Q.Component);oL(sg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oL(sg,"displayName","ErrorBar");function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function JI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(r),!0).forEach(function(n){sZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sZ(t,e,r){return e=oZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oZ(t){var e=lZ(t,"string");return rh(e)=="symbol"?e:e+""}function lZ(t,e){if(rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cL=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,o=Pn(r,Lo);if(!o)return null;var c=Lo.defaultProps,d=c!==void 0?wo(wo({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:s==="children"?h=(n||[]).reduce(function(m,p){var y=p.item,v=p.props,w=v.sectors||v.data||[];return m.concat(w.map(function(k){return{type:o.props.iconType||y.props.legendType,value:k.name,color:k.fill,payload:k}}))},[]):h=(n||[]).map(function(m){var p=m.item,y=p.type.defaultProps,v=y!==void 0?wo(wo({},y),p.props):{},w=v.dataKey,k=v.name,b=v.legendType,j=v.hide;return{inactive:j,dataKey:w,type:d.iconType||b||"square",color:lN(p),value:k||w,payload:v}}),wo(wo(wo({},d),Lo.getWithHeight(o,a)),{},{payload:h,item:o})};function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function ZI(t){return hZ(t)||dZ(t)||uZ(t)||cZ()}function cZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uZ(t,e){if(t){if(typeof t=="string")return __(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return __(t,e)}}function dZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hZ(t){if(Array.isArray(t))return __(t)}function __(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(r),!0).forEach(function(n){yc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yc(t,e,r){return e=fZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fZ(t){var e=mZ(t,"string");return nh(e)=="symbol"?e:e+""}function mZ(t,e){if(nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qr(t,e,r){return it(t)||it(e)?r:gr(e)?Mn(t,e,r):Ge(e)?e(t):r}function kd(t,e,r,n){var a=hJ(t,function(c){return Qr(c,e)});if(r==="number"){var s=a.filter(function(c){return Se(c)||parseFloat(c)});return s.length?[rg(s),tg(s)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!it(c)}):a;return o.map(function(c){return gr(c)||c instanceof Date?c:""})}var pZ=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n?.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var d=s.range,h=0;h<c;h++){var m=h>0?a[h-1].coordinate:a[c-1].coordinate,p=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,v=void 0;if(an(p-m)!==an(y-p)){var w=[];if(an(y-p)===an(d[1]-d[0])){v=y;var k=p+d[1]-d[0];w[0]=Math.min(k,(k+m)/2),w[1]=Math.max(k,(k+m)/2)}else{v=m;var b=y+d[1]-d[0];w[0]=Math.min(p,(b+p)/2),w[1]=Math.max(p,(b+p)/2)}var j=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(e>j[0]&&e<=j[1]||e>=w[0]&&e<=w[1]){o=a[h].index;break}}else{var N=Math.min(m,y),E=Math.max(m,y);if(e>(N+p)/2&&e<=(E+p)/2){o=a[h].index;break}}}else for(var P=0;P<c;P++)if(P===0&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P===c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},lN=function(e){var r,n=e,a=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,o=s.stroke,c=s.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},gZ=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},c=Object.keys(s),d=0,h=c.length;d<h;d++)for(var m=s[c[d]].stackGroups,p=Object.keys(m),y=0,v=p.length;y<v;y++){var w=m[p[y]],k=w.items,b=w.cateAxisId,j=k.filter(function(A){return Di(A.type).indexOf("Bar")>=0});if(j&&j.length){var N=j[0].type.defaultProps,E=N!==void 0?Yt(Yt({},N),j[0].props):j[0].props,P=E.barSize,S=E[b];o[S]||(o[S]=[]);var T=it(P)?r:P;o[S].push({item:j[0],stackList:j.slice(1),barSize:it(T)?void 0:sn(T,n,0)})}}return o},yZ=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=sn(r,a,0,!0),m,p=[];if(o[0].barSize===+o[0].barSize){var y=!1,v=a/d,w=o.reduce(function(P,S){return P+S.barSize||0},0);w+=(d-1)*h,w>=a&&(w-=(d-1)*h,h=0),w>=a&&v>0&&(y=!0,v*=.9,w=d*v);var k=(a-w)/2>>0,b={offset:k-h,size:0};m=o.reduce(function(P,S){var T={item:S.item,position:{offset:b.offset+b.size+h,size:y?v:S.barSize}},A=[].concat(ZI(P),[T]);return b=A[A.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){A.push({item:R,position:b})}),A},p)}else{var j=sn(n,a,0,!0);a-2*j-(d-1)*h<=0&&(h=0);var N=(a-2*j-(d-1)*h)/d;N>1&&(N>>=0);var E=c===+c?Math.min(N,c):N;m=o.reduce(function(P,S,T){var A=[].concat(ZI(P),[{item:S.item,position:{offset:j+(N+h)*T+(N-E)/2,size:E}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){A.push({item:R,position:A[A.length-1].position})}),A},p)}return m},xZ=function(e,r,n,a){var s=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=cL({children:s,legendWidth:d});if(h){var m=a||{},p=m.width,y=m.height,v=h.align,w=h.verticalAlign,k=h.layout;if((k==="vertical"||k==="horizontal"&&w==="middle")&&v!=="center"&&Se(e[v]))return Yt(Yt({},e),{},yc({},v,e[v]+(p||0)));if((k==="horizontal"||k==="vertical"&&v==="center")&&w!=="middle"&&Se(e[w]))return Yt(Yt({},e),{},yc({},w,e[w]+(y||0)))}return e},vZ=function(e,r,n){return it(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},uL=function(e,r,n,a,s){var o=r.props.children,c=ta(o,sg).filter(function(h){return vZ(a,s,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,m){var p=Qr(m,n);if(it(p))return h;var y=Array.isArray(p)?[rg(p),tg(p)]:[p,p],v=d.reduce(function(w,k){var b=Qr(m,k,0),j=y[0]-Math.abs(Array.isArray(b)?b[0]:b),N=y[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(j,w[0]),Math.max(N,w[1])]},[1/0,-1/0]);return[Math.min(v[0],h[0]),Math.max(v[1],h[1])]},[1/0,-1/0])}return null},bZ=function(e,r,n,a,s){var o=r.map(function(c){return uL(e,c,n,s,a)}).filter(function(c){return!it(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},dL=function(e,r,n,a,s){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&uL(e,d,h,a)||kd(e,h,n,s)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var m=0,p=h.length;m<p;m++)c[h[m]]||(c[h[m]]=!0,d.push(h[m]));return d},[])},hL=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},fL=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var s,o,c=e.map(function(d){return d.coordinate===r&&(s=!0),d.coordinate===n&&(o=!0),d.coordinate});return s||c.push(r),o||c.push(n),c},Ii=function(e,r,n){if(!e)return null;var a=e.scale,s=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&c?.length>=2?an(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var y=s?s.indexOf(p):p;return{coordinate:a(y)+h,value:p,offset:h}});return m.filter(function(p){return!qh(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:a(p)+h,value:p,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(p){return{coordinate:a(p)+h,value:p,offset:h}}):a.domain().map(function(p,y){return{coordinate:a(p)+h,value:s?s[p]:p,index:y,offset:h}})},Lw=new WeakMap,Cm=function(e,r){if(typeof r!="function")return e;Lw.has(e)||Lw.set(e,new WeakMap);var n=Lw.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},mL=function(e,r,n){var a=e.scale,s=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:Qd(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Ip(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wd(),realScaleType:"point"}:s==="category"?{scale:Qd(),realScaleType:"band"}:{scale:Ip(),realScaleType:"linear"};if(Go(a)){var d="scale".concat(V0(a));return{scale:(FI[d]||wd)(),realScaleType:FI[d]?d:"point"}}return Ge(a)?{scale:a}:{scale:wd(),realScaleType:"point"}},tO=1e-4,pL=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),s=Math.min(a[0],a[1])-tO,o=Math.max(a[0],a[1])+tO,c=e(r[0]),d=e(r[n-1]);(c<s||c>o||d<s||d>o)&&e.domain([r[0],r[n-1]])}},wZ=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},kZ=function(e,r){if(!r||r.length!==2||!Se(r[0])||!Se(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!Se(e[0])||e[0]<n)&&(s[0]=n),(!Se(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},_Z=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0,c=0;c<r;++c){var d=qh(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},jZ=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0;o<r;++o){var c=qh(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=s,e[o][n][1]=s+c,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},NZ={sign:_Z,expand:hH,none:Nc,silhouette:fH,wiggle:mH,positive:jZ},SZ=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),s=NZ[n],o=dH().keys(a).value(function(c,d){return+Qr(c,d,0)}).order(Zk).offset(s);return o(e)},EZ=function(e,r,n,a,s,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(p,y){var v,w=(v=y.type)!==null&&v!==void 0&&v.defaultProps?Yt(Yt({},y.type.defaultProps),y.props):y.props,k=w.stackId,b=w.hide;if(b)return p;var j=w[n],N=p[j]||{hasStack:!1,stackGroups:{}};if(gr(k)){var E=N.stackGroups[k]||{numericAxisId:n,cateAxisId:a,items:[]};E.items.push(y),N.hasStack=!0,N.stackGroups[k]=E}else N.stackGroups[zh("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return Yt(Yt({},p),{},yc({},j,N))},d),m={};return Object.keys(h).reduce(function(p,y){var v=h[y];if(v.hasStack){var w={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(k,b){var j=v.stackGroups[b];return Yt(Yt({},k),{},yc({},b,{numericAxisId:n,cateAxisId:a,items:j.items,stackedData:SZ(e,j.items,s)}))},w)}return Yt(Yt({},p),{},yc({},y,v))},m)},gL=function(e,r){var n=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var m=UJ(h,s,c);return e.domain([rg(m),tg(m)]),{niceTicks:m}}if(s&&a==="number"){var p=e.domain(),y=BJ(p,s,c);return{niceTicks:y}}return null},rO=function(e){var r=e.axis,n=e.ticks,a=e.offset,s=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=Qr(o,r.dataKey,r.domain[c]);return it(d)?null:r.scale(d)-s/2+a},TZ=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},AZ=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(gr(s)){var o=r[s];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},CZ=function(e){return e.reduce(function(r,n){return[rg(n.concat([r[0]]).filter(Se)),tg(n.concat([r[1]]).filter(Se))]},[1/0,-1/0])},yL=function(e,r,n){return Object.keys(e).reduce(function(a,s){var o=e[s],c=o.stackedData,d=c.reduce(function(h,m){var p=CZ(m.slice(r,n+1));return[Math.min(h[0],p[0]),Math.max(h[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},nO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,j_=function(e,r,n){if(Ge(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(Se(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(nO.test(e[0])){var s=+nO.exec(e[0])[1];a[0]=r[0]-s}else Ge(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(Se(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(aO.test(e[1])){var o=+aO.exec(e[1])[1];a[1]=r[1]+o}else Ge(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Fp=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var s=Mj(r,function(p){return p.coordinate}),o=1/0,c=1,d=s.length;c<d;c++){var h=s[c],m=s[c-1];o=Math.min((h.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},iO=function(e,r,n){return!e||!e.length||ng(e,Mn(n,"type.defaultProps.domain"))?r:e},xL=function(e,r){var n=e.type.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,a=n.dataKey,s=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,m=n.hide;return Yt(Yt({},We(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:s||a,color:lN(e),value:Qr(r,a),type:d,payload:r,chartType:h,hide:m})};function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function sO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(r),!0).forEach(function(n){vL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vL(t,e,r){return e=PZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PZ(t){var e=IZ(t,"string");return ah(e)=="symbol"?e:e+""}function IZ(t,e){if(ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OZ(t,e){return LZ(t)||MZ(t,e)||DZ(t,e)||RZ()}function RZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DZ(t,e){if(t){if(typeof t=="string")return oO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oO(t,e)}}function oO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MZ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function LZ(t){if(Array.isArray(t))return t}var Vp=Math.PI/180,$Z=function(e){return e*180/Math.PI},Ot=function(e,r,n,a){return{x:e+Math.cos(-Vp*a)*n,y:r+Math.sin(-Vp*a)*n}},bL=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},FZ=function(e,r,n,a,s){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,m=sn(e.cx,o,o/2),p=sn(e.cy,c,c/2),y=bL(o,c,n),v=sn(e.innerRadius,y,0),w=sn(e.outerRadius,y,y*.8),k=Object.keys(r);return k.reduce(function(b,j){var N=r[j],E=N.domain,P=N.reversed,S;if(it(N.range))a==="angleAxis"?S=[d,h]:a==="radiusAxis"&&(S=[v,w]),P&&(S=[S[1],S[0]]);else{S=N.range;var T=S,A=OZ(T,2);d=A[0],h=A[1]}var R=mL(N,s),M=R.realScaleType,D=R.scale;D.domain(E).range(S),pL(D);var C=gL(D,Ni(Ni({},N),{},{realScaleType:M})),F=Ni(Ni(Ni({},N),C),{},{range:S,radius:w,realScaleType:M,scale:D,cx:m,cy:p,innerRadius:v,outerRadius:w,startAngle:d,endAngle:h});return Ni(Ni({},b),{},vL({},j,F))},{})},VZ=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-o,2))},UZ=function(e,r){var n=e.x,a=e.y,s=r.cx,o=r.cy,c=VZ({x:n,y:a},{x:s,y:o});if(c<=0)return{radius:c};var d=(n-s)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:$Z(h),angleInRadian:h}},BZ=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:n-o*360}},qZ=function(e,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(s,o);return e+c*360},lO=function(e,r){var n=e.x,a=e.y,s=UZ({x:n,y:a},r),o=s.radius,c=s.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var m=BZ(r),p=m.startAngle,y=m.endAngle,v=c,w;if(p<=y){for(;v>y;)v-=360;for(;v<p;)v+=360;w=v>=p&&v<=y}else{for(;v>p;)v-=360;for(;v<y;)v+=360;w=v>=y&&v<=p}return w?Ni(Ni({},r),{},{radius:o,angle:qZ(v,r)}):null},wL=function(e){return!V.isValidElement(e)&&!Ge(e)&&typeof e!="boolean"?e.className:""};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}var zZ=["offset"];function WZ(t){return QZ(t)||KZ(t)||GZ(t)||HZ()}function HZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GZ(t,e){if(t){if(typeof t=="string")return N_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N_(t,e)}}function KZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QZ(t){if(Array.isArray(t))return N_(t)}function N_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function YZ(t,e){if(t==null)return{};var r=XZ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cO(Object(r),!0).forEach(function(n){JZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JZ(t,e,r){return e=ZZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZZ(t){var e=eee(t,"string");return ih(e)=="symbol"?e:e+""}function eee(t,e){if(ih(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sh(){return sh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sh.apply(this,arguments)}var tee=function(e){var r=e.value,n=e.formatter,a=it(e.children)?r:e.children;return Ge(n)?n(a):a},ree=function(e,r){var n=an(r-e),a=Math.min(Math.abs(r-e),360);return n*a},nee=function(e,r,n){var a=e.position,s=e.viewBox,o=e.offset,c=e.className,d=s,h=d.cx,m=d.cy,p=d.innerRadius,y=d.outerRadius,v=d.startAngle,w=d.endAngle,k=d.clockWise,b=(p+y)/2,j=ree(v,w),N=j>=0?1:-1,E,P;a==="insideStart"?(E=v+N*o,P=k):a==="insideEnd"?(E=w-N*o,P=!k):a==="end"&&(E=w+N*o,P=k),P=j<=0?P:!P;var S=Ot(h,m,b,E),T=Ot(h,m,b,E+(P?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(P?0:1,`,
    `).concat(T.x,",").concat(T.y),R=it(e.id)?zh("recharts-radial-line-"):e.id;return Q.createElement("text",sh({},n,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",c)}),Q.createElement("defs",null,Q.createElement("path",{id:R,d:A})),Q.createElement("textPath",{xlinkHref:"#".concat(R)},r))},aee=function(e){var r=e.viewBox,n=e.offset,a=e.position,s=r,o=s.cx,c=s.cy,d=s.innerRadius,h=s.outerRadius,m=s.startAngle,p=s.endAngle,y=(m+p)/2;if(a==="outside"){var v=Ot(o,c,h+n,y),w=v.x,k=v.y;return{x:w,y:k,textAnchor:w>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var b=(d+h)/2,j=Ot(o,c,b,y),N=j.x,E=j.y;return{x:N,y:E,textAnchor:"middle",verticalAnchor:"middle"}},iee=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,s=e.position,o=r,c=o.x,d=o.y,h=o.width,m=o.height,p=m>=0?1:-1,y=p*a,v=p>0?"end":"start",w=p>0?"start":"end",k=h>=0?1:-1,b=k*a,j=k>0?"end":"start",N=k>0?"start":"end";if(s==="top"){var E={x:c+h/2,y:d-p*a,textAnchor:"middle",verticalAnchor:v};return pr(pr({},E),n?{height:Math.max(d-n.y,0),width:h}:{})}if(s==="bottom"){var P={x:c+h/2,y:d+m+y,textAnchor:"middle",verticalAnchor:w};return pr(pr({},P),n?{height:Math.max(n.y+n.height-(d+m),0),width:h}:{})}if(s==="left"){var S={x:c-b,y:d+m/2,textAnchor:j,verticalAnchor:"middle"};return pr(pr({},S),n?{width:Math.max(S.x-n.x,0),height:m}:{})}if(s==="right"){var T={x:c+h+b,y:d+m/2,textAnchor:N,verticalAnchor:"middle"};return pr(pr({},T),n?{width:Math.max(n.x+n.width-T.x,0),height:m}:{})}var A=n?{width:h,height:m}:{};return s==="insideLeft"?pr({x:c+b,y:d+m/2,textAnchor:N,verticalAnchor:"middle"},A):s==="insideRight"?pr({x:c+h-b,y:d+m/2,textAnchor:j,verticalAnchor:"middle"},A):s==="insideTop"?pr({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:w},A):s==="insideBottom"?pr({x:c+h/2,y:d+m-y,textAnchor:"middle",verticalAnchor:v},A):s==="insideTopLeft"?pr({x:c+b,y:d+y,textAnchor:N,verticalAnchor:w},A):s==="insideTopRight"?pr({x:c+h-b,y:d+y,textAnchor:j,verticalAnchor:w},A):s==="insideBottomLeft"?pr({x:c+b,y:d+m-y,textAnchor:N,verticalAnchor:v},A):s==="insideBottomRight"?pr({x:c+h-b,y:d+m-y,textAnchor:j,verticalAnchor:v},A):eu(s)&&(Se(s.x)||Co(s.x))&&(Se(s.y)||Co(s.y))?pr({x:c+sn(s.x,h),y:d+sn(s.y,m),textAnchor:"end",verticalAnchor:"end"},A):pr({x:c+h/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},see=function(e){return"cx"in e&&Se(e.cx)};function Sr(t){var e=t.offset,r=e===void 0?5:e,n=YZ(t,zZ),a=pr({offset:r},n),s=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,m=a.className,p=m===void 0?"":m,y=a.textBreakAll;if(!s||it(c)&&it(d)&&!V.isValidElement(h)&&!Ge(h))return null;if(V.isValidElement(h))return V.cloneElement(h,a);var v;if(Ge(h)){if(v=V.createElement(h,a),V.isValidElement(v))return v}else v=tee(a);var w=see(s),k=We(a,!0);if(w&&(o==="insideStart"||o==="insideEnd"||o==="end"))return nee(a,v,k);var b=w?aee(a):iee(a);return Q.createElement(Qo,sh({className:nt("recharts-label",p)},k,b,{breakAll:y}),v)}Sr.displayName="Label";var kL=function(e){var r=e.cx,n=e.cy,a=e.angle,s=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,m=e.outerRadius,p=e.x,y=e.y,v=e.top,w=e.left,k=e.width,b=e.height,j=e.clockWise,N=e.labelViewBox;if(N)return N;if(Se(k)&&Se(b)){if(Se(p)&&Se(y))return{x:p,y,width:k,height:b};if(Se(v)&&Se(w))return{x:v,y:w,width:k,height:b}}return Se(p)&&Se(y)?{x:p,y,width:0,height:0}:Se(r)&&Se(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:m||d||c||0,clockWise:j}:e.viewBox?e.viewBox:{}},oee=function(e,r){return e?e===!0?Q.createElement(Sr,{key:"label-implicit",viewBox:r}):gr(e)?Q.createElement(Sr,{key:"label-implicit",viewBox:r,value:e}):V.isValidElement(e)?e.type===Sr?V.cloneElement(e,{key:"label-implicit",viewBox:r}):Q.createElement(Sr,{key:"label-implicit",content:e,viewBox:r}):Ge(e)?Q.createElement(Sr,{key:"label-implicit",content:e,viewBox:r}):eu(e)?Q.createElement(Sr,sh({viewBox:r},e,{key:"label-implicit"})):null:null},lee=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=kL(e),o=ta(a,Sr).map(function(d,h){return V.cloneElement(d,{viewBox:r||s,key:"label-".concat(h)})});if(!n)return o;var c=oee(e.label,r||s);return[c].concat(WZ(o))};Sr.parseViewBox=kL;Sr.renderCallByParent=lee;var $w,uO;function cee(){if(uO)return $w;uO=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return $w=t,$w}var uee=cee();const dee=vt(uee);function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}var hee=["valueAccessor"],fee=["data","dataKey","clockWise","id","textBreakAll"];function mee(t){return xee(t)||yee(t)||gee(t)||pee()}function pee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gee(t,e){if(t){if(typeof t=="string")return S_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S_(t,e)}}function yee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xee(t){if(Array.isArray(t))return S_(t)}function S_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Up(){return Up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Up.apply(this,arguments)}function dO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(r),!0).forEach(function(n){vee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vee(t,e,r){return e=bee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bee(t){var e=wee(t,"string");return oh(e)=="symbol"?e:e+""}function wee(t,e){if(oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fO(t,e){if(t==null)return{};var r=kee(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _ee=function(e){return Array.isArray(e.value)?dee(e.value):e.value};function Ds(t){var e=t.valueAccessor,r=e===void 0?_ee:e,n=fO(t,hee),a=n.data,s=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=fO(n,fee);return!a||!a.length?null:Q.createElement(wt,{className:"recharts-label-list"},a.map(function(m,p){var y=it(s)?r(m,p):Qr(m&&m.payload,s),v=it(c)?{}:{id:"".concat(c,"-").concat(p)};return Q.createElement(Sr,Up({},We(m,!0),h,v,{parentViewBox:m.parentViewBox,value:y,textBreakAll:d,viewBox:Sr.parseViewBox(it(o)?m:hO(hO({},m),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ds.displayName="LabelList";function jee(t,e){return t?t===!0?Q.createElement(Ds,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||Ge(t)?Q.createElement(Ds,{key:"labelList-implicit",data:e,content:t}):eu(t)?Q.createElement(Ds,Up({data:e},t,{key:"labelList-implicit"})):null:null}function Nee(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ta(n,Ds).map(function(o,c){return V.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var s=jee(t.label,e);return[s].concat(mee(a))}Ds.renderCallByParent=Nee;function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},E_.apply(this,arguments)}function mO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mO(Object(r),!0).forEach(function(n){See(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function See(t,e,r){return e=Eee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eee(t){var e=Tee(t,"string");return lh(e)=="symbol"?e:e+""}function Tee(t,e){if(lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aee=function(e,r){var n=an(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Pm=function(e){var r=e.cx,n=e.cy,a=e.radius,s=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,m=d*(c?1:-1)+a,p=Math.asin(d/m)/Vp,y=h?s:s+o*p,v=Ot(r,n,m,y),w=Ot(r,n,a,y),k=h?s-o*p:s,b=Ot(r,n,m*Math.cos(p*Vp),k);return{center:v,circleTangency:w,lineTangency:b,theta:p}},_L=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.startAngle,c=e.endAngle,d=Aee(o,c),h=o+d,m=Ot(r,n,s,o),p=Ot(r,n,s,h),y="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var v=Ot(r,n,a,o),w=Ot(r,n,a,h);y+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Cee=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,m=e.endAngle,p=an(m-h),y=Pm({cx:r,cy:n,radius:s,angle:h,sign:p,cornerRadius:o,cornerIsExternal:d}),v=y.circleTangency,w=y.lineTangency,k=y.theta,b=Pm({cx:r,cy:n,radius:s,angle:m,sign:-p,cornerRadius:o,cornerIsExternal:d}),j=b.circleTangency,N=b.lineTangency,E=b.theta,P=d?Math.abs(h-m):Math.abs(h-m)-k-E;if(P<0)return c?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):_L({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:h,endAngle:m});var S="M ".concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
  `);if(a>0){var T=Pm({cx:r,cy:n,radius:a,angle:h,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=T.circleTangency,R=T.lineTangency,M=T.theta,D=Pm({cx:r,cy:n,radius:a,angle:m,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),C=D.circleTangency,F=D.lineTangency,L=D.theta,Y=d?Math.abs(h-m):Math.abs(h-m)-M-L;if(Y<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Y>180),",").concat(+(p>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(R.x,",").concat(R.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},Pee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cN=function(e){var r=pO(pO({},Pee),e),n=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,y=r.className;if(o<s||m===p)return null;var v=nt("recharts-sector",y),w=o-s,k=sn(c,w,0,!0),b;return k>0&&Math.abs(m-p)<360?b=Cee({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(k,w/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:p}):b=_L({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:m,endAngle:p}),Q.createElement("path",E_({},We(r,!0),{className:v,d:b,role:"img"}))};function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}function T_(){return T_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T_.apply(this,arguments)}function gO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(r),!0).forEach(function(n){Iee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iee(t,e,r){return e=Oee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oee(t){var e=Ree(t,"string");return ch(e)=="symbol"?e:e+""}function Ree(t,e){if(ch(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xO={curveBasisClosed:eH,curveBasisOpen:tH,curveBasis:ZW,curveBumpX:FW,curveBumpY:VW,curveLinearClosed:rH,curveLinear:B0,curveMonotoneX:nH,curveMonotoneY:aH,curveNatural:iH,curveStep:sH,curveStepAfter:lH,curveStepBefore:oH},Im=function(e){return e.x===+e.x&&e.y===+e.y},Zu=function(e){return e.x},ed=function(e){return e.y},Dee=function(e,r){if(Ge(e))return e;var n="curve".concat(V0(e));return(n==="curveMonotone"||n==="curveBump")&&r?xO["".concat(n).concat(r==="vertical"?"Y":"X")]:xO[n]||B0},Mee=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,s=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,m=Dee(n,c),p=h?s.filter(function(k){return Im(k)}):s,y;if(Array.isArray(o)){var v=h?o.filter(function(k){return Im(k)}):o,w=p.map(function(k,b){return yO(yO({},k),{},{base:v[b]})});return c==="vertical"?y=_m().y(ed).x1(Zu).x0(function(k){return k.base.x}):y=_m().x(Zu).y1(ed).y0(function(k){return k.base.y}),y.defined(Im).curve(m),y(w)}return c==="vertical"&&Se(o)?y=_m().y(ed).x1(Zu).x0(o):Se(o)?y=_m().x(Zu).y1(ed).y0(o):y=w3().x(Zu).y(ed),y.defined(Im).curve(m),y(p)},A_=function(e){var r=e.className,n=e.points,a=e.path,s=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Mee(e):a;return V.createElement("path",T_({},We(e,!1),pp(e),{className:nt("recharts-curve",r),d:o,ref:s}))},Fw={exports:{}},Vw,vO;function Lee(){if(vO)return Vw;vO=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Vw=t,Vw}var Uw,bO;function $ee(){if(bO)return Uw;bO=1;var t=Lee();function e(){}function r(){}return r.resetWarningCache=e,Uw=function(){function n(o,c,d,h,m,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return s.PropTypes=s,s},Uw}var wO;function Fee(){return wO||(wO=1,Fw.exports=$ee()()),Fw.exports}var Vee=Fee();const xt=vt(Vee);var Uee=Object.getOwnPropertyNames,Bee=Object.getOwnPropertySymbols,qee=Object.prototype.hasOwnProperty;function kO(t,e){return function(n,a,s){return t(n,a,s)&&e(n,a,s)}}function Om(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var s=a.cache,o=s.get(r),c=s.get(n);if(o&&c)return o===n&&c===r;s.set(r,n),s.set(n,r);var d=t(r,n,a);return s.delete(r),s.delete(n),d}}function _O(t){return Uee(t).concat(Bee(t))}var zee=Object.hasOwn||(function(t,e){return qee.call(t,e)});function ol(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Wee="__v",Hee="__o",Gee="_owner",jO=Object.getOwnPropertyDescriptor,NO=Object.keys;function Kee(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Qee(t,e){return ol(t.getTime(),e.getTime())}function Yee(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Xee(t,e){return t===e}function SO(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.entries(),o,c,d=0;(o=s.next())&&!o.done;){for(var h=e.entries(),m=!1,p=0;(c=h.next())&&!c.done;){if(a[p]){p++;continue}var y=o.value,v=c.value;if(r.equals(y[0],v[0],d,p,t,e,r)&&r.equals(y[1],v[1],y[0],v[0],t,e,r)){m=a[p]=!0;break}p++}if(!m)return!1;d++}return!0}var Jee=ol;function Zee(t,e,r){var n=NO(t),a=n.length;if(NO(e).length!==a)return!1;for(;a-- >0;)if(!jL(t,e,r,n[a]))return!1;return!0}function td(t,e,r){var n=_O(t),a=n.length;if(_O(e).length!==a)return!1;for(var s,o,c;a-- >0;)if(s=n[a],!jL(t,e,r,s)||(o=jO(t,s),c=jO(e,s),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function ete(t,e){return ol(t.valueOf(),e.valueOf())}function tte(t,e){return t.source===e.source&&t.flags===e.flags}function EO(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.values(),o,c;(o=s.next())&&!o.done;){for(var d=e.values(),h=!1,m=0;(c=d.next())&&!c.done;){if(!a[m]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[m]=!0;break}m++}if(!h)return!1}return!0}function rte(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function nte(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function jL(t,e,r,n){return(n===Gee||n===Hee||n===Wee)&&(t.$$typeof||e.$$typeof)?!0:zee(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var ate="[object Arguments]",ite="[object Boolean]",ste="[object Date]",ote="[object Error]",lte="[object Map]",cte="[object Number]",ute="[object Object]",dte="[object RegExp]",hte="[object Set]",fte="[object String]",mte="[object URL]",pte=Array.isArray,TO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,AO=Object.assign,gte=Object.prototype.toString.call.bind(Object.prototype.toString);function yte(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,c=t.areObjectsEqual,d=t.arePrimitiveWrappersEqual,h=t.areRegExpsEqual,m=t.areSetsEqual,p=t.areTypedArraysEqual,y=t.areUrlsEqual;return function(w,k,b){if(w===k)return!0;if(w==null||k==null)return!1;var j=typeof w;if(j!==typeof k)return!1;if(j!=="object")return j==="number"?o(w,k,b):j==="function"?a(w,k,b):!1;var N=w.constructor;if(N!==k.constructor)return!1;if(N===Object)return c(w,k,b);if(pte(w))return e(w,k,b);if(TO!=null&&TO(w))return p(w,k,b);if(N===Date)return r(w,k,b);if(N===RegExp)return h(w,k,b);if(N===Map)return s(w,k,b);if(N===Set)return m(w,k,b);var E=gte(w);return E===ste?r(w,k,b):E===dte?h(w,k,b):E===lte?s(w,k,b):E===hte?m(w,k,b):E===ute?typeof w.then!="function"&&typeof k.then!="function"&&c(w,k,b):E===mte?y(w,k,b):E===ote?n(w,k,b):E===ate?c(w,k,b):E===ite||E===cte||E===fte?d(w,k,b):!1}}function xte(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?td:Kee,areDatesEqual:Qee,areErrorsEqual:Yee,areFunctionsEqual:Xee,areMapsEqual:n?kO(SO,td):SO,areNumbersEqual:Jee,areObjectsEqual:n?td:Zee,arePrimitiveWrappersEqual:ete,areRegExpsEqual:tte,areSetsEqual:n?kO(EO,td):EO,areTypedArraysEqual:n?td:rte,areUrlsEqual:nte};if(r&&(a=AO({},a,r(a))),e){var s=Om(a.areArraysEqual),o=Om(a.areMapsEqual),c=Om(a.areObjectsEqual),d=Om(a.areSetsEqual);a=AO({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:d})}return a}function vte(t){return function(e,r,n,a,s,o,c){return t(e,r,c)}}function bte(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,s=t.strict;if(n)return function(d,h){var m=n(),p=m.cache,y=p===void 0?e?new WeakMap:void 0:p,v=m.meta;return r(d,h,{cache:y,equals:a,meta:v,strict:s})};if(e)return function(d,h){return r(d,h,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(d,h){return r(d,h,o)}}var wte=Ks();Ks({strict:!0});Ks({circular:!0});Ks({circular:!0,strict:!0});Ks({createInternalComparator:function(){return ol}});Ks({strict:!0,createInternalComparator:function(){return ol}});Ks({circular:!0,createInternalComparator:function(){return ol}});Ks({circular:!0,createInternalComparator:function(){return ol},strict:!0});function Ks(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,s=t.strict,o=s===void 0?!1:s,c=xte(t),d=yte(c),h=n?n(d):vte(d);return bte({circular:r,comparator:d,createState:a,equals:h,strict:o})}function kte(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function CO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(s){r<0&&(r=s),s-r>e?(t(s),r=-1):kte(a)};requestAnimationFrame(n)}function C_(t){"@babel/helpers - typeof";return C_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C_(t)}function _te(t){return Ete(t)||Ste(t)||Nte(t)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nte(t,e){if(t){if(typeof t=="string")return PO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PO(t,e)}}function PO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ste(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ete(t){if(Array.isArray(t))return t}function Tte(){var t={},e=function(){return null},r=!1,n=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,c=_te(o),d=c[0],h=c.slice(1);if(typeof d=="number"){CO(a.bind(null,h),d);return}a(d),CO(a.bind(null,h));return}C_(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function IO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(r),!0).forEach(function(n){NL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NL(t,e,r){return e=Ate(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ate(t){var e=Cte(t,"string");return uh(e)==="symbol"?e:String(e)}function Cte(t,e){if(uh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pte=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},Ite=function(e){return e},Ote=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},_d=function(e,r){return Object.keys(r).reduce(function(n,a){return OO(OO({},n),{},NL({},a,e(a,r[a])))},{})},RO=function(e,r,n){return e.map(function(a){return"".concat(Ote(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Rte(t,e){return Lte(t)||Mte(t,e)||SL(t,e)||Dte()}function Dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Lte(t){if(Array.isArray(t))return t}function $te(t){return Ute(t)||Vte(t)||SL(t)||Fte()}function Fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SL(t,e){if(t){if(typeof t=="string")return P_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P_(t,e)}}function Vte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ute(t){if(Array.isArray(t))return P_(t)}function P_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bp=1e-4,EL=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},TL=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},DO=function(e,r){return function(n){var a=EL(e,r);return TL(a,n)}},Bte=function(e,r){return function(n){var a=EL(e,r),s=[].concat($te(a.map(function(o,c){return o*c}).slice(1)),[0]);return TL(s,n)}},MO=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],s=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,c=1;break;case"ease":a=.25,s=.1,o=.25,c=1;break;case"ease-in":a=.42,s=0,o=1,c=1;break;case"ease-out":a=.42,s=0,o=.58,c=1;break;case"ease-in-out":a=0,s=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),m=Rte(h,4);a=m[0],s=m[1],o=m[2],c=m[3]}}}var p=DO(a,o),y=DO(s,c),v=Bte(a,o),w=function(j){return j>1?1:j<0?0:j},k=function(j){for(var N=j>1?1:j,E=N,P=0;P<8;++P){var S=p(E)-N,T=v(E);if(Math.abs(S-N)<Bp||T<Bp)return y(E);E=w(E-S/T)}return y(E)};return k.isStepper=!1,k},qte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,s=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(m,p,y){var v=-(m-p)*n,w=y*s,k=y+(v-w)*c/1e3,b=y*c/1e3+m;return Math.abs(b-p)<Bp&&Math.abs(k)<Bp?[p,0]:[b,k]};return d.isStepper=!0,d.dt=c,d},zte=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return MO(a);case"spring":return qte();default:if(a.split("(")[0]==="cubic-bezier")return MO(a)}return typeof a=="function"?a:null};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function LO(t){return Gte(t)||Hte(t)||AL(t)||Wte()}function Wte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gte(t){if(Array.isArray(t))return O_(t)}function $O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(r),!0).forEach(function(n){I_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I_(t,e,r){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kte(t){var e=Qte(t,"string");return dh(e)==="symbol"?e:String(e)}function Qte(t,e){if(dh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yte(t,e){return Zte(t)||Jte(t,e)||AL(t,e)||Xte()}function Xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AL(t,e){if(t){if(typeof t=="string")return O_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O_(t,e)}}function O_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Zte(t){if(Array.isArray(t))return t}var qp=function(e,r,n){return e+(r-e)*n},R_=function(e){var r=e.from,n=e.to;return r!==n},ere=function t(e,r,n){var a=_d(function(s,o){if(R_(o)){var c=e(o.from,o.to,o.velocity),d=Yte(c,2),h=d[0],m=d[1];return Rr(Rr({},o),{},{from:h,velocity:m})}return o},r);return n<1?_d(function(s,o){return R_(o)?Rr(Rr({},o),{},{velocity:qp(o.velocity,a[s].velocity,n),from:qp(o.from,a[s].from,n)}):o},r):t(e,a,n-1)};const tre=(function(t,e,r,n,a){var s=Pte(t,e),o=s.reduce(function(b,j){return Rr(Rr({},b),{},I_({},j,[t[j],e[j]]))},{}),c=s.reduce(function(b,j){return Rr(Rr({},b),{},I_({},j,{from:t[j],velocity:0,to:e[j]}))},{}),d=-1,h,m,p=function(){return null},y=function(){return _d(function(j,N){return N.from},c)},v=function(){return!Object.values(c).filter(R_).length},w=function(j){h||(h=j);var N=j-h,E=N/r.dt;c=ere(r,c,E),a(Rr(Rr(Rr({},t),e),y())),h=j,v()||(d=requestAnimationFrame(p))},k=function(j){m||(m=j);var N=(j-m)/n,E=_d(function(S,T){return qp.apply(void 0,LO(T).concat([r(N)]))},o);if(a(Rr(Rr(Rr({},t),e),E)),N<1)d=requestAnimationFrame(p);else{var P=_d(function(S,T){return qp.apply(void 0,LO(T).concat([r(1)]))},o);a(Rr(Rr(Rr({},t),e),P))}};return p=r.isStepper?w:k,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}var rre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nre(t,e){if(t==null)return{};var r=are(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function are(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Bw(t){return lre(t)||ore(t)||sre(t)||ire()}function ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sre(t,e){if(t){if(typeof t=="string")return D_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D_(t,e)}}function ore(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lre(t){if(Array.isArray(t))return D_(t)}function D_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function FO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(r),!0).forEach(function(n){dd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dd(t,e,r){return e=CL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ure(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CL(n.key),n)}}function dre(t,e,r){return e&&ure(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CL(t){var e=hre(t,"string");return Rc(e)==="symbol"?e:String(e)}function hre(t,e){if(Rc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M_(t,e)}function M_(t,e){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M_(t,e)}function mre(t){var e=pre();return function(){var n=zp(t),a;if(e){var s=zp(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return L_(this,a)}}function L_(t,e){if(e&&(Rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $_(t)}function $_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zp(t){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zp(t)}var Wi=(function(t){fre(r,t);var e=mre(r);function r(n,a){var s;cre(this,r),s=e.call(this,n,a);var o=s.props,c=o.isActive,d=o.attributeName,h=o.from,m=o.to,p=o.steps,y=o.children,v=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind($_(s)),s.changeStyle=s.changeStyle.bind($_(s)),!c||v<=0)return s.state={style:{}},typeof y=="function"&&(s.state={style:m}),L_(s);if(p&&p.length)s.state={style:p[0].style};else if(h){if(typeof y=="function")return s.state={style:h},L_(s);s.state={style:d?dd({},d,h):h}}else s.state={style:{}};return s}return dre(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,c=s.canBegin,d=s.attributeName,h=s.shouldReAnimate,m=s.to,p=s.from,y=this.state.style;if(c){if(!o){var v={style:d?dd({},d,m):m};this.state&&y&&(d&&y[d]!==m||!d&&y!==m)&&this.setState(v);return}if(!(wte(a.to,m)&&a.canBegin&&a.isActive)){var w=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var k=w||h?p:a.to;if(this.state&&y){var b={style:d?dd({},d,k):k};(d&&y[d]!==k||!d&&y!==k)&&this.setState(b)}this.runAnimation(va(va({},this.props),{},{from:k,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,c=a.to,d=a.duration,h=a.easing,m=a.begin,p=a.onAnimationEnd,y=a.onAnimationStart,v=tre(o,c,zte(h),d,this.changeStyle),w=function(){s.stopJSAnimation=v()};this.manager.start([y,m,w,d,p])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],m=h.style,p=h.duration,y=p===void 0?0:p,v=function(k,b,j){if(j===0)return k;var N=b.duration,E=b.easing,P=E===void 0?"ease":E,S=b.style,T=b.properties,A=b.onAnimationEnd,R=j>0?o[j-1]:b,M=T||Object.keys(S);if(typeof P=="function"||P==="spring")return[].concat(Bw(k),[s.runJSAnimation.bind(s,{from:R.style,to:S,duration:N,easing:P}),N]);var D=RO(M,N,P),C=va(va(va({},R.style),S),{},{transition:D});return[].concat(Bw(k),[C,N,A]).filter(Ite)};return this.manager.start([d].concat(Bw(o.reduce(v,[m,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Tte());var s=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,m=a.onAnimationStart,p=a.onAnimationEnd,y=a.steps,v=a.children,w=this.manager;if(this.unSubscribe=w.subscribe(this.handleStyleChange),typeof h=="function"||typeof v=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var k=c?dd({},c,d):d,b=RO(Object.keys(k),o,h);w.start([m,s,va(va({},k),{},{transition:b}),o,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=nre(a,rre),h=V.Children.count(s),m=this.state.style;if(typeof s=="function")return s(m);if(!c||h===0||o<=0)return s;var p=function(v){var w=v.props,k=w.style,b=k===void 0?{}:k,j=w.className,N=V.cloneElement(v,va(va({},d),{},{style:va(va({},b),m),className:j}));return N};return h===1?p(V.Children.only(s)):Q.createElement("div",null,V.Children.map(s,function(y){return p(y)}))}}]),r})(V.PureComponent);Wi.displayName="Animate";Wi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wi.propTypes={from:xt.oneOfType([xt.object,xt.string]),to:xt.oneOfType([xt.object,xt.string]),attributeName:xt.string,duration:xt.number,begin:xt.number,easing:xt.oneOfType([xt.string,xt.func]),steps:xt.arrayOf(xt.shape({duration:xt.number.isRequired,style:xt.object.isRequired,easing:xt.oneOfType([xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xt.func]),properties:xt.arrayOf("string"),onAnimationEnd:xt.func})),children:xt.oneOfType([xt.node,xt.func]),isActive:xt.bool,canBegin:xt.bool,onAnimationEnd:xt.func,shouldReAnimate:xt.bool,onAnimationStart:xt.func,onAnimationReStart:xt.func};function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wp.apply(this,arguments)}function gre(t,e){return bre(t)||vre(t,e)||xre(t,e)||yre()}function yre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(t,e){if(t){if(typeof t=="string")return VO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VO(t,e)}}function VO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function bre(t){if(Array.isArray(t))return t}function UO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function BO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(r),!0).forEach(function(n){wre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wre(t,e,r){return e=kre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kre(t){var e=_re(t,"string");return hh(e)=="symbol"?e:e+""}function _re(t,e){if(hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qO=function(e,r,n,a,s){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,m;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],y=0,v=4;y<v;y++)p[y]=s[y]>o?o:s[y];m="M".concat(e,",").concat(r+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(h,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*p[1])),m+="L ".concat(e+n,",").concat(r+a-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(h,`,
        `).concat(e+n-d*p[2],",").concat(r+a)),m+="L ".concat(e+d*p[3],",").concat(r+a),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*p[3])),m+="Z"}else if(o>0&&s===+s&&s>0){var w=Math.min(o,s);m="M ".concat(e,",").concat(r+c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+d*w,",").concat(r,`
            L `).concat(e+n-d*w,",").concat(r,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*w,`
            L `).concat(e+n,",").concat(r+a-c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n-d*w,",").concat(r+a,`
            L `).concat(e+d*w,",").concat(r+a,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*w," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return m},jre=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,s=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(s,s+c),m=Math.max(s,s+c),p=Math.min(o,o+d),y=Math.max(o,o+d);return n>=h&&n<=m&&a>=p&&a<=y}return!1},Nre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uN=function(e){var r=BO(BO({},Nre),e),n=V.useRef(),a=V.useState(-1),s=gre(a,2),o=s[0],c=s[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&c(P)}catch{}},[]);var d=r.x,h=r.y,m=r.width,p=r.height,y=r.radius,v=r.className,w=r.animationEasing,k=r.animationDuration,b=r.animationBegin,j=r.isAnimationActive,N=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||m===0||p===0)return null;var E=nt("recharts-rectangle",v);return N?Q.createElement(Wi,{canBegin:o>0,from:{width:m,height:p,x:d,y:h},to:{width:m,height:p,x:d,y:h},duration:k,animationEasing:w,isActive:N},function(P){var S=P.width,T=P.height,A=P.x,R=P.y;return Q.createElement(Wi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:k,isActive:j,easing:w},Q.createElement("path",Wp({},We(r,!0),{className:E,d:qO(A,R,S,T,y),ref:n})))}):Q.createElement("path",Wp({},We(r,!0),{className:E,d:qO(d,h,m,p,y)}))},Sre=["points","className","baseLinePoints","connectNulls"];function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ac.apply(this,arguments)}function Ere(t,e){if(t==null)return{};var r=Tre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Tre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zO(t){return Ire(t)||Pre(t)||Cre(t)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cre(t,e){if(t){if(typeof t=="string")return F_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F_(t,e)}}function Pre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ire(t){if(Array.isArray(t))return F_(t)}function F_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var WO=function(e){return e&&e.x===+e.x&&e.y===+e.y},Ore=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){WO(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),WO(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},jd=function(e,r){var n=Ore(e);r&&(n=[n.reduce(function(s,o){return[].concat(zO(s),zO(o))},[])]);var a=n.map(function(s){return s.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Rre=function(e,r,n){var a=jd(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(jd(r.reverse(),n).slice(1))},Dre=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,s=e.connectNulls,o=Ere(e,Sre);if(!r||!r.length)return null;var c=nt("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=Rre(r,a,s);return Q.createElement("g",{className:c},Q.createElement("path",ac({},We(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?Q.createElement("path",ac({},We(o,!0),{fill:"none",d:jd(r,s)})):null,d?Q.createElement("path",ac({},We(o,!0),{fill:"none",d:jd(a,s)})):null)}var m=jd(r,s);return Q.createElement("path",ac({},We(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:c,d:m}))};function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V_.apply(this,arguments)}var dN=function(e){var r=e.cx,n=e.cy,a=e.r,s=e.className,o=nt("recharts-dot",s);return r===+r&&n===+n&&a===+a?V.createElement("circle",V_({},We(e,!1),pp(e),{className:o,cx:r,cy:n,r:a})):null};function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}var Mre=["x","y","top","left","width","height","className"];function U_(){return U_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U_.apply(this,arguments)}function HO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lre(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(r),!0).forEach(function(n){$re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $re(t,e,r){return e=Fre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fre(t){var e=Vre(t,"string");return fh(e)=="symbol"?e:e+""}function Vre(t,e){if(fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ure(t,e){if(t==null)return{};var r=Bre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qre=function(e,r,n,a,s,o){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},zre=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,m=e.width,p=m===void 0?0:m,y=e.height,v=y===void 0?0:y,w=e.className,k=Ure(e,Mre),b=Lre({x:n,y:s,top:c,left:h,width:p,height:v},k);return!Se(n)||!Se(s)||!Se(p)||!Se(v)||!Se(c)||!Se(h)?null:Q.createElement("path",U_({},We(b,!0),{className:nt("recharts-cross",w),d:qre(n,s,p,v,c,h)}))},qw,GO;function Wre(){if(GO)return qw;GO=1;var t=eg(),e=H6(),r=ci();function n(a,s){return a&&a.length?t(a,r(s,2),e):void 0}return qw=n,qw}var Hre=Wre();const Gre=vt(Hre);var zw,KO;function Kre(){if(KO)return zw;KO=1;var t=eg(),e=ci(),r=G6();function n(a,s){return a&&a.length?t(a,e(s,2),r):void 0}return zw=n,zw}var Qre=Kre();const Yre=vt(Qre);var Xre=["cx","cy","angle","ticks","axisLine"],Jre=["ticks","tick","angle","tickFormatter","stroke"];function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nd.apply(this,arguments)}function QO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ko(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QO(Object(r),!0).forEach(function(n){og(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YO(t,e){if(t==null)return{};var r=Zre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ene(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IL(n.key),n)}}function tne(t,e,r){return e&&XO(t.prototype,e),r&&XO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rne(t,e,r){return e=Hp(e),nne(t,PL()?Reflect.construct(e,r||[],Hp(t).constructor):e.apply(t,r))}function nne(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ane(t)}function ane(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PL=function(){return!!t})()}function Hp(t){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(t)}function ine(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B_(t,e)}function B_(t,e){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},B_(t,e)}function og(t,e,r){return e=IL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IL(t){var e=sne(t,"string");return Dc(e)=="symbol"?e:e+""}function sne(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lg=(function(t){function e(){return ene(this,e),rne(this,e,arguments)}return ine(e,t),tne(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,o=s.angle,c=s.cx,d=s.cy;return Ot(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,c=n.ticks,d=Gre(c,function(m){return m.coordinate||0}),h=Yre(c,function(m){return m.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=YO(n,Xre),m=c.reduce(function(w,k){return[Math.min(w[0],k.coordinate),Math.max(w[1],k.coordinate)]},[1/0,-1/0]),p=Ot(a,s,m[0],o),y=Ot(a,s,m[1],o),v=ko(ko(ko({},We(h,!1)),{},{fill:"none"},We(d,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return Q.createElement("line",Nd({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,m=YO(a,Jre),p=this.getTickTextAnchor(),y=We(m,!1),v=We(o,!1),w=s.map(function(k,b){var j=n.getTickValueCoord(k),N=ko(ko(ko(ko({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(j.x,", ").concat(j.y,")")},y),{},{stroke:"none",fill:h},v),{},{index:b},j),{},{payload:k});return Q.createElement(wt,Nd({className:nt("recharts-polar-radius-axis-tick",wL(o)),key:"tick-".concat(k.coordinate)},Ko(n.props,k,b)),e.renderTickItem(o,N,d?d(k.value,b):k.value))});return Q.createElement(wt,{className:"recharts-polar-radius-axis-ticks"},w)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,o=n.tick;return!a||!a.length?null:Q.createElement(wt,{className:nt("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Sr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return Q.isValidElement(n)?o=Q.cloneElement(n,a):Ge(n)?o=n(a):o=Q.createElement(Qo,Nd({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])})(V.PureComponent);og(lg,"displayName","PolarRadiusAxis");og(lg,"axisType","radiusAxis");og(lg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function Eo(){return Eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eo.apply(this,arguments)}function JO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JO(Object(r),!0).forEach(function(n){cg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function one(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RL(n.key),n)}}function lne(t,e,r){return e&&ZO(t.prototype,e),r&&ZO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cne(t,e,r){return e=Gp(e),une(t,OL()?Reflect.construct(e,r||[],Gp(t).constructor):e.apply(t,r))}function une(t,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dne(t)}function dne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OL=function(){return!!t})()}function Gp(t){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gp(t)}function hne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q_(t,e)}function q_(t,e){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},q_(t,e)}function cg(t,e,r){return e=RL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RL(t){var e=fne(t,"string");return Mc(e)=="symbol"?e:e+""}function fne(t,e){if(Mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mne=Math.PI/180,eR=1e-5,ug=(function(t){function e(){return one(this,e),cne(this,e,arguments)}return hne(e,t),lne(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,m=h||8,p=Ot(s,o,c,n.coordinate),y=Ot(s,o,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*mne),o;return s>eR?o=a==="outer"?"start":"end":s<-eR?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=_o(_o({},We(this.props,!1)),{},{fill:"none"},We(c,!1));if(d==="circle")return Q.createElement(dN,Eo({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:s,r:o}));var m=this.props.ticks,p=m.map(function(y){return Ot(a,s,o,y.coordinate)});return Q.createElement(Dre,Eo({className:"recharts-polar-angle-axis-line"},h,{points:p}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,m=We(this.props,!1),p=We(o,!1),y=_o(_o({},m),{},{fill:"none"},We(c,!1)),v=s.map(function(w,k){var b=n.getTickLineCoord(w),j=n.getTickTextAnchor(w),N=_o(_o(_o({textAnchor:j},m),{},{stroke:"none",fill:h},p),{},{index:k,payload:w,x:b.x2,y:b.y2});return Q.createElement(wt,Eo({className:nt("recharts-polar-angle-axis-tick",wL(o)),key:"tick-".concat(w.coordinate)},Ko(n.props,w,k)),c&&Q.createElement("line",Eo({className:"recharts-polar-angle-axis-tick-line"},y,b)),o&&e.renderTickItem(o,N,d?d(w.value,k):w.value))});return Q.createElement(wt,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!a||!a.length?null:Q.createElement(wt,{className:nt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var o;return Q.isValidElement(n)?o=Q.cloneElement(n,a):Ge(n)?o=n(a):o=Q.createElement(Qo,Eo({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])})(V.PureComponent);cg(ug,"displayName","PolarAngleAxis");cg(ug,"axisType","angleAxis");cg(ug,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ww,tR;function pne(){if(tR)return Ww;tR=1;var t=z3(),e=t(Object.getPrototypeOf,Object);return Ww=e,Ww}var Hw,rR;function gne(){if(rR)return Hw;rR=1;var t=Hi(),e=pne(),r=Gi(),n="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,c=s.hasOwnProperty,d=o.call(Object);function h(m){if(!r(m)||t(m)!=n)return!1;var p=e(m);if(p===null)return!0;var y=c.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==d}return Hw=h,Hw}var yne=gne();const xne=vt(yne);var Gw,nR;function vne(){if(nR)return Gw;nR=1;var t=Hi(),e=Gi(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return Gw=n,Gw}var bne=vne();const wne=vt(bne);function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kp.apply(this,arguments)}function kne(t,e){return Sne(t)||Nne(t,e)||jne(t,e)||_ne()}function _ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jne(t,e){if(t){if(typeof t=="string")return aR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aR(t,e)}}function aR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sne(t){if(Array.isArray(t))return t}function iR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(r),!0).forEach(function(n){Ene(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ene(t,e,r){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tne(t){var e=Ane(t,"string");return mh(e)=="symbol"?e:e+""}function Ane(t,e){if(mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oR=function(e,r,n,a,s){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+s),c+="L ".concat(e+n-o/2-a,",").concat(r+s),c+="L ".concat(e,",").concat(r," Z"),c},Cne={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pne=function(e){var r=sR(sR({},Cne),e),n=V.useRef(),a=V.useState(-1),s=kne(a,2),o=s[0],c=s[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&c(E)}catch{}},[]);var d=r.x,h=r.y,m=r.upperWidth,p=r.lowerWidth,y=r.height,v=r.className,w=r.animationEasing,k=r.animationDuration,b=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||y!==+y||m===0&&p===0||y===0)return null;var N=nt("recharts-trapezoid",v);return j?Q.createElement(Wi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:m,lowerWidth:p,height:y,x:d,y:h},duration:k,animationEasing:w,isActive:j},function(E){var P=E.upperWidth,S=E.lowerWidth,T=E.height,A=E.x,R=E.y;return Q.createElement(Wi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:k,easing:w},Q.createElement("path",Kp({},We(r,!0),{className:N,d:oR(A,R,P,S,T),ref:n})))}):Q.createElement("g",null,Q.createElement("path",Kp({},We(r,!0),{className:N,d:oR(d,h,m,p,y)})))},Ine=["option","shapeType","propTransformer","activeClassName","isActive"];function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function One(t,e){if(t==null)return{};var r=Rne(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(r),!0).forEach(function(n){Dne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dne(t,e,r){return e=Mne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mne(t){var e=Lne(t,"string");return ph(e)=="symbol"?e:e+""}function Lne(t,e){if(ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ne(t,e){return Qp(Qp({},e),t)}function Fne(t,e){return t==="symbols"}function cR(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return Q.createElement(uN,r);case"trapezoid":return Q.createElement(Pne,r);case"sector":return Q.createElement(cN,r);case"symbols":if(Fne(e))return Q.createElement(Tj,r);break;default:return null}}function Vne(t){return V.isValidElement(t)?t.props:t}function DL(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?$ne:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,c=t.isActive,d=One(t,Ine),h;if(V.isValidElement(e))h=V.cloneElement(e,Qp(Qp({},d),Vne(e)));else if(Ge(e))h=e(d);else if(xne(e)&&!wne(e)){var m=a(e,d);h=Q.createElement(cR,{shapeType:r,elementProps:m})}else{var p=d;h=Q.createElement(cR,{shapeType:r,elementProps:p})}return c?Q.createElement(wt,{className:o},h):h}function dg(t,e){return e!=null&&"trapezoids"in t.props}function hg(t,e){return e!=null&&"sectors"in t.props}function gh(t,e){return e!=null&&"points"in t.props}function Une(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&s}function Bne(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function qne(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function zne(t,e){var r;return dg(t,e)?r=Une:hg(t,e)?r=Bne:gh(t,e)&&(r=qne),r}function Wne(t,e){var r;return dg(t,e)?r="trapezoids":hg(t,e)?r="sectors":gh(t,e)&&(r="points"),r}function Hne(t,e){if(dg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(hg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return gh(t,e)?e.payload:{}}function Gne(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=Wne(r,e),s=Hne(r,e),o=n.filter(function(d,h){var m=ng(s,d),p=r.props[a].filter(function(w){var k=zne(r,e);return k(w,e)}),y=r.props[a].indexOf(p[p.length-1]),v=h===y;return m&&v}),c=n.indexOf(o[o.length-1]);return c}var Km;function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ic.apply(this,arguments)}function uR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(r),!0).forEach(function(n){Xn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LL(n.key),n)}}function Qne(t,e,r){return e&&dR(t.prototype,e),r&&dR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yne(t,e,r){return e=Yp(e),Xne(t,ML()?Reflect.construct(e,r||[],Yp(t).constructor):e.apply(t,r))}function Xne(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jne(t)}function Jne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ML(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!t})()}function Yp(t){return Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yp(t)}function Zne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z_(t,e)}function z_(t,e){return z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},z_(t,e)}function Xn(t,e,r){return e=LL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LL(t){var e=eae(t,"string");return Lc(e)=="symbol"?e:e+""}function eae(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qi=(function(t){function e(r){var n;return Kne(this,e),n=Yne(this,e,[r]),Xn(n,"pieRef",null),Xn(n,"sectorRefs",[]),Xn(n,"id",zh("recharts-pie-")),Xn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ge(a)&&a()}),Xn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ge(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Zne(e,t),Qne(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,d=s.dataKey,h=s.valueKey,m=We(this.props,!1),p=We(o,!1),y=We(c,!1),v=o&&o.offsetRadius||20,w=n.map(function(k,b){var j=(k.startAngle+k.endAngle)/2,N=Ot(k.cx,k.cy,k.outerRadius+v,j),E=Pt(Pt(Pt(Pt({},m),k),{},{stroke:"none"},p),{},{index:b,textAnchor:e.getTextAnchor(N.x,k.cx)},N),P=Pt(Pt(Pt(Pt({},m),k),{},{fill:"none",stroke:k.fill},y),{},{index:b,points:[Ot(k.cx,k.cy,k.outerRadius,j),N]}),S=d;return it(d)&&it(h)?S="value":it(d)&&(S=h),Q.createElement(wt,{key:"label-".concat(k.startAngle,"-").concat(k.endAngle,"-").concat(k.midAngle,"-").concat(b)},c&&e.renderLabelLineItem(c,P,"line"),e.renderLabelItem(o,E,Qr(k,S)))});return Q.createElement(wt,{className:"recharts-pie-labels"},w)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,o=s.activeShape,c=s.blendStroke,d=s.inactiveShape;return n.map(function(h,m){if(h?.startAngle===0&&h?.endAngle===0&&n.length!==1)return null;var p=a.isActiveIndex(m),y=d&&a.hasActiveIndex()?d:null,v=p?o:y,w=Pt(Pt({},h),{},{stroke:c?h.fill:h.stroke,tabIndex:-1});return Q.createElement(wt,ic({ref:function(b){b&&!a.sectorRefs.includes(b)&&a.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Ko(a.props,h,m),{key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(m)}),Q.createElement(DL,ic({option:v,isActive:p,shapeType:"sector"},w)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,p=this.state,y=p.prevSectors,v=p.prevIsAnimationActive;return Q.createElement(Wi,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(v),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(w){var k=w.t,b=[],j=s&&s[0],N=j.startAngle;return s.forEach(function(E,P){var S=y&&y[P],T=P>0?Mn(E,"paddingAngle",0):0;if(S){var A=bs(S.endAngle-S.startAngle,E.endAngle-E.startAngle),R=Pt(Pt({},E),{},{startAngle:N+T,endAngle:N+A(k)+T});b.push(R),N=R.endAngle}else{var M=E.endAngle,D=E.startAngle,C=bs(0,M-D),F=C(k),L=Pt(Pt({},E),{},{startAngle:N+T,endAngle:N+F+T});b.push(L),N=L.endAngle}}),Q.createElement(wt,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[c].focus(),a.setState({sectorToFocus:c});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!ng(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,o=a.sectors,c=a.className,d=a.label,h=a.cx,m=a.cy,p=a.innerRadius,y=a.outerRadius,v=a.isAnimationActive,w=this.state.isAnimationFinished;if(s||!o||!o.length||!Se(h)||!Se(m)||!Se(p)||!Se(y))return null;var k=nt("recharts-pie",c);return Q.createElement(wt,{tabIndex:this.props.rootTabIndex,className:k,ref:function(j){n.pieRef=j}},this.renderSectors(),d&&this.renderLabels(o),Sr.renderCallByParent(this.props,null,!1),(!v||w)&&Ds.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if(Q.isValidElement(n))return Q.cloneElement(n,a);if(Ge(n))return n(a);var o=nt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return Q.createElement(A_,ic({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,s){if(Q.isValidElement(n))return Q.cloneElement(n,a);var o=s;if(Ge(n)&&(o=n(a),Q.isValidElement(o)))return o;var c=nt("recharts-pie-label-text",typeof n!="boolean"&&!Ge(n)?n.className:"");return Q.createElement(Qo,ic({},a,{alignmentBaseline:"middle",className:c}),o)}}])})(V.PureComponent);Km=Qi;Xn(Qi,"displayName","Pie");Xn(Qi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ru.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Xn(Qi,"parseDeltaAngle",function(t,e){var r=an(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Xn(Qi,"getRealPieData",function(t){var e=t.data,r=t.children,n=We(t,!1),a=ta(r,G0);return e&&e.length?e.map(function(s,o){return Pt(Pt(Pt({payload:s},n),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return Pt(Pt({},n),s.props)}):[]});Xn(Qi,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,s=e.height,o=bL(a,s),c=n+sn(t.cx,a,a/2),d=r+sn(t.cy,s,s/2),h=sn(t.innerRadius,o,0),m=sn(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:d,innerRadius:h,outerRadius:m,maxRadius:p}});Xn(Qi,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Pt(Pt({},e.type.defaultProps),e.props):e.props,a=Km.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,o=n.startAngle,c=n.endAngle,d=n.paddingAngle,h=n.dataKey,m=n.nameKey,p=n.valueKey,y=n.tooltipType,v=Math.abs(n.minAngle),w=Km.parseCoordinateOfPie(n,r),k=Km.parseDeltaAngle(o,c),b=Math.abs(k),j=h;it(h)&&it(p)?(Sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):it(h)&&(Sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=p);var N=a.filter(function(R){return Qr(R,j,0)!==0}).length,E=(b>=360?N:N-1)*d,P=b-N*v-E,S=a.reduce(function(R,M){var D=Qr(M,j,0);return R+(Se(D)?D:0)},0),T;if(S>0){var A;T=a.map(function(R,M){var D=Qr(R,j,0),C=Qr(R,m,M),F=(Se(D)?D:0)/S,L;M?L=A.endAngle+an(k)*d*(D!==0?1:0):L=o;var Y=L+an(k)*((D!==0?v:0)+F*P),ne=(L+Y)/2,W=(w.innerRadius+w.outerRadius)/2,G=[{name:C,value:D,payload:R,dataKey:j,type:y}],X=Ot(w.cx,w.cy,W,ne);return A=Pt(Pt(Pt({percent:F,cornerRadius:s,name:C,tooltipPayload:G,midAngle:ne,middleRadius:W,tooltipPosition:X},R),w),{},{value:Qr(R,j),startAngle:L,endAngle:Y,payload:R,paddingAngle:an(k)*d}),A})}return Pt(Pt({},w),{},{sectors:T,data:a})});var Kw,hR;function tae(){if(hR)return Kw;hR=1;var t=Math.ceil,e=Math.max;function r(n,a,s,o){for(var c=-1,d=e(t((a-n)/(s||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=s;return h}return Kw=r,Kw}var Qw,fR;function $L(){if(fR)return Qw;fR=1;var t=s6(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var s=a<0?-1:1;return s*r}return a===a?a:0}return Qw=n,Qw}var Yw,mR;function rae(){if(mR)return Yw;mR=1;var t=tae(),e=H0(),r=$L();function n(a){return function(s,o,c){return c&&typeof c!="number"&&e(s,o,c)&&(o=c=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),c=c===void 0?s<o?1:-1:r(c),t(s,o,c,a)}}return Yw=n,Yw}var Xw,pR;function nae(){if(pR)return Xw;pR=1;var t=rae(),e=t();return Xw=e,Xw}var aae=nae();const Xp=vt(aae);function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function gR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(r),!0).forEach(function(n){FL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FL(t,e,r){return e=iae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iae(t){var e=sae(t,"string");return yh(e)=="symbol"?e:e+""}function sae(t,e){if(yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oae=["Webkit","Moz","O","ms"],lae=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=oae.reduce(function(s,o){return yR(yR({},s),{},FL({},o+n,r))},{});return a[e]=r,a};function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jp.apply(this,arguments)}function xR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xR(Object(r),!0).forEach(function(n){Cn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UL(n.key),n)}}function uae(t,e,r){return e&&vR(t.prototype,e),r&&vR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dae(t,e,r){return e=Zp(e),hae(t,VL()?Reflect.construct(e,r||[],Zp(t).constructor):e.apply(t,r))}function hae(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fae(t)}function fae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VL=function(){return!!t})()}function Zp(t){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zp(t)}function mae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W_(t,e)}function W_(t,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},W_(t,e)}function Cn(t,e,r){return e=UL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UL(t){var e=pae(t,"string");return $c(e)=="symbol"?e:e+""}function pae(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gae=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,s=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=wd().domain(Xp(0,d)).range([s,s+o-c]),m=h.domain().map(function(p){return h(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:m}},bR=function(e){return e.changedTouches&&!!e.changedTouches.length},Fc=(function(t){function e(r){var n;return cae(this,e),n=dae(this,e,[r]),Cn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Cn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Cn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,s=a.endIndex,o=a.onDragEnd,c=a.startIndex;o?.({endIndex:s,startIndex:c})}),n.detachDragEndListener()}),Cn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Cn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Cn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Cn(n,"handleSlideDragStart",function(a){var s=bR(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return mae(e,t),uae(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,m=h.length-1,p=Math.min(a,s),y=Math.max(a,s),v=e.getIndexInRange(o,p),w=e.getIndexInRange(o,y);return{startIndex:v-v%d,endIndex:w===m?m:w-w%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,o=a.tickFormatter,c=a.dataKey,d=Qr(s[n],c,n);return Ge(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,m=d.width,p=d.travellerWidth,y=d.startIndex,v=d.endIndex,w=d.onChange,k=n.pageX-s;k>0?k=Math.min(k,h+m-p-c,h+m-p-o):k<0&&(k=Math.max(k,h-o,h-c));var b=this.getIndex({startX:o+k,endX:c+k});(b.startIndex!==y||b.endIndex!==v)&&w&&w(b),this.setState({startX:o+k,endX:c+k,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=bR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],m=this.props,p=m.x,y=m.width,v=m.travellerWidth,w=m.onChange,k=m.gap,b=m.data,j={startX:this.state.startX,endX:this.state.endX},N=n.pageX-s;N>0?N=Math.min(N,p+y-v-h):N<0&&(N=Math.max(N,p-h)),j[o]=h+N;var E=this.getIndex(j),P=E.startIndex,S=E.endIndex,T=function(){var R=b.length-1;return o==="startX"&&(c>d?P%k===0:S%k===0)||c<d&&S===R||o==="endX"&&(c>d?S%k===0:P%k===0)||c>d&&S===R};this.setState(Cn(Cn({},o,h+N),"brushMoveStartX",n.pageX),function(){w&&T()&&w(E)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,m=this.state[a],p=c.indexOf(m);if(p!==-1){var y=p+n;if(!(y===-1||y>=c.length)){var v=c[y];a==="startX"&&v>=h||a==="endX"&&v<=d||this.setState(Cn({},a,v),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return Q.createElement("rect",{stroke:h,fill:d,x:a,y:s,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.data,h=n.children,m=n.padding,p=V.Children.only(h);return p?Q.cloneElement(p,{x:a,y:s,width:o,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,o,c=this,d=this.props,h=d.y,m=d.travellerWidth,p=d.height,y=d.traveller,v=d.ariaLabel,w=d.data,k=d.startIndex,b=d.endIndex,j=Math.max(n,this.props.x),N=Jw(Jw({},We(this.props,!1)),{},{x:j,y:h,width:m,height:p}),E=v||"Min value: ".concat((s=w[k])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=w[b])===null||o===void 0?void 0:o.name);return Q.createElement(wt,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),c.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,N))}},{key:"renderSlide",value:function(n,a){var s=this.props,o=s.y,c=s.height,d=s.stroke,h=s.travellerWidth,m=Math.min(n,a)+h,p=Math.max(Math.abs(a-n)-h,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:o,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,m=this.state,p=m.startX,y=m.endX,v=5,w={pointerEvents:"none",fill:h};return Q.createElement(wt,{className:"recharts-brush-texts"},Q.createElement(Qo,Jp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-v,y:o+c/2},w),this.getTextOfTick(a)),Q.createElement(Qo,Jp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+d+v,y:o+c/2},w),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,o=n.children,c=n.x,d=n.y,h=n.width,m=n.height,p=n.alwaysShowText,y=this.state,v=y.startX,w=y.endX,k=y.isTextActive,b=y.isSlideMoving,j=y.isTravellerMoving,N=y.isTravellerFocused;if(!a||!a.length||!Se(c)||!Se(d)||!Se(h)||!Se(m)||h<=0||m<=0)return null;var E=nt("recharts-brush",s),P=Q.Children.count(o)===1,S=lae("userSelect","none");return Q.createElement(wt,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(v,w),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(w,"endX"),(k||b||j||N||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(s+c/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:a,y:s,width:o,height:c,fill:d,stroke:"none"}),Q.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return Q.isValidElement(n)?s=Q.cloneElement(n,a):Ge(n)?s=n(a):s=e.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,m=n.startIndex,p=n.endIndex;if(s!==a.prevData||h!==a.prevUpdateId)return Jw({prevData:s,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},s&&s.length?gae({data:s,width:o,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var y=a.scale.domain().map(function(v){return a.scale(v)});return{prevData:s,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,o=0,c=s-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(V.PureComponent);Cn(Fc,"displayName","Brush");Cn(Fc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Zw,wR;function yae(){if(wR)return Zw;wR=1;var t=Dj();function e(r,n){var a;return t(r,function(s,o,c){return a=n(s,o,c),!a}),!!a}return Zw=e,Zw}var ek,kR;function xae(){if(kR)return ek;kR=1;var t=L3(),e=ci(),r=yae(),n=wn(),a=H0();function s(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return ek=s,ek}var vae=xae();const bae=vt(vae);var ri=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},tk,_R;function wae(){if(_R)return tk;_R=1;var t=t6();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return tk=e,tk}var rk,jR;function kae(){if(jR)return rk;jR=1;var t=wae(),e=Z3(),r=ci();function n(a,s){var o={};return s=r(s,3),e(a,function(c,d,h){t(o,d,s(c,d,h))}),o}return rk=n,rk}var _ae=kae();const jae=vt(_ae);var nk,NR;function Nae(){if(NR)return nk;NR=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return nk=t,nk}var ak,SR;function Sae(){if(SR)return ak;SR=1;var t=Dj();function e(r,n){var a=!0;return t(r,function(s,o,c){return a=!!n(s,o,c),a}),a}return ak=e,ak}var ik,ER;function Eae(){if(ER)return ik;ER=1;var t=Nae(),e=Sae(),r=ci(),n=wn(),a=H0();function s(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return ik=s,ik}var Tae=Eae();const BL=vt(Tae);var Aae=["x","y"];function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H_.apply(this,arguments)}function TR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TR(Object(r),!0).forEach(function(n){Cae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cae(t,e,r){return e=Pae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pae(t){var e=Iae(t,"string");return xh(e)=="symbol"?e:e+""}function Iae(t,e){if(xh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oae(t,e){if(t==null)return{};var r=Rae(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Dae(t,e){var r=t.x,n=t.y,a=Oae(t,Aae),s="".concat(r),o=parseInt(s,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),m=parseInt(h,10),p="".concat(e.width||a.width),y=parseInt(p,10);return rd(rd(rd(rd(rd({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function AR(t){return Q.createElement(DL,H_({shapeType:"rectangle",propTransformer:Dae,activeClassName:"recharts-active-bar"},t))}var Mae=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var s=Se(n)||oW(n);return s?e(n,a):(s||Xo(),r)}},Lae=["value","background"],qL;function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function $ae(t,e){if(t==null)return{};var r=Fae(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e0.apply(this,arguments)}function CR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(r),!0).forEach(function(n){As(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WL(n.key),n)}}function Uae(t,e,r){return e&&PR(t.prototype,e),r&&PR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bae(t,e,r){return e=t0(e),qae(t,zL()?Reflect.construct(e,r||[],t0(t).constructor):e.apply(t,r))}function qae(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zae(t)}function zae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zL=function(){return!!t})()}function t0(t){return t0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t0(t)}function Wae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G_(t,e)}function G_(t,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G_(t,e)}function As(t,e,r){return e=WL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WL(t){var e=Hae(t,"string");return Vc(e)=="symbol"?e:e+""}function Hae(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vs=(function(t){function e(){var r;Vae(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Bae(this,e,[].concat(a)),As(r,"state",{isAnimationFinished:!1}),As(r,"id",zh("recharts-bar-")),As(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),As(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Wae(e,t),Uae(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,o=s.shape,c=s.dataKey,d=s.activeIndex,h=s.activeBar,m=We(this.props,!1);return n&&n.map(function(p,y){var v=y===d,w=v?h:o,k=or(or(or({},m),p),{},{isActive:v,option:w,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Q.createElement(wt,e0({className:"recharts-bar-rectangle"},Ko(a.props,p,y),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(y)}),Q.createElement(AR,k))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,m=a.animationEasing,p=a.animationId,y=this.state.prevData;return Q.createElement(Wi,{begin:d,duration:h,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var w=v.t,k=s.map(function(b,j){var N=y&&y[j];if(N){var E=bs(N.x,b.x),P=bs(N.y,b.y),S=bs(N.width,b.width),T=bs(N.height,b.height);return or(or({},b),{},{x:E(w),y:P(w),width:S(w),height:T(w)})}if(o==="horizontal"){var A=bs(0,b.height),R=A(w);return or(or({},b),{},{y:b.y+b.height-R,height:R})}var M=bs(0,b.width),D=M(w);return or(or({},b),{},{width:D})});return Q.createElement(wt,null,n.renderRectanglesStatically(k))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!ng(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,o=a.dataKey,c=a.activeIndex,d=We(this.props.background,!1);return s.map(function(h,m){h.value;var p=h.background,y=$ae(h,Lae);if(!p)return null;var v=or(or(or(or(or({},y),{},{fill:"#eee"},p),d),Ko(n.props,h,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return Q.createElement(AR,e0({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},v))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,c=s.xAxis,d=s.yAxis,h=s.layout,m=s.children,p=ta(m,sg);if(!p)return null;var y=h==="vertical"?o[0].height/2:o[0].width/2,v=function(b,j){var N=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:N,errorVal:Qr(b,j)}},w={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(wt,w,p.map(function(k){return Q.cloneElement(k,{key:"error-bar-".concat(a,"-").concat(k.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:v})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,m=n.top,p=n.width,y=n.height,v=n.isAnimationActive,w=n.background,k=n.id;if(a||!s||!s.length)return null;var b=this.state.isAnimationFinished,j=nt("recharts-bar",o),N=c&&c.allowDataOverflow,E=d&&d.allowDataOverflow,P=N||E,S=it(k)?this.id:k;return Q.createElement(wt,{className:j},N||E?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(S)},Q.createElement("rect",{x:N?h:h-p/2,y:E?m:m-y/2,width:N?p:p*2,height:E?y:y*2}))):null,Q.createElement(wt,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(S,")"):null},w?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,S),(!v||b)&&Ds.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(V.PureComponent);qL=Vs;As(Vs,"displayName","Bar");As(Vs,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ru.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});As(Vs,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,s=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,m=t.dataStartIndex,p=t.displayedData,y=t.offset,v=wZ(n,r);if(!v)return null;var w=e.layout,k=r.type.defaultProps,b=k!==void 0?or(or({},k),r.props):r.props,j=b.dataKey,N=b.children,E=b.minPointSize,P=w==="horizontal"?o:s,S=h?P.scale.domain():null,T=TZ({numericAxis:P}),A=ta(N,G0),R=p.map(function(M,D){var C,F,L,Y,ne,W;h?C=kZ(h[m+D],S):(C=Qr(M,j),Array.isArray(C)||(C=[T,C]));var G=Mae(E,qL.defaultProps.minPointSize)(C[1],D);if(w==="horizontal"){var X,ee=[o.scale(C[0]),o.scale(C[1])],re=ee[0],z=ee[1];F=rO({axis:s,ticks:c,bandSize:a,offset:v.offset,entry:M,index:D}),L=(X=z??re)!==null&&X!==void 0?X:void 0,Y=v.size;var Z=re-z;if(ne=Number.isNaN(Z)?0:Z,W={x:F,y:o.y,width:Y,height:o.height},Math.abs(G)>0&&Math.abs(ne)<Math.abs(G)){var J=an(ne||G)*(Math.abs(G)-Math.abs(ne));L-=J,ne+=J}}else{var oe=[s.scale(C[0]),s.scale(C[1])],he=oe[0],ve=oe[1];if(F=he,L=rO({axis:o,ticks:d,bandSize:a,offset:v.offset,entry:M,index:D}),Y=ve-he,ne=v.size,W={x:s.x,y:L,width:s.width,height:ne},Math.abs(G)>0&&Math.abs(Y)<Math.abs(G)){var fe=an(Y||G)*(Math.abs(G)-Math.abs(Y));Y+=fe}}return or(or(or({},M),{},{x:F,y:L,width:Y,height:ne,value:h?C:C[1],payload:M,background:W},A&&A[D]&&A[D].props),{},{tooltipPayload:[xL(r,M)],tooltipPosition:{x:F+Y/2,y:L+ne/2}})});return or({data:R,layout:w},y)});function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function Gae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HL(n.key),n)}}function Kae(t,e,r){return e&&IR(t.prototype,e),r&&IR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ka(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OR(Object(r),!0).forEach(function(n){fg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fg(t,e,r){return e=HL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HL(t){var e=Qae(t,"string");return vh(e)=="symbol"?e:e+""}function Qae(t,e){if(vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yae=function(e,r,n,a,s){var o=e.width,c=e.height,d=e.layout,h=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!Pn(h,Vs);return m.reduce(function(v,w){var k=r[w],b=k.orientation,j=k.domain,N=k.padding,E=N===void 0?{}:N,P=k.mirror,S=k.reversed,T="".concat(b).concat(P?"Mirror":""),A,R,M,D,C;if(k.type==="number"&&(k.padding==="gap"||k.padding==="no-gap")){var F=j[1]-j[0],L=1/0,Y=k.categoricalDomain.sort(uW);if(Y.forEach(function(oe,he){he>0&&(L=Math.min((oe||0)-(Y[he-1]||0),L))}),Number.isFinite(L)){var ne=L/F,W=k.layout==="vertical"?n.height:n.width;if(k.padding==="gap"&&(A=ne*W/2),k.padding==="no-gap"){var G=sn(e.barCategoryGap,ne*W),X=ne*W/2;A=X-G-(X-G)/W*G}}}a==="xAxis"?R=[n.left+(E.left||0)+(A||0),n.left+n.width-(E.right||0)-(A||0)]:a==="yAxis"?R=d==="horizontal"?[n.top+n.height-(E.bottom||0),n.top+(E.top||0)]:[n.top+(E.top||0)+(A||0),n.top+n.height-(E.bottom||0)-(A||0)]:R=k.range,S&&(R=[R[1],R[0]]);var ee=mL(k,s,y),re=ee.scale,z=ee.realScaleType;re.domain(j).range(R),pL(re);var Z=gL(re,ka(ka({},k),{},{realScaleType:z}));a==="xAxis"?(C=b==="top"&&!P||b==="bottom"&&P,M=n.left,D=p[T]-C*k.height):a==="yAxis"&&(C=b==="left"&&!P||b==="right"&&P,M=p[T]-C*k.width,D=n.top);var J=ka(ka(ka({},k),Z),{},{realScaleType:z,x:M,y:D,scale:re,width:a==="xAxis"?n.width:k.width,height:a==="yAxis"?n.height:k.height});return J.bandSize=Fp(J,Z),!k.hide&&a==="xAxis"?p[T]+=(C?-1:1)*J.height:k.hide||(p[T]+=(C?-1:1)*J.width),ka(ka({},v),{},fg({},w,J))},{})},GL=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(a,o),width:Math.abs(s-n),height:Math.abs(o-a)}},Xae=function(e){var r=e.x1,n=e.y1,a=e.x2,s=e.y2;return GL({x:r,y:n},{x:a,y:s})},KL=(function(){function t(e){Gae(this,t),this.scale=e}return Kae(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();fg(KL,"EPS",1e-4);var hN=function(e){var r=Object.keys(e).reduce(function(n,a){return ka(ka({},n),{},fg({},a,KL.create(e[a])))},{});return ka(ka({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,c=s.position;return jae(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return BL(a,function(s,o){return r[o].isInRange(s)})}})};function Jae(t){return(t%180+180)%180}var Zae=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Jae(a),o=s*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},sk,RR;function eie(){if(RR)return sk;RR=1;var t=ci(),e=Wh(),r=z0();function n(a){return function(s,o,c){var d=Object(s);if(!e(s)){var h=t(o,3);s=r(s),o=function(p){return h(d[p],p,d)}}var m=a(s,o,c);return m>-1?d[h?s[m]:m]:void 0}}return sk=n,sk}var ok,DR;function tie(){if(DR)return ok;DR=1;var t=$L();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return ok=e,ok}var lk,MR;function rie(){if(MR)return lk;MR=1;var t=K3(),e=ci(),r=tie(),n=Math.max;function a(s,o,c){var d=s==null?0:s.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(s,e(o,3),h)}return lk=a,lk}var ck,LR;function nie(){if(LR)return ck;LR=1;var t=eie(),e=rie(),r=t(e);return ck=r,ck}var aie=nie();const iie=vt(aie);var sie=u3();const oie=vt(sie);var lie=oie(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),fN=V.createContext(void 0),mN=V.createContext(void 0),QL=V.createContext(void 0),YL=V.createContext({}),XL=V.createContext(void 0),JL=V.createContext(0),ZL=V.createContext(0),$R=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,m=lie(s);return Q.createElement(fN.Provider,{value:n},Q.createElement(mN.Provider,{value:a},Q.createElement(YL.Provider,{value:s},Q.createElement(QL.Provider,{value:m},Q.createElement(XL.Provider,{value:o},Q.createElement(JL.Provider,{value:h},Q.createElement(ZL.Provider,{value:d},c)))))))},cie=function(){return V.useContext(XL)},e5=function(e){var r=V.useContext(fN);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},uie=function(){var e=V.useContext(fN);return Es(e)},die=function(){var e=V.useContext(mN),r=iie(e,function(n){return BL(n.domain,Number.isFinite)});return r||Es(e)},t5=function(e){var r=V.useContext(mN);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},hie=function(){var e=V.useContext(QL);return e},fie=function(){return V.useContext(YL)},pN=function(){return V.useContext(ZL)},gN=function(){return V.useContext(JL)};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function mie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n5(n.key),n)}}function gie(t,e,r){return e&&pie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yie(t,e,r){return e=r0(e),xie(t,r5()?Reflect.construct(e,r||[],r0(t).constructor):e.apply(t,r))}function xie(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vie(t)}function vie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r5=function(){return!!t})()}function r0(t){return r0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r0(t)}function bie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K_(t,e)}function K_(t,e){return K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},K_(t,e)}function FR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(r),!0).forEach(function(n){yN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yN(t,e,r){return e=n5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n5(t){var e=wie(t,"string");return Uc(e)=="symbol"?e:e+""}function wie(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kie(t,e){return Sie(t)||Nie(t,e)||jie(t,e)||_ie()}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jie(t,e){if(t){if(typeof t=="string")return UR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UR(t,e)}}function UR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nie(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sie(t){if(Array.isArray(t))return t}function Q_(){return Q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q_.apply(this,arguments)}var Eie=function(e,r){var n;return Q.isValidElement(e)?n=Q.cloneElement(e,r):Ge(e)?n=e(r):n=Q.createElement("line",Q_({},r,{className:"recharts-reference-line-line"})),n},Tie=function(e,r,n,a,s,o,c,d,h){var m=s.x,p=s.y,y=s.width,v=s.height;if(n){var w=h.y,k=e.y.apply(w,{position:o});if(ri(h,"discard")&&!e.y.isInRange(k))return null;var b=[{x:m+y,y:k},{x:m,y:k}];return d==="left"?b.reverse():b}if(r){var j=h.x,N=e.x.apply(j,{position:o});if(ri(h,"discard")&&!e.x.isInRange(N))return null;var E=[{x:N,y:p+v},{x:N,y:p}];return c==="top"?E.reverse():E}if(a){var P=h.segment,S=P.map(function(T){return e.apply(T,{position:o})});return ri(h,"discard")&&bae(S,function(T){return!e.isInRange(T)})?null:S}return null};function Aie(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=cie(),m=e5(a),p=t5(s),y=hie();if(!h||!y)return null;Sa(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=hN({x:m.scale,y:p.scale}),w=gr(e),k=gr(r),b=n&&n.length===2,j=Tie(v,w,k,b,y,t.position,m.orientation,p.orientation,t);if(!j)return null;var N=kie(j,2),E=N[0],P=E.x,S=E.y,T=N[1],A=T.x,R=T.y,M=ri(t,"hidden")?"url(#".concat(h,")"):void 0,D=VR(VR({clipPath:M},We(t,!0)),{},{x1:P,y1:S,x2:A,y2:R});return Q.createElement(wt,{className:nt("recharts-reference-line",c)},Eie(o,D),Sr.renderCallByParent(t,Xae({x1:P,y1:S,x2:A,y2:R})))}var xN=(function(t){function e(){return mie(this,e),yie(this,e,arguments)}return bie(e,t),gie(e,[{key:"render",value:function(){return Q.createElement(Aie,this.props)}}])})(Q.Component);yN(xN,"displayName","ReferenceLine");yN(xN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Y_(){return Y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y_.apply(this,arguments)}function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function BR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(r),!0).forEach(function(n){mg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i5(n.key),n)}}function Iie(t,e,r){return e&&Pie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oie(t,e,r){return e=n0(e),Rie(t,a5()?Reflect.construct(e,r||[],n0(t).constructor):e.apply(t,r))}function Rie(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Die(t)}function Die(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a5=function(){return!!t})()}function n0(t){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n0(t)}function Mie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X_(t,e)}function X_(t,e){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},X_(t,e)}function mg(t,e,r){return e=i5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i5(t){var e=Lie(t,"string");return Bc(e)=="symbol"?e:e+""}function Lie(t,e){if(Bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $ie=function(e){var r=e.x,n=e.y,a=e.xAxis,s=e.yAxis,o=hN({x:a.scale,y:s.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return ri(e,"discard")&&!o.isInRange(c)?null:c},pg=(function(t){function e(){return Cie(this,e),Oie(this,e,arguments)}return Mie(e,t),Iie(e,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=gr(a),m=gr(s);if(Sa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!m)return null;var p=$ie(this.props);if(!p)return null;var y=p.x,v=p.y,w=this.props,k=w.shape,b=w.className,j=ri(this.props,"hidden")?"url(#".concat(d,")"):void 0,N=qR(qR({clipPath:j},We(this.props,!0)),{},{cx:y,cy:v});return Q.createElement(wt,{className:nt("recharts-reference-dot",b)},e.renderDot(k,N),Sr.renderCallByParent(this.props,{x:y-o,y:v-o,width:2*o,height:2*o}))}}])})(Q.Component);mg(pg,"displayName","ReferenceDot");mg(pg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});mg(pg,"renderDot",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):Ge(t)?r=t(e):r=Q.createElement(dN,Y_({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(this,arguments)}function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function zR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zR(Object(r),!0).forEach(function(n){gg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o5(n.key),n)}}function Uie(t,e,r){return e&&Vie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bie(t,e,r){return e=a0(e),qie(t,s5()?Reflect.construct(e,r||[],a0(t).constructor):e.apply(t,r))}function qie(t,e){if(e&&(qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zie(t)}function zie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s5=function(){return!!t})()}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a0(t)}function Wie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z_(t,e)}function Z_(t,e){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z_(t,e)}function gg(t,e,r){return e=o5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o5(t){var e=Hie(t,"string");return qc(e)=="symbol"?e:e+""}function Hie(t,e){if(qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gie=function(e,r,n,a,s){var o=s.x1,c=s.x2,d=s.y1,h=s.y2,m=s.xAxis,p=s.yAxis;if(!m||!p)return null;var y=hN({x:m.scale,y:p.scale}),v={x:e?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},w={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return ri(s,"discard")&&(!y.isInRange(v)||!y.isInRange(w))?null:GL(v,w)},yg=(function(t){function e(){return Fie(this,e),Bie(this,e,arguments)}return Wie(e,t),Uie(e,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,m=n.clipPathId;Sa(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=gr(a),y=gr(s),v=gr(o),w=gr(c),k=this.props.shape;if(!p&&!y&&!v&&!w&&!k)return null;var b=Gie(p,y,v,w,this.props);if(!b&&!k)return null;var j=ri(this.props,"hidden")?"url(#".concat(m,")"):void 0;return Q.createElement(wt,{className:nt("recharts-reference-area",d)},e.renderRect(k,WR(WR({clipPath:j},We(this.props,!0)),b)),Sr.renderCallByParent(this.props,b))}}])})(Q.Component);gg(yg,"displayName","ReferenceArea");gg(yg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gg(yg,"renderRect",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):Ge(t)?r=t(e):r=Q.createElement(uN,J_({},e,{className:"recharts-reference-area-rect"})),r});function l5(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function Kie(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Zae(n,r)}function Qie(t,e,r){var n=r==="width",a=t.x,s=t.y,o=t.width,c=t.height;return e===1?{start:n?a:s,end:n?a+o:s+c}:{start:n?a+o:s+c,end:n?a:s}}function i0(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Yie(t,e){return l5(t,e+1)}function Xie(t,e,r,n,a){for(var s=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,m=o,p=function(){var w=n?.[d];if(w===void 0)return{v:l5(n,h)};var k=d,b,j=function(){return b===void 0&&(b=r(w,k)),b},N=w.coordinate,E=d===0||i0(t,N,j,m,c);E||(d=0,m=o,h+=1),E&&(m=N+t*(j()/2+a),d+=h)},y;h<=s.length;)if(y=p(),y)return y.v;return[]}function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function HR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(r),!0).forEach(function(n){Jie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jie(t,e,r){return e=Zie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zie(t){var e=ese(t,"string");return bh(e)=="symbol"?e:e+""}function ese(t,e){if(bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tse(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,c=e.start,d=e.end,h=function(y){var v=s[y],w,k=function(){return w===void 0&&(w=r(v,y)),w};if(y===o-1){var b=t*(v.coordinate+t*k()/2-d);s[y]=v=Wr(Wr({},v),{},{tickCoord:b>0?v.coordinate-b*t:v.coordinate})}else s[y]=v=Wr(Wr({},v),{},{tickCoord:v.coordinate});var j=i0(t,v.tickCoord,k,c,d);j&&(d=v.tickCoord-t*(k()/2+a),s[y]=Wr(Wr({},v),{},{isShow:!0}))},m=o-1;m>=0;m--)h(m);return s}function rse(t,e,r,n,a,s){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(s){var m=n[c-1],p=r(m,c-1),y=t*(m.coordinate+t*p/2-h);o[c-1]=m=Wr(Wr({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var v=i0(t,m.tickCoord,function(){return p},d,h);v&&(h=m.tickCoord-t*(p/2+a),o[c-1]=Wr(Wr({},m),{},{isShow:!0}))}for(var w=s?c-1:c,k=function(N){var E=o[N],P,S=function(){return P===void 0&&(P=r(E,N)),P};if(N===0){var T=t*(E.coordinate-t*S()/2-d);o[N]=E=Wr(Wr({},E),{},{tickCoord:T<0?E.coordinate-T*t:E.coordinate})}else o[N]=E=Wr(Wr({},E),{},{tickCoord:E.coordinate});var A=i0(t,E.tickCoord,S,d,h);A&&(d=E.tickCoord+t*(S()/2+a),o[N]=Wr(Wr({},E),{},{isShow:!0}))},b=0;b<w;b++)k(b);return o}function vN(t,e,r){var n=t.tick,a=t.ticks,s=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,m=t.unit,p=t.angle;if(!a||!a.length||!n)return[];if(Se(d)||ru.isSsr)return Yie(a,typeof d=="number"&&Se(d)?d:0);var y=[],v=c==="top"||c==="bottom"?"width":"height",w=m&&v==="width"?bd(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},k=function(E,P){var S=Ge(h)?h(E.value,P):E.value;return v==="width"?Kie(bd(S,{fontSize:e,letterSpacing:r}),w,p):bd(S,{fontSize:e,letterSpacing:r})[v]},b=a.length>=2?an(a[1].coordinate-a[0].coordinate):1,j=Qie(s,b,v);return d==="equidistantPreserveStart"?Xie(b,j,k,a,o):(d==="preserveStart"||d==="preserveStartEnd"?y=rse(b,j,k,a,o,d==="preserveStartEnd"):y=tse(b,j,k,a,o),y.filter(function(N){return N.isShow}))}var nse=["viewBox"],ase=["viewBox"],ise=["ticks"];function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sc.apply(this,arguments)}function GR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GR(Object(r),!0).forEach(function(n){bN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uk(t,e){if(t==null)return{};var r=sse(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ose(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u5(n.key),n)}}function lse(t,e,r){return e&&KR(t.prototype,e),r&&KR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cse(t,e,r){return e=s0(e),use(t,c5()?Reflect.construct(e,r||[],s0(t).constructor):e.apply(t,r))}function use(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dse(t)}function dse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c5=function(){return!!t})()}function s0(t){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s0(t)}function hse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e1(t,e)}function e1(t,e){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},e1(t,e)}function bN(t,e,r){return e=u5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u5(t){var e=fse(t,"string");return zc(e)=="symbol"?e:e+""}function fse(t,e){if(zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var su=(function(t){function e(r){var n;return ose(this,e),n=cse(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return hse(e,t),lse(e,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,o=uk(n,nse),c=this.props,d=c.viewBox,h=uk(c,ase);return!pc(s,d)||!pc(o,h)||!pc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,m=a.tickSize,p=a.mirror,y=a.tickMargin,v,w,k,b,j,N,E=p?-1:1,P=n.tickSize||m,S=Se(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":v=w=n.coordinate,b=o+ +!p*d,k=b-E*P,N=k-E*y,j=S;break;case"left":k=b=n.coordinate,w=s+ +!p*c,v=w-E*P,j=v-E*y,N=S;break;case"right":k=b=n.coordinate,w=s+ +p*c,v=w+E*P,j=v+E*y,N=S;break;default:v=w=n.coordinate,b=o+ +p*d,k=b+E*P,N=k+E*y,j=S;break}return{line:{x1:v,y1:k,x2:w,y2:b},tick:{x:j,y:N}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,m=n.axisLine,p=mr(mr(mr({},We(this.props,!1)),We(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);p=mr(mr({},p),{},{x1:a,y1:s+y*c,x2:a+o,y2:s+y*c})}else{var v=+(d==="left"&&!h||d==="right"&&h);p=mr(mr({},p),{},{x1:a+v*o,y1:s,x2:a+v*o,y2:s+c})}return Q.createElement("line",sc({},p,{className:nt("recharts-cartesian-axis-line",Mn(m,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var o=this,c=this.props,d=c.tickLine,h=c.stroke,m=c.tick,p=c.tickFormatter,y=c.unit,v=vN(mr(mr({},this.props),{},{ticks:n}),a,s),w=this.getTickTextAnchor(),k=this.getTickVerticalAnchor(),b=We(this.props,!1),j=We(m,!1),N=mr(mr({},b),{},{fill:"none"},We(d,!1)),E=v.map(function(P,S){var T=o.getTickLineCoord(P),A=T.line,R=T.tick,M=mr(mr(mr(mr({textAnchor:w,verticalAnchor:k},b),{},{stroke:"none",fill:h},j),R),{},{index:S,payload:P,visibleTicksCount:v.length,tickFormatter:p});return Q.createElement(wt,sc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Ko(o.props,P,S)),d&&Q.createElement("line",sc({},N,A,{className:nt("recharts-cartesian-axis-tick-line",Mn(d,"className"))})),m&&e.renderTickItem(m,M,"".concat(Ge(p)?p(P.value,S):P.value).concat(y||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,m=a.hide;if(m)return null;var p=this.props,y=p.ticks,v=uk(p,ise),w=y;return Ge(d)&&(w=y&&y.length>0?d(this.props):d(v)),o<=0||c<=0||!w||!w.length?null:Q.createElement(wt,{className:nt("recharts-cartesian-axis",h),ref:function(b){n.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(w,this.state.fontSize,this.state.letterSpacing),Sr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var o,c=nt(a.className,"recharts-cartesian-axis-tick-value");return Q.isValidElement(n)?o=Q.cloneElement(n,mr(mr({},a),{},{className:c})):Ge(n)?o=n(mr(mr({},a),{},{className:c})):o=Q.createElement(Qo,sc({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])})(V.Component);bN(su,"displayName","CartesianAxis");bN(su,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mse=["x1","y1","x2","y2","key"],pse=["offset"];function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function QR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(r),!0).forEach(function(n){gse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gse(t,e,r){return e=yse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yse(t){var e=xse(t,"string");return Jo(e)=="symbol"?e:e+""}function xse(t,e){if(Jo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oo.apply(this,arguments)}function YR(t,e){if(t==null)return{};var r=vse(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bse=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,s=e.y,o=e.width,c=e.height,d=e.ry;return Q.createElement("rect",{x:a,y:s,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function d5(t,e){var r;if(Q.isValidElement(t))r=Q.cloneElement(t,e);else if(Ge(t))r=t(e);else{var n=e.x1,a=e.y1,s=e.x2,o=e.y2,c=e.key,d=YR(e,mse),h=We(d,!1);h.offset;var m=YR(h,pse);r=Q.createElement("line",Oo({},m,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:c}))}return r}function wse(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(c,d){var h=Kr(Kr({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return d5(a,h)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kse(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(c,d){var h=Kr(Kr({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return d5(a,h)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _se(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,s=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var m=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,v){return y-v});a!==m[0]&&m.unshift(0);var p=m.map(function(y,v){var w=!m[v+1],k=w?a+o-y:m[v+1]-y;if(k<=0)return null;var b=v%e.length;return Q.createElement("rect",{key:"react-".concat(v),y,x:n,height:k,width:s,stroke:"none",fill:e[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function jse(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var m=h.map(function(y){return Math.round(y+s-s)}).sort(function(y,v){return y-v});s!==m[0]&&m.unshift(0);var p=m.map(function(y,v){var w=!m[v+1],k=w?s+c-y:m[v+1]-y;if(k<=0)return null;var b=v%n.length;return Q.createElement("rect",{key:"react-".concat(v),x:y,y:o,width:k,height:d,stroke:"none",fill:n[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Nse=function(e,r){var n=e.xAxis,a=e.width,s=e.height,o=e.offset;return fL(vN(Kr(Kr(Kr({},su.defaultProps),n),{},{ticks:Ii(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},Sse=function(e,r){var n=e.yAxis,a=e.width,s=e.height,o=e.offset;return fL(vN(Kr(Kr(Kr({},su.defaultProps),n),{},{ticks:Ii(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},Xl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function h5(t){var e,r,n,a,s,o,c=pN(),d=gN(),h=fie(),m=Kr(Kr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Xl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Xl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Xl.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Xl.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Xl.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Xl.verticalFill,x:Se(t.x)?t.x:h.left,y:Se(t.y)?t.y:h.top,width:Se(t.width)?t.width:h.width,height:Se(t.height)?t.height:h.height}),p=m.x,y=m.y,v=m.width,w=m.height,k=m.syncWithTicks,b=m.horizontalValues,j=m.verticalValues,N=uie(),E=die();if(!Se(v)||v<=0||!Se(w)||w<=0||!Se(p)||p!==+p||!Se(y)||y!==+y)return null;var P=m.verticalCoordinatesGenerator||Nse,S=m.horizontalCoordinatesGenerator||Sse,T=m.horizontalPoints,A=m.verticalPoints;if((!T||!T.length)&&Ge(S)){var R=b&&b.length,M=S({yAxis:E?Kr(Kr({},E),{},{ticks:R?b:E.ticks}):void 0,width:c,height:d,offset:h},R?!0:k);Sa(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jo(M),"]")),Array.isArray(M)&&(T=M)}if((!A||!A.length)&&Ge(P)){var D=j&&j.length,C=P({xAxis:N?Kr(Kr({},N),{},{ticks:D?j:N.ticks}):void 0,width:c,height:d,offset:h},D?!0:k);Sa(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jo(C),"]")),Array.isArray(C)&&(A=C)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(bse,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),Q.createElement(wse,Oo({},m,{offset:h,horizontalPoints:T,xAxis:N,yAxis:E})),Q.createElement(kse,Oo({},m,{offset:h,verticalPoints:A,xAxis:N,yAxis:E})),Q.createElement(_se,Oo({},m,{horizontalPoints:T})),Q.createElement(jse,Oo({},m,{verticalPoints:A})))}h5.displayName="CartesianGrid";function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function Ese(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p5(n.key),n)}}function Ase(t,e,r){return e&&Tse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cse(t,e,r){return e=o0(e),Pse(t,f5()?Reflect.construct(e,r||[],o0(t).constructor):e.apply(t,r))}function Pse(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ise(t)}function Ise(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f5=function(){return!!t})()}function o0(t){return o0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o0(t)}function Ose(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t1(t,e)}function t1(t,e){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},t1(t,e)}function m5(t,e,r){return e=p5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p5(t){var e=Rse(t,"string");return Wc(e)=="symbol"?e:e+""}function Rse(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function r1(){return r1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r1.apply(this,arguments)}function Dse(t){var e=t.xAxisId,r=pN(),n=gN(),a=e5(e);return a==null?null:V.createElement(su,r1({},a,{className:nt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Ii(o,!0)}}))}var xg=(function(t){function e(){return Ese(this,e),Cse(this,e,arguments)}return Ose(e,t),Ase(e,[{key:"render",value:function(){return V.createElement(Dse,this.props)}}])})(V.Component);m5(xg,"displayName","XAxis");m5(xg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function Mse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x5(n.key),n)}}function $se(t,e,r){return e&&Lse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fse(t,e,r){return e=l0(e),Vse(t,g5()?Reflect.construct(e,r||[],l0(t).constructor):e.apply(t,r))}function Vse(t,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Use(t)}function Use(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!t})()}function l0(t){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l0(t)}function Bse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n1(t,e)}function n1(t,e){return n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},n1(t,e)}function y5(t,e,r){return e=x5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x5(t){var e=qse(t,"string");return Hc(e)=="symbol"?e:e+""}function qse(t,e){if(Hc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a1(){return a1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a1.apply(this,arguments)}var zse=function(e){var r=e.yAxisId,n=pN(),a=gN(),s=t5(r);return s==null?null:V.createElement(su,a1({},s,{className:nt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Ii(c,!0)}}))},vg=(function(t){function e(){return Mse(this,e),Fse(this,e,arguments)}return Bse(e,t),$se(e,[{key:"render",value:function(){return V.createElement(zse,this.props)}}])})(V.Component);y5(vg,"displayName","YAxis");y5(vg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function XR(t){return Kse(t)||Gse(t)||Hse(t)||Wse()}function Wse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hse(t,e){if(t){if(typeof t=="string")return i1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i1(t,e)}}function Gse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kse(t){if(Array.isArray(t))return i1(t)}function i1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s1=function(e,r,n,a,s){var o=ta(e,xN),c=ta(e,pg),d=[].concat(XR(o),XR(c)),h=ta(e,yg),m="".concat(a,"Id"),p=a[0],y=r;if(d.length&&(y=d.reduce(function(k,b){if(b.props[m]===n&&ri(b.props,"extendDomain")&&Se(b.props[p])){var j=b.props[p];return[Math.min(k[0],j),Math.max(k[1],j)]}return k},y)),h.length){var v="".concat(p,"1"),w="".concat(p,"2");y=h.reduce(function(k,b){if(b.props[m]===n&&ri(b.props,"extendDomain")&&Se(b.props[v])&&Se(b.props[w])){var j=b.props[v],N=b.props[w];return[Math.min(k[0],j,N),Math.max(k[1],j,N)]}return k},y)}return s&&s.length&&(y=s.reduce(function(k,b){return Se(b)?[Math.min(k[0],b),Math.max(k[1],b)]:k},y)),y},dk={exports:{}},JR;function Qse(){return JR||(JR=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function s(d,h,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new a(m,p||d,y),w=r?r+h:h;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],v]:d._events[w].push(v):(d._events[w]=v,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)e.call(m,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=r?r+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,w=new Array(v);y<v;y++)w[y]=p[y].fn;return w},c.prototype.listenerCount=function(h){var m=r?r+h:h,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,m,p,y,v,w){var k=r?r+h:h;if(!this._events[k])return!1;var b=this._events[k],j=arguments.length,N,E;if(b.fn){switch(b.once&&this.removeListener(h,b.fn,void 0,!0),j){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,m),!0;case 3:return b.fn.call(b.context,m,p),!0;case 4:return b.fn.call(b.context,m,p,y),!0;case 5:return b.fn.call(b.context,m,p,y,v),!0;case 6:return b.fn.call(b.context,m,p,y,v,w),!0}for(E=1,N=new Array(j-1);E<j;E++)N[E-1]=arguments[E];b.fn.apply(b.context,N)}else{var P=b.length,S;for(E=0;E<P;E++)switch(b[E].once&&this.removeListener(h,b[E].fn,void 0,!0),j){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,m);break;case 3:b[E].fn.call(b[E].context,m,p);break;case 4:b[E].fn.call(b[E].context,m,p,y);break;default:if(!N)for(S=1,N=new Array(j-1);S<j;S++)N[S-1]=arguments[S];b[E].fn.apply(b[E].context,N)}}return!0},c.prototype.on=function(h,m,p){return s(this,h,m,p,!1)},c.prototype.once=function(h,m,p){return s(this,h,m,p,!0)},c.prototype.removeListener=function(h,m,p,y){var v=r?r+h:h;if(!this._events[v])return this;if(!m)return o(this,v),this;var w=this._events[v];if(w.fn)w.fn===m&&(!y||w.once)&&(!p||w.context===p)&&o(this,v);else{for(var k=0,b=[],j=w.length;k<j;k++)(w[k].fn!==m||y&&!w[k].once||p&&w[k].context!==p)&&b.push(w[k]);b.length?this._events[v]=b.length===1?b[0]:b:o(this,v)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(dk)),dk.exports}var Yse=Qse();const Xse=vt(Yse);var hk=new Xse,fk="recharts.syncMouseEvents";function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Jse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v5(n.key),n)}}function eoe(t,e,r){return e&&Zse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mk(t,e,r){return e=v5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v5(t){var e=toe(t,"string");return wh(e)=="symbol"?e:e+""}function toe(t,e){if(wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var roe=(function(){function t(){Jse(this,t),mk(this,"activeIndex",0),mk(this,"coordinateList",[]),mk(this,"layout","horizontal")}return eoe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,y=r.mouseHandlerCallback,v=y===void 0?null:y;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=s+d+h,y=o+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])})();function noe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&Se(n)&&Se(a))return!0}return!1}function aoe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function b5(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,s=t.endAngle,o=Ot(e,r,n,a),c=Ot(e,r,n,s);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function ioe(t,e,r){var n,a,s,o;if(t==="horizontal")n=e.x,s=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,m=e.outerRadius,p=e.angle,y=Ot(c,d,h,p),v=Ot(c,d,m,p);n=y.x,a=y.y,s=v.x,o=v.y}else return b5(e);return[{x:n,y:a},{x:s,y:o}]}function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function ZR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(r),!0).forEach(function(n){soe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function soe(t,e,r){return e=ooe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ooe(t){var e=loe(t,"string");return kh(e)=="symbol"?e:e+""}function loe(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function coe(t){var e,r,n=t.element,a=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,m=t.tooltipAxisBandSize,p=t.layout,y=t.chartName,v=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!v||!s||!o||y!=="ScatterChart"&&a!=="axis")return null;var w,k=A_;if(y==="ScatterChart")w=o,k=zre;else if(y==="BarChart")w=aoe(p,o,d,m),k=uN;else if(p==="radial"){var b=b5(o),j=b.cx,N=b.cy,E=b.radius,P=b.startAngle,S=b.endAngle;w={cx:j,cy:N,startAngle:P,endAngle:S,innerRadius:E,outerRadius:E},k=cN}else w={points:ioe(p,o,d)},k=A_;var T=Rm(Rm(Rm(Rm({stroke:"#ccc",pointerEvents:"none"},d),w),We(v,!1)),{},{payload:c,payloadIndex:h,className:nt("recharts-tooltip-cursor",v.className)});return V.isValidElement(v)?V.cloneElement(v,T):V.createElement(k,T)}var uoe=["item"],doe=["children","className","width","height","style","compact","title","desc"];function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oc.apply(this,arguments)}function eD(t,e){return moe(t)||foe(t,e)||k5(t,e)||hoe()}function hoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function foe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function moe(t){if(Array.isArray(t))return t}function tD(t,e){if(t==null)return{};var r=poe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function poe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function goe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yoe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_5(n.key),n)}}function xoe(t,e,r){return e&&yoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function voe(t,e,r){return e=c0(e),boe(t,w5()?Reflect.construct(e,r||[],c0(t).constructor):e.apply(t,r))}function boe(t,e){if(e&&(Gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return woe(t)}function woe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w5=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c0(t)}function koe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o1(t,e)}function o1(t,e){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o1(t,e)}function Kc(t){return Noe(t)||joe(t)||k5(t)||_oe()}function _oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5(t,e){if(t){if(typeof t=="string")return l1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(t,e)}}function joe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Noe(t){if(Array.isArray(t))return l1(t)}function l1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(r),!0).forEach(function(n){qe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qe(t,e,r){return e=_5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _5(t){var e=Soe(t,"string");return Gc(e)=="symbol"?e:e+""}function Soe(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eoe={xAxis:["bottom","top"],yAxis:["left","right"]},Toe={width:"100%",height:"100%"},j5={x:0,y:0};function Dm(t){return t}var Aoe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Coe=function(e,r,n,a){var s=r.find(function(m){return m&&m.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,c=a.radius;return me(me(me({},a),Ot(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=s.coordinate,h=a.angle;return me(me(me({},a),Ot(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return j5},bg=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Kc(c),Kc(h)):c},[]);return o.length>0?o:e&&e.length&&Se(a)&&Se(s)?e.slice(a,s+1):[]};function N5(t){return t==="number"?[0,"auto"]:void 0}var c1=function(e,r,n,a){var s=e.graphicalItems,o=e.tooltipAxis,c=bg(r,e);return n<0||!s||!s.length||n>=c.length?null:s.reduce(function(d,h){var m,p=(m=h.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var v=p===void 0?c:p;y=zk(v,o.dataKey,a)}else y=p&&p[n]||c[n];return y?[].concat(Kc(d),[xL(h,y)]):d},[])},nD=function(e,r,n,a){var s=a||{x:e.chartX,y:e.chartY},o=Aoe(s,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,m=pZ(o,c,h,d);if(m>=0&&h){var p=h[m]&&h[m].value,y=c1(e,r,m,p),v=Coe(n,c,m,s);return{activeTooltipIndex:m,activeLabel:p,activePayload:y,activeCoordinate:v}}return null},Poe=function(e,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,y=e.stackOffset,v=hL(m,s);return n.reduce(function(w,k){var b,j=k.type.defaultProps!==void 0?me(me({},k.type.defaultProps),k.props):k.props,N=j.type,E=j.dataKey,P=j.allowDataOverflow,S=j.allowDuplicatedCategory,T=j.scale,A=j.ticks,R=j.includeHidden,M=j[o];if(w[M])return w;var D=bg(e.data,{graphicalItems:a.filter(function(Z){var J,oe=o in Z.props?Z.props[o]:(J=Z.type.defaultProps)===null||J===void 0?void 0:J[o];return oe===M}),dataStartIndex:d,dataEndIndex:h}),C=D.length,F,L,Y;noe(j.domain,P,N)&&(F=j_(j.domain,null,P),v&&(N==="number"||T!=="auto")&&(Y=kd(D,E,"category")));var ne=N5(N);if(!F||F.length===0){var W,G=(W=j.domain)!==null&&W!==void 0?W:ne;if(E){if(F=kd(D,E,N),N==="category"&&v){var X=cW(F);S&&X?(L=F,F=Xp(0,C)):S||(F=iO(G,F,k).reduce(function(Z,J){return Z.indexOf(J)>=0?Z:[].concat(Kc(Z),[J])},[]))}else if(N==="category")S?F=F.filter(function(Z){return Z!==""&&!it(Z)}):F=iO(G,F,k).reduce(function(Z,J){return Z.indexOf(J)>=0||J===""||it(J)?Z:[].concat(Kc(Z),[J])},[]);else if(N==="number"){var ee=bZ(D,a.filter(function(Z){var J,oe,he=o in Z.props?Z.props[o]:(J=Z.type.defaultProps)===null||J===void 0?void 0:J[o],ve="hide"in Z.props?Z.props.hide:(oe=Z.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return he===M&&(R||!ve)}),E,s,m);ee&&(F=ee)}v&&(N==="number"||T!=="auto")&&(Y=kd(D,E,"category"))}else v?F=Xp(0,C):c&&c[M]&&c[M].hasStack&&N==="number"?F=y==="expand"?[0,1]:yL(c[M].stackGroups,d,h):F=dL(D,a.filter(function(Z){var J=o in Z.props?Z.props[o]:Z.type.defaultProps[o],oe="hide"in Z.props?Z.props.hide:Z.type.defaultProps.hide;return J===M&&(R||!oe)}),N,m,!0);if(N==="number")F=s1(p,F,M,s,A),G&&(F=j_(G,F,P));else if(N==="category"&&G){var re=G,z=F.every(function(Z){return re.indexOf(Z)>=0});z&&(F=re)}}return me(me({},w),{},qe({},M,me(me({},j),{},{axisType:s,domain:F,categoricalDomain:Y,duplicateDomain:L,originalDomain:(b=j.domain)!==null&&b!==void 0?b:ne,isCategorical:v,layout:m})))},{})},Ioe=function(e,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,y=bg(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),v=y.length,w=hL(m,s),k=-1;return n.reduce(function(b,j){var N=j.type.defaultProps!==void 0?me(me({},j.type.defaultProps),j.props):j.props,E=N[o],P=N5("number");if(!b[E]){k++;var S;return w?S=Xp(0,v):c&&c[E]&&c[E].hasStack?(S=yL(c[E].stackGroups,d,h),S=s1(p,S,E,s)):(S=j_(P,dL(y,n.filter(function(T){var A,R,M=o in T.props?T.props[o]:(A=T.type.defaultProps)===null||A===void 0?void 0:A[o],D="hide"in T.props?T.props.hide:(R=T.type.defaultProps)===null||R===void 0?void 0:R.hide;return M===E&&!D}),"number",m),a.defaultProps.allowDataOverflow),S=s1(p,S,E,s)),me(me({},b),{},qe({},E,me(me({axisType:s},a.defaultProps),{},{hide:!0,orientation:Mn(Eoe,"".concat(s,".").concat(k%2),null),domain:S,originalDomain:P,isCategorical:w,layout:m})))}return b},{})},Ooe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.children,p="".concat(a,"Id"),y=ta(m,s),v={};return y&&y.length?v=Poe(e,{axes:y,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(v=Ioe(e,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),v},Roe=function(e){var r=Es(e),n=Ii(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Mj(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Fp(r,n)}},aD=function(e){var r=e.children,n=e.defaultShowTooltip,a=Pn(r,Fc),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Doe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Di(r&&r.type);return n&&n.indexOf("Bar")>=0})},iD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Moe=function(e,r){var n=e.props,a=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,m=n.height,p=n.children,y=n.margin||{},v=Pn(p,Fc),w=Pn(p,Lo),k=Object.keys(d).reduce(function(S,T){var A=d[T],R=A.orientation;return!A.mirror&&!A.hide?me(me({},S),{},qe({},R,S[R]+A.width)):S},{left:y.left||0,right:y.right||0}),b=Object.keys(o).reduce(function(S,T){var A=o[T],R=A.orientation;return!A.mirror&&!A.hide?me(me({},S),{},qe({},R,Mn(S,"".concat(R))+A.height)):S},{top:y.top||0,bottom:y.bottom||0}),j=me(me({},b),k),N=j.bottom;v&&(j.bottom+=v.props.height||Fc.defaultProps.height),w&&r&&(j=xZ(j,a,n,r));var E=h-j.left-j.right,P=m-j.top-j.bottom;return me(me({brushBottom:N},j),{},{width:Math.max(E,0),height:Math.max(P,0)})},Loe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},S5=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,y=function(j,N){var E=N.graphicalItems,P=N.stackGroups,S=N.offset,T=N.updateId,A=N.dataStartIndex,R=N.dataEndIndex,M=j.barSize,D=j.layout,C=j.barGap,F=j.barCategoryGap,L=j.maxBarSize,Y=iD(D),ne=Y.numericAxisName,W=Y.cateAxisName,G=Doe(E),X=[];return E.forEach(function(ee,re){var z=bg(j.data,{graphicalItems:[ee],dataStartIndex:A,dataEndIndex:R}),Z=ee.type.defaultProps!==void 0?me(me({},ee.type.defaultProps),ee.props):ee.props,J=Z.dataKey,oe=Z.maxBarSize,he=Z["".concat(ne,"Id")],ve=Z["".concat(W,"Id")],fe={},ye=d.reduce(function(Ce,tt){var Ar=N["".concat(tt.axisType,"Map")],St=Z["".concat(tt.axisType,"Id")];Ar&&Ar[St]||tt.axisType==="zAxis"||Xo();var un=Ar[St];return me(me({},Ce),{},qe(qe({},tt.axisType,un),"".concat(tt.axisType,"Ticks"),Ii(un)))},fe),q=ye[W],de=ye["".concat(W,"Ticks")],pe=P&&P[he]&&P[he].hasStack&&AZ(ee,P[he].stackGroups),le=Di(ee.type).indexOf("Bar")>=0,je=Fp(q,de),Te=[],Ze=G&&gZ({barSize:M,stackGroups:P,totalSize:Loe(ye,W)});if(le){var et,Nt,nr=it(oe)?L:oe,ct=(et=(Nt=Fp(q,de,!0))!==null&&Nt!==void 0?Nt:nr)!==null&&et!==void 0?et:0;Te=yZ({barGap:C,barCategoryGap:F,bandSize:ct!==je?ct:je,sizeList:Ze[ve],maxBarSize:nr}),ct!==je&&(Te=Te.map(function(Ce){return me(me({},Ce),{},{position:me(me({},Ce.position),{},{offset:Ce.position.offset-ct/2})})}))}var ge=ee&&ee.type&&ee.type.getComposedData;ge&&X.push({props:me(me({},ge(me(me({},ye),{},{displayedData:z,props:j,dataKey:J,item:ee,bandSize:je,barPosition:Te,offset:S,stackedData:pe,layout:D,dataStartIndex:A,dataEndIndex:R}))),{},qe(qe(qe({key:ee.key||"item-".concat(re)},ne,ye[ne]),W,ye[W]),"animationId",T)),childIndex:wW(ee,j.children),item:ee})}),X},v=function(j,N){var E=j.props,P=j.dataStartIndex,S=j.dataEndIndex,T=j.updateId;if(!b2({props:E}))return null;var A=E.children,R=E.layout,M=E.stackOffset,D=E.data,C=E.reverseStackOrder,F=iD(R),L=F.numericAxisName,Y=F.cateAxisName,ne=ta(A,n),W=EZ(D,ne,"".concat(L,"Id"),"".concat(Y,"Id"),M,C),G=d.reduce(function(Z,J){var oe="".concat(J.axisType,"Map");return me(me({},Z),{},qe({},oe,Ooe(E,me(me({},J),{},{graphicalItems:ne,stackGroups:J.axisType===L&&W,dataStartIndex:P,dataEndIndex:S}))))},{}),X=Moe(me(me({},G),{},{props:E,graphicalItems:ne}),N?.legendBBox);Object.keys(G).forEach(function(Z){G[Z]=m(E,G[Z],X,Z.replace("Map",""),r)});var ee=G["".concat(Y,"Map")],re=Roe(ee),z=y(E,me(me({},G),{},{dataStartIndex:P,dataEndIndex:S,updateId:T,graphicalItems:ne,stackGroups:W,offset:X}));return me(me({formattedGraphicalItems:z,graphicalItems:ne,offset:X,stackGroups:W},re),G)},w=(function(b){function j(N){var E,P,S;return goe(this,j),S=voe(this,j,[N]),qe(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qe(S,"accessibilityManager",new roe),qe(S,"handleLegendBBoxUpdate",function(T){if(T){var A=S.state,R=A.dataStartIndex,M=A.dataEndIndex,D=A.updateId;S.setState(me({legendBBox:T},v({props:S.props,dataStartIndex:R,dataEndIndex:M,updateId:D},me(me({},S.state),{},{legendBBox:T}))))}}),qe(S,"handleReceiveSyncEvent",function(T,A,R){if(S.props.syncId===T){if(R===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(A)}}),qe(S,"handleBrushChange",function(T){var A=T.startIndex,R=T.endIndex;if(A!==S.state.dataStartIndex||R!==S.state.dataEndIndex){var M=S.state.updateId;S.setState(function(){return me({dataStartIndex:A,dataEndIndex:R},v({props:S.props,dataStartIndex:A,dataEndIndex:R,updateId:M},S.state))}),S.triggerSyncEvent({dataStartIndex:A,dataEndIndex:R})}}),qe(S,"handleMouseEnter",function(T){var A=S.getMouseInfo(T);if(A){var R=me(me({},A),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var M=S.props.onMouseEnter;Ge(M)&&M(R,T)}}),qe(S,"triggeredAfterMouseMove",function(T){var A=S.getMouseInfo(T),R=A?me(me({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(R),S.triggerSyncEvent(R);var M=S.props.onMouseMove;Ge(M)&&M(R,T)}),qe(S,"handleItemMouseEnter",function(T){S.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),qe(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),qe(S,"handleMouseMove",function(T){T.persist(),S.throttleTriggeredAfterMouseMove(T)}),qe(S,"handleMouseLeave",function(T){S.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var R=S.props.onMouseLeave;Ge(R)&&R(A,T)}),qe(S,"handleOuterEvent",function(T){var A=bW(T),R=Mn(S.props,"".concat(A));if(A&&Ge(R)){var M,D;/.*touch.*/i.test(A)?D=S.getMouseInfo(T.changedTouches[0]):D=S.getMouseInfo(T),R((M=D)!==null&&M!==void 0?M:{},T)}}),qe(S,"handleClick",function(T){var A=S.getMouseInfo(T);if(A){var R=me(me({},A),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var M=S.props.onClick;Ge(M)&&M(R,T)}}),qe(S,"handleMouseDown",function(T){var A=S.props.onMouseDown;if(Ge(A)){var R=S.getMouseInfo(T);A(R,T)}}),qe(S,"handleMouseUp",function(T){var A=S.props.onMouseUp;if(Ge(A)){var R=S.getMouseInfo(T);A(R,T)}}),qe(S,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),qe(S,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.handleMouseDown(T.changedTouches[0])}),qe(S,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.handleMouseUp(T.changedTouches[0])}),qe(S,"handleDoubleClick",function(T){var A=S.props.onDoubleClick;if(Ge(A)){var R=S.getMouseInfo(T);A(R,T)}}),qe(S,"handleContextMenu",function(T){var A=S.props.onContextMenu;if(Ge(A)){var R=S.getMouseInfo(T);A(R,T)}}),qe(S,"triggerSyncEvent",function(T){S.props.syncId!==void 0&&hk.emit(fk,S.props.syncId,T,S.eventEmitterSymbol)}),qe(S,"applySyncEvent",function(T){var A=S.props,R=A.layout,M=A.syncMethod,D=S.state.updateId,C=T.dataStartIndex,F=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)S.setState(me({dataStartIndex:C,dataEndIndex:F},v({props:S.props,dataStartIndex:C,dataEndIndex:F,updateId:D},S.state)));else if(T.activeTooltipIndex!==void 0){var L=T.chartX,Y=T.chartY,ne=T.activeTooltipIndex,W=S.state,G=W.offset,X=W.tooltipTicks;if(!G)return;if(typeof M=="function")ne=M(X,T);else if(M==="value"){ne=-1;for(var ee=0;ee<X.length;ee++)if(X[ee].value===T.activeLabel){ne=ee;break}}var re=me(me({},G),{},{x:G.left,y:G.top}),z=Math.min(L,re.x+re.width),Z=Math.min(Y,re.y+re.height),J=X[ne]&&X[ne].value,oe=c1(S.state,S.props.data,ne),he=X[ne]?{x:R==="horizontal"?X[ne].coordinate:z,y:R==="horizontal"?Z:X[ne].coordinate}:j5;S.setState(me(me({},T),{},{activeLabel:J,activeCoordinate:he,activePayload:oe,activeTooltipIndex:ne}))}else S.setState(T)}),qe(S,"renderCursor",function(T){var A,R=S.state,M=R.isTooltipActive,D=R.activeCoordinate,C=R.activePayload,F=R.offset,L=R.activeTooltipIndex,Y=R.tooltipAxisBandSize,ne=S.getTooltipEventType(),W=(A=T.props.active)!==null&&A!==void 0?A:M,G=S.props.layout,X=T.key||"_recharts-cursor";return Q.createElement(coe,{key:X,activeCoordinate:D,activePayload:C,activeTooltipIndex:L,chartName:r,element:T,isActive:W,layout:G,offset:F,tooltipAxisBandSize:Y,tooltipEventType:ne})}),qe(S,"renderPolarAxis",function(T,A,R){var M=Mn(T,"type.axisType"),D=Mn(S.state,"".concat(M,"Map")),C=T.type.defaultProps,F=C!==void 0?me(me({},C),T.props):T.props,L=D&&D[F["".concat(M,"Id")]];return V.cloneElement(T,me(me({},L),{},{className:nt(M,L.className),key:T.key||"".concat(A,"-").concat(R),ticks:Ii(L,!0)}))}),qe(S,"renderPolarGrid",function(T){var A=T.props,R=A.radialLines,M=A.polarAngles,D=A.polarRadius,C=S.state,F=C.radiusAxisMap,L=C.angleAxisMap,Y=Es(F),ne=Es(L),W=ne.cx,G=ne.cy,X=ne.innerRadius,ee=ne.outerRadius;return V.cloneElement(T,{polarAngles:Array.isArray(M)?M:Ii(ne,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(D)?D:Ii(Y,!0).map(function(re){return re.coordinate}),cx:W,cy:G,innerRadius:X,outerRadius:ee,key:T.key||"polar-grid",radialLines:R})}),qe(S,"renderLegend",function(){var T=S.state.formattedGraphicalItems,A=S.props,R=A.children,M=A.width,D=A.height,C=S.props.margin||{},F=M-(C.left||0)-(C.right||0),L=cL({children:R,formattedGraphicalItems:T,legendWidth:F,legendContent:h});if(!L)return null;var Y=L.item,ne=tD(L,uoe);return V.cloneElement(Y,me(me({},ne),{},{chartWidth:M,chartHeight:D,margin:C,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),qe(S,"renderTooltip",function(){var T,A=S.props,R=A.children,M=A.accessibilityLayer,D=Pn(R,wa);if(!D)return null;var C=S.state,F=C.isTooltipActive,L=C.activeCoordinate,Y=C.activePayload,ne=C.activeLabel,W=C.offset,G=(T=D.props.active)!==null&&T!==void 0?T:F;return V.cloneElement(D,{viewBox:me(me({},W),{},{x:W.left,y:W.top}),active:G,label:ne,payload:G?Y:[],coordinate:L,accessibilityLayer:M})}),qe(S,"renderBrush",function(T){var A=S.props,R=A.margin,M=A.data,D=S.state,C=D.offset,F=D.dataStartIndex,L=D.dataEndIndex,Y=D.updateId;return V.cloneElement(T,{key:T.key||"_recharts-brush",onChange:Cm(S.handleBrushChange,T.props.onChange),data:M,x:Se(T.props.x)?T.props.x:C.left,y:Se(T.props.y)?T.props.y:C.top+C.height+C.brushBottom-(R.bottom||0),width:Se(T.props.width)?T.props.width:C.width,startIndex:F,endIndex:L,updateId:"brush-".concat(Y)})}),qe(S,"renderReferenceElement",function(T,A,R){if(!T)return null;var M=S,D=M.clipPathId,C=S.state,F=C.xAxisMap,L=C.yAxisMap,Y=C.offset,ne=T.type.defaultProps||{},W=T.props,G=W.xAxisId,X=G===void 0?ne.xAxisId:G,ee=W.yAxisId,re=ee===void 0?ne.yAxisId:ee;return V.cloneElement(T,{key:T.key||"".concat(A,"-").concat(R),xAxis:F[X],yAxis:L[re],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:D})}),qe(S,"renderActivePoints",function(T){var A=T.item,R=T.activePoint,M=T.basePoint,D=T.childIndex,C=T.isRange,F=[],L=A.props.key,Y=A.item.type.defaultProps!==void 0?me(me({},A.item.type.defaultProps),A.item.props):A.item.props,ne=Y.activeDot,W=Y.dataKey,G=me(me({index:D,dataKey:W,cx:R.x,cy:R.y,r:4,fill:lN(A.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},We(ne,!1)),pp(ne));return F.push(j.renderActiveDot(ne,G,"".concat(L,"-activePoint-").concat(D))),M?F.push(j.renderActiveDot(ne,me(me({},G),{},{cx:M.x,cy:M.y}),"".concat(L,"-basePoint-").concat(D))):C&&F.push(null),F}),qe(S,"renderGraphicChild",function(T,A,R){var M=S.filterFormatItem(T,A,R);if(!M)return null;var D=S.getTooltipEventType(),C=S.state,F=C.isTooltipActive,L=C.tooltipAxis,Y=C.activeTooltipIndex,ne=C.activeLabel,W=S.props.children,G=Pn(W,wa),X=M.props,ee=X.points,re=X.isRange,z=X.baseLine,Z=M.item.type.defaultProps!==void 0?me(me({},M.item.type.defaultProps),M.item.props):M.item.props,J=Z.activeDot,oe=Z.hide,he=Z.activeBar,ve=Z.activeShape,fe=!!(!oe&&F&&G&&(J||he||ve)),ye={};D!=="axis"&&G&&G.props.trigger==="click"?ye={onClick:Cm(S.handleItemMouseEnter,T.props.onClick)}:D!=="axis"&&(ye={onMouseLeave:Cm(S.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:Cm(S.handleItemMouseEnter,T.props.onMouseEnter)});var q=V.cloneElement(T,me(me({},M.props),ye));function de(tt){return typeof L.dataKey=="function"?L.dataKey(tt.payload):null}if(fe)if(Y>=0){var pe,le;if(L.dataKey&&!L.allowDuplicatedCategory){var je=typeof L.dataKey=="function"?de:"payload.".concat(L.dataKey.toString());pe=zk(ee,je,ne),le=re&&z&&zk(z,je,ne)}else pe=ee?.[Y],le=re&&z&&z[Y];if(ve||he){var Te=T.props.activeIndex!==void 0?T.props.activeIndex:Y;return[V.cloneElement(T,me(me(me({},M.props),ye),{},{activeIndex:Te})),null,null]}if(!it(pe))return[q].concat(Kc(S.renderActivePoints({item:M,activePoint:pe,basePoint:le,childIndex:Y,isRange:re})))}else{var Ze,et=(Ze=S.getItemByXY(S.state.activeCoordinate))!==null&&Ze!==void 0?Ze:{graphicalItem:q},Nt=et.graphicalItem,nr=Nt.item,ct=nr===void 0?T:nr,ge=Nt.childIndex,Ce=me(me(me({},M.props),ye),{},{activeIndex:ge});return[V.cloneElement(ct,Ce),null,null]}return re?[q,null,null]:[q,null]}),qe(S,"renderCustomized",function(T,A,R){return V.cloneElement(T,me(me({key:"recharts-customized-".concat(R)},S.props),S.state))}),qe(S,"renderMap",{CartesianGrid:{handler:Dm,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Dm},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Dm},YAxis:{handler:Dm},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((E=N.id)!==null&&E!==void 0?E:zh("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=o6(S.triggeredAfterMouseMove,(P=N.throttleDelay)!==null&&P!==void 0?P:1e3/60),S.state={},S}return koe(j,b),xoe(j,[{key:"componentDidMount",value:function(){var E,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,P=E.children,S=E.data,T=E.height,A=E.layout,R=Pn(P,wa);if(R){var M=R.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,C=c1(this.state,S,M,D),F=this.state.tooltipTicks[M].coordinate,L=(this.state.offset.top+T)/2,Y=A==="horizontal",ne=Y?{x:F,y:L}:{y:F,x:L},W=this.state.formattedGraphicalItems.find(function(X){var ee=X.item;return ee.type.name==="Scatter"});W&&(ne=me(me({},ne),W.props.points[M].tooltipPosition),C=W.props.points[M].tooltipPayload);var G={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:D,activePayload:C,activeCoordinate:ne};this.setState(G),this.renderCursor(R),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var S,T;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(E){Hk([Pn(E.children,wa)],[Pn(this.props.children,wa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=Pn(this.props.children,wa);if(E&&typeof E.props.shared=="boolean"){var P=E.props.shared?"axis":"item";return c.indexOf(P)>=0?P:s}return s}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var P=this.container,S=P.getBoundingClientRect(),T=oQ(S),A={chartX:Math.round(E.pageX-T.left),chartY:Math.round(E.pageY-T.top)},R=S.width/P.offsetWidth||1,M=this.inRange(A.chartX,A.chartY,R);if(!M)return null;var D=this.state,C=D.xAxisMap,F=D.yAxisMap,L=this.getTooltipEventType(),Y=nD(this.state,this.props.data,this.props.layout,M);if(L!=="axis"&&C&&F){var ne=Es(C).scale,W=Es(F).scale,G=ne&&ne.invert?ne.invert(A.chartX):null,X=W&&W.invert?W.invert(A.chartY):null;return me(me({},A),{},{xValue:G,yValue:X},Y)}return Y?me(me({},A),Y):null}},{key:"inRange",value:function(E,P){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,A=E/S,R=P/S;if(T==="horizontal"||T==="vertical"){var M=this.state.offset,D=A>=M.left&&A<=M.left+M.width&&R>=M.top&&R<=M.top+M.height;return D?{x:A,y:R}:null}var C=this.state,F=C.angleAxisMap,L=C.radiusAxisMap;if(F&&L){var Y=Es(F);return lO({x:A,y:R},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,P=this.getTooltipEventType(),S=Pn(E,wa),T={};S&&P==="axis"&&(S.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=pp(this.props,this.handleOuterEvent);return me(me({},A),T)}},{key:"addListener",value:function(){hk.on(fk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){hk.removeListener(fk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,P,S){for(var T=this.state.formattedGraphicalItems,A=0,R=T.length;A<R;A++){var M=T[A];if(M.item===E||M.props.key===E.key||P===Di(M.item.type)&&S===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,P=this.state.offset,S=P.left,T=P.top,A=P.height,R=P.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:E},Q.createElement("rect",{x:S,y:T,height:A,width:R})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(P,S){var T=eD(S,2),A=T[0],R=T[1];return me(me({},P),{},qe({},A,R.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(P,S){var T=eD(S,2),A=T[0],R=T[1];return me(me({},P),{},qe({},A,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(E){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(E){var P=this.state,S=P.formattedGraphicalItems,T=P.activeItem;if(S&&S.length)for(var A=0,R=S.length;A<R;A++){var M=S[A],D=M.props,C=M.item,F=C.type.defaultProps!==void 0?me(me({},C.type.defaultProps),C.props):C.props,L=Di(C.type);if(L==="Bar"){var Y=(D.data||[]).find(function(X){return jre(E,X)});if(Y)return{graphicalItem:M,payload:Y}}else if(L==="RadialBar"){var ne=(D.data||[]).find(function(X){return lO(E,X)});if(ne)return{graphicalItem:M,payload:ne}}else if(dg(M,T)||hg(M,T)||gh(M,T)){var W=Gne({graphicalItem:M,activeTooltipItem:T,itemData:F.data}),G=F.activeIndex===void 0?W:F.activeIndex;return{graphicalItem:me(me({},M),{},{childIndex:G}),payload:gh(M,T)?F.data[W]:M.props.data[W]}}}return null}},{key:"render",value:function(){var E=this;if(!b2(this))return null;var P=this.props,S=P.children,T=P.className,A=P.width,R=P.height,M=P.style,D=P.compact,C=P.title,F=P.desc,L=tD(P,doe),Y=We(L,!1);if(D)return Q.createElement($R,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(Kk,oc({},Y,{width:A,height:R,title:C,desc:F}),this.renderClipPath(),k2(S,this.renderMap)));if(this.props.accessibilityLayer){var ne,W;Y.tabIndex=(ne=this.props.tabIndex)!==null&&ne!==void 0?ne:0,Y.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Y.onKeyDown=function(X){E.accessibilityManager.keyboardEvent(X)},Y.onFocus=function(){E.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Q.createElement($R,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",oc({className:nt("recharts-wrapper",T),style:me({position:"relative",cursor:"default",width:A,height:R},M)},G,{ref:function(ee){E.container=ee}}),Q.createElement(Kk,oc({},Y,{width:A,height:R,title:C,desc:F,style:Toe}),this.renderClipPath(),k2(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(V.Component);qe(w,"displayName",r),qe(w,"defaultProps",me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),qe(w,"getDerivedStateFromProps",function(b,j){var N=b.dataKey,E=b.data,P=b.children,S=b.width,T=b.height,A=b.layout,R=b.stackOffset,M=b.margin,D=j.dataStartIndex,C=j.dataEndIndex;if(j.updateId===void 0){var F=aD(b);return me(me(me({},F),{},{updateId:0},v(me(me({props:b},F),{},{updateId:0}),j)),{},{prevDataKey:N,prevData:E,prevWidth:S,prevHeight:T,prevLayout:A,prevStackOffset:R,prevMargin:M,prevChildren:P})}if(N!==j.prevDataKey||E!==j.prevData||S!==j.prevWidth||T!==j.prevHeight||A!==j.prevLayout||R!==j.prevStackOffset||!pc(M,j.prevMargin)){var L=aD(b),Y={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},ne=me(me({},nD(j,E,A)),{},{updateId:j.updateId+1}),W=me(me(me({},L),Y),ne);return me(me(me({},W),v(me({props:b},W),j)),{},{prevDataKey:N,prevData:E,prevWidth:S,prevHeight:T,prevLayout:A,prevStackOffset:R,prevMargin:M,prevChildren:P})}if(!Hk(P,j.prevChildren)){var G,X,ee,re,z=Pn(P,Fc),Z=z&&(G=(X=z.props)===null||X===void 0?void 0:X.startIndex)!==null&&G!==void 0?G:D,J=z&&(ee=(re=z.props)===null||re===void 0?void 0:re.endIndex)!==null&&ee!==void 0?ee:C,oe=Z!==D||J!==C,he=!it(E),ve=he&&!oe?j.updateId:j.updateId+1;return me(me({updateId:ve},v(me(me({props:b},j),{},{updateId:ve,dataStartIndex:Z,dataEndIndex:J}),j)),{},{prevChildren:P,dataStartIndex:Z,dataEndIndex:J})}return null}),qe(w,"renderActiveDot",function(b,j,N){var E;return V.isValidElement(b)?E=V.cloneElement(b,j):Ge(b)?E=b(j):E=Q.createElement(dN,j),Q.createElement(wt,{className:"recharts-active-dot",key:N},E)});var k=V.forwardRef(function(j,N){return Q.createElement(w,oc({},j,{ref:N}))});return k.displayName=w.displayName,k},$oe=S5({chartName:"BarChart",GraphicalChild:Vs,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:xg},{axisType:"yAxis",AxisComp:vg}],formatAxisMap:Yae}),Foe=S5({chartName:"PieChart",GraphicalChild:Qi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ug},{axisType:"radiusAxis",AxisComp:lg}],formatAxisMap:FZ,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const wN=t=>t&&typeof t=="number"?new Date(Math.round((t-25569)*86400*1e3)):null,E5=t=>t?t.getTime()/864e5+25569:null,wg=t=>{const e=wN(t);return e?e.toISOString().split("T")[0]:""},kN=t=>{if(!t)return null;const e=new Date(Date.UTC(...t.split("-").map((r,n)=>n===1?parseInt(r)-1:parseInt(r))));return E5(e)},_N=t=>{const e=wN(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},sD=t=>{if(!t)return"";const[e,r]=t.split(":"),n=parseInt(e,10),a=n>=12?"PM":"AM";return`${(n+11)%12+1}:${r} ${a}`},Voe=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",Ye=t=>t==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),oD={priority:{emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500",default:"bg-gray-100 text-gray-800 border-gray-500"},status:{completed:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800",open:"bg-yellow-100 text-yellow-800","in progress":"bg-purple-100 text-purple-800","on hold":"bg-pink-100 text-pink-800",cancelled:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},customerType:{"national account":"bg-blue-100 text-blue-800",commercial:"bg-purple-100 text-purple-800",residential:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",default:"bg-gray-100 text-gray-800"},techStatus:{available:"bg-green-100 text-green-800","on site":"bg-blue-100 text-blue-800","en route":"bg-yellow-100 text-yellow-800","on break":"bg-gray-100 text-gray-800","on call":"bg-teal-100 text-teal-800","day off":"bg-slate-200 text-slate-800",default:"bg-gray-100 text-gray-800"}},Uoe=(t,e)=>{const r=oD[t];return r?r[e?.toLowerCase()]||r.default:oD.status.default},Boe={"single-member-llc":20,"s-corp":20,"c-corp":21,partnership:20},qoe=({workOrders:t,bills:e,weeklyCosts:r,taxPayments:n,openModal:a,handleDelete:s})=>{if(!t||!e||!r||!n)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Tax Estimation"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-4",children:"Loading tax data..."})]});const[o,c]=V.useState(20),[d,h]=V.useState("single-member-llc"),[m,p]=V.useState("quarterly"),[y,v]=V.useState(!1);V.useEffect(()=>{c(Boe[d])},[d]);const w=V.useMemo(()=>{const E=new Date;let P,S;switch(m){case"weekly":P=new Date(E.setDate(E.getDate()-E.getDay())),S=new Date(E.setDate(E.getDate()-E.getDay()+6));break;case"monthly":P=new Date(E.getFullYear(),E.getMonth(),1),S=new Date(E.getFullYear(),E.getMonth()+1,0);break;case"quarterly":const T=Math.floor(E.getMonth()/3);P=new Date(E.getFullYear(),T*3,1),S=new Date(E.getFullYear(),T*3+3,0);break;case"yearly":P=new Date(E.getFullYear(),0,1),S=new Date(E.getFullYear(),11,31);break;default:P=new Date,S=new Date}return{start:P,end:S}},[m]),k=V.useMemo(()=>{const E=(t||[]).filter(F=>{if(F["Order Status"]!=="Completed"||!F["Completed Date"])return!1;const L=new Date(_N(F["Completed Date"]));return L>=w.start&&L<=w.end}),P=(e||[]).reduce((F,L)=>F+L.amount,0)+(r||[]).reduce((F,L)=>F+L.amount,0)*4.33,S=(w.end-w.start)/(1e3*60*60*24*30.44),T=P*S,A=E.reduce((F,L)=>F+(L.NTE||0),0),R=E.reduce((F,L)=>L.lineItems&&Array.isArray(L.lineItems)?F+L.lineItems.reduce((Y,ne)=>Y+(ne.amount||0),0):F,0),M=A-R,D=M-T,C=D>0?D*(o/100):0;return{netProfit:D,estimatedTax:C,grossProfit:M,periodOperatingExpenses:T}},[t,e,r,o,w]),b=V.useMemo(()=>(n||[]).filter(E=>{if(!E.date)return!1;const P=new Date(E.date);return P>=w.start&&P<=w.end}).reduce((E,P)=>E+(P.amount||0),0),[n,w]),j=k.estimatedTax-b,N=[{name:"Tax Liability","Estimated Tax":k.estimatedTax,"Taxes Paid":b}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Tax Estimation"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filingStatus",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filing Status"}),i.jsxs("select",{id:"filingStatus",value:d,onChange:E=>h(E.target.value),className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-slate-800 dark:text-white",children:[i.jsx("option",{value:"single-member-llc",children:"Single-Member LLC"}),i.jsx("option",{value:"s-corp",children:"S-Corporation"}),i.jsx("option",{value:"c-corp",children:"C-Corporation"}),i.jsx("option",{value:"partnership",children:"Partnership"})]}),(d==="llc"||d==="single-member-llc")&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"LLC tax rates vary. Consult a tax professional."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estimated Tax Rate (%)"}),i.jsx("input",{id:"taxRate",type:"number",value:o,onChange:E=>c(parseFloat(E.target.value)||0),className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-slate-800 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estimation Period"}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:[i.jsx("button",{onClick:()=>p("weekly"),className:`w-full px-2 py-1 text-xs rounded ${m==="weekly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Weekly"}),i.jsx("button",{onClick:()=>p("monthly"),className:`w-full px-2 py-1 text-xs rounded ${m==="monthly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),i.jsx("button",{onClick:()=>p("quarterly"),className:`w-full px-2 py-1 text-xs rounded ${m==="quarterly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Quarterly"}),i.jsx("button",{onClick:()=>p("yearly"),className:`w-full px-2 py-1 text-xs rounded ${m==="yearly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx(Ao,{title:`Estimated ${m} Net Profit`,value:`$${k.netProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Er,{}),color:"blue"}),i.jsx(Ao,{title:"Estimated Tax Liability",value:`$${k.estimatedTax.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Er,{}),color:"orange",subtext:k.netProfit<=0?"No tax on negative profit":""}),i.jsx(Ao,{title:"Overpayment / (Underpayment)",value:`${j<0?"":"-"}$${Math.abs(j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Er,{}),color:j>=0?"green":"red",subtext:j>=0?"You have overpaid":"Remaining balance due"})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("button",{onClick:()=>v(!y),className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 hover:underline",children:["Show Calculation Breakdown ",i.jsx(Ld,{className:`transition-transform ${y?"rotate-180":""}`,size:16})]}),y&&i.jsxs("div",{className:"mt-2 p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-sm space-y-2 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Gross Profit (from Jobs):"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.grossProfit.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"- Est. Operating Expenses:"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.periodOperatingExpenses.toFixed(2)]})]}),i.jsx("hr",{className:"border-slate-300 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"= Estimated Net Profit:"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.netProfit.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["x Tax Rate (",o,"%):"]})," ",i.jsxs("span",{className:"font-mono",children:["$",k.estimatedTax.toFixed(2)]})]})]})]}),k.netProfit<=0&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/50 border border-blue-400 dark:border-blue-700 text-blue-800 dark:text-blue-200 rounded-lg flex items-center gap-3",children:[i.jsx(r3,{size:20}),i.jsx("p",{className:"text-sm",children:"Your estimated tax is $0.00 because your estimated net profit is negative. The tax rate will apply once your profit is positive."})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Liability vs. Payments"}),i.jsx(l6,{width:"100%",height:200,children:i.jsxs($oe,{data:N,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[i.jsx(h5,{strokeDasharray:"3 3"}),i.jsx(xg,{type:"number"}),i.jsx(vg,{type:"category",dataKey:"name",hide:!0}),i.jsx(wa,{formatter:E=>`$${E.toLocaleString()}`}),i.jsx(Lo,{}),i.jsx(Vs,{dataKey:"Estimated Tax",fill:"#f97316"}),i.jsx(Vs,{dataKey:"Taxes Paid",fill:"#16a34a"})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Recorded Tax Payments"}),i.jsxs("button",{onClick:()=>a("taxPayment"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ia,{size:16})," Record Payment"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Date"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-right",children:"Amount"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:(n||[]).map(E=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50",children:[i.jsx("td",{className:"p-3 font-medium",children:E.date}),i.jsx("td",{className:"p-3",children:E.notes}),i.jsxs("td",{className:"p-3 text-right font-mono",children:["$",(E.amount||0).toFixed(2)]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("button",{onClick:()=>a("taxPayment",E),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 mr-2",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>s("taxPayment",E.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500",children:i.jsx(rr,{size:16})})]})]},E.id))})]})})]})]})},zoe=({workOrders:t,tasks:e,technicians:r,openModal:n})=>{const[a,s]=V.useState(new Date),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=new Date(a.getFullYear(),a.getMonth(),1),h=new Date(a.getFullYear(),a.getMonth()+1,0),m=d.getDay(),p=h.getDate(),y=[];for(let j=0;j<m;j++)y.push(null);for(let j=1;j<=p;j++)y.push(new Date(a.getFullYear(),a.getMonth(),j));const v=V.useMemo(()=>{const j={};return(t||[]).forEach(N=>{if(N["Schedule Date"]){const E=wg(N["Schedule Date"]);j[E]||(j[E]=[]),j[E].push({...N,type:"job"})}}),(e||[]).forEach(N=>{if(N.date){const E=new Date(N.date).toISOString().split("T")[0];j[E]||(j[E]=[]),j[E].push({...N,type:"task"})}}),(r||[]).forEach(N=>{if(N.status==="Day Off"&&N.dayOffDate){const E=new Date(N.dayOffDate).toISOString().split("T")[0];j[E]||(j[E]=[]),j[E].push({id:`off-${N.id}`,name:`${N.name} - Day Off`,type:"time-off"})}}),j},[t,e,r]),w=()=>{s(new Date(a.getFullYear(),a.getMonth()-1,1))},k=()=>{s(new Date(a.getFullYear(),a.getMonth()+1,1))};if(!t||!e||!r)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 text-center",children:"Loading calendar events..."});const b=j=>{switch(j){case"job":return"bg-cyan-100 dark:bg-cyan-900/50 text-cyan-800 dark:text-cyan-200";case"task":return"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-200";case"time-off":return"bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Z4,{})}),i.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:[c[a.getMonth()]," ",a.getFullYear()]}),i.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(e3,{})})]}),i.jsx("div",{className:"flex justify-end gap-2 mb-4",children:i.jsxs("button",{onClick:()=>n("task"),className:"flex items-center gap-2 text-sm bg-amber-500 hover:bg-amber-400 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ia,{size:16})," Add Task"]})}),i.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[o.map(j=>i.jsx("div",{className:"font-bold text-sm text-slate-500 dark:text-slate-400 py-2",children:j},j)),y.map((j,N)=>{const E=j?j.toISOString().split("T")[0]:"";return i.jsxs("div",{className:`h-32 border border-slate-200 dark:border-slate-700 rounded-md p-1 overflow-y-auto ${j?"cursor-pointer":"bg-slate-50 dark:bg-slate-800/50"}`,onClick:()=>j&&n("task",{date:E}),children:[j&&i.jsx("span",{className:"text-xs font-semibold text-gray-800 dark:text-white",children:j.getDate()}),(j&&v[E]||[]).map(P=>i.jsxs("div",{onClick:S=>{S.stopPropagation(),P.type!=="time-off"&&n(P.type,P)},className:`text-xs rounded p-1 mt-1 hover:opacity-80 ${b(P.type)}`,children:[P.type==="time-off"&&i.jsx(xz,{size:12,className:"inline mr-1"}),P.name||P.title||P.Company]},P.id))]},N)})]})]})},Woe=({item:t=null,type:e,onSave:r,onClose:n,debts:a=[],clients:s=[],vehicles:o=[]})=>{const[c,d]=V.useState({}),[h,m]=V.useState(null);V.useEffect(()=>{if(t)d(t);else{const b=p(e);d(b)}},[t,e]);const p=b=>({bill:{name:"",amount:"",dueDay:1,category:"Utilities",isAutoPay:!1,isRecurring:!1,notes:""},debt:{name:"",creditor:"",debtType:"Credit Card",totalAmount:"",paidAmount:0,interestRate:"",minimumPayment:"",dueDate:"",notes:""},income:{name:"",amount:"",type:"monthly",status:"active",isRecurring:!0,notes:""},weekly:{name:"",amount:"",category:"Other",notes:""},job:{name:"",revenue:"",materialCost:"",laborCost:"",date:new Date().toISOString().split("T")[0],notes:"",clientId:""},task:{title:"",date:new Date().toISOString().split("T")[0],notes:"",isComplete:!1},invoice:{invoiceNumber:"",jobNumber:"",customer:"",billTo:"",grandTotal:"",totalCost:"",netTerms:"Net 30",transactionDate:new Date().toISOString().split("T")[0],dueDate:"",paymentDate:"",completedOn:"",invoiceStatus:"Open",priority:"STD",terms:"Limited Warranty",description:"",serviceAddress:"",locationType:"Commercial",jobType:"Service Call",lineItems:"",payments:"",company:"Mechanical Temp",division:"HVAC & Refrigeration",status:"Unpaid",net:"",invNum:"",jobNo:"",daysElapsed:0,notes:""},taxPayment:{date:new Date().toISOString().split("T")[0],amount:"",notes:""},goal:{name:"",type:"revenue",targetValue:"",deadline:new Date().toISOString().split("T")[0]},client:{name:"",address:"",phone:"",email:"",parentId:"",isParent:!1,companyType:"regular",notes:""},inventory:{name:"",quantity:"",cost:"",notes:""},vehicle:{name:"",make:"",model:"",year:new Date().getFullYear().toString(),vin:"",licensePlate:"",currentMileage:"",status:"active",color:"",registrationExpiry:"",insuranceExpiry:"",lastServiceMileage:"",nextServiceDue:"",notes:""},maintenanceLog:{vehicleId:"",date:new Date().toISOString().split("T")[0],type:"Oil Change",cost:"",mileage:"",notes:"",nextServiceMileage:""}})[b]||{},y=b=>{const{name:j,value:N,type:E,checked:P}=b.target;d(S=>({...S,[j]:E==="checkbox"?P:N}))},v=b=>{if(b.preventDefault(),!c.name&&!c.title&&!c.billTo&&!c.customer){alert("Please fill in the required fields.");return}const j={...c};if(({bill:["amount","dueDay"],debt:["totalAmount","paidAmount","interestRate","minimumPayment"],income:["amount"],weekly:["amount"],job:["revenue","materialCost","laborCost"],invoice:["grandTotal","totalCost","net","daysElapsed"],taxPayment:["amount"],goal:["targetValue"],inventory:["quantity","cost"],vehicle:["currentMileage","year","lastServiceMileage"],maintenanceLog:["cost","mileage","nextServiceMileage"]}[e]||[]).forEach(P=>{j[P]!==void 0&&j[P]!==""&&(j[P]=parseFloat(j[P])||0)}),e==="client"){if(j.isParent&&j.parentId){alert('A parent company cannot have a parent company. Please uncheck "Is Parent Company" or remove the parent selection.');return}j.isParent?(j.companyType="parent",j.parentId=null):j.parentId?j.companyType="child":j.companyType="regular"}if(e==="invoice"){if(j.invoiceNumber||(j.invoiceNumber=`INV-${Date.now().toString().slice(-6)}`),j.transactionDate&&j.netTerms&&!j.dueDate){const P=new Date(j.transactionDate);let S=30;j.netTerms.includes("45")?S=45:j.netTerms.includes("15")?S=15:j.netTerms.includes("Due on Receipt")&&(S=0);const T=new Date(P);T.setDate(T.getDate()+S),j.dueDate=T.toISOString().split("T")[0]}j.status=j.invoiceStatus==="Paid"?"Paid":"Unpaid",j.net=j.grandTotal,j.invNum=j.invoiceNumber,j.jobNo=j.jobNumber,!j.grandTotal&&j.net&&(j.grandTotal=j.net)}r(j,h)},w=s.filter(b=>(b.isParent||b.companyType==="parent")&&(!t||b.id!==t.id)),k=()=>{switch(e){case"bill":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bill Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"amount",value:c.amount||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Due Day"}),i.jsx("input",{type:"number",min:"1",max:"31",name:"dueDay",value:c.dueDay||1,onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),i.jsxs("select",{name:"category",value:c.category||"Utilities",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Utilities",children:"Utilities"}),i.jsx("option",{value:"Insurance",children:"Insurance"}),i.jsx("option",{value:"Vehicle",children:"Vehicle"}),i.jsx("option",{value:"Software",children:"Software"}),i.jsx("option",{value:"Overhead",children:"Overhead"}),i.jsx("option",{value:"Equipment",children:"Equipment"}),i.jsx("option",{value:"Marketing",children:"Marketing"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isAutoPay",checked:c.isAutoPay||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Auto Pay"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isRecurring",checked:c.isRecurring||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Recurring"})]})]})]});case"debt":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Debt Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Chase Credit Card, Car Loan",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Creditor/Lender"}),i.jsx("input",{type:"text",name:"creditor",value:c.creditor||"",onChange:y,placeholder:"e.g., Chase Bank, Toyota Financial",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Debt Type"}),i.jsxs("select",{name:"debtType",value:c.debtType||"Credit Card",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Credit Card",children:"Credit Card"}),i.jsx("option",{value:"Personal Loan",children:"Personal Loan"}),i.jsx("option",{value:"Auto Loan",children:"Auto Loan"}),i.jsx("option",{value:"Mortgage",children:"Mortgage"}),i.jsx("option",{value:"Student Loan",children:"Student Loan"}),i.jsx("option",{value:"Business Loan",children:"Business Loan"}),i.jsx("option",{value:"Medical Debt",children:"Medical Debt"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Total Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"totalAmount",value:c.totalAmount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount Paid"}),i.jsx("input",{type:"number",step:"0.01",name:"paidAmount",value:c.paidAmount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Interest Rate (%) *"}),i.jsx("input",{type:"number",step:"0.01",name:"interestRate",value:c.interestRate||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Minimum Payment"}),i.jsx("input",{type:"number",step:"0.01",name:"minimumPayment",value:c.minimumPayment||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payment Due Date"}),i.jsx("input",{type:"date",name:"dueDate",value:c.dueDate||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),(c.totalAmount||c.paidAmount)&&i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-slate-800 dark:text-white mb-3",children:"Payment Progress"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Remaining Balance:"}),i.jsxs("span",{className:"font-mono font-semibold text-orange-600 dark:text-orange-400",children:["$",((parseFloat(c.totalAmount)||0)-(parseFloat(c.paidAmount)||0)).toFixed(2)]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(c.totalAmount>0?(parseFloat(c.paidAmount)||0)/parseFloat(c.totalAmount)*100:0,100)}%`}})}),i.jsxs("div",{className:"text-center text-xs text-slate-500 dark:text-slate-400",children:[c.totalAmount>0?((parseFloat(c.paidAmount)||0)/parseFloat(c.totalAmount)*100).toFixed(1):0,"% paid off"]})]})]})]});case"income":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Income Source Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Main Business Revenue, Consulting Services",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"amount",value:c.amount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Income Type *"}),i.jsxs("select",{name:"type",value:c.type||"monthly",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"quarterly",children:"Quarterly"}),i.jsx("option",{value:"annually",children:"Annually"}),i.jsx("option",{value:"one-time",children:"One-time"}),i.jsx("option",{value:"project-based",children:"Project-based"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{name:"status",value:c.status||"active",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"paused",children:"Paused"})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isRecurring",checked:c.isRecurring||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Recurring Income"})]})})]}),c.amount&&parseFloat(c.amount)>0&&c.type&&i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Income Projection Analysis"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[c.type||"Monthly",":"]}),i.jsxs("p",{className:"font-mono font-bold text-green-600 dark:text-green-400",children:["$",parseFloat(c.amount).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Monthly:"}),i.jsxs("p",{className:"font-mono font-bold text-blue-600 dark:text-blue-400",children:["$",(()=>{const b=parseFloat(c.amount);switch(c.type){case"weekly":return(b*4.33).toFixed(2);case"quarterly":return(b/3).toFixed(2);case"annually":return(b/12).toFixed(2);case"monthly":default:return b.toFixed(2)}})()]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Annual:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400",children:["$",(()=>{const b=parseFloat(c.amount);let j;switch(c.type){case"weekly":j=b*4.33;break;case"quarterly":j=b/3;break;case"annually":j=b/12;break;case"monthly":default:j=b;break}return(j*12).toLocaleString()})()]})]})]})]})]});case"weekly":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost Item Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Projected Payroll, Fuel & Maintenance",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Weekly Amount *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"amount",value:c.amount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),i.jsxs("select",{name:"category",value:c.category||"Other",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Payroll",children:"Payroll"}),i.jsx("option",{value:"Fuel & Maintenance",children:"Fuel & Maintenance"}),i.jsx("option",{value:"Equipment Rental",children:"Equipment Rental"}),i.jsx("option",{value:"Utilities",children:"Utilities"}),i.jsx("option",{value:"Insurance",children:"Insurance"}),i.jsx("option",{value:"Marketing",children:"Marketing"}),i.jsx("option",{value:"Office Expenses",children:"Office Expenses"}),i.jsx("option",{value:"Supplies",children:"Supplies"}),i.jsx("option",{value:"Contractors",children:"Contractors"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.amount&&parseFloat(c.amount)>0&&i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Cost Impact Analysis"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Weekly:"}),i.jsxs("p",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:["$",parseFloat(c.amount).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Monthly:"}),i.jsxs("p",{className:"font-mono font-bold text-orange-600 dark:text-orange-400",children:["$",(parseFloat(c.amount)*4.33).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Annual:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400",children:["$",(parseFloat(c.amount)*52).toLocaleString()]})]})]})]})]});case"vehicle":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Jason's Truck, Red Van",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Make *"}),i.jsxs("select",{name:"make",value:c.make||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"",children:"Select Make"}),i.jsx("option",{value:"FORD",children:"Ford"}),i.jsx("option",{value:"CHEVROLET",children:"Chevrolet"}),i.jsx("option",{value:"GMC",children:"GMC"}),i.jsx("option",{value:"TOYOTA",children:"Toyota"}),i.jsx("option",{value:"HONDA",children:"Honda"}),i.jsx("option",{value:"NISSAN",children:"Nissan"}),i.jsx("option",{value:"RAM",children:"Ram"}),i.jsx("option",{value:"DODGE",children:"Dodge"}),i.jsx("option",{value:"JEEP",children:"Jeep"}),i.jsx("option",{value:"HYUNDAI",children:"Hyundai"}),i.jsx("option",{value:"KIA",children:"Kia"}),i.jsx("option",{value:"MAZDA",children:"Mazda"}),i.jsx("option",{value:"SUBARU",children:"Subaru"}),i.jsx("option",{value:"VOLKSWAGEN",children:"Volkswagen"}),i.jsx("option",{value:"BMW",children:"BMW"}),i.jsx("option",{value:"MERCEDES",children:"Mercedes-Benz"}),i.jsx("option",{value:"AUDI",children:"Audi"}),i.jsx("option",{value:"LEXUS",children:"Lexus"}),i.jsx("option",{value:"ACURA",children:"Acura"}),i.jsx("option",{value:"INFINITI",children:"Infiniti"}),i.jsx("option",{value:"CADILLAC",children:"Cadillac"}),i.jsx("option",{value:"LINCOLN",children:"Lincoln"}),i.jsx("option",{value:"BUICK",children:"Buick"}),i.jsx("option",{value:"CHRYSLER",children:"Chrysler"}),i.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Model *"}),i.jsx("input",{type:"text",name:"model",value:c.model||"",onChange:y,placeholder:"e.g., F-150, TRANSIT, SIERRA",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Year *"}),i.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,name:"year",value:c.year||new Date().getFullYear(),onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Color"}),i.jsx("input",{type:"text",name:"color",value:c.color||"",onChange:y,placeholder:"e.g., White, Black, Blue",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{name:"status",value:c.status||"active",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"maintenance",children:"In Maintenance"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"sold",children:"Sold"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"VIN"}),i.jsx("input",{type:"text",name:"vin",value:c.vin||"",onChange:y,placeholder:"17-character VIN",maxLength:"17",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"License Plate"}),i.jsx("input",{type:"text",name:"licensePlate",value:c.licensePlate||"",onChange:y,placeholder:"e.g., DD16326",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage *"}),i.jsx("input",{type:"number",min:"0",name:"currentMileage",value:c.currentMileage||"",onChange:y,placeholder:"e.g., 104071",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Last Service Mileage"}),i.jsx("input",{type:"number",min:"0",name:"lastServiceMileage",value:c.lastServiceMileage||"",onChange:y,placeholder:"e.g., 98000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Registration Expiry"}),i.jsx("input",{type:"date",name:"registrationExpiry",value:c.registrationExpiry||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Insurance Expiry"}),i.jsx("input",{type:"date",name:"insuranceExpiry",value:c.insuranceExpiry||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Due"}),i.jsx("input",{type:"date",name:"nextServiceDue",value:c.nextServiceDue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),(c.name||c.make||c.model)&&i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Vehicle Preview"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:c.name||"Unnamed Vehicle"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[c.year," ",c.make," ",c.model,c.color&&` (${c.color})`]}),c.licensePlate&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Plate: ",c.licensePlate]}),c.currentMileage&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Mileage: ",parseInt(c.currentMileage).toLocaleString()," miles"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Status: ",i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs ${c.status==="active"?"bg-green-100 text-green-800":c.status==="maintenance"?"bg-yellow-100 text-yellow-800":c.status==="inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:c.status||"active"})]})]})]})]});case"client":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",name:"phone",value:c.phone||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:c.email||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),i.jsx("textarea",{name:"address",value:c.address||"",onChange:y,rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(fc,{size:16}),"Company Structure & Hierarchy"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",id:"isParent",name:"isParent",checked:c.isParent||!1,onChange:y,className:"mt-1 w-4 h-4 text-blue-600 bg-white dark:bg-slate-600 border-slate-300 dark:border-slate-500 rounded focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"isParent",className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Mo,{size:14}),"This is a parent company"]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Check this if this company has multiple locations or subsidiaries"})]})]}),!c.isParent&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Parent Company (Optional)"}),i.jsxs("select",{name:"parentId",value:c.parentId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- Independent Company --"}),w.map(b=>i.jsx("option",{value:b.id,children:b.name},b.id))]}),w.length===0&&i.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"No parent companies available. Create a parent company first if needed."})]}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded border",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(r3,{size:12,className:"mt-0.5 flex-shrink-0"}),i.jsx("div",{children:c.isParent?i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Parent Company Benefits:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:" Can have multiple child locations/subsidiaries"}),i.jsx("li",{children:" Appears in hierarchy view with all child companies"}),i.jsx("li",{children:" Useful for corporate clients with multiple locations"})]})]}):c.parentId?i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"Child Company Setup:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:" This location will be grouped under the parent company"}),i.jsx("li",{children:" Jobs and invoices can be tracked separately"}),i.jsx("li",{children:" Parent company can see consolidated reports"})]})]}):i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Independent Company:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:" Standalone client with no parent/child relationships"}),i.jsx("li",{children:" Can be converted to parent company later if needed"}),i.jsx("li",{children:" Most common setup for individual businesses"})]})]})})]})}),(c.isParent||c.parentId)&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border border-slate-200 dark:border-slate-600",children:[i.jsx("h5",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hierarchy Preview:"}),c.isParent?i.jsxs("div",{className:"text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium",children:[i.jsx(fc,{size:12}),c.name||"New Parent Company"]}),i.jsx("div",{className:"ml-4 mt-1 text-slate-500 dark:text-slate-400",children:" Child companies can be added later"})]}):c.parentId&&i.jsxs("div",{className:"text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium",children:[i.jsx(fc,{size:12}),w.find(b=>b.id===c.parentId)?.name||"Parent Company"]}),i.jsxs("div",{className:"ml-4 mt-1 text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx("span",{children:""}),i.jsx(Mo,{size:10}),c.name||"New Child Location"]})]})]})]})]})]});case"job":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Revenue *"}),i.jsx("input",{type:"number",step:"0.01",name:"revenue",value:c.revenue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Material Cost"}),i.jsx("input",{type:"number",step:"0.01",name:"materialCost",value:c.materialCost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Labor Cost"}),i.jsx("input",{type:"number",step:"0.01",name:"laborCost",value:c.laborCost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Date"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client"}),i.jsxs("select",{name:"clientId",value:c.clientId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"Select Client"}),s.map(b=>i.jsx("option",{value:b.id,children:b.name},b.id))]})]})]})]});case"maintenanceLog":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle *"}),i.jsxs("select",{name:"vehicleId",value:c.vehicleId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"",children:"Select Vehicle"}),o.map(b=>i.jsxs("option",{value:b.id,children:[b.name||"Unnamed"," - ",b.make," ",b.model]},b.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Date *"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Type *"}),i.jsxs("select",{name:"type",value:c.type||"Oil Change",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"Oil Change",children:"Oil Change"}),i.jsx("option",{value:"Tire Rotation",children:"Tire Rotation"}),i.jsx("option",{value:"Brake Service",children:"Brake Service"}),i.jsx("option",{value:"Transmission Service",children:"Transmission Service"}),i.jsx("option",{value:"Engine Repair",children:"Engine Repair"}),i.jsx("option",{value:"Inspection",children:"Inspection"}),i.jsx("option",{value:"A/C Service",children:"A/C Service"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost ($)"}),i.jsx("input",{type:"number",step:"0.01",name:"cost",value:c.cost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage *"}),i.jsx("input",{type:"number",name:"mileage",value:c.mileage||"",onChange:y,placeholder:"Current vehicle mileage",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Mileage"}),i.jsx("input",{type:"number",name:"nextServiceMileage",value:c.nextServiceMileage||"",onChange:y,placeholder:"When next service is due",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]});case"invoice":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" AppSheet Invoice Data"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"This form creates invoices compatible with your AppSheet system (1,091 records)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Invoice Number"}),i.jsx("input",{type:"text",name:"invoiceNumber",value:c.invoiceNumber||"",onChange:y,placeholder:"Auto-generated if empty",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Leave empty to auto-generate (e.g., 12457956)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Number *"}),i.jsx("input",{type:"text",name:"jobNumber",value:c.jobNumber||"",onChange:y,placeholder:"e.g., 6753455-01, 3686529",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Customer *"}),i.jsx("input",{type:"text",name:"customer",value:c.customer||"",onChange:y,placeholder:"e.g., Value City Furniture #175, Rally House #160",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bill To *"}),i.jsx("input",{type:"text",name:"billTo",value:c.billTo||"",onChange:y,placeholder:"e.g., Value City Furniture, Sampler Stores",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Who receives the invoice"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Grand Total *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"grandTotal",value:c.grandTotal||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Total Cost"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"totalCost",value:c.totalCost||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Labor + material costs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Net Terms"}),i.jsxs("select",{name:"netTerms",value:c.netTerms||"Net 30",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Net 15",children:"Net 15"}),i.jsx("option",{value:"Net 30",children:"Net 30"}),i.jsx("option",{value:"Net 45",children:"Net 45"}),i.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Address *"}),i.jsx("input",{type:"text",name:"serviceAddress",value:c.serviceAddress||"",onChange:y,placeholder:"e.g., 27775 Novi Rd, Novi, MI 48377, USA",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Description *"}),i.jsx("textarea",{name:"description",value:c.description||"",onChange:y,rows:"3",placeholder:"Describe the work performed, issues found, and solutions provided...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Transaction Date *"}),i.jsx("input",{type:"date",name:"transactionDate",value:c.transactionDate||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Completed On"}),i.jsx("input",{type:"date",name:"completedOn",value:c.completedOn||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Invoice Status"}),i.jsxs("select",{name:"invoiceStatus",value:c.invoiceStatus||"Open",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Open",children:"Open"}),i.jsx("option",{value:"Paid",children:"Paid"}),i.jsx("option",{value:"Overdue",children:"Overdue"}),i.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Location Type"}),i.jsxs("select",{name:"locationType",value:c.locationType||"Commercial",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Commercial",children:"Commercial"}),i.jsx("option",{value:"Residential",children:"Residential"}),i.jsx("option",{value:"Industrial",children:"Industrial"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Type"}),i.jsxs("select",{name:"jobType",value:c.jobType||"Service Call",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Service Call",children:"Service Call"}),i.jsx("option",{value:"Installation",children:"Installation"}),i.jsx("option",{value:"Maintenance",children:"Maintenance"}),i.jsx("option",{value:"Repair",children:"Repair"}),i.jsx("option",{value:"Emergency",children:"Emergency"})]})]})]}),c.grandTotal&&parseFloat(c.grandTotal)>0&&i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:" Invoice Summary"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Invoice Total:"}),i.jsxs("p",{className:"font-mono font-bold text-green-600 dark:text-green-400 text-lg",children:["$",parseFloat(c.grandTotal||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Total Costs:"}),i.jsxs("p",{className:"font-mono font-bold text-blue-600 dark:text-blue-400 text-lg",children:["$",parseFloat(c.totalCost||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Profit Margin:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400 text-lg",children:["$",(parseFloat(c.grandTotal||0)-parseFloat(c.totalCost||0)).toFixed(2)]})]})]})]})]});case"inventory":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Item Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity *"}),i.jsx("input",{type:"number",min:"0",name:"quantity",value:c.quantity||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost per Unit"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"cost",value:c.cost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]})]});case"task":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Task Title *"}),i.jsx("input",{type:"text",name:"title",value:c.title||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Due Date"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isComplete",checked:c.isComplete||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as Complete"})]})})]})]});case"taxPayment":return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payment Date *"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"amount",value:c.amount||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]})});case"goal":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Type"}),i.jsxs("select",{name:"type",value:c.type||"revenue",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"revenue",children:"Revenue"}),i.jsx("option",{value:"profit",children:"Profit"}),i.jsx("option",{value:"clients",children:"New Clients"}),i.jsx("option",{value:"jobs",children:"Completed Jobs"}),i.jsx("option",{value:"debt",children:"Debt Payoff"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Value *"}),i.jsx("input",{type:"number",step:"0.01",name:"targetValue",value:c.targetValue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Date"}),i.jsx("input",{type:"date",name:"deadline",value:c.deadline?c.deadline.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]})]});default:return i.jsxs("div",{children:["Form not implemented for type: ",e]})}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:t?`Edit ${e}`:`Add New ${e}`}),i.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx(Pa,{size:24})})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[i.jsxs("div",{className:"space-y-4",children:[k(),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{name:"notes",value:c.notes||"",onChange:y,rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Additional notes or comments..."})]}),(e==="bill"||e==="invoice")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Attachment"}),i.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:b=>m(b.target.files[0]),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Upload receipt or related document (images and PDFs only)"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsxs("button",{onClick:v,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:[t?"Update":"Add"," ",e]})]})]})]})})},Us=(t,e,r)=>hc(t,"artifacts","workOrderManagement","users",e,r),Ea=(t,e,r,n)=>lr(t,"artifacts","workOrderManagement","users",e,r,n),T5=t=>{const r=["street","city","state"].filter(n=>!t[n]?.trim());return r.length>0?{isValid:!1,missing:r,suggestion:`Please provide: ${r.join(", ")}`}:{isValid:!0}},jN=t=>{const{street:e,city:r,state:n,zip:a,country:s="USA"}=t;return[e,r,n,a,s].filter(c=>c&&c.trim()).join(", ")},Hoe=async t=>{try{if(!t||typeof t!="string")throw new Error("Address is required and must be a string");if(typeof google>"u"||!google.maps||!google.maps.Geocoder)throw new Error("Google Maps JavaScript API is not loaded");const e=new google.maps.Geocoder,r=t.trim().replace(/\s+/g," ");return console.log("Geocoding request:",r),new Promise((n,a)=>{e.geocode({address:r,region:"US"},(s,o)=>{switch(console.log("Geocoding status:",o),console.log("Geocoding results:",s),o){case google.maps.GeocoderStatus.OK:if(s&&s.length>0){const c=s[0],d=c.geometry.location;n({success:!0,coordinates:{lat:d.lat(),lng:d.lng()},formattedAddress:c.formatted_address,addressComponents:c.address_components})}else a(new Error("No results found for the provided address"));break;case google.maps.GeocoderStatus.ZERO_RESULTS:a(new Error("No results found. Please check the address and try again."));break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:a(new Error("API quota exceeded. Please try again later."));break;case google.maps.GeocoderStatus.REQUEST_DENIED:a(new Error("Request denied. Check your API key configuration."));break;case google.maps.GeocoderStatus.INVALID_REQUEST:a(new Error("Invalid request. Please provide a valid address."));break;default:a(new Error(`Geocoding failed with status: ${o}`))}})})}catch(e){return console.error("Geocoding error:",e),{success:!1,error:e.message,suggestions:["Ensure the address includes street number, street name, city, and state/zip","Check that Google Maps JavaScript API is properly loaded","Verify your API key configuration in Google Cloud Console","Try with a more complete or differently formatted address"]}}},Goe=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Address is required and must be a string");if(!e)throw new Error("Google Maps API key is required for REST API geocoding");const r=t.trim().replace(/\s+/g," "),a=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(r)}&key=${e}`;console.log("REST geocoding request:",r);const s=await fetch(a);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();switch(console.log("REST geocoding response:",o),o.status){case"OK":if(o.results&&o.results.length>0){const c=o.results[0],d=c.geometry.location;return{success:!0,coordinates:{lat:d.lat,lng:d.lng},formattedAddress:c.formatted_address,addressComponents:c.address_components}}else throw new Error("No results found for the provided address");case"ZERO_RESULTS":throw new Error("No results found. Please check the address and try again.");case"OVER_QUERY_LIMIT":throw new Error("API quota exceeded. Please try again later or upgrade your plan.");case"REQUEST_DENIED":throw new Error("Request denied. Check your API key and make sure Geocoding API is enabled.");case"INVALID_REQUEST":throw new Error("Invalid request. Please provide a valid address.");case"UNKNOWN_ERROR":throw new Error("Server error occurred. Please try again later.");default:throw new Error(`Geocoding failed with status: ${o.status}`)}}catch(r){return console.error("REST geocoding error:",r),{success:!1,error:r.message,suggestions:["Ensure the address includes street number, street name, city, and state/zip","Check that your Google Maps API key is valid and has Geocoding API enabled","Verify you haven't exceeded your API quota","Try with a more complete or differently formatted address"]}}},NN=async(t,e=null)=>{try{const r=await Hoe(t);return r.success?r:e&&r.error.includes("Google Maps JavaScript API")?(console.log("Falling back to REST API geocoding..."),await Goe(t,e)):r}catch(r){return console.error("Smart geocoding error:",r),{success:!1,error:r.message,suggestions:["Try with a more complete address or check your API configuration"]}}},Koe=(t,e,r,n)=>{const a=T4(Us(t,e,r));return xd(a,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));n(o)},s=>console.error(`Error fetching ${r}:`,s))},lD=(t,e,r)=>{const n={...r,createdAt:Ut()},a=lr(Us(t,e,"workOrders"));return Na(a,{...n,id:a.id})},Qoe=(t,e,r,n)=>{const a=Ea(t,e,"workOrders",r);return Zn(a,{...n,updatedAt:Ut()})},Yoe=async(t,e,r,n)=>{const a=Ea(t,e,"workOrders",r),s=await oj(a);if(s.exists()){const o={text:n.trim(),timestamp:new Date().toISOString()},c=s.data().notes||[];return Zn(a,{notes:[...c,o],updatedAt:Ut()})}},Xoe=(t,e,r)=>{const n=lr(Us(t,e,"customers"));return Na(n,{...r,id:n.id,createdAt:Ut()})},Joe=async(t,e,r,n=null)=>{try{const a=lr(Us(t,e,"customers"));if(r.address||r.street&&r.city&&r.state){let s;if(typeof r.address=="string")s=r.address;else{const c={street:r.street||r.address?.street,city:r.city||r.address?.city,state:r.state||r.address?.state,zip:r.zip||r.address?.zip},d=T5(c);if(!d.isValid)return console.warn("Address validation failed:",d.suggestion),Na(a,{...r,id:a.id,geocodingError:d.suggestion,createdAt:Ut()});s=jN(c)}console.log("Attempting to geocode:",s);const o=await NN(s,n);if(o.success){const c={...r,id:a.id,coordinates:o.coordinates,formattedAddress:o.formattedAddress,createdAt:Ut()};return await Na(a,c),{success:!0,id:a.id,coordinates:o.coordinates,message:"Customer added successfully with coordinates"}}else{console.warn("Geocoding failed:",o.error);const c={...r,id:a.id,geocodingError:o.error,geocodingSuggestions:o.suggestions,createdAt:Ut()};return await Na(a,c),{success:!0,id:a.id,coordinates:null,warning:`Customer saved without coordinates: ${o.error}`,suggestions:o.suggestions}}}else return await Na(a,{...r,id:a.id,createdAt:Ut()}),{success:!0,id:a.id,coordinates:null,message:"Customer added successfully (no address provided)"}}catch(a){throw console.error("Error adding customer:",a),a}},Zoe=(t,e,r,n)=>{const a=Ea(t,e,"customers",r);return Zn(a,{...n,updatedAt:Ut()})},ele=async(t,e,r,n,a=null)=>{try{const s=Ea(t,e,"customers",r);if(["address","street","city","state","zip"].some(d=>d in n)){const d=await oj(s),m={...d.exists()?d.data():{},...n};let p;if(m.address&&typeof m.address=="string")p=m.address;else{const y={street:m.street,city:m.city,state:m.state,zip:m.zip};T5(y).isValid&&(p=jN(y))}if(p){const y=await NN(p,a);if(y.success){const v={...n,coordinates:y.coordinates,formattedAddress:y.formattedAddress,geocodingError:null,updatedAt:Ut()};return await Zn(s,v),{success:!0,coordinates:y.coordinates,message:"Customer updated successfully with coordinates"}}else{const v={...n,geocodingError:y.error,geocodingSuggestions:y.suggestions,updatedAt:Ut()};return await Zn(s,v),{success:!0,coordinates:null,warning:`Customer updated without coordinates: ${y.error}`}}}}return await Zn(s,{...n,updatedAt:Ut()}),{success:!0,message:"Customer updated successfully"}}catch(s){throw console.error("Error updating customer:",s),s}},tle=(t,e,r)=>{const n=Ea(t,e,"customers",r);return cj(n)},rle=(t,e,r)=>{const n=r.id||lr(Us(t,e,"technicians")).id,a=lr(Us(t,e,"technicians"),n);return Na(a,{...r,id:n,createdAt:Ut()})},nle=(t,e,r,n)=>{const a=Ea(t,e,"technicians",r);return Zn(a,{...n,updatedAt:Ut()})},ale=async(t,e,r,n)=>{const a=await oj(Ea(t,e,"technicians",r));if(!a.exists())return;const s=a.data(),o=Uk(t);(n||[]).forEach(d=>{if(d.technician?.includes(s.name)){const h=Ea(t,e,"workOrders",d.id);o.update(h,{technician:d.technician.filter(m=>m!==s.name)})}});const c=Ea(t,e,"technicians",r);return o.delete(c),o.commit()},ile=(t,e,r)=>{const n=lr(Us(t,e,"invoices"),r.id);return Na(n,{...r,createdAt:Ut()})},sle=(t,e,r)=>{const n=lr(Us(t,e,"quotes"),r.id);return Na(n,{...r,createdAt:Ut()})},u1=(t,e,r,n)=>{const a=Ea(t,e,"invoices",r);return Zn(a,{...n,updatedAt:Ut()})},hd=(t,e,r,n)=>{const a=Ea(t,e,"quotes",r);return Zn(a,{...n,updatedAt:Ut()})},Jl=(t,e,r)=>{const[n,a]=V.useState([]),[s,o]=V.useState(!0);return V.useEffect(()=>{if(!e||!t)return;o(!0);const c=Koe(t,e,r,d=>{a(d),o(!1)});return()=>c()},[t,e,r]),{data:n,loading:s}},Sd=t=>t&&typeof t=="number"?new Date(Math.round((t-25569)*86400*1e3)):null,ole=t=>{const e=Sd(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},lle=t=>{if(!t)return"";const[e,r]=t.split(":"),n=parseInt(e,10),a=n>=12?"PM":"AM";return`${(n+11)%12+1}:${r} ${a}`},cD=t=>t==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),uD=t=>({emergency:"bg-red-100 text-red-800 border-red-500 dark:bg-red-900/50 dark:text-red-200 dark:border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500 dark:bg-orange-900/50 dark:text-orange-200 dark:border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500",cle=t=>({completed:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",scheduled:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200",open:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200","in progress":"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200","on hold":"bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",ule=t=>{if(!t)return"later";const e=Sd(t);if(!e)return"later";const r=new Date,n=new Date(r);n.setDate(n.getDate()+1);const a=new Date(r);a.setDate(a.getDate()+7);const s=e.toDateString()===r.toDateString(),o=e.toDateString()===n.toDateString(),c=e<=a&&e>n;return s?"today":o?"tomorrow":c?"thisweek":"later"},Mm=({title:t,value:e,icon:r,color:n})=>{const a={blue:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-300",green:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-300",yellow:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-300",purple:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-full ${a[n]||a.blue}`,children:r}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),i.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:e})]})]})},Qm=({order:t,onSelectOrder:e})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-transparent dark:border-slate-700 border-l-4",style:{borderColor:uD(t.Priority).borderColor},children:[i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded-full ${uD(t.Priority)}`,children:t.Priority}),i.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${cle(t["Order Status"])}`,children:t["Order Status"]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold mt-3 flex items-center",children:[i.jsx(J4,{size:12,className:"mr-1.5"})," ",t.Client]}),i.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[t.Company," - #",t["Loc #"]]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:t.Task}),i.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(R0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsx("span",{children:t.technician?.join(", ")||"Unassigned"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(P0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsxs("span",{children:["Scheduled: ",ole(t["Schedule Date"])||"Not Set"," ",t.startTime&&`(${lle(t.startTime)})`]})]}),t.clientWO&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-bold mr-2",children:"Client WO:"}),i.jsx("span",{children:t.clientWO})]})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 px-5 py-3",children:i.jsx("button",{onClick:()=>e(t),className:"w-full text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:"View Details"})})]}),Lm=({title:t,orders:e,onSelectOrder:r,badge:n})=>e.length?i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:t}),n&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200 rounded-full",children:n})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>i.jsx(Qm,{order:a,onSelectOrder:r},a.id))})]}):null,$m=({active:t,onClick:e,children:r,count:n})=>i.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-lg transition-colors ${t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:[r,n>0&&i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t?"bg-blue-500 text-white":"bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300"}`,children:n})]}),dle=({currentPage:t,totalPages:e,onPageChange:r})=>e<=1?null:i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[i.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"p-2 rounded-lg bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-slate-600",children:i.jsx(Z4,{size:20})}),i.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(e,5)},(n,a)=>{const s=a+1;return i.jsx("button",{onClick:()=>r(s),className:`px-3 py-2 rounded-lg text-sm font-medium ${t===s?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:s},s)})}),i.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"p-2 rounded-lg bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-slate-600",children:i.jsx(e3,{size:20})})]}),dD=()=>{const{workOrders:t,invoices:e,filteredOrders:r,setSelectedOrder:n,searchTerm:a,setSearchTerm:s}=kn(),[o,c]=V.useState("active"),[d,h]=V.useState(1),m=15,p=V.useMemo(()=>{const N=t||[],E=e||[],P=new Date,S=new Date(P.getFullYear(),P.getMonth(),1),T=N.filter(D=>D["Order Status"]==="Open").length,A=N.filter(D=>{const C=Sd(D["Completed Date"]);return D["Order Status"]==="Completed"&&C>=S}).length,R=E.filter(D=>new Date(D.date)>=S).reduce((D,C)=>D+(C.total||0),0),M=E.length>0?E.reduce((D,C)=>D+(C.total||0),0)/E.length:0;return{openOrders:T,completedThisMonth:A,billedThisMonth:R,avgInvoiceValue:M}},[t,e]),y=V.useMemo(()=>{const N=r||[],E=new Date,P=new Date(E.getTime()-10080*60*1e3),S=N.filter(M=>["Open","In Progress","On Hold"].includes(M["Order Status"])),T=N.filter(M=>M["Order Status"]==="Scheduled"||M["Schedule Date"]&&Sd(M["Schedule Date"])>E),A=N.filter(M=>{const D=Sd(M["Completed Date"]);return M["Order Status"]==="Completed"&&D>=P});return{active:S,scheduled:T,recent:A,all:N}},[r]),v=V.useMemo(()=>{const N={today:[],tomorrow:[],thisweek:[],later:[]};return y.scheduled.forEach(E=>{const P=ule(E["Schedule Date"]);N[P].push(E)}),N},[y.scheduled]),w=V.useMemo(()=>{if(o!=="all")return[];const N=(d-1)*m;return y.all.slice(N,N+m)},[y.all,d,m,o]),k=Math.ceil(y.all.length/m),b=N=>{c(N),h(1)},j=()=>{switch(o){case"active":return y.active.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.active.map(N=>i.jsx(Qm,{order:N,onSelectOrder:n},N.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Active Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"All work orders are either scheduled or completed."})]});case"scheduled":return i.jsxs("div",{children:[i.jsx(Lm,{title:"Today",orders:v.today,onSelectOrder:n,badge:v.today.length}),i.jsx(Lm,{title:"Tomorrow",orders:v.tomorrow,onSelectOrder:n,badge:v.tomorrow.length}),i.jsx(Lm,{title:"This Week",orders:v.thisweek,onSelectOrder:n,badge:v.thisweek.length}),i.jsx(Lm,{title:"Later",orders:v.later,onSelectOrder:n,badge:v.later.length}),y.scheduled.length===0&&i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Scheduled Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Schedule work orders to see them organized by date."})]})]});case"recent":return y.recent.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.recent.map(N=>i.jsx(Qm,{order:N,onSelectOrder:n},N.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Recently Completed Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Completed work orders from the last 7 days will appear here."})]});case"all":return i.jsxs("div",{children:[w.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(N=>i.jsx(Qm,{order:N,onSelectOrder:n},N.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Work Orders Found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Try adjusting your search criteria."})]}),i.jsx(dle,{currentPage:d,totalPages:k,onPageChange:h})]});default:return null}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx(Mm,{title:"Open Work Orders",value:p.openOrders,icon:i.jsx(_a,{size:24}),color:"yellow"}),i.jsx(Mm,{title:"Completed This Month",value:p.completedThisMonth,icon:i.jsx(sz,{size:24}),color:"green"}),i.jsx(Mm,{title:"Billed This Month",value:cD(p.billedThisMonth),icon:i.jsx(Er,{size:24}),color:"blue"}),i.jsx(Mm,{title:"Avg. Invoice Value",value:cD(p.avgInvoiceValue),icon:i.jsx(az,{size:24}),color:"purple"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm mb-8",children:i.jsxs("div",{className:"relative",children:[i.jsx("label",{htmlFor:"work-order-search",className:"sr-only",children:"Search Work Orders"}),i.jsx(ii,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500",size:20}),i.jsx("input",{type:"text",id:"work-order-search",name:"work-order-search",placeholder:"Search by WO#, Client, Location, Tech...",value:a,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-8",children:[i.jsx($m,{active:o==="active",onClick:()=>b("active"),count:y.active.length,children:"Active"}),i.jsx($m,{active:o==="scheduled",onClick:()=>b("scheduled"),count:y.scheduled.length,children:"Scheduled"}),i.jsx($m,{active:o==="recent",onClick:()=>b("recent"),count:y.recent.length,children:"Recent"}),i.jsx($m,{active:o==="all",onClick:()=>b("all"),count:y.all.length,children:"All"})]}),j()]})},pk=(t,e)=>{const n={priority:{emergency:"bg-red-100 text-red-800 border-red-500 dark:bg-red-900/50 dark:text-red-200 dark:border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500 dark:bg-orange-900/50 dark:text-orange-200 dark:border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500",default:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500"},techStatus:{available:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200","on site":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200","en route":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200","on break":"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200","on call":"bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-200","day off":"bg-slate-200 text-slate-800 dark:bg-slate-600 dark:text-slate-200",default:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200"}}[t];return n?n[e?.toLowerCase()]||n.default:""},hle=()=>{const{workOrders:t,technicians:e,handlers:r,setSelectedOrder:n}=kn(),[a,s]=V.useState(new Date().toISOString().split("T")[0]),o=Array.from({length:13},(b,j)=>j+7),c=V.useMemo(()=>(e||[]).filter(b=>b.name!=="Unassigned"),[e]),{scheduledOrders:d,unscheduledOrders:h}=V.useMemo(()=>{if(!t)return{scheduledOrders:[],unscheduledOrders:[]};const b=t.filter(N=>wg(N["Schedule Date"])===a&&N.startTime&&N.endTime&&N.technician?.length>0),j=t.filter(N=>N["Order Status"]==="Open"||!N.technician||N.technician.length===0).sort((N,E)=>{const P={Emergency:1,Urgent:2,Regular:3,Low:4};return(P[N.Priority]||5)-(P[E.Priority]||5)});return{scheduledOrders:b,unscheduledOrders:j}},[t,a]),m=b=>{const j=c.findIndex(N=>N.name===b);return j===-1?-1:j+2},p=b=>{if(!b)return 0;const[j,N]=b.split(":").map(Number);return isNaN(j)||isNaN(N)?0:(j-7)*4+N/15+2},y=(b,j)=>{b.dataTransfer.setData("workOrderId",j.id)},v=(b,j,N)=>{b.preventDefault();const E=b.dataTransfer.getData("workOrderId"),P=t.find(A=>A.id===E);if(!P)return;const S=N,T=`${String(parseInt(N.split(":")[0])+2).padStart(2,"0")}:${N.split(":")[1]}`;r.updateOrder(P.id,{...P,technician:[j],"Schedule Date":kN(a),startTime:S,endTime:T,"Order Status":"Scheduled"})},w=b=>{b.preventDefault();const j=b.dataTransfer.getData("workOrderId"),N=t.find(E=>E.id===j);N&&r.updateOrder(N.id,{...N,technician:[],"Schedule Date":null,startTime:null,endTime:null,"Order Status":"Open"})},k=b=>b.preventDefault();return!t||!e?i.jsx("div",{className:"p-6",children:"Loading dispatch data..."}):i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Dispatch Board"}),i.jsx("input",{type:"date",value:a,onChange:b=>s(b.target.value),className:"p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/4 bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm",onDrop:w,onDragOver:k,children:[i.jsx("h4",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white",children:"Unassigned Jobs"}),i.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:h.map(b=>i.jsxs("div",{draggable:!0,onDragStart:j=>y(j,b),className:`p-2 border-l-4 rounded cursor-grab ${pk("priority",b.Priority)}`,children:[i.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:b.Company}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:b.Task})]},b.id))})]}),i.jsx("div",{className:"w-3/4 bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm overflow-x-auto",children:i.jsxs("div",{className:"grid gap-px bg-gray-200 dark:bg-slate-600 min-w-max",style:{gridTemplateColumns:`60px repeat(${c.length}, minmax(200px, 1fr))`,gridTemplateRows:`auto repeat(${o.length*4}, 20px)`},children:[i.jsx("div",{className:"bg-gray-100 dark:bg-slate-600 sticky top-0 z-10"}),c.map(b=>i.jsxs("div",{className:"bg-gray-100 dark:bg-slate-600 text-center font-bold p-2 sticky top-0 z-10 flex flex-col",children:[i.jsx("span",{className:"text-gray-800 dark:text-white",children:b.name}),i.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full mt-1 ${pk("techStatus",b.status)}`,children:b.status})]},b.id)),o.map(b=>i.jsxs(Q.Fragment,{children:[i.jsxs("div",{className:"row-start-auto bg-gray-50 dark:bg-slate-600 text-right pr-2 text-xs text-gray-500 dark:text-gray-400 -translate-y-2 sticky left-0 z-10",style:{gridRow:(b-7)*4+2},children:[b>12?b-12:b,":00 ",b>=12?"PM":"AM"]}),c.map((j,N)=>i.jsx(Q.Fragment,{children:Array.from({length:4}).map((E,P)=>i.jsx("div",{onDrop:S=>v(S,j.name,`${String(b).padStart(2,"0")}:${String(P*15).padStart(2,"0")}`),onDragOver:k,className:"border-t border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700",style:{gridRow:(b-7)*4+P+2,gridColumn:N+2}},`${j.id}-${b}-${P}`))},j.id))]},b)),d.flatMap(b=>(b.technician||[]).map(j=>{const N=m(j),E=p(b.startTime),P=p(b.endTime);return N<0||!E||!P||P<=E?null:i.jsxs("div",{draggable:!0,onDragStart:S=>y(S,b),className:`p-2 m-px rounded-lg text-xs cursor-grab overflow-hidden ${pk("priority",b.Priority)}`,style:{gridColumn:N,gridRow:`${E} / ${P}`},onClick:()=>n(b),children:[i.jsx("p",{className:"font-bold truncate text-gray-800 dark:text-gray-200",children:b.Company}),i.jsx("p",{className:"truncate text-gray-600 dark:text-gray-400",children:b.Task})]},`${b.id}-${j}`)}))]})})]})]})},fle=()=>{const{workOrders:t,technicians:e,customers:r}=kn(),n=V.useRef(null),[a,s]=V.useState(null),[o,c]=V.useState([]),[d,h]=V.useState(!1),[m,p]=V.useState("ALL"),[y,v]=V.useState("today"),[w,k]=V.useState(new Date().toISOString().split("T")[0]),[b,j]=V.useState(new Date().toISOString().split("T")[0]);V.useEffect(()=>{const S=()=>{window.google&&window.google.maps?h(!0):setTimeout(S,100)};S()},[]),V.useEffect(()=>{d&&n.current&&!a&&s(new window.google.maps.Map(n.current,{center:{lat:42.4731,lng:-83.2504},zoom:10}))},[d,n,a]);const N=V.useMemo(()=>{if(!t||!e)return[];let S,T;const A=new Date;switch(A.setHours(0,0,0,0),y){case"today":S=new Date(A),T=new Date(A);break;case"3-day":S=new Date(A),T=new Date(A),T.setDate(S.getDate()+2);break;case"week":S=new Date(A);const D=S.getDay();S.setDate(S.getDate()-D),T=new Date(S),T.setDate(S.getDate()+6);break;case"custom":S=new Date(w+"T00:00:00"),T=new Date(b+"T23:59:59");break;default:S=new Date(A),T=new Date(A)}T.setHours(23,59,59,999);const R=t.filter(D=>{const C=wN(D["Schedule Date"]);return C&&C>=S&&C<=T}),M=e.find(D=>D.id===m)?.name;return m!=="ALL"&&M?R.filter(D=>D.technician?.includes(M)).sort((D,C)=>(D.startTime||"").localeCompare(C.startTime||"")):R.sort((D,C)=>(D.startTime||"").localeCompare(C.startTime||""))},[m,t,e,y,w,b]);V.useEffect(()=>{if(a&&r){o.forEach(A=>A.setMap(null));const S=[],T=new window.google.maps.LatLngBounds;N.forEach((A,R)=>{const D=r.find(C=>C.name===A.Client)?.locations?.find(C=>C.name===A.Company&&C.locNum===A["Loc #"]);if(D&&D.lat&&D.lng){const C={lat:D.lat,lng:D.lng},F=new window.google.maps.Marker({position:C,map:a,label:`${R+1}`,title:`${A.Company}
${A.Task}`});S.push(F),T.extend(C)}}),c(S),N.length>0&&!T.isEmpty()&&a.fitBounds(T)}},[a,N,r]);const E=V.useMemo(()=>N.reduce((S,T)=>{const A=wg(T["Schedule Date"]);return S[A]||(S[A]={}),(T.technician||[]).forEach(R=>{S[A][R]||(S[A][R]=[]),S[A][R].push(T)}),S},{}),[N]),P=()=>window.print();return!e||!r?i.jsx("div",{className:"p-6",children:"Loading data..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Route Planning"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("select",{value:y,onChange:S=>v(S.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"3-day",children:"Next 3 Days"}),i.jsx("option",{value:"week",children:"This Week"}),i.jsx("option",{value:"custom",children:"Custom Range"})]}),y==="custom"&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"date",value:w,onChange:S=>k(S.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"date",value:b,onChange:S=>j(S.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("select",{value:m,onChange:S=>p(S.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"ALL",children:"All Technicians"}),e.filter(S=>S.name!=="Unassigned").map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))]}),i.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700",children:[i.jsx(Ud,{size:20})," Print Route"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 max-h-[600px] overflow-y-auto",children:[i.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-800 dark:text-white",children:"Job Order"}),Object.keys(E).length>0?Object.entries(E).map(([S,T])=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"font-bold text-md mb-2 p-2 bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-white rounded-md sticky top-0",children:new Date(S+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries(T).map(([A,R])=>i.jsxs("div",{className:"mb-4",children:[m==="ALL"&&i.jsx("h6",{className:"font-semibold text-sm mb-2 p-2 bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-white rounded-md",children:A}),i.jsx("div",{className:"space-y-2",children:R.map((M,D)=>i.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-lg flex items-start gap-4 bg-white dark:bg-slate-700/50",children:[i.jsx("span",{className:"text-lg font-bold text-gray-400 dark:text-gray-500 mt-1",children:D+1}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-800 dark:text-white",children:[sD(M.startTime)," - ",sD(M.endTime)]}),i.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[M.Company," - ",M.City]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:M.Task})]})]},M.id))})]},A))]},S)):i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No jobs scheduled for this selection."})]}),i.jsx("div",{className:"md:col-span-2 bg-gray-200 dark:bg-slate-600 rounded-lg min-h-[600px]",children:i.jsx("div",{ref:n,className:"w-full h-full rounded-lg",children:!d&&i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading map..."})})})})]})]})},mle=t=>({"national account":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200",commercial:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200",residential:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",maintenance:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",ple=({onClose:t,onAddCustomer:e})=>{const[r,n]=V.useState(""),[a,s]=V.useState("Commercial"),[o,c]=V.useState(""),[d,h]=V.useState(""),[m,p]=V.useState(""),[y,v]=V.useState(""),[w,k]=V.useState(""),[b,j]=V.useState("MI"),[N,E]=V.useState(""),[P,S]=V.useState(!1),[T,A]=V.useState(""),[R,M]=V.useState(""),D=async C=>{if(C.preventDefault(),!r.trim()){alert("Customer name cannot be empty.");return}S(!0),A(""),M("");const F={name:r,type:a,contact:{name:o,email:d,phone:m},street:y,city:w,state:b,zip:N,billingAddress:{street:y,city:w,state:b,zip:N},locations:[]};try{const L=await e(F);L&&L.coordinates?(M(`Customer added successfully with coordinates: ${L.coordinates.lat}, ${L.coordinates.lng}`),setTimeout(()=>t(),1500)):L&&L.warning?(A(L.warning),setTimeout(()=>t(),3e3)):t()}catch(L){console.error("Error adding customer:",L),A(`Failed to add customer: ${L.message}`)}S(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:D,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Customer"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[P&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(pj,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Adding customer and geocoding address..."})]}),T&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Dn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:T})]}),R&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[i.jsx(Os,{size:16}),i.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:R})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Name *"}),i.jsx("input",{type:"text",value:r,onChange:C=>n(C.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Type"}),i.jsxs("select",{value:a,onChange:C=>s(C.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:P,children:[i.jsx("option",{children:"Commercial"}),i.jsx("option",{children:"Residential"}),i.jsx("option",{children:"National Account"}),i.jsx("option",{children:"Maintenance"})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Primary Contact"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Name"}),i.jsx("input",{value:o,onChange:C=>c(C.target.value),type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),i.jsx("input",{value:d,onChange:C=>h(C.target.value),type:"email",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),i.jsx("input",{value:m,onChange:C=>p(C.target.value),type:"tel",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:["Billing Address",i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Used for geocoding - include complete address)"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Street Address *"}),i.jsx("input",{value:y,onChange:C=>v(C.target.value),type:"text",placeholder:"123 Main Street",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City *"}),i.jsx("input",{value:w,onChange:C=>k(C.target.value),type:"text",placeholder:"Detroit",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State *"}),i.jsx("input",{value:b,onChange:C=>j(C.target.value),type:"text",placeholder:"MI",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zip Code"}),i.jsx("input",{value:N,onChange:C=>E(C.target.value),type:"text",placeholder:"48201",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:P,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:P,children:P?"Adding...":"Save Customer"})]})]})})},gle=({customer:t,onClose:e,onUpdateCustomer:r})=>{const[n,a]=V.useState({...t,street:t.billingAddress?.street||t.street||"",city:t.billingAddress?.city||t.city||"",state:t.billingAddress?.state||t.state||"",zip:t.billingAddress?.zip||t.zip||""}),[s,o]=V.useState(!1),[c,d]=V.useState(""),[h,m]=V.useState(""),p=(v,w=null)=>{const{name:k,value:b}=v.target;a(w?j=>({...j,[w]:{...j[w],[k]:b}}):j=>({...j,[k]:b}))},y=async v=>{v.preventDefault(),o(!0),d(""),m("");try{const w={...n,billingAddress:{street:n.street,city:n.city,state:n.state,zip:n.zip}},k=await r(w);k&&k.coordinates?(m(`Customer updated successfully with new coordinates: ${k.coordinates.lat}, ${k.coordinates.lng}`),setTimeout(()=>e(),1500)):k&&k.warning?(d(k.warning),setTimeout(()=>e(),3e3)):e()}catch(w){console.error("Error updating customer:",w),d(`Failed to update customer: ${w.message}`)}o(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:y,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Edit Customer"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[s&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(pj,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Updating customer and re-geocoding address..."})]}),c&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Dn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:c})]}),h&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[i.jsx(Os,{size:16}),i.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:h})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Name"}),i.jsx("input",{type:"text",name:"name",value:n.name,onChange:p,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Type"}),i.jsxs("select",{name:"type",value:n.type,onChange:p,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:s,children:[i.jsx("option",{children:"Commercial"}),i.jsx("option",{children:"Residential"}),i.jsx("option",{children:"National Account"}),i.jsx("option",{children:"Maintenance"})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Primary Contact"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Name"}),i.jsx("input",{name:"name",value:n.contact?.name||"",onChange:v=>p(v,"contact"),type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),i.jsx("input",{name:"email",value:n.contact?.email||"",onChange:v=>p(v,"contact"),type:"email",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),i.jsx("input",{name:"phone",value:n.contact?.phone||"",onChange:v=>p(v,"contact"),type:"tel",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:["Billing Address",i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Changes will re-geocode the address)"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Street"}),i.jsx("input",{name:"street",value:n.street,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City"}),i.jsx("input",{name:"city",value:n.city,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State"}),i.jsx("input",{name:"state",value:n.state,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zip"}),i.jsx("input",{name:"zip",value:n.zip,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]})]})]}),t.coordinates&&i.jsxs("div",{className:"pt-2 text-xs text-gray-500 dark:text-gray-400",children:["Current coordinates: ",t.coordinates.lat,", ",t.coordinates.lng]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:e,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:s,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?"Updating...":"Save Changes"})]})]})})},yle=({customer:t,onClose:e,onAddLocation:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState(""),[p,y]=V.useState("MI"),[v,w]=V.useState(""),[k,b]=V.useState(!1),[j,N]=V.useState(""),E=async P=>{if(P.preventDefault(),!n.trim()){alert("Location name cannot be empty.");return}b(!0),N("");try{const T=jN({street:c,city:h,state:p,zip:v});console.log("Geocoding location:",T);const A=await NN(T);let R={name:n,locNum:s,street:c,city:h,state:p,zip:v,assets:[]};A.success?(R.coordinates=A.coordinates,R.formattedAddress=A.formattedAddress,console.log("Location geocoded successfully:",A.coordinates)):(R.geocodingError=A.error,N(`Location will be saved without coordinates: ${A.error}`),console.warn("Geocoding failed:",A.error)),r(t,R),A.success?e():setTimeout(()=>e(),2e3)}catch(S){console.error("Error adding location:",S),N(`Failed to add location: ${S.message}`)}b(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:E,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Add Location to ",t.name]})}),i.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[k&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(pj,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Adding location and geocoding address..."})]}),j&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Dn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:j})]}),i.jsx("input",{type:"text",placeholder:"Location Name *",value:n,onChange:P=>a(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:k}),i.jsx("input",{type:"text",placeholder:"Location # (optional)",value:s,onChange:P=>o(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"Street Address *",value:c,onChange:P=>d(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",placeholder:"City *",value:h,onChange:P=>m(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"State *",value:p,onChange:P=>y(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"Zip Code",value:v,onChange:P=>w(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"* Complete address information improves geocoding accuracy for mapping features"})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:e,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:k,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:k,children:k?"Adding...":"Add Location"})]})]})})},xle=({customer:t,locationIndex:e,onClose:r,onAddAsset:n})=>{const[a,s]=V.useState(""),[o,c]=V.useState("HVAC Unit"),[d,h]=V.useState(""),[m,p]=V.useState("Trane"),[y,v]=V.useState(""),[w,k]=V.useState(""),[b,j]=V.useState(""),[N,E]=V.useState(""),[P,S]=V.useState([{size:"",quantity:1}]),[T,A]=V.useState("DD"),[R,M]=V.useState(!1),D=["Trane","Carrier","Lennox","Goodman","Rheem","York","Other"],C=["HVAC Unit","Rooftop Unit","Furnace","Air Conditioner","Heat Pump","Boiler","Other"],F=(G,X,ee)=>{const re=[...P];re[G][X]=ee,S(re)},L=()=>S([...P,{size:"",quantity:1}]),Y=G=>S(P.filter((X,ee)=>ee!==G)),ne=G=>{if(G.preventDefault(),!a.trim())return;const X={name:a,type:o==="Other"?d:o,brand:m==="Other"?y:m,model:w,serialNumber:b,installDate:N,filters:P.filter(ee=>ee.size.trim()),driveType:T,economizer:R};n(t,e,X),r()},W="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:ne,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Asset"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Name"}),i.jsx("input",{type:"text",placeholder:"e.g., Rooftop Unit 1",value:a,onChange:G=>s(G.target.value),className:W,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Type"}),i.jsx("select",{value:o,onChange:G=>c(G.target.value),className:W,children:C.map(G=>i.jsx("option",{value:G,children:G},G))})]}),o==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Asset Type"}),i.jsx("input",{type:"text",value:d,onChange:G=>h(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Brand"}),i.jsx("select",{value:m,onChange:G=>p(G.target.value),className:W,children:D.map(G=>i.jsx("option",{value:G,children:G},G))})]}),m==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Brand"}),i.jsx("input",{type:"text",value:y,onChange:G=>v(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Model"}),i.jsx("input",{type:"text",value:w,onChange:G=>k(G.target.value),className:W})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Serial Number"}),i.jsx("input",{type:"text",value:b,onChange:G=>j(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Install Date"}),i.jsx("input",{type:"date",value:N,onChange:G=>E(G.target.value),className:W})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Filters"}),P.map((G,X)=>i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Size (e.g., 20x20x1)",value:G.size,onChange:ee=>F(X,"size",ee.target.value),className:"flex-grow p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("input",{type:"number",value:G.quantity,onChange:ee=>F(X,"quantity",parseInt(ee.target.value)||1),className:"w-20 p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("button",{type:"button",onClick:()=>Y(X),className:"text-red-500 hover:text-red-700",children:i.jsx(rr,{size:18})})]},X)),i.jsx("button",{type:"button",onClick:L,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Add Filter"})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Drive Type"}),i.jsxs("select",{value:T,onChange:G=>A(G.target.value),className:W,children:[i.jsx("option",{children:"DD"}),i.jsx("option",{children:"Belt Drive"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",id:"economizer",checked:R,onChange:G=>M(G.target.checked),className:"h-4 w-4"}),i.jsx("label",{htmlFor:"economizer",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Has Economizer"})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:r,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Add Asset"})]})]})})},vle=({asset:t,customer:e,locationIndex:r,assetIndex:n,onClose:a,onUpdateAsset:s})=>{const[o,c]=V.useState(t),[d,h]=V.useState(t.type),[m,p]=V.useState(""),[y,v]=V.useState(t.brand),[w,k]=V.useState(""),[b,j]=V.useState(t.filters||[{size:"",quantity:1}]),N=["Trane","Carrier","Lennox","Goodman","Rheem","York","Other"],E=["HVAC Unit","Rooftop Unit","Furnace","Air Conditioner","Heat Pump","Boiler","Other"];V.useEffect(()=>{E.includes(t.type)||(h("Other"),p(t.type)),N.includes(t.brand)||(v("Other"),k(t.brand))},[t]);const P=D=>{const{name:C,value:F,type:L,checked:Y}=D.target;c(ne=>({...ne,[C]:L==="checkbox"?Y:F}))},S=(D,C,F)=>{const L=[...b];L[D][C]=F,j(L)},T=()=>j([...b,{size:"",quantity:1}]),A=D=>j(b.filter((C,F)=>F!==D)),R=D=>{D.preventDefault();const C={...o,type:d==="Other"?m:d,brand:y==="Other"?w:y,filters:b.filter(F=>F.size.trim())};s(e,r,n,C),a()},M="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:R,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Edit Asset"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Name"}),i.jsx("input",{type:"text",name:"name",value:o.name,onChange:P,className:M,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Type"}),i.jsx("select",{value:d,onChange:D=>h(D.target.value),className:M,children:E.map(D=>i.jsx("option",{value:D,children:D},D))})]}),d==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Asset Type"}),i.jsx("input",{type:"text",value:m,onChange:D=>p(D.target.value),className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Brand"}),i.jsx("select",{value:y,onChange:D=>v(D.target.value),className:M,children:N.map(D=>i.jsx("option",{value:D,children:D},D))})]}),y==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Brand"}),i.jsx("input",{type:"text",value:w,onChange:D=>k(D.target.value),className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Model"}),i.jsx("input",{type:"text",name:"model",value:o.model,onChange:P,className:M})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Serial Number"}),i.jsx("input",{type:"text",name:"serialNumber",value:o.serialNumber,onChange:P,className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Install Date"}),i.jsx("input",{type:"date",name:"installDate",value:o.installDate,onChange:P,className:M})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Filters"}),b.map((D,C)=>i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Size (e.g., 20x20x1)",value:D.size,onChange:F=>S(C,"size",F.target.value),className:"flex-grow p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("input",{type:"number",value:D.quantity,onChange:F=>S(C,"quantity",parseInt(F.target.value)||1),className:"w-20 p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("button",{type:"button",onClick:()=>A(C),className:"text-red-500 hover:text-red-700",children:i.jsx(rr,{size:18})})]},C)),i.jsx("button",{type:"button",onClick:T,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Add Filter"})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Drive Type"}),i.jsxs("select",{name:"driveType",value:o.driveType,onChange:P,className:M,children:[i.jsx("option",{children:"DD"}),i.jsx("option",{children:"Belt Drive"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",id:"economizer",name:"economizer",checked:o.economizer,onChange:P,className:"h-4 w-4"}),i.jsx("label",{htmlFor:"economizer",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Has Economizer"})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:a,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},ble=()=>{const{customers:t,handlers:e,db:r,userId:n}=kn(),[a,s]=V.useState(!1),[o,c]=V.useState(null),[d,h]=V.useState(null),[m,p]=V.useState(null),[y,v]=V.useState(null),[w,k]=V.useState(new Set),[b,j]=V.useState({}),N=C=>{const F=new Set(w);F.has(C)?F.delete(C):F.add(C),k(F)},E=(C,F)=>{j(L=>{const Y=new Set(L[C]);return Y.has(F)?Y.delete(F):Y.add(F),{...L,[C]:Y}})},P=async C=>{try{return r&&n?await Joe(r,n,C):e.addCustomer(C)}catch(F){throw console.error("Error in handleAddCustomer:",F),F}},S=async C=>{try{return r&&n&&C.id?await ele(r,n,C.id,C):e.updateCustomer(C)}catch(F){throw console.error("Error in handleUpdateCustomer:",F),F}},T=(C,F)=>{const L=[...C.locations||[],F];e.updateCustomer({...C,locations:L})},A=(C,F)=>{if(window.confirm("Are you sure you want to delete this location?")){const L=C.locations.filter((Y,ne)=>ne!==F);e.updateCustomer({...C,locations:L})}},R=(C,F,L)=>{const Y=[...C.locations],ne=Y[F];ne.assets=[...ne.assets||[],L],e.updateCustomer({...C,locations:Y})},M=(C,F,L,Y)=>{const ne=[...C.locations];ne[F].assets[L]=Y,e.updateCustomer({...C,locations:ne})},D=(C,F,L)=>{if(window.confirm("Are you sure you want to delete this asset?")){const Y=[...C.locations];Y[F].assets.splice(L,1),e.updateCustomer({...C,locations:Y})}};return t?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Customer Management"}),i.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[i.jsx(Ia,{size:20})," Add New Customer"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(C=>{const F=w.has(C.id);return i.jsxs("div",{className:"border border-gray-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50",onClick:()=>N(C.id),children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:C.name}),i.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${mle(C.type)}`,children:C.type}),C.coordinates&&i.jsx(Os,{size:16,className:"text-green-600",title:"Location geocoded"}),C.geocodingError&&i.jsx(Dn,{size:16,className:"text-yellow-600",title:`Geocoding failed: ${C.geocodingError}`})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",onClick:L=>L.stopPropagation(),children:[i.jsx("button",{onClick:()=>c(C),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>h(C),className:"text-sm text-green-600 dark:text-green-400 hover:underline",children:"Add Location"}),i.jsx("button",{onClick:()=>{window.confirm("Delete this customer and all their locations?")&&e.deleteCustomer(C.id)},className:"text-sm text-red-600 dark:text-red-400 hover:underline",children:"Delete Customer"})]}),i.jsx(Ld,{className:`transition-transform ${F?"rotate-180":""}`})]})]}),F&&i.jsxs("div",{className:"p-4 border-t dark:border-slate-700",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Primary Contact"}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(R0,{size:14})," ",C.contact?.name]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(n3,{size:14})," ",C.contact?.email]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(i3,{size:14})," ",C.contact?.phone]})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Billing Address"}),i.jsx("p",{className:"text-gray-800 dark:text-gray-300",children:C.billingAddress?.street||C.street}),i.jsxs("p",{className:"text-gray-800 dark:text-gray-300",children:[C.billingAddress?.city||C.city,", ",C.billingAddress?.state||C.state," ",C.billingAddress?.zip||C.zip]}),C.coordinates&&i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(Os,{size:12})," ",C.coordinates.lat.toFixed(6),", ",C.coordinates.lng.toFixed(6)]}),C.geocodingError&&i.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 flex items-center gap-1",children:[i.jsx(Dn,{size:12})," Geocoding failed"]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1",children:["Service Locations (",(C.locations||[]).length,")"]}),i.jsx("div",{className:"space-y-3",children:(C.locations||[]).map((L,Y)=>{const ne=b[C.id]?.has(Y);return i.jsxs("div",{className:"pl-4 border-l-2 border-slate-200 dark:border-slate-600 py-2",children:[i.jsxs("div",{className:"flex justify-between items-start cursor-pointer",onClick:()=>E(C.id,Y),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ld,{className:`transition-transform ${ne?"rotate-180":""}`,size:16}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-semibold flex items-center gap-2",children:[i.jsx(fc,{size:14})," ",L.name," (#",L.locNum,")",L.coordinates&&i.jsx(Os,{size:12,className:"text-green-600"}),L.geocodingError&&i.jsx(Dn,{size:12,className:"text-yellow-600"})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:[L.street,", ",L.city,", ",L.state," ",L.zip]}),L.coordinates&&i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 ml-6",children:[" ",L.coordinates.lat.toFixed(6),", ",L.coordinates.lng.toFixed(6)]})]})]}),i.jsxs("div",{className:"flex gap-2",onClick:W=>W.stopPropagation(),children:[i.jsx("button",{onClick:()=>p({customer:C,locationIndex:Y}),className:"text-xs text-green-600 dark:text-green-400 hover:underline",children:"Add Asset"}),i.jsx("button",{onClick:()=>A(C,Y),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Delete"})]})]}),ne&&i.jsxs("div",{className:"mt-2 pl-6",children:[i.jsxs("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:["Assets (",(L.assets||[]).length,")"]}),i.jsxs("div",{className:"pl-4 border-l-2 border-slate-200 dark:border-slate-600 space-y-1 mt-1",children:[(L.assets||[]).map((W,G)=>i.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"flex items-center gap-2 font-semibold",children:[i.jsx(t3,{size:12})," ",W.name," (",W.type,")"]}),i.jsxs("ul",{className:"pl-5 list-disc text-gray-500 dark:text-gray-500",children:[i.jsxs("li",{children:["Brand: ",W.brand,", Model: ",W.model,", S/N: ",W.serialNumber]}),i.jsxs("li",{children:["Installed: ",W.installDate]}),i.jsxs("li",{children:["Filters: ",(W.filters||[]).map(X=>`${X.quantity}x ${X.size}`).join(", ")||"N/A"]}),i.jsxs("li",{children:["Drive: ",W.driveType,", Economizer: ",W.economizer?"Yes":"No"]})]})]}),i.jsxs("div",{className:"flex gap-2",onClick:X=>X.stopPropagation(),children:[i.jsx("button",{onClick:()=>v({customer:C,locationIndex:Y,assetIndex:G,asset:W}),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>D(C,Y,G),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Delete"})]})]},G)),!(L.assets||[]).length&&i.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 italic",children:"No assets recorded."})]})]})]},Y)})})]})]})]},C.id)})}),a&&i.jsx(ple,{onAddCustomer:P,onClose:()=>s(!1)}),o&&i.jsx(gle,{customer:o,onUpdateCustomer:S,onClose:()=>c(null)}),d&&i.jsx(yle,{customer:d,onAddLocation:T,onClose:()=>h(null)}),m&&i.jsx(xle,{customer:m.customer,locationIndex:m.locationIndex,onAddAsset:R,onClose:()=>p(null)}),y&&i.jsx(vle,{asset:y.asset,customer:y.customer,locationIndex:y.locationIndex,assetIndex:y.assetIndex,onUpdateAsset:M,onClose:()=>v(null)})]}):i.jsx("div",{className:"p-6",children:"Loading customer data..."})};function wle(){return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Technician Management Moved"}),i.jsx("p",{className:"text-blue-700",children:"The technician management system has been moved to the main application. Please use the updated interface in the main dashboard."}),i.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"Location: client/src/pages/technician-management.tsx"})]})})}const Si={PAID:"Paid",PENDING:"Pending",OVERDUE:"Overdue",DRAFT:"Draft"},hD=t=>{try{if(!t)return"N/A";const e=new Date(t);return isNaN(e.getTime())?"Invalid Date":e.toLocaleDateString()}catch(e){return console.warn("Date formatting error:",e),"Invalid Date"}},kle=t=>{const{type:e,data:r}=t;if(!e||!r)throw new Error("Missing document type or data");if(!r.id||!r.customerName)throw new Error("Missing required fields: id or customerName");if(!r.lineItems||!Array.isArray(r.lineItems))throw new Error("Line items are required and must be an array");if(r.lineItems.length===0)throw new Error("At least one line item is required");return!0},_le=()=>{if(!window.jspdf||!window.jspdf.jsPDF)throw new Error("jsPDF library is not loaded. Please refresh the page and try again.");const{jsPDF:t}=window.jspdf;if(typeof new t().autoTable!="function")throw new Error("autoTable plugin is not available. Please ensure jspdf-autotable is loaded.");return{jsPDF:t}},A5=t=>{try{const{jsPDF:e}=_le();kle(t);const r=new e,{type:n,data:a,workOrder:s,customer:o}=t;r.setFontSize(24),r.setFont(void 0,"bold"),r.text("MECHANICAL TEMP",20,30),r.setFontSize(12),r.setFont(void 0,"normal"),r.text("23093 Telegraph Rd",20,40),r.text("Southfield, MI 48033",20,47),r.text("Phone: (313) 282-4758",20,54),r.text("Email: office@mechanicaltemp.com",20,61),r.setFontSize(20),r.setFont(void 0,"bold"),r.text(n.toUpperCase(),200,30,{align:"right"}),r.setFontSize(12),r.setFont(void 0,"normal"),r.text(`${n} #: ${a.id}`,200,45,{align:"right"}),r.text(`Date: ${hD(a.date)}`,200,52,{align:"right"}),a.dueDate&&r.text(`Due Date: ${hD(a.dueDate)}`,200,59,{align:"right"});let c=80;if(r.setFontSize(14),r.setFont(void 0,"bold"),r.text("Bill To:",20,c),r.setFont(void 0,"normal"),r.setFontSize(12),c+=7,r.text(a.customerName||"Unknown Customer",20,c),o?.billingAddress){c+=7,r.text(o.billingAddress.street||"",20,c),c+=7;const y=o.billingAddress.city||"",v=o.billingAddress.state||"",w=o.billingAddress.zip||"";r.text(`${y}, ${v} ${w}`.trim(),20,c)}if(s){c+=10,r.setFont(void 0,"bold"),r.text("Service Location:",20,c),r.setFont(void 0,"normal"),c+=7;const y=s.Company||"N/A",v=s.City||"",w=s.State||"";r.text(`${y} - ${v}, ${w}`,20,c)}c+=15;const d=[["Description","Qty","Rate","Amount"]],h=a.lineItems.map(y=>[y.description||"No description",y.quantity||0,Ye(y.rate||0),Ye(y.amount||0)]);r.autoTable({startY:c,head:d,body:h,theme:"striped",headStyles:{fillColor:[22,163,74]},margin:{left:20,right:20}}),c=r.lastAutoTable.finalY+10;const m=200;if(r.setFontSize(12),r.text("Subtotal:",m-50,c,{align:"right"}),r.text(Ye(a.subtotal||0),m,c,{align:"right"}),a.discount&&a.discount>0&&(c+=7,r.text("Discount:",m-50,c,{align:"right"}),r.text(`-${Ye(a.discount)}`,m,c,{align:"right"})),a.lateFee&&a.lateFee>0&&(c+=7,r.text("Late Fee:",m-50,c,{align:"right"}),r.text(Ye(a.lateFee),m,c,{align:"right"})),c+=7,r.setFont(void 0,"bold"),r.text("Total:",m-50,c,{align:"right"}),r.text(Ye(a.total||0),m,c,{align:"right"}),s&&o){const v=(o.locations||[]).find(w=>w.name===s.Company&&w.locNum===s["Loc #"]);if(v?.assets&&v.assets.length>0){const w=s.servicedAssets?v.assets.filter(k=>s.servicedAssets.includes(k.name)):v.assets;if(w.length>0){c=Math.max(r.lastAutoTable.finalY,c)+15,r.setFontSize(14),r.setFont(void 0,"bold"),r.text("Serviced Assets:",20,c),c+=7;const k=w.map(b=>[b.name||"N/A",b.brand||"N/A",b.model||"N/A",b.serialNumber||"N/A"]);r.autoTable({startY:c,head:[["Name","Brand","Model","Serial #"]],body:k,theme:"grid",headStyles:{fillColor:[100,116,139]},margin:{left:20,right:20}})}}}const p=`${n}-${a.id}.pdf`;r.save(p),console.log(`PDF generated successfully: ${p}`)}catch(e){console.error("PDF Generation Error:",e);let r="Failed to generate PDF. ";return e.message.includes("library")?r+="Please refresh the page and try again.":e.message.includes("required")?r+="Missing required information.":r+="Please try again or contact support.",alert(r),!1}},C5=(t,e,r)=>{try{if(!t)throw new Error("Invoice data is required");if(!t.id)throw new Error("Invoice ID is required");const n=(e||[]).find(o=>o.id===t.workOrderId),a=(r||[]).find(o=>o.id===t.customerId);return A5({type:"Invoice",data:t,workOrder:n,customer:a})!==!1}catch(n){return console.error("Invoice PDF generation failed:",n),alert("Failed to generate invoice PDF: "+n.message),!1}},P5=(t,e)=>{try{if(!t)throw new Error("Quote data is required");if(!t.id)throw new Error("Quote ID is required");const r=(e||[]).find(a=>a.id===t.customerId);return A5({type:"Quote",data:t,customer:r})!==!1}catch(r){return console.error("Quote PDF generation failed:",r),alert("Failed to generate quote PDF: "+r.message),!1}},jle=({onClose:t})=>{const{workOrders:e,customers:r,handlers:n}=kn(),[a,s]=V.useState(""),[o,c]=V.useState([{description:"Service Call",quantity:1,rate:150,amount:150}]),[d,h]=V.useState(""),m=V.useMemo(()=>!a||!e?null:e.find(j=>j.id===a),[a,e]),p=V.useMemo(()=>!m||!r?null:r.find(j=>j.name===m.Client),[m,r]);V.useEffect(()=>{m?(c(m.lineItems||[{description:`Service for WO# ${m["WO#"]}`,quantity:1,rate:150,amount:150}]),h(m.Task||"")):(c([{description:"Service Call",quantity:1,rate:150,amount:150}]),h(""))},[m]);const y=(j,N,E)=>{const P=[...o],S=P[j];S[N]=E;const T=parseFloat(S.quantity)||0,A=parseFloat(S.rate)||0;S.amount=T*A,c(P)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0}]),w=j=>{o.length>1&&c(o.filter((N,E)=>E!==j))},k=()=>{if(!m)return alert("Please select a work order.");const j=o.reduce((P,S)=>P+(S.amount||0),0),E={id:`INV-${Date.now()}`,workOrderId:m.id,customerId:p?.id||"",customerName:m.Client,workOrderNumber:m["WO#"],date:new Date().toISOString(),lineItems:o,subtotal:j,discount:0,lateFee:0,total:j,status:Si.DRAFT,description:d};n.addInvoice(E),t()},b=o.reduce((j,N)=>j+(N.amount||0),0);return!e||!r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading Data..."})}):i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Create New Invoice"}),i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Select Work Order to Invoice"}),i.jsxs("select",{value:a,onChange:j=>s(j.target.value),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Select Work Order --"}),(e||[]).filter(j=>j["Order Status"]==="Completed").map(j=>i.jsxs("option",{value:j.id,children:[j["WO#"]," - ",j.Company]},j.id))]})]}),m&&p&&i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:p.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[p.billingAddress?.city,", ",p.billingAddress?.state," ",p.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[m.Company," (#",m["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m.City,", ",m.State]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Work Description"}),i.jsx("textarea",{value:d,onChange:j=>h(j.target.value),placeholder:"Describe the work performed...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((j,N)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:j.description,onChange:E=>y(N,"description",E.target.value),className:"col-span-6 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Qty",value:j.quantity,onChange:E=>y(N,"quantity",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Rate",value:j.rate,onChange:E=>y(N,"rate",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("span",{className:"col-span-1 text-right font-mono",children:Ye(j.amount)}),i.jsx("button",{onClick:()=>w(N),className:"col-span-1 text-red-500",disabled:o.length===1,children:i.jsx(rr,{size:18})})]},N))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(b)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{type:"button",onClick:k,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",disabled:!a,children:"Create Invoice"})]})]})})},Nle=({onClose:t})=>{const{workOrders:e,customers:r,handlers:n}=kn(),[a,s]=V.useState(""),[o,c]=V.useState([{description:"",quantity:1,rate:0,amount:0}]),[d,h]=V.useState(""),m=V.useMemo(()=>!a||!e?null:e.find(j=>j.id===a),[a,e]),p=V.useMemo(()=>!m||!r?null:r.find(j=>j.name===m.Client),[m,r]);V.useEffect(()=>{m?(c(m.lineItems||[{description:`Quote for WO# ${m["WO#"]}`,quantity:1,rate:0,amount:0}]),h(m.Task||"")):(c([{description:"",quantity:1,rate:0,amount:0}]),h(""))},[m]);const y=(j,N,E)=>{const P=[...o],S=P[j];S[N]=E;const T=parseFloat(S.quantity)||0,A=parseFloat(S.rate)||0;S.amount=T*A,c(P)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0}]),w=j=>{o.length>1&&c(o.filter((N,E)=>E!==j))},k=()=>{if(!m)return alert("Please select a work order to generate a quote.");const j=o.reduce((P,S)=>P+(S.amount||0),0),E={id:`QUO-${Date.now()}`,workOrderId:m.id,customerId:p?.id||"",customerName:m.Client,date:new Date().toISOString(),lineItems:o,subtotal:j,total:j,status:"Draft",description:d};n.addQuote(E),t()},b=o.reduce((j,N)=>j+(N.amount||0),0);return!e||!r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading Data..."})}):i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Create New Quote"}),i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Select Work Order to Quote"}),i.jsxs("select",{value:a,onChange:j=>s(j.target.value),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Select Work Order --"}),(e||[]).map(j=>i.jsxs("option",{value:j.id,children:[j["WO#"]," - ",j.Company]},j.id))]})]}),m&&p&&i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:p.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[p.billingAddress?.city,", ",p.billingAddress?.state," ",p.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[m.Company," (#",m["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m.City,", ",m.State]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Quote Description"}),i.jsx("textarea",{value:d,onChange:j=>h(j.target.value),placeholder:"Describe the work to be quoted...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((j,N)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:j.description,onChange:E=>y(N,"description",E.target.value),className:"col-span-6 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Qty",value:j.quantity,onChange:E=>y(N,"quantity",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Rate",value:j.rate,onChange:E=>y(N,"rate",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("span",{className:"col-span-1 text-right font-mono",children:Ye(j.amount)}),i.jsx("button",{onClick:()=>w(N),className:"col-span-1 text-red-500",disabled:o.length===1,children:i.jsx(rr,{size:18})})]},N))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(b)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{type:"button",onClick:k,className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",disabled:!a,children:"Create Quote"})]})]})})},I5=()=>{const{editingInvoice:t,setEditingInvoice:e,db:r,userId:n,workOrders:a,customers:s}=kn(),[o,c]=V.useState([]),[d,h]=V.useState(0),[m,p]=V.useState(0),[y,v]=V.useState(""),w=V.useMemo(()=>!t||!a?null:a.find(R=>R.id===t.workOrderId),[t,a]),k=V.useMemo(()=>!t||!s?null:s.find(R=>R.id===t.customerId),[t,s]),b=V.useMemo(()=>!w||!k?[]:k?.locations?.find(M=>M.name===w.Company&&M.locNum===w["Loc #"])?.assets||[],[w,k]);V.useEffect(()=>{t&&(c(t.lineItems||[{description:"",quantity:1,rate:0,amount:0,asset:""}]),h(t.discount||0),p(t.lateFee||0),v(t.description||w?.Task||""))},[t,w]);const j=(R,M,D)=>{const C=[...o],F=C[R];F[M]=D;const L=parseFloat(F.quantity)||0,Y=parseFloat(F.rate)||0;F.amount=L*Y,c(C)},N=()=>{c([...o,{description:"",quantity:1,rate:0,amount:0,asset:""}])},E=R=>{o.length>1&&c(o.filter((M,D)=>D!==R))},P=()=>{const R={...t,lineItems:o,discount:d,lateFee:m,description:y};u1(r,n,t.id,R),e(null)},S=()=>e(null);if(!t)return null;const T=o.reduce((R,M)=>R+(M.amount||0),0),A=T-d+m;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Edit Invoice #",t.id]}),i.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:k?.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:k?.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[k?.billingAddress?.city,", ",k?.billingAddress?.state," ",k?.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[w?.Company," (#",w?.["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[w?.City,", ",w?.State]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["WO#: ",w?.["WO#"]]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Work Description"}),i.jsx("textarea",{value:y,onChange:R=>v(R.target.value),placeholder:"Describe the work performed...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((R,M)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:R.description,onChange:D=>j(M,"description",D.target.value),className:"col-span-5 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsxs("select",{value:R.asset||"",onChange:D=>j(M,"asset",D.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- No Asset --"}),b.map(D=>i.jsx("option",{value:D.name,children:D.name},D.name))]}),i.jsx("input",{type:"number",placeholder:"Qty",value:R.quantity,onChange:D=>j(M,"quantity",D.target.value),className:"col-span-1 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("input",{type:"number",placeholder:"Rate",value:R.rate,onChange:D=>j(M,"rate",D.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("span",{className:"col-span-1 text-right font-mono text-gray-800 dark:text-white",children:Ye(R.amount)}),i.jsx("button",{onClick:()=>E(M),className:"col-span-1 text-red-500 hover:text-red-400 disabled:opacity-50",disabled:o.length===1,children:i.jsx(rr,{size:18})})]},M))}),i.jsx("button",{onClick:N,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Discount ($)"}),i.jsx("input",{type:"number",value:d,onChange:R=>h(parseFloat(R.target.value)||0),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Late Fee ($)"}),i.jsx("input",{type:"number",value:m,onChange:R=>p(parseFloat(R.target.value)||0),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:[i.jsxs("p",{children:["Subtotal: ",i.jsx("span",{className:"font-mono",children:Ye(T)})]}),i.jsxs("p",{className:"font-bold text-lg",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(A)})]})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("button",{onClick:()=>C5(t,a,s),className:"flex items-center gap-2 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:[i.jsx(Ud,{size:16})," View as PDF"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:S,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{onClick:P,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})})},O5=()=>{const{editingQuote:t,setEditingQuote:e,db:r,userId:n,customers:a,handlers:s}=kn(),[o,c]=V.useState([]),[d,h]=V.useState(""),m=V.useMemo(()=>!t||!a?null:a.find(E=>E.id===t.customerId),[t,a]),p=V.useMemo(()=>!m||!m.locations?[]:m.locations.flatMap(E=>E.assets||[]),[m]);V.useEffect(()=>{t&&(c(t.lineItems||[{description:"",quantity:1,rate:0,amount:0,asset:""}]),h(t.description||""))},[t]);const y=(E,P,S)=>{const T=[...o],A=T[E];A[P]=S;const R=parseFloat(A.quantity)||0,M=parseFloat(A.rate)||0;A.amount=R*M,c(T)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0,asset:""}]),w=E=>{o.length>1&&c(o.filter((P,S)=>S!==E))},k=()=>{const E=o.reduce((S,T)=>S+(T.amount||0),0),P={...t,lineItems:o,subtotal:E,total:E,description:d};hd(r,n,t.id,P),e(null)},b=()=>{if(!t)return;const E=o.reduce((S,T)=>S+(T.amount||0),0),P={id:`INV-${Date.now()}`,quoteId:t.id,customerId:t.customerId,customerName:t.customerName,date:new Date().toISOString(),lineItems:o,subtotal:E,discount:0,lateFee:0,total:E,status:Si.DRAFT,description:d};s.addInvoice(P),s.updateQuote({...t,status:"Converted"}),e(null)},j=()=>e(null);if(!t)return null;const N=o.reduce((E,P)=>E+(P.amount||0),0);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Edit Quote #",t.id]}),i.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(fp,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:m?.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:m?.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m?.billingAddress?.city,", ",m?.billingAddress?.state," ",m?.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Primary Contact"}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(R0,{size:14})," ",m?.contact?.name]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(n3,{size:14})," ",m?.contact?.email]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(i3,{size:14})," ",m?.contact?.phone]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Quote Description"}),i.jsx("textarea",{value:d,onChange:E=>h(E.target.value),placeholder:"Describe the work being quoted...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((E,P)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:E.description,onChange:S=>y(P,"description",S.target.value),className:"col-span-5 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsxs("select",{value:E.asset||"",onChange:S=>y(P,"asset",S.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- No Asset --"}),p.map(S=>i.jsx("option",{value:S.name,children:S.name},S.name))]}),i.jsx("input",{type:"number",placeholder:"Qty",value:E.quantity,onChange:S=>y(P,"quantity",S.target.value),className:"col-span-1 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("input",{type:"number",placeholder:"Rate",value:E.rate,onChange:S=>y(P,"rate",S.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("span",{className:"col-span-1 text-right font-mono text-gray-800 dark:text-white",children:Ye(E.amount)}),i.jsx("button",{onClick:()=>w(P),className:"col-span-1 text-red-500 hover:text-red-400 disabled:opacity-50",disabled:o.length===1,children:i.jsx(rr,{size:18})})]},P))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(N)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("button",{onClick:()=>P5(t,a),className:"flex items-center gap-2 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:[i.jsx(Ud,{size:16})," View as PDF"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:b,className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[i.jsx(Ui,{size:16})," Convert to Invoice"]}),i.jsx("button",{onClick:j,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{onClick:k,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})})},Sle=()=>{const{invoices:t,quotes:e,workOrders:r,customers:n,handlers:a,editingInvoice:s,setEditingInvoice:o,editingQuote:c,setEditingQuote:d}=kn(),[h,m]=V.useState("invoices"),[p,y]=V.useState(!1),[v,w]=V.useState(!1),[k,b]=V.useState(new Set),[j,N]=V.useState(!1);V.useEffect(()=>{let D=0;const C=25,F=()=>{if(D++,window.jspdf&&window.jspdf.jsPDF)try{if(typeof new window.jspdf.jsPDF().autoTable=="function"){N(!0);return}}catch(L){console.warn("PDF library test failed:",L)}D<C?setTimeout(F,200):(console.error("PDF libraries failed to load after 5 seconds"),N(!1))};F()},[]);const E=V.useMemo(()=>{const D=t||[],C=D.reduce((re,z)=>re+(z.total||0),0),F=D.filter(re=>re.status===Si.PAID),L=D.filter(re=>re.status!==Si.PAID),Y=F.reduce((re,z)=>re+(z.total||0),0),ne=L.reduce((re,z)=>re+(z.total||0),0),W=e||[],G=W.reduce((re,z)=>re+(z.total||0),0),X=W.filter(re=>re.status==="Draft"||re.status==="Pending"),ee=W.filter(re=>re.status==="Approved");return{totalInvoiceAmount:C,paidInvoicesCount:F.length,unpaidInvoicesCount:L.length,totalPaidAmount:Y,totalUnpaidAmount:ne,totalQuoteAmount:G,pendingQuotesCount:X.length,approvedQuotesCount:ee.length}},[t,e]),P=D=>{const C=new Set(k);C.has(D)?C.delete(D):C.add(D),b(C)},S=D=>({[Si.PAID]:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",[Si.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",[Si.OVERDUE]:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",[Si.DRAFT]:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",Draft:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",Pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",Approved:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",Rejected:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200","Converted to Work Order":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200"})[D]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",T=(D,...C)=>{D(...C)&&console.log("PDF generated successfully")},A=async D=>{if(window.confirm(`Approve quote ${D.id} for ${D.customerName}?`))try{a.approveQuote?await a.approveQuote(D):await a.updateQuote({...D,status:"Approved",approvedAt:new Date().toISOString()})}catch(C){console.error("Error approving quote:",C),alert("Failed to approve quote")}},R=async D=>{if(window.confirm(`Reject quote ${D.id} for ${D.customerName}?`))try{a.rejectQuote?await a.rejectQuote(D):await a.updateQuote({...D,status:"Rejected",rejectedAt:new Date().toISOString()})}catch(C){console.error("Error rejecting quote:",C),alert("Failed to reject quote")}},M=async D=>{if(window.confirm(`Convert approved quote ${D.id} to a work order?`))try{if(a.convertQuoteToWorkOrder)await a.convertQuoteToWorkOrder(D),alert(`Work order created successfully from quote ${D.id}`);else{const C={"WO#":`WO-${Date.now()}`,Client:D.customerName,Company:D.customerName,Task:`Work from Quote #${D.id}`,NTE:D.total,"Order Status":"Open","Schedule Date":"",Priority:"Regular",technician:[],quoteId:D.id,lineItems:D.lineItems||[],notes:[`Created from approved quote #${D.id}`]};await a.addNewOrder(C),await a.updateQuote({...D,status:"Converted to Work Order",convertedAt:new Date().toISOString()}),alert(`Work order created successfully from quote ${D.id}`)}}catch(C){console.error("Error converting quote to work order:",C),alert("Failed to convert quote to work order")}};return!t||!e||!r||!n?i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading billing data..."})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Billing & Invoicing"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700",children:[i.jsx(Ui,{size:20})," Create Invoice"]}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[i.jsx(Ia,{size:20})," Create Quote"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Invoiced"}),i.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:Ye(E.totalInvoiceAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(t||[]).length," invoices"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Collected"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ye(E.totalPaidAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.paidInvoicesCount," paid"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Outstanding"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:Ye(E.totalUnpaidAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.unpaidInvoicesCount," unpaid"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quotes Pending"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ye(E.totalQuoteAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.pendingQuotesCount," pending"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quotes Approved"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:E.approvedQuotesCount}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ready to convert"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("div",{className:"border-b dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex gap-6 px-6",children:[i.jsxs("button",{onClick:()=>m("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="invoices"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["Invoices (",(t||[]).length,")"]}),i.jsxs("button",{onClick:()=>m("quotes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="quotes"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["Quotes (",(e||[]).length,")"]})]})}),i.jsxs("div",{className:"p-6",children:[h==="invoices"&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-3",children:"Invoice ID"}),i.jsx("th",{scope:"col",className:"p-3",children:"Customer"}),i.jsx("th",{scope:"col",className:"p-3",children:"Date"}),i.jsx("th",{scope:"col",className:"p-3",children:"Items"}),i.jsx("th",{scope:"col",className:"p-3",children:"Total"}),i.jsx("th",{scope:"col",className:"p-3",children:"Status"}),i.jsx("th",{scope:"col",className:"p-3",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(D=>i.jsxs(Q.Fragment,{children:[i.jsxs("tr",{className:"bg-white border-b dark:bg-slate-800 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:["#",D.id]}),i.jsx("td",{className:"p-3",children:D.customerName}),i.jsx("td",{className:"p-3",children:new Date(D.date).toLocaleDateString()}),i.jsx("td",{className:"p-3",children:i.jsxs("button",{onClick:()=>P(D.id),className:"flex items-center gap-1 text-blue-600 hover:text-blue-500",children:[D.lineItems?.length||0," items ",i.jsx(Ld,{size:14})]})}),i.jsx("td",{className:"p-3 font-mono font-semibold",children:Ye(D.total)}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${S(D.status)}`,children:D.status})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>T(C5,D,r,n),className:"flex items-center gap-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white disabled:opacity-50 disabled:cursor-wait",disabled:!j,title:j?"Generate PDF":"PDF library loading...",children:[i.jsx(Ud,{size:16})," ",!j&&"Loading..."]}),D.status!==Si.PAID?i.jsxs("button",{onClick:()=>a.markInvoicePaid(D.id,!0),className:"flex items-center gap-1 text-green-600 hover:text-green-500 text-xs",children:[i.jsx(ea,{size:16})," Mark Paid"]}):i.jsxs("button",{onClick:()=>a.markInvoicePaid(D.id,!1),className:"flex items-center gap-1 text-orange-600 hover:text-orange-500 text-xs",children:[i.jsx(fp,{size:16})," Mark Unpaid"]}),i.jsxs("button",{onClick:()=>o(D),className:"flex items-center gap-1 font-semibold text-blue-600 hover:text-blue-500 text-xs",children:[i.jsx(uA,{size:16})," Edit"]})]})})]}),k.has(D.id)&&i.jsx("tr",{className:"bg-gray-50 dark:bg-slate-900/50",children:i.jsxs("td",{colSpan:"7",className:"p-4",children:[i.jsx("h4",{className:"font-bold mb-2 text-gray-800 dark:text-white",children:"Invoice Details:"}),i.jsx("ul",{className:"list-disc pl-5 text-gray-700 dark:text-gray-300 space-y-1",children:(D.lineItems||[]).map((C,F)=>i.jsxs("li",{children:[C.quantity,"x ",C.description," @ ",Ye(C.rate)," = ",Ye(C.amount)]},F))}),i.jsxs("div",{className:"mt-2 pt-2 border-t dark:border-slate-600 text-right text-gray-800 dark:text-white",children:[i.jsxs("p",{children:["Subtotal: ",Ye(D.subtotal)]}),D.discount>0&&i.jsxs("p",{className:"text-green-600",children:["Discount: -",Ye(D.discount)]}),D.lateFee>0&&i.jsxs("p",{className:"text-red-600",children:["Late Fee: +",Ye(D.lateFee)]}),i.jsxs("p",{className:"font-bold text-lg",children:["Total: ",Ye(D.total)]})]})]})})]},D.id))})]})}),h==="quotes"&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-3",children:"Quote ID"}),i.jsx("th",{scope:"col",className:"p-3",children:"Customer"}),i.jsx("th",{scope:"col",className:"p-3",children:"Date"}),i.jsx("th",{scope:"col",className:"p-3",children:"Total"}),i.jsx("th",{scope:"col",className:"p-3",children:"Status"}),i.jsx("th",{scope:"col",className:"p-3",children:"Actions"})]})}),i.jsx("tbody",{children:e.map(D=>i.jsxs("tr",{className:"bg-white border-b dark:bg-slate-800 dark:border-slate-700",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:D.id}),i.jsx("td",{className:"p-3",children:D.customerName}),i.jsx("td",{className:"p-3",children:new Date(D.date).toLocaleDateString()}),i.jsx("td",{className:"p-3 font-mono",children:Ye(D.total)}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${S(D.status)}`,children:D.status})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>T(P5,D,n),className:"flex items-center gap-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white disabled:opacity-50",disabled:!j,title:j?"Generate PDF":"PDF library loading...",children:i.jsx(Ud,{size:16})}),D.status==="Draft"||D.status==="Pending"?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>A(D),className:"flex items-center gap-1 text-green-600 hover:text-green-500 text-xs",title:"Approve Quote",children:[i.jsx(gz,{size:14})," Approve"]}),i.jsxs("button",{onClick:()=>R(D),className:"flex items-center gap-1 text-red-600 hover:text-red-500 text-xs",title:"Reject Quote",children:[i.jsx(pz,{size:14})," Reject"]})]}):D.status==="Approved"?i.jsxs("button",{onClick:()=>M(D),className:"flex items-center gap-1 text-blue-600 hover:text-blue-500 text-xs",title:"Convert to Work Order",children:[i.jsx(_a,{size:14})," Create WO"]}):null,i.jsxs("button",{onClick:()=>d(D),className:"flex items-center gap-1 font-semibold text-blue-600 hover:text-blue-500 text-xs",children:[i.jsx(uA,{size:14})," Edit"]})]})})]},D.id))})]})})]})]}),p&&i.jsx(jle,{onClose:()=>y(!1)}),v&&i.jsx(Nle,{onClose:()=>w(!1)}),s&&i.jsx(I5,{}),c&&i.jsx(O5,{})]})},Ele=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),R5=V.createContext({workOrders:[],technicians:[]}),Tle=()=>V.useContext(R5),Ale=()=>{const{workOrders:t,technicians:e}=Tle(),[r,n]=V.useState(!1);if(!t||!e)return i.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"Loading leaderboard data..."});const a=t.filter(p=>p["Order Status"]==="Completed"),s=a.reduce((p,y)=>p+(y.NTE||0),0),o=V.useMemo(()=>!e||!a?[]:e.filter(y=>y.name!=="Unassigned").map(y=>{const v=a.filter(w=>w.technicianId===y.id).length;return{name:y.name,count:v,id:y.id}}).sort((y,v)=>v.count-y.count),[a,e]),c=Math.max(...o.map(p=>p.count),0),d=new Date().toLocaleString("default",{month:"long",year:"numeric"}),h=p=>p===0?"text-yellow-500":p===1?"text-gray-400 dark:text-gray-500":p===2?"text-yellow-600":"text-gray-500",m=()=>{if(typeof window.jspdf>"u"||typeof window.html2canvas>"u"){console.error("PDF generation libraries are not loaded yet."),alert("PDF generation script is still loading. Please try again in a moment.");return}n(!0);const p=document.getElementById("leaderboard-view"),{jsPDF:y}=window.jspdf;window.html2canvas(p,{scale:2,useCORS:!0}).then(v=>{const w=v.toDataURL("image/png"),k=new y({orientation:"portrait",unit:"mm",format:"a4"}),b=k.internal.pageSize.getWidth(),j=k.internal.pageSize.getHeight(),N=v.width,E=v.height,P=N/E,S=b,T=S/P;k.addImage(w,"PNG",0,0,S,T>j?j:T),k.save("technician-leaderboard.pdf"),n(!1)}).catch(v=>{console.error("Failed to generate PDF",v),n(!1)})};return i.jsxs("div",{id:"leaderboard-view",className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-4 border-b border-gray-200 dark:border-slate-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Technician Leaderboard"}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-semibold",children:[d," Standings"]})]}),i.jsxs("button",{onClick:m,disabled:r,className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors mt-4 sm:mt-0 disabled:bg-blue-400 disabled:cursor-not-allowed",children:[i.jsx(yz,{size:20}),r?"Generating PDF...":"Print Winner's Certificate"]})]}),i.jsx("div",{className:"space-y-3 my-6",children:o.length>0&&o.some(p=>p.count>0)?o.map((p,y)=>i.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-4 transition-all ${y===0?"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-500/30":"bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600"}`,children:[i.jsx("div",{className:"w-10 text-center font-bold text-lg",children:y<3?i.jsx(rz,{size:28,className:h(y)}):i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:y+1})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-md text-gray-700 dark:text-gray-200",children:p.name}),y===0&&i.jsx("span",{className:"bg-yellow-200 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full",children:"Top Performer"})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-600 rounded-full h-4 mt-1",children:i.jsx("div",{className:"bg-blue-500 h-4 rounded-full flex items-center justify-end pr-2 text-white text-xs font-bold",style:{width:`${c>0?p.count/c*100:0}%`},children:p.count>0&&p.count})})]})]},p.id)):i.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No completed jobs to rank yet for this month."})}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-slate-600",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded-lg text-center",children:[i.jsx("h4",{className:"text-md font-semibold text-gray-600 dark:text-gray-400",children:"Completed Jobs"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:a.length})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded-lg text-center",children:[i.jsx("h4",{className:"text-md font-semibold text-gray-600 dark:text-gray-400",children:"Total Revenue"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:Ele(s)})]})]})})]})};function Cle(){const[t]=V.useState({workOrders:[],technicians:[]});return V.useEffect(()=>{const e=r=>new Promise((n,a)=>{if(document.querySelector(`script[src="${r}"]`)){n();return}const s=document.createElement("script");s.src=r,s.onload=()=>n(),s.onerror=()=>a(new Error(`Failed to load script: ${r}`)),document.body.appendChild(s)});Promise.all([e("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"),e("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js")]).then(()=>{console.log("PDF generation libraries loaded successfully.")}).catch(r=>{console.error(r)})},[]),i.jsx("div",{className:"bg-slate-100 dark:bg-slate-900 min-h-screen p-4",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"w-full",children:i.jsx(R5.Provider,{value:t,children:i.jsx(Ale,{})})})})})}const Ple=()=>{const{workOrders:t,invoices:e}=kn(),[r,n]=V.useState(""),[a,s]=V.useState(0),[o,c]=V.useState(0),[d,h]=V.useState(0),[m,p]=V.useState(!0);if(!t)return i.jsx("div",{className:"p-6",children:"Loading calculator data..."});const y=V.useMemo(()=>(t||[]).filter(E=>E["Order Status"]==="Completed"),[t]),v=V.useMemo(()=>!r||!e?[]:e.filter(E=>E.workOrderId===r),[r,e]),w=V.useMemo(()=>v.reduce((E,P)=>E+(P.total||0),0),[v]);V.useEffect(()=>{const E=t.find(P=>P.id===r);if(E){const P=m&&w>0?w:E.NTE||0;s(P),c(E.materialCost||0),h(E.laborCost||0)}else s(0),c(0),h(0)},[r,t,w,m]);const k=o+d,b=a-k,j=a>0?b/a*100:0,N=t.find(E=>E.id===r);return i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Profit & Margin Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 rounded-lg space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Load Data from Completed Work Order (Optional)"}),i.jsxs("select",{value:r,onChange:E=>n(E.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- Manual Entry --"}),y.map(E=>{const P=e?e.filter(T=>T.workOrderId===E.id).length:0,S=e?e.filter(T=>T.workOrderId===E.id).reduce((T,A)=>T+(A.total||0),0):0;return i.jsxs("option",{value:E.id,children:[E["WO#"]," - ",E.Company,P>0?` [${P} invoice(s): ${Ye(S)}]`:` [NTE: ${Ye(E.NTE)}]`]},E.id)})]})]}),N&&v.length>0&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Revenue Source:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"useInvoiceData",checked:m,onChange:E=>p(E.target.checked),className:"h-4 w-4"}),i.jsx("label",{htmlFor:"useInvoiceData",className:"text-sm text-blue-700 dark:text-blue-300",children:"Use Invoice Total"})]})]}),i.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Work Order NTE:"}),i.jsx("span",{className:"font-mono",children:Ye(N.NTE||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Total Invoiced (",v.length," invoice",v.length!==1?"s":"","):"]}),i.jsx("span",{className:"font-mono",children:Ye(w)})]}),v.map((E,P)=>i.jsxs("div",{className:"flex justify-between text-xs ml-4",children:[i.jsxs("span",{children:[" Invoice #",E.id,":"]}),i.jsx("span",{className:"font-mono",children:Ye(E.total||0)})]},E.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:["Total Revenue ($)",N&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:m&&w>0?"(from invoices)":"(from work order NTE)"})]}),i.jsx("input",{type:"number",value:a,onChange:E=>s(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Material Cost ($)"}),i.jsx("input",{type:"number",value:o,onChange:E=>c(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Labor Cost ($)"}),i.jsx("input",{type:"number",value:d,onChange:E=>h(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 rounded-lg flex flex-col justify-center items-center space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Profit Margin"}),i.jsxs("p",{className:`text-6xl font-bold ${j>=25?"text-green-500":j>=15?"text-yellow-500":"text-red-500"}`,children:[j.toFixed(1),i.jsx("span",{className:"text-4xl",children:"%"})]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[j>=25&&"Excellent margin",j>=15&&j<25&&"Good margin",j<15&&j>=0&&"Low margin",j<0&&"Loss"]})]}),i.jsxs("div",{className:"w-full grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Revenue"}),i.jsx("p",{className:"text-lg font-semibold text-blue-500",children:Ye(a)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cost"}),i.jsx("p",{className:"text-lg font-semibold text-red-500",children:Ye(k)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Net Profit"}),i.jsx("p",{className:`text-lg font-semibold ${b>=0?"text-green-500":"text-red-500"}`,children:Ye(b)})]})]}),N&&v.length>0&&i.jsx("div",{className:"w-full text-center text-xs",children:w!==(N.NTE||0)&&i.jsxs("div",{className:`px-2 py-1 rounded ${w>(N.NTE||0)?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[w>(N.NTE||0)?"":"",Ye(Math.abs(w-(N.NTE||0))),w>(N.NTE||0)?" over NTE":" under NTE"]})})]})]})]})},fD=t=>{switch(t?.toLowerCase()){case"completed":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},mD=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},pD=(t,e)=>{if(!t||!e)return"N/A";try{const r=new Date(t),a=new Date(e)-r,s=Math.floor(a/(1e3*60*60)),o=Math.floor(a%(1e3*60*60)/(1e3*60));return`${s}h ${o}m`}catch{return"N/A"}},Ile=()=>{const{serviceReports:t=[],technicians:e=[],workOrders:r=[],customers:n=[]}=kn(),[a,s]=V.useState(""),[o,c]=V.useState("all"),[d,h]=V.useState("all"),[m,p]=V.useState("all"),[y,v]=V.useState(null),[w,k]=V.useState(!1),b=V.useMemo(()=>t?.length?t.filter(T=>{const A=!a||T.workOrderId?.toLowerCase().includes(a.toLowerCase())||T.customerName?.toLowerCase().includes(a.toLowerCase())||T.location?.toLowerCase().includes(a.toLowerCase())||T.technicianName?.toLowerCase().includes(a.toLowerCase()),R=o==="all"||T.status===o,M=d==="all"||T.technicianId===d,D=m==="all"||(()=>{const C=new Date(T.completedAt||T.createdAt),F=new Date;switch(m){case"today":return C.toDateString()===F.toDateString();case"week":const L=new Date(F.getTime()-10080*60*1e3);return C>=L;case"month":const Y=new Date(F.getTime()-720*60*60*1e3);return C>=Y;default:return!0}})();return A&&R&&M&&D}):[],[t,a,o,d,m]),j=T=>{v(T),k(!0)},N=T=>{T.pdfUrl?window.open(T.pdfUrl,"_blank"):(console.log("Generate PDF for report:",T.id),alert("PDF generation not yet implemented"))},E=T=>e.find(R=>R.id===T)?.name||"Unknown Technician",P=T=>r.find(R=>R.id===T)||{},S=V.useMemo(()=>e?.filter(T=>T.status==="active")||[],[e]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Service Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View completed service reports from technicians"})]}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.length," of ",t?.length||0," reports"]})]}),!1,i.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search reports...",value:a,onChange:T=>s(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),i.jsx("div",{children:i.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"in_progress",children:"In Progress"}),i.jsx("option",{value:"pending",children:"Pending"})]})}),i.jsx("div",{children:i.jsxs("select",{value:d,onChange:T=>h(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Technicians"}),S.map(T=>i.jsx("option",{value:T.id,children:T.name},T.id))]})}),i.jsx("div",{children:i.jsxs("select",{value:m,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"week",children:"Past Week"}),i.jsx("option",{value:"month",children:"Past Month"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Work Order"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Technician"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Completed"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b?.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:[i.jsx(Ui,{className:"mx-auto w-12 h-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No service reports found"}),i.jsx("p",{className:"text-sm",children:"Service reports from technicians will appear here"})]})}):b.map(T=>{const A=P(T.workOrderId);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.workOrderId}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[i.jsx(Os,{className:"w-3 h-3 mr-1"}),T.location||A.location]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(R0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E(T.technicianId)}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:T.technicianEmail})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.customerName||A.customerName})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fD(T.status)}`,children:[T.status==="completed"&&i.jsx(ea,{className:"w-3 h-3 mr-1"}),T.status==="in_progress"&&i.jsx($d,{className:"w-3 h-3 mr-1"}),T.status==="pending"&&i.jsx(Dn,{className:"w-3 h-3 mr-1"}),(T.status||"pending").replace("_"," ").toUpperCase()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(P0,{className:"w-4 h-4 mr-1"}),mD(T.completedAt)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx($d,{className:"w-4 h-4 mr-1"}),pD(T.startTime,T.completedAt)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>j(T),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:i.jsx(lz,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>N(T),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Download PDF",children:i.jsx(Fd,{className:"w-4 h-4"})})]})})]},T.id)})})]})})}),w&&y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Service Report Details"}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Work Order: ",y.workOrderId]})]}),i.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Technician"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:E(y.technicianId)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Customer"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:y.customerName})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:y.location})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fD(y.status)}`,children:(y.status||"pending").replace("_"," ").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Completed"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:mD(y.completedAt)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Duration"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:pD(y.startTime,y.completedAt)})]})]})]}),y.units&&y.units.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(_a,{className:"w-4 h-4 mr-2"}),"Units Serviced (",y.units.length,")"]}),i.jsx("div",{className:"space-y-4",children:y.units.map((T,A)=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Type"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:T.type})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Model"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:T.model||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Serial"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:T.serial||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:T.location||"N/A"})]})]}),T.notes&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Notes"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:T.notes})]}),T.photos&&T.photos.length>0&&i.jsxs("div",{className:"mt-3",children:[i.jsxs("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Photos (",T.photos.length,")"]}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:T.photos.map((R,M)=>i.jsx("img",{src:R.url||R,alt:`Unit ${A+1} Photo ${M+1}`,className:"w-full h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>window.open(R.url||R,"_blank")},M))})]})]},A))})]}),y.punchList&&y.punchList.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:["Punch List (",y.punchList.length," items)"]}),i.jsx("div",{className:"space-y-2",children:y.punchList.map((T,A)=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[i.jsx(ea,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:T.description||T}),T.completed&&i.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Completed"})]},A))})]}),y.notes&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-md font-medium text-gray-900 dark:text-white mb-2",children:"Service Notes"}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:i.jsx("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:y.notes})})]}),y.photos&&y.photos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(iz,{className:"w-4 h-4 mr-2"}),"General Photos (",y.photos.length,")"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.photos.map((T,A)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:T.url||T,alt:`Service Photo ${A+1}`,className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>window.open(T.url||T,"_blank")}),T.caption&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:T.caption})]},A))})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-600",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Close"}),i.jsxs("button",{onClick:()=>N(y),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[i.jsx(Fd,{className:"w-4 h-4 inline mr-2"}),"Download PDF"]})]})]})})})]})},Ole=()=>{const{customers:t,inventory:e,technicians:r,handlers:n,setIsAddingOrder:a}=kn(),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState("Regular"),[p,y]=V.useState(""),[v,w]=V.useState(""),[k,b]=V.useState([{description:"NTE",quantity:1,rate:75,amount:75,inventoryId:null,asset:""}]),j=V.useMemo(()=>(t||[]).find(ge=>ge.id===s),[s,t]),[N,E]=V.useState([]),[P,S]=V.useState(""),[T,A]=V.useState([]),[R,M]=V.useState(""),[D,C]=V.useState(0),[F,L]=V.useState(!1),[Y,ne]=V.useState(""),[W,G]=V.useState(""),[X,ee]=V.useState(""),[re,z]=V.useState("MI"),[Z,J]=V.useState([]),[oe,he]=V.useState(null),ve=V.useMemo(()=>(r||[]).filter(ge=>ge.mobileAccess&&ge.name!=="Unassigned"),[r]);V.useEffect(()=>{t&&t.length>0&&!s&&o(t[0].id)},[t,s]),V.useEffect(()=>{if(j){if(j.locations?.length>0){C(0),L(!1);const ge=j.locations[0];ge.assets?.length>0&&A(ge.assets.map(Ce=>Ce.name))}else C(0),L(!0),ne(j.type==="Residential"?"Primary Residence":"Main Location"),G(j.type==="Residential"?"N/A":"001"),ee(j.billingAddress?.city||""),z(j.billingAddress?.state||"MI");J([]),A([])}},[j]),V.useEffect(()=>{if(j&&!F&&j.locations?.length>0){const ge=j.locations[D];ge?.assets?.length>0?A(ge.assets.map(Ce=>Ce.name)):A([])}},[D,j,F]);const fe=()=>{a(!1)},ye=()=>{const ge=new Date().toISOString().split("T")[0].replace(/-/g,""),Ce=new Date().toTimeString().slice(0,5).replace(":",""),tt=Math.floor(Math.random()*999).toString().padStart(3,"0");return`WO-${ge}-${Ce}-${tt}`},q=ge=>{J(Ce=>Ce.includes(ge)?Ce.filter(tt=>tt!==ge):[...Ce,ge])},de=ge=>{E(Ce=>Ce.includes(ge)?Ce.filter(tt=>tt!==ge):[...Ce,ge])},pe=ge=>{A(Ce=>Ce.includes(ge)?Ce.filter(tt=>tt!==ge):[...Ce,ge])},le=()=>{R.trim()&&!T.includes(R.trim())&&(A(ge=>[...ge,R.trim()]),M(""))},je=ge=>{A(Ce=>Ce.filter(tt=>tt!==ge))},Te=ge=>{ge.preventDefault();let Ce;if(F){if(!Y.trim()||!X.trim())return alert("Please fill out the new location name and city.");Ce={name:Y.trim(),locNum:W.trim()||"N/A",city:X.trim(),state:re.trim(),assets:[]}}else Ce=j?.locations[D];if(!s||!j||!Ce||!c.trim())return alert("Please fill out all required fields, including the task description.");const Ar={"Work Order #":p.trim()||ye(),"Client WO#":p.trim()||"",Client:j.name,Company:Ce.name,"Loc #":Ce.locNum,Task:c,Priority:h,Notes:v.trim(),City:Ce.city,State:Ce.state,lineItems:k,servicedAssets:Z,"Order Status":"Open","Created Date":kN(new Date().toISOString().split("T")[0]),technician:N,"Schedule Date":P||"",expectedAssets:T,Address:`${Ce.city}, ${Ce.state}`};n.addNewOrder(Ar,oe)},Ze=()=>b([...k,{description:"",quantity:1,rate:0,amount:0,inventoryId:null,asset:""}]),et=ge=>{k.length>1&&b(k.filter((Ce,tt)=>tt!==ge))},Nt=(ge,Ce,tt)=>{const Ar=[...k],St=Ar[ge];if(St[Ce]=tt,Ce==="inventoryId"){const un=(e||[]).find(qt=>qt.id===tt);un&&(St.description=un.name,St.rate=un.price)}St.amount=(St.quantity||0)*(St.rate||0),b(Ar)};if(!t)return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading customer data..."})});const nr=V.useMemo(()=>F||!j||!j.locations||j.locations.length===0?[]:j.locations[D]?.assets||[],[D,j,F]),ct="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:Te,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Work Order"}),i.jsx("button",{type:"button",onClick:fe,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Work Order Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Client"}),i.jsxs("select",{value:s,onChange:ge=>o(ge.target.value),className:ct,children:[i.jsx("option",{value:"",children:"Select a customer..."}),(t||[]).map(ge=>i.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Task / Issue"}),i.jsx("input",{type:"text",value:c,onChange:ge=>d(ge.target.value),placeholder:"e.g., AC not cooling",className:ct,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Priority"}),i.jsxs("select",{value:h,onChange:ge=>m(ge.target.value),className:ct,children:[i.jsx("option",{children:"Regular"}),i.jsx("option",{children:"Low"}),i.jsx("option",{children:"Urgent"}),i.jsx("option",{children:"Emergency"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:["Client WO# ",i.jsx("span",{className:"text-xs text-gray-500",children:"(optional)"})]}),i.jsx("input",{type:"text",value:p,onChange:ge=>y(ge.target.value),placeholder:"Client's work order #",className:ct}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave blank to auto-generate"})]})]})]}),i.jsxs("fieldset",{className:"border border-blue-300 dark:border-blue-600 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[i.jsxs("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white flex items-center gap-2",children:[i.jsx(dA,{size:20}),"Mobile Technician Assignment"]}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:["Assign to Mobile Technicians (",N.length," selected)"]}),ve.length===0?i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center",children:["No technicians with mobile access found.",i.jsx("br",{}),"Add technicians with mobile access in Technician Management."]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ve.map(ge=>i.jsxs("label",{className:"flex items-center gap-2 p-3 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:N.includes(ge.id),onChange:()=>de(ge.id),className:"h-4 w-4 rounded text-blue-600 focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:ge.name}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ge.status,"  ",ge.email]})]})]},ge.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1 flex items-center gap-2",children:[i.jsx(P0,{size:16}),"Schedule Date (Optional)"]}),i.jsx("input",{type:"datetime-local",value:P,onChange:ge=>S(ge.target.value),className:ct}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Technicians will see this scheduled date in their mobile app"})]})]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Service Location"}),j&&!F?i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mt-2 mb-1",children:"Select Location"}),i.jsx("select",{value:D,onChange:ge=>C(parseInt(ge.target.value)),className:ct,children:(j.locations||[]).map((ge,Ce)=>i.jsxs("option",{value:Ce,children:[ge.name," (#",ge.locNum,") - ",ge.city]},Ce))})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location Name"}),i.jsx("input",{value:Y,onChange:ge=>ne(ge.target.value),type:"text",className:ct})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location #"}),i.jsx("input",{value:W,onChange:ge=>G(ge.target.value),type:"text",className:ct})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City"}),i.jsx("input",{value:X,onChange:ge=>ee(ge.target.value),type:"text",className:ct})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State"}),i.jsx("input",{value:re,onChange:ge=>z(ge.target.value),type:"text",className:ct})]})]})]}),i.jsxs("fieldset",{className:"border border-green-300 dark:border-green-600 p-4 rounded-lg bg-green-50 dark:bg-green-900/20",children:[i.jsxs("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white flex items-center gap-2",children:[i.jsx(t3,{size:20}),"Expected Assets for Mobile App"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"These assets will be suggested to technicians in the mobile app to help guide their service work."}),nr.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:"Assets from Location"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:nr.map((ge,Ce)=>i.jsxs("label",{className:"flex items-center gap-2 p-2 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:T.includes(ge.name),onChange:()=>pe(ge.name),className:"h-4 w-4 rounded text-green-600 focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:ge.name})]},Ce))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:"Add Custom Expected Asset"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:R,onChange:ge=>M(ge.target.value),placeholder:"e.g., Rooftop Unit #1, Boiler System",className:`${ct} flex-1`,onKeyPress:ge=>ge.key==="Enter"&&(ge.preventDefault(),le())}),i.jsx("button",{type:"button",onClick:le,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add"})]})]}),T.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:["Expected Assets (",T.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((ge,Ce)=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 rounded-full text-sm",children:[ge,i.jsx("button",{type:"button",onClick:()=>je(ge),className:"hover:text-green-600 dark:hover:text-green-300",children:i.jsx(Pa,{size:14})})]},Ce))})]})]}),nr.length>0&&i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Assets Being Serviced"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:nr.map((ge,Ce)=>i.jsxs("label",{className:"flex items-center gap-2 p-2 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:Z.includes(ge.name),onChange:()=>q(ge.name),className:"h-4 w-4 rounded text-blue-600 focus:ring-blue-500"}),i.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[ge.name," (",ge.type,")"]})]},Ce))})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Attachments"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Upload PDF Form or Checklist"}),i.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[i.jsx("input",{type:"file",accept:".pdf",onChange:ge=>he(ge.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),oe&&i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:oe.name})]})]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2 mt-2",children:k.map((ge,Ce)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsxs("select",{className:`col-span-3 ${ct}`,value:ge.inventoryId||"",onChange:tt=>Nt(Ce,"inventoryId",tt.target.value),children:[i.jsx("option",{value:"",children:"-- Custom Item --"}),(e||[]).map(tt=>i.jsx("option",{value:tt.id,children:tt.name},tt.id))]}),i.jsx("input",{type:"text",placeholder:"Description",value:ge.description,onChange:tt=>Nt(Ce,"description",tt.target.value),className:`col-span-4 ${ct}`}),i.jsx("input",{type:"number",placeholder:"Qty",value:ge.quantity,onChange:tt=>Nt(Ce,"quantity",parseFloat(tt.target.value)),className:`col-span-1 ${ct}`}),i.jsx("input",{type:"number",placeholder:"Rate",value:ge.rate,onChange:tt=>Nt(Ce,"rate",parseFloat(tt.target.value)),className:`col-span-2 ${ct}`}),i.jsx("div",{className:"col-span-1 p-2 text-right font-mono dark:text-gray-300",children:Ye(ge.amount)}),i.jsx("button",{type:"button",onClick:()=>et(Ce),className:"col-span-1 text-red-500 hover:text-red-700 disabled:opacity-50",disabled:k.length<=1,children:i.jsx(rr,{size:18})})]},Ce))}),i.jsxs("button",{type:"button",onClick:Ze,className:"mt-2 flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold",children:[i.jsx(Ia,{size:16})," Add Line Item"]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Notes"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Additional Information"}),i.jsx("textarea",{value:v,onChange:ge=>w(ge.target.value),placeholder:"Add any additional notes, special instructions, or observations...",rows:4,className:`${ct} resize-vertical min-h-[100px]`})]})]})]}),i.jsx("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 mt-auto",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:N.length>0&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(dA,{size:16}),N.length," mobile technician(s) will receive this work order"]})}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:!s||!c.trim(),children:"Create Work Order"})]})})]})})};function Rle(t,e){switch(e.type){case"SET_FIELD":return{...t,[e.field]:e.value};case"TOGGLE_TECH":{const r=t.assignedTechnicians.includes(e.techName)?t.assignedTechnicians.filter(n=>n!==e.techName):[...t.assignedTechnicians,e.techName];return{...t,assignedTechnicians:r}}case"RESET_FORM":return e.payload;default:return t}}const Dle=()=>{const{selectedOrder:t,setSelectedOrder:e,technicians:r,handlers:n}=kn(),a=t,[s,o]=V.useReducer(Rle,{}),[c,d]=V.useState("");if(V.useEffect(()=>{a&&o({type:"RESET_FORM",payload:{status:a["Order Status"],assignedTechnicians:a.technician||[],scheduleDate:wg(a["Schedule Date"]),startTime:a.startTime||"",endTime:a.endTime||"",clientWO:a["Client WO#"]||""}})},[a]),!a)return null;const h=(w,k)=>{o({type:"SET_FIELD",field:w,value:k})},m=w=>{o({type:"TOGGLE_TECH",techName:w})},p=()=>{const w={};s.status!==a["Order Status"]&&(w["Order Status"]=s.status,s.status==="Completed"&&!a["Completed Date"]&&(w["Completed Date"]=E5(new Date))),JSON.stringify(s.assignedTechnicians)!==JSON.stringify(a.technician)&&(w.technician=s.assignedTechnicians);const k=kN(s.scheduleDate);(k!==a["Schedule Date"]||s.startTime!==a.startTime||s.endTime!==a.endTime)&&(w["Schedule Date"]=k,w.startTime=s.startTime,w.endTime=s.endTime,s.status==="Open"&&s.scheduleDate&&(w["Order Status"]="Scheduled")),s.clientWO!==a["Client WO#"]&&(w["Client WO#"]=s.clientWO),Object.keys(w).length>0&&n.updateOrder(a.id,w)},y=()=>{c.trim()&&n.addNote(a.id,c,()=>d(""))},v=V.useMemo(()=>[{label:"Work Order #",value:a["Work Order #"]||a["WO#"],icon:i.jsx(_a,{})},{label:"Client WO#",value:a["Client WO#"],icon:i.jsx(J4,{})},{label:"Location",value:`${a.Company} (#${a["Loc #"]})`,icon:i.jsx(fc,{})},{label:"Address",value:`${a.City}, ${a.State}`,icon:i.jsx(Os,{})},{label:"Priority",value:a.Priority,icon:i.jsx(I0,{}),style:`${Uoe("priority",a.Priority)} px-2 py-0.5 rounded-full text-xs font-semibold`},{label:"Task",value:a.Task},{label:"NTE Amount",value:Ye(a.NTE)},{label:"Created Date",value:_N(a["Created Date"])}],[a]);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsxs("header",{className:"p-6 border-b border-gray-200 dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Work Order Details"}),i.jsx("button",{onClick:()=>e(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(Pa,{size:28})})]}),i.jsxs("main",{className:"p-6 overflow-y-auto",children:[i.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:v.map(w=>i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:w.label}),i.jsxs("div",{className:"text-base text-gray-900 dark:text-white font-semibold flex items-center gap-2 mt-1",children:[w.icon&&i.jsx("span",{className:"text-gray-400",children:Q.cloneElement(w.icon,{size:16})}),i.jsx("span",{className:w.style||"",children:w.value})]})]},w.label))}),i.jsxs("section",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Job Management"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Status"}),i.jsxs("select",{value:s.status||"",onChange:w=>h("status",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",children:[i.jsx("option",{children:"Open"}),i.jsx("option",{children:"Scheduled"}),i.jsx("option",{children:"In Progress"}),i.jsx("option",{children:"On Hold"}),i.jsx("option",{children:"Completed"}),i.jsx("option",{children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Assigned Technicians"}),i.jsx("div",{className:"border border-gray-300 dark:border-slate-600 p-2 rounded-lg max-h-24 overflow-y-auto bg-white dark:bg-slate-700",children:(r||[]).filter(w=>w.name!=="Unassigned").map(w=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`tech-${w.id}`,checked:(s.assignedTechnicians||[]).includes(w.name),onChange:()=>m(w.name),className:"mr-2"}),i.jsx("label",{htmlFor:`tech-${w.id}`,className:"text-gray-900 dark:text-white",children:w.name})]},w.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Schedule Date"}),i.jsx("input",{type:"date",value:s.scheduleDate||"",onChange:w=>h("scheduleDate",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Start Time"}),i.jsx("input",{type:"time",value:s.startTime||"",onChange:w=>h("startTime",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"End Time"}),i.jsx("input",{type:"time",value:s.endTime||"",onChange:w=>h("endTime",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Client WO#"}),i.jsx("input",{type:"text",value:s.clientWO||"",onChange:w=>h("clientWO",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:p,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})})]}),i.jsxs("section",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[i.jsx(a3,{size:20,className:"mr-2"}),"Work Notes"]}),i.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto bg-gray-50 dark:bg-slate-700 p-3 rounded-lg",children:a.notes&&a.notes.length>0?a.notes.sort((w,k)=>new Date(k.timestamp)-new Date(w.timestamp)).map((w,k)=>i.jsxs("div",{className:"text-sm bg-white dark:bg-slate-600 p-2 rounded shadow-sm",children:[i.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:w.text}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right",children:Voe(w.timestamp)})]},k)):i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No notes for this job yet."})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("textarea",{value:c,onChange:w=>d(w.target.value),placeholder:"Add a new note...",rows:"3",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("button",{onClick:y,disabled:!c.trim(),className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Add Note"})})]})]})]})]})})},D5=V.createContext(null),kn=()=>V.useContext(D5),Mle=({userId:t,db:e,inventory:r})=>{const{data:n,loading:a}=Jl(e,t,"workOrders"),{data:s,loading:o}=Jl(e,t,"customers"),{data:c,loading:d}=Jl(e,t,"technicians"),{data:h,loading:m}=Jl(e,t,"invoices"),{data:p,loading:y}=Jl(e,t,"quotes"),{data:v,loading:w}=Jl(e,t,"serviceReports"),[k,b]=V.useState("dashboard"),[j,N]=V.useState(null),[E,P]=V.useState(!1),[S,T]=V.useState(null),[A,R]=V.useState(null),[M,D]=V.useState(""),[C,F]=V.useState("All"),L=V.useMemo(()=>{let W=n||[];if(C&&C!=="All"&&(W=W.filter(G=>G["Order Status"]===C)),M.trim()){const G=M.toLowerCase();W=W.filter(X=>{const ee=String(X["Work Order #"]||"").toLowerCase(),re=String(X["Client WO#"]||"").toLowerCase(),z=String(X.Client||"").toLowerCase(),Z=String(X.Company||"").toLowerCase(),J=String(X.Task||"").toLowerCase(),oe=String(X["Loc #"]||"").toLowerCase(),he=String(X.Priority||"").toLowerCase(),ve=String(X["Order Status"]||"").toLowerCase(),fe=String(X.Notes||"").toLowerCase(),ye=Array.isArray(X.technician)?X.technician.some(pe=>String(pe||"").toLowerCase().includes(G)):String(X.technician||"").toLowerCase().includes(G),q=Array.isArray(X.lineItems)?X.lineItems.some(pe=>String(pe.description||"").toLowerCase().includes(G)||String(pe.asset||"").toLowerCase().includes(G)):!1,de=Array.isArray(X.servicedAssets)?X.servicedAssets.some(pe=>String(pe||"").toLowerCase().includes(G)):!1;return ee.includes(G)||re.includes(G)||z.includes(G)||Z.includes(G)||J.includes(G)||oe.includes(G)||he.includes(G)||ve.includes(G)||fe.includes(G)||ye||q||de})}return W},[n,M,C]),Y=V.useMemo(()=>({updateOrder:(W,G)=>Qoe(e,t,W,G),addNote:(W,G,X)=>Yoe(e,t,W,G).then(X),addNewOrder:W=>lD(e,t,W).then(()=>P(!1)),addCustomer:W=>Xoe(e,t,W),updateCustomer:W=>Zoe(e,t,W.id,W),deleteCustomer:W=>tle(e,t,W),addTechnician:async W=>{try{const G={id:`temp_${Date.now()}`,...W,createdBy:t,businessOwnerId:t,status:"pending_auth",createdAt:new Date().toISOString()};return await rle(e,t,G)}catch(G){throw console.error("Error creating technician:",G),G}},updateTechnician:W=>nle(e,t,W.id,W),deleteTechnician:W=>{window.confirm("Are you sure?")&&ale(e,t,W,n)},addInvoice:W=>ile(e,t,W),addQuote:W=>sle(e,t,W),updateInvoice:W=>u1(e,t,W.id,W),updateQuote:W=>hd(e,t,W.id,W),markInvoicePaid:(W,G)=>u1(e,t,W,{status:G?"Paid":"Pending",paidDate:G?new Date().toISOString():null}),approveQuote:W=>hd(e,t,W.id,{...W,status:"Approved",approvedAt:new Date().toISOString()}),rejectQuote:W=>hd(e,t,W.id,{...W,status:"Rejected",rejectedAt:new Date().toISOString()}),convertQuoteToWorkOrder:async W=>{const G={"WO#":`WO-${Date.now()}`,Client:W.customerName,Company:W.customerName,Task:`Work from Quote #${W.id}`,NTE:W.total,"Order Status":"Open","Schedule Date":"",Priority:"Regular",technician:[],quoteId:W.id,lineItems:W.lineItems||[],notes:[`Created from approved quote #${W.id}`]};return await lD(e,t,G),hd(e,t,W.id,{...W,status:"Converted to Work Order",convertedAt:new Date().toISOString()})}}),[e,t,n]),ne={workOrders:n,customers:s,technicians:c,invoices:h,quotes:p,serviceReports:v,inventory:r,filteredOrders:L,loading:a||o||d||m||y||w,currentView:k,setCurrentView:b,selectedOrder:j,setSelectedOrder:N,isAddingOrder:E,setIsAddingOrder:P,editingInvoice:S,setEditingInvoice:T,editingQuote:A,setEditingQuote:R,searchTerm:M,setSearchTerm:D,statusFilter:C,setStatusFilter:F,handlers:Y};return i.jsx(D5.Provider,{value:ne,children:i.jsx(Lle,{})})},Lle=()=>{const{loading:t,currentView:e,setCurrentView:r,selectedOrder:n,isAddingOrder:a,editingInvoice:s,editingQuote:o,setIsAddingOrder:c}=kn(),d=V.useMemo(()=>[{key:"dashboard",label:"Dashboard"},{key:"dispatch",label:"Dispatch Board"},{key:"route",label:"Route Planning"},{key:"customers",label:"Customers"},{key:"technicians",label:"Technicians"},{key:"billing",label:"Billing"},{key:"service-reports",label:"Service Reports"},{key:"leaderboard",label:"Leaderboard"},{key:"margin-calculator",label:"Margin Calculator"}],[]),h=()=>{if(t)return i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})});switch(e){case"dashboard":return i.jsx(dD,{});case"dispatch":return i.jsx(hle,{});case"route":return i.jsx(fle,{});case"customers":return i.jsx(ble,{});case"technicians":return i.jsx(wle,{});case"billing":return i.jsx(Sle,{});case"service-reports":return i.jsx(Ile,{});case"leaderboard":return i.jsx(Cle,{});case"margin-calculator":return i.jsx(Ple,{});default:return i.jsx(dD,{})}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Work Order Management"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Operational tasks module."})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:d.map(m=>i.jsx("button",{onClick:()=>r(m.key),className:`px-3 py-1 text-xs rounded ${e===m.key?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:m.label},m.key))}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Ia,{size:20})," Add Work Order"]})]})]}),h()]}),n&&i.jsx(Dle,{}),a&&i.jsx(Ole,{}),s&&i.jsx(I5,{}),o&&i.jsx(O5,{})]})},$le=({vehicles:t=[],maintenanceLogs:e=[],openModal:r,handleDelete:n,searchTerm:a="",setSearchTerm:s,jobs:o=[]})=>{const[c,d]=V.useState("all"),[h,m]=V.useState("grid"),[p,y]=V.useState("name"),[v,w]=V.useState("asc"),[k,b]=V.useState([]),[j,N]=V.useState(!1),[E,P]=V.useState(null),[S,T]=V.useState(!1),[A,R]=V.useState("vehicles"),M=[{value:"oil_change",label:"Oil Change",interval:3e3,category:"Engine",cost:50},{value:"tire_rotation",label:"Tire Rotation",interval:6e3,category:"Tires",cost:25},{value:"brake_service",label:"Brake Service",interval:12e3,category:"Brakes",cost:300},{value:"transmission",label:"Transmission Service",interval:3e4,category:"Transmission",cost:150},{value:"coolant_flush",label:"Coolant Flush",interval:24e3,category:"Cooling",cost:100},{value:"air_filter",label:"Air Filter",interval:12e3,category:"Engine",cost:30},{value:"spark_plugs",label:"Spark Plugs",interval:3e4,category:"Engine",cost:120},{value:"belts_hoses",label:"Belts & Hoses",interval:24e3,category:"Engine",cost:200},{value:"battery",label:"Battery Service",interval:36e3,category:"Electrical",cost:150},{value:"inspection",label:"Annual Inspection",interval:12e3,category:"Legal",cost:50},{value:"ac_service",label:"A/C Service",interval:12e3,category:"HVAC",cost:180},{value:"general_repair",label:"General Repair",interval:0,category:"Repair",cost:200},{value:"preventive",label:"Preventive Maintenance",interval:6e3,category:"Maintenance",cost:100}];V.useEffect(()=>{console.log("Vehicles updated:",t.length),b([...t])},[t]);const D=({onImport:J})=>{const oe=V.useRef(null),he=ve=>{const fe=ve.target.files[0];fe&&(J(fe),ve.target.value="")};return i.jsxs("div",{className:"inline-block",children:[i.jsx("input",{ref:oe,type:"file",accept:".csv",onChange:he,style:{display:"none"}}),i.jsxs("button",{onClick:()=>oe.current?.click(),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-lg transition-colors",children:[i.jsx(O0,{size:16}),"Import Vehicles"]})]})},C=J=>{if(!J){alert("Please select a file.");return}const oe=new FileReader;oe.onload=he=>{try{const fe=he.target.result.split(`
`).filter(pe=>pe.trim());if(fe.length<2){alert("CSV file must have at least a header row and one data row.");return}const ye=pe=>{const le=[];let je="",Te=!1;for(let Ze=0;Ze<pe.length;Ze++){const et=pe[Ze];et==='"'?Te=!Te:et===","&&!Te?(le.push(je.trim()),je=""):je+=et}return le.push(je.trim()),le},q=ye(fe[0]).map(pe=>pe.replace(/"/g,"").trim().toLowerCase()),de=[];for(let pe=1;pe<fe.length;pe++){const le=ye(fe[pe]),je={};q.forEach((Te,Ze)=>{const et=le[Ze]?le[Ze].replace(/"/g,"").trim():"";Te.includes("name")||Te.includes("vehicle")?je.name=et:Te.includes("make")?je.make=et.toUpperCase():Te.includes("model")?je.model=et:Te.includes("year")?je.year=et:Te.includes("license")||Te.includes("plate")?je.licensePlate=et:Te.includes("vin")?je.vin=et:Te.includes("mileage")||Te.includes("miles")?je.currentMileage=parseInt(et)||0:Te.includes("status")?je.status=et.toLowerCase()||"active":Te.includes("notes")&&(je.notes=et)}),(je.name||je.make&&je.model)&&(je.name=je.name||`${je.make} ${je.model}`,je.status=je.status||"active",de.push(je))}if(de.length===0){alert("No valid vehicle records found in the CSV file.");return}de.forEach(pe=>{r("vehicle",pe)}),alert(`Found ${de.length} vehicles to import. Please review and save each one.`)}catch(ve){console.error("Error parsing CSV:",ve),alert("Error parsing CSV file. Please check the file format.")}},oe.readAsText(J)},F=()=>{if(k.length===0){alert("No vehicles to export.");return}const J=k.map(q=>({"Vehicle Name":q.name||"",Make:q.make||"",Model:q.model||"",Year:q.year||"","License Plate":q.licensePlate||"",VIN:q.vin||"","Current Mileage":q.currentMileage||0,Status:q.status||"active",Notes:q.notes||"","Date Added":q.createdAt?new Date(q.createdAt.seconds*1e3).toLocaleDateString():""})),oe=Object.keys(J[0]),he=[oe.join(","),...J.map(q=>oe.map(de=>{const pe=q[de];return typeof pe=="string"&&(pe.includes(",")||pe.includes('"')||pe.includes(`
`))?`"${pe.replace(/"/g,'""')}"`:pe}).join(","))].join(`
`),ve=new Blob([he],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(ve),ye=document.createElement("a");ye.href=fe,ye.download=`vehicle-fleet-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(fe),console.log(`Exported ${k.length} vehicles to CSV`)},L=()=>{const J=[{"Vehicle Name":"Service Truck 1",Make:"FORD",Model:"F-150",Year:"2020","License Plate":"ABC123",VIN:"1FTFW1ET0LKD12345","Current Mileage":"75000",Status:"active",Notes:"Primary service vehicle"}],oe=Object.keys(J[0]),he=[oe.join(","),...J.map(q=>oe.map(de=>q[de]).join(","))].join(`
`),ve=new Blob([he],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(ve),ye=document.createElement("a");ye.href=fe,ye.download="vehicle-import-template.csv",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(fe)},Y=async(J,oe)=>{if(window.confirm('Delete "'+oe+'"?')){console.log("Starting delete for vehicle:",J,oe),N(!0);try{const he=k.filter(ve=>ve.id!==J);b(he),await n("vehicle",J),console.log("Vehicle deleted successfully")}catch(he){console.error("Delete failed, reverting UI:",he),b([...t]),alert("Failed to delete vehicle: "+he.message)}finally{N(!1)}}},ne=()=>{let J=0;return k.forEach(oe=>{M.forEach(he=>{if(he.interval>0){const ve=e.filter(de=>de.vehicleId===oe.id&&de.serviceType===he.value).sort((de,pe)=>new Date(pe.date)-new Date(de.date))[0],fe=oe.currentMileage||0,ye=ve&&ve.mileage||0;fe-ye>=he.interval&&J++}})}),J},W=V.useMemo(()=>{const J=k.filter(le=>!le.status||le.status==="active"),oe=k.reduce((le,je)=>le+(je.currentMileage||0),0),he=k.length>0?oe/k.length:0,ve=new Date().getFullYear(),fe=k.reduce((le,je)=>le+(ve-parseInt(je.year||ve)),0),ye=k.length>0?fe/k.length:0,q=k.filter(le=>(le.currentMileage||0)>1e5).length,de=e.filter(le=>le.date&&new Date(le.date).getFullYear()===ve).reduce((le,je)=>le+(je.cost||0),0),pe=ne();return{totalVehicles:k.length,activeVehicles:J.length,avgMileage:Math.round(he),avgAge:ye.toFixed(1),highMileageVehicles:q,totalMaintenanceCost:de,overdueMaintenance:pe}},[k,e]),G=J=>{const oe=[],he=J.currentMileage||0;return M.forEach(ve=>{if(ve.interval>0){const fe=e.filter(pe=>pe.vehicleId===J.id&&pe.serviceType===ve.value).sort((pe,le)=>new Date(le.date)-new Date(pe.date))[0],ye=fe&&fe.mileage||0,q=he-ye,de=ve.interval-q;q>=ve.interval?oe.push({type:"overdue",service:ve.label,mileage:Math.abs(de),severity:"high"}):de<=1e3&&de>0&&oe.push({type:"due_soon",service:ve.label,mileage:de,severity:"medium"})}}),oe.sort((ve,fe)=>fe.severity==="high"?1:-1)},X=V.useMemo(()=>{let J=k;return a&&(J=J.filter(he=>he.name?.toLowerCase().includes(a.toLowerCase())||he.make?.toLowerCase().includes(a.toLowerCase())||he.model?.toLowerCase().includes(a.toLowerCase())||he.licensePlate?.toLowerCase().includes(a.toLowerCase())||he.vin?.toLowerCase().includes(a.toLowerCase()))),c!=="all"&&(J=J.filter(he=>(he.status||"active")===c)),[...J].sort((he,ve)=>{let fe,ye;switch(p){case"name":fe=he.name||"",ye=ve.name||"";break;case"mileage":fe=he.currentMileage||0,ye=ve.currentMileage||0;break;case"year":fe=parseInt(he.year||0),ye=parseInt(ve.year||0);break;case"make":fe=he.make||"",ye=ve.make||"";break;default:fe=he.name||"",ye=ve.name||""}return typeof fe=="string"?v==="asc"?fe.localeCompare(ye):ye.localeCompare(fe):v==="asc"?fe-ye:ye-fe})},[k,a,c,p,v]),ee=J=>{const oe=J.status||"active";return oe==="active"?{status:"active",color:"text-green-500",icon:ea,bg:"bg-green-50 border-green-200 dark:bg-green-900/10 dark:border-green-800",label:"Active"}:oe==="maintenance"?{status:"maintenance",color:"text-yellow-500",icon:Dn,bg:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/10 dark:border-yellow-800",label:"In Maintenance"}:{status:"inactive",color:"text-gray-500",icon:fp,bg:"bg-gray-50 border-gray-200 dark:bg-gray-900/10 dark:border-gray-800",label:"Inactive"}},re=({title:J,value:oe,icon:he,color:ve,subtext:fe,onClick:ye})=>i.jsx("div",{className:`bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 transition-all hover:shadow-md ${ye?"cursor-pointer hover:border-blue-300":""}`,onClick:ye,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:J}),i.jsx("p",{className:"text-2xl font-bold "+ve,children:oe}),fe&&i.jsx("p",{className:"text-xs text-slate-400",children:fe})]}),i.jsx(he,{size:24,className:ve})]})}),z=()=>{const[J,oe]=V.useState({vehicleId:E?.id||"",serviceType:"",description:"",cost:"",mileage:"",date:new Date().toISOString().split("T")[0],nextServiceMileage:"",notes:""}),he=M.find(fe=>fe.value===J.serviceType),ve=fe=>{fe.preventDefault();const ye={...J,cost:parseFloat(J.cost)||0,mileage:parseInt(J.mileage)||0,nextServiceMileage:parseInt(J.nextServiceMileage)||0,createdAt:new Date().toISOString()};!ye.nextServiceMileage&&he?.interval&&(ye.nextServiceMileage=ye.mileage+he.interval),r("maintenanceLog",ye),T(!1),oe({vehicleId:"",serviceType:"",description:"",cost:"",mileage:"",date:new Date().toISOString().split("T")[0],nextServiceMileage:"",notes:""})};return V.useEffect(()=>{he&&oe(fe=>({...fe,cost:fe.cost||he.cost.toString(),description:fe.description||he.label}))},[he]),S?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(_a,{className:"text-blue-500",size:24}),"Add Service Record"]}),i.jsx("button",{onClick:()=>T(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx(fp,{size:24})})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle *"}),i.jsxs("select",{value:J.vehicleId,onChange:fe=>oe(ye=>({...ye,vehicleId:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select Vehicle"}),k.map(fe=>i.jsxs("option",{value:fe.id,children:[fe.name||"Unnamed"," - ",fe.make," ",fe.model]},fe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Type *"}),i.jsxs("select",{value:J.serviceType,onChange:fe=>oe(ye=>({...ye,serviceType:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select Service"}),M.map(fe=>i.jsxs("option",{value:fe.value,children:[fe.label," (",fe.category,")"]},fe.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Date *"}),i.jsx("input",{type:"date",value:J.date,onChange:fe=>oe(ye=>({...ye,date:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage"}),i.jsx("input",{type:"number",value:J.mileage,onChange:fe=>oe(ye=>({...ye,mileage:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 45000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost ($)"}),i.jsx("input",{type:"number",step:"0.01",value:J.cost,onChange:fe=>oe(ye=>({...ye,cost:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Mileage"}),i.jsx("input",{type:"number",value:J.nextServiceMileage,onChange:fe=>oe(ye=>({...ye,nextServiceMileage:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:he?`Auto: ${(parseInt(J.mileage)||0)+he.interval}`:"Optional"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),i.jsx("input",{type:"text",value:J.description,onChange:fe=>oe(ye=>({...ye,description:fe.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the service"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:J.notes,onChange:fe=>oe(ye=>({...ye,notes:fe.target.value})),rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Additional notes, parts used, recommendations, etc."})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsx("button",{type:"button",onClick:ve,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Add Service Record"})]})]})]})}):null},Z=()=>{const J=[...e].sort((oe,he)=>new Date(he.date)-new Date(oe.date));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(_a,{className:"text-blue-500",size:24}),"Maintenance History"]}),i.jsxs("button",{onClick:()=>{P(null),T(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Vd,{size:18}),"Add Service"]})]}),J.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Date"}),i.jsx("th",{className:"p-3",children:"Vehicle"}),i.jsx("th",{className:"p-3",children:"Service"}),i.jsx("th",{className:"p-3",children:"Mileage"}),i.jsx("th",{className:"p-3",children:"Cost"}),i.jsx("th",{className:"p-3",children:"Next Due"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:J.map(oe=>{const he=k.find(fe=>fe.id===oe.vehicleId),ve=M.find(fe=>fe.value===oe.serviceType);return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-3",children:oe.date?new Date(oe.date).toLocaleDateString():"N/A"}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:he?.name||"Unknown Vehicle"}),i.jsxs("div",{className:"text-xs text-slate-500",children:[he?.make," ",he?.model]})]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:ve?.label||oe.serviceType}),oe.description&&i.jsx("div",{className:"text-xs text-slate-500",children:oe.description})]})}),i.jsx("td",{className:"p-3 font-mono",children:(oe.mileage||0).toLocaleString()}),i.jsxs("td",{className:"p-3 font-mono",children:["$",(oe.cost||0).toFixed(2)]}),i.jsx("td",{className:"p-3 font-mono",children:oe.nextServiceMileage?oe.nextServiceMileage.toLocaleString():"N/A"}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>r("maintenanceLog",oe),className:"p-1 text-slate-500 hover:text-blue-600 transition-colors",title:"Edit Service",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>n("maintenanceLog",oe.id),className:"p-1 text-slate-500 hover:text-red-600 transition-colors",title:"Delete Service",children:i.jsx(rr,{size:16})})]})})]},oe.id)})})]})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_a,{size:48,className:"text-slate-300 dark:text-slate-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-500 dark:text-slate-400 mb-2",children:"No maintenance records yet"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mb-4",children:"Start tracking your vehicle maintenance and services"}),i.jsx("button",{onClick:()=>T(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Service"})]})]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(C0,{className:"text-blue-500",size:24}),"Fleet Overview"]}),k.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(D,{onImport:C}),i.jsxs("button",{onClick:F,className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg transition-colors",children:[i.jsx(Fd,{size:16}),"Export Vehicles"]}),i.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-sm bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded-lg transition-colors",children:[i.jsx(Ui,{size:16}),"CSV Template"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[i.jsx(re,{title:"Total Vehicles",value:W.totalVehicles,icon:km,color:"text-blue-500"}),i.jsx(re,{title:"Active Fleet",value:W.activeVehicles,icon:ea,color:"text-green-500",subtext:(W.activeVehicles/(W.totalVehicles||1)*100).toFixed(0)+"% active"}),i.jsx(re,{title:"Avg Mileage",value:W.avgMileage.toLocaleString(),icon:Os,color:"text-purple-500",subtext:"miles per vehicle"}),i.jsx(re,{title:"Fleet Age",value:W.avgAge+" yrs",icon:$d,color:"text-orange-500",subtext:"average age"}),i.jsx(re,{title:"High Mileage",value:W.highMileageVehicles,icon:Ca,color:"text-amber-500",subtext:">100k miles"}),i.jsx(re,{title:"Maintenance Cost",value:"$"+W.totalMaintenanceCost.toLocaleString(),icon:Er,color:"text-emerald-500",subtext:"this year"}),i.jsx(re,{title:"Overdue Services",value:W.overdueMaintenance,icon:I0,color:W.overdueMaintenance>0?"text-red-500":"text-green-500",subtext:"need attention",onClick:()=>R("maintenance")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"flex",children:[i.jsx("button",{onClick:()=>R("vehicles"),className:`px-6 py-4 text-sm font-medium transition-colors ${A==="vehicles"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/10":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(km,{size:18}),"Vehicles (",k.length,")"]})}),i.jsx("button",{onClick:()=>R("maintenance"),className:`px-6 py-4 text-sm font-medium transition-colors ${A==="maintenance"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/10":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_a,{size:18}),"Maintenance (",e.length,")",W.overdueMaintenance>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:W.overdueMaintenance})]})})]})}),i.jsx("div",{className:"p-6",children:A==="vehicles"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Vehicle Fleet Management"}),i.jsxs("div",{className:"flex items-center gap-2",children:[k.length>0&&i.jsxs("button",{onClick:()=>m(h==="grid"?"table":"grid"),className:"flex items-center gap-2 text-sm bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 px-3 py-2 rounded-lg transition-colors",children:[h==="grid"?i.jsx(Ui,{size:16}):i.jsx(km,{size:16}),h==="grid"?"Table View":"Grid View"]}),i.jsxs("button",{onClick:()=>r("vehicle"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Vd,{size:18}),"Add Vehicle"]})]})]}),k.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search by name, make, model, license plate, or VIN...",value:a,onChange:J=>s(J.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uh,{size:18,className:"text-slate-400"}),i.jsxs("select",{value:c,onChange:J=>d(J.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"maintenance",children:"In Maintenance"}),i.jsx("option",{value:"retired",children:"Retired"})]}),i.jsxs("select",{value:p,onChange:J=>y(J.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"name",children:"Sort by Name"}),i.jsx("option",{value:"mileage",children:"Sort by Mileage"}),i.jsx("option",{value:"year",children:"Sort by Year"}),i.jsx("option",{value:"make",children:"Sort by Make"})]}),i.jsx("button",{onClick:()=>w(v==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors",title:"Sort "+(v==="asc"?"Descending":"Ascending"),children:i.jsx(Ca,{size:18,className:v==="desc"?"rotate-180":""})})]})]}),k.length>0?h==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(J=>{const oe=ee(J),he=G(J);return i.jsxs("div",{className:"p-5 rounded-lg border-2 transition-all hover:shadow-lg group "+oe.bg+(j?" opacity-50":""),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(oe.icon,{size:24,className:oe.color}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:J.name||"Unnamed Vehicle"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:oe.label})]})]}),i.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>{P(J),T(!0)},className:"p-2 text-slate-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Add Service",disabled:j,children:i.jsx(_a,{size:16})}),i.jsx("button",{onClick:()=>r("vehicle",J),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit Vehicle",disabled:j,children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>Y(J.id,J.name||"Unnamed Vehicle"),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete Vehicle",disabled:j,children:i.jsx(rr,{size:16})})]})]}),he.length>0&&i.jsxs("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(qk,{size:16,className:"text-amber-600"}),i.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Maintenance Alerts"})]}),i.jsxs("div",{className:"space-y-1",children:[he.slice(0,2).map((ve,fe)=>i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:ve.type==="overdue"?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300",children:[ve.service,": ",ve.type==="overdue"?`${ve.mileage} miles overdue`:`due in ${ve.mileage} miles`]})},fe)),he.length>2&&i.jsxs("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:["+",he.length-2," more alerts"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Make/Model"}),i.jsxs("span",{className:"font-medium",children:[J.make||"N/A"," ",J.model||"N/A"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Year"}),i.jsx("span",{className:"font-medium",children:J.year||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"License"}),i.jsx("span",{className:"font-medium",children:J.licensePlate||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Mileage"}),i.jsxs("span",{className:"font-medium",children:[(J.currentMileage||0).toLocaleString()," mi"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"VIN"}),i.jsx("span",{className:"font-medium text-xs",children:J.vin||"N/A"})]})]})]},J.id)})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3",children:"Vehicle"}),i.jsx("th",{className:"p-3",children:"Make/Model"}),i.jsx("th",{className:"p-3",children:"Year"}),i.jsx("th",{className:"p-3",children:"License"}),i.jsx("th",{className:"p-3",children:"Mileage"}),i.jsx("th",{className:"p-3",children:"Alerts"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:X.map(J=>{const oe=ee(J),he=G(J);return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50"+(j?" opacity-50":""),children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oe.icon,{size:16,className:oe.color}),i.jsx("span",{className:"text-xs",children:oe.label})]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:J.name||"Unnamed"}),J.vin&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["VIN: ",J.vin.slice(-6)]})]})}),i.jsxs("td",{className:"p-3",children:[J.make||"N/A"," ",J.model||"N/A"]}),i.jsx("td",{className:"p-3",children:J.year||"N/A"}),i.jsx("td",{className:"p-3",children:J.licensePlate||"N/A"}),i.jsx("td",{className:"p-3 font-mono",children:(J.currentMileage||0).toLocaleString()}),i.jsx("td",{className:"p-3",children:he.length>0?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qk,{size:14,className:"text-amber-500"}),i.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:[he.length," alert",he.length>1?"s":""]})]}):i.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Up to date"})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>{P(J),T(!0)},className:"p-1 text-slate-500 hover:text-green-600 transition-colors",title:"Add Service",disabled:j,children:i.jsx(_a,{size:16})}),i.jsx("button",{onClick:()=>r("vehicle",J),className:"p-1 text-slate-500 hover:text-blue-600 transition-colors",title:"Edit Vehicle",disabled:j,children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>Y(J.id,J.name||"Unnamed Vehicle"),className:"p-1 text-slate-500 hover:text-red-600 transition-colors",title:"Delete Vehicle",disabled:j,children:i.jsx(rr,{size:16})})]})})]},J.id)})})]})}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 dark:bg-slate-700 rounded-full mb-6",children:i.jsx(km,{size:40,className:"text-slate-400 dark:text-slate-500"})}),i.jsx("h3",{className:"text-xl font-medium text-slate-500 dark:text-slate-400 mb-3",children:"No vehicles in your fleet yet"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mb-6 max-w-md mx-auto",children:"Start building your fleet by adding your first vehicle. Track maintenance, costs, and manage your entire fleet from one place."}),i.jsx("button",{onClick:()=>r("vehicle"),className:"bg-blue-600 hover:bg-blue-500 text-white px-8 py-3 rounded-lg transition-colors font-medium text-lg",disabled:j,children:"Add Your First Vehicle"})]})]}):i.jsx(Z,{})})]}),i.jsx(z,{}),j&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Deleting vehicle..."})]})})]})},Fle=()=>{const[t,e]=V.useState({netProfit:"",ownerSalary:"",ownerPerks:"",depreciation:"",amortization:"",interestExpense:""}),[r,n]=V.useState({recurringRevenue:0,ownerInvolvement:0,customerBase:0,profitabilityTrend:0,technicianTeam:0,brandMarketing:0}),[a,s]=V.useState(0),[o,c]=V.useState(2.75),[d,h]=V.useState(0);V.useEffect(()=>{const N=Object.values(t).map(E=>parseFloat(E)||0).reduce((E,P)=>E+P,0);s(N)},[t]),V.useEffect(()=>{const N=Object.values(r).reduce((E,P)=>E+P,0)/6;N<=.5?c(2+N*1.5):N<=1.5?c(2.75+(N-.5)*.75):c(3.5+(N-1.5)*2)},[r]),V.useEffect(()=>{h(a*o)},[a,o]);const m=(j,N)=>{e(E=>({...E,[j]:N}))},p=(j,N)=>{n(E=>({...E,[j]:N}))},y=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=()=>o<2.75?"Conservative Range":o<3.5?"Average Range":"Premium Range",w=()=>o<2.75?"text-red-600 dark:text-red-400":o<3.5?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",k=()=>{const N=[["HVAC Business Valuation Calculator"],[""],["Financial Information"],["Pre-Tax Net Profit",y(parseFloat(t.netProfit)||0)],["Owner Salary",y(parseFloat(t.ownerSalary)||0)],["Owner Perks",y(parseFloat(t.ownerPerks)||0)],["Depreciation",y(parseFloat(t.depreciation)||0)],["Amortization",y(parseFloat(t.amortization)||0)],["Interest Expense",y(parseFloat(t.interestExpense)||0)],["Seller Discretionary Earnings (SDE)",y(a)],[""],["Valuation Results"],["SDE",y(a)],["Multiple",o.toFixed(2)+"x"],["Estimated Business Value",y(d)]].map(T=>T.join(",")).join(`
`),E=new Blob([N],{type:"text/csv"}),P=window.URL.createObjectURL(E),S=document.createElement("a");S.href=P,S.download="hvac-business-valuation.csv",S.click(),window.URL.revokeObjectURL(P)},b=[{field:"recurringRevenue",title:"Recurring Revenue",icon:i.jsx(Ca,{className:"w-5 h-5"}),options:["< 15% of revenue from service contracts","15% - 30% from service contracts","> 30% from stable service contracts"]},{field:"ownerInvolvement",title:"Owner Involvement",icon:i.jsx(Mo,{className:"w-5 h-5"}),options:["Business relies entirely on you","You are key, but have manager/lead tech","Business runs on systems, with or without you"]},{field:"customerBase",title:"Customer Base",icon:i.jsx(fc,{className:"w-5 h-5"}),options:["Top 5 customers > 30% of revenue","Some customer concentration exists","No single customer > 5% of revenue"]},{field:"profitabilityTrend",title:"Profitability Trend",icon:i.jsx(Er,{className:"w-5 h-5"}),options:["Profits flat, declining, or unpredictable","Profits stable and consistent","Clear year-over-year profit growth"]},{field:"technicianTeam",title:"Technician Team",icon:i.jsx(Mo,{className:"w-5 h-5"}),options:["High turnover; hard to find help","Stable team, normal turnover","Experienced, loyal techs, low turnover"]},{field:"brandMarketing",title:"Brand & Marketing",icon:i.jsx(fz,{className:"w-5 h-5"}),options:["Little online presence; word-of-mouth only","Basic website and some reviews","Strong brand, great reviews, active marketing"]}];return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"bg-blue-600 text-white p-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(mc,{className:"w-8 h-8"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"HVAC Business Valuation Calculator"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Calculate your Seller's Discretionary Earnings (SDE) and estimate your business value"})]})]})}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 p-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-white",children:"Financial Information"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Enter your typical annual figures to calculate your SDE:"}),i.jsx("div",{className:"space-y-4",children:[{key:"netProfit",label:"Pre-Tax Net Profit",desc:"From your income statement"},{key:"ownerSalary",label:"+ Owner's Salary",desc:"Your total salary and distributions"},{key:"ownerPerks",label:"+ Owner's Perks",desc:"Health insurance, vehicle costs, etc."},{key:"depreciation",label:"+ Depreciation",desc:"From income statement or tax return"},{key:"amortization",label:"+ Amortization",desc:"From your income statement"},{key:"interestExpense",label:"+ Interest Expense",desc:"Total interest on business debt"}].map(({key:j,label:N,desc:E})=>i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:N}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:E})]}),i.jsx("div",{className:"w-32",children:i.jsx("input",{type:"number",value:t[j],onChange:P=>m(j,P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})]},j))}),i.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Seller's Discretionary Earnings (SDE)"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Your total earnings figure"})]}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(a)})]})})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border-2 border-green-200 dark:border-green-800",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800 dark:text-green-200",children:"Final Valuation"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Your SDE:"}),i.jsx("span",{className:"font-semibold",children:y(a)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"x Valuation Multiple:"}),i.jsxs("span",{className:`font-semibold ${w()}`,children:[o.toFixed(2),"x (",v(),")"]})]}),i.jsx("div",{className:"border-t pt-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Estimated Business Value:"}),i.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:y(d)})]})})]}),i.jsxs("button",{onClick:k,className:"mt-4 w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[i.jsx(Fd,{className:"w-4 h-4"}),"Export Results to CSV"]})]})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-white",children:"Valuation Multiple Scorecard"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Rate each factor to determine your valuation multiple:"}),i.jsx("div",{className:"space-y-6",children:b.map(({field:j,title:N,icon:E,options:P})=>i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[E,i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white",children:N})]}),i.jsx("div",{className:"space-y-2",children:P.map((S,T)=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[i.jsx("input",{type:"radio",name:j,value:T,checked:r[j]===T,onChange:A=>p(j,parseInt(A.target.value)),className:"w-4 h-4 text-blue-600 border-slate-300 dark:border-slate-600 focus:ring-blue-500"}),i.jsx("span",{className:`text-sm group-hover:text-blue-600 dark:group-hover:text-blue-400 ${T===0?"text-red-600 dark:text-red-400":T===1?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:S})]},T))})]},j))}),i.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"How to Interpret Your Multiple:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Conservative (2.0x - 2.75x):"})," Higher risk factors present"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Average (2.75x - 3.5x):"})," Mixed risk profile"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Premium (3.5x - 4.5x+):"})," Lower risk, strong fundamentals"]})]})]})]})})]})})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-6 border-t",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Example Calculation:"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"An HVAC business with $200,000 SDE, solid service contracts, stable team, and growing profits might earn a 3.5x multiple: $200,000  3.5 = $700,000 estimated value."})]}),i.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Disclaimer:"})," This calculator provides estimates for informational purposes only. Actual business valuations may vary significantly based on market conditions, buyer preferences, and other factors not captured in this tool. Consult with a business broker or valuation professional for a comprehensive analysis."]})})]})]})},Vle=({inventory:t,openModal:e,handleDelete:r,handleBulkDelete:n,searchTerm:a,setSearchTerm:s,selectedIds:o,setSelectedIds:c,handleImportCSV:d,handleExportCSV:h})=>{const m=[{key:"name",header:"Item Name",render:v=>i.jsx("span",{className:"font-medium",children:v.name})},{key:"quantity",header:"Quantity on Hand",className:"text-center",render:v=>i.jsx("span",{children:v.quantity})},{key:"cost",header:"Cost per Item",className:"text-right",render:v=>i.jsxs("span",{className:"font-mono",children:["$",(v.cost||0).toFixed(2)]})}],p=V.useMemo(()=>t.filter(v=>(v.name||"").toLowerCase().includes(a.toLowerCase())),[t,a]),y=v=>{v.target.checked?c(p.map(w=>w.id)):c([])};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Inventory Management"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",placeholder:"Search Inventory...",value:a,onChange:v=>s(v.target.value),className:"w-full md:w-auto bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-sm text-slate-800 dark:text-white"}),o.length>0&&i.jsxs("button",{onClick:()=>n("inventory",o),className:"flex items-center gap-2 text-sm bg-red-600 hover:bg-red-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(rr,{size:16})," Delete (",o.length,")"]}),i.jsx("input",{type:"file",id:"csv-importer-inventory",className:"hidden",accept:".csv",onChange:v=>d(v.target.files[0],"inventory")}),i.jsxs("label",{htmlFor:"csv-importer-inventory",className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors cursor-pointer",children:[i.jsx(O0,{size:16})," Import CSV"]}),i.jsxs("button",{onClick:()=>h(t,"inventory"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ui,{size:16})," Export to CSV"]}),i.jsxs("button",{onClick:()=>e("inventory"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ia,{size:16})," Add New"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:i.jsx("input",{type:"checkbox",onChange:y})}),m.map(v=>i.jsx("th",{className:`p-3 ${v.className||""}`,children:v.header},v.key)),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:p.map(v=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 text-slate-700 dark:text-slate-200",children:[i.jsx("td",{className:"p-3",children:i.jsx("input",{type:"checkbox",checked:o.includes(v.id),onChange:()=>{c(w=>w.includes(v.id)?w.filter(k=>k!==v.id):[...w,v.id])}})}),m.map(w=>i.jsx("td",{className:`p-3 ${w.className||""}`,children:w.render(v)},w.key)),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("button",{onClick:()=>e("inventory",v),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 mr-2",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>r("inventory",v.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500",children:i.jsx(rr,{size:16})})]})]},v.id))})]})})]})},Ule=({bills:t,paidStatus:e,onClose:r})=>{const n=V.useMemo(()=>{const a=new Date,s=new Date;return s.setDate(a.getDate()+3),t.filter(o=>{if(e[o.id])return!1;const c=new Date(a.getFullYear(),a.getMonth(),o.dueDay);return c>=a&&c<=s})},[t,e]);return n.length===0?null:i.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900/50 border border-yellow-400 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(qk,{size:20,className:"mr-3"}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-bold",children:"Upcoming Bills!"}),i.jsx("ul",{className:"list-disc list-inside mt-1",children:n.map(a=>i.jsxs("li",{children:[a.name," is due on day ",a.dueDay,"."]},a.id))})]})]}),i.jsx("button",{onClick:r,className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:i.jsx(Pa,{size:18})})]})},Ble=({data:t,onSliceClick:e})=>{const[r,n]=V.useState(0),a=V.useCallback((o,c)=>{n(c)},[n]),s=o=>{const{cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:y,fill:v,payload:w}=o;return i.jsxs("g",{className:"cursor-pointer",onClick:()=>e(w.name),children:[i.jsx("text",{x:c,y:d,dy:8,textAnchor:"middle",fill:v,className:"font-bold text-lg",children:w.name}),i.jsx(cN,{cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:y,fill:v})]})};return i.jsx(l6,{width:"100%",height:300,children:i.jsxs(Foe,{children:[i.jsx(wa,{contentStyle:{backgroundColor:"#334155",border:"1px solid #475569",borderRadius:"0.5rem"},labelStyle:{color:"#cbd5e1"},itemStyle:{color:"#f1f5f9"},formatter:o=>`$${o.toFixed(2)}`}),i.jsx(Qi,{activeIndex:r,activeShape:s,data:t,cx:"50%",cy:"50%",innerRadius:70,outerRadius:90,fill:"#8884d8",dataKey:"value",onMouseEnter:a,onClick:o=>e(o.name),children:t.map((o,c)=>i.jsx(G0,{fill:o.color},`cell-${c}`))})]})})},qle=({invoices:t=[],bills:e=[],weeklyCosts:r=[],currentBankBalance:n=0,setCurrentBankBalance:a})=>{const s=v=>{if(v==null||v==="")return 0;const w=typeof v=="string"?parseFloat(v.replace(/[^0-9.-]/g,"")):Number(v);return isNaN(w)?0:w},o=t.filter(v=>v.status==="Unpaid"),c=o.reduce((v,w)=>v+s(w.grandTotal),0),d=e.reduce((v,w)=>v+s(w.amount),0),h=r.reduce((v,w)=>v+s(w.amount),0)*4.33,m=d+h,p=s(n)+c-m,y=()=>{const v=prompt("Enter current bank balance:",n);if(v!==null&&!isNaN(v)&&v.trim()!==""){const w=parseFloat(v);w>=0?a(w):alert("Please enter a positive number for the balance.")}};return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Cash Flow Forecast"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Current Balance"}),i.jsxs("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",s(n).toLocaleString()]})]}),i.jsx(Er,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsx("button",{onClick:y,className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline cursor-pointer",children:"Update Balance"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Click to update your current bank balance"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Pending Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["$",c.toLocaleString()]})]}),i.jsx(Ca,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:[o.length," unpaid invoices"]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"Monthly Expenses"}),i.jsxs("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:["$",m.toLocaleString()]})]}),i.jsx(s3,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Bills + Weekly costs"})]}),i.jsxs("div",{className:`${p>=0?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"} p-4 rounded-lg`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-sm font-medium ${p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"Projected Balance"}),i.jsxs("p",{className:`text-2xl font-bold ${p>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:["$",p.toLocaleString()]})]}),p>=0?i.jsx(Ca,{className:"text-green-600 dark:text-green-400",size:24}):i.jsx(Dn,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsx("p",{className:`text-xs mt-1 ${p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"After collections & expenses"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Pending Collections"}),i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.length>0?o.map((v,w)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:v.billTo||v.customer||"Unknown Client"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Due: ",v.dueDate||"No date"]})]}),i.jsxs("p",{className:"font-bold text-green-600 dark:text-green-400",children:["$",s(v.grandTotal).toLocaleString()]})]},w)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No pending invoices"})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Monthly Obligations"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monthly Bills"}),i.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",d.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Weekly Costs (Monthly)"}),i.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",h.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-100 dark:bg-slate-600 rounded-lg border-t-2 border-slate-300 dark:border-slate-500",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-white",children:"Total Expenses"}),i.jsxs("span",{className:"font-bold text-red-700 dark:text-red-300 text-lg",children:["$",m.toLocaleString()]})]})]})]})]}),p<0&&i.jsxs("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"text-red-600 dark:text-red-400",size:20}),i.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200",children:"Cash Flow Alert"})]}),i.jsx("p",{className:"text-red-700 dark:text-red-300 mt-2",children:"Your projected balance is negative. Consider following up on pending invoices or reducing expenses."})]}),s(n)===0&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Er,{className:"text-blue-600 dark:text-blue-400",size:20}),i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Update Your Balance"})]}),i.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:'Click "Update Balance" above to enter your current bank balance for accurate cash flow forecasting.'})]})]})})},zle=({workOrders:t,bills:e,weeklyCosts:r,reportingPeriod:n,dateRange:a})=>{if(!t||!e||!r)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Profit & Loss Statement"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading data..."})]});const s=V.useMemo(()=>{const c=(t||[]).filter(N=>{if(N["Order Status"]!=="Completed"||!N["Completed Date"])return!1;const E=new Date(_N(N["Completed Date"]));return E>=a.start&&E<=a.end}),d=c.reduce((N,E)=>N+(E.NTE||0),0),h=c.reduce((N,E)=>{if(E.lineItems&&Array.isArray(E.lineItems)){const P=E.lineItems.reduce((S,T)=>S+(T.amount||0),0);return N+P}return N+(E.materialCost||0)+(E.laborCost||0)},0),m=d-h,p=(a.end-a.start)/(1e3*60*60*24*30.44),y=(e||[]).reduce((N,E)=>{const P=E.category||"Uncategorized";return N[P]=(N[P]||0)+E.amount,N},{}),v=(r||[]).reduce((N,E)=>N+E.amount,0)*p;v>0&&(y["Weekly & Misc"]=(y["Weekly & Misc"]||0)+v);const w=Object.values(y).reduce((N,E)=>N+E,0),k=m-w,b=d>0?m/d*100:0,j=d>0?k/d*100:0;return{revenue:d,cogs:h,grossProfit:m,operatingExpenses:w,expensesByCategory:y,netProfit:k,grossProfitMargin:b,netProfitMargin:j}},[t,e,r,a]),o=()=>{const c={month:"long",year:"numeric"};if(n==="monthly")return`For the Month of ${a.start.toLocaleString("default",c)}`;if(n==="quarterly"){const d={month:"long",day:"numeric",year:"numeric"};return`For the Quarter Ending ${a.end.toLocaleDateString("default",d)}`}return n==="yearly"?`For the Year ${a.start.getFullYear()}`:""};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Profit & Loss Statement"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:o()}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 font-semibold",children:[i.jsx("span",{children:"Total Revenue"}),i.jsx("span",{className:"font-mono",children:Ye(s.revenue)})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 pl-8",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cost of Goods Sold (COGS)"}),i.jsxs("span",{className:"font-mono",children:["(",Ye(s.cogs),")"]})]}),i.jsx("hr",{className:"border-slate-200 dark:border-slate-700 my-2"}),i.jsxs("div",{className:"flex justify-between items-center p-3 font-bold text-lg",children:[i.jsx("span",{children:"Gross Profit"}),i.jsx("span",{className:"font-mono",children:Ye(s.grossProfit)})]}),i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8 text-xs text-slate-500",children:[i.jsx("span",{children:"Gross Profit Margin"}),i.jsxs("span",{className:"font-mono",children:[s.grossProfitMargin.toFixed(1),"%"]})]}),i.jsx("hr",{className:"border-slate-200 dark:border-slate-700 my-2"}),i.jsx("div",{className:"p-3 font-semibold",children:i.jsx("span",{children:"Operating Expenses"})}),Object.entries(s.expensesByCategory).map(([c,d])=>i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:c}),i.jsxs("span",{className:"font-mono",children:["(",Ye(d),")"]})]},c)),i.jsxs("div",{className:"flex justify-between items-center p-3 pl-8 font-semibold",children:[i.jsx("span",{children:"Total Operating Expenses"}),i.jsxs("span",{className:"font-mono",children:["(",Ye(s.operatingExpenses),")"]})]}),i.jsx("hr",{className:"border-slate-300 dark:border-slate-600 my-2 border-2"}),i.jsxs("div",{className:"flex justify-between items-center p-3 font-bold text-xl",style:{color:s.netProfit>=0?"#22c55e":"#ef4444"},children:[i.jsx("span",{children:"Net Profit"}),i.jsx("span",{className:"font-mono",children:Ye(s.netProfit)})]}),i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8 text-xs text-slate-500",children:[i.jsx("span",{children:"Net Profit Margin"}),i.jsxs("span",{className:"font-mono",children:[s.netProfitMargin.toFixed(1),"%"]})]})]})]})},Wle=({debts:t=[],openModal:e,handleDelete:r,searchTerm:n,setSearchTerm:a,handleImportCSV:s,handleExportCSV:o,debtPayoffStrategies:c={avalanche:[],snowball:[]}})=>{const[d,h]=V.useState("overview"),[m,p]=V.useState("avalanche"),[y,v]=V.useState(500),w=V.useMemo(()=>{const S=t.reduce((C,F)=>C+(F.totalAmount||0),0),T=t.reduce((C,F)=>C+(F.paidAmount||0),0),A=S-T,R=t.length>0?t.reduce((C,F)=>C+(F.interestRate||0),0)/t.length:0,M=Math.max(...t.map(C=>C.interestRate||0)),D=Math.min(...t.map(C=>(C.totalAmount||0)-(C.paidAmount||0)));return{totalDebt:S,totalPaid:T,totalRemaining:A,avgInterestRate:R,highestInterest:M,lowestBalance:D===1/0?0:D,payoffProgress:S>0?T/S*100:0}},[t]),k=S=>{const T=c[S]||[];let A=[],R=0,M=y;return T.forEach((D,C)=>{const F=(D.totalAmount||0)-(D.paidAmount||0),L=(D.interestRate||0)/100/12;if(F>0&&M>0){const Y=Math.ceil(Math.log(1+F*L/M)/Math.log(1+L));A.push({...D,monthsToPayoff:isFinite(Y)?Y:0,order:C+1,remaining:F}),R=Math.max(R,Y)}}),{timeline:A,totalMonthsToPayoff:R}},b=k("avalanche"),j=k("snowball"),N=V.useMemo(()=>n?t.filter(S=>S.name?.toLowerCase().includes(n.toLowerCase())||S.creditor?.toLowerCase().includes(n.toLowerCase())):t,[t,n]),E=S=>(S.totalAmount||0)-(S.paidAmount||0)<=0?"text-green-600 dark:text-green-400":S.interestRate>20?"text-red-600 dark:text-red-400":S.interestRate>10?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400",P=S=>S.interestRate>20?i.jsx(Dn,{className:"text-red-500",size:16}):S.interestRate>10?i.jsx(Ca,{className:"text-yellow-500",size:16}):i.jsx(ea,{className:"text-green-500",size:16});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Debt Management"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Track debts, plan payoffs, and achieve financial freedom"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>s&&s(),className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(O0,{size:16}),"Import"]}),i.jsxs("button",{onClick:()=>o&&o(t,"debts"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Fd,{size:16}),"Export"]}),i.jsxs("button",{onClick:()=>e("debt"),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Ia,{size:18}),"Add Debt"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Total Debt"}),i.jsxs("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",w.totalDebt.toLocaleString()]})]}),i.jsx(fx,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Remaining: $",w.totalRemaining.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Paid Off"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",w.totalPaid.toLocaleString()]})]}),i.jsx(ea,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[w.payoffProgress.toFixed(1),"% complete"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Avg Interest"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[w.avgInterestRate.toFixed(1),"%"]})]}),i.jsx(hz,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Highest: ",w.highestInterest,"%"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Active Debts"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.filter(S=>S.totalAmount-S.paidAmount>0).length})]}),i.jsx(C0,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["of ",t.length," total"]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-1 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsxs("button",{onClick:()=>h("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="overview"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(fx,{size:16}),"Overview"]}),i.jsxs("button",{onClick:()=>h("strategies"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="strategies"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(mp,{size:16}),"Payoff Strategies"]}),i.jsxs("button",{onClick:()=>h("calculator"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="calculator"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(mc,{size:16}),"Calculator"]})]})}),d==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search debts...",value:n,onChange:S=>a(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:N.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(fx,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No debts found"}),i.jsx("p",{className:"mb-4",children:"Add your debts to start tracking and planning payoffs."}),i.jsx("button",{onClick:()=>e("debt"),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Debt"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Debt Details"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Interest Rate"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Total Amount"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Paid"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Remaining"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Progress"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:N.map(S=>{const T=(S.totalAmount||0)-(S.paidAmount||0),A=S.totalAmount>0?(S.paidAmount||0)/S.totalAmount*100:0;return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[P(S),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:S.name}),S.creditor&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:S.creditor})]})]})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("span",{className:`font-mono font-semibold ${E(S)}`,children:[(S.interestRate||0).toFixed(1),"%"]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono text-slate-900 dark:text-white",children:["$",(S.totalAmount||0).toLocaleString()]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",(S.paidAmount||0).toLocaleString()]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono font-semibold text-orange-600 dark:text-orange-400",children:["$",T.toLocaleString()]})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(A,100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1 text-slate-500 dark:text-slate-400",children:[A.toFixed(1),"%"]})]}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>e("debt",S),className:"text-slate-400 hover:text-blue-500 transition-colors",title:"Edit debt",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>r("debt",S.id),className:"text-slate-400 hover:text-red-500 transition-colors",title:"Delete debt",children:i.jsx(rr,{size:16})})]})})]},S.id)})})]})})})]}),d==="strategies"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Debt Payoff Strategies"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${m==="avalanche"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,onClick:()=>p("avalanche"),children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(s3,{className:"text-purple-600",size:20}),i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:"Debt Avalanche"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Pay off debts with highest interest rates first. Saves more money on interest."}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Estimated timeline: ",b.totalMonthsToPayoff," months"]})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${m==="snowball"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,onClick:()=>p("snowball"),children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(vz,{className:"text-purple-600",size:20}),i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:"Debt Snowball"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Pay off smallest balances first. Builds momentum and motivation."}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Estimated timeline: ",j.totalMonthsToPayoff," months"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monthly Debt Payment Budget"}),i.jsxs("div",{className:"relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:y,onChange:S=>v(parseFloat(S.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"500"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:[m==="avalanche"?"Avalanche":"Snowball"," Payoff Plan"]}),i.jsx("div",{className:"space-y-4",children:(m==="avalanche"?b.timeline:j.timeline).map((S,T)=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:S.order}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:S.name}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["$",S.remaining.toLocaleString()," remaining at ",S.interestRate,"%"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[S.monthsToPayoff," months"]}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"to pay off"})]})]},S.id))})]})]}),d==="calculator"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Debt Payoff Calculator"}),i.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-400 py-12",children:[i.jsx(mc,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Advanced debt calculator coming soon!"}),i.jsx("p",{className:"text-sm mt-2",children:"Calculate exact payoff dates, interest savings, and payment schedules."})]})]})]})},Hle=({incomes:t,openModal:e,handleDelete:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState("all"),[c,d]=V.useState("all"),[h,m]=V.useState({key:"amount",direction:"desc"}),p=["all","monthly","weekly","quarterly","annually","one-time","project-based"],y=["all","active","pending","completed","paused"],v=V.useMemo(()=>t.filter(S=>{const T=S.name.toLowerCase().includes(n.toLowerCase())||S.notes&&S.notes.toLowerCase().includes(n.toLowerCase()),A=s==="all"||S.type===s,R=c==="all"||S.status===c;return T&&A&&R}).sort((S,T)=>{if(h.key==="amount"){const A=parseFloat(S.amount)||0,R=parseFloat(T.amount)||0;return h.direction==="asc"?A-R:R-A}return h.key==="name"?h.direction==="asc"?S.name.localeCompare(T.name):T.name.localeCompare(S.name):0}),[t,n,s,c,h]),w=V.useMemo(()=>{const P=t.filter(C=>C.status!=="completed"&&C.status!=="paused"),T=P.map(C=>{const F=parseFloat(C.amount)||0;switch(C.type){case"weekly":return F*4.33;case"quarterly":return F/3;case"annually":return F/12;case"monthly":default:return F}}).reduce((C,F)=>C+F,0),A=T*12,R=t.reduce((C,F)=>{const L=F.type||"monthly",Y=parseFloat(F.amount)||0;return C[L]=(C[L]||0)+Y,C},{}),M=t.reduce((C,F)=>{const L=F.status||"active";return C[L]=(C[L]||0)+1,C},{}),D=t.reduce((C,F)=>{const L=parseFloat(F.amount)||0;return L>C.amount?{name:F.name,amount:L}:C},{name:"None",amount:0});return{totalMonthlyIncome:T,totalAnnualIncome:A,typeBreakdown:R,statusBreakdown:M,highestIncome:D,activeCount:P.length,totalCount:t.length,averageIncome:P.length>0?T/P.length:0}},[t]),k=P=>{m(S=>({key:P,direction:S.key===P&&S.direction==="desc"?"asc":"desc"}))},b=P=>{switch(P){case"active":return i.jsx(ea,{size:14,className:"text-green-500"});case"pending":return i.jsx($d,{size:14,className:"text-yellow-500"});case"completed":return i.jsx(ea,{size:14,className:"text-blue-500"});case"paused":return i.jsx(Dn,{size:14,className:"text-red-500"});default:return i.jsx(ea,{size:14,className:"text-green-500"})}},j=P=>{const S={monthly:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",weekly:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",quarterly:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",annually:"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200","one-time":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200","project-based":"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-800 dark:text-cyan-200"};return S[P]||S.monthly},N=(P,S)=>{const T=parseFloat(P)||0;switch(S){case"weekly":return T*4.33;case"quarterly":return T/3;case"annually":return T/12;case"monthly":default:return T}},E=()=>{if(t.length===0){alert("No income sources to export.");return}try{const P=["Source Name","Amount","Type","Monthly Equivalent","Annual Equivalent","Status","Recurring","Notes"],S=t.map(D=>[D.name||"",(parseFloat(D.amount)||0).toFixed(2),D.type||"monthly",N(D.amount,D.type).toFixed(2),(N(D.amount,D.type)*12).toFixed(2),D.status||"active",D.isRecurring?"Yes":"No",D.notes||""]),T=[P.join(","),...S.map(D=>D.map(C=>typeof C=="string"&&C.includes(",")?`"${C}"`:C).join(","))].join(`
`),A=new Blob([T],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),M=URL.createObjectURL(A);R.setAttribute("href",M),R.setAttribute("download",`income_sources_${new Date().toISOString().split("T")[0]}.csv`),R.style.visibility="hidden",document.body.appendChild(R),R.click(),document.body.removeChild(R),alert(`Successfully exported ${t.length} income sources!`)}catch(P){console.error("Error exporting CSV:",P),alert("Failed to export CSV: "+P.message)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Income"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",w.totalMonthlyIncome.toLocaleString()]})]}),i.jsx(Er,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[w.activeCount," active sources"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Annual Projection"}),i.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",w.totalAnnualIncome.toLocaleString()]})]}),i.jsx(Ca,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Based on current rates"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Average Income"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",w.averageIncome.toLocaleString()]})]}),i.jsx(C0,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Per active source/month"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Top Source"}),i.jsx("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400 truncate",children:w.highestIncome.name})]}),i.jsx(mp,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["$",w.highestIncome.amount.toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Income Sources"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Track and manage your revenue streams and income sources"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:E,className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ui,{size:16}),"Export CSV"]}),i.jsxs("button",{onClick:()=>e("income"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ia,{size:16}),"Add Income Source"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search income sources...",value:n,onChange:P=>a(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"text-slate-400",size:16}),i.jsx("select",{value:s,onChange:P=>o(P.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:p.map(P=>i.jsx("option",{value:P,children:P==="all"?"All Types":P.charAt(0).toUpperCase()+P.slice(1).replace("-"," ")},P))}),i.jsx("select",{value:c,onChange:P=>d(P.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:y.map(P=>i.jsx("option",{value:P,children:P==="all"?"All Status":P.charAt(0).toUpperCase()+P.slice(1)},P))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>k("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Income Source",h.key==="name"&&i.jsx("span",{children:h.direction==="asc"?"":""})]})}),i.jsx("th",{className:"p-3 text-right cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>k("amount"),children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Amount",h.key==="amount"&&i.jsx("span",{children:h.direction==="asc"?"":""})]})}),i.jsx("th",{className:"p-3",children:"Type"}),i.jsx("th",{className:"p-3 text-right",children:"Monthly Equiv."}),i.jsx("th",{className:"p-3 text-right",children:"Annual Equiv."}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3",children:"Recurring"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:v.length>0?v.map(P=>{const S=parseFloat(P.amount)||0,T=N(S,P.type),A=T*12;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:P.name})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono font-bold text-green-600 dark:text-green-400",children:["$",S.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${j(P.type)}`,children:(P.type||"monthly").replace("-"," ")})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:["$",T.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",A.toLocaleString()]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-1",children:[b(P.status),i.jsx("span",{className:"text-xs capitalize",children:P.status||"active"})]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.isRecurring?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}`,children:P.isRecurring?"Yes":"No"})}),i.jsx("td",{className:"p-3 max-w-xs",children:i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.notes&&P.notes.length>30?`${P.notes.substring(0,30)}...`:P.notes||""})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>e("income",P),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit income source",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>r("income",P.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete income source",children:i.jsx(rr,{size:16})})]})})]},P.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:n||s!=="all"||c!=="all"?i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(ii,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No income sources match your search criteria"}),i.jsx("button",{onClick:()=>{a(""),o("all"),d("all")},className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Clear filters"})]}):i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Er,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No income sources added yet"}),i.jsx("button",{onClick:()=>e("income"),className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Add your first income source"})]})})})})]})}),v.length>0&&i.jsx("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border",children:i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 text-sm",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Showing ",v.length," of ",t.length," income sources"]})}),i.jsxs("div",{className:"flex items-center gap-6 font-medium",children:[i.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Monthly: $",v.reduce((P,S)=>P+N(S.amount,S.type),0).toFixed(2)]}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Annual: $",(v.reduce((P,S)=>P+N(S.amount,S.type),0)*12).toLocaleString()]})]})]})})]}),w.totalCount>=1&&w.highestIncome.amount>w.totalMonthlyIncome*.7&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"text-amber-600 dark:text-amber-400",size:20}),i.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Income Diversification Alert"})]}),i.jsxs("p",{className:"text-amber-700 dark:text-amber-300 text-sm mt-2",children:["Your top income source (",w.highestIncome.name,") represents over 70% of your total income. Consider diversifying your income streams to reduce financial risk."]})]})]})},Gle=({goalsWithProgress:t=[],openModal:e,onDeleteGoal:r,onEditGoal:n})=>{const[a,s]=V.useState(null),[o,c]=V.useState(!1),[d,h]=V.useState({name:"",description:"",target:"",current:0,deadline:"",type:"savings"}),m=N=>{s(N)},p=N=>{r(N),s(null)},y=()=>{s(null)},v=N=>N>=100?"from-green-500 to-emerald-500":N>=80?"from-green-500 to-green-600":N>=50?"from-yellow-500 to-orange-500":N>=25?"from-orange-500 to-red-500":"from-red-500 to-red-600",w=N=>{const E=new Date,S=new Date(N)-E,T=Math.ceil(S/(1e3*60*60*24));return T<0?{text:"Overdue",color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/20"}:T===0?{text:"Due Today",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20"}:T===1?{text:"1 day left",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20"}:T<=7?{text:`${T} days left`,color:"text-yellow-600",bgColor:"bg-yellow-100 dark:bg-yellow-900/20"}:T<=30?{text:`${T} days left`,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/20"}:{text:`${T} days left`,color:"text-slate-600",bgColor:"bg-slate-100 dark:bg-slate-700"}},k=N=>{const E=N.target-N.current,P=Math.ceil((new Date(N.deadline)-new Date)/(1e3*60*60*24));return P>0?Math.ceil(E/P):0},b=(N,E)=>{console.log("Update goal progress:",N,E)},j=N=>{N.preventDefault(),d.name&&d.target&&d.deadline&&(e("goal",{name:d.name,description:d.description,targetValue:Number(d.target),current:Number(d.current),deadline:d.deadline,type:d.type}),h({name:"",description:"",target:"",current:0,deadline:"",type:"savings"}),c(!1))};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-100 to-blue-100 dark:from-cyan-900/30 dark:to-blue-900/30 rounded-lg",children:i.jsx(mp,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Financial Goals"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.filter(N=>N.progress>=100).length," of ",t.length," completed"]})]})]}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[i.jsx(Vd,{size:16}),"Add Goal"]})]}),t.length>0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg",children:i.jsx(ea,{className:"text-green-600 dark:text-green-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Completed"}),i.jsx("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:t.filter(N=>N.progress>=100).length})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg",children:i.jsx(Ca,{className:"text-blue-600 dark:text-blue-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"In Progress"}),i.jsx("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:t.filter(N=>N.progress>0&&N.progress<100).length})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-800 rounded-lg",children:i.jsx($d,{className:"text-orange-600 dark:text-orange-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Total Value"}),i.jsxs("p",{className:"text-xl font-bold text-orange-800 dark:text-orange-200",children:["$",t.reduce((N,E)=>N+(E.targetValue||0),0).toLocaleString()]})]})]})})]}),i.jsx("div",{className:"space-y-4",children:t.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:i.jsx(mp,{size:32,className:"opacity-50"})}),i.jsx("h4",{className:"font-semibold text-lg mb-2",children:"No financial goals yet"}),i.jsx("p",{className:"text-sm mb-4",children:"Set your first goal and start tracking your financial progress!"}),i.jsx("button",{onClick:()=>c(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-lg text-sm font-medium transition-colors",children:"Create Your First Goal"})]}):t.map(N=>{const E=N.progress||0,P=E>=100,S=(N.targetValue||0)-(N.current||0),T=w(N.deadline),A=v(E),R=T.text==="Overdue",M=k({target:N.targetValue||0,current:N.current||0,deadline:N.deadline});return i.jsx("div",{className:`relative border rounded-lg p-5 transition-all duration-200 hover:shadow-md ${P?"border-green-200 dark:border-green-800 bg-gradient-to-r from-green-50/50 to-emerald-50/50 dark:from-green-900/10 dark:to-emerald-900/10":R?"border-red-200 dark:border-red-800 bg-gradient-to-r from-red-50/50 to-pink-50/50 dark:from-red-900/10 dark:to-pink-900/10":"border-slate-200 dark:border-slate-600 hover:border-cyan-300 dark:hover:border-cyan-700"}`,children:a!==N.id?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:N.name}),P&&i.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 text-xs font-medium rounded-full",children:" Completed"}),N.type&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.type==="savings"?"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200":N.type==="debt"?"bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-200":N.type==="investment"?"bg-purple-100 dark:bg-purple-800 text-purple-800 dark:text-purple-200":N.type==="purchase"?"bg-orange-100 dark:bg-orange-800 text-orange-800 dark:text-orange-200":"bg-cyan-100 dark:bg-cyan-800 text-cyan-800 dark:text-cyan-200"}`,children:N.type||"savings"}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.bgColor} ${T.color}`,children:T.text})]}),N.description&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:N.description}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Current"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",(N.current||0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Target"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",(N.targetValue||0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Remaining"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",S>0?S.toLocaleString():"0"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Daily Need"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",M>0?M.toLocaleString():"0"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 ml-4",children:[i.jsx("button",{onClick:()=>b(N.id,(N.current||0)+(N.targetValue||0)*.1),className:"text-green-600 hover:text-green-500 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",title:"Add 10%",children:i.jsx(Vd,{size:18})}),i.jsx("button",{onClick:()=>b(N.id,Math.max(0,(N.current||0)-(N.targetValue||0)*.1)),className:"text-orange-600 hover:text-orange-500 p-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",title:"Subtract 10%",children:i.jsx(uz,{size:18})}),i.jsx("button",{onClick:()=>m(N.id),className:"text-red-600 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Goal",children:i.jsx(rr,{size:18})})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Progress"}),i.jsxs("span",{className:`font-bold ${P?"text-green-600":"text-cyan-600"}`,children:[E.toFixed(1),"%"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`h-4 rounded-full transition-all duration-700 relative overflow-hidden bg-gradient-to-r ${A}`,style:{width:`${Math.min(E,100)}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),E>15&&i.jsx("div",{className:"absolute inset-0 flex items-center px-2",children:i.jsxs("span",{className:"text-xs font-medium text-white drop-shadow",children:["$",(N.current||0).toLocaleString()]})})]}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{children:["Deadline: ",new Date(N.deadline).toLocaleDateString()]}),!P&&S>0&&M>0&&i.jsxs("span",{children:["Need $",M.toLocaleString(),"/day"]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:i.jsx(rr,{className:"text-red-600 dark:text-red-400",size:24})}),i.jsxs("p",{className:"text-slate-800 dark:text-white font-medium mb-4",children:['Delete "',N.name,'"?']}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"This action cannot be undone."}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>p(N.id),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium",children:"Delete Goal"}),i.jsx("button",{onClick:y,className:"px-4 py-2 bg-slate-300 hover:bg-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500 text-slate-800 dark:text-white rounded-lg transition-colors font-medium",children:"Cancel"})]})]})})},N.id)})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-lg border border-slate-200 dark:border-slate-700 shadow-2xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Create Financial Goal"}),i.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:i.jsx(Pa,{size:20})})]}),i.jsxs("form",{onSubmit:j,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Type"}),i.jsxs("select",{value:d.type,onChange:N=>h({...d,type:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"savings",children:" Savings Goal"}),i.jsx("option",{value:"debt",children:" Debt Payoff"}),i.jsx("option",{value:"investment",children:" Investment Target"}),i.jsx("option",{value:"purchase",children:" Large Purchase"}),i.jsx("option",{value:"emergency",children:" Emergency Fund"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Name"}),i.jsx("input",{type:"text",value:d.name,onChange:N=>h({...d,name:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Emergency Fund, New Car, Pay off Credit Card",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),i.jsx("textarea",{value:d.description,onChange:N=>h({...d,description:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of your goal and why it matters to you",rows:"3"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Amount"}),i.jsx("input",{type:"number",value:d.current,onChange:N=>h({...d,current:Number(N.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Amount"}),i.jsx("input",{type:"number",value:d.target,onChange:N=>h({...d,target:Number(N.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10000",required:!0,min:"1"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Deadline"}),i.jsx("input",{type:"date",value:d.deadline,onChange:N=>h({...d,deadline:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:new Date().toISOString().split("T")[0]})]}),d.target>0&&d.deadline&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium mb-1",children:"Goal Calculation:"}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["To reach $",d.target.toLocaleString()," by ",new Date(d.deadline).toLocaleDateString(),", you need to save $",Math.ceil((d.target-d.current)/Math.max(1,Math.ceil((new Date(d.deadline)-new Date)/(1e3*60*60*24)))).toLocaleString()," per day."]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Create Goal"})]})]})]})})]})},Kle=({weeklyCosts:t,openModal:e,handleDelete:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState("all"),[c,d]=V.useState({key:"amount",direction:"desc"}),h=["all","Payroll","Fuel & Maintenance","Equipment Rental","Utilities","Insurance","Marketing","Office Expenses","Supplies","Contractors","Other"],m=V.useMemo(()=>t.filter(k=>{const b=k.name.toLowerCase().includes(n.toLowerCase())||k.notes&&k.notes.toLowerCase().includes(n.toLowerCase()),j=s==="all"||k.category===s;return b&&j}).sort((k,b)=>{if(c.key==="amount"){const j=parseFloat(k.amount)||0,N=parseFloat(b.amount)||0;return c.direction==="asc"?j-N:N-j}return c.key==="name"?c.direction==="asc"?k.name.localeCompare(b.name):b.name.localeCompare(k.name):0}),[t,n,s,c]),p=V.useMemo(()=>{const w=t.reduce((S,T)=>S+(parseFloat(T.amount)||0),0),k=w*4.33,b=w*52,j=t.reduce((S,T)=>(parseFloat(T.amount)||0)>S?parseFloat(T.amount)||0:S,0),N=t.length>0?w/t.length:0,E=t.reduce((S,T)=>{const A=T.category||"Other";return S[A]=(S[A]||0)+(parseFloat(T.amount)||0),S},{}),P=Object.entries(E).reduce((S,[T,A])=>A>(S.amount||0)?{category:T,amount:A}:S,{category:"None",amount:0});return{totalWeekly:w,totalMonthly:k,totalAnnual:b,highestCost:j,averageCost:N,categoryTotals:E,topCategory:P,itemCount:t.length}},[t]),y=w=>{d(k=>({key:w,direction:k.key===w&&k.direction==="desc"?"asc":"desc"}))},v=()=>{if(t.length===0){alert("No weekly costs to export.");return}try{const w=["Name","Weekly Amount","Monthly Amount (4.33x)","Annual Amount (52x)","Category","Notes"],k=t.map(P=>[P.name||"",(parseFloat(P.amount)||0).toFixed(2),((parseFloat(P.amount)||0)*4.33).toFixed(2),((parseFloat(P.amount)||0)*52).toFixed(2),P.category||"Other",P.notes||""]),b=[w.join(","),...k.map(P=>P.map(S=>typeof S=="string"&&S.includes(",")?`"${S}"`:S).join(","))].join(`
`),j=new Blob([b],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),E=URL.createObjectURL(j);N.setAttribute("href",E),N.setAttribute("download",`weekly_costs_${new Date().toISOString().split("T")[0]}.csv`),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N),alert(`Successfully exported ${t.length} weekly costs!`)}catch(w){console.error("Error exporting CSV:",w),alert("Failed to export CSV: "+w.message)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Weekly Total"}),i.jsxs("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",p.totalWeekly.toLocaleString()]})]}),i.jsx(P0,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[p.itemCount," cost items"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Impact"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",p.totalMonthly.toLocaleString()]})]}),i.jsx(Ca,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"x4.33 weeks/month"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Annual Impact"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",p.totalAnnual.toLocaleString()]})]}),i.jsx(C0,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"x52 weeks/year"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Top Category"}),i.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:p.topCategory.category})]}),i.jsx(Er,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["$",p.topCategory.amount.toLocaleString(),"/week"]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Recurring Weekly Costs"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Track and manage your regular weekly business expenses"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ui,{size:16}),"Export CSV"]}),i.jsxs("button",{onClick:()=>e("weekly"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ia,{size:16}),"Add Weekly Cost"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search weekly costs...",value:n,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"text-slate-400",size:16}),i.jsx("select",{value:s,onChange:w=>o(w.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:h.map(w=>i.jsx("option",{value:w,children:w==="all"?"All Categories":w},w))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>y("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Cost Item",c.key==="name"&&i.jsx("span",{children:c.direction==="asc"?"":""})]})}),i.jsx("th",{className:"p-3",children:"Category"}),i.jsx("th",{className:"p-3 text-right cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>y("amount"),children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Weekly Amount",c.key==="amount"&&i.jsx("span",{children:c.direction==="asc"?"":""})]})}),i.jsx("th",{className:"p-3 text-right",children:"Monthly Impact"}),i.jsx("th",{className:"p-3 text-right",children:"Annual Impact"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:m.length>0?m.map(w=>{const k=parseFloat(w.amount)||0,b=k*4.33,j=k*52;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:w.name})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:w.category||"Other"})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:["$",k.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-orange-600 dark:text-orange-400",children:["$",b.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",j.toLocaleString()]})}),i.jsx("td",{className:"p-3 max-w-xs",children:i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:w.notes&&w.notes.length>50?`${w.notes.substring(0,50)}...`:w.notes||""})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>e("weekly",w),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit cost",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>r("weekly",w.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete cost",children:i.jsx(rr,{size:16})})]})})]},w.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:n||s!=="all"?i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(ii,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No weekly costs match your search criteria"}),i.jsx("button",{onClick:()=>{a(""),o("all")},className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Clear filters"})]}):i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Er,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No weekly costs added yet"}),i.jsx("button",{onClick:()=>e("weekly"),className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Add your first weekly cost"})]})})})})]})}),m.length>0&&i.jsx("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border",children:i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 text-sm",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Showing ",m.length," of ",t.length," costs"]})}),i.jsxs("div",{className:"flex items-center gap-6 font-medium",children:[i.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Weekly: $",m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0).toFixed(2)]}),i.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:["Monthly: $",(m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0)*4.33).toFixed(2)]}),i.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["Annual: $",(m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0)*52).toLocaleString()]})]})]})})]}),p.highestCost>1e3&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(I0,{className:"text-amber-600 dark:text-amber-400",size:20}),i.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"High Weekly Cost Alert"})]}),i.jsxs("p",{className:"text-amber-700 dark:text-amber-300 text-sm mt-2",children:["You have a weekly cost of $",p.highestCost.toLocaleString(),", which amounts to $",(p.highestCost*52).toLocaleString()," annually. Consider reviewing this expense for potential savings opportunities."]})]})]})},Qle=[{min:1e4,max:1/0,rate:10},{min:8e3,max:9999,rate:8},{min:5e3,max:7999,rate:5},{min:3500,max:4999,rate:3},{min:0,max:3499,rate:1.5}],Yle=[{min:1e4,max:1/0,bonus:10},{min:8e3,max:9999,bonus:8},{min:5e3,max:7999,bonus:5},{min:3500,max:4999,bonus:2},{min:0,max:3499,bonus:0}],Xle=({userId:t,db:e,appId:r})=>{const[n,a]=V.useState(Qle),[s,o]=V.useState(0),[c,d]=V.useState(Yle),[h,m]=V.useState(0),[p,y]=V.useState(0),[v,w]=V.useState([]),[k,b]=V.useState("employees"),[j,N]=V.useState(!1),[E,P]=V.useState(null),[S,T]=V.useState(""),[A,R]=V.useState("all"),[M,D]=V.useState("all"),[C,F]=V.useState({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""});V.useEffect(()=>{if(!t||!e||!r){console.log("Missing Firebase props:",{userId:t,db:e,appId:r});return}console.log("Setting up Firebase listener for employees...");const q=hc(e,"artifacts",r,"users",t,"employees"),de=xd(q,pe=>{const le=pe.docs.map(je=>({id:je.id,...je.data()}));console.log("Employees loaded from Firebase:",le),w(le)},pe=>{console.error("Error fetching employees:",pe)});return()=>de()},[t,e,r]);const L=V.useMemo(()=>v.filter(q=>{const de=q.name.toLowerCase().includes(S.toLowerCase())||q.position.toLowerCase().includes(S.toLowerCase())||q.email.toLowerCase().includes(S.toLowerCase()),pe=A==="all"||q.status===A,le=M==="all"||q.department===M;return de&&pe&&le}),[v,S,A,M]),Y=V.useMemo(()=>{const q=v.filter(je=>je.status==="active");let de=0,pe=0,le=0;return q.forEach(je=>{if(je.payType==="salary"?de+=(je.baseSalary||0)/12:(de+=(je.hourlyRate||0)*(je.hoursWorked||0),le+=je.hoursWorked||0),je.incentiveType==="percent"){const Te=n.find(Ze=>je.salesAmount>=Ze.min&&je.salesAmount<=Ze.max);Te&&(pe+=je.salesAmount*(Te.rate/100))}else if(je.incentiveType==="hourly"){const Te=c.find(Ze=>je.salesAmount>=Ze.min&&je.salesAmount<=Ze.max);Te&&(pe+=(je.hoursWorked||0)*Te.bonus)}}),{activeEmployeeCount:q.length,totalEmployeeCount:v.length,totalBasePay:de,totalIncentives:pe,totalPayroll:de+pe,averagePay:q.length>0?(de+pe)/q.length:0,totalHours:le}},[v,n,c]),ne=V.useMemo(()=>["all",...[...new Set(v.map(de=>de.department))]],[v]),W=V.useMemo(()=>{const q=n.find(de=>s>=de.min&&s<=de.max);return q?s*(q.rate/100):0},[s,n]),G=V.useMemo(()=>{const q=c.find(de=>h>=de.min&&h<=de.max);return!q||!p?0:p*q.bonus},[h,p,c]),X=(q,de,pe)=>{const le=[...n];le[q][de]=parseFloat(pe)||0,a(le)},ee=(q,de,pe)=>{const le=[...c];le[q][de]=parseFloat(pe)||0,d(le)},re=(q,de)=>{F(pe=>({...pe,[q]:de}))},z=async()=>{if(console.log("Adding employee:",C),!C.name.trim()){alert("Please enter employee name");return}if(!t||!e||!r){alert("Please ensure you're logged in.");return}try{const q=hc(e,"artifacts",r,"users",t,"employees");await I4(q,{...C,baseSalary:parseFloat(C.baseSalary)||0,hourlyRate:parseFloat(C.hourlyRate)||0,hoursWorked:0,salesAmount:0,createdAt:Ut()}),console.log("Employee saved to Firebase successfully!"),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""}),N(!1)}catch(q){console.error("Error adding employee:",q),alert("Failed to add employee: "+q.message)}},Z=q=>{F(q),P(q.id),N(!0)},J=async()=>{if(!(!t||!e||!E))try{const q=lr(e,"artifacts",r,"users",t,"employees",E);await Zn(q,{...C,baseSalary:parseFloat(C.baseSalary)||0,hourlyRate:parseFloat(C.hourlyRate)||0,modifiedAt:Ut()}),P(null),N(!1),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""})}catch(q){console.error("Error updating employee:",q),alert("Failed to update employee: "+q.message)}},oe=async q=>{if(!(!t||!e)&&window.confirm("Are you sure you want to delete this employee?"))try{const de=lr(e,"artifacts",r,"users",t,"employees",q);await cj(de),console.log("Employee deleted from Firebase")}catch(de){console.error("Error deleting employee:",de),alert("Failed to delete employee: "+de.message)}},he=async(q,de,pe)=>{if(!(!t||!e))try{const le=lr(e,"artifacts",r,"users",t,"employees",q);await Zn(le,{[de]:parseFloat(pe)||0,modifiedAt:Ut()})}catch(le){console.error("Error updating employee data:",le)}},ve=q=>{if(q.incentiveType==="percent"){const de=n.find(pe=>q.salesAmount>=pe.min&&q.salesAmount<=pe.max);return de?q.salesAmount*(de.rate/100):0}else if(q.incentiveType==="hourly"){const de=c.find(pe=>q.salesAmount>=pe.min&&q.salesAmount<=pe.max);return de?(q.hoursWorked||0)*de.bonus:0}return 0},fe=q=>q.payType==="salary"?(q.baseSalary||0)/12:(q.hourlyRate||0)*(q.hoursWorked||0),ye=q=>{switch(q){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"inactive":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";case"terminated":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Payroll Management System"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Manage employees, calculate payroll, and track incentives"})]})}),i.jsxs("div",{className:"flex space-x-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsxs("button",{onClick:()=>b("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="employees"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(Mo,{size:16}),"Employees"]}),i.jsxs("button",{onClick:()=>b("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="payroll"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(mc,{size:16}),"Payroll"]}),i.jsxs("button",{onClick:()=>b("incentives"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="incentives"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(Ca,{size:16}),"Incentive Calculator"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Active Employees"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Y.activeEmployeeCount})]}),i.jsx(Mo,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["of ",Y.totalEmployeeCount," total"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Base Pay"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",Y.totalBasePay.toLocaleString()]})]}),i.jsx(Er,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Avg: $",Y.averagePay.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Incentives"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",Y.totalIncentives.toLocaleString()]})]}),i.jsx(Ca,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Current period"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Total Payroll"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",Y.totalPayroll.toLocaleString()]})]}),i.jsx(mc,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Base + incentives"})]})]}),k==="employees"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Employee Management"}),i.jsxs("button",{onClick:()=>{console.log("Add Employee button clicked"),N(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Vd,{size:16}),"Add Employee"]})]}),v.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(Mo,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No employees yet"}),i.jsx("p",{className:"mb-4",children:"Add your first employee to get started with payroll management."}),i.jsx("button",{onClick:()=>{console.log("Add First Employee button clicked"),N(!0)},className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Employee"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search employees...",value:S,onChange:q=>T(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"text-slate-400",size:16}),i.jsxs("select",{value:A,onChange:q=>R(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"terminated",children:"Terminated"})]}),i.jsx("select",{value:M,onChange:q=>D(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:ne.map(q=>i.jsx("option",{value:q,children:q==="all"?"All Departments":q},q))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Employee"}),i.jsx("th",{className:"p-3",children:"Department"}),i.jsx("th",{className:"p-3",children:"Pay Type"}),i.jsx("th",{className:"p-3",children:"Base Pay"}),i.jsx("th",{className:"p-3",children:"Incentive Type"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:L.map(q=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:q.position}),i.jsx("div",{className:"text-xs text-slate-400",children:q.email})]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:q.department})}),i.jsxs("td",{className:"p-3",children:[i.jsx("span",{className:"capitalize",children:q.payType}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.payType==="salary"?`$${q.baseSalary.toLocaleString()}/year`:`$${q.hourlyRate}/hour`})]}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",fe(q).toLocaleString()]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"capitalize",children:q.incentiveType})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ye(q.status)}`,children:q.status})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>Z(q),className:"text-slate-500 dark:text-slate-400 hover:text-blue-500 p-1 rounded transition-colors",title:"Edit employee",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>oe(q.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete employee",children:i.jsx(rr,{size:16})})]})})]},q.id))})]})})]}),j&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:E?"Edit Employee":"Add New Employee"})}),i.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",value:C.name,onChange:q=>re("name",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Position *"}),i.jsx("input",{type:"text",value:C.position,onChange:q=>re("position",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:C.email,onChange:q=>re("email",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:C.phone,onChange:q=>re("phone",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Department"}),i.jsxs("select",{value:C.department,onChange:q=>re("department",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Operations",children:"Operations"}),i.jsx("option",{value:"Sales",children:"Sales"}),i.jsx("option",{value:"Administration",children:"Administration"}),i.jsx("option",{value:"Management",children:"Management"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Pay Type"}),i.jsxs("select",{value:C.payType,onChange:q=>re("payType",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"salary",children:"Salary"}),i.jsx("option",{value:"hourly",children:"Hourly"})]})]}),C.payType==="salary"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Annual Salary"}),i.jsx("input",{type:"number",value:C.baseSalary,onChange:q=>re("baseSalary",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hourly Rate"}),i.jsx("input",{type:"number",step:"0.01",value:C.hourlyRate,onChange:q=>re("hourlyRate",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Incentive Type"}),i.jsxs("select",{value:C.incentiveType,onChange:q=>re("incentiveType",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"percent",children:"Percentage"}),i.jsx("option",{value:"hourly",children:"Hourly Bonus"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{value:C.status,onChange:q=>re("status",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"terminated",children:"Terminated"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hire Date"}),i.jsx("input",{type:"date",value:C.hireDate,onChange:q=>re("hireDate",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:C.notes,onChange:q=>re("notes",q.target.value),rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Additional notes about the employee..."})]})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{N(!1),P(null),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsx("button",{onClick:()=>{console.log("Form submit button clicked"),E?J():z()},className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:E?"Update Employee":"Add Employee"})]})]})})]}),k==="payroll"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:"Payroll Calculator"}),v.filter(q=>q.status==="active").length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(mc,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No active employees"}),i.jsx("p",{className:"mb-4",children:"Add some employees to start calculating payroll."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Employee"}),i.jsx("th",{className:"p-3",children:"Hours"}),i.jsx("th",{className:"p-3",children:"Sales"}),i.jsx("th",{className:"p-3",children:"Base Pay"}),i.jsx("th",{className:"p-3",children:"Incentive"}),i.jsx("th",{className:"p-3",children:"Total Pay"})]})}),i.jsx("tbody",{className:"text-sm",children:v.filter(q=>q.status==="active").map(q=>{const de=fe(q),pe=ve(q),le=de+pe;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50",children:[i.jsxs("td",{className:"p-3",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.position})]}),i.jsx("td",{className:"p-3",children:q.payType==="hourly"?i.jsx("input",{type:"number",value:q.hoursWorked||"",onChange:je=>he(q.id,"hoursWorked",je.target.value),className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"0"}):i.jsx("span",{className:"text-slate-400",children:""})}),i.jsx("td",{className:"p-3",children:q.incentiveType!=="none"?i.jsx("input",{type:"number",value:q.salesAmount||"",onChange:je=>he(q.id,"salesAmount",je.target.value),className:"w-24 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"0"}):i.jsx("span",{className:"text-slate-400",children:""})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",de.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",pe.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono font-bold text-blue-600 dark:text-blue-400",children:["$",le.toFixed(2)]})})]},q.id)})})]})})]}),k==="incentives"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Percent Incentive Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Brackets"}),i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2",children:"Sales Bracket"}),i.jsx("th",{className:"p-2",children:"% Scale"})]})}),i.jsx("tbody",{children:n.map((q,de)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("td",{className:"p-2 font-mono bg-blue-100 dark:bg-blue-900/50",children:["$",q.min.toLocaleString(),q.max===1/0?"+":` - $${q.max.toLocaleString()}`]}),i.jsxs("td",{className:"p-2 bg-blue-100 dark:bg-blue-900/50",children:[i.jsx("input",{type:"number",value:q.rate,onChange:pe=>X(de,"rate",pe.target.value),className:"w-20 bg-transparent text-right font-mono"})," %"]})]},de))})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Calculation"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Actual Sales"}),i.jsxs("div",{className:"relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:s,onChange:q=>o(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 pl-10 p-2 rounded-md"})]})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 p-4 rounded-lg text-center",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Estimated Bonus"}),i.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",W.toFixed(2)]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Hourly Incentive Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Brackets"}),i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2",children:"Sales Bracket"}),i.jsx("th",{className:"p-2",children:"Bonus per Hour"})]})}),i.jsx("tbody",{children:c.map((q,de)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("td",{className:"p-2 font-mono bg-blue-100 dark:bg-blue-900/50",children:["$",q.min.toLocaleString(),q.max===1/0?"+":` - $${q.max.toLocaleString()}`]}),i.jsxs("td",{className:"p-2 bg-blue-100 dark:bg-blue-900/50",children:["$ ",i.jsx("input",{type:"number",value:q.bonus,onChange:pe=>ee(de,"bonus",pe.target.value),className:"w-20 bg-transparent text-right font-mono"})]})]},de))})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Calculation"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Actual Sales"}),i.jsxs("div",{className:"relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:h,onChange:q=>m(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 pl-10 p-2 rounded-md"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hours Worked"}),i.jsx("input",{type:"number",value:p,onChange:q=>y(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 p-2 rounded-md"})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 p-4 rounded-lg text-center",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Estimated Bonus"}),i.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",G.toFixed(2)]})]})]})]})]})]})]})]})},Jle=({bills:t,paidStatus:e,selectedCategory:r,setSelectedCategory:n,handleTogglePaid:a,handleSort:s,openModal:o,handleDelete:c,handleEnhancedExportCSV:d})=>{const[h,m]=V.useState(""),[p,y]=V.useState("dueDay"),[v,w]=V.useState("asc"),[k,b]=V.useState("all"),[j,N]=V.useState("all"),[E,P]=V.useState("all"),[S,T]=V.useState(!1),A=new Date,R=new Date(A.getFullYear(),A.getMonth(),A.getDate()-A.getDay()),M=new Date(R.getTime()+8640*60*1e3),D=new Date(M.getTime()+1440*60*1e3),C=new Date(D.getTime()+8640*60*1e3),F=new Date(A.getFullYear(),A.getMonth(),1),L=new Date(A.getFullYear(),A.getMonth()+1,0),Y=V.useMemo(()=>{let ee=t.filter(re=>{if(r&&re.category!==r||h&&!re.name.toLowerCase().includes(h.toLowerCase())||k==="paid"&&!e[re.id]||k==="unpaid"&&e[re.id]||E==="under100"&&re.amount>=100||E==="100to500"&&(re.amount<100||re.amount>500)||E==="over500"&&re.amount<=500)return!1;if(j!=="all"&&re.dueDay){const z=new Date(A.getFullYear(),A.getMonth(),re.dueDay);switch(z<A&&z.setMonth(z.getMonth()+1),j){case"overdue":if(z>=A)return!1;break;case"thisWeek":if(z<R||z>M)return!1;break;case"nextWeek":if(z<D||z>C)return!1;break;case"thisMonth":if(z<F||z>L)return!1;break}}return!0});return ee.sort((re,z)=>{let Z=re[p],J=z[p];p==="status"&&(Z=e[re.id]?"paid":"unpaid",J=e[z.id]?"paid":"unpaid"),typeof Z=="string"&&(Z=Z.toLowerCase(),J=J.toLowerCase());let oe=0;return Z<J&&(oe=-1),Z>J&&(oe=1),v==="desc"?-oe:oe}),ee},[t,r,h,k,j,E,p,v,e,A]),ne=ee=>{p===ee?w(v==="asc"?"desc":"asc"):(y(ee),w("asc"))},W=()=>{m(""),y("dueDay"),w("asc"),b("all"),N("all"),P("all"),n(null)},G=V.useMemo(()=>{let ee=0;return h&&ee++,r&&ee++,k!=="all"&&ee++,j!=="all"&&ee++,E!=="all"&&ee++,ee},[h,r,k,j,E]),X=({type:ee,label:re})=>{const z=Q.useRef(null);return i.jsxs("div",{className:"inline-block",children:[i.jsx("input",{ref:z,type:"file",accept:".csv",onChange:Z=>{Z.target.files[0]&&(window.handleEnhancedCSVImport?.(Z.target.files[0],ee),Z.target.value="")},style:{display:"none"}}),i.jsxs("button",{onClick:()=>z.current?.click(),className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(O0,{size:16}),re]})]})};return i.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Monthly Bills"}),r&&i.jsxs("button",{onClick:()=>n(null),className:"text-sm text-cyan-500 dark:text-cyan-400 hover:underline",children:["Clear Filter: ",r]}),G>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:[G," filter",G!==1?"s":""," active"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(X,{type:"bill",label:"Import"}),i.jsxs("button",{onClick:()=>d(Y,"bills"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Ui,{size:16})," Export"]})]})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search bills by name...",value:h,onChange:ee=>m(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-cyan-500 focus:border-transparent"}),h&&i.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:i.jsx(Pa,{size:16})})]}),i.jsxs("button",{onClick:()=>T(!S),className:`flex items-center gap-2 px-4 py-2 rounded-md border transition-colors ${S?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300":"border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx(Uh,{size:16}),"Filters",i.jsx(Ld,{className:`transition-transform ${S?"rotate-180":""}`,size:16})]}),G>0&&i.jsx("button",{onClick:W,className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:"Clear All"})]}),S&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Sort By"}),i.jsxs("select",{value:`${p}-${v}`,onChange:ee=>{const[re,z]=ee.target.value.split("-");y(re),w(z)},className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),i.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),i.jsx("option",{value:"dueDay-asc",children:"Due Date (Early)"}),i.jsx("option",{value:"dueDay-desc",children:"Due Date (Late)"}),i.jsx("option",{value:"amount-asc",children:"Amount (Low-High)"}),i.jsx("option",{value:"amount-desc",children:"Amount (High-Low)"}),i.jsx("option",{value:"status-asc",children:"Status (Unpaid First)"}),i.jsx("option",{value:"status-desc",children:"Status (Paid First)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Payment Status"}),i.jsxs("select",{value:k,onChange:ee=>b(ee.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Bills"}),i.jsx("option",{value:"unpaid",children:"Unpaid Only"}),i.jsx("option",{value:"paid",children:"Paid Only"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Due Date"}),i.jsxs("select",{value:j,onChange:ee=>N(ee.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Dates"}),i.jsx("option",{value:"overdue",children:"Overdue"}),i.jsx("option",{value:"thisWeek",children:"This Week"}),i.jsx("option",{value:"nextWeek",children:"Next Week"}),i.jsx("option",{value:"thisMonth",children:"This Month"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Amount Range"}),i.jsxs("select",{value:E,onChange:ee=>P(ee.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Amounts"}),i.jsx("option",{value:"under100",children:"Under $100"}),i.jsx("option",{value:"100to500",children:"$100 - $500"}),i.jsx("option",{value:"over500",children:"Over $500"})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Showing ",Y.length," of ",t.length," bills",G>0&&` with ${G} filter${G!==1?"s":""} applied`]})})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:i.jsxs("button",{onClick:()=>ne("status"),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-300",children:["Status",p==="status"&&(v==="asc"?i.jsx(wm,{size:14}):i.jsx(bm,{size:14}))]})}),i.jsx("th",{className:"p-3",children:i.jsxs("button",{onClick:()=>ne("name"),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-300",children:["Name",p==="name"&&(v==="asc"?i.jsx(wm,{size:14}):i.jsx(bm,{size:14}))]})}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3",children:"Receipt"}),i.jsx("th",{className:"p-3 text-right",children:i.jsxs("button",{onClick:()=>ne("amount"),className:"flex items-center gap-1 ml-auto hover:text-slate-700 dark:hover:text-slate-300",children:["Amount",p==="amount"&&(v==="asc"?i.jsx(wm,{size:14}):i.jsx(bm,{size:14}))]})}),i.jsx("th",{className:"p-3 text-center",children:i.jsxs("button",{onClick:()=>ne("dueDay"),className:"flex items-center gap-1 mx-auto hover:text-slate-700 dark:hover:text-slate-300",children:["Due Day",p==="dueDay"&&(v==="asc"?i.jsx(wm,{size:14}):i.jsx(bm,{size:14}))]})}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-medium mb-2",children:"No bills added yet"}),i.jsx("p",{className:"text-sm",children:'Click "Add New Bill" to get started'})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-medium mb-2",children:"No bills match your filters"}),i.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]})})}):Y.map(ee=>i.jsxs("tr",{className:`border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${e[ee.id]?"text-slate-400 dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:[i.jsx("td",{className:"p-3",children:i.jsx("button",{onClick:()=>a(ee.id),className:"hover:scale-110 transition-transform",children:e[ee.id]?i.jsx(ea,{className:"text-green-500",size:20}):i.jsx(oz,{className:"text-slate-400 dark:text-slate-600",size:20})})}),i.jsxs("td",{className:`p-3 font-medium ${e[ee.id]?"line-through":""}`,children:[ee.name,ee.category&&i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:ee.category})]}),i.jsx("td",{className:"p-3 text-center",children:ee.notes&&i.jsxs("div",{className:"group relative flex justify-center",children:[i.jsx(a3,{size:16,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-slate-700 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:ee.notes})]})}),i.jsx("td",{className:"p-3 text-center",children:ee.attachmentURL?i.jsx("a",{href:ee.attachmentURL,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform inline-block",children:i.jsx(cA,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}):i.jsx(cA,{size:16,className:"text-slate-400 dark:text-slate-600"})}),i.jsxs("td",{className:"p-3 text-right font-mono font-semibold",children:["$",(ee.amount||0).toFixed(2)]}),i.jsx("td",{className:"p-3 text-center font-medium",children:ee.dueDay}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>o("bill",ee),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit bill",children:i.jsx(ei,{size:16})}),i.jsx("button",{onClick:()=>c("bill",ee.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete bill",children:i.jsx(rr,{size:16})})]})})]},ee.id))})]})}),i.jsxs("button",{onClick:()=>o("bill"),className:"mt-4 flex items-center gap-2 text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 font-semibold transition-colors",children:[i.jsx(Ia,{size:18}),"Add New Bill"]})]})},Zle={apiKey:"AIzaSyAlev0GFpv3rzRYCJaMALOqlPwaowNfynI",authDomain:"hvac-finance-dashboard.firebaseapp.com",projectId:"hvac-finance-dashboard",storageBucket:"hvac-finance-dashboard.firebasestorage.app",messagingSenderId:"917610618621",appId:"1:917610618621:web:83c621d154c5f62c9be894"},ba="hvac-finance-dashboard",SN=ED(Zle),gD=uM(SN),nn=NB(SN),ece=Kq(SN),tce=()=>{const[t,e]=V.useState(null),[r,n]=V.useState(!0),[a,s]=V.useState([]),[o,c]=V.useState([]),[d,h]=V.useState([]),[m,p]=V.useState([]),[y,v]=V.useState([]),[w,k]=V.useState([]),[b,j]=V.useState([]),[N,E]=V.useState([]),[P,S]=V.useState([]),[T,A]=V.useState([]),[R,M]=V.useState({}),[D,C]=V.useState(!1),[F,L]=V.useState(null),[Y,ne]=V.useState("bill"),[W,G]=V.useState("dashboard"),[X,ee]=V.useState(null),[re,z]=V.useState(0),[Z,J]=V.useState({start:new Date,end:new Date}),[oe,he]=V.useState("monthly"),[ve,fe]=V.useState(!0),[ye,q]=V.useState("dark"),[de,pe]=V.useState(""),[le,je]=V.useState([]),[Te,Ze]=V.useState([]),[et,Nt]=V.useState([]);V.useEffect(()=>{document.documentElement.classList.toggle("dark",ye==="dark")},[ye]);const nr=()=>q(ye==="light"?"dark":"light");V.useEffect(()=>{const Be=new Date;let Qe,ft;if(oe==="monthly")Qe=new Date(Be.getFullYear(),Be.getMonth(),1),ft=new Date(Be.getFullYear(),Be.getMonth()+1,0);else if(oe==="quarterly"){const rt=Math.floor(Be.getMonth()/3);Qe=new Date(Be.getFullYear(),rt*3,1),ft=new Date(Be.getFullYear(),rt*3+3,0)}else Qe=new Date(Be.getFullYear(),0,1),ft=new Date(Be.getFullYear(),11,31);J({start:Qe,end:ft})},[oe]);const ct=V.useMemo(()=>Z.start.getFullYear()+"-"+String(Z.start.getMonth()+1).padStart(2,"0"),[Z]);V.useEffect(()=>{const Be=E9(gD,Qe=>{e(Qe?Qe.uid:null),n(!1)});return()=>Be()},[]),V.useEffect(()=>{if(!t)return;const Qe=Object.entries({bills:s,debts:c,incomes:h,weeklyCosts:p,tasks:v,taxPayments:k,goals:j,inventory:E,vehicles:S,maintenanceLogs:A,workOrders:Ze,technicians:Nt}).map(([rt,zt])=>xd(T4(hc(nn,"artifacts",ba,"users",t,rt)),vr=>{zt(vr.docs.map(Wt=>({id:Wt.id,...Wt.data()})))},vr=>console.error(`Error fetching ${rt}:`,vr))),ft=xd(lr(nn,"artifacts",ba,"users",t,"paidStatus",ct),rt=>{M(rt.exists()?rt.data().status:{})},rt=>console.error("Error fetching paid status:",rt));return()=>{Qe.forEach(rt=>rt()),ft()}},[t,ct]),V.useEffect(()=>{if(!t)return;const Be=xd(lr(nn,"artifacts",ba,"users",t,"settings","currentBalance"),Qe=>{z(Qe.exists()&&Qe.data().amount||0)},Qe=>console.error("Error fetching current balance:",Qe));return()=>Be()},[t]);const ge=V.useMemo(()=>{const Be=(d||[]).reduce((Wt,Fr)=>Wt+(Fr.amount||0),0),Qe=(a||[]).reduce((Wt,Fr)=>Wt+(Fr.amount||0),0),ft=(m||[]).reduce((Wt,Fr)=>Wt+(Fr.amount||0),0)*4.33,rt=Qe+ft,zt=Be-rt,vr=(o||[]).reduce((Wt,Fr)=>Wt+((Fr.totalAmount||0)-(Fr.paidAmount||0)),0);return{totalIncome:Be,totalOutflow:rt,netCashFlow:zt,totalDebt:vr}},[a,o,d,m]),Ce=V.useMemo(()=>{const Be=(a||[]).reduce((ft,rt)=>{const zt=rt.category||"Uncategorized";return ft[zt]=(ft[zt]||0)+rt.amount,ft},{}),Qe=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#19D4FF"];return Object.entries(Be).map(([ft,rt],zt)=>({name:ft,value:rt,color:Qe[zt%Qe.length]})).sort((ft,rt)=>rt.value-ft.value)},[a]),tt=V.useMemo(()=>(b||[]).map(Be=>{let Qe=0;if(Be.type==="debt"){const ft=(o||[]).find(rt=>rt.id===Be.targetId);ft&&(Qe=ft.paidAmount/ft.totalAmount*100)}return{...Be,progress:Math.min(Qe,100)}}),[b,o]),Ar=async Be=>{t&&await Na(lr(nn,"artifacts",ba,"users",t,"paidStatus",ct),{status:{...R,[Be]:!R[Be]}},{merge:!0})},St=(Be,Qe=null)=>{ne(Be),L(Qe),C(!0)},un=async Be=>{if(!t)return alert("Please log in to update the balance.");await Na(lr(nn,"artifacts",ba,"users",t,"settings","currentBalance"),{amount:Be,updatedAt:Ut()},{merge:!0})},qt=async(Be,Qe)=>{if(!t)return;const rt={bill:"bills",debt:"debts",income:"incomes",weekly:"weeklyCosts",task:"tasks",taxPayment:"taxPayments",goal:"goals",inventory:"inventory",vehicle:"vehicles",maintenanceLog:"maintenanceLogs"}[Y];if(!rt)return alert("Invalid modal type for saving.");const zt=["artifacts",ba,"users",t,rt],vr={...Be,modifiedAt:Ut()};if(Qe){const Wt=Gq(ece,`receipts/${t}/${Date.now()}-${Qe.name}`);vr.attachmentURL=await Wq(Wt,Qe).then(()=>Hq(Wt))}F?.id?await Zn(lr(nn,...zt,F.id),vr):await I4(hc(nn,...zt),{...vr,createdAt:Ut()}),C(!1),L(null)},_t=async(Be,Qe)=>{if(!t||!window.confirm("Delete this item?"))return;const rt={bill:"bills",debt:"debts",income:"incomes",weekly:"weeklyCosts",task:"tasks",taxPayment:"taxPayments",goal:"goals",inventory:"inventory",vehicle:"vehicles",maintenanceLog:"maintenanceLogs"}[Be];if(!rt)return alert("Invalid item type for deletion.");await cj(lr(nn,"artifacts",ba,"users",t,rt,Qe))},Ln=async(Be,Qe)=>{if(!t||!Qe.length||!window.confirm(`Delete ${Qe.length} selected items?`))return;const rt={inventory:"inventory",vehicle:"vehicles"}[Be];if(!rt)return alert("Invalid bulk delete type.");const zt=Uk(nn);Qe.forEach(vr=>{zt.delete(lr(nn,"artifacts",ba,"users",t,rt,vr)),Be==="vehicle"&&(T||[]).filter(Wt=>Wt.vehicleId===vr).forEach(Wt=>zt.delete(lr(nn,"artifacts",ba,"users",t,"maintenanceLogs",Wt.id)))}),await zt.commit(),je([])},Qs=async()=>{if(!t||!window.confirm("Clear all your business data? This is irreversible."))return;const Be=["bills","debts","incomes","weeklyCosts","tasks","taxPayments","goals","inventory","vehicles","maintenanceLogs","paidStatus","system","settings","workOrders","technicians","customers"];for(const Qe of Be){const ft=await MB(hc(nn,"artifacts",ba,"users",t,Qe));if(!ft.empty){const rt=Uk(nn);ft.docs.forEach(zt=>rt.delete(zt.ref)),await rt.commit()}}alert("All business data has been cleared.")};if(r)return i.jsx("div",{className:"bg-slate-900 text-white min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})});if(!t)return i.jsx(bz,{setUserId:e});const Ra=()=>i.jsxs(i.Fragment,{children:[ve&&i.jsx(Ule,{bills:a,paidStatus:R,onClose:()=>fe(!1)}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx(Ao,{title:"Total Monthly Income",value:`$${ge.totalIncome.toLocaleString()}`,icon:i.jsx(nz,{size:24}),color:"green"}),i.jsx(Ao,{title:"Total Monthly Outflow",value:`$${ge.totalOutflow.toLocaleString()}`,icon:i.jsx(tz,{size:24}),color:"red"}),i.jsx(Ao,{title:"Projected Net",value:`$${ge.netCashFlow.toLocaleString()}`,icon:i.jsx(Er,{size:24}),color:ge.netCashFlow>=0?"cyan":"amber"}),i.jsx(Ao,{title:"Outstanding Debt",value:`$${ge.totalDebt.toLocaleString()}`,icon:i.jsx(I0,{size:24}),color:"orange"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[i.jsx(Jle,{bills:a,paidStatus:R,selectedCategory:X,setSelectedCategory:ee,handleTogglePaid:Ar,openModal:St,handleDelete:_t}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Expense Breakdown"}),i.jsx(Ble,{data:Ce,onSliceClick:ee})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Work Order Management"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Access advanced invoicing, customer management, and dispatch."}),i.jsxs("button",{onClick:()=>G("workorder"),className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(_a,{size:16})," Open Work Orders"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Getting Started"}),i.jsxs("button",{onClick:Qs,className:"w-full flex items-center justify-center gap-2 text-sm bg-red-600 hover:bg-red-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(rr,{size:16})," Clear All Data"]})]})]})]})]});return i.jsxs("div",{className:`${ye} bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-white min-h-screen font-sans`,children:[i.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[i.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Business Financial Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete Business Management Solution"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:nr,className:"p-2 rounded-full bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-slate-700",children:ye==="light"?i.jsx(dz,{size:20}):i.jsx(mz,{size:20})}),i.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-3 rounded-lg",children:[i.jsx("span",{className:"text-sm font-semibold",children:"Period:"}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:[i.jsx("button",{onClick:()=>he("monthly"),className:`px-3 py-1 text-sm rounded transition-colors ${oe==="monthly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Monthly"}),i.jsx("button",{onClick:()=>he("quarterly"),className:`px-3 py-1 text-sm rounded transition-colors ${oe==="quarterly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Quarterly"}),i.jsx("button",{onClick:()=>he("yearly"),className:`px-3 py-1 text-sm rounded transition-colors ${oe==="yearly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Yearly"})]})]}),i.jsxs("button",{onClick:()=>T9(gD),className:"flex items-center gap-2 text-sm bg-slate-600 hover:bg-slate-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(cz,{size:16})," Logout"]})]})]}),i.jsxs("nav",{className:"flex items-center border-b border-slate-200 dark:border-slate-700 mb-6 overflow-x-auto",children:[i.jsx("button",{onClick:()=>G("dashboard"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="dashboard"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Dashboard"}),i.jsx("button",{onClick:()=>G("calendar"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="calendar"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calendar"}),i.jsx("button",{onClick:()=>G("workorder"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="workorder"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Work Orders"}),i.jsx("button",{onClick:()=>G("vehicles"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="vehicles"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Vehicles"}),i.jsx("button",{onClick:()=>G("inventory"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="inventory"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Inventory"}),i.jsx("button",{onClick:()=>G("debts"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="debts"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Debt"}),i.jsx("button",{onClick:()=>G("incomes"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="incomes"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Income"}),i.jsx("button",{onClick:()=>G("weeklyCosts"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="weeklyCosts"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Weekly Costs"}),i.jsx("button",{onClick:()=>G("goals"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="goals"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Goals"}),i.jsx("button",{onClick:()=>G("pnl"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="pnl"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"P&L"}),i.jsx("button",{onClick:()=>G("forecast"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="forecast"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Forecast"}),i.jsx("button",{onClick:()=>G("valuation"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="valuation"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Valuation"}),i.jsx("button",{onClick:()=>G("tax"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="tax"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Tax"}),i.jsx("button",{onClick:()=>G("incentives"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="incentives"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Incentives"})]}),i.jsxs("main",{children:[W==="dashboard"&&Ra(),W==="valuation"&&i.jsx(Fle,{}),W==="calendar"&&i.jsx(zoe,{tasks:y,openModal:St,workOrders:Te,technicians:et}),W==="tax"&&i.jsx(qoe,{taxPayments:w,openModal:St,handleDelete:_t,workOrders:Te,bills:a,weeklyCosts:m}),W==="pnl"&&i.jsx(zle,{bills:a,weeklyCosts:m,reportingPeriod:oe,dateRange:Z,workOrders:Te}),W==="forecast"&&i.jsx(qle,{bills:a,weeklyCosts:m,currentBankBalance:re,setCurrentBankBalance:un}),W==="goals"&&i.jsx(Gle,{goalsWithProgress:tt,openModal:St,onDeleteGoal:Be=>_t("goal",Be),onEditGoal:Be=>St("goal",Be)}),W==="incentives"&&i.jsx(Xle,{userId:t,db:nn,appId:ba}),W==="workorder"&&i.jsx(Mle,{userId:t,db:nn,inventory:N}),W==="vehicles"&&i.jsx($le,{vehicles:P,maintenanceLogs:T,openModal:St,handleDelete:_t,searchTerm:de,setSearchTerm:pe,handleBulkDelete:Ln,selectedIds:le,setSelectedIds:je}),W==="inventory"&&i.jsx(Vle,{inventory:N,openModal:St,handleDelete:_t,handleBulkDelete:Ln,selectedIds:le,setSelectedIds:je,searchTerm:de,setSearchTerm:pe}),W==="debts"&&i.jsx(Wle,{debts:o,openModal:St,handleDelete:_t,searchTerm:de,setSearchTerm:pe}),W==="incomes"&&i.jsx(Hle,{incomes:d,openModal:St,handleDelete:_t}),W==="weeklyCosts"&&i.jsx(Kle,{weeklyCosts:m,openModal:St,handleDelete:_t})]}),i.jsx("footer",{className:"text-center mt-8 py-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Powered by ",i.jsx("a",{href:"https://service.money/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-cyan-600 dark:text-cyan-400 hover:underline",children:"Service Coin"})]})})]}),D&&i.jsx(Woe,{item:F,type:Y,onSave:qt,onClose:()=>C(!1),debts:o,vehicles:P})]})};K$.createRoot(document.getElementById("root")).render(i.jsx(Q.StrictMode,{children:i.jsx(tce,{})}));
