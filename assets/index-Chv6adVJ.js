(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yy={exports:{}},Gu={},Xy={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function U$(){if($E)return it;$E=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function b(z,ee,J){this.props=z,this.context=ee,this.refs=k,this.updater=J||v}b.prototype.isReactComponent={},b.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function N(){}N.prototype=b.prototype;function S(z,ee,J){this.props=z,this.context=ee,this.refs=k,this.updater=J||v}var E=S.prototype=new N;E.constructor=S,w(E,b.prototype),E.isPureReactComponent=!0;var P=Array.isArray,_=Object.prototype.hasOwnProperty,O={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function R(z,ee,J){var le,fe={},be=null,me=null;if(ee!=null)for(le in ee.ref!==void 0&&(me=ee.ref),ee.key!==void 0&&(be=""+ee.key),ee)_.call(ee,le)&&!T.hasOwnProperty(le)&&(fe[le]=ee[le]);var xe=arguments.length-2;if(xe===1)fe.children=J;else if(1<xe){for(var q=Array(xe),he=0;he<xe;he++)q[he]=arguments[he+2];fe.children=q}if(z&&z.defaultProps)for(le in xe=z.defaultProps,xe)fe[le]===void 0&&(fe[le]=xe[le]);return{$$typeof:t,type:z,key:be,ref:me,props:fe,_owner:O.current}}function M(z,ee){return{$$typeof:t,type:z.type,key:ee,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function A(z){var ee={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(J){return ee[J]})}var F=/\/+/g;function L(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?A(""+z.key):ee.toString(36)}function Z(z,ee,J,le,fe){var be=typeof z;(be==="undefined"||be==="boolean")&&(z=null);var me=!1;if(z===null)me=!0;else switch(be){case"string":case"number":me=!0;break;case"object":switch(z.$$typeof){case t:case e:me=!0}}if(me)return me=z,fe=fe(me),z=le===""?"."+L(me,0):le,P(fe)?(J="",z!=null&&(J=z.replace(F,"$&/")+"/"),Z(fe,ee,J,"",function(he){return he})):fe!=null&&(D(fe)&&(fe=M(fe,J+(!fe.key||me&&me.key===fe.key?"":(""+fe.key).replace(F,"$&/")+"/")+z)),ee.push(fe)),1;if(me=0,le=le===""?".":le+":",P(z))for(var xe=0;xe<z.length;xe++){be=z[xe];var q=le+L(be,xe);me+=Z(be,ee,J,q,fe)}else if(q=y(z),typeof q=="function")for(z=q.call(z),xe=0;!(be=z.next()).done;)be=be.value,q=le+L(be,xe++),me+=Z(be,ee,J,q,fe);else if(be==="object")throw ee=String(z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return me}function ae(z,ee,J){if(z==null)return z;var le=[],fe=0;return Z(z,le,"","",function(be){return ee.call(J,be,fe++)}),le}function W(z){if(z._status===-1){var ee=z._result;ee=ee(),ee.then(function(J){(z._status===0||z._status===-1)&&(z._status=1,z._result=J)},function(J){(z._status===0||z._status===-1)&&(z._status=2,z._result=J)}),z._status===-1&&(z._status=0,z._result=ee)}if(z._status===1)return z._result.default;throw z._result}var G={current:null},Y={transition:null},te={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function ne(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:ae,forEach:function(z,ee,J){ae(z,function(){ee.apply(this,arguments)},J)},count:function(z){var ee=0;return ae(z,function(){ee++}),ee},toArray:function(z){return ae(z,function(ee){return ee})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},it.Component=b,it.Fragment=r,it.Profiler=a,it.PureComponent=S,it.StrictMode=n,it.Suspense=d,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,it.act=ne,it.cloneElement=function(z,ee,J){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var le=w({},z.props),fe=z.key,be=z.ref,me=z._owner;if(ee!=null){if(ee.ref!==void 0&&(be=ee.ref,me=O.current),ee.key!==void 0&&(fe=""+ee.key),z.type&&z.type.defaultProps)var xe=z.type.defaultProps;for(q in ee)_.call(ee,q)&&!T.hasOwnProperty(q)&&(le[q]=ee[q]===void 0&&xe!==void 0?xe[q]:ee[q])}var q=arguments.length-2;if(q===1)le.children=J;else if(1<q){xe=Array(q);for(var he=0;he<q;he++)xe[he]=arguments[he+2];le.children=xe}return{$$typeof:t,type:z.type,key:fe,ref:be,props:le,_owner:me}},it.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},it.createElement=R,it.createFactory=function(z){var ee=R.bind(null,z);return ee.type=z,ee},it.createRef=function(){return{current:null}},it.forwardRef=function(z){return{$$typeof:c,render:z}},it.isValidElement=D,it.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:W}},it.memo=function(z,ee){return{$$typeof:h,type:z,compare:ee===void 0?null:ee}},it.startTransition=function(z){var ee=Y.transition;Y.transition={};try{z()}finally{Y.transition=ee}},it.unstable_act=ne,it.useCallback=function(z,ee){return G.current.useCallback(z,ee)},it.useContext=function(z){return G.current.useContext(z)},it.useDebugValue=function(){},it.useDeferredValue=function(z){return G.current.useDeferredValue(z)},it.useEffect=function(z,ee){return G.current.useEffect(z,ee)},it.useId=function(){return G.current.useId()},it.useImperativeHandle=function(z,ee,J){return G.current.useImperativeHandle(z,ee,J)},it.useInsertionEffect=function(z,ee){return G.current.useInsertionEffect(z,ee)},it.useLayoutEffect=function(z,ee){return G.current.useLayoutEffect(z,ee)},it.useMemo=function(z,ee){return G.current.useMemo(z,ee)},it.useReducer=function(z,ee,J){return G.current.useReducer(z,ee,J)},it.useRef=function(z){return G.current.useRef(z)},it.useState=function(z){return G.current.useState(z)},it.useSyncExternalStore=function(z,ee,J){return G.current.useSyncExternalStore(z,ee,J)},it.useTransition=function(){return G.current.useTransition()},it.version="18.3.1",it}var FE;function fj(){return FE||(FE=1,Xy.exports=U$()),Xy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function B$(){if(VE)return Gu;VE=1;var t=fj(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,h){var m,p={},y=null,v=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)n.call(d,m)&&!s.hasOwnProperty(m)&&(p[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)p[m]===void 0&&(p[m]=d[m]);return{$$typeof:e,type:c,key:y,ref:v,props:p,_owner:a.current}}return Gu.Fragment=r,Gu.jsx=o,Gu.jsxs=o,Gu}var UE;function q$(){return UE||(UE=1,Yy.exports=B$()),Yy.exports}var i=q$(),V=fj();const Q=bt(V);var mm={},Jy={exports:{}},bn={},Zy={exports:{}},ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function z$(){return BE||(BE=1,(function(t){function e(Y,te){var ne=Y.length;Y.push(te);e:for(;0<ne;){var z=ne-1>>>1,ee=Y[z];if(0<a(ee,te))Y[z]=te,Y[ne]=ee,ne=z;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var te=Y[0],ne=Y.pop();if(ne!==te){Y[0]=ne;e:for(var z=0,ee=Y.length,J=ee>>>1;z<J;){var le=2*(z+1)-1,fe=Y[le],be=le+1,me=Y[be];if(0>a(fe,ne))be<ee&&0>a(me,fe)?(Y[z]=me,Y[be]=ne,z=be):(Y[z]=fe,Y[le]=ne,z=le);else if(be<ee&&0>a(me,ne))Y[z]=me,Y[be]=ne,z=be;else break e}}return te}function a(Y,te){var ne=Y.sortIndex-te.sortIndex;return ne!==0?ne:Y.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,p=null,y=3,v=!1,w=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var te=r(h);te!==null;){if(te.callback===null)n(h);else if(te.startTime<=Y)n(h),te.sortIndex=te.expirationTime,e(d,te);else break;te=r(h)}}function P(Y){if(k=!1,E(Y),!w)if(r(d)!==null)w=!0,W(_);else{var te=r(h);te!==null&&G(P,te.startTime-Y)}}function _(Y,te){w=!1,k&&(k=!1,N(R),R=-1),v=!0;var ne=y;try{for(E(te),p=r(d);p!==null&&(!(p.expirationTime>te)||Y&&!A());){var z=p.callback;if(typeof z=="function"){p.callback=null,y=p.priorityLevel;var ee=z(p.expirationTime<=te);te=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(d)&&n(d),E(te)}else n(d);p=r(d)}if(p!==null)var J=!0;else{var le=r(h);le!==null&&G(P,le.startTime-te),J=!1}return J}finally{p=null,y=ne,v=!1}}var O=!1,T=null,R=-1,M=5,D=-1;function A(){return!(t.unstable_now()-D<M)}function F(){if(T!==null){var Y=t.unstable_now();D=Y;var te=!0;try{te=T(!0,Y)}finally{te?L():(O=!1,T=null)}}else O=!1}var L;if(typeof S=="function")L=function(){S(F)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ae=Z.port2;Z.port1.onmessage=F,L=function(){ae.postMessage(null)}}else L=function(){b(F,0)};function W(Y){T=Y,O||(O=!0,L())}function G(Y,te){R=b(function(){Y(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,W(_))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ne=y;y=te;try{return Y()}finally{y=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=y;y=Y;try{return te()}finally{y=ne}},t.unstable_scheduleCallback=function(Y,te,ne){var z=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,Y){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ne+ee,Y={id:m++,callback:te,priorityLevel:Y,startTime:ne,expirationTime:ee,sortIndex:-1},ne>z?(Y.sortIndex=ne,e(h,Y),r(d)===null&&Y===r(h)&&(k?(N(R),R=-1):k=!0,G(P,ne-z))):(Y.sortIndex=ee,e(d,Y),w||v||(w=!0,W(_))),Y},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(Y){var te=y;return function(){var ne=y;y=te;try{return Y.apply(this,arguments)}finally{y=ne}}}})(ex)),ex}var qE;function W$(){return qE||(qE=1,Zy.exports=z$()),Zy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function H$(){if(zE)return bn;zE=1;var t=fj(),e=W$();function r(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function s(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(a[l]=u,l=0;l<u.length;l++)n.add(u[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function y(l){return d.call(p,l)?!0:d.call(m,l)?!1:h.test(l)?p[l]=!0:(m[l]=!0,!1)}function v(l,u,f,x){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,u,f,x){if(u===null||typeof u>"u"||v(l,u,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function k(l,u,f,x,j,I,U){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=j,this.mustUseProperty=f,this.propertyName=l,this.type=u,this.sanitizeURL=I,this.removeEmptyString=U}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){b[l]=new k(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];b[u]=new k(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){b[l]=new k(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){b[l]=new k(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){b[l]=new k(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){b[l]=new k(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){b[l]=new k(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){b[l]=new k(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){b[l]=new k(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function S(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(N,S);b[u]=new k(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(N,S);b[u]=new k(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(N,S);b[u]=new k(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){b[l]=new k(l,1,!1,l.toLowerCase(),null,!1,!1)}),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){b[l]=new k(l,1,!1,l.toLowerCase(),null,!0,!0)});function E(l,u,f,x){var j=b.hasOwnProperty(u)?b[u]:null;(j!==null?j.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(w(u,f,j,x)&&(f=null),x||j===null?y(u)&&(f===null?l.removeAttribute(u):l.setAttribute(u,""+f)):j.mustUseProperty?l[j.propertyName]=f===null?j.type===3?!1:"":f:(u=j.attributeName,x=j.attributeNamespace,f===null?l.removeAttribute(u):(j=j.type,f=j===3||j===4&&f===!0?"":""+f,x?l.setAttributeNS(x,u,f):l.setAttribute(u,f))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),O=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),A=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),Y=Symbol.iterator;function te(l){return l===null||typeof l!="object"?null:(l=Y&&l[Y]||l["@@iterator"],typeof l=="function"?l:null)}var ne=Object.assign,z;function ee(l){if(z===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);z=u&&u[1]||""}return`
`+z+l}var J=!1;function le(l,u){if(!l||J)return"";J=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ue){var x=ue}Reflect.construct(l,[],u)}else{try{u.call()}catch(ue){x=ue}l.call(u.prototype)}else{try{throw Error()}catch(ue){x=ue}l()}}catch(ue){if(ue&&x&&typeof ue.stack=="string"){for(var j=ue.stack.split(`
`),I=x.stack.split(`
`),U=j.length-1,H=I.length-1;1<=U&&0<=H&&j[U]!==I[H];)H--;for(;1<=U&&0<=H;U--,H--)if(j[U]!==I[H]){if(U!==1||H!==1)do if(U--,H--,0>H||j[U]!==I[H]){var K=`
`+j[U].replace(" at new "," at ");return l.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",l.displayName)),K}while(1<=U&&0<=H);break}}}finally{J=!1,Error.prepareStackTrace=f}return(l=l?l.displayName||l.name:"")?ee(l):""}function fe(l){switch(l.tag){case 5:return ee(l.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return l=le(l.type,!1),l;case 11:return l=le(l.type.render,!1),l;case 1:return l=le(l.type,!0),l;default:return""}}function be(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case T:return"Fragment";case O:return"Portal";case M:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case Z:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case A:return(l.displayName||"Context")+".Consumer";case D:return(l._context.displayName||"Context")+".Provider";case F:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ae:return u=l.displayName||null,u!==null?u:be(l.type)||"Memo";case W:u=l._payload,l=l._init;try{return be(l(u))}catch{}}return null}function me(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(u);case 8:return u===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function xe(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function he(l){var u=q(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),x=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var j=f.get,I=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return j.call(this)},set:function(U){x=""+U,I.call(this,U)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(U){x=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ge(l){l._valueTracker||(l._valueTracker=he(l))}function ce(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),x="";return l&&(x=q(l)?l.checked?"true":"false":l.value),l=x,l!==f?(u.setValue(l),!0):!1}function Ne(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ae(l,u){var f=u.checked;return ne({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??l._wrapperState.initialChecked})}function et(l,u){var f=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;f=xe(u.value!=null?u.value:f),l._wrapperState={initialChecked:x,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function tt(l,u){u=u.checked,u!=null&&E(l,"checked",u,!1)}function St(l,u){tt(l,u);var f=xe(u.value),x=u.type;if(f!=null)x==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+f):l.value!==""+f&&(l.value=""+f);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?ut(l,u.type,f):u.hasOwnProperty("defaultValue")&&ut(l,u.type,xe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function ar(l,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,f||u===l.value||(l.value=u),l.defaultValue=u}f=l.name,f!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,f!==""&&(l.name=f)}function ut(l,u,f){(u!=="number"||Ne(l.ownerDocument)!==l)&&(f==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+f&&(l.defaultValue=""+f))}var ye=Array.isArray;function Pe(l,u,f,x){if(l=l.options,u){u={};for(var j=0;j<f.length;j++)u["$"+f[j]]=!0;for(f=0;f<l.length;f++)j=u.hasOwnProperty("$"+l[f].value),l[f].selected!==j&&(l[f].selected=j),j&&x&&(l[f].defaultSelected=!0)}else{for(f=""+xe(f),u=null,j=0;j<l.length;j++){if(l[j].value===f){l[j].selected=!0,x&&(l[j].defaultSelected=!0);return}u!==null||l[j].disabled||(u=l[j])}u!==null&&(u.selected=!0)}}function rt(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(r(91));return ne({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Cr(l,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(r(92));if(ye(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),f=u}l._wrapperState={initialValue:xe(f)}}function Et(l,u){var f=xe(u.value),x=xe(u.defaultValue);f!=null&&(f=""+f,f!==l.value&&(l.value=f),u.defaultValue==null&&l.defaultValue!==f&&(l.defaultValue=f)),x!=null&&(l.defaultValue=""+x)}function hn(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function zt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?zt(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var $n,Qs=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,x,j){MSApp.execUnsafeLocalFunction(function(){return l(u,f,x,j)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=$n.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function Da(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xe=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(l){Xe.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),qe[u]=qe[l]})});function mt(l,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||qe.hasOwnProperty(l)&&qe[l]?(""+u).trim():u+"px"}function nt(l,u){l=l.style;for(var f in u)if(u.hasOwnProperty(f)){var x=f.indexOf("--")===0,j=mt(f,u[f],x);f==="float"&&(f="cssFloat"),x?l.setProperty(f,j):l[f]=j}}var Wt=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(l,u){if(u){if(Wt[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(r(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(r(61))}if(u.style!=null&&typeof u.style!="object")throw Error(r(62))}}function Ht(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=null;function cl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ul=null,Fn=null,Ma=null;function dl(l){if(l=Iu(l)){if(typeof ul!="function")throw Error(r(280));var u=l.stateNode;u&&(u=Tf(u),ul(l.stateNode,l.type,u))}}function La(l){Fn?Ma?Ma.push(l):Ma=[l]:Fn=l}function cu(){if(Fn){var l=Fn,u=Ma;if(Ma=Fn=null,dl(l),u)for(l=0;l<u.length;l++)dl(u[l])}}function Ys(l,u){return l(u)}function uu(){}var di=!1;function du(l,u,f){if(di)return l(u,f);di=!0;try{return Ys(l,u,f)}finally{di=!1,(Fn!==null||Ma!==null)&&(uu(),cu())}}function tr(l,u){var f=l.stateNode;if(f===null)return null;var x=Tf(f);if(x===null)return null;f=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var hl=!1;if(c)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){hl=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{hl=!1}function Xs(l,u,f,x,j,I,U,H,K){var ue=Array.prototype.slice.call(arguments,3);try{u.apply(f,ue)}catch(ke){this.onError(ke)}}var Js=!1,fl=null,oa=!1,hu=null,jg={onError:function(l){Js=!0,fl=l}};function ml(l,u,f,x,j,I,U,H,K){Js=!1,fl=null,Xs.apply(jg,arguments)}function Jh(l,u,f,x,j,I,U,H,K){if(ml.apply(this,arguments),Js){if(Js){var ue=fl;Js=!1,fl=null}else throw Error(r(198));oa||(oa=!0,hu=ue)}}function la(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function Zs(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function ca(l){if(la(l)!==l)throw Error(r(188))}function Zh(l){var u=l.alternate;if(!u){if(u=la(l),u===null)throw Error(r(188));return u!==l?null:l}for(var f=l,x=u;;){var j=f.return;if(j===null)break;var I=j.alternate;if(I===null){if(x=j.return,x!==null){f=x;continue}break}if(j.child===I.child){for(I=j.child;I;){if(I===f)return ca(j),l;if(I===x)return ca(j),u;I=I.sibling}throw Error(r(188))}if(f.return!==x.return)f=j,x=I;else{for(var U=!1,H=j.child;H;){if(H===f){U=!0,f=j,x=I;break}if(H===x){U=!0,x=j,f=I;break}H=H.sibling}if(!U){for(H=I.child;H;){if(H===f){U=!0,f=I,x=j;break}if(H===x){U=!0,x=I,f=j;break}H=H.sibling}if(!U)throw Error(r(189))}}if(f.alternate!==x)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:u}function fu(l){return l=Zh(l),l!==null?pl(l):null}function pl(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=pl(l);if(u!==null)return u;l=l.sibling}return null}var gl=e.unstable_scheduleCallback,mu=e.unstable_cancelCallback,ef=e.unstable_shouldYield,Ng=e.unstable_requestPaint,Ct=e.unstable_now,tf=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,Xi=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,pu=e.unstable_LowPriority,rf=e.unstable_IdlePriority,to=null,jn=null;function nf(l){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(to,l,void 0,(l.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:sf,gu=Math.log,af=Math.LN2;function sf(l){return l>>>=0,l===0?32:31-(gu(l)/af|0)|0}var yl=64,xl=4194304;function Ji(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ro(l,u){var f=l.pendingLanes;if(f===0)return 0;var x=0,j=l.suspendedLanes,I=l.pingedLanes,U=f&268435455;if(U!==0){var H=U&~j;H!==0?x=Ji(H):(I&=U,I!==0&&(x=Ji(I)))}else U=f&~j,U!==0?x=Ji(U):I!==0&&(x=Ji(I));if(x===0)return 0;if(u!==0&&u!==x&&(u&j)===0&&(j=x&-x,I=u&-u,j>=I||j===16&&(I&4194240)!==0))return u;if((x&4)!==0&&(x|=f&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=x;0<u;)f=31-en(u),j=1<<f,x|=l[f],u&=~j;return x}function Sg(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hi(l,u){for(var f=l.suspendedLanes,x=l.pingedLanes,j=l.expirationTimes,I=l.pendingLanes;0<I;){var U=31-en(I),H=1<<U,K=j[U];K===-1?((H&f)===0||(H&x)!==0)&&(j[U]=Sg(H,u)):K<=u&&(l.expiredLanes|=H),I&=~H}}function Nn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function no(){var l=yl;return yl<<=1,(yl&4194240)===0&&(yl=64),l}function Zi(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function es(l,u,f){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-en(u),l[u]=f}function Tt(l,u){var f=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<f;){var j=31-en(f),I=1<<j;u[j]=0,x[j]=-1,l[j]=-1,f&=~I}}function ts(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var x=31-en(f),j=1<<x;j&u|l[x]&u&&(l[x]|=u),f&=~j}}var lt=0;function rs(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var of,vl,lf,cf,uf,yu=!1,$a=[],Pr=null,ua=null,da=null,ns=new Map,Un=new Map,Fa=[],Eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function df(l,u){switch(l){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":ua=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":ns.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(u.pointerId)}}function fn(l,u,f,x,j,I){return l===null||l.nativeEvent!==I?(l={blockedOn:u,domEventName:f,eventSystemFlags:x,nativeEvent:I,targetContainers:[j]},u!==null&&(u=Iu(u),u!==null&&vl(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,j!==null&&u.indexOf(j)===-1&&u.push(j),l)}function Tg(l,u,f,x,j){switch(u){case"focusin":return Pr=fn(Pr,l,u,f,x,j),!0;case"dragenter":return ua=fn(ua,l,u,f,x,j),!0;case"mouseover":return da=fn(da,l,u,f,x,j),!0;case"pointerover":var I=j.pointerId;return ns.set(I,fn(ns.get(I)||null,l,u,f,x,j)),!0;case"gotpointercapture":return I=j.pointerId,Un.set(I,fn(Un.get(I)||null,l,u,f,x,j)),!0}return!1}function hf(l){var u=lo(l.target);if(u!==null){var f=la(u);if(f!==null){if(u=f.tag,u===13){if(u=Zs(f),u!==null){l.blockedOn=u,uf(l.priority,function(){lf(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function fi(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=bl(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(f===null){f=l.nativeEvent;var x=new f.constructor(f.type,f);Vr=x,f.target.dispatchEvent(x),Vr=null}else return u=Iu(f),u!==null&&vl(u),l.blockedOn=f,!1;u.shift()}return!0}function ao(l,u,f){fi(l)&&f.delete(u)}function ff(){yu=!1,Pr!==null&&fi(Pr)&&(Pr=null),ua!==null&&fi(ua)&&(ua=null),da!==null&&fi(da)&&(da=null),ns.forEach(ao),Un.forEach(ao)}function ha(l,u){l.blockedOn===u&&(l.blockedOn=null,yu||(yu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ff)))}function fa(l){function u(j){return ha(j,l)}if(0<$a.length){ha($a[0],l);for(var f=1;f<$a.length;f++){var x=$a[f];x.blockedOn===l&&(x.blockedOn=null)}}for(Pr!==null&&ha(Pr,l),ua!==null&&ha(ua,l),da!==null&&ha(da,l),ns.forEach(u),Un.forEach(u),f=0;f<Fa.length;f++)x=Fa[f],x.blockedOn===l&&(x.blockedOn=null);for(;0<Fa.length&&(f=Fa[0],f.blockedOn===null);)hf(f),f.blockedOn===null&&Fa.shift()}var mi=P.ReactCurrentBatchConfig,as=!0;function Vt(l,u,f,x){var j=lt,I=mi.transition;mi.transition=null;try{lt=1,xu(l,u,f,x)}finally{lt=j,mi.transition=I}}function Ag(l,u,f,x){var j=lt,I=mi.transition;mi.transition=null;try{lt=4,xu(l,u,f,x)}finally{lt=j,mi.transition=I}}function xu(l,u,f,x){if(as){var j=bl(l,u,f,x);if(j===null)Vg(l,u,x,io,f),df(l,x);else if(Tg(j,l,u,f,x))x.stopPropagation();else if(df(l,x),u&4&&-1<Eg.indexOf(l)){for(;j!==null;){var I=Iu(j);if(I!==null&&of(I),I=bl(l,u,f,x),I===null&&Vg(l,u,x,io,f),I===j)break;j=I}j!==null&&x.stopPropagation()}else Vg(l,u,x,null,f)}}var io=null;function bl(l,u,f,x){if(io=null,l=cl(x),l=lo(l),l!==null)if(u=la(l),u===null)l=null;else if(f=u.tag,f===13){if(l=Zs(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return io=l,null}function vu(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tf()){case eo:return 1;case Xi:return 4;case Vn:case pu:return 16;case rf:return 536870912;default:return 16}default:return 16}}var Sn=null,wl=null,mn=null;function bu(){if(mn)return mn;var l,u=wl,f=u.length,x,j="value"in Sn?Sn.value:Sn.textContent,I=j.length;for(l=0;l<f&&u[l]===j[l];l++);var U=f-l;for(x=1;x<=U&&u[f-x]===j[I-x];x++);return mn=j.slice(l,1<x?1-x:void 0)}function kl(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Va(){return!0}function wu(){return!1}function Ir(l){function u(f,x,j,I,U){this._reactName=f,this._targetInst=j,this.type=x,this.nativeEvent=I,this.target=U,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(f=l[H],this[H]=f?f(I):I[H]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Va:wu,this.isPropagationStopped=wu,this}return ne(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),u}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Ir(ma),Ua=ne({},ma,{view:0,detail:0}),Cg=Ir(Ua),jl,pi,is,so=ne({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==is&&(is&&l.type==="mousemove"?(jl=l.screenX-is.screenX,pi=l.screenY-is.screenY):pi=jl=0,is=l),jl)},movementY:function(l){return"movementY"in l?l.movementY:pi}}),Nl=Ir(so),ku=ne({},so,{dataTransfer:0}),mf=Ir(ku),Sl=ne({},Ua,{relatedTarget:0}),El=Ir(Sl),pf=ne({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),gi=Ir(pf),gf=ne({},ma,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),yf=Ir(gf),xf=ne({},ma,{data:0}),_u=Ir(xf),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=vf[l])?!!u[l]:!1}function Ba(){return bf}var g=ne({},Ua,{key:function(l){if(l.key){var u=Tl[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=kl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?tn[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(l){return l.type==="keypress"?kl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?kl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),C=Ir(g),$=ne({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B=Ir($),ie=ne({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),de=Ir(ie),Te=ne({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),wt=Ir(Te),dr=ne({},so,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),dt=Ir(dr),wr=[9,13,27,32],ir=c&&"CompositionEvent"in window,Bn=null;c&&"documentMode"in document&&(Bn=document.documentMode);var En=c&&"TextEvent"in window&&!Bn,oo=c&&(!ir||Bn&&8<Bn&&11>=Bn),Al=" ",IN=!1;function ON(l,u){switch(l){case"keyup":return wr.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RN(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Cl=!1;function $5(l,u){switch(l){case"compositionend":return RN(u);case"keypress":return u.which!==32?null:(IN=!0,Al);case"textInput":return l=u.data,l===Al&&IN?null:l;default:return null}}function F5(l,u){if(Cl)return l==="compositionend"||!ir&&ON(l,u)?(l=bu(),mn=wl=Sn=null,Cl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return oo&&u.locale!=="ko"?null:u.data;default:return null}}var V5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DN(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!V5[l.type]:u==="textarea"}function MN(l,u,f,x){La(x),u=Nf(u,"onChange"),0<u.length&&(f=new _l("onChange","change",null,f,x),l.push({event:f,listeners:u}))}var ju=null,Nu=null;function U5(l){eS(l,0)}function wf(l){var u=Dl(l);if(ce(u))return l}function B5(l,u){if(l==="change")return u}var LN=!1;if(c){var Pg;if(c){var Ig="oninput"in document;if(!Ig){var $N=document.createElement("div");$N.setAttribute("oninput","return;"),Ig=typeof $N.oninput=="function"}Pg=Ig}else Pg=!1;LN=Pg&&(!document.documentMode||9<document.documentMode)}function FN(){ju&&(ju.detachEvent("onpropertychange",VN),Nu=ju=null)}function VN(l){if(l.propertyName==="value"&&wf(Nu)){var u=[];MN(u,Nu,l,cl(l)),du(U5,u)}}function q5(l,u,f){l==="focusin"?(FN(),ju=u,Nu=f,ju.attachEvent("onpropertychange",VN)):l==="focusout"&&FN()}function z5(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return wf(Nu)}function W5(l,u){if(l==="click")return wf(u)}function H5(l,u){if(l==="input"||l==="change")return wf(u)}function G5(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var pa=typeof Object.is=="function"?Object.is:G5;function Su(l,u){if(pa(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),x=Object.keys(u);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var j=f[x];if(!d.call(u,j)||!pa(l[j],u[j]))return!1}return!0}function UN(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function BN(l,u){var f=UN(l);l=0;for(var x;f;){if(f.nodeType===3){if(x=l+f.textContent.length,l<=u&&x>=u)return{node:f,offset:u-l};l=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=UN(f)}}function qN(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?qN(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function zN(){for(var l=window,u=Ne();u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=Ne(l.document)}return u}function Og(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function K5(l){var u=zN(),f=l.focusedElem,x=l.selectionRange;if(u!==f&&f&&f.ownerDocument&&qN(f.ownerDocument.documentElement,f)){if(x!==null&&Og(f)){if(u=x.start,l=x.end,l===void 0&&(l=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(l,f.value.length);else if(l=(u=f.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var j=f.textContent.length,I=Math.min(x.start,j);x=x.end===void 0?I:Math.min(x.end,j),!l.extend&&I>x&&(j=x,x=I,I=j),j=BN(f,I);var U=BN(f,x);j&&U&&(l.rangeCount!==1||l.anchorNode!==j.node||l.anchorOffset!==j.offset||l.focusNode!==U.node||l.focusOffset!==U.offset)&&(u=u.createRange(),u.setStart(j.node,j.offset),l.removeAllRanges(),I>x?(l.addRange(u),l.extend(U.node,U.offset)):(u.setEnd(U.node,U.offset),l.addRange(u)))}}for(u=[],l=f;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)l=u[f],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Q5=c&&"documentMode"in document&&11>=document.documentMode,Pl=null,Rg=null,Eu=null,Dg=!1;function WN(l,u,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Dg||Pl==null||Pl!==Ne(x)||(x=Pl,"selectionStart"in x&&Og(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Eu&&Su(Eu,x)||(Eu=x,x=Nf(Rg,"onSelect"),0<x.length&&(u=new _l("onSelect","select",null,u,f),l.push({event:u,listeners:x}),u.target=Pl)))}function kf(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var Il={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},Mg={},HN={};c&&(HN=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function _f(l){if(Mg[l])return Mg[l];if(!Il[l])return l;var u=Il[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in HN)return Mg[l]=u[f];return l}var GN=_f("animationend"),KN=_f("animationiteration"),QN=_f("animationstart"),YN=_f("transitionend"),XN=new Map,JN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(l,u){XN.set(l,u),s(u,[l])}for(var Lg=0;Lg<JN.length;Lg++){var $g=JN[Lg],Y5=$g.toLowerCase(),X5=$g[0].toUpperCase()+$g.slice(1);ss(Y5,"on"+X5)}ss(GN,"onAnimationEnd"),ss(KN,"onAnimationIteration"),ss(QN,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(YN,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function ZN(l,u,f){var x=l.type||"unknown-event";l.currentTarget=f,Jh(x,u,void 0,l),l.currentTarget=null}function eS(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var x=l[f],j=x.event;x=x.listeners;e:{var I=void 0;if(u)for(var U=x.length-1;0<=U;U--){var H=x[U],K=H.instance,ue=H.currentTarget;if(H=H.listener,K!==I&&j.isPropagationStopped())break e;ZN(j,H,ue),I=K}else for(U=0;U<x.length;U++){if(H=x[U],K=H.instance,ue=H.currentTarget,H=H.listener,K!==I&&j.isPropagationStopped())break e;ZN(j,H,ue),I=K}}}if(oa)throw l=hu,oa=!1,hu=null,l}function Dt(l,u){var f=u[Hg];f===void 0&&(f=u[Hg]=new Set);var x=l+"__bubble";f.has(x)||(tS(u,l,2,!1),f.add(x))}function Fg(l,u,f){var x=0;u&&(x|=4),tS(f,l,x,u)}var jf="_reactListening"+Math.random().toString(36).slice(2);function Au(l){if(!l[jf]){l[jf]=!0,n.forEach(function(f){f!=="selectionchange"&&(J5.has(f)||Fg(f,!1,l),Fg(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[jf]||(u[jf]=!0,Fg("selectionchange",!1,u))}}function tS(l,u,f,x){switch(vu(u)){case 1:var j=Vt;break;case 4:j=Ag;break;default:j=xu}f=j.bind(null,u,f,l),j=void 0,!hl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(j=!0),x?j!==void 0?l.addEventListener(u,f,{capture:!0,passive:j}):l.addEventListener(u,f,!0):j!==void 0?l.addEventListener(u,f,{passive:j}):l.addEventListener(u,f,!1)}function Vg(l,u,f,x,j){var I=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var U=x.tag;if(U===3||U===4){var H=x.stateNode.containerInfo;if(H===j||H.nodeType===8&&H.parentNode===j)break;if(U===4)for(U=x.return;U!==null;){var K=U.tag;if((K===3||K===4)&&(K=U.stateNode.containerInfo,K===j||K.nodeType===8&&K.parentNode===j))return;U=U.return}for(;H!==null;){if(U=lo(H),U===null)return;if(K=U.tag,K===5||K===6){x=I=U;continue e}H=H.parentNode}}x=x.return}du(function(){var ue=I,ke=cl(f),je=[];e:{var we=XN.get(l);if(we!==void 0){var Ce=_l,Me=l;switch(l){case"keypress":if(kl(f)===0)break e;case"keydown":case"keyup":Ce=C;break;case"focusin":Me="focus",Ce=El;break;case"focusout":Me="blur",Ce=El;break;case"beforeblur":case"afterblur":Ce=El;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=de;break;case GN:case KN:case QN:Ce=gi;break;case YN:Ce=wt;break;case"scroll":Ce=Cg;break;case"wheel":Ce=dt;break;case"copy":case"cut":case"paste":Ce=yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=B}var Le=(u&4)!==0,rr=!Le&&l==="scroll",se=Le?we!==null?we+"Capture":null:we;Le=[];for(var re=ue,oe;re!==null;){oe=re;var Se=oe.stateNode;if(oe.tag===5&&Se!==null&&(oe=Se,se!==null&&(Se=tr(re,se),Se!=null&&Le.push(Cu(re,Se,oe)))),rr)break;re=re.return}0<Le.length&&(we=new Ce(we,Me,null,f,ke),je.push({event:we,listeners:Le}))}}if((u&7)===0){e:{if(we=l==="mouseover"||l==="pointerover",Ce=l==="mouseout"||l==="pointerout",we&&f!==Vr&&(Me=f.relatedTarget||f.fromElement)&&(lo(Me)||Me[yi]))break e;if((Ce||we)&&(we=ke.window===ke?ke:(we=ke.ownerDocument)?we.defaultView||we.parentWindow:window,Ce?(Me=f.relatedTarget||f.toElement,Ce=ue,Me=Me?lo(Me):null,Me!==null&&(rr=la(Me),Me!==rr||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Ce=null,Me=ue),Ce!==Me)){if(Le=Nl,Se="onMouseLeave",se="onMouseEnter",re="mouse",(l==="pointerout"||l==="pointerover")&&(Le=B,Se="onPointerLeave",se="onPointerEnter",re="pointer"),rr=Ce==null?we:Dl(Ce),oe=Me==null?we:Dl(Me),we=new Le(Se,re+"leave",Ce,f,ke),we.target=rr,we.relatedTarget=oe,Se=null,lo(ke)===ue&&(Le=new Le(se,re+"enter",Me,f,ke),Le.target=oe,Le.relatedTarget=rr,Se=Le),rr=Se,Ce&&Me)t:{for(Le=Ce,se=Me,re=0,oe=Le;oe;oe=Ol(oe))re++;for(oe=0,Se=se;Se;Se=Ol(Se))oe++;for(;0<re-oe;)Le=Ol(Le),re--;for(;0<oe-re;)se=Ol(se),oe--;for(;re--;){if(Le===se||se!==null&&Le===se.alternate)break t;Le=Ol(Le),se=Ol(se)}Le=null}else Le=null;Ce!==null&&rS(je,we,Ce,Le,!1),Me!==null&&rr!==null&&rS(je,rr,Me,Le,!0)}}e:{if(we=ue?Dl(ue):window,Ce=we.nodeName&&we.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&we.type==="file")var Fe=B5;else if(DN(we))if(LN)Fe=H5;else{Fe=z5;var Ue=q5}else(Ce=we.nodeName)&&Ce.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Fe=W5);if(Fe&&(Fe=Fe(l,ue))){MN(je,Fe,f,ke);break e}Ue&&Ue(l,we,ue),l==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&ut(we,"number",we.value)}switch(Ue=ue?Dl(ue):window,l){case"focusin":(DN(Ue)||Ue.contentEditable==="true")&&(Pl=Ue,Rg=ue,Eu=null);break;case"focusout":Eu=Rg=Pl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,WN(je,f,ke);break;case"selectionchange":if(Q5)break;case"keydown":case"keyup":WN(je,f,ke)}var Be;if(ir)e:{switch(l){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Cl?ON(l,f)&&(Ge="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Ge="onCompositionStart");Ge&&(oo&&f.locale!=="ko"&&(Cl||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Cl&&(Be=bu()):(Sn=ke,wl="value"in Sn?Sn.value:Sn.textContent,Cl=!0)),Ue=Nf(ue,Ge),0<Ue.length&&(Ge=new _u(Ge,l,null,f,ke),je.push({event:Ge,listeners:Ue}),Be?Ge.data=Be:(Be=RN(f),Be!==null&&(Ge.data=Be)))),(Be=En?$5(l,f):F5(l,f))&&(ue=Nf(ue,"onBeforeInput"),0<ue.length&&(ke=new _u("onBeforeInput","beforeinput",null,f,ke),je.push({event:ke,listeners:ue}),ke.data=Be))}eS(je,u)})}function Cu(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Nf(l,u){for(var f=u+"Capture",x=[];l!==null;){var j=l,I=j.stateNode;j.tag===5&&I!==null&&(j=I,I=tr(l,f),I!=null&&x.unshift(Cu(l,I,j)),I=tr(l,u),I!=null&&x.push(Cu(l,I,j))),l=l.return}return x}function Ol(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function rS(l,u,f,x,j){for(var I=u._reactName,U=[];f!==null&&f!==x;){var H=f,K=H.alternate,ue=H.stateNode;if(K!==null&&K===x)break;H.tag===5&&ue!==null&&(H=ue,j?(K=tr(f,I),K!=null&&U.unshift(Cu(f,K,H))):j||(K=tr(f,I),K!=null&&U.push(Cu(f,K,H)))),f=f.return}U.length!==0&&l.push({event:u,listeners:U})}var Z5=/\r\n?/g,e$=/\u0000|\uFFFD/g;function nS(l){return(typeof l=="string"?l:""+l).replace(Z5,`
`).replace(e$,"")}function Sf(l,u,f){if(u=nS(u),nS(l)!==u&&f)throw Error(r(425))}function Ef(){}var Ug=null,Bg=null;function qg(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var zg=typeof setTimeout=="function"?setTimeout:void 0,t$=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,r$=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(l){return aS.resolve(null).then(l).catch(n$)}:zg;function n$(l){setTimeout(function(){throw l})}function Wg(l,u){var f=u,x=0;do{var j=f.nextSibling;if(l.removeChild(f),j&&j.nodeType===8)if(f=j.data,f==="/$"){if(x===0){l.removeChild(j),fa(u);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=j}while(f);fa(u)}function os(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function iS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),qa="__reactFiber$"+Rl,Pu="__reactProps$"+Rl,yi="__reactContainer$"+Rl,Hg="__reactEvents$"+Rl,a$="__reactListeners$"+Rl,i$="__reactHandles$"+Rl;function lo(l){var u=l[qa];if(u)return u;for(var f=l.parentNode;f;){if(u=f[yi]||f[qa]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=iS(l);l!==null;){if(f=l[qa])return f;l=iS(l)}return u}l=f,f=l.parentNode}return null}function Iu(l){return l=l[qa]||l[yi],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Dl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function Tf(l){return l[Pu]||null}var Gg=[],Ml=-1;function ls(l){return{current:l}}function Mt(l){0>Ml||(l.current=Gg[Ml],Gg[Ml]=null,Ml--)}function Pt(l,u){Ml++,Gg[Ml]=l.current,l.current=u}var cs={},Ur=ls(cs),pn=ls(!1),co=cs;function Ll(l,u){var f=l.type.contextTypes;if(!f)return cs;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var j={},I;for(I in f)j[I]=u[I];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=j),j}function gn(l){return l=l.childContextTypes,l!=null}function Af(){Mt(pn),Mt(Ur)}function sS(l,u,f){if(Ur.current!==cs)throw Error(r(168));Pt(Ur,u),Pt(pn,f)}function oS(l,u,f){var x=l.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var j in x)if(!(j in u))throw Error(r(108,me(l)||"Unknown",j));return ne({},f,x)}function Cf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||cs,co=Ur.current,Pt(Ur,l),Pt(pn,pn.current),!0}function lS(l,u,f){var x=l.stateNode;if(!x)throw Error(r(169));f?(l=oS(l,u,co),x.__reactInternalMemoizedMergedChildContext=l,Mt(pn),Mt(Ur),Pt(Ur,l)):Mt(pn),Pt(pn,f)}var xi=null,Pf=!1,Kg=!1;function cS(l){xi===null?xi=[l]:xi.push(l)}function s$(l){Pf=!0,cS(l)}function us(){if(!Kg&&xi!==null){Kg=!0;var l=0,u=lt;try{var f=xi;for(lt=1;l<f.length;l++){var x=f[l];do x=x(!0);while(x!==null)}xi=null,Pf=!1}catch(j){throw xi!==null&&(xi=xi.slice(l+1)),gl(eo,us),j}finally{lt=u,Kg=!1}}return null}var $l=[],Fl=0,If=null,Of=0,qn=[],zn=0,uo=null,vi=1,bi="";function ho(l,u){$l[Fl++]=Of,$l[Fl++]=If,If=l,Of=u}function uS(l,u,f){qn[zn++]=vi,qn[zn++]=bi,qn[zn++]=uo,uo=l;var x=vi;l=bi;var j=32-en(x)-1;x&=~(1<<j),f+=1;var I=32-en(u)+j;if(30<I){var U=j-j%5;I=(x&(1<<U)-1).toString(32),x>>=U,j-=U,vi=1<<32-en(u)+j|f<<j|x,bi=I+l}else vi=1<<I|f<<j|x,bi=l}function Qg(l){l.return!==null&&(ho(l,1),uS(l,1,0))}function Yg(l){for(;l===If;)If=$l[--Fl],$l[Fl]=null,Of=$l[--Fl],$l[Fl]=null;for(;l===uo;)uo=qn[--zn],qn[zn]=null,bi=qn[--zn],qn[zn]=null,vi=qn[--zn],qn[zn]=null}var Tn=null,An=null,Ut=!1,ga=null;function dS(l,u){var f=Kn(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=l,u=l.deletions,u===null?(l.deletions=[f],l.flags|=16):u.push(f)}function hS(l,u){switch(l.tag){case 5:var f=l.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,Tn=l,An=os(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,Tn=l,An=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=uo!==null?{id:vi,overflow:bi}:null,l.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=Kn(18,null,null,0),f.stateNode=u,f.return=l,l.child=f,Tn=l,An=null,!0):!1;default:return!1}}function Xg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Jg(l){if(Ut){var u=An;if(u){var f=u;if(!hS(l,u)){if(Xg(l))throw Error(r(418));u=os(f.nextSibling);var x=Tn;u&&hS(l,u)?dS(x,f):(l.flags=l.flags&-4097|2,Ut=!1,Tn=l)}}else{if(Xg(l))throw Error(r(418));l.flags=l.flags&-4097|2,Ut=!1,Tn=l}}}function fS(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Tn=l}function Rf(l){if(l!==Tn)return!1;if(!Ut)return fS(l),Ut=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!qg(l.type,l.memoizedProps)),u&&(u=An)){if(Xg(l))throw mS(),Error(r(418));for(;u;)dS(l,u),u=os(u.nextSibling)}if(fS(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"){if(u===0){An=os(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}l=l.nextSibling}An=null}}else An=Tn?os(l.stateNode.nextSibling):null;return!0}function mS(){for(var l=An;l;)l=os(l.nextSibling)}function Vl(){An=Tn=null,Ut=!1}function Zg(l){ga===null?ga=[l]:ga.push(l)}var o$=P.ReactCurrentBatchConfig;function Ou(l,u,f){if(l=f.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(r(309));var x=f.stateNode}if(!x)throw Error(r(147,l));var j=x,I=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===I?u.ref:(u=function(U){var H=j.refs;U===null?delete H[I]:H[I]=U},u._stringRef=I,u)}if(typeof l!="string")throw Error(r(284));if(!f._owner)throw Error(r(290,l))}return l}function Df(l,u){throw l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function pS(l){var u=l._init;return u(l._payload)}function gS(l){function u(se,re){if(l){var oe=se.deletions;oe===null?(se.deletions=[re],se.flags|=16):oe.push(re)}}function f(se,re){if(!l)return null;for(;re!==null;)u(se,re),re=re.sibling;return null}function x(se,re){for(se=new Map;re!==null;)re.key!==null?se.set(re.key,re):se.set(re.index,re),re=re.sibling;return se}function j(se,re){return se=xs(se,re),se.index=0,se.sibling=null,se}function I(se,re,oe){return se.index=oe,l?(oe=se.alternate,oe!==null?(oe=oe.index,oe<re?(se.flags|=2,re):oe):(se.flags|=2,re)):(se.flags|=1048576,re)}function U(se){return l&&se.alternate===null&&(se.flags|=2),se}function H(se,re,oe,Se){return re===null||re.tag!==6?(re=zy(oe,se.mode,Se),re.return=se,re):(re=j(re,oe),re.return=se,re)}function K(se,re,oe,Se){var Fe=oe.type;return Fe===T?ke(se,re,oe.props.children,Se,oe.key):re!==null&&(re.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===W&&pS(Fe)===re.type)?(Se=j(re,oe.props),Se.ref=Ou(se,re,oe),Se.return=se,Se):(Se=im(oe.type,oe.key,oe.props,null,se.mode,Se),Se.ref=Ou(se,re,oe),Se.return=se,Se)}function ue(se,re,oe,Se){return re===null||re.tag!==4||re.stateNode.containerInfo!==oe.containerInfo||re.stateNode.implementation!==oe.implementation?(re=Wy(oe,se.mode,Se),re.return=se,re):(re=j(re,oe.children||[]),re.return=se,re)}function ke(se,re,oe,Se,Fe){return re===null||re.tag!==7?(re=bo(oe,se.mode,Se,Fe),re.return=se,re):(re=j(re,oe),re.return=se,re)}function je(se,re,oe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=zy(""+re,se.mode,oe),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _:return oe=im(re.type,re.key,re.props,null,se.mode,oe),oe.ref=Ou(se,null,re),oe.return=se,oe;case O:return re=Wy(re,se.mode,oe),re.return=se,re;case W:var Se=re._init;return je(se,Se(re._payload),oe)}if(ye(re)||te(re))return re=bo(re,se.mode,oe,null),re.return=se,re;Df(se,re)}return null}function we(se,re,oe,Se){var Fe=re!==null?re.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Fe!==null?null:H(se,re,""+oe,Se);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case _:return oe.key===Fe?K(se,re,oe,Se):null;case O:return oe.key===Fe?ue(se,re,oe,Se):null;case W:return Fe=oe._init,we(se,re,Fe(oe._payload),Se)}if(ye(oe)||te(oe))return Fe!==null?null:ke(se,re,oe,Se,null);Df(se,oe)}return null}function Ce(se,re,oe,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return se=se.get(oe)||null,H(re,se,""+Se,Fe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case _:return se=se.get(Se.key===null?oe:Se.key)||null,K(re,se,Se,Fe);case O:return se=se.get(Se.key===null?oe:Se.key)||null,ue(re,se,Se,Fe);case W:var Ue=Se._init;return Ce(se,re,oe,Ue(Se._payload),Fe)}if(ye(Se)||te(Se))return se=se.get(oe)||null,ke(re,se,Se,Fe,null);Df(re,Se)}return null}function Me(se,re,oe,Se){for(var Fe=null,Ue=null,Be=re,Ge=re=0,jr=null;Be!==null&&Ge<oe.length;Ge++){Be.index>Ge?(jr=Be,Be=null):jr=Be.sibling;var pt=we(se,Be,oe[Ge],Se);if(pt===null){Be===null&&(Be=jr);break}l&&Be&&pt.alternate===null&&u(se,Be),re=I(pt,re,Ge),Ue===null?Fe=pt:Ue.sibling=pt,Ue=pt,Be=jr}if(Ge===oe.length)return f(se,Be),Ut&&ho(se,Ge),Fe;if(Be===null){for(;Ge<oe.length;Ge++)Be=je(se,oe[Ge],Se),Be!==null&&(re=I(Be,re,Ge),Ue===null?Fe=Be:Ue.sibling=Be,Ue=Be);return Ut&&ho(se,Ge),Fe}for(Be=x(se,Be);Ge<oe.length;Ge++)jr=Ce(Be,se,Ge,oe[Ge],Se),jr!==null&&(l&&jr.alternate!==null&&Be.delete(jr.key===null?Ge:jr.key),re=I(jr,re,Ge),Ue===null?Fe=jr:Ue.sibling=jr,Ue=jr);return l&&Be.forEach(function(vs){return u(se,vs)}),Ut&&ho(se,Ge),Fe}function Le(se,re,oe,Se){var Fe=te(oe);if(typeof Fe!="function")throw Error(r(150));if(oe=Fe.call(oe),oe==null)throw Error(r(151));for(var Ue=Fe=null,Be=re,Ge=re=0,jr=null,pt=oe.next();Be!==null&&!pt.done;Ge++,pt=oe.next()){Be.index>Ge?(jr=Be,Be=null):jr=Be.sibling;var vs=we(se,Be,pt.value,Se);if(vs===null){Be===null&&(Be=jr);break}l&&Be&&vs.alternate===null&&u(se,Be),re=I(vs,re,Ge),Ue===null?Fe=vs:Ue.sibling=vs,Ue=vs,Be=jr}if(pt.done)return f(se,Be),Ut&&ho(se,Ge),Fe;if(Be===null){for(;!pt.done;Ge++,pt=oe.next())pt=je(se,pt.value,Se),pt!==null&&(re=I(pt,re,Ge),Ue===null?Fe=pt:Ue.sibling=pt,Ue=pt);return Ut&&ho(se,Ge),Fe}for(Be=x(se,Be);!pt.done;Ge++,pt=oe.next())pt=Ce(Be,se,Ge,pt.value,Se),pt!==null&&(l&&pt.alternate!==null&&Be.delete(pt.key===null?Ge:pt.key),re=I(pt,re,Ge),Ue===null?Fe=pt:Ue.sibling=pt,Ue=pt);return l&&Be.forEach(function(V$){return u(se,V$)}),Ut&&ho(se,Ge),Fe}function rr(se,re,oe,Se){if(typeof oe=="object"&&oe!==null&&oe.type===T&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case _:e:{for(var Fe=oe.key,Ue=re;Ue!==null;){if(Ue.key===Fe){if(Fe=oe.type,Fe===T){if(Ue.tag===7){f(se,Ue.sibling),re=j(Ue,oe.props.children),re.return=se,se=re;break e}}else if(Ue.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===W&&pS(Fe)===Ue.type){f(se,Ue.sibling),re=j(Ue,oe.props),re.ref=Ou(se,Ue,oe),re.return=se,se=re;break e}f(se,Ue);break}else u(se,Ue);Ue=Ue.sibling}oe.type===T?(re=bo(oe.props.children,se.mode,Se,oe.key),re.return=se,se=re):(Se=im(oe.type,oe.key,oe.props,null,se.mode,Se),Se.ref=Ou(se,re,oe),Se.return=se,se=Se)}return U(se);case O:e:{for(Ue=oe.key;re!==null;){if(re.key===Ue)if(re.tag===4&&re.stateNode.containerInfo===oe.containerInfo&&re.stateNode.implementation===oe.implementation){f(se,re.sibling),re=j(re,oe.children||[]),re.return=se,se=re;break e}else{f(se,re);break}else u(se,re);re=re.sibling}re=Wy(oe,se.mode,Se),re.return=se,se=re}return U(se);case W:return Ue=oe._init,rr(se,re,Ue(oe._payload),Se)}if(ye(oe))return Me(se,re,oe,Se);if(te(oe))return Le(se,re,oe,Se);Df(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,re!==null&&re.tag===6?(f(se,re.sibling),re=j(re,oe),re.return=se,se=re):(f(se,re),re=zy(oe,se.mode,Se),re.return=se,se=re),U(se)):f(se,re)}return rr}var Ul=gS(!0),yS=gS(!1),Mf=ls(null),Lf=null,Bl=null,ey=null;function ty(){ey=Bl=Lf=null}function ry(l){var u=Mf.current;Mt(Mf),l._currentValue=u}function ny(l,u,f){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===f)break;l=l.return}}function ql(l,u){Lf=l,ey=Bl=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(yn=!0),l.firstContext=null)}function Wn(l){var u=l._currentValue;if(ey!==l)if(l={context:l,memoizedValue:u,next:null},Bl===null){if(Lf===null)throw Error(r(308));Bl=l,Lf.dependencies={lanes:0,firstContext:l}}else Bl=Bl.next=l;return u}var fo=null;function ay(l){fo===null?fo=[l]:fo.push(l)}function xS(l,u,f,x){var j=u.interleaved;return j===null?(f.next=f,ay(u)):(f.next=j.next,j.next=f),u.interleaved=f,wi(l,x)}function wi(l,u){l.lanes|=u;var f=l.alternate;for(f!==null&&(f.lanes|=u),f=l,l=l.return;l!==null;)l.childLanes|=u,f=l.alternate,f!==null&&(f.childLanes|=u),f=l,l=l.return;return f.tag===3?f.stateNode:null}var ds=!1;function iy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ki(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function hs(l,u,f){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(ft&2)!==0){var j=x.pending;return j===null?u.next=u:(u.next=j.next,j.next=u),x.pending=u,wi(l,f)}return j=x.interleaved,j===null?(u.next=u,ay(x)):(u.next=j.next,j.next=u),x.interleaved=u,wi(l,f)}function $f(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,ts(l,f)}}function bS(l,u){var f=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var j=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var U={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};I===null?j=I=U:I=I.next=U,f=f.next}while(f!==null);I===null?j=I=u:I=I.next=u}else j=I=u;f={baseState:x.baseState,firstBaseUpdate:j,lastBaseUpdate:I,shared:x.shared,effects:x.effects},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}function Ff(l,u,f,x){var j=l.updateQueue;ds=!1;var I=j.firstBaseUpdate,U=j.lastBaseUpdate,H=j.shared.pending;if(H!==null){j.shared.pending=null;var K=H,ue=K.next;K.next=null,U===null?I=ue:U.next=ue,U=K;var ke=l.alternate;ke!==null&&(ke=ke.updateQueue,H=ke.lastBaseUpdate,H!==U&&(H===null?ke.firstBaseUpdate=ue:H.next=ue,ke.lastBaseUpdate=K))}if(I!==null){var je=j.baseState;U=0,ke=ue=K=null,H=I;do{var we=H.lane,Ce=H.eventTime;if((x&we)===we){ke!==null&&(ke=ke.next={eventTime:Ce,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Me=l,Le=H;switch(we=u,Ce=f,Le.tag){case 1:if(Me=Le.payload,typeof Me=="function"){je=Me.call(Ce,je,we);break e}je=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Le.payload,we=typeof Me=="function"?Me.call(Ce,je,we):Me,we==null)break e;je=ne({},je,we);break e;case 2:ds=!0}}H.callback!==null&&H.lane!==0&&(l.flags|=64,we=j.effects,we===null?j.effects=[H]:we.push(H))}else Ce={eventTime:Ce,lane:we,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ke===null?(ue=ke=Ce,K=je):ke=ke.next=Ce,U|=we;if(H=H.next,H===null){if(H=j.shared.pending,H===null)break;we=H,H=we.next,we.next=null,j.lastBaseUpdate=we,j.shared.pending=null}}while(!0);if(ke===null&&(K=je),j.baseState=K,j.firstBaseUpdate=ue,j.lastBaseUpdate=ke,u=j.shared.interleaved,u!==null){j=u;do U|=j.lane,j=j.next;while(j!==u)}else I===null&&(j.shared.lanes=0);go|=U,l.lanes=U,l.memoizedState=je}}function wS(l,u,f){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var x=l[u],j=x.callback;if(j!==null){if(x.callback=null,x=f,typeof j!="function")throw Error(r(191,j));j.call(x)}}}var Ru={},za=ls(Ru),Du=ls(Ru),Mu=ls(Ru);function mo(l){if(l===Ru)throw Error(r(174));return l}function sy(l,u){switch(Pt(Mu,u),Pt(Du,l),Pt(za,Ru),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:jt(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=jt(u,l)}Mt(za),Pt(za,u)}function zl(){Mt(za),Mt(Du),Mt(Mu)}function kS(l){mo(Mu.current);var u=mo(za.current),f=jt(u,l.type);u!==f&&(Pt(Du,l),Pt(za,f))}function oy(l){Du.current===l&&(Mt(za),Mt(Du))}var Gt=ls(0);function Vf(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ly=[];function cy(){for(var l=0;l<ly.length;l++)ly[l]._workInProgressVersionPrimary=null;ly.length=0}var Uf=P.ReactCurrentDispatcher,uy=P.ReactCurrentBatchConfig,po=0,Kt=null,hr=null,kr=null,Bf=!1,Lu=!1,$u=0,l$=0;function Br(){throw Error(r(321))}function dy(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!pa(l[f],u[f]))return!1;return!0}function hy(l,u,f,x,j,I){if(po=I,Kt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Uf.current=l===null||l.memoizedState===null?h$:f$,l=f(x,j),Lu){I=0;do{if(Lu=!1,$u=0,25<=I)throw Error(r(301));I+=1,kr=hr=null,u.updateQueue=null,Uf.current=m$,l=f(x,j)}while(Lu)}if(Uf.current=Wf,u=hr!==null&&hr.next!==null,po=0,kr=hr=Kt=null,Bf=!1,u)throw Error(r(300));return l}function fy(){var l=$u!==0;return $u=0,l}function Wa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Kt.memoizedState=kr=l:kr=kr.next=l,kr}function Hn(){if(hr===null){var l=Kt.alternate;l=l!==null?l.memoizedState:null}else l=hr.next;var u=kr===null?Kt.memoizedState:kr.next;if(u!==null)kr=u,hr=l;else{if(l===null)throw Error(r(310));hr=l,l={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},kr===null?Kt.memoizedState=kr=l:kr=kr.next=l}return kr}function Fu(l,u){return typeof u=="function"?u(l):u}function my(l){var u=Hn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=hr,j=x.baseQueue,I=f.pending;if(I!==null){if(j!==null){var U=j.next;j.next=I.next,I.next=U}x.baseQueue=j=I,f.pending=null}if(j!==null){I=j.next,x=x.baseState;var H=U=null,K=null,ue=I;do{var ke=ue.lane;if((po&ke)===ke)K!==null&&(K=K.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),x=ue.hasEagerState?ue.eagerState:l(x,ue.action);else{var je={lane:ke,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};K===null?(H=K=je,U=x):K=K.next=je,Kt.lanes|=ke,go|=ke}ue=ue.next}while(ue!==null&&ue!==I);K===null?U=x:K.next=H,pa(x,u.memoizedState)||(yn=!0),u.memoizedState=x,u.baseState=U,u.baseQueue=K,f.lastRenderedState=x}if(l=f.interleaved,l!==null){j=l;do I=j.lane,Kt.lanes|=I,go|=I,j=j.next;while(j!==l)}else j===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function py(l){var u=Hn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=f.dispatch,j=f.pending,I=u.memoizedState;if(j!==null){f.pending=null;var U=j=j.next;do I=l(I,U.action),U=U.next;while(U!==j);pa(I,u.memoizedState)||(yn=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),f.lastRenderedState=I}return[I,x]}function _S(){}function jS(l,u){var f=Kt,x=Hn(),j=u(),I=!pa(x.memoizedState,j);if(I&&(x.memoizedState=j,yn=!0),x=x.queue,gy(ES.bind(null,f,x,l),[l]),x.getSnapshot!==u||I||kr!==null&&kr.memoizedState.tag&1){if(f.flags|=2048,Vu(9,SS.bind(null,f,x,j,u),void 0,null),_r===null)throw Error(r(349));(po&30)!==0||NS(f,u,j)}return j}function NS(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=Kt.updateQueue,u===null?(u={lastEffect:null,stores:null},Kt.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function SS(l,u,f,x){u.value=f,u.getSnapshot=x,TS(u)&&AS(l)}function ES(l,u,f){return f(function(){TS(u)&&AS(l)})}function TS(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!pa(l,f)}catch{return!0}}function AS(l){var u=wi(l,1);u!==null&&ba(u,l,1,-1)}function CS(l){var u=Wa();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:l},u.queue=l,l=l.dispatch=d$.bind(null,Kt,l),[u.memoizedState,l]}function Vu(l,u,f,x){return l={tag:l,create:u,destroy:f,deps:x,next:null},u=Kt.updateQueue,u===null?(u={lastEffect:null,stores:null},Kt.updateQueue=u,u.lastEffect=l.next=l):(f=u.lastEffect,f===null?u.lastEffect=l.next=l:(x=f.next,f.next=l,l.next=x,u.lastEffect=l)),l}function PS(){return Hn().memoizedState}function qf(l,u,f,x){var j=Wa();Kt.flags|=l,j.memoizedState=Vu(1|u,f,void 0,x===void 0?null:x)}function zf(l,u,f,x){var j=Hn();x=x===void 0?null:x;var I=void 0;if(hr!==null){var U=hr.memoizedState;if(I=U.destroy,x!==null&&dy(x,U.deps)){j.memoizedState=Vu(u,f,I,x);return}}Kt.flags|=l,j.memoizedState=Vu(1|u,f,I,x)}function IS(l,u){return qf(8390656,8,l,u)}function gy(l,u){return zf(2048,8,l,u)}function OS(l,u){return zf(4,2,l,u)}function RS(l,u){return zf(4,4,l,u)}function DS(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function MS(l,u,f){return f=f!=null?f.concat([l]):null,zf(4,4,DS.bind(null,u,l),f)}function yy(){}function LS(l,u){var f=Hn();u=u===void 0?null:u;var x=f.memoizedState;return x!==null&&u!==null&&dy(u,x[1])?x[0]:(f.memoizedState=[l,u],l)}function $S(l,u){var f=Hn();u=u===void 0?null:u;var x=f.memoizedState;return x!==null&&u!==null&&dy(u,x[1])?x[0]:(l=l(),f.memoizedState=[l,u],l)}function FS(l,u,f){return(po&21)===0?(l.baseState&&(l.baseState=!1,yn=!0),l.memoizedState=f):(pa(f,u)||(f=no(),Kt.lanes|=f,go|=f,l.baseState=!0),u)}function c$(l,u){var f=lt;lt=f!==0&&4>f?f:4,l(!0);var x=uy.transition;uy.transition={};try{l(!1),u()}finally{lt=f,uy.transition=x}}function VS(){return Hn().memoizedState}function u$(l,u,f){var x=gs(l);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},US(l))BS(u,f);else if(f=xS(l,u,f,x),f!==null){var j=nn();ba(f,l,x,j),qS(f,u,x)}}function d$(l,u,f){var x=gs(l),j={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(US(l))BS(u,j);else{var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var U=u.lastRenderedState,H=I(U,f);if(j.hasEagerState=!0,j.eagerState=H,pa(H,U)){var K=u.interleaved;K===null?(j.next=j,ay(u)):(j.next=K.next,K.next=j),u.interleaved=j;return}}catch{}finally{}f=xS(l,u,j,x),f!==null&&(j=nn(),ba(f,l,x,j),qS(f,u,x))}}function US(l){var u=l.alternate;return l===Kt||u!==null&&u===Kt}function BS(l,u){Lu=Bf=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function qS(l,u,f){if((f&4194240)!==0){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,ts(l,f)}}var Wf={readContext:Wn,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},h$={readContext:Wn,useCallback:function(l,u){return Wa().memoizedState=[l,u===void 0?null:u],l},useContext:Wn,useEffect:IS,useImperativeHandle:function(l,u,f){return f=f!=null?f.concat([l]):null,qf(4194308,4,DS.bind(null,u,l),f)},useLayoutEffect:function(l,u){return qf(4194308,4,l,u)},useInsertionEffect:function(l,u){return qf(4,2,l,u)},useMemo:function(l,u){var f=Wa();return u=u===void 0?null:u,l=l(),f.memoizedState=[l,u],l},useReducer:function(l,u,f){var x=Wa();return u=f!==void 0?f(u):u,x.memoizedState=x.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},x.queue=l,l=l.dispatch=u$.bind(null,Kt,l),[x.memoizedState,l]},useRef:function(l){var u=Wa();return l={current:l},u.memoizedState=l},useState:CS,useDebugValue:yy,useDeferredValue:function(l){return Wa().memoizedState=l},useTransition:function(){var l=CS(!1),u=l[0];return l=c$.bind(null,l[1]),Wa().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,f){var x=Kt,j=Wa();if(Ut){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),_r===null)throw Error(r(349));(po&30)!==0||NS(x,u,f)}j.memoizedState=f;var I={value:f,getSnapshot:u};return j.queue=I,IS(ES.bind(null,x,I,l),[l]),x.flags|=2048,Vu(9,SS.bind(null,x,I,f,u),void 0,null),f},useId:function(){var l=Wa(),u=_r.identifierPrefix;if(Ut){var f=bi,x=vi;f=(x&~(1<<32-en(x)-1)).toString(32)+f,u=":"+u+"R"+f,f=$u++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=l$++,u=":"+u+"r"+f.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},f$={readContext:Wn,useCallback:LS,useContext:Wn,useEffect:gy,useImperativeHandle:MS,useInsertionEffect:OS,useLayoutEffect:RS,useMemo:$S,useReducer:my,useRef:PS,useState:function(){return my(Fu)},useDebugValue:yy,useDeferredValue:function(l){var u=Hn();return FS(u,hr.memoizedState,l)},useTransition:function(){var l=my(Fu)[0],u=Hn().memoizedState;return[l,u]},useMutableSource:_S,useSyncExternalStore:jS,useId:VS,unstable_isNewReconciler:!1},m$={readContext:Wn,useCallback:LS,useContext:Wn,useEffect:gy,useImperativeHandle:MS,useInsertionEffect:OS,useLayoutEffect:RS,useMemo:$S,useReducer:py,useRef:PS,useState:function(){return py(Fu)},useDebugValue:yy,useDeferredValue:function(l){var u=Hn();return hr===null?u.memoizedState=l:FS(u,hr.memoizedState,l)},useTransition:function(){var l=py(Fu)[0],u=Hn().memoizedState;return[l,u]},useMutableSource:_S,useSyncExternalStore:jS,useId:VS,unstable_isNewReconciler:!1};function ya(l,u){if(l&&l.defaultProps){u=ne({},u),l=l.defaultProps;for(var f in l)u[f]===void 0&&(u[f]=l[f]);return u}return u}function xy(l,u,f,x){u=l.memoizedState,f=f(x,u),f=f==null?u:ne({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var Hf={isMounted:function(l){return(l=l._reactInternals)?la(l)===l:!1},enqueueSetState:function(l,u,f){l=l._reactInternals;var x=nn(),j=gs(l),I=ki(x,j);I.payload=u,f!=null&&(I.callback=f),u=hs(l,I,j),u!==null&&(ba(u,l,j,x),$f(u,l,j))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var x=nn(),j=gs(l),I=ki(x,j);I.tag=1,I.payload=u,f!=null&&(I.callback=f),u=hs(l,I,j),u!==null&&(ba(u,l,j,x),$f(u,l,j))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=nn(),x=gs(l),j=ki(f,x);j.tag=2,u!=null&&(j.callback=u),u=hs(l,j,x),u!==null&&(ba(u,l,x,f),$f(u,l,x))}};function zS(l,u,f,x,j,I,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,I,U):u.prototype&&u.prototype.isPureReactComponent?!Su(f,x)||!Su(j,I):!0}function WS(l,u,f){var x=!1,j=cs,I=u.contextType;return typeof I=="object"&&I!==null?I=Wn(I):(j=gn(u)?co:Ur.current,x=u.contextTypes,I=(x=x!=null)?Ll(l,j):cs),u=new u(f,I),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Hf,l.stateNode=u,u._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=j,l.__reactInternalMemoizedMaskedChildContext=I),u}function HS(l,u,f,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,x),u.state!==l&&Hf.enqueueReplaceState(u,u.state,null)}function vy(l,u,f,x){var j=l.stateNode;j.props=f,j.state=l.memoizedState,j.refs={},iy(l);var I=u.contextType;typeof I=="object"&&I!==null?j.context=Wn(I):(I=gn(u)?co:Ur.current,j.context=Ll(l,I)),j.state=l.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(xy(l,u,I,f),j.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(u=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),u!==j.state&&Hf.enqueueReplaceState(j,j.state,null),Ff(l,f,j,x),j.state=l.memoizedState),typeof j.componentDidMount=="function"&&(l.flags|=4194308)}function Wl(l,u){try{var f="",x=u;do f+=fe(x),x=x.return;while(x);var j=f}catch(I){j=`
Error generating stack: `+I.message+`
`+I.stack}return{value:l,source:u,stack:j,digest:null}}function by(l,u,f){return{value:l,source:null,stack:f??null,digest:u??null}}function wy(l,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var p$=typeof WeakMap=="function"?WeakMap:Map;function GS(l,u,f){f=ki(-1,f),f.tag=3,f.payload={element:null};var x=u.value;return f.callback=function(){Zf||(Zf=!0,My=x),wy(l,u)},f}function KS(l,u,f){f=ki(-1,f),f.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var j=u.value;f.payload=function(){return x(j)},f.callback=function(){wy(l,u)}}var I=l.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(f.callback=function(){wy(l,u),typeof x!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})}),f}function QS(l,u,f){var x=l.pingCache;if(x===null){x=l.pingCache=new p$;var j=new Set;x.set(u,j)}else j=x.get(u),j===void 0&&(j=new Set,x.set(u,j));j.has(f)||(j.add(f),l=A$.bind(null,l,u,f),u.then(l,l))}function YS(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function XS(l,u,f,x,j){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=ki(-1,1),u.tag=2,hs(f,u,1))),f.lanes|=1),l):(l.flags|=65536,l.lanes=j,l)}var g$=P.ReactCurrentOwner,yn=!1;function rn(l,u,f,x){u.child=l===null?yS(u,null,f,x):Ul(u,l.child,f,x)}function JS(l,u,f,x,j){f=f.render;var I=u.ref;return ql(u,j),x=hy(l,u,f,x,I,j),f=fy(),l!==null&&!yn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~j,_i(l,u,j)):(Ut&&f&&Qg(u),u.flags|=1,rn(l,u,x,j),u.child)}function ZS(l,u,f,x,j){if(l===null){var I=f.type;return typeof I=="function"&&!qy(I)&&I.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=I,eE(l,u,I,x,j)):(l=im(f.type,null,x,u,u.mode,j),l.ref=u.ref,l.return=u,u.child=l)}if(I=l.child,(l.lanes&j)===0){var U=I.memoizedProps;if(f=f.compare,f=f!==null?f:Su,f(U,x)&&l.ref===u.ref)return _i(l,u,j)}return u.flags|=1,l=xs(I,x),l.ref=u.ref,l.return=u,u.child=l}function eE(l,u,f,x,j){if(l!==null){var I=l.memoizedProps;if(Su(I,x)&&l.ref===u.ref)if(yn=!1,u.pendingProps=x=I,(l.lanes&j)!==0)(l.flags&131072)!==0&&(yn=!0);else return u.lanes=l.lanes,_i(l,u,j)}return ky(l,u,f,x,j)}function tE(l,u,f){var x=u.pendingProps,j=x.children,I=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Gl,Cn),Cn|=f;else{if((f&1073741824)===0)return l=I!==null?I.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Pt(Gl,Cn),Cn|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=I!==null?I.baseLanes:f,Pt(Gl,Cn),Cn|=x}else I!==null?(x=I.baseLanes|f,u.memoizedState=null):x=f,Pt(Gl,Cn),Cn|=x;return rn(l,u,j,f),u.child}function rE(l,u){var f=u.ref;(l===null&&f!==null||l!==null&&l.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function ky(l,u,f,x,j){var I=gn(f)?co:Ur.current;return I=Ll(u,I),ql(u,j),f=hy(l,u,f,x,I,j),x=fy(),l!==null&&!yn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~j,_i(l,u,j)):(Ut&&x&&Qg(u),u.flags|=1,rn(l,u,f,j),u.child)}function nE(l,u,f,x,j){if(gn(f)){var I=!0;Cf(u)}else I=!1;if(ql(u,j),u.stateNode===null)Kf(l,u),WS(u,f,x),vy(u,f,x,j),x=!0;else if(l===null){var U=u.stateNode,H=u.memoizedProps;U.props=H;var K=U.context,ue=f.contextType;typeof ue=="object"&&ue!==null?ue=Wn(ue):(ue=gn(f)?co:Ur.current,ue=Ll(u,ue));var ke=f.getDerivedStateFromProps,je=typeof ke=="function"||typeof U.getSnapshotBeforeUpdate=="function";je||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(H!==x||K!==ue)&&HS(u,U,x,ue),ds=!1;var we=u.memoizedState;U.state=we,Ff(u,x,U,j),K=u.memoizedState,H!==x||we!==K||pn.current||ds?(typeof ke=="function"&&(xy(u,f,ke,x),K=u.memoizedState),(H=ds||zS(u,f,H,x,we,K,ue))?(je||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(u.flags|=4194308)):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=K),U.props=x,U.state=K,U.context=ue,x=H):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{U=u.stateNode,vS(l,u),H=u.memoizedProps,ue=u.type===u.elementType?H:ya(u.type,H),U.props=ue,je=u.pendingProps,we=U.context,K=f.contextType,typeof K=="object"&&K!==null?K=Wn(K):(K=gn(f)?co:Ur.current,K=Ll(u,K));var Ce=f.getDerivedStateFromProps;(ke=typeof Ce=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(H!==je||we!==K)&&HS(u,U,x,K),ds=!1,we=u.memoizedState,U.state=we,Ff(u,x,U,j);var Me=u.memoizedState;H!==je||we!==Me||pn.current||ds?(typeof Ce=="function"&&(xy(u,f,Ce,x),Me=u.memoizedState),(ue=ds||zS(u,f,ue,x,we,Me,K)||!1)?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,Me,K),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,Me,K)),typeof U.componentDidUpdate=="function"&&(u.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof U.componentDidUpdate!="function"||H===l.memoizedProps&&we===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&we===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=Me),U.props=x,U.state=Me,U.context=K,x=ue):(typeof U.componentDidUpdate!="function"||H===l.memoizedProps&&we===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&we===l.memoizedState||(u.flags|=1024),x=!1)}return _y(l,u,f,x,I,j)}function _y(l,u,f,x,j,I){rE(l,u);var U=(u.flags&128)!==0;if(!x&&!U)return j&&lS(u,f,!1),_i(l,u,I);x=u.stateNode,g$.current=u;var H=U&&typeof f.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,l!==null&&U?(u.child=Ul(u,l.child,null,I),u.child=Ul(u,null,H,I)):rn(l,u,H,I),u.memoizedState=x.state,j&&lS(u,f,!0),u.child}function aE(l){var u=l.stateNode;u.pendingContext?sS(l,u.pendingContext,u.pendingContext!==u.context):u.context&&sS(l,u.context,!1),sy(l,u.containerInfo)}function iE(l,u,f,x,j){return Vl(),Zg(j),u.flags|=256,rn(l,u,f,x),u.child}var jy={dehydrated:null,treeContext:null,retryLane:0};function Ny(l){return{baseLanes:l,cachePool:null,transitions:null}}function sE(l,u,f){var x=u.pendingProps,j=Gt.current,I=!1,U=(u.flags&128)!==0,H;if((H=U)||(H=l!==null&&l.memoizedState===null?!1:(j&2)!==0),H?(I=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(j|=1),Pt(Gt,j&1),l===null)return Jg(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(U=x.children,l=x.fallback,I?(x=u.mode,I=u.child,U={mode:"hidden",children:U},(x&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=U):I=sm(U,x,0,null),l=bo(l,x,f,null),I.return=u,l.return=u,I.sibling=l,u.child=I,u.child.memoizedState=Ny(f),u.memoizedState=jy,l):Sy(u,U));if(j=l.memoizedState,j!==null&&(H=j.dehydrated,H!==null))return y$(l,u,U,x,H,j,f);if(I){I=x.fallback,U=u.mode,j=l.child,H=j.sibling;var K={mode:"hidden",children:x.children};return(U&1)===0&&u.child!==j?(x=u.child,x.childLanes=0,x.pendingProps=K,u.deletions=null):(x=xs(j,K),x.subtreeFlags=j.subtreeFlags&14680064),H!==null?I=xs(H,I):(I=bo(I,U,f,null),I.flags|=2),I.return=u,x.return=u,x.sibling=I,u.child=x,x=I,I=u.child,U=l.child.memoizedState,U=U===null?Ny(f):{baseLanes:U.baseLanes|f,cachePool:null,transitions:U.transitions},I.memoizedState=U,I.childLanes=l.childLanes&~f,u.memoizedState=jy,x}return I=l.child,l=I.sibling,x=xs(I,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=f),x.return=u,x.sibling=null,l!==null&&(f=u.deletions,f===null?(u.deletions=[l],u.flags|=16):f.push(l)),u.child=x,u.memoizedState=null,x}function Sy(l,u){return u=sm({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Gf(l,u,f,x){return x!==null&&Zg(x),Ul(u,l.child,null,f),l=Sy(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function y$(l,u,f,x,j,I,U){if(f)return u.flags&256?(u.flags&=-257,x=by(Error(r(422))),Gf(l,u,U,x)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(I=x.fallback,j=u.mode,x=sm({mode:"visible",children:x.children},j,0,null),I=bo(I,j,U,null),I.flags|=2,x.return=u,I.return=u,x.sibling=I,u.child=x,(u.mode&1)!==0&&Ul(u,l.child,null,U),u.child.memoizedState=Ny(U),u.memoizedState=jy,I);if((u.mode&1)===0)return Gf(l,u,U,null);if(j.data==="$!"){if(x=j.nextSibling&&j.nextSibling.dataset,x)var H=x.dgst;return x=H,I=Error(r(419)),x=by(I,x,void 0),Gf(l,u,U,x)}if(H=(U&l.childLanes)!==0,yn||H){if(x=_r,x!==null){switch(U&-U){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(x.suspendedLanes|U))!==0?0:j,j!==0&&j!==I.retryLane&&(I.retryLane=j,wi(l,j),ba(x,l,j,-1))}return By(),x=by(Error(r(421))),Gf(l,u,U,x)}return j.data==="$?"?(u.flags|=128,u.child=l.child,u=C$.bind(null,l),j._reactRetry=u,null):(l=I.treeContext,An=os(j.nextSibling),Tn=u,Ut=!0,ga=null,l!==null&&(qn[zn++]=vi,qn[zn++]=bi,qn[zn++]=uo,vi=l.id,bi=l.overflow,uo=u),u=Sy(u,x.children),u.flags|=4096,u)}function oE(l,u,f){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),ny(l.return,u,f)}function Ey(l,u,f,x,j){var I=l.memoizedState;I===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:j}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=f,I.tailMode=j)}function lE(l,u,f){var x=u.pendingProps,j=x.revealOrder,I=x.tail;if(rn(l,u,x.children,f),x=Gt.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&oE(l,f,u);else if(l.tag===19)oE(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(Pt(Gt,x),(u.mode&1)===0)u.memoizedState=null;else switch(j){case"forwards":for(f=u.child,j=null;f!==null;)l=f.alternate,l!==null&&Vf(l)===null&&(j=f),f=f.sibling;f=j,f===null?(j=u.child,u.child=null):(j=f.sibling,f.sibling=null),Ey(u,!1,j,f,I);break;case"backwards":for(f=null,j=u.child,u.child=null;j!==null;){if(l=j.alternate,l!==null&&Vf(l)===null){u.child=j;break}l=j.sibling,j.sibling=f,f=j,j=l}Ey(u,!0,f,null,I);break;case"together":Ey(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Kf(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function _i(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),go|=u.lanes,(f&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,f=xs(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=xs(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function x$(l,u,f){switch(u.tag){case 3:aE(u),Vl();break;case 5:kS(u);break;case 1:gn(u.type)&&Cf(u);break;case 4:sy(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,j=u.memoizedProps.value;Pt(Mf,x._currentValue),x._currentValue=j;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(Pt(Gt,Gt.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?sE(l,u,f):(Pt(Gt,Gt.current&1),l=_i(l,u,f),l!==null?l.sibling:null);Pt(Gt,Gt.current&1);break;case 19:if(x=(f&u.childLanes)!==0,(l.flags&128)!==0){if(x)return lE(l,u,f);u.flags|=128}if(j=u.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Pt(Gt,Gt.current),x)break;return null;case 22:case 23:return u.lanes=0,tE(l,u,f)}return _i(l,u,f)}var cE,Ty,uE,dE;cE=function(l,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Ty=function(){},uE=function(l,u,f,x){var j=l.memoizedProps;if(j!==x){l=u.stateNode,mo(za.current);var I=null;switch(f){case"input":j=Ae(l,j),x=Ae(l,x),I=[];break;case"select":j=ne({},j,{value:void 0}),x=ne({},x,{value:void 0}),I=[];break;case"textarea":j=rt(l,j),x=rt(l,x),I=[];break;default:typeof j.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=Ef)}br(f,x);var U;f=null;for(ue in j)if(!x.hasOwnProperty(ue)&&j.hasOwnProperty(ue)&&j[ue]!=null)if(ue==="style"){var H=j[ue];for(U in H)H.hasOwnProperty(U)&&(f||(f={}),f[U]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(a.hasOwnProperty(ue)?I||(I=[]):(I=I||[]).push(ue,null));for(ue in x){var K=x[ue];if(H=j?.[ue],x.hasOwnProperty(ue)&&K!==H&&(K!=null||H!=null))if(ue==="style")if(H){for(U in H)!H.hasOwnProperty(U)||K&&K.hasOwnProperty(U)||(f||(f={}),f[U]="");for(U in K)K.hasOwnProperty(U)&&H[U]!==K[U]&&(f||(f={}),f[U]=K[U])}else f||(I||(I=[]),I.push(ue,f)),f=K;else ue==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,H=H?H.__html:void 0,K!=null&&H!==K&&(I=I||[]).push(ue,K)):ue==="children"?typeof K!="string"&&typeof K!="number"||(I=I||[]).push(ue,""+K):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(a.hasOwnProperty(ue)?(K!=null&&ue==="onScroll"&&Dt("scroll",l),I||H===K||(I=[])):(I=I||[]).push(ue,K))}f&&(I=I||[]).push("style",f);var ue=I;(u.updateQueue=ue)&&(u.flags|=4)}},dE=function(l,u,f,x){f!==x&&(u.flags|=4)};function Uu(l,u){if(!Ut)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function qr(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,x=0;if(u)for(var j=l.child;j!==null;)f|=j.lanes|j.childLanes,x|=j.subtreeFlags&14680064,x|=j.flags&14680064,j.return=l,j=j.sibling;else for(j=l.child;j!==null;)f|=j.lanes|j.childLanes,x|=j.subtreeFlags,x|=j.flags,j.return=l,j=j.sibling;return l.subtreeFlags|=x,l.childLanes=f,u}function v$(l,u,f){var x=u.pendingProps;switch(Yg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(u),null;case 1:return gn(u.type)&&Af(),qr(u),null;case 3:return x=u.stateNode,zl(),Mt(pn),Mt(Ur),cy(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(Rf(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ga!==null&&(Fy(ga),ga=null))),Ty(l,u),qr(u),null;case 5:oy(u);var j=mo(Mu.current);if(f=u.type,l!==null&&u.stateNode!=null)uE(l,u,f,x,j),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(r(166));return qr(u),null}if(l=mo(za.current),Rf(u)){x=u.stateNode,f=u.type;var I=u.memoizedProps;switch(x[qa]=u,x[Pu]=I,l=(u.mode&1)!==0,f){case"dialog":Dt("cancel",x),Dt("close",x);break;case"iframe":case"object":case"embed":Dt("load",x);break;case"video":case"audio":for(j=0;j<Tu.length;j++)Dt(Tu[j],x);break;case"source":Dt("error",x);break;case"img":case"image":case"link":Dt("error",x),Dt("load",x);break;case"details":Dt("toggle",x);break;case"input":et(x,I),Dt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!I.multiple},Dt("invalid",x);break;case"textarea":Cr(x,I),Dt("invalid",x)}br(f,I),j=null;for(var U in I)if(I.hasOwnProperty(U)){var H=I[U];U==="children"?typeof H=="string"?x.textContent!==H&&(I.suppressHydrationWarning!==!0&&Sf(x.textContent,H,l),j=["children",H]):typeof H=="number"&&x.textContent!==""+H&&(I.suppressHydrationWarning!==!0&&Sf(x.textContent,H,l),j=["children",""+H]):a.hasOwnProperty(U)&&H!=null&&U==="onScroll"&&Dt("scroll",x)}switch(f){case"input":ge(x),ar(x,I,!0);break;case"textarea":ge(x),hn(x);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(x.onclick=Ef)}x=j,u.updateQueue=x,x!==null&&(u.flags|=4)}else{U=j.nodeType===9?j:j.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=zt(f)),l==="http://www.w3.org/1999/xhtml"?f==="script"?(l=U.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=U.createElement(f,{is:x.is}):(l=U.createElement(f),f==="select"&&(U=l,x.multiple?U.multiple=!0:x.size&&(U.size=x.size))):l=U.createElementNS(l,f),l[qa]=u,l[Pu]=x,cE(l,u,!1,!1),u.stateNode=l;e:{switch(U=Ht(f,x),f){case"dialog":Dt("cancel",l),Dt("close",l),j=x;break;case"iframe":case"object":case"embed":Dt("load",l),j=x;break;case"video":case"audio":for(j=0;j<Tu.length;j++)Dt(Tu[j],l);j=x;break;case"source":Dt("error",l),j=x;break;case"img":case"image":case"link":Dt("error",l),Dt("load",l),j=x;break;case"details":Dt("toggle",l),j=x;break;case"input":et(l,x),j=Ae(l,x),Dt("invalid",l);break;case"option":j=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},j=ne({},x,{value:void 0}),Dt("invalid",l);break;case"textarea":Cr(l,x),j=rt(l,x),Dt("invalid",l);break;default:j=x}br(f,j),H=j;for(I in H)if(H.hasOwnProperty(I)){var K=H[I];I==="style"?nt(l,K):I==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Qs(l,K)):I==="children"?typeof K=="string"?(f!=="textarea"||K!=="")&&Da(l,K):typeof K=="number"&&Da(l,""+K):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?K!=null&&I==="onScroll"&&Dt("scroll",l):K!=null&&E(l,I,K,U))}switch(f){case"input":ge(l),ar(l,x,!1);break;case"textarea":ge(l),hn(l);break;case"option":x.value!=null&&l.setAttribute("value",""+xe(x.value));break;case"select":l.multiple=!!x.multiple,I=x.value,I!=null?Pe(l,!!x.multiple,I,!1):x.defaultValue!=null&&Pe(l,!!x.multiple,x.defaultValue,!0);break;default:typeof j.onClick=="function"&&(l.onclick=Ef)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return qr(u),null;case 6:if(l&&u.stateNode!=null)dE(l,u,l.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(r(166));if(f=mo(Mu.current),mo(za.current),Rf(u)){if(x=u.stateNode,f=u.memoizedProps,x[qa]=u,(I=x.nodeValue!==f)&&(l=Tn,l!==null))switch(l.tag){case 3:Sf(x.nodeValue,f,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Sf(x.nodeValue,f,(l.mode&1)!==0)}I&&(u.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[qa]=u,u.stateNode=x}return qr(u),null;case 13:if(Mt(Gt),x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Ut&&An!==null&&(u.mode&1)!==0&&(u.flags&128)===0)mS(),Vl(),u.flags|=98560,I=!1;else if(I=Rf(u),x!==null&&x.dehydrated!==null){if(l===null){if(!I)throw Error(r(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[qa]=u}else Vl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qr(u),I=!1}else ga!==null&&(Fy(ga),ga=null),I=!0;if(!I)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Gt.current&1)!==0?fr===0&&(fr=3):By())),u.updateQueue!==null&&(u.flags|=4),qr(u),null);case 4:return zl(),Ty(l,u),l===null&&Au(u.stateNode.containerInfo),qr(u),null;case 10:return ry(u.type._context),qr(u),null;case 17:return gn(u.type)&&Af(),qr(u),null;case 19:if(Mt(Gt),I=u.memoizedState,I===null)return qr(u),null;if(x=(u.flags&128)!==0,U=I.rendering,U===null)if(x)Uu(I,!1);else{if(fr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(U=Vf(l),U!==null){for(u.flags|=128,Uu(I,!1),x=U.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=f,f=u.child;f!==null;)I=f,l=x,I.flags&=14680066,U=I.alternate,U===null?(I.childLanes=0,I.lanes=l,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=U.childLanes,I.lanes=U.lanes,I.child=U.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=U.memoizedProps,I.memoizedState=U.memoizedState,I.updateQueue=U.updateQueue,I.type=U.type,l=U.dependencies,I.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),f=f.sibling;return Pt(Gt,Gt.current&1|2),u.child}l=l.sibling}I.tail!==null&&Ct()>Kl&&(u.flags|=128,x=!0,Uu(I,!1),u.lanes=4194304)}else{if(!x)if(l=Vf(U),l!==null){if(u.flags|=128,x=!0,f=l.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),Uu(I,!0),I.tail===null&&I.tailMode==="hidden"&&!U.alternate&&!Ut)return qr(u),null}else 2*Ct()-I.renderingStartTime>Kl&&f!==1073741824&&(u.flags|=128,x=!0,Uu(I,!1),u.lanes=4194304);I.isBackwards?(U.sibling=u.child,u.child=U):(f=I.last,f!==null?f.sibling=U:u.child=U,I.last=U)}return I.tail!==null?(u=I.tail,I.rendering=u,I.tail=u.sibling,I.renderingStartTime=Ct(),u.sibling=null,f=Gt.current,Pt(Gt,x?f&1|2:f&1),u):(qr(u),null);case 22:case 23:return Uy(),x=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(Cn&1073741824)!==0&&(qr(u),u.subtreeFlags&6&&(u.flags|=8192)):qr(u),null;case 24:return null;case 25:return null}throw Error(r(156,u.tag))}function b$(l,u){switch(Yg(u),u.tag){case 1:return gn(u.type)&&Af(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return zl(),Mt(pn),Mt(Ur),cy(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return oy(u),null;case 13:if(Mt(Gt),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Vl()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Mt(Gt),null;case 4:return zl(),null;case 10:return ry(u.type._context),null;case 22:case 23:return Uy(),null;case 24:return null;default:return null}}var Qf=!1,zr=!1,w$=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Hl(l,u){var f=l.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Yt(l,u,x)}else f.current=null}function Ay(l,u,f){try{f()}catch(x){Yt(l,u,x)}}var hE=!1;function k$(l,u){if(Ug=as,l=zN(),Og(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var j=x.anchorOffset,I=x.focusNode;x=x.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break e}var U=0,H=-1,K=-1,ue=0,ke=0,je=l,we=null;t:for(;;){for(var Ce;je!==f||j!==0&&je.nodeType!==3||(H=U+j),je!==I||x!==0&&je.nodeType!==3||(K=U+x),je.nodeType===3&&(U+=je.nodeValue.length),(Ce=je.firstChild)!==null;)we=je,je=Ce;for(;;){if(je===l)break t;if(we===f&&++ue===j&&(H=U),we===I&&++ke===x&&(K=U),(Ce=je.nextSibling)!==null)break;je=we,we=je.parentNode}je=Ce}f=H===-1||K===-1?null:{start:H,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(Bg={focusedElem:l,selectionRange:f},as=!1,Oe=u;Oe!==null;)if(u=Oe,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Oe=l;else for(;Oe!==null;){u=Oe;try{var Me=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Le=Me.memoizedProps,rr=Me.memoizedState,se=u.stateNode,re=se.getSnapshotBeforeUpdate(u.elementType===u.type?Le:ya(u.type,Le),rr);se.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var oe=u.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Se){Yt(u,u.return,Se)}if(l=u.sibling,l!==null){l.return=u.return,Oe=l;break}Oe=u.return}return Me=hE,hE=!1,Me}function Bu(l,u,f){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var j=x=x.next;do{if((j.tag&l)===l){var I=j.destroy;j.destroy=void 0,I!==void 0&&Ay(u,f,I)}j=j.next}while(j!==x)}}function Yf(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&l)===l){var x=f.create;f.destroy=x()}f=f.next}while(f!==u)}}function Cy(l){var u=l.ref;if(u!==null){var f=l.stateNode;switch(l.tag){case 5:l=f;break;default:l=f}typeof u=="function"?u(l):u.current=l}}function fE(l){var u=l.alternate;u!==null&&(l.alternate=null,fE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[qa],delete u[Pu],delete u[Hg],delete u[a$],delete u[i$])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function mE(l){return l.tag===5||l.tag===3||l.tag===4}function pE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||mE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Py(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(l,u):f.insertBefore(l,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(l,f)):(u=f,u.appendChild(l)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Ef));else if(x!==4&&(l=l.child,l!==null))for(Py(l,u,f),l=l.sibling;l!==null;)Py(l,u,f),l=l.sibling}function Iy(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(Iy(l,u,f),l=l.sibling;l!==null;)Iy(l,u,f),l=l.sibling}var Or=null,xa=!1;function fs(l,u,f){for(f=f.child;f!==null;)gE(l,u,f),f=f.sibling}function gE(l,u,f){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(to,f)}catch{}switch(f.tag){case 5:zr||Hl(f,u);case 6:var x=Or,j=xa;Or=null,fs(l,u,f),Or=x,xa=j,Or!==null&&(xa?(l=Or,f=f.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):Or.removeChild(f.stateNode));break;case 18:Or!==null&&(xa?(l=Or,f=f.stateNode,l.nodeType===8?Wg(l.parentNode,f):l.nodeType===1&&Wg(l,f),fa(l)):Wg(Or,f.stateNode));break;case 4:x=Or,j=xa,Or=f.stateNode.containerInfo,xa=!0,fs(l,u,f),Or=x,xa=j;break;case 0:case 11:case 14:case 15:if(!zr&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){j=x=x.next;do{var I=j,U=I.destroy;I=I.tag,U!==void 0&&((I&2)!==0||(I&4)!==0)&&Ay(f,u,U),j=j.next}while(j!==x)}fs(l,u,f);break;case 1:if(!zr&&(Hl(f,u),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(H){Yt(f,u,H)}fs(l,u,f);break;case 21:fs(l,u,f);break;case 22:f.mode&1?(zr=(x=zr)||f.memoizedState!==null,fs(l,u,f),zr=x):fs(l,u,f);break;default:fs(l,u,f)}}function yE(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var f=l.stateNode;f===null&&(f=l.stateNode=new w$),u.forEach(function(x){var j=P$.bind(null,l,x);f.has(x)||(f.add(x),x.then(j,j))})}}function va(l,u){var f=u.deletions;if(f!==null)for(var x=0;x<f.length;x++){var j=f[x];try{var I=l,U=u,H=U;e:for(;H!==null;){switch(H.tag){case 5:Or=H.stateNode,xa=!1;break e;case 3:Or=H.stateNode.containerInfo,xa=!0;break e;case 4:Or=H.stateNode.containerInfo,xa=!0;break e}H=H.return}if(Or===null)throw Error(r(160));gE(I,U,j),Or=null,xa=!1;var K=j.alternate;K!==null&&(K.return=null),j.return=null}catch(ue){Yt(j,u,ue)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)xE(u,l),u=u.sibling}function xE(l,u){var f=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(va(u,l),Ha(l),x&4){try{Bu(3,l,l.return),Yf(3,l)}catch(Le){Yt(l,l.return,Le)}try{Bu(5,l,l.return)}catch(Le){Yt(l,l.return,Le)}}break;case 1:va(u,l),Ha(l),x&512&&f!==null&&Hl(f,f.return);break;case 5:if(va(u,l),Ha(l),x&512&&f!==null&&Hl(f,f.return),l.flags&32){var j=l.stateNode;try{Da(j,"")}catch(Le){Yt(l,l.return,Le)}}if(x&4&&(j=l.stateNode,j!=null)){var I=l.memoizedProps,U=f!==null?f.memoizedProps:I,H=l.type,K=l.updateQueue;if(l.updateQueue=null,K!==null)try{H==="input"&&I.type==="radio"&&I.name!=null&&tt(j,I),Ht(H,U);var ue=Ht(H,I);for(U=0;U<K.length;U+=2){var ke=K[U],je=K[U+1];ke==="style"?nt(j,je):ke==="dangerouslySetInnerHTML"?Qs(j,je):ke==="children"?Da(j,je):E(j,ke,je,ue)}switch(H){case"input":St(j,I);break;case"textarea":Et(j,I);break;case"select":var we=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!I.multiple;var Ce=I.value;Ce!=null?Pe(j,!!I.multiple,Ce,!1):we!==!!I.multiple&&(I.defaultValue!=null?Pe(j,!!I.multiple,I.defaultValue,!0):Pe(j,!!I.multiple,I.multiple?[]:"",!1))}j[Pu]=I}catch(Le){Yt(l,l.return,Le)}}break;case 6:if(va(u,l),Ha(l),x&4){if(l.stateNode===null)throw Error(r(162));j=l.stateNode,I=l.memoizedProps;try{j.nodeValue=I}catch(Le){Yt(l,l.return,Le)}}break;case 3:if(va(u,l),Ha(l),x&4&&f!==null&&f.memoizedState.isDehydrated)try{fa(u.containerInfo)}catch(Le){Yt(l,l.return,Le)}break;case 4:va(u,l),Ha(l);break;case 13:va(u,l),Ha(l),j=l.child,j.flags&8192&&(I=j.memoizedState!==null,j.stateNode.isHidden=I,!I||j.alternate!==null&&j.alternate.memoizedState!==null||(Dy=Ct())),x&4&&yE(l);break;case 22:if(ke=f!==null&&f.memoizedState!==null,l.mode&1?(zr=(ue=zr)||ke,va(u,l),zr=ue):va(u,l),Ha(l),x&8192){if(ue=l.memoizedState!==null,(l.stateNode.isHidden=ue)&&!ke&&(l.mode&1)!==0)for(Oe=l,ke=l.child;ke!==null;){for(je=Oe=ke;Oe!==null;){switch(we=Oe,Ce=we.child,we.tag){case 0:case 11:case 14:case 15:Bu(4,we,we.return);break;case 1:Hl(we,we.return);var Me=we.stateNode;if(typeof Me.componentWillUnmount=="function"){x=we,f=we.return;try{u=x,Me.props=u.memoizedProps,Me.state=u.memoizedState,Me.componentWillUnmount()}catch(Le){Yt(x,f,Le)}}break;case 5:Hl(we,we.return);break;case 22:if(we.memoizedState!==null){wE(je);continue}}Ce!==null?(Ce.return=we,Oe=Ce):wE(je)}ke=ke.sibling}e:for(ke=null,je=l;;){if(je.tag===5){if(ke===null){ke=je;try{j=je.stateNode,ue?(I=j.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(H=je.stateNode,K=je.memoizedProps.style,U=K!=null&&K.hasOwnProperty("display")?K.display:null,H.style.display=mt("display",U))}catch(Le){Yt(l,l.return,Le)}}}else if(je.tag===6){if(ke===null)try{je.stateNode.nodeValue=ue?"":je.memoizedProps}catch(Le){Yt(l,l.return,Le)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===l)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===l)break e;for(;je.sibling===null;){if(je.return===null||je.return===l)break e;ke===je&&(ke=null),je=je.return}ke===je&&(ke=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:va(u,l),Ha(l),x&4&&yE(l);break;case 21:break;default:va(u,l),Ha(l)}}function Ha(l){var u=l.flags;if(u&2){try{e:{for(var f=l.return;f!==null;){if(mE(f)){var x=f;break e}f=f.return}throw Error(r(160))}switch(x.tag){case 5:var j=x.stateNode;x.flags&32&&(Da(j,""),x.flags&=-33);var I=pE(l);Iy(l,I,j);break;case 3:case 4:var U=x.stateNode.containerInfo,H=pE(l);Py(l,H,U);break;default:throw Error(r(161))}}catch(K){Yt(l,l.return,K)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function _$(l,u,f){Oe=l,vE(l)}function vE(l,u,f){for(var x=(l.mode&1)!==0;Oe!==null;){var j=Oe,I=j.child;if(j.tag===22&&x){var U=j.memoizedState!==null||Qf;if(!U){var H=j.alternate,K=H!==null&&H.memoizedState!==null||zr;H=Qf;var ue=zr;if(Qf=U,(zr=K)&&!ue)for(Oe=j;Oe!==null;)U=Oe,K=U.child,U.tag===22&&U.memoizedState!==null?kE(j):K!==null?(K.return=U,Oe=K):kE(j);for(;I!==null;)Oe=I,vE(I),I=I.sibling;Oe=j,Qf=H,zr=ue}bE(l)}else(j.subtreeFlags&8772)!==0&&I!==null?(I.return=j,Oe=I):bE(l)}}function bE(l){for(;Oe!==null;){var u=Oe;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:zr||Yf(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!zr)if(f===null)x.componentDidMount();else{var j=u.elementType===u.type?f.memoizedProps:ya(u.type,f.memoizedProps);x.componentDidUpdate(j,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var I=u.updateQueue;I!==null&&wS(u,I,x);break;case 3:var U=u.updateQueue;if(U!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}wS(u,U,f)}break;case 5:var H=u.stateNode;if(f===null&&u.flags&4){f=H;var K=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&f.focus();break;case"img":K.src&&(f.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var ue=u.alternate;if(ue!==null){var ke=ue.memoizedState;if(ke!==null){var je=ke.dehydrated;je!==null&&fa(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zr||u.flags&512&&Cy(u)}catch(we){Yt(u,u.return,we)}}if(u===l){Oe=null;break}if(f=u.sibling,f!==null){f.return=u.return,Oe=f;break}Oe=u.return}}function wE(l){for(;Oe!==null;){var u=Oe;if(u===l){Oe=null;break}var f=u.sibling;if(f!==null){f.return=u.return,Oe=f;break}Oe=u.return}}function kE(l){for(;Oe!==null;){var u=Oe;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{Yf(4,u)}catch(K){Yt(u,f,K)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var j=u.return;try{x.componentDidMount()}catch(K){Yt(u,j,K)}}var I=u.return;try{Cy(u)}catch(K){Yt(u,I,K)}break;case 5:var U=u.return;try{Cy(u)}catch(K){Yt(u,U,K)}}}catch(K){Yt(u,u.return,K)}if(u===l){Oe=null;break}var H=u.sibling;if(H!==null){H.return=u.return,Oe=H;break}Oe=u.return}}var j$=Math.ceil,Xf=P.ReactCurrentDispatcher,Oy=P.ReactCurrentOwner,Gn=P.ReactCurrentBatchConfig,ft=0,_r=null,sr=null,Rr=0,Cn=0,Gl=ls(0),fr=0,qu=null,go=0,Jf=0,Ry=0,zu=null,xn=null,Dy=0,Kl=1/0,ji=null,Zf=!1,My=null,ms=null,em=!1,ps=null,tm=0,Wu=0,Ly=null,rm=-1,nm=0;function nn(){return(ft&6)!==0?Ct():rm!==-1?rm:rm=Ct()}function gs(l){return(l.mode&1)===0?1:(ft&2)!==0&&Rr!==0?Rr&-Rr:o$.transition!==null?(nm===0&&(nm=no()),nm):(l=lt,l!==0||(l=window.event,l=l===void 0?16:vu(l.type)),l)}function ba(l,u,f,x){if(50<Wu)throw Wu=0,Ly=null,Error(r(185));es(l,f,x),((ft&2)===0||l!==_r)&&(l===_r&&((ft&2)===0&&(Jf|=f),fr===4&&ys(l,Rr)),vn(l,x),f===1&&ft===0&&(u.mode&1)===0&&(Kl=Ct()+500,Pf&&us()))}function vn(l,u){var f=l.callbackNode;hi(l,u);var x=ro(l,l===_r?Rr:0);if(x===0)f!==null&&mu(f),l.callbackNode=null,l.callbackPriority=0;else if(u=x&-x,l.callbackPriority!==u){if(f!=null&&mu(f),u===1)l.tag===0?s$(jE.bind(null,l)):cS(jE.bind(null,l)),r$(function(){(ft&6)===0&&us()}),f=null;else{switch(rs(x)){case 1:f=eo;break;case 4:f=Xi;break;case 16:f=Vn;break;case 536870912:f=rf;break;default:f=Vn}f=IE(f,_E.bind(null,l))}l.callbackPriority=u,l.callbackNode=f}}function _E(l,u){if(rm=-1,nm=0,(ft&6)!==0)throw Error(r(327));var f=l.callbackNode;if(Ql()&&l.callbackNode!==f)return null;var x=ro(l,l===_r?Rr:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||u)u=am(l,x);else{u=x;var j=ft;ft|=2;var I=SE();(_r!==l||Rr!==u)&&(ji=null,Kl=Ct()+500,xo(l,u));do try{E$();break}catch(H){NE(l,H)}while(!0);ty(),Xf.current=I,ft=j,sr!==null?u=0:(_r=null,Rr=0,u=fr)}if(u!==0){if(u===2&&(j=Nn(l),j!==0&&(x=j,u=$y(l,j))),u===1)throw f=qu,xo(l,0),ys(l,x),vn(l,Ct()),f;if(u===6)ys(l,x);else{if(j=l.current.alternate,(x&30)===0&&!N$(j)&&(u=am(l,x),u===2&&(I=Nn(l),I!==0&&(x=I,u=$y(l,I))),u===1))throw f=qu,xo(l,0),ys(l,x),vn(l,Ct()),f;switch(l.finishedWork=j,l.finishedLanes=x,u){case 0:case 1:throw Error(r(345));case 2:vo(l,xn,ji);break;case 3:if(ys(l,x),(x&130023424)===x&&(u=Dy+500-Ct(),10<u)){if(ro(l,0)!==0)break;if(j=l.suspendedLanes,(j&x)!==x){nn(),l.pingedLanes|=l.suspendedLanes&j;break}l.timeoutHandle=zg(vo.bind(null,l,xn,ji),u);break}vo(l,xn,ji);break;case 4:if(ys(l,x),(x&4194240)===x)break;for(u=l.eventTimes,j=-1;0<x;){var U=31-en(x);I=1<<U,U=u[U],U>j&&(j=U),x&=~I}if(x=j,x=Ct()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*j$(x/1960))-x,10<x){l.timeoutHandle=zg(vo.bind(null,l,xn,ji),x);break}vo(l,xn,ji);break;case 5:vo(l,xn,ji);break;default:throw Error(r(329))}}}return vn(l,Ct()),l.callbackNode===f?_E.bind(null,l):null}function $y(l,u){var f=zu;return l.current.memoizedState.isDehydrated&&(xo(l,u).flags|=256),l=am(l,u),l!==2&&(u=xn,xn=f,u!==null&&Fy(u)),l}function Fy(l){xn===null?xn=l:xn.push.apply(xn,l)}function N$(l){for(var u=l;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var j=f[x],I=j.getSnapshot;j=j.value;try{if(!pa(I(),j))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ys(l,u){for(u&=~Ry,u&=~Jf,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var f=31-en(u),x=1<<f;l[f]=-1,u&=~x}}function jE(l){if((ft&6)!==0)throw Error(r(327));Ql();var u=ro(l,0);if((u&1)===0)return vn(l,Ct()),null;var f=am(l,u);if(l.tag!==0&&f===2){var x=Nn(l);x!==0&&(u=x,f=$y(l,x))}if(f===1)throw f=qu,xo(l,0),ys(l,u),vn(l,Ct()),f;if(f===6)throw Error(r(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,vo(l,xn,ji),vn(l,Ct()),null}function Vy(l,u){var f=ft;ft|=1;try{return l(u)}finally{ft=f,ft===0&&(Kl=Ct()+500,Pf&&us())}}function yo(l){ps!==null&&ps.tag===0&&(ft&6)===0&&Ql();var u=ft;ft|=1;var f=Gn.transition,x=lt;try{if(Gn.transition=null,lt=1,l)return l()}finally{lt=x,Gn.transition=f,ft=u,(ft&6)===0&&us()}}function Uy(){Cn=Gl.current,Mt(Gl)}function xo(l,u){l.finishedWork=null,l.finishedLanes=0;var f=l.timeoutHandle;if(f!==-1&&(l.timeoutHandle=-1,t$(f)),sr!==null)for(f=sr.return;f!==null;){var x=f;switch(Yg(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Af();break;case 3:zl(),Mt(pn),Mt(Ur),cy();break;case 5:oy(x);break;case 4:zl();break;case 13:Mt(Gt);break;case 19:Mt(Gt);break;case 10:ry(x.type._context);break;case 22:case 23:Uy()}f=f.return}if(_r=l,sr=l=xs(l.current,null),Rr=Cn=u,fr=0,qu=null,Ry=Jf=go=0,xn=zu=null,fo!==null){for(u=0;u<fo.length;u++)if(f=fo[u],x=f.interleaved,x!==null){f.interleaved=null;var j=x.next,I=f.pending;if(I!==null){var U=I.next;I.next=j,x.next=U}f.pending=x}fo=null}return l}function NE(l,u){do{var f=sr;try{if(ty(),Uf.current=Wf,Bf){for(var x=Kt.memoizedState;x!==null;){var j=x.queue;j!==null&&(j.pending=null),x=x.next}Bf=!1}if(po=0,kr=hr=Kt=null,Lu=!1,$u=0,Oy.current=null,f===null||f.return===null){fr=1,qu=u,sr=null;break}e:{var I=l,U=f.return,H=f,K=u;if(u=Rr,H.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ue=K,ke=H,je=ke.tag;if((ke.mode&1)===0&&(je===0||je===11||je===15)){var we=ke.alternate;we?(ke.updateQueue=we.updateQueue,ke.memoizedState=we.memoizedState,ke.lanes=we.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Ce=YS(U);if(Ce!==null){Ce.flags&=-257,XS(Ce,U,H,I,u),Ce.mode&1&&QS(I,ue,u),u=Ce,K=ue;var Me=u.updateQueue;if(Me===null){var Le=new Set;Le.add(K),u.updateQueue=Le}else Me.add(K);break e}else{if((u&1)===0){QS(I,ue,u),By();break e}K=Error(r(426))}}else if(Ut&&H.mode&1){var rr=YS(U);if(rr!==null){(rr.flags&65536)===0&&(rr.flags|=256),XS(rr,U,H,I,u),Zg(Wl(K,H));break e}}I=K=Wl(K,H),fr!==4&&(fr=2),zu===null?zu=[I]:zu.push(I),I=U;do{switch(I.tag){case 3:I.flags|=65536,u&=-u,I.lanes|=u;var se=GS(I,K,u);bS(I,se);break e;case 1:H=K;var re=I.type,oe=I.stateNode;if((I.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(ms===null||!ms.has(oe)))){I.flags|=65536,u&=-u,I.lanes|=u;var Se=KS(I,H,u);bS(I,Se);break e}}I=I.return}while(I!==null)}TE(f)}catch(Fe){u=Fe,sr===f&&f!==null&&(sr=f=f.return);continue}break}while(!0)}function SE(){var l=Xf.current;return Xf.current=Wf,l===null?Wf:l}function By(){(fr===0||fr===3||fr===2)&&(fr=4),_r===null||(go&268435455)===0&&(Jf&268435455)===0||ys(_r,Rr)}function am(l,u){var f=ft;ft|=2;var x=SE();(_r!==l||Rr!==u)&&(ji=null,xo(l,u));do try{S$();break}catch(j){NE(l,j)}while(!0);if(ty(),ft=f,Xf.current=x,sr!==null)throw Error(r(261));return _r=null,Rr=0,fr}function S$(){for(;sr!==null;)EE(sr)}function E$(){for(;sr!==null&&!ef();)EE(sr)}function EE(l){var u=PE(l.alternate,l,Cn);l.memoizedProps=l.pendingProps,u===null?TE(l):sr=u,Oy.current=null}function TE(l){var u=l;do{var f=u.alternate;if(l=u.return,(u.flags&32768)===0){if(f=v$(f,u,Cn),f!==null){sr=f;return}}else{if(f=b$(f,u),f!==null){f.flags&=32767,sr=f;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fr=6,sr=null;return}}if(u=u.sibling,u!==null){sr=u;return}sr=u=l}while(u!==null);fr===0&&(fr=5)}function vo(l,u,f){var x=lt,j=Gn.transition;try{Gn.transition=null,lt=1,T$(l,u,f,x)}finally{Gn.transition=j,lt=x}return null}function T$(l,u,f,x){do Ql();while(ps!==null);if((ft&6)!==0)throw Error(r(327));f=l.finishedWork;var j=l.finishedLanes;if(f===null)return null;if(l.finishedWork=null,l.finishedLanes=0,f===l.current)throw Error(r(177));l.callbackNode=null,l.callbackPriority=0;var I=f.lanes|f.childLanes;if(Tt(l,I),l===_r&&(sr=_r=null,Rr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||em||(em=!0,IE(Vn,function(){return Ql(),null})),I=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||I){I=Gn.transition,Gn.transition=null;var U=lt;lt=1;var H=ft;ft|=4,Oy.current=null,k$(l,f),xE(f,l),K5(Bg),as=!!Ug,Bg=Ug=null,l.current=f,_$(f),Ng(),ft=H,lt=U,Gn.transition=I}else l.current=f;if(em&&(em=!1,ps=l,tm=j),I=l.pendingLanes,I===0&&(ms=null),nf(f.stateNode),vn(l,Ct()),u!==null)for(x=l.onRecoverableError,f=0;f<u.length;f++)j=u[f],x(j.value,{componentStack:j.stack,digest:j.digest});if(Zf)throw Zf=!1,l=My,My=null,l;return(tm&1)!==0&&l.tag!==0&&Ql(),I=l.pendingLanes,(I&1)!==0?l===Ly?Wu++:(Wu=0,Ly=l):Wu=0,us(),null}function Ql(){if(ps!==null){var l=rs(tm),u=Gn.transition,f=lt;try{if(Gn.transition=null,lt=16>l?16:l,ps===null)var x=!1;else{if(l=ps,ps=null,tm=0,(ft&6)!==0)throw Error(r(331));var j=ft;for(ft|=4,Oe=l.current;Oe!==null;){var I=Oe,U=I.child;if((Oe.flags&16)!==0){var H=I.deletions;if(H!==null){for(var K=0;K<H.length;K++){var ue=H[K];for(Oe=ue;Oe!==null;){var ke=Oe;switch(ke.tag){case 0:case 11:case 15:Bu(8,ke,I)}var je=ke.child;if(je!==null)je.return=ke,Oe=je;else for(;Oe!==null;){ke=Oe;var we=ke.sibling,Ce=ke.return;if(fE(ke),ke===ue){Oe=null;break}if(we!==null){we.return=Ce,Oe=we;break}Oe=Ce}}}var Me=I.alternate;if(Me!==null){var Le=Me.child;if(Le!==null){Me.child=null;do{var rr=Le.sibling;Le.sibling=null,Le=rr}while(Le!==null)}}Oe=I}}if((I.subtreeFlags&2064)!==0&&U!==null)U.return=I,Oe=U;else e:for(;Oe!==null;){if(I=Oe,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Bu(9,I,I.return)}var se=I.sibling;if(se!==null){se.return=I.return,Oe=se;break e}Oe=I.return}}var re=l.current;for(Oe=re;Oe!==null;){U=Oe;var oe=U.child;if((U.subtreeFlags&2064)!==0&&oe!==null)oe.return=U,Oe=oe;else e:for(U=re;Oe!==null;){if(H=Oe,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Yf(9,H)}}catch(Fe){Yt(H,H.return,Fe)}if(H===U){Oe=null;break e}var Se=H.sibling;if(Se!==null){Se.return=H.return,Oe=Se;break e}Oe=H.return}}if(ft=j,us(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(to,l)}catch{}x=!0}return x}finally{lt=f,Gn.transition=u}}return!1}function AE(l,u,f){u=Wl(f,u),u=GS(l,u,1),l=hs(l,u,1),u=nn(),l!==null&&(es(l,1,u),vn(l,u))}function Yt(l,u,f){if(l.tag===3)AE(l,l,f);else for(;u!==null;){if(u.tag===3){AE(u,l,f);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ms===null||!ms.has(x))){l=Wl(f,l),l=KS(u,l,1),u=hs(u,l,1),l=nn(),u!==null&&(es(u,1,l),vn(u,l));break}}u=u.return}}function A$(l,u,f){var x=l.pingCache;x!==null&&x.delete(u),u=nn(),l.pingedLanes|=l.suspendedLanes&f,_r===l&&(Rr&f)===f&&(fr===4||fr===3&&(Rr&130023424)===Rr&&500>Ct()-Dy?xo(l,0):Ry|=f),vn(l,u)}function CE(l,u){u===0&&((l.mode&1)===0?u=1:(u=xl,xl<<=1,(xl&130023424)===0&&(xl=4194304)));var f=nn();l=wi(l,u),l!==null&&(es(l,u,f),vn(l,f))}function C$(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),CE(l,f)}function P$(l,u){var f=0;switch(l.tag){case 13:var x=l.stateNode,j=l.memoizedState;j!==null&&(f=j.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(r(314))}x!==null&&x.delete(u),CE(l,f)}var PE;PE=function(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps||pn.current)yn=!0;else{if((l.lanes&f)===0&&(u.flags&128)===0)return yn=!1,x$(l,u,f);yn=(l.flags&131072)!==0}else yn=!1,Ut&&(u.flags&1048576)!==0&&uS(u,Of,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;Kf(l,u),l=u.pendingProps;var j=Ll(u,Ur.current);ql(u,f),j=hy(null,u,x,l,j,f);var I=fy();return u.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,gn(x)?(I=!0,Cf(u)):I=!1,u.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,iy(u),j.updater=Hf,u.stateNode=j,j._reactInternals=u,vy(u,x,l,f),u=_y(null,u,x,!0,I,f)):(u.tag=0,Ut&&I&&Qg(u),rn(null,u,j,f),u=u.child),u;case 16:x=u.elementType;e:{switch(Kf(l,u),l=u.pendingProps,j=x._init,x=j(x._payload),u.type=x,j=u.tag=O$(x),l=ya(x,l),j){case 0:u=ky(null,u,x,l,f);break e;case 1:u=nE(null,u,x,l,f);break e;case 11:u=JS(null,u,x,l,f);break e;case 14:u=ZS(null,u,x,ya(x.type,l),f);break e}throw Error(r(306,x,""))}return u;case 0:return x=u.type,j=u.pendingProps,j=u.elementType===x?j:ya(x,j),ky(l,u,x,j,f);case 1:return x=u.type,j=u.pendingProps,j=u.elementType===x?j:ya(x,j),nE(l,u,x,j,f);case 3:e:{if(aE(u),l===null)throw Error(r(387));x=u.pendingProps,I=u.memoizedState,j=I.element,vS(l,u),Ff(u,x,null,f);var U=u.memoizedState;if(x=U.element,I.isDehydrated)if(I={element:x,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){j=Wl(Error(r(423)),u),u=iE(l,u,x,f,j);break e}else if(x!==j){j=Wl(Error(r(424)),u),u=iE(l,u,x,f,j);break e}else for(An=os(u.stateNode.containerInfo.firstChild),Tn=u,Ut=!0,ga=null,f=yS(u,null,x,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Vl(),x===j){u=_i(l,u,f);break e}rn(l,u,x,f)}u=u.child}return u;case 5:return kS(u),l===null&&Jg(u),x=u.type,j=u.pendingProps,I=l!==null?l.memoizedProps:null,U=j.children,qg(x,j)?U=null:I!==null&&qg(x,I)&&(u.flags|=32),rE(l,u),rn(l,u,U,f),u.child;case 6:return l===null&&Jg(u),null;case 13:return sE(l,u,f);case 4:return sy(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=Ul(u,null,x,f):rn(l,u,x,f),u.child;case 11:return x=u.type,j=u.pendingProps,j=u.elementType===x?j:ya(x,j),JS(l,u,x,j,f);case 7:return rn(l,u,u.pendingProps,f),u.child;case 8:return rn(l,u,u.pendingProps.children,f),u.child;case 12:return rn(l,u,u.pendingProps.children,f),u.child;case 10:e:{if(x=u.type._context,j=u.pendingProps,I=u.memoizedProps,U=j.value,Pt(Mf,x._currentValue),x._currentValue=U,I!==null)if(pa(I.value,U)){if(I.children===j.children&&!pn.current){u=_i(l,u,f);break e}}else for(I=u.child,I!==null&&(I.return=u);I!==null;){var H=I.dependencies;if(H!==null){U=I.child;for(var K=H.firstContext;K!==null;){if(K.context===x){if(I.tag===1){K=ki(-1,f&-f),K.tag=2;var ue=I.updateQueue;if(ue!==null){ue=ue.shared;var ke=ue.pending;ke===null?K.next=K:(K.next=ke.next,ke.next=K),ue.pending=K}}I.lanes|=f,K=I.alternate,K!==null&&(K.lanes|=f),ny(I.return,f,u),H.lanes|=f;break}K=K.next}}else if(I.tag===10)U=I.type===u.type?null:I.child;else if(I.tag===18){if(U=I.return,U===null)throw Error(r(341));U.lanes|=f,H=U.alternate,H!==null&&(H.lanes|=f),ny(U,f,u),U=I.sibling}else U=I.child;if(U!==null)U.return=I;else for(U=I;U!==null;){if(U===u){U=null;break}if(I=U.sibling,I!==null){I.return=U.return,U=I;break}U=U.return}I=U}rn(l,u,j.children,f),u=u.child}return u;case 9:return j=u.type,x=u.pendingProps.children,ql(u,f),j=Wn(j),x=x(j),u.flags|=1,rn(l,u,x,f),u.child;case 14:return x=u.type,j=ya(x,u.pendingProps),j=ya(x.type,j),ZS(l,u,x,j,f);case 15:return eE(l,u,u.type,u.pendingProps,f);case 17:return x=u.type,j=u.pendingProps,j=u.elementType===x?j:ya(x,j),Kf(l,u),u.tag=1,gn(x)?(l=!0,Cf(u)):l=!1,ql(u,f),WS(u,x,j),vy(u,x,j,f),_y(null,u,x,!0,l,f);case 19:return lE(l,u,f);case 22:return tE(l,u,f)}throw Error(r(156,u.tag))};function IE(l,u){return gl(l,u)}function I$(l,u,f,x){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(l,u,f,x){return new I$(l,u,f,x)}function qy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function O$(l){if(typeof l=="function")return qy(l)?1:0;if(l!=null){if(l=l.$$typeof,l===F)return 11;if(l===ae)return 14}return 2}function xs(l,u){var f=l.alternate;return f===null?(f=Kn(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&14680064,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f}function im(l,u,f,x,j,I){var U=2;if(x=l,typeof l=="function")qy(l)&&(U=1);else if(typeof l=="string")U=5;else e:switch(l){case T:return bo(f.children,j,I,u);case R:U=8,j|=8;break;case M:return l=Kn(12,f,u,j|2),l.elementType=M,l.lanes=I,l;case L:return l=Kn(13,f,u,j),l.elementType=L,l.lanes=I,l;case Z:return l=Kn(19,f,u,j),l.elementType=Z,l.lanes=I,l;case G:return sm(f,j,I,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case D:U=10;break e;case A:U=9;break e;case F:U=11;break e;case ae:U=14;break e;case W:U=16,x=null;break e}throw Error(r(130,l==null?l:typeof l,""))}return u=Kn(U,f,u,j),u.elementType=l,u.type=x,u.lanes=I,u}function bo(l,u,f,x){return l=Kn(7,l,x,u),l.lanes=f,l}function sm(l,u,f,x){return l=Kn(22,l,x,u),l.elementType=G,l.lanes=f,l.stateNode={isHidden:!1},l}function zy(l,u,f){return l=Kn(6,l,null,u),l.lanes=f,l}function Wy(l,u,f){return u=Kn(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function R$(l,u,f,x,j){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=x,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Hy(l,u,f,x,j,I,U,H,K){return l=new R$(l,u,f,H,K),u===1?(u=1,I===!0&&(u|=8)):u=0,I=Kn(3,null,null,u),l.current=I,I.stateNode=l,I.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},iy(I),l}function D$(l,u,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:x==null?null:""+x,children:l,containerInfo:u,implementation:f}}function OE(l){if(!l)return cs;l=l._reactInternals;e:{if(la(l)!==l||l.tag!==1)throw Error(r(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(r(171))}if(l.tag===1){var f=l.type;if(gn(f))return oS(l,f,u)}return u}function RE(l,u,f,x,j,I,U,H,K){return l=Hy(f,x,!0,l,j,I,U,H,K),l.context=OE(null),f=l.current,x=nn(),j=gs(f),I=ki(x,j),I.callback=u??null,hs(f,I,j),l.current.lanes=j,es(l,j,x),vn(l,x),l}function om(l,u,f,x){var j=u.current,I=nn(),U=gs(j);return f=OE(f),u.context===null?u.context=f:u.pendingContext=f,u=ki(I,U),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=hs(j,u,U),l!==null&&(ba(l,j,U,I),$f(l,j,U)),U}function lm(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function DE(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function Gy(l,u){DE(l,u),(l=l.alternate)&&DE(l,u)}function M$(){return null}var ME=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ky(l){this._internalRoot=l}cm.prototype.render=Ky.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));om(l,u,null,null)},cm.prototype.unmount=Ky.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;yo(function(){om(null,l,null,null)}),u[yi]=null}};function cm(l){this._internalRoot=l}cm.prototype.unstable_scheduleHydration=function(l){if(l){var u=cf();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Fa.length&&u!==0&&u<Fa[f].priority;f++);Fa.splice(f,0,l),f===0&&hf(l)}};function Qy(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function um(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function LE(){}function L$(l,u,f,x,j){if(j){if(typeof x=="function"){var I=x;x=function(){var ue=lm(U);I.call(ue)}}var U=RE(u,x,l,0,null,!1,!1,"",LE);return l._reactRootContainer=U,l[yi]=U.current,Au(l.nodeType===8?l.parentNode:l),yo(),U}for(;j=l.lastChild;)l.removeChild(j);if(typeof x=="function"){var H=x;x=function(){var ue=lm(K);H.call(ue)}}var K=Hy(l,0,!1,null,null,!1,!1,"",LE);return l._reactRootContainer=K,l[yi]=K.current,Au(l.nodeType===8?l.parentNode:l),yo(function(){om(u,K,f,x)}),K}function dm(l,u,f,x,j){var I=f._reactRootContainer;if(I){var U=I;if(typeof j=="function"){var H=j;j=function(){var K=lm(U);H.call(K)}}om(u,U,l,j)}else U=L$(f,u,l,j,x);return lm(U)}of=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var f=Ji(u.pendingLanes);f!==0&&(ts(u,f|1),vn(u,Ct()),(ft&6)===0&&(Kl=Ct()+500,us()))}break;case 13:yo(function(){var x=wi(l,1);if(x!==null){var j=nn();ba(x,l,1,j)}}),Gy(l,1)}},vl=function(l){if(l.tag===13){var u=wi(l,134217728);if(u!==null){var f=nn();ba(u,l,134217728,f)}Gy(l,134217728)}},lf=function(l){if(l.tag===13){var u=gs(l),f=wi(l,u);if(f!==null){var x=nn();ba(f,l,u,x)}Gy(l,u)}},cf=function(){return lt},uf=function(l,u){var f=lt;try{return lt=l,u()}finally{lt=f}},ul=function(l,u,f){switch(u){case"input":if(St(l,f),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var x=f[u];if(x!==l&&x.form===l.form){var j=Tf(x);if(!j)throw Error(r(90));ce(x),St(x,j)}}}break;case"textarea":Et(l,f);break;case"select":u=f.value,u!=null&&Pe(l,!!f.multiple,u,!1)}},Ys=Vy,uu=yo;var $$={usingClientEntryPoint:!1,Events:[Iu,Dl,Tf,La,cu,Vy]},Hu={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F$={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=fu(l),l===null?null:l.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||M$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{to=hm.inject(F$),jn=hm}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$$,bn.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(u))throw Error(r(200));return D$(l,u,null,f)},bn.createRoot=function(l,u){if(!Qy(l))throw Error(r(299));var f=!1,x="",j=ME;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(j=u.onRecoverableError)),u=Hy(l,1,!1,null,null,f,!1,x,j),l[yi]=u.current,Au(l.nodeType===8?l.parentNode:l),new Ky(u)},bn.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=fu(u),l=l===null?null:l.stateNode,l},bn.flushSync=function(l){return yo(l)},bn.hydrate=function(l,u,f){if(!um(u))throw Error(r(200));return dm(null,l,u,!0,f)},bn.hydrateRoot=function(l,u,f){if(!Qy(l))throw Error(r(405));var x=f!=null&&f.hydratedSources||null,j=!1,I="",U=ME;if(f!=null&&(f.unstable_strictMode===!0&&(j=!0),f.identifierPrefix!==void 0&&(I=f.identifierPrefix),f.onRecoverableError!==void 0&&(U=f.onRecoverableError)),u=RE(u,null,l,1,f??null,j,!1,I,U),l[yi]=u.current,Au(l),x)for(l=0;l<x.length;l++)f=x[l],j=f._getVersion,j=j(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,j]:u.mutableSourceEagerHydrationData.push(f,j);return new cm(u)},bn.render=function(l,u,f){if(!um(u))throw Error(r(200));return dm(null,l,u,!1,f)},bn.unmountComponentAtNode=function(l){if(!um(l))throw Error(r(40));return l._reactRootContainer?(yo(function(){dm(null,null,l,!1,function(){l._reactRootContainer=null,l[yi]=null})}),!0):!1},bn.unstable_batchedUpdates=Vy,bn.unstable_renderSubtreeIntoContainer=function(l,u,f,x){if(!um(f))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return dm(l,u,f,!1,x)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var WE;function G$(){if(WE)return Jy.exports;WE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jy.exports=H$(),Jy.exports}var HE;function K$(){if(HE)return mm;HE=1;var t=G$();return mm.createRoot=t.createRoot,mm.hydrateRoot=t.hydrateRoot,mm}var Q$=K$();const Y$=bt(Q$);var GE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},X$=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,m=s>>2,p=(s&3)<<4|c>>4;let y=(c&15)<<2|h>>6,v=h&63;d||(v=64,o||(y=64)),n.push(r[m],r[p],r[y],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const p=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||c==null||h==null||p==null)throw new J$;const y=s<<2|c>>4;if(n.push(y),h!==64){const v=c<<4&240|h>>2;if(n.push(v),p!==64){const w=h<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z$=function(t){const e=wD(t);return kD.encodeByteArray(e,!0)},Jm=function(t){return Z$(t).replace(/\./g,"")},_D=function(t){try{return kD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=()=>eF().__FIREBASE_DEFAULTS__,rF=()=>{if(typeof process>"u"||typeof GE>"u")return;const t=GE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_D(t[1]);return e&&JSON.parse(e)},h0=()=>{try{return tF()||rF()||nF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jD=t=>{var e,r;return(r=(e=h0())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},ND=t=>{const e=jD(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},SD=()=>{var t;return(t=h0())===null||t===void 0?void 0:t.config},ED=t=>{var e;return(e=h0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jm(JSON.stringify(r)),Jm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jr())}function sF(){var t;const e=(t=h0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uF(){const t=Jr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dF(){return!sF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hF(){try{return typeof indexedDB=="object"}catch{return!1}}function fF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF="FirebaseError";class li extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=mF,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nh.prototype.create)}}class Nh{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?pF(s,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new li(a,c,n)}}function pF(t,e){return t.replace(gF,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const gF=/\{\$([^}]+)}/g;function yF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(KE(s)&&KE(o)){if(!Zm(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function KE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function id(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function sd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function xF(t,e){const r=new vF(t,e);return r.subscribe.bind(r)}class vF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");bF(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=tx),a.error===void 0&&(a.error=tx),a.complete===void 0&&(a.complete=tx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function tx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new aF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),a=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_F(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kF(t){return t===jo?void 0:t}function _F(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new wF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const NF={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},SF=ct.INFO,EF={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},TF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=EF[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mj{constructor(e){this.name=e,this._logLevel=SF,this._logHandler=TF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const AF=(t,e)=>e.some(r=>t instanceof r);let QE,YE;function CF(){return QE||(QE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PF(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AD=new WeakMap,xk=new WeakMap,CD=new WeakMap,rx=new WeakMap,pj=new WeakMap;function IF(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Ps(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&AD.set(r,t)}).catch(()=>{}),pj.set(e,t),e}function OF(t){if(xk.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});xk.set(t,e)}let vk={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return xk.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CD.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ps(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RF(t){vk=t(vk)}function DF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(nx(this),e,...r);return CD.set(n,e.sort?e.sort():[e]),Ps(n)}:PF().includes(t)?function(...e){return t.apply(nx(this),e),Ps(AD.get(this))}:function(...e){return Ps(t.apply(nx(this),e))}}function MF(t){return typeof t=="function"?DF(t):(t instanceof IDBTransaction&&OF(t),AF(t,CF())?new Proxy(t,vk):t)}function Ps(t){if(t instanceof IDBRequest)return IF(t);if(rx.has(t))return rx.get(t);const e=MF(t);return e!==t&&(rx.set(t,e),pj.set(e,t)),e}const nx=t=>pj.get(t);function LF(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),c=Ps(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Ps(o.result),d.oldVersion,d.newVersion,Ps(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const $F=["get","getKey","getAll","getAllKeys","count"],FF=["put","add","delete","clear"],ax=new Map;function XE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ax.get(e))return ax.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=FF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||$F.includes(r)))return;const s=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return ax.set(e,s),s}RF(t=>({...t,get:(e,r,n)=>XE(e,r)||t.get(e,r,n),has:(e,r)=>!!XE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(UF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function UF(t){const e=t.getComponent();return e?.type==="VERSION"}const bk="@firebase/app",JE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new mj("@firebase/app"),BF="@firebase/app-compat",qF="@firebase/analytics-compat",zF="@firebase/analytics",WF="@firebase/app-check-compat",HF="@firebase/app-check",GF="@firebase/auth",KF="@firebase/auth-compat",QF="@firebase/database",YF="@firebase/data-connect",XF="@firebase/database-compat",JF="@firebase/functions",ZF="@firebase/functions-compat",eV="@firebase/installations",tV="@firebase/installations-compat",rV="@firebase/messaging",nV="@firebase/messaging-compat",aV="@firebase/performance",iV="@firebase/performance-compat",sV="@firebase/remote-config",oV="@firebase/remote-config-compat",lV="@firebase/storage",cV="@firebase/storage-compat",uV="@firebase/firestore",dV="@firebase/vertexai-preview",hV="@firebase/firestore-compat",fV="firebase",mV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="[DEFAULT]",pV={[bk]:"fire-core",[BF]:"fire-core-compat",[zF]:"fire-analytics",[qF]:"fire-analytics-compat",[HF]:"fire-app-check",[WF]:"fire-app-check-compat",[GF]:"fire-auth",[KF]:"fire-auth-compat",[QF]:"fire-rtdb",[YF]:"fire-data-connect",[XF]:"fire-rtdb-compat",[JF]:"fire-fn",[ZF]:"fire-fn-compat",[eV]:"fire-iid",[tV]:"fire-iid-compat",[rV]:"fire-fcm",[nV]:"fire-fcm-compat",[aV]:"fire-perf",[iV]:"fire-perf-compat",[sV]:"fire-rc",[oV]:"fire-rc-compat",[lV]:"fire-gcs",[cV]:"fire-gcs-compat",[uV]:"fire-fst",[hV]:"fire-fst-compat",[dV]:"fire-vertex","fire-js":"fire-js",[fV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new Map,gV=new Map,kk=new Map;function ZE(t,e){try{t.container.addComponent(e)}catch(r){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Vo(t){const e=t.name;if(kk.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;kk.set(e,t);for(const r of ep.values())ZE(r,t);for(const r of gV.values())ZE(r,t);return!0}function f0(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ga(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Nh("app","Firebase",yV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=mV;function PD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:wk,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw Is.create("bad-app-name",{appName:String(a)});if(r||(r=SD()),!r)throw Is.create("no-options");const s=ep.get(a);if(s){if(Zm(r,s.options)&&Zm(n,s.config))return s;throw Is.create("duplicate-app",{appName:a})}const o=new jF(a);for(const d of kk.values())o.addComponent(d);const c=new xV(r,n,o);return ep.set(a,c),c}function gj(t=wk){const e=ep.get(t);if(!e&&t===wk&&SD())return PD();if(!e)throw Is.create("no-app",{appName:t});return e}function Ya(t,e,r){var n;let a=(n=pV[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(c.join(" "));return}Vo(new Ls(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firebase-heartbeat-database",bV=1,Ad="firebase-heartbeat-store";let ix=null;function ID(){return ix||(ix=LF(vV,bV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ad)}catch(r){console.warn(r)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),ix}async function wV(t){try{const r=(await ID()).transaction(Ad),n=await r.objectStore(Ad).get(OD(t));return await r.done,n}catch(e){if(e instanceof li)$i.warn(e.message);else{const r=Is.create("idb-get",{originalErrorMessage:e?.message});$i.warn(r.message)}}}async function eT(t,e){try{const n=(await ID()).transaction(Ad,"readwrite");await n.objectStore(Ad).put(e,OD(t)),await n.done}catch(r){if(r instanceof li)$i.warn(r.message);else{const n=Is.create("idb-set",{originalErrorMessage:r?.message});$i.warn(n.message)}}}function OD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=1024,_V=720*60*60*1e3;class jV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=_V}),this._storage.overwrite(this._heartbeatsCache))}catch(n){$i.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tT(),{heartbeatsToSend:n,unsentEntries:a}=NV(this._heartbeatsCache.heartbeats),s=Jm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return $i.warn(r),""}}}function tT(){return new Date().toISOString().substring(0,10)}function NV(t,e=kV){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),rT(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),rT(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class SV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hF()?fF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await wV(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return eT(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return eT(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function rT(t){return Jm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t){Vo(new Ls("platform-logger",e=>new VF(e),"PRIVATE")),Vo(new Ls("heartbeat",e=>new jV(e),"PRIVATE")),Ya(bk,JE,t),Ya(bk,JE,"esm2017"),Ya("fire-js","")}EV("");var TV="firebase",AV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ya(TV,AV,"app");function yj(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function RD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CV=RD,DD=new Nh("auth","Firebase",RD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new mj("@firebase/auth");function PV(t,...e){tp.logLevel<=ct.WARN&&tp.warn(`Auth (${Zo}): ${t}`,...e)}function Um(t,...e){tp.logLevel<=ct.ERROR&&tp.error(`Auth (${Zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,...e){throw xj(t,...e)}function Xa(t,...e){return xj(t,...e)}function MD(t,e,r){const n=Object.assign(Object.assign({},CV()),{[e]:r});return new Nh("auth","Firebase",n).create(e,{appName:t.name})}function Ri(t){return MD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xj(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return DD.create(t,...e)}function We(t,e,...r){if(!t)throw xj(e,...r)}function Ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Um(e),new Error(e)}function Fi(t,e){t||Ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return nT()==="http:"||nT()==="https:"}function nT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||lF()||"connection"in navigator)?navigator.onLine:!0}function RV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Fi(r>e,"Short delay should be less than long delay!"),this.isMobile=iF()||cF()}get(){return OV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(t,e){Fi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new Eh(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qs(t,e,r,n,a={}){return $D(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const c=Sh(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},s);return oF()||(h.referrerPolicy="no-referrer"),LD.fetch()(FD(t,t.config.apiHost,r,c),h)})}async function $D(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},DV),e);try{const a=new $V(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pm(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw pm(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw pm(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw pm(t,"user-disabled",o);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw MD(t,m,h);Pa(t,m)}}catch(a){if(a instanceof li)throw a;Pa(t,"network-request-failed",{message:String(a)})}}async function Th(t,e,r,n,a={}){const s=await qs(t,e,r,n,a);return"mfaPendingCredential"in s&&Pa(t,"multi-factor-auth-required",{_serverResponse:s}),s}function FD(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?vj(t.config,a):`${t.config.apiScheme}://${a}`}function LV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Xa(this.auth,"network-request-failed")),MV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Xa(t,e,n);return a.customData._tokenResponse=r,a}function aT(t){return t!==void 0&&t.enterprise!==void 0}class FV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return LV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function VV(t,e){return qs(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){return qs(t,"POST","/v1/accounts:delete",e)}async function VD(t,e){return qs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BV(t,e=!1){const r=Ft(t),n=await r.getIdToken(e),a=bj(n);We(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s?.sign_in_provider;return{claims:a,token:n,authTime:pd(sx(a.auth_time)),issuedAtTime:pd(sx(a.iat)),expirationTime:pd(sx(a.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function sx(t){return Number(t)*1e3}function bj(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{const a=_D(r);return a?JSON.parse(a):(Um("Failed to decode base64 JWT payload"),null)}catch(a){return Um("Caught error parsing JWT payload as JSON",a?.toString()),null}}function iT(t){const e=bj(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof li&&qV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function qV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=pd(this.lastLoginAt),this.creationTime=pd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Cd(t,VD(r,{idToken:n}));We(a?.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UD(s.providerUserInfo):[],c=HV(t.providerData,o),d=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!c?.length,m=d?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new jk(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function WV(t){const e=Ft(t);await rp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HV(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function UD(t){return t.map(e=>{var{providerId:r}=e,n=yj(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){const r=await $D(t,{},async()=>{const n=Sh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=FD(t,a,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",LD.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function KV(t,e){return qs(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){We(e.length!==0,"internal-error");const r=iT(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await GV(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new cc;return n&&(We(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(We(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(We(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cc,this.toJSON())}_performRefresh(){return Ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=yj(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Cd(this,this.stsTokenManager.getToken(this.auth,e));return We(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return BV(this,e)}reload(){return WV(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await rp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ga(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await Cd(this,UV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,c,d,h,m;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,v=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,k=(c=r.tenantId)!==null&&c!==void 0?c:void 0,b=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,N=(h=r.createdAt)!==null&&h!==void 0?h:void 0,S=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:E,emailVerified:P,isAnonymous:_,providerData:O,stsTokenManager:T}=r;We(E&&T,e,"internal-error");const R=cc.fromJSON(this.name,T);We(typeof E=="string",e,"internal-error"),bs(p,e.name),bs(y,e.name),We(typeof P=="boolean",e,"internal-error"),We(typeof _=="boolean",e,"internal-error"),bs(v,e.name),bs(w,e.name),bs(k,e.name),bs(b,e.name),bs(N,e.name),bs(S,e.name);const M=new Ai({uid:E,auth:e,email:y,emailVerified:P,displayName:p,isAnonymous:_,photoURL:w,phoneNumber:v,tenantId:k,stsTokenManager:R,createdAt:N,lastLoginAt:S});return O&&Array.isArray(O)&&(M.providerData=O.map(D=>Object.assign({},D))),b&&(M._redirectEventId=b),M}static async _fromIdTokenResponse(e,r,n=!1){const a=new cc;a.updateFromServerResponse(r);const s=new Ai({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await rp(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];We(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?UD(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!s?.length,c=new cc;c.updateFromIdToken(n);const d=new Ai({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new jk(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!s?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Map;function Ci(t){Fi(t instanceof Function,"Expected a class definition");let e=sT.get(t);return e?(Fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}BD.type="NONE";const oT=BD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,r){return`firebase:${t}:${e}:${r}`}class uc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=Bm(this.userKey,a.apiKey,s),this.fullPersistenceKey=Bm("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new uc(Ci(oT),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=a[0]||Ci(oT);const o=Bm(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const m=await h._get(o);if(m){const p=Ai._fromJSON(e,m);h!==s&&(c=p),s=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new uc(s,e,n):(s=d[0],c&&await s._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new uc(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KD(e))return"Blackberry";if(QD(e))return"Webos";if(zD(e))return"Safari";if((e.includes("chrome/")||WD(e))&&!e.includes("edge/"))return"Chrome";if(GD(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function qD(t=Jr()){return/firefox\//i.test(t)}function zD(t=Jr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WD(t=Jr()){return/crios\//i.test(t)}function HD(t=Jr()){return/iemobile/i.test(t)}function GD(t=Jr()){return/android/i.test(t)}function KD(t=Jr()){return/blackberry/i.test(t)}function QD(t=Jr()){return/webos/i.test(t)}function wj(t=Jr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QV(t=Jr()){var e;return wj(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YV(){return uF()&&document.documentMode===10}function YD(t=Jr()){return wj(t)||GD(t)||QD(t)||KD(t)||/windows phone/i.test(t)||HD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t,e=[]){let r;switch(t){case"Browser":r=lT(Jr());break;case"Worker":r=`${lT(Jr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,c)=>{try{const d=e(s);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e={}){return qs(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=6;class e9{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:ZV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cT(this),this.idTokenSubscription=new cT(this),this.beforeStateQueue=new XV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ci(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await uc.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await VD(this,{idToken:e}),n=await Ai._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ga(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(a=d.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await rp(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ga(this.app))return Promise.reject(Ri(this));const r=e?Ft(e):null;return r&&We(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ga(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ga(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JV(this),r=new e9(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nh("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await KV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ci(e)||this._popupRedirectResolver;We(r,this,"argument-error"),this.redirectPersistenceManager=await uc.create(this,[Ci(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&PV(`Error while retrieving App Check token: ${r.error}`),r?.token}}function el(t){return Ft(t)}class cT{constructor(e){this.auth=e,this.observer=null,this.addObserver=xF(r=>this.observer=r)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r9(t){m0=t}function JD(t){return m0.loadJS(t)}function n9(){return m0.recaptchaEnterpriseScript}function a9(){return m0.gapiScript}function i9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const s9="recaptcha-enterprise",o9="NO_RECAPTCHA";class l9{constructor(e){this.type=s9,this.auth=el(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{VV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new FV(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(d=>{c(d)})})}function a(s,o,c){const d=window.grecaptcha;aT(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(o9)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(c=>{if(!r&&aT(window.grecaptcha))a(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=n9();d.length!==0&&(d+=c),JD(d).then(()=>{a(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function uT(t,e,r,n=!1){const a=new l9(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nk(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await uT(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uT(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e){const r=f0(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Zm(s,e??{}))return a;Pa(a,"already-initialized")}return r.initialize({options:e})}function u9(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Ci);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function d9(t,e,r){const n=el(t);We(n._canInitEmulator,n,"emulator-config-failed"),We(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=ZD(e),{host:o,port:c}=h9(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),f9()}function ZD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h9(t){const e=ZD(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:dT(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:dT(o)}}}function dT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f9(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,r){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}}async function m9(t,e){return qs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){return Th(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9(t,e){return Th(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function y9(t,e){return Th(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends kj{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Pd(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Pd(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nk(e,r,"signInWithPassword",p9);case"emailLink":return g9(e,{email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nk(e,n,"signUpPassword",m9);case"emailLink":return y9(e,{idToken:r,email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t,e){return Th(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="http://localhost";class Uo extends kj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Pa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=yj(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Uo(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return dc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,dc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,dc(e,r)}buildRequest(){const e={requestUri:x9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Sh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b9(t){const e=id(sd(t)).link,r=e?id(sd(e)).deep_link_id:null,n=id(sd(t)).deep_link_id;return(n?id(sd(n)).link:null)||n||r||e||t}class _j{constructor(e){var r,n,a,s,o,c;const d=id(sd(e)),h=(r=d.apiKey)!==null&&r!==void 0?r:null,m=(n=d.oobCode)!==null&&n!==void 0?n:null,p=v9((a=d.mode)!==null&&a!==void 0?a:null);We(h&&m&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=m,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const r=b9(e);try{return new _j(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.providerId=Xc.PROVIDER_ID}static credential(e,r){return Pd._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=_j.parseLink(r);return We(n,"argument-error"),Pd._fromEmailAndCode(e,n.code,n.tenantId)}}Xc.PROVIDER_ID="password";Xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends eM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ah{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Uo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return js.credential(r,n)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Ah{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Ah{constructor(){super("twitter.com")}static credential(e,r){return Uo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ss.credential(r,n)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e){return Th(t,"POST","/v1/accounts:signUp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Ai._fromIdTokenResponse(e,n,a),o=hT(n);return new Bo({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=hT(n);return new Bo({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function hT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends li{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,np.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new np(e,r,n,a)}}function tM(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?np._fromErrorAndOperation(t,s,e,n):s})}async function k9(t,e,r=!1){const n=await Cd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Bo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(t,e,r=!1){const{auth:n}=t;if(Ga(n.app))return Promise.reject(Ri(n));const a="reauthenticate";try{const s=await Cd(t,tM(n,a,e,t),r);We(s.idToken,n,"internal-error");const o=bj(s.idToken);We(o,n,"internal-error");const{sub:c}=o;return We(t.uid===c,n,"user-mismatch"),Bo._forOperation(t,a,s)}catch(s){throw s?.code==="auth/user-not-found"&&Pa(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,r=!1){if(Ga(t.app))return Promise.reject(Ri(t));const n="signIn",a=await tM(t,n,e),s=await Bo._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function j9(t,e){return rM(el(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t){const e=el(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(t,e,r){if(Ga(t.app))return Promise.reject(Ri(t));const n=el(t),o=await Nk(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w9).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&nM(t),d}),c=await Bo._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function N9(t,e,r){return Ga(t.app)?Promise.reject(Ri(t)):j9(Ft(t),Xc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nM(t),n})}function S9(t,e,r,n){return Ft(t).onIdTokenChanged(e,r,n)}function E9(t,e,r){return Ft(t).beforeAuthStateChanged(e,r)}function T9(t,e,r,n){return Ft(t).onAuthStateChanged(e,r,n)}function A9(t){return Ft(t).signOut()}const ap="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(ap,"1"),this.storage.removeItem(ap),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=1e3,P9=10;class sM extends iM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);YV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,P9):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},C9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}sM.type="LOCAL";const I9=sM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM extends iM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}oM.type="SESSION";const lM=oM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new p0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,s)),d=await O9(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((c,d)=>{const h=jj("",20);a.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(p){const y=p;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(){return window}function D9(t){Ja().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return typeof Ja().WorkerGlobalScope<"u"&&typeof Ja().importScripts=="function"}async function M9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $9(){return cM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="firebaseLocalStorageDb",F9=1,ip="firebaseLocalStorage",dM="fbase_key";class Ch{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function g0(t,e){return t.transaction([ip],e?"readwrite":"readonly").objectStore(ip)}function V9(){const t=indexedDB.deleteDatabase(uM);return new Ch(t).toPromise()}function Sk(){const t=indexedDB.open(uM,F9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(ip,{keyPath:dM})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(ip)?e(n):(n.close(),await V9(),e(await Sk()))})})}async function fT(t,e,r){const n=g0(t,!0).put({[dM]:e,value:r});return new Ch(n).toPromise()}async function U9(t,e){const r=g0(t,!1).get(e),n=await new Ch(r).toPromise();return n===void 0?null:n.value}function mT(t,e){const r=g0(t,!0).delete(e);return new Ch(r).toPromise()}const B9=800,q9=3;class hM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sk(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>q9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p0._getInstance($9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await M9(),!this.activeServiceWorker)return;this.sender=new R9(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sk();return await fT(e,ap,"1"),await mT(e,ap),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>fT(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>U9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>mT(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=g0(a,!1).getAll();return new Ch(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hM.type="LOCAL";const z9=hM;new Eh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t,e){return e?Ci(e):(We(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj extends kj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return dc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return dc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function H9(t){return rM(t.auth,new Nj(t),t.bypassAuthState)}function G9(t){const{auth:e,user:r}=t;return We(r,e,"internal-error"),_9(r,new Nj(t),t.bypassAuthState)}async function K9(t){const{auth:e,user:r}=t;return We(r,e,"internal-error"),k9(r,new Nj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H9;case"linkViaPopup":case"linkViaRedirect":return K9;case"reauthViaPopup":case"reauthViaRedirect":return G9;default:Pa(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new Eh(2e3,1e4);class nc extends fM{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,nc.currentPopupAction&&nc.currentPopupAction.cancel(),nc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=jj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q9.get())};e()}}nc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="pendingRedirect",qm=new Map;class X9 extends fM{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=qm.get(this.auth._key());if(!e){try{const n=await J9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}qm.set(this.auth._key(),e)}return this.bypassAuthState||qm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J9(t,e){const r=t7(e),n=e7(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Z9(t,e){qm.set(t._key(),e)}function e7(t){return Ci(t._redirectPersistence)}function t7(t){return Bm(Y9,t.config.apiKey,t.name)}async function r7(t,e,r=!1){if(Ga(t.app))return Promise.reject(Ri(t));const n=el(t),a=W9(n,e),o=await new X9(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=600*1e3;class a7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i7(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!mM(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Xa(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n7&&this.cachedEventUids.clear(),this.cachedEventUids.has(pT(e))}saveEventToCache(e){this.cachedEventUids.add(pT(e)),this.lastProcessedEventTime=Date.now()}}function pT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function i7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(t,e={}){return qs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l7=/^https?/;async function c7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s7(t);for(const r of e)try{if(u7(r))return}catch{}Pa(t,"unauthorized-domain")}function u7(t){const e=_k(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!l7.test(r))return!1;if(o7.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new Eh(3e4,6e4);function gT(){const t=Ja().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function h7(t){return new Promise((e,r)=>{var n,a,s;function o(){gT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gT(),r(Xa(t,"network-request-failed"))},timeout:d7.get()})}if(!((a=(n=Ja().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Ja().gapi)===null||s===void 0)&&s.load)o();else{const c=i9("iframefcb");return Ja()[c]=()=>{gapi.load?o():r(Xa(t,"network-request-failed"))},JD(`${a9()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw zm=null,e})}let zm=null;function f7(t){return zm=zm||h7(t),zm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=new Eh(5e3,15e3),p7="__/auth/iframe",g7="emulator/auth/iframe",y7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v7(t){const e=t.config;We(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?vj(e,g7):`https://${t.config.authDomain}/${p7}`,n={apiKey:e.apiKey,appName:t.name,v:Zo},a=x7.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Sh(n).slice(1)}`}async function b7(t){const e=await f7(t),r=Ja().gapi;return We(r,t,"internal-error"),e.open({where:document.body,url:v7(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y7,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Xa(t,"network-request-failed"),c=Ja().setTimeout(()=>{s(o)},m7.get());function d(){Ja().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k7=500,_7=600,j7="_blank",N7="http://localhost";class yT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S7(t,e,r,n=k7,a=_7){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},w7),{width:n.toString(),height:a.toString(),top:s,left:o}),h=Jr().toLowerCase();r&&(c=WD(h)?j7:r),qD(h)&&(e=e||N7,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[v,w])=>`${y}${v}=${w},`,"");if(QV(h)&&c!=="_self")return E7(e||"",c),new yT(null);const p=window.open(e||"",c,m);We(p,t,"popup-blocked");try{p.focus()}catch{}return new yT(p)}function E7(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="__/auth/handler",A7="emulator/auth/handler",C7=encodeURIComponent("fac");async function xT(t,e,r,n,a,s){We(t.config.authDomain,t,"auth-domain-config-required"),We(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zo,eventId:a};if(e instanceof eM){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof Ah){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),h=d?`#${C7}=${encodeURIComponent(d)}`:"";return`${P7(t)}?${Sh(c).slice(1)}${h}`}function P7({config:t}){return t.emulator?vj(t,A7):`https://${t.authDomain}/${T7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="webStorageSupport";class I7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lM,this._completeRedirectFn=r7,this._overrideRedirectResult=Z9}async _openPopup(e,r,n,a){var s;Fi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await xT(e,r,n,_k(),a);return S7(e,o,jj())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await xT(e,r,n,_k(),a);return D9(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Fi(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await b7(e),n=new a7(e);return r.register("authEvent",a=>(We(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ox,{type:ox},a=>{var s;const o=(s=a?.[0])===null||s===void 0?void 0:s[ox];o!==void 0&&r(!!o),Pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=c7(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return YD()||zD()||wj()}}const O7=I7;var vT="@firebase/auth",bT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M7(t){Vo(new Ls("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;We(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XD(t)},h=new t9(n,a,s,d);return u9(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Vo(new Ls("auth-internal",e=>{const r=el(e.getProvider("auth").getImmediate());return(n=>new R7(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ya(vT,bT,D7(t)),Ya(vT,bT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=300,$7=ED("authIdTokenMaxAge")||L7;let wT=null;const F7=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>$7)return;const a=r?.token;wT!==a&&(wT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Sj(t=gj()){const e=f0(t,"auth");if(e.isInitialized())return e.getImmediate();const r=c9(t,{popupRedirectResolver:O7,persistence:[z9,I9,lM]}),n=ED("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=F7(s.toString());E9(r,o,()=>o(r.currentUser)),S9(r,c=>o(c))}}const a=jD("auth");return a&&d9(r,`http://${a}`),r}function V7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}r9({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Xa("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",V7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M7("Browser");var kT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro,pM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,R){function M(){}M.prototype=R.prototype,T.D=R.prototype,T.prototype=new M,T.prototype.constructor=T,T.C=function(D,A,F){for(var L=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)L[Z-2]=arguments[Z];return R.prototype[A].apply(D,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(T,R,M){M||(M=0);var D=Array(16);if(typeof R=="string")for(var A=0;16>A;++A)D[A]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(A=0;16>A;++A)D[A]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=T.g[0],M=T.g[1],A=T.g[2];var F=T.g[3],L=R+(F^M&(A^F))+D[0]+3614090360&4294967295;R=M+(L<<7&4294967295|L>>>25),L=F+(A^R&(M^A))+D[1]+3905402710&4294967295,F=R+(L<<12&4294967295|L>>>20),L=A+(M^F&(R^M))+D[2]+606105819&4294967295,A=F+(L<<17&4294967295|L>>>15),L=M+(R^A&(F^R))+D[3]+3250441966&4294967295,M=A+(L<<22&4294967295|L>>>10),L=R+(F^M&(A^F))+D[4]+4118548399&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(A^R&(M^A))+D[5]+1200080426&4294967295,F=R+(L<<12&4294967295|L>>>20),L=A+(M^F&(R^M))+D[6]+2821735955&4294967295,A=F+(L<<17&4294967295|L>>>15),L=M+(R^A&(F^R))+D[7]+4249261313&4294967295,M=A+(L<<22&4294967295|L>>>10),L=R+(F^M&(A^F))+D[8]+1770035416&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(A^R&(M^A))+D[9]+2336552879&4294967295,F=R+(L<<12&4294967295|L>>>20),L=A+(M^F&(R^M))+D[10]+4294925233&4294967295,A=F+(L<<17&4294967295|L>>>15),L=M+(R^A&(F^R))+D[11]+2304563134&4294967295,M=A+(L<<22&4294967295|L>>>10),L=R+(F^M&(A^F))+D[12]+1804603682&4294967295,R=M+(L<<7&4294967295|L>>>25),L=F+(A^R&(M^A))+D[13]+4254626195&4294967295,F=R+(L<<12&4294967295|L>>>20),L=A+(M^F&(R^M))+D[14]+2792965006&4294967295,A=F+(L<<17&4294967295|L>>>15),L=M+(R^A&(F^R))+D[15]+1236535329&4294967295,M=A+(L<<22&4294967295|L>>>10),L=R+(A^F&(M^A))+D[1]+4129170786&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^A&(R^M))+D[6]+3225465664&4294967295,F=R+(L<<9&4294967295|L>>>23),L=A+(R^M&(F^R))+D[11]+643717713&4294967295,A=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(A^F))+D[0]+3921069994&4294967295,M=A+(L<<20&4294967295|L>>>12),L=R+(A^F&(M^A))+D[5]+3593408605&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^A&(R^M))+D[10]+38016083&4294967295,F=R+(L<<9&4294967295|L>>>23),L=A+(R^M&(F^R))+D[15]+3634488961&4294967295,A=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(A^F))+D[4]+3889429448&4294967295,M=A+(L<<20&4294967295|L>>>12),L=R+(A^F&(M^A))+D[9]+568446438&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^A&(R^M))+D[14]+3275163606&4294967295,F=R+(L<<9&4294967295|L>>>23),L=A+(R^M&(F^R))+D[3]+4107603335&4294967295,A=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(A^F))+D[8]+1163531501&4294967295,M=A+(L<<20&4294967295|L>>>12),L=R+(A^F&(M^A))+D[13]+2850285829&4294967295,R=M+(L<<5&4294967295|L>>>27),L=F+(M^A&(R^M))+D[2]+4243563512&4294967295,F=R+(L<<9&4294967295|L>>>23),L=A+(R^M&(F^R))+D[7]+1735328473&4294967295,A=F+(L<<14&4294967295|L>>>18),L=M+(F^R&(A^F))+D[12]+2368359562&4294967295,M=A+(L<<20&4294967295|L>>>12),L=R+(M^A^F)+D[5]+4294588738&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^A)+D[8]+2272392833&4294967295,F=R+(L<<11&4294967295|L>>>21),L=A+(F^R^M)+D[11]+1839030562&4294967295,A=F+(L<<16&4294967295|L>>>16),L=M+(A^F^R)+D[14]+4259657740&4294967295,M=A+(L<<23&4294967295|L>>>9),L=R+(M^A^F)+D[1]+2763975236&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^A)+D[4]+1272893353&4294967295,F=R+(L<<11&4294967295|L>>>21),L=A+(F^R^M)+D[7]+4139469664&4294967295,A=F+(L<<16&4294967295|L>>>16),L=M+(A^F^R)+D[10]+3200236656&4294967295,M=A+(L<<23&4294967295|L>>>9),L=R+(M^A^F)+D[13]+681279174&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^A)+D[0]+3936430074&4294967295,F=R+(L<<11&4294967295|L>>>21),L=A+(F^R^M)+D[3]+3572445317&4294967295,A=F+(L<<16&4294967295|L>>>16),L=M+(A^F^R)+D[6]+76029189&4294967295,M=A+(L<<23&4294967295|L>>>9),L=R+(M^A^F)+D[9]+3654602809&4294967295,R=M+(L<<4&4294967295|L>>>28),L=F+(R^M^A)+D[12]+3873151461&4294967295,F=R+(L<<11&4294967295|L>>>21),L=A+(F^R^M)+D[15]+530742520&4294967295,A=F+(L<<16&4294967295|L>>>16),L=M+(A^F^R)+D[2]+3299628645&4294967295,M=A+(L<<23&4294967295|L>>>9),L=R+(A^(M|~F))+D[0]+4096336452&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~A))+D[7]+1126891415&4294967295,F=R+(L<<10&4294967295|L>>>22),L=A+(R^(F|~M))+D[14]+2878612391&4294967295,A=F+(L<<15&4294967295|L>>>17),L=M+(F^(A|~R))+D[5]+4237533241&4294967295,M=A+(L<<21&4294967295|L>>>11),L=R+(A^(M|~F))+D[12]+1700485571&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~A))+D[3]+2399980690&4294967295,F=R+(L<<10&4294967295|L>>>22),L=A+(R^(F|~M))+D[10]+4293915773&4294967295,A=F+(L<<15&4294967295|L>>>17),L=M+(F^(A|~R))+D[1]+2240044497&4294967295,M=A+(L<<21&4294967295|L>>>11),L=R+(A^(M|~F))+D[8]+1873313359&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~A))+D[15]+4264355552&4294967295,F=R+(L<<10&4294967295|L>>>22),L=A+(R^(F|~M))+D[6]+2734768916&4294967295,A=F+(L<<15&4294967295|L>>>17),L=M+(F^(A|~R))+D[13]+1309151649&4294967295,M=A+(L<<21&4294967295|L>>>11),L=R+(A^(M|~F))+D[4]+4149444226&4294967295,R=M+(L<<6&4294967295|L>>>26),L=F+(M^(R|~A))+D[11]+3174756917&4294967295,F=R+(L<<10&4294967295|L>>>22),L=A+(R^(F|~M))+D[2]+718787259&4294967295,A=F+(L<<15&4294967295|L>>>17),L=M+(F^(A|~R))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+R&4294967295,T.g[1]=T.g[1]+(A+(L<<21&4294967295|L>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+F&4294967295}n.prototype.u=function(T,R){R===void 0&&(R=T.length);for(var M=R-this.blockSize,D=this.B,A=this.h,F=0;F<R;){if(A==0)for(;F<=M;)a(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<R;)if(D[A++]=T.charCodeAt(F++),A==this.blockSize){a(this,D),A=0;break}}else for(;F<R;)if(D[A++]=T[F++],A==this.blockSize){a(this,D),A=0;break}}this.h=A,this.o+=R},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var R=1;R<T.length-8;++R)T[R]=0;var M=8*this.o;for(R=T.length-8;R<T.length;++R)T[R]=M&255,M/=256;for(this.u(T),T=Array(16),R=M=0;4>R;++R)for(var D=0;32>D;D+=8)T[M++]=this.g[R]>>>D&255;return T};function s(T,R){var M=c;return Object.prototype.hasOwnProperty.call(M,T)?M[T]:M[T]=R(T)}function o(T,R){this.h=R;for(var M=[],D=!0,A=T.length-1;0<=A;A--){var F=T[A]|0;D&&F==R||(M[A]=F,D=!1)}this.g=M}var c={};function d(T){return-128<=T&&128>T?s(T,function(R){return new o([R|0],0>R?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return b(h(-T));for(var R=[],M=1,D=0;T>=M;D++)R[D]=T/M|0,M*=4294967296;return new o(R,0)}function m(T,R){if(T.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(T.charAt(0)=="-")return b(m(T.substring(1),R));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(R,8)),D=p,A=0;A<T.length;A+=8){var F=Math.min(8,T.length-A),L=parseInt(T.substring(A,A+F),R);8>F?(F=h(Math.pow(R,F)),D=D.j(F).add(h(L))):(D=D.j(M),D=D.add(h(L)))}return D}var p=d(0),y=d(1),v=d(16777216);t=o.prototype,t.m=function(){if(k(this))return-b(this).m();for(var T=0,R=1,M=0;M<this.g.length;M++){var D=this.i(M);T+=(0<=D?D:4294967296+D)*R,R*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(k(this))return"-"+b(this).toString(T);for(var R=h(Math.pow(T,6)),M=this,D="";;){var A=P(M,R).g;M=N(M,A.j(R));var F=((0<M.g.length?M.g[0]:M.h)>>>0).toString(T);if(M=A,w(M))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var R=0;R<T.g.length;R++)if(T.g[R]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=N(this,T),k(T)?-1:w(T)?0:1};function b(T){for(var R=T.g.length,M=[],D=0;D<R;D++)M[D]=~T.g[D];return new o(M,~T.h).add(y)}t.abs=function(){return k(this)?b(this):this},t.add=function(T){for(var R=Math.max(this.g.length,T.g.length),M=[],D=0,A=0;A<=R;A++){var F=D+(this.i(A)&65535)+(T.i(A)&65535),L=(F>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);D=L>>>16,F&=65535,L&=65535,M[A]=L<<16|F}return new o(M,M[M.length-1]&-2147483648?-1:0)};function N(T,R){return T.add(b(R))}t.j=function(T){if(w(this)||w(T))return p;if(k(this))return k(T)?b(this).j(b(T)):b(b(this).j(T));if(k(T))return b(this.j(b(T)));if(0>this.l(v)&&0>T.l(v))return h(this.m()*T.m());for(var R=this.g.length+T.g.length,M=[],D=0;D<2*R;D++)M[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<T.g.length;A++){var F=this.i(D)>>>16,L=this.i(D)&65535,Z=T.i(A)>>>16,ae=T.i(A)&65535;M[2*D+2*A]+=L*ae,S(M,2*D+2*A),M[2*D+2*A+1]+=F*ae,S(M,2*D+2*A+1),M[2*D+2*A+1]+=L*Z,S(M,2*D+2*A+1),M[2*D+2*A+2]+=F*Z,S(M,2*D+2*A+2)}for(D=0;D<R;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=R;D<2*R;D++)M[D]=0;return new o(M,0)};function S(T,R){for(;(T[R]&65535)!=T[R];)T[R+1]+=T[R]>>>16,T[R]&=65535,R++}function E(T,R){this.g=T,this.h=R}function P(T,R){if(w(R))throw Error("division by zero");if(w(T))return new E(p,p);if(k(T))return R=P(b(T),R),new E(b(R.g),b(R.h));if(k(R))return R=P(T,b(R)),new E(b(R.g),R.h);if(30<T.g.length){if(k(T)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var M=y,D=R;0>=D.l(T);)M=_(M),D=_(D);var A=O(M,1),F=O(D,1);for(D=O(D,2),M=O(M,2);!w(D);){var L=F.add(D);0>=L.l(T)&&(A=A.add(M),F=L),D=O(D,1),M=O(M,1)}return R=N(T,A.j(R)),new E(A,R)}for(A=p;0<=T.l(R);){for(M=Math.max(1,Math.floor(T.m()/R.m())),D=Math.ceil(Math.log(M)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=h(M),L=F.j(R);k(L)||0<L.l(T);)M-=D,F=h(M),L=F.j(R);w(F)&&(F=y),A=A.add(F),T=N(T,L)}return new E(A,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var R=Math.max(this.g.length,T.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)&T.i(D);return new o(M,this.h&T.h)},t.or=function(T){for(var R=Math.max(this.g.length,T.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)|T.i(D);return new o(M,this.h|T.h)},t.xor=function(T){for(var R=Math.max(this.g.length,T.g.length),M=[],D=0;D<R;D++)M[D]=this.i(D)^T.i(D);return new o(M,this.h^T.h)};function _(T){for(var R=T.g.length+1,M=[],D=0;D<R;D++)M[D]=T.i(D)<<1|T.i(D-1)>>>31;return new o(M,T.h)}function O(T,R){var M=R>>5;R%=32;for(var D=T.g.length-M,A=[],F=0;F<D;F++)A[F]=0<R?T.i(F+M)>>>R|T.i(F+M+1)<<32-R:T.i(F+M);return new o(A,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,pM=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Ro=o}).apply(typeof kT<"u"?kT:typeof self<"u"?self:typeof window<"u"?window:{});var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gM,od,yM,Wm,Ek,xM,vM,bM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,C,$){return g==Array.prototype||g==Object.prototype||(g[C]=$.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof gm=="object"&&gm];for(var C=0;C<g.length;++C){var $=g[C];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=r(this);function a(g,C){if(C)e:{var $=n;g=g.split(".");for(var B=0;B<g.length-1;B++){var ie=g[B];if(!(ie in $))break e;$=$[ie]}g=g[g.length-1],B=$[g],C=C(B),C!=B&&C!=null&&e($,g,{configurable:!0,writable:!0,value:C})}}function s(g,C){g instanceof String&&(g+="");var $=0,B=!1,ie={next:function(){if(!B&&$<g.length){var de=$++;return{value:C(de,g[de]),done:!1}}return B=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}a("Array.prototype.values",function(g){return g||function(){return s(this,function(C,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(g){var C=typeof g;return C=C!="object"?C:g?Array.isArray(g)?"array":C:"null",C=="array"||C=="object"&&typeof g.length=="number"}function h(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function m(g,C,$){return g.call.apply(g.bind,arguments)}function p(g,C,$){if(!g)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,B),g.apply(C,ie)}}return function(){return g.apply(C,arguments)}}function y(g,C,$){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function v(g,C){var $=Array.prototype.slice.call(arguments,1);return function(){var B=$.slice();return B.push.apply(B,arguments),g.apply(this,B)}}function w(g,C){function $(){}$.prototype=C.prototype,g.aa=C.prototype,g.prototype=new $,g.prototype.constructor=g,g.Qb=function(B,ie,de){for(var Te=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Te[wt-2]=arguments[wt];return C.prototype[ie].apply(B,Te)}}function k(g){const C=g.length;if(0<C){const $=Array(C);for(let B=0;B<C;B++)$[B]=g[B];return $}return[]}function b(g,C){for(let $=1;$<arguments.length;$++){const B=arguments[$];if(d(B)){const ie=g.length||0,de=B.length||0;g.length=ie+de;for(let Te=0;Te<de;Te++)g[ie+Te]=B[Te]}else g.push(B)}}class N{constructor(C,$){this.i=C,this.j=$,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function S(g){return/^[\s\xa0]*$/.test(g)}function E(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function P(g){return P[" "](g),g}P[" "]=function(){};var _=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(g,C,$){for(const B in g)C.call($,g[B],B,g)}function T(g,C){for(const $ in g)C.call(void 0,g[$],$,g)}function R(g){const C={};for(const $ in g)C[$]=g[$];return C}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(g,C){let $,B;for(let ie=1;ie<arguments.length;ie++){B=arguments[ie];for($ in B)g[$]=B[$];for(let de=0;de<M.length;de++)$=M[de],Object.prototype.hasOwnProperty.call(B,$)&&(g[$]=B[$])}}function A(g){var C=1;g=g.split(":");const $=[];for(;0<C&&g.length;)$.push(g.shift()),C--;return g.length&&$.push(g.join(":")),$}function F(g){c.setTimeout(()=>{throw g},0)}function L(){var g=te;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class Z{constructor(){this.h=this.g=null}add(C,$){const B=ae.get();B.set(C,$),this.h?this.h.next=B:this.g=B,this.h=B}}var ae=new N(()=>new W,g=>g.reset());class W{constructor(){this.next=this.g=this.h=null}set(C,$){this.h=C,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,te=new Z,ne=()=>{const g=c.Promise.resolve(void 0);G=()=>{g.then(z)}};var z=()=>{for(var g;g=L();){try{g.h.call(g.g)}catch($){F($)}var C=ae;C.j(g),100>C.h&&(C.h++,g.next=C.g,C.g=g)}Y=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const $=()=>{};c.addEventListener("test",$,C),c.removeEventListener("test",$,C)}catch{}return g})();function fe(g,C){if(J.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var $=this.type=g.type,B=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget){if(_){e:{try{P(C.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(C=null)}}else $=="mouseover"?C=g.fromElement:$=="mouseout"&&(C=g.toElement);this.relatedTarget=C,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:be[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&fe.aa.h.call(this)}}w(fe,J);var be={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),xe=0;function q(g,C,$,B,ie){this.listener=g,this.proxy=null,this.src=C,this.type=$,this.capture=!!B,this.ha=ie,this.key=++xe,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ge(g){this.src=g,this.g={},this.h=0}ge.prototype.add=function(g,C,$,B,ie){var de=g.toString();g=this.g[de],g||(g=this.g[de]=[],this.h++);var Te=Ne(g,C,B,ie);return-1<Te?(C=g[Te],$||(C.fa=!1)):(C=new q(C,this.src,de,!!B,ie),C.fa=$,g.push(C)),C};function ce(g,C){var $=C.type;if($ in g.g){var B=g.g[$],ie=Array.prototype.indexOf.call(B,C,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(B,ie,1),de&&(he(C),g.g[$].length==0&&(delete g.g[$],g.h--))}}function Ne(g,C,$,B){for(var ie=0;ie<g.length;++ie){var de=g[ie];if(!de.da&&de.listener==C&&de.capture==!!$&&de.ha==B)return ie}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),et={};function tt(g,C,$,B,ie){if(Array.isArray(C)){for(var de=0;de<C.length;de++)tt(g,C[de],$,B,ie);return null}return $=hn($),g&&g[me]?g.K(C,$,h(B)?!!B.capture:!1,ie):St(g,C,$,!1,B,ie)}function St(g,C,$,B,ie,de){if(!C)throw Error("Invalid event type");var Te=h(ie)?!!ie.capture:!!ie,wt=Cr(g);if(wt||(g[Ae]=wt=new ge(g)),$=wt.add(C,$,B,Te,de),$.proxy)return $;if(B=ar(),$.proxy=B,B.src=g,B.listener=$,g.addEventListener)le||(ie=Te),ie===void 0&&(ie=!1),g.addEventListener(C.toString(),B,ie);else if(g.attachEvent)g.attachEvent(Pe(C.toString()),B);else if(g.addListener&&g.removeListener)g.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return $}function ar(){function g($){return C.call(g.src,g.listener,$)}const C=rt;return g}function ut(g,C,$,B,ie){if(Array.isArray(C))for(var de=0;de<C.length;de++)ut(g,C[de],$,B,ie);else B=h(B)?!!B.capture:!!B,$=hn($),g&&g[me]?(g=g.i,C=String(C).toString(),C in g.g&&(de=g.g[C],$=Ne(de,$,B,ie),-1<$&&(he(de[$]),Array.prototype.splice.call(de,$,1),de.length==0&&(delete g.g[C],g.h--)))):g&&(g=Cr(g))&&(C=g.g[C.toString()],g=-1,C&&(g=Ne(C,$,B,ie)),($=-1<g?C[g]:null)&&ye($))}function ye(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[me])ce(C.i,g);else{var $=g.type,B=g.proxy;C.removeEventListener?C.removeEventListener($,B,g.capture):C.detachEvent?C.detachEvent(Pe($),B):C.addListener&&C.removeListener&&C.removeListener(B),($=Cr(C))?(ce($,g),$.h==0&&($.src=null,C[Ae]=null)):he(g)}}}function Pe(g){return g in et?et[g]:et[g]="on"+g}function rt(g,C){if(g.da)g=!0;else{C=new fe(C,this);var $=g.listener,B=g.ha||g.src;g.fa&&ye(g),g=$.call(B,C)}return g}function Cr(g){return g=g[Ae],g instanceof ge?g:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(g){return typeof g=="function"?g:(g[Et]||(g[Et]=function(C){return g.handleEvent(C)}),g[Et])}function zt(){ee.call(this),this.i=new ge(this),this.M=this,this.F=null}w(zt,ee),zt.prototype[me]=!0,zt.prototype.removeEventListener=function(g,C,$,B){ut(this,g,C,$,B)};function jt(g,C){var $,B=g.F;if(B)for($=[];B;B=B.F)$.push(B);if(g=g.M,B=C.type||C,typeof C=="string")C=new J(C,g);else if(C instanceof J)C.target=C.target||g;else{var ie=C;C=new J(B,g),D(C,ie)}if(ie=!0,$)for(var de=$.length-1;0<=de;de--){var Te=C.g=$[de];ie=$n(Te,B,!0,C)&&ie}if(Te=C.g=g,ie=$n(Te,B,!0,C)&&ie,ie=$n(Te,B,!1,C)&&ie,$)for(de=0;de<$.length;de++)Te=C.g=$[de],ie=$n(Te,B,!1,C)&&ie}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var g=this.i,C;for(C in g.g){for(var $=g.g[C],B=0;B<$.length;B++)he($[B]);delete g.g[C],g.h--}}this.F=null},zt.prototype.K=function(g,C,$,B){return this.i.add(String(g),C,!1,$,B)},zt.prototype.L=function(g,C,$,B){return this.i.add(String(g),C,!0,$,B)};function $n(g,C,$,B){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();for(var ie=!0,de=0;de<C.length;++de){var Te=C[de];if(Te&&!Te.da&&Te.capture==$){var wt=Te.listener,dr=Te.ha||Te.src;Te.fa&&ce(g.i,Te),ie=wt.call(dr,B)!==!1&&ie}}return ie&&!B.defaultPrevented}function Qs(g,C,$){if(typeof g=="function")$&&(g=y(g,$));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(g,C||0)}function Da(g){g.g=Qs(()=>{g.g=null,g.i&&(g.i=!1,Da(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class qe extends ee{constructor(C,$){super(),this.m=C,this.l=$,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(g){ee.call(this),this.h=g,this.g={}}w(Xe,ee);var mt=[];function nt(g){O(g.g,function(C,$){this.g.hasOwnProperty($)&&ye(C)},g),g.g={}}Xe.prototype.N=function(){Xe.aa.N.call(this),nt(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=c.JSON.stringify,br=c.JSON.parse,Ht=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Vr(){}Vr.prototype.h=null;function cl(g){return g.h||(g.h=g.i())}function ul(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ma(){J.call(this,"d")}w(Ma,J);function dl(){J.call(this,"c")}w(dl,J);var La={},cu=null;function Ys(){return cu=cu||new zt}La.La="serverreachability";function uu(g){J.call(this,La.La,g)}w(uu,J);function di(g){const C=Ys();jt(C,new uu(C))}La.STAT_EVENT="statevent";function du(g,C){J.call(this,La.STAT_EVENT,g),this.stat=C}w(du,J);function tr(g){const C=Ys();jt(C,new du(C,g))}La.Ma="timingevent";function hl(g,C){J.call(this,La.Ma,g),this.size=C}w(hl,J);function sa(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},C)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function Js(g,C,$,B,ie,de){g.info(function(){if(g.g)if(de)for(var Te="",wt=de.split("&"),dr=0;dr<wt.length;dr++){var dt=wt[dr].split("=");if(1<dt.length){var wr=dt[0];dt=dt[1];var ir=wr.split("_");Te=2<=ir.length&&ir[1]=="type"?Te+(wr+"="+dt+"&"):Te+(wr+"=redacted&")}}else Te=null;else Te=de;return"XMLHTTP REQ ("+B+") [attempt "+ie+"]: "+C+`
`+$+`
`+Te})}function fl(g,C,$,B,ie,de,Te){g.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ie+"]: "+C+`
`+$+`
`+de+" "+Te})}function oa(g,C,$,B){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+jg(g,$)+(B?" "+B:"")})}function hu(g,C){g.info(function(){return"TIMEOUT: "+C})}Xs.prototype.info=function(){};function jg(g,C){if(!g.g)return C;if(!C)return null;try{var $=JSON.parse(C);if($){for(g=0;g<$.length;g++)if(Array.isArray($[g])){var B=$[g];if(!(2>B.length)){var ie=B[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Te=1;Te<ie.length;Te++)ie[Te]=""}}}}return Wt($)}catch{return C}}var ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},la;function Zs(){}w(Zs,Vr),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},la=new Zs;function ca(g,C,$,B){this.j=g,this.i=C,this.l=$,this.R=B||1,this.U=new Xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zh}function Zh(){this.i=null,this.g="",this.h=!1}var fu={},pl={};function gl(g,C,$){g.L=1,g.v=ts(Nn(C)),g.m=$,g.P=!0,mu(g,null)}function mu(g,C){g.F=Date.now(),Ct(g),g.A=Nn(g.v);var $=g.A,B=g.R;Array.isArray(B)||(B=[String(B)]),ns($.i,"t",B),g.C=0,$=g.j.J,g.h=new Zh,g.g=xf(g.j,$?C:null,!g.m),0<g.O&&(g.M=new qe(y(g.Y,g,g.g),g.O)),C=g.U,$=g.g,B=g.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(mt[0]=ie.toString()),ie=mt);for(var de=0;de<ie.length;de++){var Te=tt($,ie[de],B||C.handleEvent,!1,C.h||C);if(!Te)break;C.g[Te.key]=Te}C=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,C)):(g.u="GET",g.g.ea(g.A,g.u,null,C)),di(),Js(g.i,g.u,g.A,g.l,g.R,g.m)}ca.prototype.ca=function(g){g=g.target;const C=this.M;C&&mn(g)==3?C.j():this.Y(g)},ca.prototype.Y=function(g){try{if(g==this.g)e:{const ir=mn(this.g);var C=this.g.Ba();const Bn=this.g.Z();if(!(3>ir)&&(ir!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||ir!=4||C==7||(C==8||0>=Bn?di(3):di(2)),eo(this);var $=this.g.Z();this.X=$;t:if(ef(this)){var B=bu(this.g);g="";var ie=B.length,de=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),Xi(this);var Te="";break t}this.h.i=new c.TextDecoder}for(C=0;C<ie;C++)this.h.h=!0,g+=this.h.i.decode(B[C],{stream:!(de&&C==ie-1)});B.length=0,this.h.g+=g,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=$==200,fl(this.i,this.u,this.A,this.l,this.R,ir,$),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,dr=this.g;if((wt=dr.g?dr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(wt)){var dt=wt;break t}}dt=null}if($=dt)oa(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pu(this,$);else{this.o=!1,this.s=3,tr(12),Vn(this),Xi(this);break e}}if(this.P){$=!0;let En;for(;!this.J&&this.C<Te.length;)if(En=Ng(this,Te),En==pl){ir==4&&(this.s=4,tr(14),$=!1),oa(this.i,this.l,null,"[Incomplete Response]");break}else if(En==fu){this.s=4,tr(15),oa(this.i,this.l,Te,"[Invalid Chunk]"),$=!1;break}else oa(this.i,this.l,En,null),pu(this,En);if(ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ir!=4||Te.length!=0||this.h.h||(this.s=1,tr(16),$=!1),this.o=this.o&&$,!$)oa(this.i,this.l,Te,"[Invalid Chunked Response]"),Vn(this),Xi(this);else if(0<Te.length&&!this.W){this.W=!0;var wr=this.j;wr.g==this&&wr.ba&&!wr.M&&(wr.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),ku(wr),wr.M=!0,tr(11))}}else oa(this.i,this.l,Te,null),pu(this,Te);ir==4&&Vn(this),this.o&&!this.J&&(ir==4?El(this.j,this):(this.o=!1,Ct(this)))}else kl(this.g),$==400&&0<Te.indexOf("Unknown SID")?(this.s=3,tr(12)):(this.s=0,tr(13)),Vn(this),Xi(this)}}}catch{}finally{}};function ef(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Ng(g,C){var $=g.C,B=C.indexOf(`
`,$);return B==-1?pl:($=Number(C.substring($,B)),isNaN($)?fu:(B+=1,B+$>C.length?pl:(C=C.slice(B,B+$),g.C=B+$,C)))}ca.prototype.cancel=function(){this.J=!0,Vn(this)};function Ct(g){g.S=Date.now()+g.I,tf(g,g.I)}function tf(g,C){if(g.B!=null)throw Error("WatchDog timer not null");g.B=sa(y(g.ba,g),C)}function eo(g){g.B&&(c.clearTimeout(g.B),g.B=null)}ca.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(hu(this.i,this.A),this.L!=2&&(di(),tr(17)),Vn(this),this.s=2,Xi(this)):tf(this,this.S-g)};function Xi(g){g.j.G==0||g.J||El(g.j,g)}function Vn(g){eo(g);var C=g.M;C&&typeof C.ma=="function"&&C.ma(),g.M=null,nt(g.U),g.g&&(C=g.g,g.g=null,C.abort(),C.ma())}function pu(g,C){try{var $=g.j;if($.G!=0&&($.g==g||en($.h,g))){if(!g.K&&en($.h,g)&&$.G==3){try{var B=$.Da.g.parse(C)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ie=B;if(ie[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<g.F)Sl($),ma($);else break e;Nl($),tr(18)}}else $.za=ie[1],0<$.za-$.T&&37500>ie[2]&&$.F&&$.v==0&&!$.C&&($.C=sa(y($.Za,$),6e3));if(1>=nf($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else gi($,11)}else if((g.K||$.g==g)&&Sl($),!S(C))for(ie=$.Da.g.parse(C),C=0;C<ie.length;C++){let dt=ie[C];if($.T=dt[0],dt=dt[1],$.G==2)if(dt[0]=="c"){$.K=dt[1],$.ia=dt[2];const wr=dt[3];wr!=null&&($.la=wr,$.j.info("VER="+$.la));const ir=dt[4];ir!=null&&($.Aa=ir,$.j.info("SVER="+$.Aa));const Bn=dt[5];Bn!=null&&typeof Bn=="number"&&0<Bn&&(B=1.5*Bn,$.L=B,$.j.info("backChannelRequestTimeoutMs_="+B)),B=$;const En=g.g;if(En){const oo=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var de=B.h;de.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(gu(de,de.h),de.h=null))}if(B.D){const Al=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(B.ya=Al,Tt(B.I,B.D,Al))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-g.F,$.j.info("Handshake RTT: "+$.R+"ms")),B=$;var Te=g;if(B.qa=yf(B,B.J?B.ia:null,B.W),Te.K){af(B.h,Te);var wt=Te,dr=B.L;dr&&(wt.I=dr),wt.B&&(eo(wt),Ct(wt)),B.g=Te}else so(B);0<$.i.length&&Ua($)}else dt[0]!="stop"&&dt[0]!="close"||gi($,7);else $.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?gi($,7):Ir($):dt[0]!="noop"&&$.l&&$.l.ta(dt),$.v=0)}}di(4)}catch{}}var rf=class{constructor(g,C){this.g=g,this.map=C}};function to(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jn(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function nf(g){return g.h?1:g.g?g.g.size:0}function en(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function gu(g,C){g.g?g.g.add(C):g.h=C}function af(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}to.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function sf(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const $ of g.g.values())C=C.concat($.D);return C}return k(g.i)}function yl(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var C=[],$=g.length,B=0;B<$;B++)C.push(g[B]);return C}C=[],$=0;for(B in g)C[$++]=g[B];return C}function xl(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var C=[];g=g.length;for(var $=0;$<g;$++)C.push($);return C}C=[],$=0;for(const B in g)C[$++]=B;return C}}}function Ji(g,C){if(g.forEach&&typeof g.forEach=="function")g.forEach(C,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,C,void 0);else for(var $=xl(g),B=yl(g),ie=B.length,de=0;de<ie;de++)C.call(void 0,B[de],$&&$[de],g)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sg(g,C){if(g){g=g.split("&");for(var $=0;$<g.length;$++){var B=g[$].indexOf("="),ie=null;if(0<=B){var de=g[$].substring(0,B);ie=g[$].substring(B+1)}else de=g[$];C(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function hi(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof hi){this.h=g.h,no(this,g.j),this.o=g.o,this.g=g.g,Zi(this,g.s),this.l=g.l;var C=g.i,$=new $a;$.i=C.i,C.g&&($.g=new Map(C.g),$.h=C.h),es(this,$),this.m=g.m}else g&&(C=String(g).match(ro))?(this.h=!1,no(this,C[1]||"",!0),this.o=lt(C[2]||""),this.g=lt(C[3]||"",!0),Zi(this,C[4]),this.l=lt(C[5]||"",!0),es(this,C[6]||"",!0),this.m=lt(C[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}hi.prototype.toString=function(){var g=[],C=this.j;C&&g.push(rs(C,vl,!0),":");var $=this.g;return($||C=="file")&&(g.push("//"),(C=this.o)&&g.push(rs(C,vl,!0),"@"),g.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&g.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&g.push("/"),g.push(rs($,$.charAt(0)=="/"?cf:lf,!0))),($=this.i.toString())&&g.push("?",$),($=this.m)&&g.push("#",rs($,yu)),g.join("")};function Nn(g){return new hi(g)}function no(g,C,$){g.j=$?lt(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Zi(g,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);g.s=C}else g.s=null}function es(g,C,$){C instanceof $a?(g.i=C,Fa(g.i,g.h)):($||(C=rs(C,uf)),g.i=new $a(C,g.h))}function Tt(g,C,$){g.i.set(C,$)}function ts(g){return Tt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function lt(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function rs(g,C,$){return typeof g=="string"?(g=encodeURI(g).replace(C,of),$&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function of(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var vl=/[#\/\?@]/g,lf=/[#\?:]/g,cf=/[#\?]/g,uf=/[#\?@]/g,yu=/#/g;function $a(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function Pr(g){g.g||(g.g=new Map,g.h=0,g.i&&Sg(g.i,function(C,$){g.add(decodeURIComponent(C.replace(/\+/g," ")),$)}))}t=$a.prototype,t.add=function(g,C){Pr(this),this.i=null,g=Un(this,g);var $=this.g.get(g);return $||this.g.set(g,$=[]),$.push(C),this.h+=1,this};function ua(g,C){Pr(g),C=Un(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function da(g,C){return Pr(g),C=Un(g,C),g.g.has(C)}t.forEach=function(g,C){Pr(this),this.g.forEach(function($,B){$.forEach(function(ie){g.call(C,ie,B,this)},this)},this)},t.na=function(){Pr(this);const g=Array.from(this.g.values()),C=Array.from(this.g.keys()),$=[];for(let B=0;B<C.length;B++){const ie=g[B];for(let de=0;de<ie.length;de++)$.push(C[B])}return $},t.V=function(g){Pr(this);let C=[];if(typeof g=="string")da(this,g)&&(C=C.concat(this.g.get(Un(this,g))));else{g=Array.from(this.g.values());for(let $=0;$<g.length;$++)C=C.concat(g[$])}return C},t.set=function(g,C){return Pr(this),this.i=null,g=Un(this,g),da(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=this.V(g),0<g.length?String(g[0]):C):C};function ns(g,C,$){ua(g,C),0<$.length&&(g.i=null,g.g.set(Un(g,C),k($)),g.h+=$.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(var $=0;$<C.length;$++){var B=C[$];const de=encodeURIComponent(String(B)),Te=this.V(B);for(B=0;B<Te.length;B++){var ie=de;Te[B]!==""&&(ie+="="+encodeURIComponent(String(Te[B]))),g.push(ie)}}return this.i=g.join("&")};function Un(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function Fa(g,C){C&&!g.j&&(Pr(g),g.i=null,g.g.forEach(function($,B){var ie=B.toLowerCase();B!=ie&&(ua(this,B),ns(this,ie,$))},g)),g.j=C}function Eg(g,C){const $=new Xs;if(c.Image){const B=new Image;B.onload=v(fn,$,"TestLoadImage: loaded",!0,C,B),B.onerror=v(fn,$,"TestLoadImage: error",!1,C,B),B.onabort=v(fn,$,"TestLoadImage: abort",!1,C,B),B.ontimeout=v(fn,$,"TestLoadImage: timeout",!1,C,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=g}else C(!1)}function df(g,C){const $=new Xs,B=new AbortController,ie=setTimeout(()=>{B.abort(),fn($,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:B.signal}).then(de=>{clearTimeout(ie),de.ok?fn($,"TestPingServer: ok",!0,C):fn($,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ie),fn($,"TestPingServer: error",!1,C)})}function fn(g,C,$,B,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),B($)}catch{}}function Tg(){this.g=new Ht}function hf(g,C,$){const B=$||"";try{Ji(g,function(ie,de){let Te=ie;h(ie)&&(Te=Wt(ie)),C.push(B+de+"="+encodeURIComponent(Te))})}catch(ie){throw C.push(B+"type="+encodeURIComponent("_badmap")),ie}}function fi(g){this.l=g.Ub||null,this.j=g.eb||!1}w(fi,Vr),fi.prototype.g=function(){return new ao(this.l,this.j)},fi.prototype.i=(function(g){return function(){return g}})({});function ao(g,C){zt.call(this),this.D=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ao,zt),t=ao.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=C,this.readyState=1,fa(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(C.body=g),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ff(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function ff(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?ha(this):fa(this),this.readyState==3&&ff(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,ha(this))},t.Qa=function(g){this.g&&(this.response=g,ha(this))},t.ga=function(){this.g&&ha(this)};function ha(g){g.readyState=4,g.l=null,g.j=null,g.v=null,fa(g)}t.setRequestHeader=function(g,C){this.u.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var $=C.next();!$.done;)$=$.value,g.push($[0]+": "+$[1]),$=C.next();return g.join(`\r
`)};function fa(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function mi(g){let C="";return O(g,function($,B){C+=B,C+=":",C+=$,C+=`\r
`}),C}function as(g,C,$){e:{for(B in $){var B=!1;break e}B=!0}B||($=mi($),typeof g=="string"?$!=null&&encodeURIComponent(String($)):Tt(g,C,$))}function Vt(g){zt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Vt,zt);var Ag=/^https?$/i,xu=["POST","PUT"];t=Vt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,C,$,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():la.g(),this.v=this.o?cl(this.o):cl(la),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(de){io(this,de);return}if(g=$||"",$=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ie in B)$.set(ie,B[ie]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const de of B.keys())$.set(de,B.get(de));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from($.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(xu,C,void 0))||B||ie||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Te]of $)this.g.setRequestHeader(de,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wl(this),this.u=!0,this.g.send(g),this.u=!1}catch(de){io(this,de)}};function io(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.m=5,bl(g),Sn(g)}function bl(g){g.A||(g.A=!0,jt(g,"complete"),jt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,jt(this,"complete"),jt(this,"abort"),Sn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sn(this,!0)),Vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},t.bb=function(){vu(this)};function vu(g){if(g.h&&typeof o<"u"&&(!g.v[1]||mn(g)!=4||g.Z()!=2)){if(g.u&&mn(g)==4)Qs(g.Ea,0,g);else if(jt(g,"readystatechange"),mn(g)==4){g.h=!1;try{const Te=g.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var $;if(!($=C)){var B;if(B=Te===0){var ie=String(g.D).match(ro)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),B=!Ag.test(ie?ie.toLowerCase():"")}$=B}if($)jt(g,"complete"),jt(g,"success");else{g.m=6;try{var de=2<mn(g)?g.g.statusText:""}catch{de=""}g.l=de+" ["+g.Z()+"]",bl(g)}}finally{Sn(g)}}}}function Sn(g,C){if(g.g){wl(g);const $=g.g,B=g.v[0]?()=>{}:null;g.g=null,g.v=null,C||jt(g,"ready");try{$.onreadystatechange=B}catch{}}}function wl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function mn(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),br(C)}};function bu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function kl(g){const C={};g=(g.g&&2<=mn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<g.length;B++){if(S(g[B]))continue;var $=A(g[B]);const ie=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const de=C[ie]||[];C[ie]=de,de.push($)}T(C,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(g,C,$){return $&&$.internalChannelParams&&$.internalChannelParams[g]||C}function wu(g){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,g),this.cb=Va("retryDelaySeedMs",1e4,g),this.Wa=Va("forwardChannelMaxRetries",2,g),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new to(g&&g.concurrentRequestLimit),this.Da=new Tg,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wu.prototype,t.la=8,t.G=1,t.connect=function(g,C,$,B){tr(0),this.W=g,this.H=C||{},$&&B!==void 0&&(this.H.OSID=$,this.H.OAID=B),this.F=this.X,this.I=yf(this,null,this.W),Ua(this)};function Ir(g){if(_l(g),g.G==3){var C=g.U++,$=Nn(g.I);if(Tt($,"SID",g.K),Tt($,"RID",C),Tt($,"TYPE","terminate"),pi(g,$),C=new ca(g,g.j,C),C.L=2,C.v=ts(Nn($)),$=!1,c.navigator&&c.navigator.sendBeacon)try{$=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!$&&c.Image&&(new Image().src=C.v,$=!0),$||(C.g=xf(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Ct(C)}gf(g)}function ma(g){g.g&&(ku(g),g.g.cancel(),g.g=null)}function _l(g){ma(g),g.u&&(c.clearTimeout(g.u),g.u=null),Sl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Ua(g){if(!jn(g.h)&&!g.s){g.s=!0;var C=g.Ga;G||ne(),Y||(G(),Y=!0),te.add(C,g),g.B=0}}function Cg(g,C){return nf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=C.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=sa(y(g.Ga,g,C),pf(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ie=new ca(this,this.j,g);let de=this.o;if(this.S&&(de?(de=R(de),D(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var C=0,$=0;$<this.i.length;$++){t:{var B=this.i[$];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(C+=B,4096<C){C=$;break e}if(C===4096||$===this.i.length-1){C=$+1;break e}}C=1e3}else C=1e3;C=is(this,ie,C),$=Nn(this.I),Tt($,"RID",g),Tt($,"CVER",22),this.D&&Tt($,"X-HTTP-Session-Id",this.D),pi(this,$),de&&(this.O?C="headers="+encodeURIComponent(String(mi(de)))+"&"+C:this.m&&as($,this.m,de)),gu(this.h,ie),this.Ua&&Tt($,"TYPE","init"),this.P?(Tt($,"$req",C),Tt($,"SID","null"),ie.T=!0,gl(ie,$,null)):gl(ie,$,C),this.G=2}}else this.G==3&&(g?jl(this,g):this.i.length==0||jn(this.h)||jl(this))};function jl(g,C){var $;C?$=C.l:$=g.U++;const B=Nn(g.I);Tt(B,"SID",g.K),Tt(B,"RID",$),Tt(B,"AID",g.T),pi(g,B),g.m&&g.o&&as(B,g.m,g.o),$=new ca(g,g.j,$,g.B+1),g.m===null&&($.H=g.o),C&&(g.i=C.D.concat(g.i)),C=is(g,$,1e3),$.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),gu(g.h,$),gl($,B,C)}function pi(g,C){g.H&&O(g.H,function($,B){Tt(C,B,$)}),g.l&&Ji({},function($,B){Tt(C,B,$)})}function is(g,C,$){$=Math.min(g.i.length,$);var B=g.l?y(g.l.Na,g.l,g):null;e:{var ie=g.i;let de=-1;for(;;){const Te=["count="+$];de==-1?0<$?(de=ie[0].g,Te.push("ofs="+de)):de=0:Te.push("ofs="+de);let wt=!0;for(let dr=0;dr<$;dr++){let dt=ie[dr].g;const wr=ie[dr].map;if(dt-=de,0>dt)de=Math.max(0,ie[dr].g-100),wt=!1;else try{hf(wr,Te,"req"+dt+"_")}catch{B&&B(wr)}}if(wt){B=Te.join("&");break e}}}return g=g.i.splice(0,$),C.D=g,B}function so(g){if(!g.g&&!g.u){g.Y=1;var C=g.Fa;G||ne(),Y||(G(),Y=!0),te.add(C,g),g.v=0}}function Nl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=sa(y(g.Fa,g),pf(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=sa(y(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tr(10),ma(this),mf(this))};function ku(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function mf(g){g.g=new ca(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var C=Nn(g.qa);Tt(C,"RID","rpc"),Tt(C,"SID",g.K),Tt(C,"AID",g.T),Tt(C,"CI",g.F?"0":"1"),!g.F&&g.ja&&Tt(C,"TO",g.ja),Tt(C,"TYPE","xmlhttp"),pi(g,C),g.m&&g.o&&as(C,g.m,g.o),g.L&&(g.g.I=g.L);var $=g.g;g=g.ia,$.L=1,$.v=ts(Nn(C)),$.m=null,$.P=!0,mu($,g)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),Nl(this),tr(19))};function Sl(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function El(g,C){var $=null;if(g.g==C){Sl(g),ku(g),g.g=null;var B=2}else if(en(g.h,C))$=C.D,af(g.h,C),B=1;else return;if(g.G!=0){if(C.o)if(B==1){$=C.m?C.m.length:0,C=Date.now()-C.F;var ie=g.B;B=Ys(),jt(B,new hl(B,$)),Ua(g)}else so(g);else if(ie=C.s,ie==3||ie==0&&0<C.X||!(B==1&&Cg(g,C)||B==2&&Nl(g)))switch($&&0<$.length&&(C=g.h,C.i=C.i.concat($)),ie){case 1:gi(g,5);break;case 4:gi(g,10);break;case 3:gi(g,6);break;default:gi(g,2)}}}function pf(g,C){let $=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||($*=2),$*C}function gi(g,C){if(g.j.info("Error code "+C),C==2){var $=y(g.fb,g),B=g.Xa;const ie=!B;B=new hi(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||no(B,"https"),ts(B),ie?Eg(B.toString(),$):df(B.toString(),$)}else tr(2);g.G=0,g.l&&g.l.sa(C),gf(g),_l(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function gf(g){if(g.G=0,g.ka=[],g.l){const C=sf(g.h);(C.length!=0||g.i.length!=0)&&(b(g.ka,C),b(g.ka,g.i),g.h.i.length=0,k(g.i),g.i.length=0),g.l.ra()}}function yf(g,C,$){var B=$ instanceof hi?Nn($):new hi($);if(B.g!="")C&&(B.g=C+"."+B.g),Zi(B,B.s);else{var ie=c.location;B=ie.protocol,C=C?C+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new hi(null);B&&no(de,B),C&&(de.g=C),ie&&Zi(de,ie),$&&(de.l=$),B=de}return $=g.D,C=g.ya,$&&C&&Tt(B,$,C),Tt(B,"VER",g.la),pi(g,B),B}function xf(g,C,$){if(C&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Ca&&!g.pa?new Vt(new fi({eb:$})):new Vt(g.pa),C.Ha(g.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}t=_u.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(g,C){return new tn(g,C)};function tn(g,C){zt.call(this),this.g=new wu(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(g?g["X-WebChannel-Client-Profile"]=C.va:g={"X-WebChannel-Client-Profile":C.va}),this.g.S=g,(g=C&&C.Sb)&&!S(g)&&(this.g.m=g),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!S(C)&&(this.g.D=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new Ba(this)}w(tn,zt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ir(this.g)},tn.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var $={};$.__data__=g,g=$}else this.u&&($={},$.__data__=Wt(g),g=$);C.i.push(new rf(C.Ya++,g)),C.G==3&&Ua(C)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ir(this.g),delete this.g,tn.aa.N.call(this)};function vf(g){Ma.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const $ in C){g=$;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}w(vf,Ma);function bf(){dl.call(this),this.status=1}w(bf,dl);function Ba(g){this.g=g}w(Ba,_u),Ba.prototype.ua=function(){jt(this.g,"a")},Ba.prototype.ta=function(g){jt(this.g,new vf(g))},Ba.prototype.sa=function(g){jt(this.g,new bf)},Ba.prototype.ra=function(){jt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,bM=function(){return new Tl},vM=function(){return Ys()},xM=La,Ek={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,Wm=ml,Jh.COMPLETE="complete",yM=Jh,ul.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",zt.prototype.listen=zt.prototype.K,od=ul,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,gM=Vt}).apply(typeof gm<"u"?gm:typeof self<"u"?self:typeof window<"u"?window:{});const _T="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new mj("@firebase/firestore");function Ku(){return qo.logLevel}function $e(t,...e){if(qo.logLevel<=ct.DEBUG){const r=e.map(Ej);qo.debug(`Firestore (${Jc}): ${t}`,...r)}}function Vi(t,...e){if(qo.logLevel<=ct.ERROR){const r=e.map(Ej);qo.error(`Firestore (${Jc}): ${t}`,...r)}}function vc(t,...e){if(qo.logLevel<=ct.WARN){const r=e.map(Ej);qo.warn(`Firestore (${Jc}): ${t}`,...r)}}function Ej(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t="Unexpected state"){const e=`FIRESTORE (${Jc}) INTERNAL ASSERTION FAILED: `+t;throw Vi(e),new Error(e)}function _t(t,e){t||Qe()}function Ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends li{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Gr.UNAUTHENTICATED)))}shutdown(){}}class B7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class q7{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){_t(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let s=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Di,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Di)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new wM(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Gr(e)}}class z7{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class W7{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new z7(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Gr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class H7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){_t(this.o===void 0);const n=s=>{s.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const a=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>a(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(_t(typeof r.token=="string"),this.R=r.token,new H7(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=K7(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function gt(t,e){return t<e?-1:t>e?1:0}function bc(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new xr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Je(e)}static min(){return new Je(new xr(0,0))}static max(){return new Je(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r,n){r===void 0?r=0:r>e.length&&Qe(),n===void 0?n=e.length-r:n>e.length-r&&Qe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Id.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Id?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class $t extends Id{construct(e,r,n){return new $t(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ie(ve.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new $t(r)}static emptyPath(){return new $t([])}}const Q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends Id{construct(e,r,n){return new Lr(e,r,n)}static isValidIdentifier(e){return Q7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Ie(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new Ie(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ie(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(s(),a++)}if(s(),o)throw new Ie(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(r)}static emptyPath(){return new Lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve($t.fromString(e))}static fromName(e){return new Ve($t.fromString(e).popFirst(5))}static empty(){return new Ve($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return $t.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new $t(e.slice()))}}function Y7(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Je.fromTimestamp(n===1e9?new xr(r+1,0):new xr(r,n));return new $s(a,Ve.empty(),e)}function X7(t){return new $s(t.readTime,t.key,-1)}class $s{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new $s(Je.min(),Ve.empty(),-1)}static max(){return new $s(Je.max(),Ve.empty(),-1)}}function J7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ve.comparator(t.documentKey,e.documentKey),r!==0?r:gt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==Z7)throw t;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new _e(((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof _e?r:_e.resolve(r)}catch(r){return _e.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):_e.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):_e.reject(r)}static resolve(e){return new _e(((r,n)=>{r(e)}))}static reject(e){return new _e(((r,n)=>{n(e)}))}static waitFor(e){return new _e(((r,n)=>{let a=0,s=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++s,o&&s===a&&r()}),(d=>n(d)))})),o=!0,s===a&&r()}))}static or(e){let r=_e.resolve(!1);for(const n of e)r=r.next((a=>a?_e.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,s)=>{n.push(r.call(this,a,s))})),this.waitFor(n)}static mapArray(e,r){return new _e(((n,a)=>{const s=e.length,o=new Array(s);let c=0;for(let d=0;d<s;d++){const h=d;r(e[h]).next((m=>{o[h]=m,++c,c===s&&n(o)}),(m=>a(m)))}}))}static doWhile(e,r){return new _e(((n,a)=>{const s=()=>{e()===!0?r().next((()=>{s()}),a):n()};s()}))}}function t8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ih(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tj.oe=-1;function y0(t){return t==null}function sp(t){return t===0&&1/t==-1/0}function r8(t){return typeof t=="number"&&Number.isInteger(t)&&!sp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function tl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function _M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,r){this.comparator=e,this.root=r||Mr.EMPTY}insert(e,r){return new Qt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ym(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ym(this.root,e,this.comparator,!1)}getReverseIterator(){return new ym(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ym(this.root,e,this.comparator,!0)}}class ym{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mr{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Mr.RED,this.left=a??Mr.EMPTY,this.right=s??Mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Mr(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Mr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Mr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new NT(this.data.getIterator())}getIteratorFrom(e){return new NT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new $r(this.comparator);return r.data=e,r}}class NT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Lr.comparator)}static empty(){return new Rn([])}unionWith(e){let r=new $r(Lr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Rn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return bc(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jM("Invalid base64 string: "+s):s}})(e);return new Fr(r)}static fromUint8Array(e){const r=(function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s})(e);return new Fr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const n8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(_t(!!t),typeof t=="string"){let e=0;const r=n8.exec(t);if(_t(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:nr(t.seconds),nanos:nr(t.nanos)}}function nr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zo(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Cj(t){const e=t.mapValue.fields.__previous_value__;return Aj(e)?Cj(e):e}function Od(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,r,n,a,s,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Rd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Rd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm={mapValue:{}};function Wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Aj(t)?4:s8(t)?9007199254740991:i8(t)?10:11:Qe()}function ni(t,e){if(t===e)return!0;const r=Wo(t);if(r!==Wo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return(function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=Fs(a.timestampValue),c=Fs(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,s){return zo(a.bytesValue).isEqual(zo(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,s){return nr(a.geoPointValue.latitude)===nr(s.geoPointValue.latitude)&&nr(a.geoPointValue.longitude)===nr(s.geoPointValue.longitude)})(t,e);case 2:return(function(a,s){if("integerValue"in a&&"integerValue"in s)return nr(a.integerValue)===nr(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=nr(a.doubleValue),c=nr(s.doubleValue);return o===c?sp(o)===sp(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return bc(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return(function(a,s){const o=a.mapValue.fields||{},c=s.mapValue.fields||{};if(jT(o)!==jT(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!ni(o[d],c[d])))return!1;return!0})(t,e);default:return Qe()}}function Dd(t,e){return(t.values||[]).find((r=>ni(r,e)))!==void 0}function wc(t,e){if(t===e)return 0;const r=Wo(t),n=Wo(e);if(r!==n)return gt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return gt(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const c=nr(s.integerValue||s.doubleValue),d=nr(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return ST(t.timestampValue,e.timestampValue);case 4:return ST(Od(t),Od(e));case 5:return gt(t.stringValue,e.stringValue);case 6:return(function(s,o){const c=zo(s),d=zo(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const c=s.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const m=gt(c[h],d[h]);if(m!==0)return m}return gt(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const c=gt(nr(s.latitude),nr(o.latitude));return c!==0?c:gt(nr(s.longitude),nr(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ET(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var c,d,h,m;const p=s.fields||{},y=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,w=(d=y.value)===null||d===void 0?void 0:d.arrayValue,k=gt(((h=v?.values)===null||h===void 0?void 0:h.length)||0,((m=w?.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:ET(v,w)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===xm.mapValue&&o===xm.mapValue)return 0;if(s===xm.mapValue)return 1;if(o===xm.mapValue)return-1;const c=s.fields||{},d=Object.keys(c),h=o.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const y=gt(d[p],m[p]);if(y!==0)return y;const v=wc(c[d[p]],h[m[p]]);if(v!==0)return v}return gt(d.length,m.length)})(t.mapValue,e.mapValue);default:throw Qe()}}function ST(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gt(t,e);const r=Fs(t),n=Fs(e),a=gt(r.seconds,n.seconds);return a!==0?a:gt(r.nanos,n.nanos)}function ET(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=wc(r[a],n[a]);if(s)return s}return gt(r.length,n.length)}function kc(t){return Tk(t)}function Tk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Fs(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return zo(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Ve.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Tk(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${Tk(r.fields[o])}`;return a+"}"})(t.mapValue):Qe()}function TT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ak(t){return!!t&&"integerValue"in t}function Pj(t){return!!t&&"arrayValue"in t}function AT(t){return!!t&&"nullValue"in t}function CT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hm(t){return!!t&&"mapValue"in t}function i8(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function gd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tl(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=gd(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gd(t.arrayValue.values[r]);return e}return Object.assign({},t)}function s8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Hm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(r)}setAll(e){let r=Lr.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=gd(o):a.push(c.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());Hm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Hm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){tl(r,((a,s)=>e[a]=s));for(const a of n)delete e[a]}clone(){return new wn(gd(this.value))}}function NM(t){const e=[];return tl(t.fields,((r,n)=>{const a=new Lr([r]);if(Hm(n)){const s=NM(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,r,n,a,s,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Kr(e,0,Je.min(),Je.min(),Je.min(),wn.empty(),0)}static newFoundDocument(e,r,n,a){return new Kr(e,1,r,Je.min(),n,a,0)}static newNoDocument(e,r){return new Kr(e,2,r,Je.min(),Je.min(),wn.empty(),0)}static newUnknownDocument(e,r){return new Kr(e,3,r,Je.min(),Je.min(),wn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,r){this.position=e,this.inclusive=r}}function PT(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Ve.comparator(Ve.fromName(o.referenceValue),r.key):n=wc(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function IT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ni(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r="asc"){this.field=e,this.dir=r}}function o8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SM=class{};class cr extends SM{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new c8(e,r,n):r==="array-contains"?new h8(e,n):r==="in"?new f8(e,n):r==="not-in"?new m8(e,n):r==="array-contains-any"?new p8(e,n):new cr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new u8(e,n):new d8(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(wc(r,this.value)):r!==null&&Wo(this.value)===Wo(r)&&this.matchesComparison(wc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ia extends SM{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Ia(e,r)}matches(e){return EM(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function EM(t){return t.op==="and"}function TM(t){return l8(t)&&EM(t)}function l8(t){for(const e of t.filters)if(e instanceof Ia)return!1;return!0}function Ck(t){if(t instanceof cr)return t.field.canonicalString()+t.op.toString()+kc(t.value);if(TM(t))return t.filters.map((e=>Ck(e))).join(",");{const e=t.filters.map((r=>Ck(r))).join(",");return`${t.op}(${e})`}}function AM(t,e){return t instanceof cr?(function(n,a){return a instanceof cr&&n.op===a.op&&n.field.isEqual(a.field)&&ni(n.value,a.value)})(t,e):t instanceof Ia?(function(n,a){return a instanceof Ia&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((s,o,c)=>s&&AM(o,a.filters[c])),!0):!1})(t,e):void Qe()}function CM(t){return t instanceof cr?(function(r){return`${r.field.canonicalString()} ${r.op} ${kc(r.value)}`})(t):t instanceof Ia?(function(r){return r.op.toString()+" {"+r.getFilters().map(CM).join(" ,")+"}"})(t):"Filter"}class c8 extends cr{constructor(e,r,n){super(e,r,n),this.key=Ve.fromName(n.referenceValue)}matches(e){const r=Ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class u8 extends cr{constructor(e,r){super(e,"in",r),this.keys=PM("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class d8 extends cr{constructor(e,r){super(e,"not-in",r),this.keys=PM("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function PM(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Ve.fromName(n.referenceValue)))}class h8 extends cr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Pj(r)&&Dd(r.arrayValue,this.value)}}class f8 extends cr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Dd(this.value.arrayValue,r)}}class m8 extends cr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Dd(this.value.arrayValue,r)}}class p8 extends cr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Pj(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Dd(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,r=null,n=[],a=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function OT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new g8(t,e,r,n,a,s,o)}function Ij(t){const e=Ze(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Ck(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),y0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>kc(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>kc(n))).join(",")),e.ue=r}return e.ue}function Oj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!o8(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!AM(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IT(t.startAt,e.startAt)&&IT(t.endAt,e.endAt)}function Pk(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,r=null,n=[],a=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function y8(t,e,r,n,a,s,o,c){return new Oh(t,e,r,n,a,s,o,c)}function x0(t){return new Oh(t)}function RT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IM(t){return t.collectionGroup!==null}function yd(t){const e=Ze(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new $r(Lr.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new lp(s,n))})),r.has(Lr.keyField().canonicalString())||e.ce.push(new lp(Lr.keyField(),n))}return e.ce}function Za(t){const e=Ze(t);return e.le||(e.le=x8(e,yd(t))),e.le}function x8(t,e){if(t.limitType==="F")return OT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const s=a.dir==="desc"?"asc":"desc";return new lp(a.field,s)}));const r=t.endAt?new op(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new op(t.startAt.position,t.startAt.inclusive):null;return OT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ik(t,e){const r=t.filters.concat([e]);return new Oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Ok(t,e,r){return new Oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function v0(t,e){return Oj(Za(t),Za(e))&&t.limitType===e.limitType}function OM(t){return`${Ij(Za(t))}|lt:${t.limitType}`}function ec(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>CM(a))).join(", ")}]`),y0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>kc(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>kc(a))).join(",")),`Target(${n})`})(Za(t))}; limitType=${t.limitType})`}function b0(t,e){return e.isFoundDocument()&&(function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ve.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,a){for(const s of yd(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=PT(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,yd(n),a)||n.endAt&&!(function(o,c,d){const h=PT(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,yd(n),a))})(t,e)}function v8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RM(t){return(e,r)=>{let n=!1;for(const a of yd(t)){const s=b8(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function b8(t,e,r){const n=t.field.isKeyField()?Ve.comparator(e.key,r.key):(function(s,o,c){const d=o.data.field(s),h=c.data.field(s);return d!==null&&h!==null?wc(d,h):Qe()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,((r,n)=>{for(const[a,s]of n)e(a,s)}))}isEmpty(){return _M(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=new Qt(Ve.comparator);function Ui(){return w8}const DM=new Qt(Ve.comparator);function ld(...t){let e=DM;for(const r of t)e=e.insert(r.key,r);return e}function MM(t){let e=DM;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function To(){return xd()}function LM(){return xd()}function xd(){return new Zc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const k8=new Qt(Ve.comparator),_8=new $r(Ve.comparator);function ot(...t){let e=_8;for(const r of t)e=e.add(r);return e}const j8=new $r(gt);function N8(){return j8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function $M(t){return{integerValue:""+t}}function S8(t,e){return r8(e)?$M(e):Rj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this._=void 0}}function E8(t,e,r){return t instanceof Md?(function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&Aj(s)&&(s=Cj(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}})(r,e):t instanceof Ld?VM(t,e):t instanceof $d?UM(t,e):(function(a,s){const o=FM(a,s),c=DT(o)+DT(a.Pe);return Ak(o)&&Ak(a.Pe)?$M(c):Rj(a.serializer,c)})(t,e)}function T8(t,e,r){return t instanceof Ld?VM(t,e):t instanceof $d?UM(t,e):r}function FM(t,e){return t instanceof cp?(function(n){return Ak(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class Md extends w0{}class Ld extends w0{constructor(e){super(),this.elements=e}}function VM(t,e){const r=BM(e);for(const n of t.elements)r.some((a=>ni(a,n)))||r.push(n);return{arrayValue:{values:r}}}class $d extends w0{constructor(e){super(),this.elements=e}}function UM(t,e){let r=BM(e);for(const n of t.elements)r=r.filter((a=>!ni(a,n)));return{arrayValue:{values:r}}}class cp extends w0{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function DT(t){return nr(t.integerValue||t.doubleValue)}function BM(t){return Pj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,r){this.field=e,this.transform=r}}function C8(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Ld&&a instanceof Ld||n instanceof $d&&a instanceof $d?bc(n.elements,a.elements,ni):n instanceof cp&&a instanceof cp?ni(n.Pe,a.Pe):n instanceof Md&&a instanceof Md})(t.transform,e.transform)}class P8{constructor(e,r){this.version=e,this.transformResults=r}}class un{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class k0{}function qM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _0(t.key,un.none()):new Rh(t.key,t.data,un.none());{const r=t.data,n=wn.empty();let a=new $r(Lr.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new zs(t.key,n,new Rn(a.toArray()),un.none())}}function I8(t,e,r){t instanceof Rh?(function(a,s,o){const c=a.value.clone(),d=LT(a.fieldTransforms,s,o.transformResults);c.setAll(d),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof zs?(function(a,s,o){if(!Gm(a.precondition,s))return void s.convertToUnknownDocument(o.version);const c=LT(a.fieldTransforms,s,o.transformResults),d=s.data;d.setAll(zM(a)),d.setAll(c),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function vd(t,e,r,n){return t instanceof Rh?(function(s,o,c,d){if(!Gm(s.precondition,o))return c;const h=s.value.clone(),m=$T(s.fieldTransforms,d,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof zs?(function(s,o,c,d){if(!Gm(s.precondition,o))return c;const h=$T(s.fieldTransforms,d,o),m=o.data;return m.setAll(zM(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(s,o,c){return Gm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function O8(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=FM(n.transform,a||null);s!=null&&(r===null&&(r=wn.empty()),r.set(n.field,s))}return r||null}function MT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&bc(n,a,((s,o)=>C8(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rh extends k0{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zs extends k0{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zM(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function LT(t,e,r){const n=new Map;_t(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,c=e.data.field(s.field);n.set(s.field,T8(o,c,r[a]))}return n}function $T(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,E8(s,o,e))}return n}class _0 extends k0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R8 extends k0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&I8(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=vd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=vd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=LM();return this.mutations.forEach((a=>{const s=e.get(a.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=r.has(a.key)?null:c;const d=qM(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Je.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),ot())}isEqual(e){return this.batchId===e.batchId&&bc(this.mutations,e.mutations,((r,n)=>MT(r,n)))&&bc(this.baseMutations,e.baseMutations,((r,n)=>MT(r,n)))}}class Dj{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){_t(e.mutations.length===n.length);let a=(function(){return k8})();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new Dj(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or,ht;function $8(t){switch(t){default:return Qe();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function WM(t){if(t===void 0)return Vi("GRPC error has no .code"),ve.UNKNOWN;switch(t){case or.OK:return ve.OK;case or.CANCELLED:return ve.CANCELLED;case or.UNKNOWN:return ve.UNKNOWN;case or.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case or.INTERNAL:return ve.INTERNAL;case or.UNAVAILABLE:return ve.UNAVAILABLE;case or.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case or.NOT_FOUND:return ve.NOT_FOUND;case or.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case or.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case or.ABORTED:return ve.ABORTED;case or.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case or.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case or.DATA_LOSS:return ve.DATA_LOSS;default:return Qe()}}(ht=or||(or={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=new Ro([4294967295,4294967295],0);function FT(t){const e=F8().encode(t),r=new pM;return r.update(e),new Uint8Array(r.digest())}function VT(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ro([r,n],0),new Ro([a,s],0)]}class Mj{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new cd(`Invalid padding: ${r}`);if(n<0)throw new cd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new cd(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new cd(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ro.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Ro.fromNumber(n)));return a.compare(V8)===1&&(a=new Ro([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=FT(e),[n,a]=VT(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Mj(s,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=FT(e),[n,a]=VT(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class cd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new j0(Je.min(),a,new Qt(gt),Ui(),ot())}}class Dh{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Dh(n,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class HM{constructor(e,r){this.targetId=e,this.me=r}}class GM{constructor(e,r,n=Fr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class UT{constructor(){this.fe=0,this.ge=qT(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ot(),r=ot(),n=ot();return this.ge.forEach(((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Qe()}})),new Dh(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=qT()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class U8{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=BT(),this.Qe=new Qt(gt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Qe()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(Pk(s))if(n===0){const o=new Ve(s.path);this.Ue(r,o,Kr.newNoDocument(o,Je.min()))}else _t(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,c;try{o=zo(n).toUint8Array()}catch(d){if(d instanceof jM)return vc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Mj(o,a,s)}catch(d){return vc(d instanceof cd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,s,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((s,o)=>{const c=this.Je(o);if(c){if(s.current&&Pk(c.target)){const d=new Ve(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Kr.newNoDocument(d,e))}s.be&&(r.set(o,s.ve()),s.Ce())}}));let n=ot();this.qe.forEach(((s,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.ke.forEach(((s,o)=>o.setReadTime(e)));const a=new j0(e,r,this.Qe,this.ke,n);return this.ke=Ui(),this.qe=BT(),this.Qe=new Qt(gt),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new UT,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new $r(gt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||$e("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UT),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function BT(){return new Qt(Ve.comparator)}function qT(){return new Qt(Ve.comparator)}const B8={asc:"ASCENDING",desc:"DESCENDING"},q8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z8={and:"AND",or:"OR"};class W8{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Rk(t,e){return t.useProto3Json||y0(e)?e:{value:e}}function up(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H8(t,e){return up(t,e.toTimestamp())}function ei(t){return _t(!!t),Je.fromTimestamp((function(r){const n=Fs(r);return new xr(n.seconds,n.nanos)})(t))}function Lj(t,e){return Dk(t,e).canonicalString()}function Dk(t,e){const r=(function(a){return new $t(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function QM(t){const e=$t.fromString(t);return _t(e4(e)),e}function Mk(t,e){return Lj(t.databaseId,e.path)}function lx(t,e){const r=QM(e);if(r.get(1)!==t.databaseId.projectId)throw new Ie(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ie(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ve(XM(r))}function YM(t,e){return Lj(t.databaseId,e)}function G8(t){const e=QM(t);return e.length===4?$t.emptyPath():XM(e)}function Lk(t){return new $t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XM(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zT(t,e,r){return{name:Mk(t,e),fields:r.value.mapValue.fields}}function K8(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Qe()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(_t(m===void 0||typeof m=="string"),Fr.fromBase64String(m||"")):(_t(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Fr.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const m=h.code===void 0?ve.UNKNOWN:WM(h.code);return new Ie(m,h.message||"")})(o);r=new GM(n,a,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=lx(t,n.document.name),s=ei(n.document.updateTime),o=n.document.createTime?ei(n.document.createTime):Je.min(),c=new wn({mapValue:{fields:n.document.fields}}),d=Kr.newFoundDocument(a,s,o,c),h=n.targetIds||[],m=n.removedTargetIds||[];r=new Km(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=lx(t,n.document),s=n.readTime?ei(n.readTime):Je.min(),o=Kr.newNoDocument(a,s),c=n.removedTargetIds||[];r=new Km([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=lx(t,n.document),s=n.removedTargetIds||[];r=new Km([],s,a,null)}else{if(!("filter"in e))return Qe();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new L8(a,s),c=n.targetId;r=new HM(c,o)}}return r}function Q8(t,e){let r;if(e instanceof Rh)r={update:zT(t,e.key,e.value)};else if(e instanceof _0)r={delete:Mk(t,e.key)};else if(e instanceof zs)r={update:zT(t,e.key,e.data),updateMask:aU(e.fieldMask)};else{if(!(e instanceof R8))return Qe();r={verify:Mk(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,o){const c=o.transform;if(c instanceof Md)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ld)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $d)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cp)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Qe()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,s){return s.updateTime!==void 0?{updateTime:H8(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Qe()})(t,e.precondition)),r}function Y8(t,e){return t&&t.length>0?(_t(e!==void 0),t.map((r=>(function(a,s){let o=a.updateTime?ei(a.updateTime):ei(s);return o.isEqual(Je.min())&&(o=ei(s)),new P8(o,a.transformResults||[])})(r,e)))):[]}function X8(t,e){return{documents:[YM(t,e.path)]}}function J8(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YM(t,a);const s=(function(h){if(h.length!==0)return ZM(Ia.create(h,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const o=(function(h){if(h.length!==0)return h.map((m=>(function(y){return{field:tc(y.field),direction:tU(y.dir)}})(m)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=Rk(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function Z8(t){let e=G8(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){_t(n===1);const m=r.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let s=[];r.where&&(s=(function(p){const y=JM(p);return y instanceof Ia&&TM(y)?y.getFilters():[y]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((y=>(function(w){return new lp(rc(w.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,y0(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(p){const y=!!p.before,v=p.values||[];return new op(v,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(p){const y=!p.before,v=p.values||[];return new op(v,y)})(r.endAt)),y8(e,a,o,s,c,"F",d,h)}function eU(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function JM(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=rc(r.unaryFilter.field);return cr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=rc(r.unaryFilter.field);return cr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rc(r.unaryFilter.field);return cr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rc(r.unaryFilter.field);return cr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}})(t):t.fieldFilter!==void 0?(function(r){return cr.create(rc(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Ia.create(r.compositeFilter.filters.map((n=>JM(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Qe()}})(r.compositeFilter.op))})(t):Qe()}function tU(t){return B8[t]}function rU(t){return q8[t]}function nU(t){return z8[t]}function tc(t){return{fieldPath:t.canonicalString()}}function rc(t){return Lr.fromServerFormat(t.fieldPath)}function ZM(t){return t instanceof cr?(function(r){if(r.op==="=="){if(CT(r.value))return{unaryFilter:{field:tc(r.field),op:"IS_NAN"}};if(AT(r.value))return{unaryFilter:{field:tc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(CT(r.value))return{unaryFilter:{field:tc(r.field),op:"IS_NOT_NAN"}};if(AT(r.value))return{unaryFilter:{field:tc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(r.field),op:rU(r.op),value:r.value}}})(t):t instanceof Ia?(function(r){const n=r.getFilters().map((a=>ZM(a)));return n.length===1?n[0]:{compositeFilter:{op:nU(r.op),filters:n}}})(t):Qe()}function aU(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function e4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,r,n,a,s=Je.min(),o=Je.min(),c=Fr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.ct=e}}function sU(t){const e=Z8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ok(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.un=new lU}addToCollectionParentIndex(e,r){return this.un.add(r),_e.resolve()}getCollectionParents(e,r){return _e.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return _e.resolve()}deleteFieldIndex(e,r){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,r){return _e.resolve()}getDocumentsMatchingTarget(e,r){return _e.resolve(null)}getIndexType(e,r){return _e.resolve(0)}getFieldIndexes(e,r){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,r){return _e.resolve($s.min())}getMinOffsetFromCollectionGroup(e,r){return _e.resolve($s.min())}updateCollectionGroup(e,r,n){return _e.resolve()}updateIndexEntries(e,r){return _e.resolve()}}class lU{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new $r($t.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new $r($t.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _c(0)}static kn(){return new _c(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this.changes=new Zc((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Kr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?_e.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&vd(n.mutation,a,Rn.empty(),xr.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,ot()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=ot()){const a=To();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((s=>{let o=ld();return s.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=To();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,ot())))}populateOverlays(e,r,n){const a=[];return n.forEach((s=>{r.has(s)||a.push(s)})),this.documentOverlayCache.getOverlays(e,a).next((s=>{s.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let s=Ui();const o=xd(),c=(function(){return xd()})();return r.forEach(((d,h)=>{const m=n.get(h.key);a.has(h.key)&&(m===void 0||m.mutation instanceof zs)?s=s.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),vd(m.mutation,h,m.mutation.getFieldMask(),xr.now())):o.set(h.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>o.set(h,m))),r.forEach(((h,m)=>{var p;return c.set(h,new uU(m,(p=o.get(h))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=xd();let a=new Qt(((o,c)=>o-c)),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let m=n.get(d)||Rn.empty();m=c.applyToLocalView(h,m),n.set(d,m);const p=(a.get(c.batchId)||ot()).add(d);a=a.insert(c.batchId,p)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,m=d.value,p=LM();m.forEach((y=>{if(!s.has(y)){const v=qM(r.get(y),n.get(y));v!==null&&p.set(y,v),s=s.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return _e.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return Ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):IM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):_e.resolve(To());let c=-1,d=s;return o.next((h=>_e.forEach(h,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(m)?_e.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ot()))).next((m=>({batchId:c,changes:MM(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ve(r)).next((n=>{let a=ld();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=ld();return this.indexManager.getCollectionParents(e,s).next((c=>_e.forEach(c,(d=>{const h=(function(p,y){return new Oh(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((m=>{m.forEach(((p,y)=>{o=o.insert(p,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a)))).next((o=>{s.forEach(((d,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Kr.newInvalidDocument(m)))}));let c=ld();return o.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&vd(m.mutation,h,Rn.empty(),xr.now()),b0(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return _e.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ei(a.createTime)}})(r)),_e.resolve()}getNamedQuery(e,r){return _e.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:sU(a.bundledQuery),readTime:ei(a.readTime)}})(r)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.overlays=new Qt(Ve.comparator),this.Ir=new Map}getOverlay(e,r){return _e.resolve(this.overlays.get(r))}getOverlays(e,r){const n=To();return _e.forEach(r,(a=>this.getOverlay(e,a).next((s=>{s!==null&&n.set(a,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,s)=>{this.ht(e,r,s)})),_e.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),_e.resolve()}getOverlaysForCollection(e,r,n){const a=To(),s=r.length+1,o=new Ve(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>n&&a.set(d.getKey(),d)}return _e.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Qt(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let m=s.get(h.largestBatchId);m===null&&(m=To(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=To(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=a)););return _e.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new M8(r,n));let s=this.Ir.get(r);s===void 0&&(s=ot(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.Tr=new $r(Nr.Er),this.dr=new $r(Nr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Nr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Nr(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Ve(new $t([])),n=new Nr(r,e),a=new Nr(r,e+1),s=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),s.push(o.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ve(new $t([])),n=new Nr(r,e),a=new Nr(r,e+1);let s=ot();return this.dr.forEachInRange([n,a],(o=>{s=s.add(o.key)})),s}containsKey(e){const r=new Nr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Nr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ve.comparator(e.key,r.key)||gt(e.wr,r.wr)}static Ar(e,r){return gt(e.wr,r.wr)||Ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new $r(Nr.Er)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new D8(s,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new Nr(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(o)}lookupMutationBatch(e,r){return _e.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return _e.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Nr(r,0),a=new Nr(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);s.push(c)})),_e.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new $r(gt);return r.forEach((a=>{const s=new Nr(a,0),o=new Nr(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],(c=>{n=n.add(c.wr)}))})),_e.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Ve.isDocumentKey(s)||(s=s.child(""));const o=new Nr(new Ve(s),0);let c=new $r(gt);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),_e.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){_t(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return _e.forEach(r.mutations,(a=>{const s=new Nr(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Nr(r,0),a=this.br.firstAfterOrEqual(n);return _e.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.Mr=e,this.docs=(function(){return new Qt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return _e.resolve(n?n.document.mutableCopy():Kr.newInvalidDocument(r))}getEntries(e,r){let n=Ui();return r.forEach((a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Kr.newInvalidDocument(a))})),_e.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Ui();const o=r.path,c=new Ve(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||J7(X7(m),n)<=0||(a.has(m.key)||b0(r,m))&&(s=s.insert(m.key,m.mutableCopy()))}return _e.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Qe()}Or(e,r){return _e.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new yU(this)}getSize(e){return _e.resolve(this.size)}}class yU extends cU{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),_e.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.persistence=e,this.Nr=new Zc((r=>Ij(r)),Oj),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $j,this.targetCount=0,this.kr=_c.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),_e.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new _c(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,_e.resolve()}updateTargetData(e,r){return this.Kn(r),_e.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),_e.waitFor(s).next((()=>a))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return _e.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),_e.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach((o=>{s.push(a.markPotentiallyOrphaned(e,o))})),_e.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),_e.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return _e.resolve(n)}containsKey(e,r){return _e.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Tj(0),this.Kr=!1,this.Kr=!0,this.$r=new mU,this.referenceDelegate=e(this),this.Ur=new xU(this),this.indexManager=new oU,this.remoteDocumentCache=(function(a){return new gU(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new iU(r),this.Gr=new hU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new fU,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new pU(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){$e("MemoryPersistence","Starting transaction:",e);const a=new bU(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((s=>this.referenceDelegate.jr(a).next((()=>s)))).toPromise().then((s=>(a.raiseOnCommittedEvent(),s)))}Hr(e,r){return _e.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class bU extends e8{constructor(e){super(),this.currentSequenceNumber=e}}class Fj{constructor(e){this.persistence=e,this.Jr=new $j,this.Yr=null}static Zr(e){return new Fj(e)}get Xr(){if(this.Yr)return this.Yr;throw Qe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),_e.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),_e.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),_e.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Xr,(n=>{const a=Ve.fromPath(n);return this.ei(e,a).next((s=>{s||r.removeEntry(a,Je.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return _e.or([()=>_e.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=ot(),a=ot();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new Vj(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return dF()?8:t8(Jr())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.Zi(e,r,a,n).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new wU;return this.Xi(e,r,o).next((c=>{if(s.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>s.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(Ku()<=ct.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",ec(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),_e.resolve()):(Ku()<=ct.DEBUG&&$e("QueryEngine","Query:",ec(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Ku()<=ct.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",ec(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Za(r))):_e.resolve())}Yi(e,r){if(RT(r))return _e.resolve(null);let n=Za(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Ok(r,null,"F"),n=Za(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const o=ot(...s);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Ok(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return RT(r)||a.isEqual(Je.min())?_e.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?_e.resolve(null):(Ku()<=ct.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ec(r)),this.rs(e,o,r,Y7(a,-1)).next((c=>c)))}))}ts(e,r){let n=new $r(RM(e));return r.forEach(((a,s)=>{b0(e,s)&&(n=n.add(s))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Ku()<=ct.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",ec(r)),this.Ji.getDocumentsMatchingQuery(e,r,$s.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((s=>(r.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Qt(gt),this._s=new Zc((s=>Ij(s)),Oj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function jU(t,e,r,n){return new _U(t,e,r,n)}async function t4(t,e){const r=Ze(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const o=[],c=[];let d=ot();for(const h of a){o.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){c.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function NU(t,e){const r=Ze(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,m){const p=h.batch,y=p.keys();let v=_e.resolve();return y.forEach((w=>{v=v.next((()=>m.getEntry(d,w))).next((k=>{const b=h.docVersions.get(w);_t(b!==null),k.version.compareTo(b)<0&&(p.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),m.addEntry(k)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=ot();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function r4(t){const e=Ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function SU(t,e){const r=Ze(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((m,p)=>{const y=a.get(p);if(!y)return;c.push(r.Ur.removeMatchingKeys(s,m.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(s,m.addedDocuments,p))));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Fr.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,n)),a=a.insert(p,v),(function(k,b,N){return k.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,v,m)&&c.push(r.Ur.updateTargetData(s,v))}));let d=Ui(),h=ot();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(s,m))})),c.push(EU(s,o,e.documentUpdates).next((m=>{d=m.Ps,h=m.Is}))),!n.isEqual(Je.min())){const m=r.Ur.getLastRemoteSnapshotVersion(s).next((p=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(m)}return _e.waitFor(c).next((()=>o.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(r.os=a,s)))}function EU(t,e,r){let n=ot(),a=ot();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let o=Ui();return r.forEach(((c,d)=>{const h=s.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Je.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):$e("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function TU(t,e){const r=Ze(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function AU(t,e){const r=Ze(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((s=>s?(a=s,_e.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new As(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function $k(t,e,r){const n=Ze(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Ih(o))throw o;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function WT(t,e,r){const n=Ze(t);let a=Je.min(),s=ot();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,m){const p=Ze(d),y=p._s.get(m);return y!==void 0?_e.resolve(p.os.get(y)):p.Ur.getTargetData(h,m)})(n,o,Za(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{s=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Je.min(),r?s:ot()))).next((c=>(CU(n,v8(e),c),{documents:c,Ts:s})))))}function CU(t,e,r){let n=t.us.get(e)||Je.min();r.forEach(((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}class HT{constructor(){this.activeTargetIds=N8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PU{constructor(){this.so=new HT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new HT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm=null;function cx(){return vm===null?vm=(function(){return 268435456+Math.round(2147483648*Math.random())})():vm++,"0x"+vm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="WebChannelConnection";class DU extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const c=cx(),d=this.xo(r,n.toUriEncodedString());$e("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(r,d,h,a).then((m=>($e("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw vc("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",d,"request:",a),m}))}Lo(r,n,a,s,o,c){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jc})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>r[o]=s)),a&&a.headers.forEach(((s,o)=>r[o]=s))}xo(r,n){const a=OU[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=cx();return new Promise(((o,c)=>{const d=new gM;d.setWithCredentials(!0),d.listenOnce(yM.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Wm.NO_ERROR:const m=d.getResponseJson();$e(Wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case Wm.TIMEOUT:$e(Wr,`RPC '${e}' ${s} timed out`),c(new Ie(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Wm.HTTP_ERROR:const p=d.getStatus();if($e(Wr,`RPC '${e}' ${s} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y?.error;if(v&&v.status&&v.message){const w=(function(b){const N=b.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(N)>=0?N:ve.UNKNOWN})(v.status);c(new Ie(w,v.message))}else c(new Ie(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ie(ve.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{$e(Wr,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(a);$e(Wr,`RPC '${e}' ${s} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=cx(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bM(),c=vM(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const m=s.join("");$e(Wr,`Creating RPC '${e}' stream ${a}: ${m}`,d);const p=o.createWebChannel(m,d);let y=!1,v=!1;const w=new RU({Io:b=>{v?$e(Wr,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(y||($e(Wr,`Opening RPC '${e}' stream ${a} transport.`),p.open(),y=!0),$e(Wr,`RPC '${e}' stream ${a} sending:`,b),p.send(b))},To:()=>p.close()}),k=(b,N,S)=>{b.listen(N,(E=>{try{S(E)}catch(P){setTimeout((()=>{throw P}),0)}}))};return k(p,od.EventType.OPEN,(()=>{v||($e(Wr,`RPC '${e}' stream ${a} transport opened.`),w.yo())})),k(p,od.EventType.CLOSE,(()=>{v||(v=!0,$e(Wr,`RPC '${e}' stream ${a} transport closed`),w.So())})),k(p,od.EventType.ERROR,(b=>{v||(v=!0,vc(Wr,`RPC '${e}' stream ${a} transport errored:`,b),w.So(new Ie(ve.UNAVAILABLE,"The operation could not be completed")))})),k(p,od.EventType.MESSAGE,(b=>{var N;if(!v){const S=b.data[0];_t(!!S);const E=S,P=E.error||((N=E[0])===null||N===void 0?void 0:N.error);if(P){$e(Wr,`RPC '${e}' stream ${a} received error:`,P);const _=P.status;let O=(function(M){const D=or[M];if(D!==void 0)return WM(D)})(_),T=P.message;O===void 0&&(O=ve.INTERNAL,T="Unknown error status: "+_+" with message "+P.message),v=!0,w.So(new Ie(O,T)),p.close()}else $e(Wr,`RPC '${e}' stream ${a} received:`,S),w.bo(S)}})),k(c,xM.STAT_EVENT,(b=>{b.stat===Ek.PROXY?$e(Wr,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===Ek.NOPROXY&&$e(Wr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}function ux(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){return new W8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&$e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,r,n,a,s,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ve.RESOURCE_EXHAUSTED?(Vi(r.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new Ie(ve.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MU extends a4{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=K8(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Je.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Je.min():o.readTime?ei(o.readTime):Je.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Lk(this.serializer),r.addTarget=(function(s,o){let c;const d=o.target;if(c=Pk(d)?{documents:X8(s,d)}:{query:J8(s,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=KM(s,o.resumeToken);const h=Rk(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Je.min())>0){c.readTime=up(s,o.snapshotVersion.toTimestamp());const h=Rk(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=eU(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Lk(this.serializer),r.removeTarget=e,this.a_(r)}}class LU extends a4{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Y8(e.writeResults,e.commitTime),n=ei(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Lk(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Q8(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Ie(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Mo(e,Dk(r,n),a,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(ve.UNKNOWN,s.toString())}))}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,Dk(r,n),a,o,c,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ve.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class FU{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vi(r),this.D_=!1):$e("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((o=>{n.enqueueAndForget((async()=>{rl(this)&&($e("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Ze(d);h.L_.add(4),await Mh(h),h.q_.set("Unknown"),h.L_.delete(4),await S0(h)})(this))}))})),this.q_=new FU(n,a)}}async function S0(t){if(rl(t))for(const e of t.B_)await e(!0)}async function Mh(t){for(const e of t.B_)await e(!1)}function i4(t,e){const r=Ze(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),zj(r)?qj(r):eu(r).r_()&&Bj(r,e))}function Uj(t,e){const r=Ze(t),n=eu(r);r.N_.delete(e),n.r_()&&s4(r,e),r.N_.size===0&&(n.r_()?n.o_():rl(r)&&r.q_.set("Unknown"))}function Bj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}eu(t).A_(e)}function s4(t,e){t.Q_.xe(e),eu(t).R_(e)}function qj(t){t.Q_=new U8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),eu(t).start(),t.q_.v_()}function zj(t){return rl(t)&&!eu(t).n_()&&t.N_.size>0}function rl(t){return Ze(t).L_.size===0}function o4(t){t.Q_=void 0}async function UU(t){t.q_.set("Online")}async function BU(t){t.N_.forEach(((e,r)=>{Bj(t,e)}))}async function qU(t,e){o4(t),zj(t)?(t.q_.M_(e),qj(t)):t.q_.set("Unknown")}async function zU(t,e,r){if(t.q_.set("Online"),e instanceof GM&&e.state===2&&e.cause)try{await(async function(a,s){const o=s.cause;for(const c of s.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await dp(t,n)}else if(e instanceof Km?t.Q_.Ke(e):e instanceof HM?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Je.min()))try{const n=await r4(t.localStore);r.compareTo(n)>=0&&await(function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.N_.get(h);m&&s.N_.set(h,m.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const m=s.N_.get(d);if(!m)return;s.N_.set(d,m.withResumeToken(Fr.EMPTY_BYTE_STRING,m.snapshotVersion)),s4(s,d);const p=new As(m.target,d,h,m.sequenceNumber);Bj(s,p)})),s.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){$e("RemoteStore","Failed to raise snapshot:",n),await dp(t,n)}}async function dp(t,e,r){if(!Ih(e))throw e;t.L_.add(1),await Mh(t),t.q_.set("Offline"),r||(r=()=>r4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{$e("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await S0(t)}))}function l4(t,e){return e().catch((r=>dp(t,r,e)))}async function E0(t){const e=Ze(t),r=Vs(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WU(e);)try{const a=await TU(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,HU(e,a)}catch(a){await dp(e,a)}c4(e)&&u4(e)}function WU(t){return rl(t)&&t.O_.length<10}function HU(t,e){t.O_.push(e);const r=Vs(t);r.r_()&&r.V_&&r.m_(e.mutations)}function c4(t){return rl(t)&&!Vs(t).n_()&&t.O_.length>0}function u4(t){Vs(t).start()}async function GU(t){Vs(t).p_()}async function KU(t){const e=Vs(t);for(const r of t.O_)e.m_(r.mutations)}async function QU(t,e,r){const n=t.O_.shift(),a=Dj.from(n,e,r);await l4(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await E0(t)}async function YU(t,e){e&&Vs(t).V_&&await(async function(n,a){if((function(o){return $8(o)&&o!==ve.ABORTED})(a.code)){const s=n.O_.shift();Vs(n).s_(),await l4(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a))),await E0(n)}})(t,e),c4(t)&&u4(t)}async function KT(t,e){const r=Ze(t);r.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const n=rl(r);r.L_.add(3),await Mh(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await S0(r)}async function XU(t,e){const r=Ze(t);e?(r.L_.delete(2),await S0(r)):e||(r.L_.add(2),await Mh(r),r.q_.set("Unknown"))}function eu(t){return t.K_||(t.K_=(function(r,n,a){const s=Ze(r);return s.w_(),new MU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Eo:UU.bind(null,t),Ro:BU.bind(null,t),mo:qU.bind(null,t),d_:zU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),zj(t)?qj(t):t.q_.set("Unknown")):(await t.K_.stop(),o4(t))}))),t.K_}function Vs(t){return t.U_||(t.U_=(function(r,n,a){const s=Ze(r);return s.w_(),new LU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GU.bind(null,t),mo:YU.bind(null,t),f_:KU.bind(null,t),g_:QU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await E0(t)):(await t.U_.stop(),t.O_.length>0&&($e("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,c=new Wj(e,r,o,a,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hj(t,e){if(Vi("AsyncQueue",`${e}: ${t}`),Ih(t))return new Ie(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ve.comparator(r.key,n.key):(r,n)=>Ve.comparator(r.key,n.key),this.keyedMap=ld(),this.sortedSet=new Qt(this.comparator)}static emptySet(e){return new hc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof hc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new hc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.W_=new Qt(Ve.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Qe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class jc{constructor(e,r,n,a,s,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new jc(e,r,hc.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ZU{constructor(){this.queries=YT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Ze(r),s=a.queries;a.queries=YT(),s.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new Ie(ve.ABORTED,"Firestore shutting down"))}}function YT(){return new Zc((t=>OM(t)),v0)}async function Gj(t,e){const r=Ze(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new JU,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=Hj(o,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&Qj(r)}async function Kj(t,e){const r=Ze(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function eB(t,e){const r=Ze(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&Qj(r)}function tB(t,e,r){const n=Ze(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function Qj(t){t.Y_.forEach((e=>{e.next()}))}var Fk,XT;(XT=Fk||(Fk={})).ea="default",XT.Cache="cache";class Yj{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new jc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.key=e}}class h4{constructor(e){this.key=e}}class rB{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ot(),this.mutatedKeys=ot(),this.Aa=RM(e),this.Ra=new hc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new QT,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((m,p)=>{const y=a.get(m),v=b0(this.query,p)?p:null,w=!!y&&this.mutatedKeys.has(y.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;y&&v?y.data.isEqual(v.data)?w!==k&&(n.track({type:3,doc:v}),b=!0):this.ga(y,v)||(n.track({type:2,doc:v}),b=!0,(d&&this.Aa(v,d)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!y&&v?(n.track({type:0,doc:v}),b=!0):y&&!v&&(n.track({type:1,doc:y}),b=!0,(d||h)&&(c=!0)),b&&(v?(o=o.add(v),s=k?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),n.track({type:1,doc:m})}return{Ra:o,fa:n,ns:c,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,p)=>(function(v,w){const k=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return k(v)-k(w)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new jc(this.query,e.Ra,s,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new QT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ot(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new h4(n))})),this.da.forEach((n=>{e.has(n)||r.push(new d4(n))})),r}ba(e){this.Ta=e.Ts,this.da=ot();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return jc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class aB{constructor(e){this.key=e,this.va=!1}}class iB{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zc((c=>OM(c)),v0),this.Ma=new Map,this.xa=new Set,this.Oa=new Qt(Ve.comparator),this.Na=new Map,this.La=new $j,this.Ba={},this.ka=new Map,this.qa=_c.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sB(t,e,r=!0){const n=x4(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await f4(n,e,r,!0),a}async function oB(t,e){const r=x4(t);await f4(r,e,!0,!1)}async function f4(t,e,r,n){const a=await AU(t.localStore,Za(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let c;return n&&(c=await lB(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&i4(t.remoteStore,a),c}async function lB(t,e,r,n,a){t.Ka=(p,y,v)=>(async function(k,b,N,S){let E=b.view.ma(N);E.ns&&(E=await WT(k.localStore,b.query,!1).then((({documents:T})=>b.view.ma(T,E))));const P=S&&S.targetChanges.get(b.targetId),_=S&&S.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(E,k.isPrimaryClient,P,_);return ZT(k,b.targetId,O.wa),O.snapshot})(t,p,y,v);const s=await WT(t.localStore,e,!0),o=new rB(e,s.Ts),c=o.ma(s.documents),d=Dh.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);ZT(t,r,h.wa);const m=new nB(e,r,o);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function cB(t,e,r){const n=Ze(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter((o=>!v0(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await $k(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Uj(n.remoteStore,a.targetId),Vk(n,a.targetId)})).catch(Ph)):(Vk(n,a.targetId),await $k(n.localStore,a.targetId,!0))}async function uB(t,e){const r=Ze(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Uj(r.remoteStore,n.targetId))}async function dB(t,e,r){const n=xB(t);try{const a=await(function(o,c){const d=Ze(o),h=xr.now(),m=c.reduce(((v,w)=>v.add(w.key)),ot());let p,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let w=Ui(),k=ot();return d.cs.getEntries(v,m).next((b=>{w=b,w.forEach(((N,S)=>{S.isValidDocument()||(k=k.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,w))).next((b=>{p=b;const N=[];for(const S of c){const E=O8(S,p.get(S.key).overlayedDocument);E!=null&&N.push(new zs(S.key,E,NM(E.value.mapValue),un.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,N,c)})).next((b=>{y=b;const N=b.applyToLocalDocumentSet(p,k);return d.documentOverlayCache.saveOverlays(v,b.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:MM(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Qt(gt)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Lh(n,a.changes),await E0(n.remoteStore)}catch(a){const s=Hj(a,"Failed to persist write");r.reject(s)}}async function m4(t,e){const r=Ze(t);try{const n=await SU(r.localStore,e);e.targetChanges.forEach(((a,s)=>{const o=r.Na.get(s);o&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?_t(o.va):a.removedDocuments.size>0&&(_t(o.va),o.va=!1))})),await Lh(r,n,e)}catch(n){await Ph(n)}}function JT(t,e,r){const n=Ze(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((s,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Ze(o);d.onlineState=c;let h=!1;d.queries.forEach(((m,p)=>{for(const y of p.j_)y.Z_(c)&&(h=!0)})),h&&Qj(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function hB(t,e,r){const n=Ze(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Qt(Ve.comparator);o=o.insert(s,Kr.newNoDocument(s,Je.min()));const c=ot().add(s),d=new j0(Je.min(),new Map,new Qt(gt),o,c);await m4(n,d),n.Oa=n.Oa.remove(s),n.Na.delete(e),Xj(n)}else await $k(n.localStore,e,!1).then((()=>Vk(n,e,r))).catch(Ph)}async function fB(t,e){const r=Ze(t),n=e.batch.batchId;try{const a=await NU(r.localStore,e);g4(r,n,null),p4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Lh(r,a)}catch(a){await Ph(a)}}async function mB(t,e,r){const n=Ze(t);try{const a=await(function(o,c){const d=Ze(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,c).next((p=>(_t(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(h,p)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(n.localStore,e);g4(n,e,r),p4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Lh(n,a)}catch(a){await Ph(a)}}function p4(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function g4(t,e,r){const n=Ze(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Vk(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||y4(t,n)}))}function y4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Uj(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Xj(t))}function ZT(t,e,r){for(const n of r)n instanceof d4?(t.La.addReference(n.key,e),pB(t,n)):n instanceof h4?($e("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||y4(t,n.key)):Qe()}function pB(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||($e("SyncEngine","New document in limbo: "+r),t.xa.add(n),Xj(t))}function Xj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ve($t.fromString(e)),n=t.qa.next();t.Na.set(n,new aB(r)),t.Oa=t.Oa.insert(r,n),i4(t.remoteStore,new As(Za(x0(r.path)),n,"TargetPurposeLimboResolution",Tj.oe))}}async function Lh(t,e,r){const n=Ze(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var m;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(m=r?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(h){a.push(h);const p=Vj.Wi(d.targetId,h);s.push(p)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const m=Ze(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>_e.forEach(h,(y=>_e.forEach(y.$i,(v=>m.persistence.referenceDelegate.addReference(p,y.targetId,v))).next((()=>_e.forEach(y.Ui,(v=>m.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))))))}catch(p){if(!Ih(p))throw p;$e("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const v=m.os.get(y),w=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(w);m.os=m.os.insert(y,k)}}})(n.localStore,s))}async function gB(t,e){const r=Ze(t);if(!r.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const n=await t4(r.localStore,e);r.currentUser=e,(function(s,o){s.ka.forEach((c=>{c.forEach((d=>{d.reject(new Ie(ve.CANCELLED,o))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Lh(r,n.hs)}}function yB(t,e){const r=Ze(t),n=r.Na.get(e);if(n&&n.va)return ot().add(n.key);{let a=ot();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}function x4(t){const e=Ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=m4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hB.bind(null,e),e.Ca.d_=eB.bind(null,e.eventManager),e.Ca.$a=tB.bind(null,e.eventManager),e}function xB(t){const e=Ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mB.bind(null,e),e}class hp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=N0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return jU(this.persistence,new kU,e.initialUser,this.serializer)}Ga(e){return new vU(Fj.Zr,this.serializer)}Wa(e){return new PU}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hp.provider={build:()=>new hp};class Uk{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>JT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=gB.bind(null,this.syncEngine),await XU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZU})()}createDatastore(e){const r=N0(e.databaseInfo.databaseId),n=(function(s){return new DU(s)})(e.databaseInfo);return(function(s,o,c,d){return new $U(s,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,s,o,c){return new VU(n,a,s,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>JT(this.syncEngine,r,0)),(function(){return GT.D()?new GT:new IU})())}createSyncEngine(e,r){return(function(a,s,o,c,d,h,m){const p=new iB(a,s,o,c,d,h);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const s=Ze(a);$e("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Mh(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Uk.provider={build:()=>new Uk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Gr.UNAUTHENTICATED,this.clientId=kM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async o=>{$e("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>($e("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Hj(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function dx(t,e){t.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await t4(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function eA(t,e){t.asyncQueue.verifyOperationInProgress();const r=await bB(t);$e("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>KT(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>KT(e.remoteStore,a))),t._onlineComponents=e}async function bB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{await dx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;vc("Error using user provided cache. Falling back to memory cache: "+r),await dx(t,new hp)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),await dx(t,new hp);return t._offlineComponents}async function v4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),await eA(t,t._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),await eA(t,new Uk))),t._onlineComponents}function wB(t){return v4(t).then((e=>e.syncEngine))}async function fp(t){const e=await v4(t),r=e.eventManager;return r.onListen=sB.bind(null,e.syncEngine),r.onUnlisten=cB.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=oB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=uB.bind(null,e.syncEngine),r}function kB(t,e,r={}){const n=new Di;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,d,h){const m=new Jj({next:y=>{m.Za(),o.enqueueAndForget((()=>Kj(s,p)));const v=y.docs.has(c);!v&&y.fromCache?h.reject(new Ie(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&d&&d.source==="server"?h.reject(new Ie(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new Yj(x0(c.path),m,{includeMetadataChanges:!0,_a:!0});return Gj(s,p)})(await fp(t),t.asyncQueue,e,r,n))),n.promise}function _B(t,e,r={}){const n=new Di;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,d,h){const m=new Jj({next:y=>{m.Za(),o.enqueueAndForget((()=>Kj(s,p))),y.fromCache&&d.source==="server"?h.reject(new Ie(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new Yj(c,m,{includeMetadataChanges:!0,_a:!0});return Gj(s,p)})(await fp(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e,r){if(!r)throw new Ie(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jB(t,e,r,n){if(e===!0&&n===!0)throw new Ie(ve.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function rA(t){if(!Ve.isDocumentKey(t))throw new Ie(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nA(t){if(Ve.isDocumentKey(t))throw new Ie(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function T0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qe()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=T0(t);throw new Ie(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A0{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aA(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new U7;switch(n.type){case"firstParty":return new W7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ie(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=tA.get(r);n&&($e("ComponentProvider","Removing Datastore"),tA.delete(r),n.terminate())})(this),Promise.resolve()}}function NB(t,e,r,n={}){var a;const s=(t=dn(t,A0))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&vc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,d;if(typeof n.mockUserToken=="string")c=n.mockUserToken,d=Gr.MOCK_USER;else{c=TD(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Ie(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Gr(h)}t._authCredentials=new B7(new wM(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class Xr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xr(this.firestore,e,this._key)}}class Os extends nl{constructor(e,r,n){super(e,r,x0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xr(this.firestore,null,new Ve(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function fc(t,e,...r){if(t=Ft(t),w4("collection","path",e),t instanceof A0){const n=$t.fromString(e,...r);return nA(n),new Os(t,null,n)}{if(!(t instanceof Xr||t instanceof Os))throw new Ie(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($t.fromString(e,...r));return nA(n),new Os(t.firestore,null,n)}}function gr(t,e,...r){if(t=Ft(t),arguments.length===1&&(e=kM.newId()),w4("doc","path",e),t instanceof A0){const n=$t.fromString(e,...r);return rA(n),new Xr(t,null,new Ve(n))}{if(!(t instanceof Xr||t instanceof Os))throw new Ie(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($t.fromString(e,...r));return rA(n),new Xr(t.firestore,t instanceof Os?t.converter:null,new Ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n4(this,"async_queue_retry"),this.Vu=()=>{const n=ux();n&&$e("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=ux();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=ux();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Di;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ih(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw Vi("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=Wj.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(a),a}fu(){this.Eu&&Qe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function sA(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1})(t,["next","error","complete"])}class ai extends A0{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new iA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iA(e),this._firestoreClient=void 0,await e}}}function SB(t,e){const r=typeof t=="object"?t:gj(),n=typeof t=="string"?t:"(default)",a=f0(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=ND("firestore");s&&NB(a,...s)}return a}function $h(t){if(t._terminated)throw new Ie(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EB(t),t._firestoreClient}function EB(t){var e,r,n;const a=t._freezeSettings(),s=(function(c,d,h,m){return new a8(c,d,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,b4(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new vB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nc(Fr.fromBase64String(e))}catch(r){throw new Ie(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Nc(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ie(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ie(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ie(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=/^__.*__$/;class AB{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,r,this.fieldTransforms):new Rh(e,this.data,r,this.fieldTransforms)}}class k4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new zs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function _4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class t1{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_4(this.Cu)&&TB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CB{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||N0(e)}Qu(e,r,n,a=!1){return new t1({Cu:e,methodName:r,qu:n,path:Lr.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vh(t){const e=t._freezeSettings(),r=N0(t._databaseId);return new CB(t._databaseId,!!e.ignoreUndefinedProperties,r)}function r1(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);a1("Data must be an object, but it was:",o,n);const c=S4(n,o);let d,h;if(s.merge)d=new Rn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const p of s.mergeFields){const y=Bk(e,p,r);if(!o.contains(y))throw new Ie(ve.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);T4(m,y)||m.push(y)}d=new Rn(m),h=o.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,h=o.fieldTransforms;return new AB(new wn(c),d,h)}class P0 extends C0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof P0}}class n1 extends C0{_toFieldTransform(e){return new A8(e.path,new Md)}isEqual(e){return e instanceof n1}}function j4(t,e,r,n){const a=t.Qu(1,e,r);a1("Data must be an object, but it was:",a,n);const s=[],o=wn.empty();tl(n,((d,h)=>{const m=i1(e,d,r);h=Ft(h);const p=a.Nu(m);if(h instanceof P0)s.push(m);else{const y=Uh(h,p);y!=null&&(s.push(m),o.set(m,y))}}));const c=new Rn(s);return new k4(o,c,a.fieldTransforms)}function N4(t,e,r,n,a,s){const o=t.Qu(1,e,r),c=[Bk(e,n,r)],d=[a];if(s.length%2!=0)throw new Ie(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(Bk(e,s[y])),d.push(s[y+1]);const h=[],m=wn.empty();for(let y=c.length-1;y>=0;--y)if(!T4(h,c[y])){const v=c[y];let w=d[y];w=Ft(w);const k=o.Nu(v);if(w instanceof P0)h.push(v);else{const b=Uh(w,k);b!=null&&(h.push(v),m.set(v,b))}}const p=new Rn(h);return new k4(m,p,o.fieldTransforms)}function PB(t,e,r,n=!1){return Uh(r,t.Qu(n?4:3,e))}function Uh(t,e){if(E4(t=Ft(t)))return a1("Unsupported field value:",e,t),S4(t,e);if(t instanceof C0)return(function(n,a){if(!_4(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const s=[];let o=0;for(const c of n){let d=Uh(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),o++}return{arrayValue:{values:s}}})(t,e)}return(function(n,a){if((n=Ft(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return S8(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=xr.fromDate(n);return{timestampValue:up(a.serializer,s)}}if(n instanceof xr){const s=new xr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:up(a.serializer,s)}}if(n instanceof Zj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nc)return{bytesValue:KM(a.serializer,n._byteString)};if(n instanceof Xr){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lj(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof e1)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return Rj(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${T0(n)}`)})(t,e)}function S4(t,e){const r={};return _M(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tl(t,((n,a)=>{const s=Uh(a,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function E4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xr||t instanceof Zj||t instanceof Nc||t instanceof Xr||t instanceof C0||t instanceof e1)}function a1(t,e,r){if(!E4(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=T0(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Bk(t,e,r){if((e=Ft(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return i1(t,e);throw mp("Field path arguments must be of type string or ",t,!1,void 0,r)}const IB=new RegExp("[~\\*/\\[\\]]");function i1(t,e,r){if(e.search(IB)>=0)throw mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Fh(...e.split("."))._internalPath}catch{throw mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function mp(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new Ie(ve.INVALID_ARGUMENT,c+t+d)}function T4(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(C4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class OB extends A4{data(){return super.data()}}function C4(t,e){return typeof e=="string"?i1(t,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s1{}class RB extends s1{}function I4(t,e,...r){let n=[];e instanceof s1&&n.push(e),n=n.concat(r),(function(s){const o=s.filter((d=>d instanceof l1)).length,c=s.filter((d=>d instanceof o1)).length;if(o>1||o>0&&c>0)throw new Ie(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class o1 extends RB{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new o1(e,r,n)}_apply(e){const r=this._parse(e);return O4(e._query,r),new nl(e.firestore,e.converter,Ik(e._query,r))}_parse(e){const r=Vh(e.firestore);return(function(s,o,c,d,h,m,p){let y;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ie(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){lA(p,m);const v=[];for(const w of p)v.push(oA(d,s,w));y={arrayValue:{values:v}}}else y=oA(d,s,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||lA(p,m),y=PB(c,o,p,m==="in"||m==="not-in");return cr.create(h,m,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class l1 extends s1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new l1(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Ia.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,s){let o=a;const c=s.getFlattenedFilters();for(const d of c)O4(o,d),o=Ik(o,d)})(e._query,r),new nl(e.firestore,e.converter,Ik(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oA(t,e,r){if(typeof(r=Ft(r))=="string"){if(r==="")throw new Ie(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IM(e)&&r.indexOf("/")!==-1)throw new Ie(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child($t.fromString(r));if(!Ve.isDocumentKey(n))throw new Ie(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return TT(t,new Ve(n))}if(r instanceof Xr)return TT(t,r._key);throw new Ie(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${T0(r)}.`)}function lA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O4(t,e){const r=(function(a,s){for(const o of a)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Ie(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class DB{convertValue(e,r="none"){switch(Wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return tl(e,((a,s)=>{n[a]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>nr(o.doubleValue)));return new e1(s)}convertGeoPoint(e){return new Zj(nr(e.latitude),nr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Cj(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const r=Fs(e);return new xr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=$t.fromString(e);_t(e4(n));const a=new Rd(n.get(1),n.get(3)),s=new Ve(n.popFirst(5));return a.isEqual(r)||Vi(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class R4 extends A4{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(C4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Qm extends R4{data(e={}){return super.data(e)}}class D4{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new ud(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Qm(this._firestore,this._userDataWriter,n.key,n,new ud(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ie(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new Qm(a._firestore,a._userDataWriter,c.doc.key,c.doc,new ud(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const d=new Qm(a._firestore,a._userDataWriter,c.doc.key,c.doc,new ud(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:MB(c.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function MB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){t=dn(t,Xr);const e=dn(t.firestore,ai);return kB($h(e),t._key).then((r=>L4(e,t,r)))}class d1 extends DB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xr(this.firestore,null,r)}}function LB(t){t=dn(t,nl);const e=dn(t.firestore,ai),r=$h(e),n=new d1(e);return P4(t._query),_B(r,t._query).then((a=>new D4(e,n,t,a)))}function Ea(t,e,r){t=dn(t,Xr);const n=dn(t.firestore,ai),a=c1(t.converter,e,r);return Bh(n,[r1(Vh(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,un.none())])}function ea(t,e,r,...n){t=dn(t,Xr);const a=dn(t.firestore,ai),s=Vh(a);let o;return o=typeof(e=Ft(e))=="string"||e instanceof Fh?N4(s,"updateDoc",t._key,e,r,n):j4(s,"updateDoc",t._key,e),Bh(a,[o.toMutation(t._key,un.exists(!0))])}function h1(t){return Bh(dn(t.firestore,ai),[new _0(t._key,un.none())])}function M4(t,e){const r=dn(t.firestore,ai),n=gr(t),a=c1(t.converter,e);return Bh(r,[r1(Vh(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,un.exists(!1))]).then((()=>n))}function bd(t,...e){var r,n,a;t=Ft(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||sA(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(sA(e[o])){const p=e[o];e[o]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(a=p.complete)===null||a===void 0?void 0:a.bind(p)}let d,h,m;if(t instanceof Xr)h=dn(t.firestore,ai),m=x0(t._key.path),d={next:p=>{e[o]&&e[o](L4(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=dn(t,nl);h=dn(p.firestore,ai),m=p._query;const y=new d1(h);d={next:v=>{e[o]&&e[o](new D4(h,y,p,v))},error:e[o+1],complete:e[o+2]},P4(t._query)}return(function(y,v,w,k){const b=new Jj(k),N=new Yj(v,b,w);return y.asyncQueue.enqueueAndForget((async()=>Gj(await fp(y),N))),()=>{b.Za(),y.asyncQueue.enqueueAndForget((async()=>Kj(await fp(y),N)))}})($h(h),m,c,d)}function Bh(t,e){return(function(n,a){const s=new Di;return n.asyncQueue.enqueueAndForget((async()=>dB(await wB(n),a,s))),s.promise})($h(t),e)}function L4(t,e,r){const n=r.docs.get(e._key),a=new d1(t);return new R4(t,a,e._key,n,new ud(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Vh(e)}set(e,r,n){this._verifyNotCommitted();const a=hx(e,this._firestore),s=c1(a.converter,r,n),o=r1(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,un.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=hx(e,this._firestore);let o;return o=typeof(r=Ft(r))=="string"||r instanceof Fh?N4(this._dataReader,"WriteBatch.update",s._key,r,n,a):j4(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=hx(e,this._firestore);return this._mutations=this._mutations.concat(new _0(r._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hx(t,e){if((t=Ft(t)).firestore!==e)throw new Ie(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Bt(){return new n1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){return $h(t=dn(t,ai)),new $B(t,(e=>Bh(t,e)))}(function(e,r=!0){(function(a){Jc=a})(Zo),Vo(new Ls("firestore",((n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new ai(new q7(n.getProvider("auth-internal")),new G7(n.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ie(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rd(h.options.projectId,m)})(o,a),o);return s=Object.assign({useFetchStreams:r},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),Ya(_T,"4.7.3",e),Ya(_T,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="firebasestorage.googleapis.com",F4="storageBucket",FB=120*1e3,VB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends li{constructor(e,r,n=0){super(fx(e),`Firebase Storage: ${r} (${fx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,er.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function fx(t){return"storage/"+t}function f1(){const t="An unknown error occurred, please check the error payload for server response.";return new er(Zt.UNKNOWN,t)}function UB(t){return new er(Zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BB(t){return new er(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new er(Zt.UNAUTHENTICATED,t)}function zB(){return new er(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WB(t){return new er(Zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function HB(){return new er(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GB(){return new er(Zt.CANCELED,"User canceled the upload/download.")}function KB(t){return new er(Zt.INVALID_URL,"Invalid URL '"+t+"'.")}function QB(t){return new er(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function YB(){return new er(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+F4+"' property when initializing the app?")}function XB(){return new er(Zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JB(){return new er(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ZB(t){return new er(Zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zk(t){return new er(Zt.INVALID_ARGUMENT,t)}function V4(){return new er(Zt.APP_DELETED,"The Firebase app was deleted.")}function eq(t){return new er(Zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wd(t,e){return new er(Zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qu(t){throw new er(Zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Dn.makeFromUrl(e,r)}catch{return new Dn(e,"")}if(n.path==="")return n;throw QB(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${m}/b/${a}/o${y}`,"i"),w={bucket:1,path:3},k=r===$4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",N=new RegExp(`^https?://${k}/${a}/${b}`,"i"),E=[{regex:c,indices:d,postModify:s},{regex:v,indices:w,postModify:h},{regex:N,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<E.length;P++){const _=E[P],O=_.regex.exec(e);if(O){const T=O[_.indices.bucket];let R=O[_.indices.path];R||(R=""),n=new Dn(T,R),_.postModify(n);break}}if(n==null)throw KB(e);return n}}class tq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(t,e,r){let n=1,a=null,s=null,o=!1,c=0;function d(){return c===2}let h=!1;function m(...b){h||(h=!0,e.apply(null,b))}function p(b){a=setTimeout(()=>{a=null,t(v,d())},b)}function y(){s&&clearTimeout(s)}function v(b,...N){if(h){y();return}if(b){y(),m.call(null,b,...N);return}if(d()||o){y(),m.call(null,b,...N);return}n<64&&(n*=2);let E;c===1?(c=2,E=0):E=(n+Math.random())*1e3,p(E)}let w=!1;function k(b){w||(w=!0,y(),!h&&(a!==null?(b||(c=2),clearTimeout(a),p(0)):b||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,k(!0)},r),k}function nq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){return t!==void 0}function iq(t){return typeof t=="object"&&!Array.isArray(t)}function m1(t){return typeof t=="string"||t instanceof String}function cA(t){return p1()&&t instanceof Blob}function p1(){return typeof Blob<"u"}function uA(t,e,r,n){if(n<e)throw zk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw zk(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function U4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Do;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Do||(Do={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e,r,n,a,s,o,c,d,h,m,p,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new bm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Do.NO_ERROR,d=s.getStatus();if(!c||sq(d,this.additionalRetryCodes_)&&this.retry){const m=s.getErrorCode()===Do.ABORT;n(!1,new bm(!1,null,m));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new bm(h,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());aq(d)?s(d):s()}catch(d){o(d)}else if(c!==null){const d=f1();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?V4():GB();o(d)}else{const d=HB();o(d)}};this.canceled_?r(!1,new bm(!1,null,!0)):this.backoffId_=rq(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bm{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function lq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hq(t,e,r,n,a,s,o=!0){const c=U4(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return uq(h,e),lq(h,r),cq(h,s),dq(h,n),new oq(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mq(...t){const e=fq();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(p1())return new Blob(t);throw new er(Zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pq(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){if(typeof atob>"u")throw ZB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mx{constructor(e,r){this.data=e,this.contentType=r||null}}function yq(t,e){switch(t){case Ka.RAW:return new mx(B4(e));case Ka.BASE64:case Ka.BASE64URL:return new mx(q4(t,e));case Ka.DATA_URL:return new mx(vq(e),bq(e))}throw f1()}function B4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=t.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function xq(t){let e;try{e=decodeURIComponent(t)}catch{throw wd(Ka.DATA_URL,"Malformed data URL.")}return B4(e)}function q4(t,e){switch(t){case Ka.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw wd(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ka.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw wd(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=gq(e)}catch(a){throw a.message.includes("polyfill")?a:wd(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class z4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw wd(Ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=wq(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function vq(t){const e=new z4(t);return e.base64?q4(Ka.BASE64,e.rest):xq(e.rest)}function bq(t){return new z4(t).contentType}function wq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,r){let n=0,a="";cA(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(cA(this.data_)){const n=this.data_,a=pq(n,e,r);return a===null?null:new Es(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Es(n,!0)}}static getBlob(...e){if(p1()){const r=e.map(n=>n instanceof Es?n.data_:n);return new Es(mq.apply(null,r))}else{const r=e.map(o=>m1(o)?yq(Ka.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[s++]=o[c]}),new Es(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){let e;try{e=JSON.parse(t)}catch{return null}return iq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _q(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function H4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t,e){return e}class an{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||jq}}let wm=null;function Nq(t){return!m1(t)||t.length<2?t:H4(t)}function G4(){if(wm)return wm;const t=[];t.push(new an("bucket")),t.push(new an("generation")),t.push(new an("metageneration")),t.push(new an("name","fullPath",!0));function e(s,o){return Nq(o)}const r=new an("name");r.xform=e,t.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new an("size");return a.xform=n,t.push(a),t.push(new an("timeCreated")),t.push(new an("updated")),t.push(new an("md5Hash",null,!0)),t.push(new an("cacheControl",null,!0)),t.push(new an("contentDisposition",null,!0)),t.push(new an("contentEncoding",null,!0)),t.push(new an("contentLanguage",null,!0)),t.push(new an("contentType",null,!0)),t.push(new an("metadata","customMetadata",!0)),wm=t,wm}function Sq(t,e){function r(){const n=t.bucket,a=t.fullPath,s=new Dn(n,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function Eq(t,e,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,e[o.server])}return Sq(n,t),n}function K4(t,e,r){const n=W4(e);return n===null?null:Eq(t,n,r)}function Tq(t,e,r,n){const a=W4(e);if(a===null||!m1(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const m=t.bucket,p=t.fullPath,y="/b/"+o(m)+"/o/"+o(p),v=g1(y,r,n),w=U4({alt:"media",token:h});return v+w})[0]}function Aq(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const s=e[a];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class Q4{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){if(!t)throw f1()}function Cq(t,e){function r(n,a){const s=K4(t,a,e);return Y4(s!==null),s}return r}function Pq(t,e){function r(n,a){const s=K4(t,a,e);return Y4(s!==null),Tq(s,a,t.host,t._protocol)}return r}function X4(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=zB():a=qB():r.getStatus()===402?a=BB(t.bucket):r.getStatus()===403?a=WB(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function Iq(t){const e=X4(t);function r(n,a){let s=e(n,a);return n.getStatus()===404&&(s=UB(t.path)),s.serverResponse=a.serverResponse,s}return r}function Oq(t,e,r){const n=e.fullServerUrl(),a=g1(n,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new Q4(a,s,Pq(t,r),o);return c.errorHandler=Iq(e),c}function Rq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Dq(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Rq(null,e)),n}function Mq(t,e,r,n,a){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let P=0;P<2;P++)E=E+Math.random().toString().slice(2);return E}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Dq(e,n,a),m=Aq(h,r),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",v=Es.getBlob(p,n,y);if(v===null)throw XB();const w={name:h.fullPath},k=g1(s,t.host,t._protocol),b="POST",N=t.maxUploadRetryTime,S=new Q4(k,b,Cq(t,r),N);return S.urlParams=w,S.headers=o,S.body=v.uploadData(),S.errorHandler=X4(e),S}class Lq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw Qu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $q extends Lq{initXhr(){this.xhr_.responseType="text"}}function J4(){return new $q}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,r){this._service=e,r instanceof Dn?this._location=r:this._location=Dn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ho(e,r)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H4(this._location.path)}get storage(){return this._service}get parent(){const e=kq(this._location.path);if(e===null)return null;const r=new Dn(this._location.bucket,e);return new Ho(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw eq(e)}}function Fq(t,e,r){t._throwIfRoot("uploadBytes");const n=Mq(t.storage,t._location,G4(),new Es(e,!0),r);return t.storage.makeRequestWithTokens(n,J4).then(a=>({metadata:a,ref:t}))}function Vq(t){t._throwIfRoot("getDownloadURL");const e=Oq(t.storage,t._location,G4());return t.storage.makeRequestWithTokens(e,J4).then(r=>{if(r===null)throw JB();return r})}function Uq(t,e){const r=_q(t._location.path,e),n=new Dn(t._location.bucket,r);return new Ho(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){return/^[A-Za-z]+:\/\//.test(t)}function qq(t,e){return new Ho(t,e)}function Z4(t,e){if(t instanceof y1){const r=t;if(r._bucket==null)throw YB();const n=new Ho(r,r._bucket);return e!=null?Z4(n,e):n}else return e!==void 0?Uq(t,e):t}function zq(t,e){if(e&&Bq(e)){if(t instanceof y1)return qq(t,e);throw zk("To use ref(service, url), the first argument must be a Storage instance.")}else return Z4(t,e)}function dA(t,e){const r=e?.[F4];return r==null?null:Dn.makeFromBucketSpec(r,t)}function Wq(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:TD(a,t.app.options.projectId))}class y1{constructor(e,r,n,a,s){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._bucket=null,this._host=$4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FB,this._maxUploadRetryTime=VB,this._requests=new Set,a!=null?this._bucket=Dn.makeFromBucketSpec(a,this._host):this._bucket=dA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=dA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ho(this,e)}_makeRequest(e,r,n,a,s=!0){if(this._deleted)return new tq(V4());{const o=hq(e,this._appId,n,a,r,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const hA="@firebase/storage",fA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="storage";function Hq(t,e,r){return t=Ft(t),Fq(t,e,r)}function Gq(t){return t=Ft(t),Vq(t)}function Kq(t,e){return t=Ft(t),zq(t,e)}function Qq(t=gj(),e){t=Ft(t);const n=f0(t,e6).getImmediate({identifier:e}),a=ND("storage");return a&&Yq(n,...a),n}function Yq(t,e,r,n={}){Wq(t,e,r,n)}function Xq(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new y1(r,n,a,e,Zo)}function Jq(){Vo(new Ls(e6,Xq,"PUBLIC").setMultipleInstances(!0)),Ya(hA,fA,""),Ya(hA,fA,"esm2017")}Jq();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t6=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ez={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...c},d)=>V.createElement("svg",{ref:d,...ez,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:t6("lucide",a),...c},[...o.map(([h,m])=>V.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const r=V.forwardRef(({className:n,...a},s)=>V.createElement(tz,{ref:s,iconNode:e,className:t6(`lucide-${Zq(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=De("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=De("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=De("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=De("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=De("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=De("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=De("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=De("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=De("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=De("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=De("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=De("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=De("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=De("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=De("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=De("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=De("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=De("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=De("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=De("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=De("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=De("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=De("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=De("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=De("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=De("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=De("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=De("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=De("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=De("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bz=({setUserId:t})=>{const[e,r]=V.useState(!0),[n,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState(!1),p=Sj(),y=async v=>{v.preventDefault(),d(""),m(!0);try{e?await N9(p,n,s):await aM(p,n,s)}catch(w){d(w.message)}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex flex-col justify-center items-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(Tr,{className:"mx-auto h-12 w-auto text-cyan-500"}),i.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e?"Sign in to your account":"Create a new account"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-xl rounded-2xl p-8",children:[i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:v=>a(v.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:v=>o(v.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),c&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:h,className:"flex w-full justify-center rounded-md border border-transparent bg-cyan-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-400",children:h?"Processing...":e?"Sign in":"Create account"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[e?"Don't have an account?":"Already have an account?",i.jsx("button",{onClick:()=>r(!e),className:"font-medium text-cyan-600 hover:text-cyan-500 ml-1",children:e?"Sign up":"Sign in"})]})})]})]})})},Ao=({title:t,value:e,icon:r,color:n,subtext:a})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:t}),i.jsx("div",{className:`text-${n}-500 dark:text-${n}-400`,children:r})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-white mt-2",children:e}),a&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:a})]})]});function u6(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=u6(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function at(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=u6(t))&&(n&&(n+=" "),n+=e);return n}var gx,gA;function _n(){if(gA)return gx;gA=1;var t=Array.isArray;return gx=t,gx}var yx,yA;function d6(){if(yA)return yx;yA=1;var t=typeof fm=="object"&&fm&&fm.Object===Object&&fm;return yx=t,yx}var xx,xA;function ci(){if(xA)return xx;xA=1;var t=d6(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return xx=r,xx}var vx,vA;function zh(){if(vA)return vx;vA=1;var t=ci(),e=t.Symbol;return vx=e,vx}var bx,bA;function wz(){if(bA)return bx;bA=1;var t=zh(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function s(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var m=n.call(o);return h&&(c?o[a]=d:delete o[a]),m}return bx=s,bx}var wx,wA;function kz(){if(wA)return wx;wA=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return wx=r,wx}var kx,kA;function Gi(){if(kA)return kx;kA=1;var t=zh(),e=wz(),r=kz(),n="[object Null]",a="[object Undefined]",s=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:s&&s in Object(c)?e(c):r(c)}return kx=o,kx}var _x,_A;function Ki(){if(_A)return _x;_A=1;function t(e){return e!=null&&typeof e=="object"}return _x=t,_x}var jx,jA;function tu(){if(jA)return jx;jA=1;var t=Gi(),e=Ki(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return jx=n,jx}var Nx,NA;function w1(){if(NA)return Nx;NA=1;var t=_n(),e=tu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){if(t(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||e(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return Nx=a,Nx}var Sx,SA;function Ws(){if(SA)return Sx;SA=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Sx=t,Sx}var Ex,EA;function k1(){if(EA)return Ex;EA=1;var t=Gi(),e=Ws(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==s}return Ex=o,Ex}var Tx,TA;function _z(){if(TA)return Tx;TA=1;var t=ci(),e=t["__core-js_shared__"];return Tx=e,Tx}var Ax,AA;function jz(){if(AA)return Ax;AA=1;var t=_z(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return Ax=r,Ax}var Cx,CA;function h6(){if(CA)return Cx;CA=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Cx=r,Cx}var Px,PA;function Nz(){if(PA)return Px;PA=1;var t=k1(),e=jz(),r=Ws(),n=h6(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,m=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!r(y)||e(y))return!1;var v=t(y)?m:s;return v.test(n(y))}return Px=p,Px}var Ix,IA;function Sz(){if(IA)return Ix;IA=1;function t(e,r){return e?.[r]}return Ix=t,Ix}var Ox,OA;function al(){if(OA)return Ox;OA=1;var t=Nz(),e=Sz();function r(n,a){var s=e(n,a);return t(s)?s:void 0}return Ox=r,Ox}var Rx,RA;function L0(){if(RA)return Rx;RA=1;var t=al(),e=t(Object,"create");return Rx=e,Rx}var Dx,DA;function Ez(){if(DA)return Dx;DA=1;var t=L0();function e(){this.__data__=t?t(null):{},this.size=0}return Dx=e,Dx}var Mx,MA;function Tz(){if(MA)return Mx;MA=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Mx=t,Mx}var Lx,LA;function Az(){if(LA)return Lx;LA=1;var t=L0(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(s){var o=this.__data__;if(t){var c=o[s];return c===e?void 0:c}return n.call(o,s)?o[s]:void 0}return Lx=a,Lx}var $x,$A;function Cz(){if($A)return $x;$A=1;var t=L0(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var s=this.__data__;return t?s[a]!==void 0:r.call(s,a)}return $x=n,$x}var Fx,FA;function Pz(){if(FA)return Fx;FA=1;var t=L0(),e="__lodash_hash_undefined__";function r(n,a){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=t&&a===void 0?e:a,this}return Fx=r,Fx}var Vx,VA;function Iz(){if(VA)return Vx;VA=1;var t=Ez(),e=Tz(),r=Az(),n=Cz(),a=Pz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,Vx=s,Vx}var Ux,UA;function Oz(){if(UA)return Ux;UA=1;function t(){this.__data__=[],this.size=0}return Ux=t,Ux}var Bx,BA;function _1(){if(BA)return Bx;BA=1;function t(e,r){return e===r||e!==e&&r!==r}return Bx=t,Bx}var qx,qA;function $0(){if(qA)return qx;qA=1;var t=_1();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return qx=e,qx}var zx,zA;function Rz(){if(zA)return zx;zA=1;var t=$0(),e=Array.prototype,r=e.splice;function n(a){var s=this.__data__,o=t(s,a);if(o<0)return!1;var c=s.length-1;return o==c?s.pop():r.call(s,o,1),--this.size,!0}return zx=n,zx}var Wx,WA;function Dz(){if(WA)return Wx;WA=1;var t=$0();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Wx=e,Wx}var Hx,HA;function Mz(){if(HA)return Hx;HA=1;var t=$0();function e(r){return t(this.__data__,r)>-1}return Hx=e,Hx}var Gx,GA;function Lz(){if(GA)return Gx;GA=1;var t=$0();function e(r,n){var a=this.__data__,s=t(a,r);return s<0?(++this.size,a.push([r,n])):a[s][1]=n,this}return Gx=e,Gx}var Kx,KA;function F0(){if(KA)return Kx;KA=1;var t=Oz(),e=Rz(),r=Dz(),n=Mz(),a=Lz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,Kx=s,Kx}var Qx,QA;function j1(){if(QA)return Qx;QA=1;var t=al(),e=ci(),r=t(e,"Map");return Qx=r,Qx}var Yx,YA;function $z(){if(YA)return Yx;YA=1;var t=Iz(),e=F0(),r=j1();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Yx=n,Yx}var Xx,XA;function Fz(){if(XA)return Xx;XA=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Xx=t,Xx}var Jx,JA;function V0(){if(JA)return Jx;JA=1;var t=Fz();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Jx=e,Jx}var Zx,ZA;function Vz(){if(ZA)return Zx;ZA=1;var t=V0();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Zx=e,Zx}var ev,e2;function Uz(){if(e2)return ev;e2=1;var t=V0();function e(r){return t(this,r).get(r)}return ev=e,ev}var tv,t2;function Bz(){if(t2)return tv;t2=1;var t=V0();function e(r){return t(this,r).has(r)}return tv=e,tv}var rv,r2;function qz(){if(r2)return rv;r2=1;var t=V0();function e(r,n){var a=t(this,r),s=a.size;return a.set(r,n),this.size+=a.size==s?0:1,this}return rv=e,rv}var nv,n2;function N1(){if(n2)return nv;n2=1;var t=$z(),e=Vz(),r=Uz(),n=Bz(),a=qz();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=a,nv=s,nv}var av,a2;function f6(){if(a2)return av;a2=1;var t=N1(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var s=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=s.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return s.cache=d.set(c,h)||d,h};return s.cache=new(r.Cache||t),s}return r.Cache=t,av=r,av}var iv,i2;function zz(){if(i2)return iv;i2=1;var t=f6(),e=500;function r(n){var a=t(n,function(o){return s.size===e&&s.clear(),o}),s=a.cache;return a}return iv=r,iv}var sv,s2;function Wz(){if(s2)return sv;s2=1;var t=zz(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(e,function(o,c,d,h){s.push(d?h.replace(r,"$1"):c||o)}),s});return sv=n,sv}var ov,o2;function S1(){if(o2)return ov;o2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,s=Array(a);++n<a;)s[n]=r(e[n],n,e);return s}return ov=t,ov}var lv,l2;function Hz(){if(l2)return lv;l2=1;var t=zh(),e=S1(),r=_n(),n=tu(),a=t?t.prototype:void 0,s=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return s?s.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return lv=o,lv}var cv,c2;function m6(){if(c2)return cv;c2=1;var t=Hz();function e(r){return r==null?"":t(r)}return cv=e,cv}var uv,u2;function p6(){if(u2)return uv;u2=1;var t=_n(),e=w1(),r=Wz(),n=m6();function a(s,o){return t(s)?s:e(s,o)?[s]:r(n(s))}return uv=a,uv}var dv,d2;function U0(){if(d2)return dv;d2=1;var t=tu();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return dv=e,dv}var hv,h2;function E1(){if(h2)return hv;h2=1;var t=p6(),e=U0();function r(n,a){a=t(a,n);for(var s=0,o=a.length;n!=null&&s<o;)n=n[e(a[s++])];return s&&s==o?n:void 0}return hv=r,hv}var fv,f2;function g6(){if(f2)return fv;f2=1;var t=E1();function e(r,n,a){var s=r==null?void 0:t(r,n);return s===void 0?a:s}return fv=e,fv}var Gz=g6();const Ln=bt(Gz);var mv,m2;function Kz(){if(m2)return mv;m2=1;function t(e){return e==null}return mv=t,mv}var Qz=Kz();const st=bt(Qz);var pv,p2;function Yz(){if(p2)return pv;p2=1;var t=Gi(),e=_n(),r=Ki(),n="[object String]";function a(s){return typeof s=="string"||!e(s)&&r(s)&&t(s)==n}return pv=a,pv}var Xz=Yz();const Go=bt(Xz);var Jz=k1();const Ke=bt(Jz);var Zz=Ws();const ru=bt(Zz);var gv={exports:{}},xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function eW(){if(g2)return xt;g2=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function k(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case t:switch(b=b.type,b){case r:case a:case n:case h:case m:return b;default:switch(b=b&&b.$$typeof,b){case c:case o:case d:case y:case p:case s:return b;default:return N}}case e:return N}}}return xt.ContextConsumer=o,xt.ContextProvider=s,xt.Element=t,xt.ForwardRef=d,xt.Fragment=r,xt.Lazy=y,xt.Memo=p,xt.Portal=e,xt.Profiler=a,xt.StrictMode=n,xt.Suspense=h,xt.SuspenseList=m,xt.isAsyncMode=function(){return!1},xt.isConcurrentMode=function(){return!1},xt.isContextConsumer=function(b){return k(b)===o},xt.isContextProvider=function(b){return k(b)===s},xt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},xt.isForwardRef=function(b){return k(b)===d},xt.isFragment=function(b){return k(b)===r},xt.isLazy=function(b){return k(b)===y},xt.isMemo=function(b){return k(b)===p},xt.isPortal=function(b){return k(b)===e},xt.isProfiler=function(b){return k(b)===a},xt.isStrictMode=function(b){return k(b)===n},xt.isSuspense=function(b){return k(b)===h},xt.isSuspenseList=function(b){return k(b)===m},xt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===a||b===n||b===h||b===m||b===v||typeof b=="object"&&b!==null&&(b.$$typeof===y||b.$$typeof===p||b.$$typeof===s||b.$$typeof===o||b.$$typeof===d||b.$$typeof===w||b.getModuleId!==void 0)},xt.typeOf=k,xt}var y2;function tW(){return y2||(y2=1,gv.exports=eW()),gv.exports}var rW=tW(),yv,x2;function y6(){if(x2)return yv;x2=1;var t=Gi(),e=Ki(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return yv=n,yv}var xv,v2;function nW(){if(v2)return xv;v2=1;var t=y6();function e(r){return t(r)&&r!=+r}return xv=e,xv}var aW=nW();const Wh=bt(aW);var iW=y6();const sW=bt(iW);var on=function(e){return e===0?0:e>0?1:-1},Co=function(e){return Go(e)&&e.indexOf("%")===e.length-1},Ee=function(e){return sW(e)&&!Wh(e)},oW=function(e){return st(e)},yr=function(e){return Ee(e)||Go(e)},lW=0,Hh=function(e){var r=++lW;return"".concat(e||"").concat(r)},ln=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&!Go(e))return n;var s;if(Co(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Wh(s)&&(s=n),a&&s>r&&(s=r),s},Ts=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},cW=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ws=function(e,r){return Ee(e)&&Ee(r)?function(n){return e+n*(r-e)}:function(){return r}};function Hk(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ln(n,e))===r})}var uW=function(e,r){return Ee(e)&&Ee(r)?e-r:Go(e)&&Go(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function gc(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Gk(t){"@babel/helpers - typeof";return Gk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gk(t)}var dW=["viewBox","children"],hW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],b2=["points","pathLength"],vv={svg:dW,polygon:b2,polyline:b2},T1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yp=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(V.isValidElement(e)&&(n=e.props),!ru(n))return null;var a={};return Object.keys(n).forEach(function(s){T1.includes(s)&&(a[s]=r||function(o){return n[s](n,o)})}),a},fW=function(e,r,n){return function(a){return e(r,n,a),null}},Ko=function(e,r,n){if(!ru(e)||Gk(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var o=e[s];T1.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=fW(o,r,n))}),a},mW=["children"],pW=["children"];function w2(t,e){if(t==null)return{};var r=gW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var k2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},_2=null,bv=null,A1=function t(e){if(e===_2&&Array.isArray(bv))return bv;var r=[];return V.Children.forEach(e,function(n){st(n)||(rW.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),bv=r,_2=e,r};function ra(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Mi(a)}):n=[Mi(e)],A1(t).forEach(function(a){var s=Ln(a,"type.displayName")||Ln(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}function In(t,e){var r=ra(t,e);return r&&r[0]}var j2=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!Ee(n)||n<=0||!Ee(a)||a<=0)},yW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],xW=function(e){return e&&e.type&&Go(e.type)&&yW.indexOf(e.type)>=0},vW=function(e,r,n,a){var s,o=(s=vv?.[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ke(e)&&(a&&o.includes(r)||hW.includes(r))||n&&T1.includes(r)},He=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(V.isValidElement(e)&&(a=e.props),!ru(a))return null;var s={};return Object.keys(a).forEach(function(o){var c;vW((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(s[o]=a[o])}),s},Kk=function t(e,r){if(e===r)return!0;var n=V.Children.count(e);if(n!==V.Children.count(r))return!1;if(n===0)return!0;if(n===1)return N2(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=e[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!N2(s,o))return!1}return!0},N2=function(e,r){if(st(e)&&st(r))return!0;if(!st(e)&&!st(r)){var n=e.props||{},a=n.children,s=w2(n,mW),o=r.props||{},c=o.children,d=w2(o,pW);return a&&c?gc(s,d)&&Kk(a,c):!a&&!c?gc(s,d):!1}return!1},S2=function(e,r){var n=[],a={};return A1(e).forEach(function(s,o){if(xW(s))n.push(s);else if(s){var c=Mi(s.type),d=r[c]||{},h=d.handler,m=d.once;if(h&&(!m||!a[c])){var p=h(s,c,o);n.push(p),a[c]=!0}}}),n},bW=function(e){var r=e&&e.type;return r&&k2[r]?k2[r]:null},wW=function(e,r){return A1(r).indexOf(e)},kW=["children","width","height","viewBox","className","style","title","desc"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qk.apply(this,arguments)}function _W(t,e){if(t==null)return{};var r=jW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Yk(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,s=t.className,o=t.style,c=t.title,d=t.desc,h=_W(t,kW),m=a||{width:r,height:n,x:0,y:0},p=at("recharts-surface",s);return Q.createElement("svg",Qk({},He(h,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),Q.createElement("title",null,c),Q.createElement("desc",null,d),e)}var NW=["children","className"];function Xk(){return Xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xk.apply(this,arguments)}function SW(t,e){if(t==null)return{};var r=EW(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var kt=Q.forwardRef(function(t,e){var r=t.children,n=t.className,a=SW(t,NW),s=at("recharts-layer",n);return Q.createElement("g",Xk({className:s},He(a,!0),{ref:e}),r)}),Aa=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]},wv,E2;function TW(){if(E2)return wv;E2=1;function t(e,r,n){var a=-1,s=e.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+r];return o}return wv=t,wv}var kv,T2;function AW(){if(T2)return kv;T2=1;var t=TW();function e(r,n,a){var s=r.length;return a=a===void 0?s:a,!n&&a>=s?r:t(r,n,a)}return kv=e,kv}var _v,A2;function x6(){if(A2)return _v;A2=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+s+"]");function d(h){return c.test(h)}return _v=d,_v}var jv,C2;function CW(){if(C2)return jv;C2=1;function t(e){return e.split("")}return jv=t,jv}var Nv,P2;function PW(){if(P2)return Nv;P2=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,s="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",m="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",w=h+"?",k="["+s+"]?",b="(?:"+v+"(?:"+[m,p,y].join("|")+")"+k+w+")*",N=k+w+b,S="(?:"+[m+c+"?",c,p,y,o].join("|")+")",E=RegExp(d+"(?="+d+")|"+S+N,"g");function P(_){return _.match(E)||[]}return Nv=P,Nv}var Sv,I2;function IW(){if(I2)return Sv;I2=1;var t=CW(),e=x6(),r=PW();function n(a){return e(a)?r(a):t(a)}return Sv=n,Sv}var Ev,O2;function OW(){if(O2)return Ev;O2=1;var t=AW(),e=x6(),r=IW(),n=m6();function a(s){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[s]()+h}}return Ev=a,Ev}var Tv,R2;function RW(){if(R2)return Tv;R2=1;var t=OW(),e=t("toUpperCase");return Tv=e,Tv}var DW=RW();const B0=bt(DW);function Ot(t){return function(){return t}}const v6=Math.cos,xp=Math.sin,Ra=Math.sqrt,vp=Math.PI,q0=2*vp,Jk=Math.PI,Zk=2*Jk,No=1e-6,MW=Zk-No;function b6(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function LW(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return b6;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class $W{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?b6:LW(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,m=o-e,p=c-r,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>No)if(!(Math.abs(p*d-h*m)>No)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let v=n-o,w=a-c,k=d*d+h*h,b=v*v+w*w,N=Math.sqrt(k),S=Math.sqrt(y),E=s*Math.tan((Jk-Math.acos((k+y-b)/(2*N*S)))/2),P=E/S,_=E/N;Math.abs(P-1)>No&&this._append`L${e+P*m},${r+P*p}`,this._append`A${s},${s},0,0,${+(p*v>m*w)},${this._x1=e+_*d},${this._y1=r+_*h}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,m=r+d,p=1^o,y=o?a-s:s-a;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>No||Math.abs(this._y1-m)>No)&&this._append`L${h},${m}`,n&&(y<0&&(y=y%Zk+Zk),y>MW?this._append`A${n},${n},0,1,${p},${e-c},${r-d}A${n},${n},0,1,${p},${this._x1=h},${this._y1=m}`:y>No&&this._append`A${n},${n},0,${+(y>=Jk)},${p},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function C1(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new $W(e)}function P1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function w6(t){this._context=t}w6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function z0(t){return new w6(t)}function k6(t){return t[0]}function _6(t){return t[1]}function j6(t,e){var r=Ot(!0),n=null,a=z0,s=null,o=C1(c);t=typeof t=="function"?t:t===void 0?k6:Ot(t),e=typeof e=="function"?e:e===void 0?_6:Ot(e);function c(d){var h,m=(d=P1(d)).length,p,y=!1,v;for(n==null&&(s=a(v=o())),h=0;h<=m;++h)!(h<m&&r(p=d[h],h,d))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(p,h,d),+e(p,h,d));if(v)return s=null,v+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Ot(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Ot(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Ot(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(s=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=s=null:s=a(n=d),c):n},c}function Nm(t,e,r){var n=null,a=Ot(!0),s=null,o=z0,c=null,d=C1(h);t=typeof t=="function"?t:t===void 0?k6:Ot(+t),e=typeof e=="function"?e:Ot(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?_6:Ot(+r);function h(p){var y,v,w,k=(p=P1(p)).length,b,N=!1,S,E=new Array(k),P=new Array(k);for(s==null&&(c=o(S=d())),y=0;y<=k;++y){if(!(y<k&&a(b=p[y],y,p))===N)if(N=!N)v=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=y-1;w>=v;--w)c.point(E[w],P[w]);c.lineEnd(),c.areaEnd()}N&&(E[y]=+t(b,y,p),P[y]=+e(b,y,p),c.point(n?+n(b,y,p):E[y],r?+r(b,y,p):P[y]))}if(S)return c=null,S+""||null}function m(){return j6().defined(a).curve(o).context(s)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ot(+p),n=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Ot(+p),h):t},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Ot(+p),h):n},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ot(+p),r=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Ot(+p),h):e},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Ot(+p),h):r},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(r)},h.lineX1=function(){return m().x(n).y(e)},h.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Ot(!!p),h):a},h.curve=function(p){return arguments.length?(o=p,s!=null&&(c=o(s)),h):o},h.context=function(p){return arguments.length?(p==null?s=c=null:c=o(s=p),h):s},h}class N6{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function FW(t){return new N6(t,!0)}function VW(t){return new N6(t,!1)}const I1={draw(t,e){const r=Ra(e/vp);t.moveTo(r,0),t.arc(0,0,r,0,q0)}},UW={draw(t,e){const r=Ra(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},S6=Ra(1/3),BW=S6*2,qW={draw(t,e){const r=Ra(e/BW),n=r*S6;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},zW={draw(t,e){const r=Ra(e),n=-r/2;t.rect(n,n,r,r)}},WW=.8908130915292852,E6=xp(vp/10)/xp(7*vp/10),HW=xp(q0/10)*E6,GW=-v6(q0/10)*E6,KW={draw(t,e){const r=Ra(e*WW),n=HW*r,a=GW*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=q0*s/5,c=v6(o),d=xp(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},Av=Ra(3),QW={draw(t,e){const r=-Ra(e/(Av*3));t.moveTo(0,r*2),t.lineTo(-Av*r,-r),t.lineTo(Av*r,-r),t.closePath()}},Qn=-.5,Yn=Ra(3)/2,e_=1/Ra(12),YW=(e_/2+1)*3,XW={draw(t,e){const r=Ra(e/YW),n=r/2,a=r*e_,s=n,o=r*e_+r,c=-s,d=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(c,d),t.lineTo(Qn*n-Yn*a,Yn*n+Qn*a),t.lineTo(Qn*s-Yn*o,Yn*s+Qn*o),t.lineTo(Qn*c-Yn*d,Yn*c+Qn*d),t.lineTo(Qn*n+Yn*a,Qn*a-Yn*n),t.lineTo(Qn*s+Yn*o,Qn*o-Yn*s),t.lineTo(Qn*c+Yn*d,Qn*d-Yn*c),t.closePath()}};function JW(t,e){let r=null,n=C1(a);t=typeof t=="function"?t:Ot(t||I1),e=typeof e=="function"?e:Ot(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ot(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ot(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function bp(){}function wp(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function T6(t){this._context=t}T6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZW(t){return new T6(t)}function A6(t){this._context=t}A6.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eH(t){return new A6(t)}function C6(t){this._context=t}C6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:wp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tH(t){return new C6(t)}function P6(t){this._context=t}P6.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function rH(t){return new P6(t)}function D2(t){return t<0?-1:1}function M2(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(s*a+o*n)/(n+a);return(D2(s)+D2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(c))||0}function L2(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Cv(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,c=(s-n)/3;t._context.bezierCurveTo(n+c,a+c*e,s-c,o-c*r,s,o)}function kp(t){this._context=t}kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cv(this,this._t0,L2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Cv(this,L2(this,r=M2(this,t,e)),r);break;default:Cv(this,this._t0,r=M2(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function I6(t){this._context=new O6(t)}(I6.prototype=Object.create(kp.prototype)).point=function(t,e){kp.prototype.point.call(this,e,t)};function O6(t){this._context=t}O6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function nH(t){return new kp(t)}function aH(t){return new I6(t)}function R6(t){this._context=t}R6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=$2(t),a=$2(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function $2(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function iH(t){return new R6(t)}function W0(t,e){this._context=t,this._t=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function sH(t){return new W0(t,.5)}function oH(t){return new W0(t,0)}function lH(t){return new W0(t,1)}function Ec(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,c=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<c;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function t_(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function cH(t,e){return t[e]}function uH(t){const e=[];return e.key=t,e}function dH(){var t=Ot([]),e=t_,r=Ec,n=cH;function a(s){var o=Array.from(t.apply(this,arguments),uH),c,d=o.length,h=-1,m;for(const p of s)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(p,o[c].key,h,s)]).data=p;for(c=0,m=P1(e(o));c<d;++c)o[m[c]].index=c;return r(o,m),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ot(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ot(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?t_:typeof s=="function"?s:Ot(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Ec,a):r},a}function hH(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Ec(t,e)}}function fH(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Ec(t,e)}}function mH(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var c=0,d=0,h=0;c<o;++c){for(var m=t[e[c]],p=m[n][1]||0,y=m[n-1][1]||0,v=(p-y)/2,w=0;w<c;++w){var k=t[e[w]],b=k[n][1]||0,N=k[n-1][1]||0;v+=b-N}d+=p,h+=v*p}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Ec(t,e)}}function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}var pH=["type","size","sizeType"];function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r_.apply(this,arguments)}function F2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function V2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(r),!0).forEach(function(n){gH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gH(t,e,r){return e=yH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yH(t){var e=xH(t,"string");return zd(e)=="symbol"?e:e+""}function xH(t,e){if(zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vH(t,e){if(t==null)return{};var r=bH(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bH(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var D6={symbolCircle:I1,symbolCross:UW,symbolDiamond:qW,symbolSquare:zW,symbolStar:KW,symbolTriangle:QW,symbolWye:XW},wH=Math.PI/180,kH=function(e){var r="symbol".concat(B0(e));return D6[r]||I1},_H=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*wH;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jH=function(e,r){D6["symbol".concat(B0(e))]=r},O1=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,s=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=vH(e,pH),h=V2(V2({},d),{},{type:n,size:s,sizeType:c}),m=function(){var b=kH(n),N=JW().type(b).size(_H(s,c,n));return N()},p=h.className,y=h.cx,v=h.cy,w=He(h,!0);return y===+y&&v===+v&&s===+s?Q.createElement("path",r_({},w,{className:at("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(v,")"),d:m()})):null};O1.registerSymbol=jH;function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function n_(){return n_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n_.apply(this,arguments)}function U2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(r),!0).forEach(function(n){Wd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L6(n.key),n)}}function TH(t,e,r){return e&&EH(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AH(t,e,r){return e=_p(e),CH(t,M6()?Reflect.construct(e,r||[],_p(t).constructor):e.apply(t,r))}function CH(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PH(t)}function PH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M6=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(t)}function IH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a_(t,e)}function a_(t,e){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},a_(t,e)}function Wd(t,e,r){return e=L6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L6(t){var e=OH(t,"string");return Tc(e)=="symbol"?e:e+""}function OH(t,e){if(Tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xn=32,R1=(function(t){function e(){return SH(this,e),AH(this,e,arguments)}return IH(e,t),TH(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=Xn/2,o=Xn/6,c=Xn/3,d=n.inactive?a:n.color;if(n.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Xn,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(s,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(s,`
            H`).concat(Xn,"M").concat(2*c,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return Q.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Xn/8,"h").concat(Xn,"v").concat(Xn*3/4,"h").concat(-Xn,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(n.legendIcon)){var h=NH({},n);return delete h.legendIcon,Q.cloneElement(n.legendIcon,h)}return Q.createElement(O1,{fill:d,cx:s,cy:s,size:Xn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,m={x:0,y:0,width:Xn,height:Xn},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(v,w){var k=v.formatter||d,b=at(Wd(Wd({"recharts-legend-item":!0},"legend-item-".concat(w),!0),"inactive",v.inactive));if(v.type==="none")return null;var N=Ke(v.value)?null:v.value;Aa(!Ke(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=v.inactive?h:v.color;return Q.createElement("li",n_({className:b,style:p,key:"legend-item-".concat(w)},Ko(n.props,v,w)),Q.createElement(Yk,{width:o,height:o,viewBox:m,style:y},n.renderIcon(v)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},k?k(N,v,w):N))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(V.PureComponent);Wd(R1,"displayName","Legend");Wd(R1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Pv,B2;function RH(){if(B2)return Pv;B2=1;var t=F0();function e(){this.__data__=new t,this.size=0}return Pv=e,Pv}var Iv,q2;function DH(){if(q2)return Iv;q2=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Iv=t,Iv}var Ov,z2;function MH(){if(z2)return Ov;z2=1;function t(e){return this.__data__.get(e)}return Ov=t,Ov}var Rv,W2;function LH(){if(W2)return Rv;W2=1;function t(e){return this.__data__.has(e)}return Rv=t,Rv}var Dv,H2;function $H(){if(H2)return Dv;H2=1;var t=F0(),e=j1(),r=N1(),n=200;function a(s,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([s,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(s,o),this.size=c.size,this}return Dv=a,Dv}var Mv,G2;function $6(){if(G2)return Mv;G2=1;var t=F0(),e=RH(),r=DH(),n=MH(),a=LH(),s=$H();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=s,Mv=o,Mv}var Lv,K2;function FH(){if(K2)return Lv;K2=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Lv=e,Lv}var $v,Q2;function VH(){if(Q2)return $v;Q2=1;function t(e){return this.__data__.has(e)}return $v=t,$v}var Fv,Y2;function F6(){if(Y2)return Fv;Y2=1;var t=N1(),e=FH(),r=VH();function n(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new t;++s<o;)this.add(a[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,Fv=n,Fv}var Vv,X2;function V6(){if(X2)return Vv;X2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return Vv=t,Vv}var Uv,J2;function U6(){if(J2)return Uv;J2=1;function t(e,r){return e.has(r)}return Uv=t,Uv}var Bv,Z2;function B6(){if(Z2)return Bv;Z2=1;var t=F6(),e=V6(),r=U6(),n=1,a=2;function s(o,c,d,h,m,p){var y=d&n,v=o.length,w=c.length;if(v!=w&&!(y&&w>v))return!1;var k=p.get(o),b=p.get(c);if(k&&b)return k==c&&b==o;var N=-1,S=!0,E=d&a?new t:void 0;for(p.set(o,c),p.set(c,o);++N<v;){var P=o[N],_=c[N];if(h)var O=y?h(_,P,N,c,o,p):h(P,_,N,o,c,p);if(O!==void 0){if(O)continue;S=!1;break}if(E){if(!e(c,function(T,R){if(!r(E,R)&&(P===T||m(P,T,d,h,p)))return E.push(R)})){S=!1;break}}else if(!(P===_||m(P,_,d,h,p))){S=!1;break}}return p.delete(o),p.delete(c),S}return Bv=s,Bv}var qv,eC;function UH(){if(eC)return qv;eC=1;var t=ci(),e=t.Uint8Array;return qv=e,qv}var zv,tC;function BH(){if(tC)return zv;tC=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,s){n[++r]=[s,a]}),n}return zv=t,zv}var Wv,rC;function D1(){if(rC)return Wv;rC=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return Wv=t,Wv}var Hv,nC;function qH(){if(nC)return Hv;nC=1;var t=zh(),e=UH(),r=_1(),n=B6(),a=BH(),s=D1(),o=1,c=2,d="[object Boolean]",h="[object Date]",m="[object Error]",p="[object Map]",y="[object Number]",v="[object RegExp]",w="[object Set]",k="[object String]",b="[object Symbol]",N="[object ArrayBuffer]",S="[object DataView]",E=t?t.prototype:void 0,P=E?E.valueOf:void 0;function _(O,T,R,M,D,A,F){switch(R){case S:if(O.byteLength!=T.byteLength||O.byteOffset!=T.byteOffset)return!1;O=O.buffer,T=T.buffer;case N:return!(O.byteLength!=T.byteLength||!A(new e(O),new e(T)));case d:case h:case y:return r(+O,+T);case m:return O.name==T.name&&O.message==T.message;case v:case k:return O==T+"";case p:var L=a;case w:var Z=M&o;if(L||(L=s),O.size!=T.size&&!Z)return!1;var ae=F.get(O);if(ae)return ae==T;M|=c,F.set(O,T);var W=n(L(O),L(T),M,D,A,F);return F.delete(O),W;case b:if(P)return P.call(O)==P.call(T)}return!1}return Hv=_,Hv}var Gv,aC;function q6(){if(aC)return Gv;aC=1;function t(e,r){for(var n=-1,a=r.length,s=e.length;++n<a;)e[s+n]=r[n];return e}return Gv=t,Gv}var Kv,iC;function zH(){if(iC)return Kv;iC=1;var t=q6(),e=_n();function r(n,a,s){var o=a(n);return e(n)?o:t(o,s(n))}return Kv=r,Kv}var Qv,sC;function WH(){if(sC)return Qv;sC=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,s=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[s++]=c)}return o}return Qv=t,Qv}var Yv,oC;function HH(){if(oC)return Yv;oC=1;function t(){return[]}return Yv=t,Yv}var Xv,lC;function GH(){if(lC)return Xv;lC=1;var t=WH(),e=HH(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return Xv=s,Xv}var Jv,cC;function KH(){if(cC)return Jv;cC=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Jv=t,Jv}var Zv,uC;function QH(){if(uC)return Zv;uC=1;var t=Gi(),e=Ki(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return Zv=n,Zv}var eb,dC;function M1(){if(dC)return eb;dC=1;var t=QH(),e=Ki(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return eb=s,eb}var dd={exports:{}},tb,hC;function YH(){if(hC)return tb;hC=1;function t(){return!1}return tb=t,tb}dd.exports;var fC;function z6(){return fC||(fC=1,(function(t,e){var r=ci(),n=YH(),a=e&&!e.nodeType&&e,s=a&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(dd,dd.exports)),dd.exports}var rb,mC;function L1(){if(mC)return rb;mC=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var s=typeof n;return a=a??t,!!a&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return rb=r,rb}var nb,pC;function $1(){if(pC)return nb;pC=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return nb=e,nb}var ab,gC;function XH(){if(gC)return ab;gC=1;var t=Gi(),e=$1(),r=Ki(),n="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",m="[object Number]",p="[object Object]",y="[object RegExp]",v="[object Set]",w="[object String]",k="[object WeakMap]",b="[object ArrayBuffer]",N="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",P="[object Int8Array]",_="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",R="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",A={};A[S]=A[E]=A[P]=A[_]=A[O]=A[T]=A[R]=A[M]=A[D]=!0,A[n]=A[a]=A[b]=A[s]=A[N]=A[o]=A[c]=A[d]=A[h]=A[m]=A[p]=A[y]=A[v]=A[w]=A[k]=!1;function F(L){return r(L)&&e(L.length)&&!!A[t(L)]}return ab=F,ab}var ib,yC;function W6(){if(yC)return ib;yC=1;function t(e){return function(r){return e(r)}}return ib=t,ib}var hd={exports:{}};hd.exports;var xC;function JH(){return xC||(xC=1,(function(t,e){var r=d6(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===n,o=s&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(hd,hd.exports)),hd.exports}var sb,vC;function H6(){if(vC)return sb;vC=1;var t=XH(),e=W6(),r=JH(),n=r&&r.isTypedArray,a=n?e(n):t;return sb=a,sb}var ob,bC;function ZH(){if(bC)return ob;bC=1;var t=KH(),e=M1(),r=_n(),n=z6(),a=L1(),s=H6(),o=Object.prototype,c=o.hasOwnProperty;function d(h,m){var p=r(h),y=!p&&e(h),v=!p&&!y&&n(h),w=!p&&!y&&!v&&s(h),k=p||y||v||w,b=k?t(h.length,String):[],N=b.length;for(var S in h)(m||c.call(h,S))&&!(k&&(S=="length"||v&&(S=="offset"||S=="parent")||w&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||a(S,N)))&&b.push(S);return b}return ob=d,ob}var lb,wC;function eG(){if(wC)return lb;wC=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return lb=e,lb}var cb,kC;function G6(){if(kC)return cb;kC=1;function t(e,r){return function(n){return e(r(n))}}return cb=t,cb}var ub,_C;function tG(){if(_C)return ub;_C=1;var t=G6(),e=t(Object.keys,Object);return ub=e,ub}var db,jC;function rG(){if(jC)return db;jC=1;var t=eG(),e=tG(),r=Object.prototype,n=r.hasOwnProperty;function a(s){if(!t(s))return e(s);var o=[];for(var c in Object(s))n.call(s,c)&&c!="constructor"&&o.push(c);return o}return db=a,db}var hb,NC;function Gh(){if(NC)return hb;NC=1;var t=k1(),e=$1();function r(n){return n!=null&&e(n.length)&&!t(n)}return hb=r,hb}var fb,SC;function H0(){if(SC)return fb;SC=1;var t=ZH(),e=rG(),r=Gh();function n(a){return r(a)?t(a):e(a)}return fb=n,fb}var mb,EC;function nG(){if(EC)return mb;EC=1;var t=zH(),e=GH(),r=H0();function n(a){return t(a,r,e)}return mb=n,mb}var pb,TC;function aG(){if(TC)return pb;TC=1;var t=nG(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(s,o,c,d,h,m){var p=c&e,y=t(s),v=y.length,w=t(o),k=w.length;if(v!=k&&!p)return!1;for(var b=v;b--;){var N=y[b];if(!(p?N in o:n.call(o,N)))return!1}var S=m.get(s),E=m.get(o);if(S&&E)return S==o&&E==s;var P=!0;m.set(s,o),m.set(o,s);for(var _=p;++b<v;){N=y[b];var O=s[N],T=o[N];if(d)var R=p?d(T,O,N,o,s,m):d(O,T,N,s,o,m);if(!(R===void 0?O===T||h(O,T,c,d,m):R)){P=!1;break}_||(_=N=="constructor")}if(P&&!_){var M=s.constructor,D=o.constructor;M!=D&&"constructor"in s&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(P=!1)}return m.delete(s),m.delete(o),P}return pb=a,pb}var gb,AC;function iG(){if(AC)return gb;AC=1;var t=al(),e=ci(),r=t(e,"DataView");return gb=r,gb}var yb,CC;function sG(){if(CC)return yb;CC=1;var t=al(),e=ci(),r=t(e,"Promise");return yb=r,yb}var xb,PC;function K6(){if(PC)return xb;PC=1;var t=al(),e=ci(),r=t(e,"Set");return xb=r,xb}var vb,IC;function oG(){if(IC)return vb;IC=1;var t=al(),e=ci(),r=t(e,"WeakMap");return vb=r,vb}var bb,OC;function lG(){if(OC)return bb;OC=1;var t=iG(),e=j1(),r=sG(),n=K6(),a=oG(),s=Gi(),o=h6(),c="[object Map]",d="[object Object]",h="[object Promise]",m="[object Set]",p="[object WeakMap]",y="[object DataView]",v=o(t),w=o(e),k=o(r),b=o(n),N=o(a),S=s;return(t&&S(new t(new ArrayBuffer(1)))!=y||e&&S(new e)!=c||r&&S(r.resolve())!=h||n&&S(new n)!=m||a&&S(new a)!=p)&&(S=function(E){var P=s(E),_=P==d?E.constructor:void 0,O=_?o(_):"";if(O)switch(O){case v:return y;case w:return c;case k:return h;case b:return m;case N:return p}return P}),bb=S,bb}var wb,RC;function cG(){if(RC)return wb;RC=1;var t=$6(),e=B6(),r=qH(),n=aG(),a=lG(),s=_n(),o=z6(),c=H6(),d=1,h="[object Arguments]",m="[object Array]",p="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function w(k,b,N,S,E,P){var _=s(k),O=s(b),T=_?m:a(k),R=O?m:a(b);T=T==h?p:T,R=R==h?p:R;var M=T==p,D=R==p,A=T==R;if(A&&o(k)){if(!o(b))return!1;_=!0,M=!1}if(A&&!M)return P||(P=new t),_||c(k)?e(k,b,N,S,E,P):r(k,b,T,N,S,E,P);if(!(N&d)){var F=M&&v.call(k,"__wrapped__"),L=D&&v.call(b,"__wrapped__");if(F||L){var Z=F?k.value():k,ae=L?b.value():b;return P||(P=new t),E(Z,ae,N,S,P)}}return A?(P||(P=new t),n(k,b,N,S,E,P)):!1}return wb=w,wb}var kb,DC;function F1(){if(DC)return kb;DC=1;var t=cG(),e=Ki();function r(n,a,s,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,s,o,r,c)}return kb=r,kb}var _b,MC;function uG(){if(MC)return _b;MC=1;var t=$6(),e=F1(),r=1,n=2;function a(s,o,c,d){var h=c.length,m=h,p=!d;if(s==null)return!m;for(s=Object(s);h--;){var y=c[h];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++h<m;){y=c[h];var v=y[0],w=s[v],k=y[1];if(p&&y[2]){if(w===void 0&&!(v in s))return!1}else{var b=new t;if(d)var N=d(w,k,v,s,o,b);if(!(N===void 0?e(k,w,r|n,d,b):N))return!1}}return!0}return _b=a,_b}var jb,LC;function Q6(){if(LC)return jb;LC=1;var t=Ws();function e(r){return r===r&&!t(r)}return jb=e,jb}var Nb,$C;function dG(){if($C)return Nb;$C=1;var t=Q6(),e=H0();function r(n){for(var a=e(n),s=a.length;s--;){var o=a[s],c=n[o];a[s]=[o,c,t(c)]}return a}return Nb=r,Nb}var Sb,FC;function Y6(){if(FC)return Sb;FC=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Sb=t,Sb}var Eb,VC;function hG(){if(VC)return Eb;VC=1;var t=uG(),e=dG(),r=Y6();function n(a){var s=e(a);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===a||t(o,a,s)}}return Eb=n,Eb}var Tb,UC;function fG(){if(UC)return Tb;UC=1;function t(e,r){return e!=null&&r in Object(e)}return Tb=t,Tb}var Ab,BC;function mG(){if(BC)return Ab;BC=1;var t=p6(),e=M1(),r=_n(),n=L1(),a=$1(),s=U0();function o(c,d,h){d=t(d,c);for(var m=-1,p=d.length,y=!1;++m<p;){var v=s(d[m]);if(!(y=c!=null&&h(c,v)))break;c=c[v]}return y||++m!=p?y:(p=c==null?0:c.length,!!p&&a(p)&&n(v,p)&&(r(c)||e(c)))}return Ab=o,Ab}var Cb,qC;function pG(){if(qC)return Cb;qC=1;var t=fG(),e=mG();function r(n,a){return n!=null&&e(n,a,t)}return Cb=r,Cb}var Pb,zC;function gG(){if(zC)return Pb;zC=1;var t=F1(),e=g6(),r=pG(),n=w1(),a=Q6(),s=Y6(),o=U0(),c=1,d=2;function h(m,p){return n(m)&&a(p)?s(o(m),p):function(y){var v=e(y,m);return v===void 0&&v===p?r(y,m):t(p,v,c|d)}}return Pb=h,Pb}var Ib,WC;function nu(){if(WC)return Ib;WC=1;function t(e){return e}return Ib=t,Ib}var Ob,HC;function yG(){if(HC)return Ob;HC=1;function t(e){return function(r){return r?.[e]}}return Ob=t,Ob}var Rb,GC;function xG(){if(GC)return Rb;GC=1;var t=E1();function e(r){return function(n){return t(n,r)}}return Rb=e,Rb}var Db,KC;function vG(){if(KC)return Db;KC=1;var t=yG(),e=xG(),r=w1(),n=U0();function a(s){return r(s)?t(n(s)):e(s)}return Db=a,Db}var Mb,QC;function ui(){if(QC)return Mb;QC=1;var t=hG(),e=gG(),r=nu(),n=_n(),a=vG();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Mb=s,Mb}var Lb,YC;function X6(){if(YC)return Lb;YC=1;function t(e,r,n,a){for(var s=e.length,o=n+(a?1:-1);a?o--:++o<s;)if(r(e[o],o,e))return o;return-1}return Lb=t,Lb}var $b,XC;function bG(){if(XC)return $b;XC=1;function t(e){return e!==e}return $b=t,$b}var Fb,JC;function wG(){if(JC)return Fb;JC=1;function t(e,r,n){for(var a=n-1,s=e.length;++a<s;)if(e[a]===r)return a;return-1}return Fb=t,Fb}var Vb,ZC;function kG(){if(ZC)return Vb;ZC=1;var t=X6(),e=bG(),r=wG();function n(a,s,o){return s===s?r(a,s,o):t(a,e,o)}return Vb=n,Vb}var Ub,eP;function _G(){if(eP)return Ub;eP=1;var t=kG();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return Ub=e,Ub}var Bb,tP;function jG(){if(tP)return Bb;tP=1;function t(e,r,n){for(var a=-1,s=e==null?0:e.length;++a<s;)if(n(r,e[a]))return!0;return!1}return Bb=t,Bb}var qb,rP;function NG(){if(rP)return qb;rP=1;function t(){}return qb=t,qb}var zb,nP;function SG(){if(nP)return zb;nP=1;var t=K6(),e=NG(),r=D1(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(s){return new t(s)}:e;return zb=a,zb}var Wb,aP;function EG(){if(aP)return Wb;aP=1;var t=F6(),e=_G(),r=jG(),n=U6(),a=SG(),s=D1(),o=200;function c(d,h,m){var p=-1,y=e,v=d.length,w=!0,k=[],b=k;if(m)w=!1,y=r;else if(v>=o){var N=h?null:a(d);if(N)return s(N);w=!1,y=n,b=new t}else b=h?[]:k;e:for(;++p<v;){var S=d[p],E=h?h(S):S;if(S=m||S!==0?S:0,w&&E===E){for(var P=b.length;P--;)if(b[P]===E)continue e;h&&b.push(E),k.push(S)}else y(b,E,m)||(b!==k&&b.push(E),k.push(S))}return k}return Wb=c,Wb}var Hb,iP;function TG(){if(iP)return Hb;iP=1;var t=ui(),e=EG();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return Hb=r,Hb}var AG=TG();const sP=bt(AG);function J6(t,e,r){return e===!0?sP(t,r):Ke(e)?sP(t,e):t}function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}var CG=["ref"];function oP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(r),!0).forEach(function(n){G0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e3(n.key),n)}}function IG(t,e,r){return e&&lP(t.prototype,e),r&&lP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OG(t,e,r){return e=jp(e),RG(t,Z6()?Reflect.construct(e,r||[],jp(t).constructor):e.apply(t,r))}function RG(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DG(t)}function DG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z6=function(){return!!t})()}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jp(t)}function MG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i_(t,e)}function i_(t,e){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},i_(t,e)}function G0(t,e,r){return e=e3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e3(t){var e=LG(t,"string");return Ac(e)=="symbol"?e:e+""}function LG(t,e){if(Ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $G(t,e){if(t==null)return{};var r=FG(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function VG(t){return t.value}function UG(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var r=$G(e,CG);return Q.createElement(R1,r)}var cP=1,Lo=(function(t){function e(){var r;PG(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=OG(this,e,[].concat(a)),G0(r,"lastBoundingBox",{width:-1,height:-1}),r}return MG(e,t),IG(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>cP||Math.abs(a.height-this.lastBoundingBox.height)>cP)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ni({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,m=a.chartHeight,p,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var v=this.getBBoxSnapshot();p={left:((h||0)-v.width)/2}}else p=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var w=this.getBBoxSnapshot();y={top:((m||0)-w.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Ni(Ni({},p),y)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,m=a.payload,p=Ni(Ni({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return Q.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(v){n.wrapperNode=v}},UG(s,Ni(Ni({},this.props),{},{payload:J6(m,h,VG)})))}}],[{key:"getWithHeight",value:function(n,a){var s=Ni(Ni({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&Ee(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(V.PureComponent);G0(Lo,"displayName","Legend");G0(Lo,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Gb,uP;function BG(){if(uP)return Gb;uP=1;var t=zh(),e=M1(),r=_n(),n=t?t.isConcatSpreadable:void 0;function a(s){return r(s)||e(s)||!!(n&&s&&s[n])}return Gb=a,Gb}var Kb,dP;function t3(){if(dP)return Kb;dP=1;var t=q6(),e=BG();function r(n,a,s,o,c){var d=-1,h=n.length;for(s||(s=e),c||(c=[]);++d<h;){var m=n[d];a>0&&s(m)?a>1?r(m,a-1,s,o,c):t(c,m):o||(c[c.length]=m)}return c}return Kb=r,Kb}var Qb,hP;function qG(){if(hP)return Qb;hP=1;function t(e){return function(r,n,a){for(var s=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++s];if(n(o[h],h,o)===!1)break}return r}}return Qb=t,Qb}var Yb,fP;function zG(){if(fP)return Yb;fP=1;var t=qG(),e=t();return Yb=e,Yb}var Xb,mP;function r3(){if(mP)return Xb;mP=1;var t=zG(),e=H0();function r(n,a){return n&&t(n,a,e)}return Xb=r,Xb}var Jb,pP;function WG(){if(pP)return Jb;pP=1;var t=Gh();function e(r,n){return function(a,s){if(a==null)return a;if(!t(a))return r(a,s);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&s(d[c],c,d)!==!1;);return a}}return Jb=e,Jb}var Zb,gP;function V1(){if(gP)return Zb;gP=1;var t=r3(),e=WG(),r=e(t);return Zb=r,Zb}var ew,yP;function n3(){if(yP)return ew;yP=1;var t=V1(),e=Gh();function r(n,a){var s=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++s]=a(c,d,h)}),o}return ew=r,ew}var tw,xP;function HG(){if(xP)return tw;xP=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return tw=t,tw}var rw,vP;function GG(){if(vP)return rw;vP=1;var t=tu();function e(r,n){if(r!==n){var a=r!==void 0,s=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,m=n===n,p=t(n);if(!h&&!p&&!c&&r>n||c&&d&&m&&!h&&!p||s&&d&&m||!a&&m||!o)return 1;if(!s&&!c&&!p&&r<n||p&&a&&o&&!s&&!c||h&&a&&o||!d&&o||!m)return-1}return 0}return rw=e,rw}var nw,bP;function KG(){if(bP)return nw;bP=1;var t=GG();function e(r,n,a){for(var s=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++s<d;){var m=t(o[s],c[s]);if(m){if(s>=h)return m;var p=a[s];return m*(p=="desc"?-1:1)}}return r.index-n.index}return nw=e,nw}var aw,wP;function QG(){if(wP)return aw;wP=1;var t=S1(),e=E1(),r=ui(),n=n3(),a=HG(),s=W6(),o=KG(),c=nu(),d=_n();function h(m,p,y){p.length?p=t(p,function(k){return d(k)?function(b){return e(b,k.length===1?k[0]:k)}:k}):p=[c];var v=-1;p=t(p,s(r));var w=n(m,function(k,b,N){var S=t(p,function(E){return E(k)});return{criteria:S,index:++v,value:k}});return a(w,function(k,b){return o(k,b,y)})}return aw=h,aw}var iw,kP;function YG(){if(kP)return iw;kP=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return iw=t,iw}var sw,_P;function XG(){if(_P)return sw;_P=1;var t=YG(),e=Math.max;function r(n,a,s){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var m=Array(a+1);++c<a;)m[c]=o[c];return m[a]=s(h),t(n,this,m)}}return sw=r,sw}var ow,jP;function JG(){if(jP)return ow;jP=1;function t(e){return function(){return e}}return ow=t,ow}var lw,NP;function a3(){if(NP)return lw;NP=1;var t=al(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return lw=e,lw}var cw,SP;function ZG(){if(SP)return cw;SP=1;var t=JG(),e=a3(),r=nu(),n=e?function(a,s){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:r;return cw=n,cw}var uw,EP;function eK(){if(EP)return uw;EP=1;var t=800,e=16,r=Date.now;function n(a){var s=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++s>=t)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return uw=n,uw}var dw,TP;function tK(){if(TP)return dw;TP=1;var t=ZG(),e=eK(),r=e(t);return dw=r,dw}var hw,AP;function rK(){if(AP)return hw;AP=1;var t=nu(),e=XG(),r=tK();function n(a,s){return r(e(a,s,t),a+"")}return hw=n,hw}var fw,CP;function K0(){if(CP)return fw;CP=1;var t=_1(),e=Gh(),r=L1(),n=Ws();function a(s,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],s):!1}return fw=a,fw}var mw,PP;function nK(){if(PP)return mw;PP=1;var t=t3(),e=QG(),r=rK(),n=K0(),a=r(function(s,o){if(s==null)return[];var c=o.length;return c>1&&n(s,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return mw=a,mw}var aK=nK();const U1=bt(aK);function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}function s_(){return s_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s_.apply(this,arguments)}function iK(t,e){return cK(t)||lK(t,e)||oK(t,e)||sK()}function sK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oK(t,e){if(t){if(typeof t=="string")return IP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IP(t,e)}}function IP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function cK(t){if(Array.isArray(t))return t}function OP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(r),!0).forEach(function(n){uK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uK(t,e,r){return e=dK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dK(t){var e=hK(t,"string");return Hd(e)=="symbol"?e:e+""}function hK(t,e){if(Hd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fK(t){return Array.isArray(t)&&yr(t[0])&&yr(t[1])?t.join(" ~ "):t}var mK=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,s=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,m=e.payload,p=e.formatter,y=e.itemSorter,v=e.wrapperClassName,w=e.labelClassName,k=e.label,b=e.labelFormatter,N=e.accessibilityLayer,S=N===void 0?!1:N,E=function(){if(m&&m.length){var F={padding:0,margin:0},L=(y?U1(m,y):m).map(function(Z,ae){if(Z.type==="none")return null;var W=pw({display:"block",paddingTop:4,paddingBottom:4,color:Z.color||"#000"},c),G=Z.formatter||p||fK,Y=Z.value,te=Z.name,ne=Y,z=te;if(G&&ne!=null&&z!=null){var ee=G(Y,te,Z,ae,m);if(Array.isArray(ee)){var J=iK(ee,2);ne=J[0],z=J[1]}else ne=ee}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ae),style:W},yr(z)?Q.createElement("span",{className:"recharts-tooltip-item-name"},z):null,yr(z)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},ne),Q.createElement("span",{className:"recharts-tooltip-item-unit"},Z.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:F},L)}return null},P=pw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),_=pw({margin:0},h),O=!st(k),T=O?k:"",R=at("recharts-default-tooltip",v),M=at("recharts-tooltip-label",w);O&&b&&m!==void 0&&m!==null&&(T=b(k,m));var D=S?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",s_({className:R,style:P},D),Q.createElement("p",{className:M,style:_},Q.isValidElement(T)?T:"".concat(T)),E())};function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function Sm(t,e,r){return e=pK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pK(t){var e=gK(t,"string");return Gd(e)=="symbol"?e:e+""}function gK(t,e){if(Gd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yu="recharts-tooltip-wrapper",yK={visibility:"hidden"};function xK(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return at(Yu,Sm(Sm(Sm(Sm({},"".concat(Yu,"-right"),Ee(r)&&e&&Ee(e.x)&&r>=e.x),"".concat(Yu,"-left"),Ee(r)&&e&&Ee(e.x)&&r<e.x),"".concat(Yu,"-bottom"),Ee(n)&&e&&Ee(e.y)&&n>=e.y),"".concat(Yu,"-top"),Ee(n)&&e&&Ee(e.y)&&n<e.y))}function RP(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(s&&Ee(s[n]))return s[n];var m=r[n]-c-a,p=r[n]+a;if(e[n])return o[n]?m:p;if(o[n]){var y=m,v=d[n];return y<v?Math.max(p,d[n]):Math.max(m,d[n])}var w=p+c,k=d[n]+h;return w>k?Math.max(m,d[n]):Math.max(p,d[n])}function vK(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function bK(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,m,p;return o.height>0&&o.width>0&&r?(m=RP({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),p=RP({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=vK({translateX:m,translateY:p,useTranslate3d:c})):h=yK,{cssProperties:h,cssClasses:xK({translateX:m,translateY:p,coordinate:r})}}function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function DP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(r),!0).forEach(function(n){l_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s3(n.key),n)}}function _K(t,e,r){return e&&kK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jK(t,e,r){return e=Np(e),NK(t,i3()?Reflect.construct(e,r||[],Np(t).constructor):e.apply(t,r))}function NK(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SK(t)}function SK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i3=function(){return!!t})()}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Np(t)}function EK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o_(t,e)}function o_(t,e){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o_(t,e)}function l_(t,e,r){return e=s3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s3(t){var e=TK(t,"string");return Cc(e)=="symbol"?e:e+""}function TK(t,e){if(Cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LP=1,AK=(function(t){function e(){var r;wK(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=jK(this,e,[].concat(a)),l_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),l_(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&h!==void 0?h:0}})}}),r}return EK(e,t),_K(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>LP||Math.abs(n.height-this.state.lastBoundingBox.height)>LP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,m=a.coordinate,p=a.hasPayload,y=a.isAnimationActive,v=a.offset,w=a.position,k=a.reverseDirection,b=a.useTranslate3d,N=a.viewBox,S=a.wrapperStyle,E=bK({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:v,position:w,reverseDirection:k,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:N}),P=E.cssClasses,_=E.cssProperties,O=MP(MP({transition:y&&s?"transform ".concat(c,"ms ").concat(d):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},S);return Q.createElement("div",{tabIndex:-1,className:P,style:O,ref:function(R){n.wrapperNode=R}},h)}}])})(V.PureComponent),CK=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},au={isSsr:CK()};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function $P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(r),!0).forEach(function(n){B1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l3(n.key),n)}}function OK(t,e,r){return e&&IK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RK(t,e,r){return e=Sp(e),DK(t,o3()?Reflect.construct(e,r||[],Sp(t).constructor):e.apply(t,r))}function DK(t,e){if(e&&(Pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MK(t)}function MK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o3=function(){return!!t})()}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sp(t)}function LK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c_(t,e)}function c_(t,e){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},c_(t,e)}function B1(t,e,r){return e=l3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l3(t){var e=$K(t,"string");return Pc(e)=="symbol"?e:e+""}function $K(t,e){if(Pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FK(t){return t.dataKey}function VK(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(mK,e)}var _a=(function(t){function e(){return PK(this,e),RK(this,e,arguments)}return LK(e,t),OK(e,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,m=a.coordinate,p=a.filterNull,y=a.isAnimationActive,v=a.offset,w=a.payload,k=a.payloadUniqBy,b=a.position,N=a.reverseDirection,S=a.useTranslate3d,E=a.viewBox,P=a.wrapperStyle,_=w??[];p&&_.length&&(_=J6(w.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),k,FK));var O=_.length>0;return Q.createElement(AK,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:y,active:s,coordinate:m,hasPayload:O,offset:v,position:b,reverseDirection:N,useTranslate3d:S,viewBox:E,wrapperStyle:P},VK(h,FP(FP({},this.props),{},{payload:_})))}}])})(V.PureComponent);B1(_a,"displayName","Tooltip");B1(_a,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!au.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var gw,VP;function UK(){if(VP)return gw;VP=1;var t=ci(),e=function(){return t.Date.now()};return gw=e,gw}var yw,UP;function BK(){if(UP)return yw;UP=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return yw=e,yw}var xw,BP;function qK(){if(BP)return xw;BP=1;var t=BK(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return xw=r,xw}var vw,qP;function c3(){if(qP)return vw;qP=1;var t=qK(),e=Ws(),r=tu(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=t(h);var p=s.test(h);return p||o.test(h)?c(h.slice(2),p?2:8):a.test(h)?n:+h}return vw=d,vw}var bw,zP;function zK(){if(zP)return bw;zP=1;var t=Ws(),e=UK(),r=c3(),n="Expected a function",a=Math.max,s=Math.min;function o(c,d,h){var m,p,y,v,w,k,b=0,N=!1,S=!1,E=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(N=!!h.leading,S="maxWait"in h,y=S?a(r(h.maxWait)||0,d):y,E="trailing"in h?!!h.trailing:E);function P(L){var Z=m,ae=p;return m=p=void 0,b=L,v=c.apply(ae,Z),v}function _(L){return b=L,w=setTimeout(R,d),N?P(L):v}function O(L){var Z=L-k,ae=L-b,W=d-Z;return S?s(W,y-ae):W}function T(L){var Z=L-k,ae=L-b;return k===void 0||Z>=d||Z<0||S&&ae>=y}function R(){var L=e();if(T(L))return M(L);w=setTimeout(R,O(L))}function M(L){return w=void 0,E&&m?P(L):(m=p=void 0,v)}function D(){w!==void 0&&clearTimeout(w),b=0,m=k=p=w=void 0}function A(){return w===void 0?v:M(e())}function F(){var L=e(),Z=T(L);if(m=arguments,p=this,k=L,Z){if(w===void 0)return _(k);if(S)return clearTimeout(w),w=setTimeout(R,d),P(k)}return w===void 0&&(w=setTimeout(R,d)),v}return F.cancel=D,F.flush=A,F}return bw=o,bw}var ww,WP;function WK(){if(WP)return ww;WP=1;var t=zK(),e=Ws(),r="Expected a function";function n(a,s,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,s,{leading:c,maxWait:s,trailing:d})}return ww=n,ww}var HK=WK();const u3=bt(HK);function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Em(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){GK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GK(t,e,r){return e=KK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=QK(t,"string");return Kd(e)=="symbol"?e:e+""}function QK(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YK(t,e){return eQ(t)||ZK(t,e)||JK(t,e)||XK()}function XK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(t,e){if(t){if(typeof t=="string")return GP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GP(t,e)}}function GP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function eQ(t){if(Array.isArray(t))return t}var d3=V.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,m=h===void 0?0:h,p=t.minHeight,y=t.maxHeight,v=t.children,w=t.debounce,k=w===void 0?0:w,b=t.id,N=t.className,S=t.onResize,E=t.style,P=E===void 0?{}:E,_=V.useRef(null),O=V.useRef();O.current=S,V.useImperativeHandle(e,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var T=V.useState({containerWidth:a.width,containerHeight:a.height}),R=YK(T,2),M=R[0],D=R[1],A=V.useCallback(function(L,Z){D(function(ae){var W=Math.round(L),G=Math.round(Z);return ae.containerWidth===W&&ae.containerHeight===G?ae:{containerWidth:W,containerHeight:G}})},[]);V.useEffect(function(){var L=function(te){var ne,z=te[0].contentRect,ee=z.width,J=z.height;A(ee,J),(ne=O.current)===null||ne===void 0||ne.call(O,ee,J)};k>0&&(L=u3(L,k,{trailing:!0,leading:!1}));var Z=new ResizeObserver(L),ae=_.current.getBoundingClientRect(),W=ae.width,G=ae.height;return A(W,G),Z.observe(_.current),function(){Z.disconnect()}},[A,k]);var F=V.useMemo(function(){var L=M.containerWidth,Z=M.containerHeight;if(L<0||Z<0)return null;Aa(Co(o)||Co(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Aa(!r||r>0,"The aspect(%s) must be greater than zero.",r);var ae=Co(o)?L:o,W=Co(d)?Z:d;r&&r>0&&(ae?W=ae/r:W&&(ae=W*r),y&&W>y&&(W=y)),Aa(ae>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ae,W,o,d,m,p,r);var G=!Array.isArray(v)&&Mi(v.type).endsWith("Chart");return Q.Children.map(v,function(Y){return Q.isValidElement(Y)?V.cloneElement(Y,Em({width:ae,height:W},G?{style:Em({height:"100%",width:"100%",maxHeight:W,maxWidth:ae},Y.props.style)}:{})):Y})},[r,v,d,y,p,m,M,o]);return Q.createElement("div",{id:b?"".concat(b):void 0,className:at("recharts-responsive-container",N),style:Em(Em({},P),{},{width:o,height:d,minWidth:m,minHeight:p,maxHeight:y}),ref:_},F)}),Q0=function(e){return null};Q0.displayName="Cell";function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function KP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function u_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(r),!0).forEach(function(n){tQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tQ(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=nQ(t,"string");return Qd(e)=="symbol"?e:e+""}function nQ(t,e){if(Qd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yl={widthCache:{},cacheCount:0},aQ=2e3,iQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QP="recharts_measurement_span";function sQ(t){var e=u_({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var kd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||au.isSsr)return{width:0,height:0};var n=sQ(r),a=JSON.stringify({text:e,copyStyle:n});if(Yl.widthCache[a])return Yl.widthCache[a];try{var s=document.getElementById(QP);s||(s=document.createElement("span"),s.setAttribute("id",QP),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=u_(u_({},iQ),n);Object.assign(s.style,o),s.textContent="".concat(e);var c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return Yl.widthCache[a]=d,++Yl.cacheCount>aQ&&(Yl.cacheCount=0,Yl.widthCache={}),d}catch{return{width:0,height:0}}},oQ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function Ep(t,e){return dQ(t)||uQ(t,e)||cQ(t,e)||lQ()}function lQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cQ(t,e){if(t){if(typeof t=="string")return YP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YP(t,e)}}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function dQ(t){if(Array.isArray(t))return t}function hQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mQ(n.key),n)}}function fQ(t,e,r){return e&&XP(t.prototype,e),r&&XP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mQ(t){var e=pQ(t,"string");return Yd(e)=="symbol"?e:e+""}function pQ(t,e){if(Yd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,h3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xQ=Object.keys(h3),ac="NaN";function vQ(t,e){return t*h3[e]}var Tm=(function(){function t(e,r){hQ(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!gQ.test(r)&&(this.num=NaN,this.unit=""),xQ.includes(r)&&(this.num=vQ(e,r),this.unit="px")}return fQ(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=yQ.exec(r))!==null&&n!==void 0?n:[],s=Ep(a,3),o=s[1],c=s[2];return new t(parseFloat(o),c??"")}}])})();function f3(t){if(t.includes(ac))return ac;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=JP.exec(e))!==null&&r!==void 0?r:[],a=Ep(n,4),s=a[1],o=a[2],c=a[3],d=Tm.parse(s??""),h=Tm.parse(c??""),m=o==="*"?d.multiply(h):d.divide(h);if(m.isNaN())return ac;e=e.replace(JP,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=ZP.exec(e))!==null&&p!==void 0?p:[],v=Ep(y,4),w=v[1],k=v[2],b=v[3],N=Tm.parse(w??""),S=Tm.parse(b??""),E=k==="+"?N.add(S):N.subtract(S);if(E.isNaN())return ac;e=e.replace(ZP,E.toString())}return e}var eI=/\(([^()]*)\)/;function bQ(t){for(var e=t;e.includes("(");){var r=eI.exec(e),n=Ep(r,2),a=n[1];e=e.replace(eI,f3(a))}return e}function wQ(t){var e=t.replace(/\s+/g,"");return e=bQ(e),e=f3(e),e}function kQ(t){try{return wQ(t)}catch{return ac}}function kw(t){var e=kQ(t.slice(5,-1));return e===ac?"":e}var _Q=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jQ=["dx","dy","angle","className","breakAll"];function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d_.apply(this,arguments)}function tI(t,e){if(t==null)return{};var r=NQ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function rI(t,e){return AQ(t)||TQ(t,e)||EQ(t,e)||SQ()}function SQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(t,e){if(t){if(typeof t=="string")return nI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nI(t,e)}}function nI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function AQ(t){if(Array.isArray(t))return t}var m3=/[ \f\n\r\t\v\u2028\u2029]+/,p3=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var s=[];st(r)||(n?s=r.toString().split(""):s=r.toString().split(m3));var o=s.map(function(d){return{word:d,width:kd(d,a).width}}),c=n?0:kd(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},CQ=function(e,r,n,a,s){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,m=Ee(o),p=c,y=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ae.reduce(function(W,G){var Y=G.word,te=G.width,ne=W[W.length-1];if(ne&&(a==null||s||ne.width+te+n<Number(a)))ne.words.push(Y),ne.width+=te+n;else{var z={words:[Y],width:te};W.push(z)}return W},[])},v=y(r),w=function(ae){return ae.reduce(function(W,G){return W.width>G.width?W:G})};if(!m)return v;for(var k="…",b=function(ae){var W=p.slice(0,ae),G=p3({breakAll:h,style:d,children:W+k}).wordsWithComputedWidth,Y=y(G),te=Y.length>o||w(Y).width>Number(a);return[te,Y]},N=0,S=p.length-1,E=0,P;N<=S&&E<=p.length-1;){var _=Math.floor((N+S)/2),O=_-1,T=b(O),R=rI(T,2),M=R[0],D=R[1],A=b(_),F=rI(A,1),L=F[0];if(!M&&!L&&(N=_+1),M&&L&&(S=_-1),!M&&L){P=D;break}E++}return P||v},aI=function(e){var r=st(e)?[]:e.toString().split(m3);return[{words:r}]},PQ=function(e){var r=e.width,n=e.scaleToFit,a=e.children,s=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!au.isSsr){var d,h,m=p3({breakAll:o,children:a,style:s});if(m){var p=m.wordsWithComputedWidth,y=m.spaceWidth;d=p,h=y}else return aI(a);return CQ({breakAll:o,children:a,maxLines:c,style:s},d,h,r,n)}return aI(a)},iI="#808080",Qo=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,y=e.textAnchor,v=y===void 0?"start":y,w=e.verticalAnchor,k=w===void 0?"end":w,b=e.fill,N=b===void 0?iI:b,S=tI(e,_Q),E=V.useMemo(function(){return PQ({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:p,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,p,S.style,S.width]),P=S.dx,_=S.dy,O=S.angle,T=S.className,R=S.breakAll,M=tI(S,jQ);if(!yr(n)||!yr(s))return null;var D=n+(Ee(P)?P:0),A=s+(Ee(_)?_:0),F;switch(k){case"start":F=kw("calc(".concat(h,")"));break;case"middle":F=kw("calc(".concat((E.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:F=kw("calc(".concat(E.length-1," * -").concat(c,")"));break}var L=[];if(p){var Z=E[0].width,ae=S.width;L.push("scale(".concat((Ee(ae)?ae/Z:1)/Z,")"))}return O&&L.push("rotate(".concat(O,", ").concat(D,", ").concat(A,")")),L.length&&(M.transform=L.join(" ")),Q.createElement("text",d_({},He(M,!0),{x:D,y:A,className:at("recharts-text",T),textAnchor:v,fill:N.includes("url")?iI:N}),E.map(function(W,G){var Y=W.words.join(R?"":" ");return Q.createElement("tspan",{x:D,dy:G===0?F:c,key:"".concat(Y,"-").concat(G)},Y)}))};function Ds(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IQ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function q1(t){let e,r,n;t.length!==2?(e=Ds,r=(c,d)=>Ds(t(c),d),n=(c,d)=>t(c)-d):(e=t===Ds||t===IQ?t:OQ,r=t,n=t);function a(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<0?h=p+1:m=p}while(h<m)}return h}function s(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<=0?h=p+1:m=p}while(h<m)}return h}function o(c,d,h=0,m=c.length){const p=a(c,d,h,m-1);return p>h&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:a,center:o,right:s}}function OQ(){return 0}function g3(t){return t===null?NaN:+t}function*RQ(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const DQ=q1(Ds),Kh=DQ.right;q1(g3).center;class sI extends Map{constructor(e,r=$Q){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(oI(this,e))}has(e){return super.has(oI(this,e))}set(e,r){return super.set(MQ(this,e),r)}delete(e){return super.delete(LQ(this,e))}}function oI({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function MQ({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function LQ({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function $Q(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FQ(t=Ds){if(t===Ds)return y3;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function y3(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const VQ=Math.sqrt(50),UQ=Math.sqrt(10),BQ=Math.sqrt(2);function Tp(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=VQ?10:s>=UQ?5:s>=BQ?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Tp(t,e,r*2):[c,d,h]}function h_(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?Tp(e,t,r):Tp(t,e,r);if(!(s>=a))return[];const c=s-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(s-h)/-o;else for(let h=0;h<c;++h)d[h]=(s-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function f_(t,e,r){return e=+e,t=+t,r=+r,Tp(t,e,r)[2]}function m_(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?f_(e,t,r):f_(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function lI(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function cI(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function x3(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?y3:FQ(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(d-p)/d)*(h-d/2<0?-1:1),v=Math.max(r,Math.floor(e-h*p/d+y)),w=Math.min(n,Math.floor(e+(d-h)*p/d+y));x3(t,e,v,w,a)}const s=t[e];let o=r,c=n;for(Xu(t,r,e),a(t[n],s)>0&&Xu(t,r,n);o<c;){for(Xu(t,o,c),++o,--c;a(t[o],s)<0;)++o;for(;a(t[c],s)>0;)--c}a(t[r],s)===0?Xu(t,r,c):(++c,Xu(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Xu(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function qQ(t,e,r){if(t=Float64Array.from(RQ(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return cI(t);if(e>=1)return lI(t);var n,a=(n-1)*e,s=Math.floor(a),o=lI(x3(t,s).subarray(0,s+1)),c=cI(t.subarray(s+1));return o+(c-o)*(a-s)}}function zQ(t,e,r=g3){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),c=+r(t[s+1],s+1,t);return o+(c-o)*(a-s)}}function WQ(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function ia(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const p_=Symbol("implicit");function z1(){var t=new sI,e=[],r=[],n=p_;function a(s){let o=t.get(s);if(o===void 0){if(n!==p_)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new sI;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return z1(e,r).unknown(n)},ia.apply(a,arguments),a}function Xd(){var t=z1().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,c=!1,d=0,h=0,m=.5;delete t.unknown;function p(){var y=e().length,v=a<n,w=v?a:n,k=v?n:a;s=(k-w)/Math.max(1,y-d+h*2),c&&(s=Math.floor(s)),w+=(k-w-s*(y-d))*m,o=s*(1-d),c&&(w=Math.round(w),o=Math.round(o));var b=WQ(y).map(function(N){return w+s*N});return r(v?b.reverse():b)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,p()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),p()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,p()):h},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return Xd(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(m)},ia.apply(p(),arguments)}function v3(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return v3(e())},t}function _d(){return v3(Xd.apply(null,arguments).paddingInner(1))}function W1(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function b3(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Qh(){}var Jd=.7,Ap=1/Jd,yc="\\s*([+-]?\\d+)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HQ=/^#([0-9a-f]{3,8})$/,GQ=new RegExp(`^rgb\\(${yc},${yc},${yc}\\)$`),KQ=new RegExp(`^rgb\\(${ti},${ti},${ti}\\)$`),QQ=new RegExp(`^rgba\\(${yc},${yc},${yc},${Zd}\\)$`),YQ=new RegExp(`^rgba\\(${ti},${ti},${ti},${Zd}\\)$`),XQ=new RegExp(`^hsl\\(${Zd},${ti},${ti}\\)$`),JQ=new RegExp(`^hsla\\(${Zd},${ti},${ti},${Zd}\\)$`),uI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};W1(Qh,eh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dI,formatHex:dI,formatHex8:ZQ,formatHsl:eY,formatRgb:hI,toString:hI});function dI(){return this.rgb().formatHex()}function ZQ(){return this.rgb().formatHex8()}function eY(){return w3(this).formatHsl()}function hI(){return this.rgb().formatRgb()}function eh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=HQ.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?fI(e):r===3?new kn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Am(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Am(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=GQ.exec(t))?new kn(e[1],e[2],e[3],1):(e=KQ.exec(t))?new kn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QQ.exec(t))?Am(e[1],e[2],e[3],e[4]):(e=YQ.exec(t))?Am(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XQ.exec(t))?gI(e[1],e[2]/100,e[3]/100,1):(e=JQ.exec(t))?gI(e[1],e[2]/100,e[3]/100,e[4]):uI.hasOwnProperty(t)?fI(uI[t]):t==="transparent"?new kn(NaN,NaN,NaN,0):null}function fI(t){return new kn(t>>16&255,t>>8&255,t&255,1)}function Am(t,e,r,n){return n<=0&&(t=e=r=NaN),new kn(t,e,r,n)}function tY(t){return t instanceof Qh||(t=eh(t)),t?(t=t.rgb(),new kn(t.r,t.g,t.b,t.opacity)):new kn}function g_(t,e,r,n){return arguments.length===1?tY(t):new kn(t,e,r,n??1)}function kn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}W1(kn,g_,b3(Qh,{brighter(t){return t=t==null?Ap:Math.pow(Ap,t),new kn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new kn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kn($o(this.r),$o(this.g),$o(this.b),Cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mI,formatHex:mI,formatHex8:rY,formatRgb:pI,toString:pI}));function mI(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function rY(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function pI(){const t=Cp(this.opacity);return`${t===1?"rgb(":"rgba("}${$o(this.r)}, ${$o(this.g)}, ${$o(this.b)}${t===1?")":`, ${t})`}`}function Cp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $o(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Po(t){return t=$o(t),(t<16?"0":"")+t.toString(16)}function gI(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Sa(t,e,r,n)}function w3(t){if(t instanceof Sa)return new Sa(t.h,t.s,t.l,t.opacity);if(t instanceof Qh||(t=eh(t)),!t)return new Sa;if(t instanceof Sa)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,c=s-a,d=(s+a)/2;return c?(e===s?o=(r-n)/c+(r<n)*6:r===s?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?s+a:2-s-a,o*=60):c=d>0&&d<1?0:o,new Sa(o,c,d,t.opacity)}function nY(t,e,r,n){return arguments.length===1?w3(t):new Sa(t,e,r,n??1)}function Sa(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}W1(Sa,nY,b3(Qh,{brighter(t){return t=t==null?Ap:Math.pow(Ap,t),new Sa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new Sa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new kn(_w(t>=240?t-240:t+120,a,n),_w(t,a,n),_w(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Sa(yI(this.h),Cm(this.s),Cm(this.l),Cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cp(this.opacity);return`${t===1?"hsl(":"hsla("}${yI(this.h)}, ${Cm(this.s)*100}%, ${Cm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yI(t){return t=(t||0)%360,t<0?t+360:t}function Cm(t){return Math.max(0,Math.min(1,t||0))}function _w(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const H1=t=>()=>t;function aY(t,e){return function(r){return t+r*e}}function iY(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function sY(t){return(t=+t)==1?k3:function(e,r){return r-e?iY(e,r,t):H1(isNaN(e)?r:e)}}function k3(t,e){var r=e-t;return r?aY(t,r):H1(isNaN(t)?e:t)}const xI=(function t(e){var r=sY(e);function n(a,s){var o=r((a=g_(a)).r,(s=g_(s)).r),c=r(a.g,s.g),d=r(a.b,s.b),h=k3(a.opacity,s.opacity);return function(m){return a.r=o(m),a.g=c(m),a.b=d(m),a.opacity=h(m),a+""}}return n.gamma=t,n})(1);function oY(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function lY(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cY(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=iu(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(c){for(o=0;o<n;++o)s[o]=a[o](c);return s}}function uY(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Pp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function dY(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=iu(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var y_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jw=new RegExp(y_.source,"g");function hY(t){return function(){return t}}function fY(t){return function(e){return t(e)+""}}function mY(t,e){var r=y_.lastIndex=jw.lastIndex=0,n,a,s,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=y_.exec(t))&&(a=jw.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),c[o]?c[o]+=s:c[++o]=s),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:Pp(n,a)})),r=jw.lastIndex;return r<e.length&&(s=e.slice(r),c[o]?c[o]+=s:c[++o]=s),c.length<2?d[0]?fY(d[0].x):hY(e):(e=d.length,function(h){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(h);return c.join("")})}function iu(t,e){var r=typeof e,n;return e==null||r==="boolean"?H1(e):(r==="number"?Pp:r==="string"?(n=eh(e))?(e=n,xI):mY:e instanceof eh?xI:e instanceof Date?uY:lY(e)?oY:Array.isArray(e)?cY:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dY:Pp)(t,e)}function G1(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function pY(t,e){e===void 0&&(e=t,t=iu);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[c](o-c)}}function gY(t){return function(){return t}}function Ip(t){return+t}var vI=[0,1];function cn(t){return t}function x_(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:gY(isNaN(e)?NaN:.5)}function yY(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function xY(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=x_(a,n),s=r(o,s)):(n=x_(n,a),s=r(s,o)),function(c){return s(n(c))}}function vY(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=x_(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(c){var d=Kh(t,c,1,n)-1;return s[d](a[d](c))}}function Yh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Y0(){var t=vI,e=vI,r=iu,n,a,s,o=cn,c,d,h;function m(){var y=Math.min(t.length,e.length);return o!==cn&&(o=yY(t[0],t[y-1])),c=y>2?vY:xY,d=h=null,p}function p(y){return y==null||isNaN(y=+y)?s:(d||(d=c(t.map(n),e,r)))(n(o(y)))}return p.invert=function(y){return o(a((h||(h=c(e,t.map(n),Pp)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,Ip),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),r=G1,m()},p.clamp=function(y){return arguments.length?(o=y?!0:cn,m()):o!==cn},p.interpolate=function(y){return arguments.length?(r=y,m()):r},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,v){return n=y,a=v,m()}}function K1(){return Y0()(cn,cn)}function bY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Op(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ic(t){return t=Op(Math.abs(t)),t?t[1]:NaN}function wY(t,e){return function(r,n){for(var a=r.length,s=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),s.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function kY(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var _Y=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function th(t){if(!(e=_Y.exec(t)))throw new Error("invalid format: "+t);var e;return new Q1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}th.prototype=Q1.prototype;function Q1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Q1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jY(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var _3;function NY(t,e){var r=Op(t,e);if(!r)return t+"";var n=r[0],a=r[1],s=a-(_3=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Op(t,Math.max(0,e+s-1))[0]}function bI(t,e){var r=Op(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const wI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:bY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>bI(t*100,e),r:bI,s:NY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kI(t){return t}var _I=Array.prototype.map,jI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function SY(t){var e=t.grouping===void 0||t.thousands===void 0?kI:wY(_I.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?kI:kY(_I.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(p){p=th(p);var y=p.fill,v=p.align,w=p.sign,k=p.symbol,b=p.zero,N=p.width,S=p.comma,E=p.precision,P=p.trim,_=p.type;_==="n"?(S=!0,_="g"):wI[_]||(E===void 0&&(E=12),P=!0,_="g"),(b||y==="0"&&v==="=")&&(b=!0,y="0",v="=");var O=k==="$"?r:k==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T=k==="$"?n:/[%p]/.test(_)?o:"",R=wI[_],M=/[defgprs%]/.test(_);E=E===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function D(A){var F=O,L=T,Z,ae,W;if(_==="c")L=R(A)+L,A="";else{A=+A;var G=A<0||1/A<0;if(A=isNaN(A)?d:R(Math.abs(A),E),P&&(A=jY(A)),G&&+A==0&&w!=="+"&&(G=!1),F=(G?w==="("?w:c:w==="-"||w==="("?"":w)+F,L=(_==="s"?jI[8+_3/3]:"")+L+(G&&w==="("?")":""),M){for(Z=-1,ae=A.length;++Z<ae;)if(W=A.charCodeAt(Z),48>W||W>57){L=(W===46?a+A.slice(Z+1):A.slice(Z))+L,A=A.slice(0,Z);break}}}S&&!b&&(A=e(A,1/0));var Y=F.length+A.length+L.length,te=Y<N?new Array(N-Y+1).join(y):"";switch(S&&b&&(A=e(te+A,te.length?N-L.length:1/0),te=""),v){case"<":A=F+A+L+te;break;case"=":A=F+te+A+L;break;case"^":A=te.slice(0,Y=te.length>>1)+F+A+L+te.slice(Y);break;default:A=te+F+A+L;break}return s(A)}return D.toString=function(){return p+""},D}function m(p,y){var v=h((p=th(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Ic(y)/3)))*3,k=Math.pow(10,-w),b=jI[8+w/3];return function(N){return v(k*N)+b}}return{format:h,formatPrefix:m}}var Pm,Y1,j3;EY({thousands:",",grouping:[3],currency:["$",""]});function EY(t){return Pm=SY(t),Y1=Pm.format,j3=Pm.formatPrefix,Pm}function TY(t){return Math.max(0,-Ic(Math.abs(t)))}function AY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ic(e)/3)))*3-Ic(Math.abs(t)))}function CY(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ic(e)-Ic(t))+1}function N3(t,e,r,n){var a=m_(t,e,r),s;switch(n=th(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=AY(a,o))&&(n.precision=s),j3(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=CY(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=TY(a))&&(n.precision=s-(n.type==="%")*2);break}}return Y1(n)}function Hs(t){var e=t.domain;return t.ticks=function(r){var n=e();return h_(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return N3(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],c=n[s],d,h,m=10;for(c<o&&(h=o,o=c,c=h,h=a,a=s,s=h);m-- >0;){if(h=f_(o,c,r),h===d)return n[a]=o,n[s]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Rp(){var t=K1();return t.copy=function(){return Yh(t,Rp())},ia.apply(t,arguments),Hs(t)}function S3(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Ip),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return S3(t).unknown(e)},t=arguments.length?Array.from(t,Ip):[0,1],Hs(r)}function E3(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function NI(t){return Math.log(t)}function SI(t){return Math.exp(t)}function PY(t){return-Math.log(-t)}function IY(t){return-Math.exp(-t)}function OY(t){return isFinite(t)?+("1e"+t):t<0?0:t}function RY(t){return t===10?OY:t===Math.E?Math.exp:e=>Math.pow(t,e)}function DY(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function EI(t){return(e,r)=>-t(-e,r)}function X1(t){const e=t(NI,SI),r=e.domain;let n=10,a,s;function o(){return a=DY(n),s=RY(n),r()[0]<0?(a=EI(a),s=EI(s),t(PY,IY)):t(NI,SI),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],m=d[d.length-1];const p=m<h;p&&([h,m]=[m,h]);let y=a(h),v=a(m),w,k;const b=c==null?10:+c;let N=[];if(!(n%1)&&v-y<b){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(w=1;w<n;++w)if(k=y<0?w/s(-y):w*s(y),!(k<h)){if(k>m)break;N.push(k)}}else for(;y<=v;++y)for(w=n-1;w>=1;--w)if(k=y>0?w/s(-y):w*s(y),!(k<h)){if(k>m)break;N.push(k)}N.length*2<b&&(N=h_(h,m,b))}else N=h_(y,v,Math.min(v-y,b)).map(s);return p?N.reverse():N},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=th(d)).precision==null&&(d.trim=!0),d=Y1(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/s(Math.round(a(m)));return p*n<n-.5&&(p*=n),p<=h?d(m):""}},e.nice=()=>r(E3(r(),{floor:c=>s(Math.floor(a(c))),ceil:c=>s(Math.ceil(a(c)))})),e}function T3(){const t=X1(Y0()).domain([1,10]);return t.copy=()=>Yh(t,T3()).base(t.base()),ia.apply(t,arguments),t}function TI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function AI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function J1(t){var e=1,r=t(TI(e),AI(e));return r.constant=function(n){return arguments.length?t(TI(e=+n),AI(e)):e},Hs(r)}function A3(){var t=J1(Y0());return t.copy=function(){return Yh(t,A3()).constant(t.constant())},ia.apply(t,arguments)}function CI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function MY(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function LY(t){return t<0?-t*t:t*t}function Z1(t){var e=t(cn,cn),r=1;function n(){return r===1?t(cn,cn):r===.5?t(MY,LY):t(CI(r),CI(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Hs(e)}function eN(){var t=Z1(Y0());return t.copy=function(){return Yh(t,eN()).exponent(t.exponent())},ia.apply(t,arguments),t}function $Y(){return eN.apply(null,arguments).exponent(.5)}function PI(t){return Math.sign(t)*t*t}function FY(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function C3(){var t=K1(),e=[0,1],r=!1,n;function a(s){var o=FY(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(PI(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ip)).map(PI)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return C3(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ia.apply(a,arguments),Hs(a)}function P3(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=zQ(t,o/c);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Kh(r,o)]}return s.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ds),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return P3().domain(t).range(e).unknown(n)},ia.apply(s,arguments)}function I3(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(d){return d!=null&&d<=d?a[Kh(n,d,0,r)]:s}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(s=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return I3().domain([t,e]).range(a).unknown(s)},ia.apply(Hs(o),arguments)}function O3(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Kh(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return O3().domain(t).range(e).unknown(r)},ia.apply(a,arguments)}const Nw=new Date,Sw=new Date;function vr(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),c=a.ceil(s);return s-o<c-s?o:c},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,c)=>{const d=[];if(s=a.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return d;let h;do d.push(h=new Date(+s)),e(s,c),t(s);while(h<s&&s<o);return d},a.filter=s=>vr(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(Nw.setTime(+s),Sw.setTime(+o),t(Nw),t(Sw),Math.floor(r(Nw,Sw))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Dp=vr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Dp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?vr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Dp);Dp.range;const Pi=1e3,Zn=Pi*60,Ii=Zn*60,qi=Ii*24,tN=qi*7,II=qi*30,Ew=qi*365,Io=vr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getUTCSeconds());Io.range;const rN=vr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi)},(t,e)=>{t.setTime(+t+e*Zn)},(t,e)=>(e-t)/Zn,t=>t.getMinutes());rN.range;const nN=vr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Zn)},(t,e)=>(e-t)/Zn,t=>t.getUTCMinutes());nN.range;const aN=vr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi-t.getMinutes()*Zn)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getHours());aN.range;const iN=vr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCHours());iN.range;const Xh=vr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zn)/qi,t=>t.getDate()-1);Xh.range;const X0=vr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/qi,t=>t.getUTCDate()-1);X0.range;const R3=vr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/qi,t=>Math.floor(t/qi));R3.range;function il(t){return vr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Zn)/tN)}const J0=il(0),Mp=il(1),VY=il(2),UY=il(3),Oc=il(4),BY=il(5),qY=il(6);J0.range;Mp.range;VY.range;UY.range;Oc.range;BY.range;qY.range;function sl(t){return vr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/tN)}const Z0=sl(0),Lp=sl(1),zY=sl(2),WY=sl(3),Rc=sl(4),HY=sl(5),GY=sl(6);Z0.range;Lp.range;zY.range;WY.range;Rc.range;HY.range;GY.range;const sN=vr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sN.range;const oN=vr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());oN.range;const zi=vr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:vr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});zi.range;const Wi=vr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Wi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:vr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Wi.range;function D3(t,e,r,n,a,s){const o=[[Io,1,Pi],[Io,5,5*Pi],[Io,15,15*Pi],[Io,30,30*Pi],[s,1,Zn],[s,5,5*Zn],[s,15,15*Zn],[s,30,30*Zn],[a,1,Ii],[a,3,3*Ii],[a,6,6*Ii],[a,12,12*Ii],[n,1,qi],[n,2,2*qi],[r,1,tN],[e,1,II],[e,3,3*II],[t,1,Ew]];function c(h,m,p){const y=m<h;y&&([h,m]=[m,h]);const v=p&&typeof p.range=="function"?p:d(h,m,p),w=v?v.range(h,+m+1):[];return y?w.reverse():w}function d(h,m,p){const y=Math.abs(m-h)/p,v=q1(([,,b])=>b).right(o,y);if(v===o.length)return t.every(m_(h/Ew,m/Ew,p));if(v===0)return Dp.every(Math.max(m_(h,m,p),1));const[w,k]=o[y/o[v-1][2]<o[v][2]/y?v-1:v];return w.every(k)}return[c,d]}const[KY,QY]=D3(Wi,oN,Z0,R3,iN,nN),[YY,XY]=D3(zi,sN,J0,Xh,aN,rN);function Tw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Aw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ju(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function JY(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=Zu(a),m=ed(a),p=Zu(s),y=ed(s),v=Zu(o),w=ed(o),k=Zu(c),b=ed(c),N=Zu(d),S=ed(d),E={a:G,A:Y,b:te,B:ne,c:null,d:$I,e:$I,f:wX,g:PX,G:OX,H:xX,I:vX,j:bX,L:M3,m:kX,M:_X,p:z,q:ee,Q:UI,s:BI,S:jX,u:NX,U:SX,V:EX,w:TX,W:AX,x:null,X:null,y:CX,Y:IX,Z:RX,"%":VI},P={a:J,A:le,b:fe,B:be,c:null,d:FI,e:FI,f:$X,g:KX,G:YX,H:DX,I:MX,j:LX,L:$3,m:FX,M:VX,p:me,q:xe,Q:UI,s:BI,S:UX,u:BX,U:qX,V:zX,w:WX,W:HX,x:null,X:null,y:GX,Y:QX,Z:XX,"%":VI},_={a:D,A,b:F,B:L,c:Z,d:MI,e:MI,f:mX,g:DI,G:RI,H:LI,I:LI,j:uX,L:fX,m:cX,M:dX,p:M,q:lX,Q:gX,s:yX,S:hX,u:nX,U:aX,V:iX,w:rX,W:sX,x:ae,X:W,y:DI,Y:RI,Z:oX,"%":pX};E.x=O(r,E),E.X=O(n,E),E.c=O(e,E),P.x=O(r,P),P.X=O(n,P),P.c=O(e,P);function O(q,he){return function(ge){var ce=[],Ne=-1,Ae=0,et=q.length,tt,St,ar;for(ge instanceof Date||(ge=new Date(+ge));++Ne<et;)q.charCodeAt(Ne)===37&&(ce.push(q.slice(Ae,Ne)),(St=OI[tt=q.charAt(++Ne)])!=null?tt=q.charAt(++Ne):St=tt==="e"?" ":"0",(ar=he[tt])&&(tt=ar(ge,St)),ce.push(tt),Ae=Ne+1);return ce.push(q.slice(Ae,Ne)),ce.join("")}}function T(q,he){return function(ge){var ce=Ju(1900,void 0,1),Ne=R(ce,q,ge+="",0),Ae,et;if(Ne!=ge.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(he&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Ae=Aw(Ju(ce.y,0,1)),et=Ae.getUTCDay(),Ae=et>4||et===0?Lp.ceil(Ae):Lp(Ae),Ae=X0.offset(Ae,(ce.V-1)*7),ce.y=Ae.getUTCFullYear(),ce.m=Ae.getUTCMonth(),ce.d=Ae.getUTCDate()+(ce.w+6)%7):(Ae=Tw(Ju(ce.y,0,1)),et=Ae.getDay(),Ae=et>4||et===0?Mp.ceil(Ae):Mp(Ae),Ae=Xh.offset(Ae,(ce.V-1)*7),ce.y=Ae.getFullYear(),ce.m=Ae.getMonth(),ce.d=Ae.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),et="Z"in ce?Aw(Ju(ce.y,0,1)).getUTCDay():Tw(Ju(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(et+5)%7:ce.w+ce.U*7-(et+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,Aw(ce)):Tw(ce)}}function R(q,he,ge,ce){for(var Ne=0,Ae=he.length,et=ge.length,tt,St;Ne<Ae;){if(ce>=et)return-1;if(tt=he.charCodeAt(Ne++),tt===37){if(tt=he.charAt(Ne++),St=_[tt in OI?he.charAt(Ne++):tt],!St||(ce=St(q,ge,ce))<0)return-1}else if(tt!=ge.charCodeAt(ce++))return-1}return ce}function M(q,he,ge){var ce=h.exec(he.slice(ge));return ce?(q.p=m.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function D(q,he,ge){var ce=v.exec(he.slice(ge));return ce?(q.w=w.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function A(q,he,ge){var ce=p.exec(he.slice(ge));return ce?(q.w=y.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function F(q,he,ge){var ce=N.exec(he.slice(ge));return ce?(q.m=S.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function L(q,he,ge){var ce=k.exec(he.slice(ge));return ce?(q.m=b.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function Z(q,he,ge){return R(q,e,he,ge)}function ae(q,he,ge){return R(q,r,he,ge)}function W(q,he,ge){return R(q,n,he,ge)}function G(q){return o[q.getDay()]}function Y(q){return s[q.getDay()]}function te(q){return d[q.getMonth()]}function ne(q){return c[q.getMonth()]}function z(q){return a[+(q.getHours()>=12)]}function ee(q){return 1+~~(q.getMonth()/3)}function J(q){return o[q.getUTCDay()]}function le(q){return s[q.getUTCDay()]}function fe(q){return d[q.getUTCMonth()]}function be(q){return c[q.getUTCMonth()]}function me(q){return a[+(q.getUTCHours()>=12)]}function xe(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var he=O(q+="",E);return he.toString=function(){return q},he},parse:function(q){var he=T(q+="",!1);return he.toString=function(){return q},he},utcFormat:function(q){var he=O(q+="",P);return he.toString=function(){return q},he},utcParse:function(q){var he=T(q+="",!0);return he.toString=function(){return q},he}}}var OI={"-":"",_:" ",0:"0"},Ar=/^\s*\d+/,ZY=/^%/,eX=/[\\^$*+?|[\]().{}]/g;function yt(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function tX(t){return t.replace(eX,"\\$&")}function Zu(t){return new RegExp("^(?:"+t.map(tX).join("|")+")","i")}function ed(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function rX(t,e,r){var n=Ar.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function nX(t,e,r){var n=Ar.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function aX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function iX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function sX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function RI(t,e,r){var n=Ar.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function DI(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oX(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lX(t,e,r){var n=Ar.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function cX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function MI(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function uX(t,e,r){var n=Ar.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function LI(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function dX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function hX(t,e,r){var n=Ar.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function fX(t,e,r){var n=Ar.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function mX(t,e,r){var n=Ar.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function pX(t,e,r){var n=ZY.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function gX(t,e,r){var n=Ar.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function yX(t,e,r){var n=Ar.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function $I(t,e){return yt(t.getDate(),e,2)}function xX(t,e){return yt(t.getHours(),e,2)}function vX(t,e){return yt(t.getHours()%12||12,e,2)}function bX(t,e){return yt(1+Xh.count(zi(t),t),e,3)}function M3(t,e){return yt(t.getMilliseconds(),e,3)}function wX(t,e){return M3(t,e)+"000"}function kX(t,e){return yt(t.getMonth()+1,e,2)}function _X(t,e){return yt(t.getMinutes(),e,2)}function jX(t,e){return yt(t.getSeconds(),e,2)}function NX(t){var e=t.getDay();return e===0?7:e}function SX(t,e){return yt(J0.count(zi(t)-1,t),e,2)}function L3(t){var e=t.getDay();return e>=4||e===0?Oc(t):Oc.ceil(t)}function EX(t,e){return t=L3(t),yt(Oc.count(zi(t),t)+(zi(t).getDay()===4),e,2)}function TX(t){return t.getDay()}function AX(t,e){return yt(Mp.count(zi(t)-1,t),e,2)}function CX(t,e){return yt(t.getFullYear()%100,e,2)}function PX(t,e){return t=L3(t),yt(t.getFullYear()%100,e,2)}function IX(t,e){return yt(t.getFullYear()%1e4,e,4)}function OX(t,e){var r=t.getDay();return t=r>=4||r===0?Oc(t):Oc.ceil(t),yt(t.getFullYear()%1e4,e,4)}function RX(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function FI(t,e){return yt(t.getUTCDate(),e,2)}function DX(t,e){return yt(t.getUTCHours(),e,2)}function MX(t,e){return yt(t.getUTCHours()%12||12,e,2)}function LX(t,e){return yt(1+X0.count(Wi(t),t),e,3)}function $3(t,e){return yt(t.getUTCMilliseconds(),e,3)}function $X(t,e){return $3(t,e)+"000"}function FX(t,e){return yt(t.getUTCMonth()+1,e,2)}function VX(t,e){return yt(t.getUTCMinutes(),e,2)}function UX(t,e){return yt(t.getUTCSeconds(),e,2)}function BX(t){var e=t.getUTCDay();return e===0?7:e}function qX(t,e){return yt(Z0.count(Wi(t)-1,t),e,2)}function F3(t){var e=t.getUTCDay();return e>=4||e===0?Rc(t):Rc.ceil(t)}function zX(t,e){return t=F3(t),yt(Rc.count(Wi(t),t)+(Wi(t).getUTCDay()===4),e,2)}function WX(t){return t.getUTCDay()}function HX(t,e){return yt(Lp.count(Wi(t)-1,t),e,2)}function GX(t,e){return yt(t.getUTCFullYear()%100,e,2)}function KX(t,e){return t=F3(t),yt(t.getUTCFullYear()%100,e,2)}function QX(t,e){return yt(t.getUTCFullYear()%1e4,e,4)}function YX(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Rc(t):Rc.ceil(t),yt(t.getUTCFullYear()%1e4,e,4)}function XX(){return"+0000"}function VI(){return"%"}function UI(t){return+t}function BI(t){return Math.floor(+t/1e3)}var Xl,V3,U3;JX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JX(t){return Xl=JY(t),V3=Xl.format,Xl.parse,U3=Xl.utcFormat,Xl.utcParse,Xl}function ZX(t){return new Date(t)}function eJ(t){return t instanceof Date?+t:+new Date(+t)}function lN(t,e,r,n,a,s,o,c,d,h){var m=K1(),p=m.invert,y=m.domain,v=h(".%L"),w=h(":%S"),k=h("%I:%M"),b=h("%I %p"),N=h("%a %d"),S=h("%b %d"),E=h("%B"),P=h("%Y");function _(O){return(d(O)<O?v:c(O)<O?w:o(O)<O?k:s(O)<O?b:n(O)<O?a(O)<O?N:S:r(O)<O?E:P)(O)}return m.invert=function(O){return new Date(p(O))},m.domain=function(O){return arguments.length?y(Array.from(O,eJ)):y().map(ZX)},m.ticks=function(O){var T=y();return t(T[0],T[T.length-1],O??10)},m.tickFormat=function(O,T){return T==null?_:h(T)},m.nice=function(O){var T=y();return(!O||typeof O.range!="function")&&(O=e(T[0],T[T.length-1],O??10)),O?y(E3(T,O)):m},m.copy=function(){return Yh(m,lN(t,e,r,n,a,s,o,c,d,h))},m}function tJ(){return ia.apply(lN(YY,XY,zi,sN,J0,Xh,aN,rN,Io,V3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rJ(){return ia.apply(lN(KY,QY,Wi,oN,Z0,X0,iN,nN,Io,U3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eg(){var t=0,e=1,r,n,a,s,o=cn,c=!1,d;function h(p){return p==null||isNaN(p=+p)?d:o(a===0?.5:(p=(s(p)-r)*a,c?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e]=p,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(p){return arguments.length?(c=!!p,h):c},h.interpolator=function(p){return arguments.length?(o=p,h):o};function m(p){return function(y){var v,w;return arguments.length?([v,w]=y,o=p(v,w),h):[o(0),o(1)]}}return h.range=m(iu),h.rangeRound=m(G1),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return s=p,r=p(t),n=p(e),a=r===n?0:1/(n-r),h}}function Gs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function B3(){var t=Hs(eg()(cn));return t.copy=function(){return Gs(t,B3())},Qi.apply(t,arguments)}function q3(){var t=X1(eg()).domain([1,10]);return t.copy=function(){return Gs(t,q3()).base(t.base())},Qi.apply(t,arguments)}function z3(){var t=J1(eg());return t.copy=function(){return Gs(t,z3()).constant(t.constant())},Qi.apply(t,arguments)}function cN(){var t=Z1(eg());return t.copy=function(){return Gs(t,cN()).exponent(t.exponent())},Qi.apply(t,arguments)}function nJ(){return cN.apply(null,arguments).exponent(.5)}function W3(){var t=[],e=cn;function r(n){if(n!=null&&!isNaN(n=+n))return e((Kh(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ds),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>qQ(t,s/n))},r.copy=function(){return W3(e).domain(t)},Qi.apply(r,arguments)}function tg(){var t=0,e=.5,r=1,n=1,a,s,o,c,d,h=cn,m,p=!1,y;function v(k){return isNaN(k=+k)?y:(k=.5+((k=+m(k))-s)*(n*k<n*s?c:d),h(p?Math.max(0,Math.min(1,k)):k))}v.domain=function(k){return arguments.length?([t,e,r]=k,a=m(t=+t),s=m(e=+e),o=m(r=+r),c=a===s?0:.5/(s-a),d=s===o?0:.5/(o-s),n=s<a?-1:1,v):[t,e,r]},v.clamp=function(k){return arguments.length?(p=!!k,v):p},v.interpolator=function(k){return arguments.length?(h=k,v):h};function w(k){return function(b){var N,S,E;return arguments.length?([N,S,E]=b,h=pY(k,[N,S,E]),v):[h(0),h(.5),h(1)]}}return v.range=w(iu),v.rangeRound=w(G1),v.unknown=function(k){return arguments.length?(y=k,v):y},function(k){return m=k,a=k(t),s=k(e),o=k(r),c=a===s?0:.5/(s-a),d=s===o?0:.5/(o-s),n=s<a?-1:1,v}}function H3(){var t=Hs(tg()(cn));return t.copy=function(){return Gs(t,H3())},Qi.apply(t,arguments)}function G3(){var t=X1(tg()).domain([.1,1,10]);return t.copy=function(){return Gs(t,G3()).base(t.base())},Qi.apply(t,arguments)}function K3(){var t=J1(tg());return t.copy=function(){return Gs(t,K3()).constant(t.constant())},Qi.apply(t,arguments)}function uN(){var t=Z1(tg());return t.copy=function(){return Gs(t,uN()).exponent(t.exponent())},Qi.apply(t,arguments)}function aJ(){return uN.apply(null,arguments).exponent(.5)}const qI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xd,scaleDiverging:H3,scaleDivergingLog:G3,scaleDivergingPow:uN,scaleDivergingSqrt:aJ,scaleDivergingSymlog:K3,scaleIdentity:S3,scaleImplicit:p_,scaleLinear:Rp,scaleLog:T3,scaleOrdinal:z1,scalePoint:_d,scalePow:eN,scaleQuantile:P3,scaleQuantize:I3,scaleRadial:C3,scaleSequential:B3,scaleSequentialLog:q3,scaleSequentialPow:cN,scaleSequentialQuantile:W3,scaleSequentialSqrt:nJ,scaleSequentialSymlog:z3,scaleSqrt:$Y,scaleSymlog:A3,scaleThreshold:O3,scaleTime:tJ,scaleUtc:rJ,tickFormat:N3},Symbol.toStringTag,{value:"Module"}));var Cw,zI;function rg(){if(zI)return Cw;zI=1;var t=tu();function e(r,n,a){for(var s=-1,o=r.length;++s<o;){var c=r[s],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,m=c}return m}return Cw=e,Cw}var Pw,WI;function Q3(){if(WI)return Pw;WI=1;function t(e,r){return e>r}return Pw=t,Pw}var Iw,HI;function iJ(){if(HI)return Iw;HI=1;var t=rg(),e=Q3(),r=nu();function n(a){return a&&a.length?t(a,r,e):void 0}return Iw=n,Iw}var sJ=iJ();const ng=bt(sJ);var Ow,GI;function Y3(){if(GI)return Ow;GI=1;function t(e,r){return e<r}return Ow=t,Ow}var Rw,KI;function oJ(){if(KI)return Rw;KI=1;var t=rg(),e=Y3(),r=nu();function n(a){return a&&a.length?t(a,r,e):void 0}return Rw=n,Rw}var lJ=oJ();const ag=bt(lJ);var Dw,QI;function cJ(){if(QI)return Dw;QI=1;var t=S1(),e=ui(),r=n3(),n=_n();function a(s,o){var c=n(s)?t:r;return c(s,e(o,3))}return Dw=a,Dw}var Mw,YI;function uJ(){if(YI)return Mw;YI=1;var t=t3(),e=cJ();function r(n,a){return t(e(n,a),1)}return Mw=r,Mw}var dJ=uJ();const hJ=bt(dJ);var Lw,XI;function fJ(){if(XI)return Lw;XI=1;var t=F1();function e(r,n){return t(r,n)}return Lw=e,Lw}var mJ=fJ();const ig=bt(mJ);var su=1e9,pJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hN,qt=!0,na="[DecimalError] ",Fo=na+"Invalid argument: ",dN=na+"Exponent out of range: ",ou=Math.floor,So=Math.pow,gJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,On,Sr=1e7,Lt=7,X3=9007199254740991,$p=ou(X3/Lt),Re={};Re.absoluteValue=Re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Re.comparedTo=Re.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Lt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Re.dividedBy=Re.div=function(t){return Li(this,new this.constructor(t))};Re.dividedToIntegerBy=Re.idiv=function(t){var e=this,r=e.constructor;return At(Li(e,new r(t),0,1),r.precision)};Re.equals=Re.eq=function(t){return!this.cmp(t)};Re.exponent=function(){return ur(this)};Re.greaterThan=Re.gt=function(t){return this.cmp(t)>0};Re.greaterThanOrEqualTo=Re.gte=function(t){return this.cmp(t)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(t){return this.cmp(t)<0};Re.lessThanOrEqualTo=Re.lte=function(t){return this.cmp(t)<1};Re.logarithm=Re.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(On))throw Error(na+"NaN");if(r.s<1)throw Error(na+(r.s?"NaN":"-Infinity"));return r.eq(On)?new n(0):(qt=!1,e=Li(rh(r,s),rh(t,s),s),qt=!0,At(e,a))};Re.minus=Re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?eL(e,t):J3(e,(t.s=-t.s,t))};Re.modulo=Re.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(na+"NaN");return r.s?(qt=!1,e=Li(r,t,0,1).times(t),qt=!0,r.minus(e)):At(new n(r),a)};Re.naturalExponential=Re.exp=function(){return Z3(this)};Re.naturalLogarithm=Re.ln=function(){return rh(this)};Re.negated=Re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Re.plus=Re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?J3(e,t):eL(e,(t.s=-t.s,t))};Re.precision=Re.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Fo+t);if(e=ur(a)+1,n=a.d.length-1,r=n*Lt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Re.squareRoot=Re.sqrt=function(){var t,e,r,n,a,s,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(na+"NaN")}for(t=ur(c),qt=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Qa(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=ou((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(s=n,n=s.plus(Li(c,s,o+2)).times(.5),Qa(s.d).slice(0,o)===(e=Qa(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(At(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if(e!="9999")break;o+=4}return qt=!0,At(n,r)};Re.times=Re.mul=function(t){var e,r,n,a,s,o,c,d,h,m=this,p=m.constructor,y=m.d,v=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,d=y.length,h=v.length,d<h&&(s=y,y=v,v=s,o=d,d=h,h=o),s=[],o=d+h,n=o;n--;)s.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=s[a]+v[n]*y[a-n-1]+e,s[a--]=c%Sr|0,e=c/Sr|0;s[a]=(s[a]+e)%Sr|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,qt?At(t,p.precision):t};Re.toDecimalPlaces=Re.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(oi(t,0,su),e===void 0?e=n.rounding:oi(e,0,8),At(r,t+ur(r)+1,e))};Re.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Yo(n,!0):(oi(t,0,su),e===void 0?e=a.rounding:oi(e,0,8),n=At(new a(n),t+1,e),r=Yo(n,!0,t+1)),r};Re.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Yo(a):(oi(t,0,su),e===void 0?e=s.rounding:oi(e,0,8),n=At(new s(a),t+ur(a)+1,e),r=Yo(n.abs(),!1,t+ur(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Re.toInteger=Re.toint=function(){var t=this,e=t.constructor;return At(new e(t),ur(t)+1,e.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(t){var e,r,n,a,s,o,c=this,d=c.constructor,h=12,m=+(t=new d(t));if(!t.s)return new d(On);if(c=new d(c),!c.s){if(t.s<1)throw Error(na+"Infinity");return c}if(c.eq(On))return c;if(n=d.precision,t.eq(On))return At(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=c.s,o){if((r=m<0?-m:m)<=X3){for(a=new d(On),e=Math.ceil(n/Lt+4),qt=!1;r%2&&(a=a.times(c),ZI(a.d,e)),r=ou(r/2),r!==0;)c=c.times(c),ZI(c.d,e);return qt=!0,t.s<0?new d(On).div(a):At(a,n)}}else if(s<0)throw Error(na+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,qt=!1,a=t.times(rh(c,n+h)),qt=!0,a=Z3(a),a.s=s,a};Re.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=ur(a),n=Yo(a,r<=s.toExpNeg||r>=s.toExpPos)):(oi(t,1,su),e===void 0?e=s.rounding:oi(e,0,8),a=At(new s(a),t,e),r=ur(a),n=Yo(a,t<=r||r<=s.toExpNeg,t)),n};Re.toSignificantDigits=Re.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(oi(t,1,su),e===void 0?e=n.rounding:oi(e,0,8)),At(new n(r),t,e)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ur(t),r=t.constructor;return Yo(t,e<=r.toExpNeg||e>=r.toExpPos)};function J3(t,e){var r,n,a,s,o,c,d,h,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),qt?At(e,p):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),s=o-a,s){for(s<0?(n=d,s=-s,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(p/Lt),c=o>c?o+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=d.length,s=h.length,c-s<0&&(s=c,n=h,h=d,d=n),r=0;s;)r=(d[--s]=d[s]+h[s]+r)/Sr|0,d[s]%=Sr;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,qt?At(e,p):e}function oi(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Fo+t)}function Qa(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Lt-n.length,r&&(s+=ks(r)),s+=n;o=t[e],n=o+"",r=Lt-n.length,r&&(s+=ks(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Li=(function(){function t(n,a){var s,o=0,c=n.length;for(n=n.slice();c--;)s=n[c]*a+o,n[c]=s%Sr|0,o=s/Sr|0;return o&&n.unshift(o),n}function e(n,a,s,o){var c,d;if(s!=o)d=s>o?1:-1;else for(c=d=0;c<s;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Sr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var c,d,h,m,p,y,v,w,k,b,N,S,E,P,_,O,T,R,M=n.constructor,D=n.s==a.s?1:-1,A=n.d,F=a.d;if(!n.s)return new M(n);if(!a.s)throw Error(na+"Division by zero");for(d=n.e-a.e,T=F.length,_=A.length,v=new M(D),w=v.d=[],h=0;F[h]==(A[h]||0);)++h;if(F[h]>(A[h]||0)&&--d,s==null?S=s=M.precision:o?S=s+(ur(n)-ur(a))+1:S=s,S<0)return new M(0);if(S=S/Lt+2|0,h=0,T==1)for(m=0,F=F[0],S++;(h<_||m)&&S--;h++)E=m*Sr+(A[h]||0),w[h]=E/F|0,m=E%F|0;else{for(m=Sr/(F[0]+1)|0,m>1&&(F=t(F,m),A=t(A,m),T=F.length,_=A.length),P=T,k=A.slice(0,T),b=k.length;b<T;)k[b++]=0;R=F.slice(),R.unshift(0),O=F[0],F[1]>=Sr/2&&++O;do m=0,c=e(F,k,T,b),c<0?(N=k[0],T!=b&&(N=N*Sr+(k[1]||0)),m=N/O|0,m>1?(m>=Sr&&(m=Sr-1),p=t(F,m),y=p.length,b=k.length,c=e(p,k,y,b),c==1&&(m--,r(p,T<y?R:F,y))):(m==0&&(c=m=1),p=F.slice()),y=p.length,y<b&&p.unshift(0),r(k,p,b),c==-1&&(b=k.length,c=e(F,k,T,b),c<1&&(m++,r(k,T<b?R:F,b))),b=k.length):c===0&&(m++,k=[0]),w[h++]=m,c&&k[0]?k[b++]=A[P]||0:(k=[A[P]],b=1);while((P++<_||k[0]!==void 0)&&S--)}return w[0]||w.shift(),v.e=d,At(v,o?s+ur(v)+1:s)}})();function Z3(t,e){var r,n,a,s,o,c,d=0,h=0,m=t.constructor,p=m.precision;if(ur(t)>16)throw Error(dN+ur(t));if(!t.s)return new m(On);for(qt=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,c+=n,r=a=s=new m(On),m.precision=c;;){if(a=At(a.times(t),c),r=r.times(++d),o=s.plus(Li(a,r,c)),Qa(o.d).slice(0,c)===Qa(s.d).slice(0,c)){for(;h--;)s=At(s.times(s),c);return m.precision=p,e==null?(qt=!0,At(s,p)):s}s=o}}function ur(t){for(var e=t.e*Lt,r=t.d[0];r>=10;r/=10)e++;return e}function $w(t,e,r){if(e>t.LN10.sd())throw qt=!0,r&&(t.precision=r),Error(na+"LN10 precision limit exceeded");return At(new t(t.LN10),e)}function ks(t){for(var e="";t--;)e+="0";return e}function rh(t,e){var r,n,a,s,o,c,d,h,m,p=1,y=10,v=t,w=v.d,k=v.constructor,b=k.precision;if(v.s<1)throw Error(na+(v.s?"NaN":"-Infinity"));if(v.eq(On))return new k(0);if(e==null?(qt=!1,h=b):h=e,v.eq(10))return e==null&&(qt=!0),$w(k,h);if(h+=y,k.precision=h,r=Qa(w),n=r.charAt(0),s=ur(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Qa(v.d),n=r.charAt(0),p++;s=ur(v),n>1?(v=new k("0."+r),s++):v=new k(n+"."+r.slice(1))}else return d=$w(k,h+2,b).times(s+""),v=rh(new k(n+"."+r.slice(1)),h-y).plus(d),k.precision=b,e==null?(qt=!0,At(v,b)):v;for(c=o=v=Li(v.minus(On),v.plus(On),h),m=At(v.times(v),h),a=3;;){if(o=At(o.times(m),h),d=c.plus(Li(o,new k(a),h)),Qa(d.d).slice(0,h)===Qa(c.d).slice(0,h))return c=c.times(2),s!==0&&(c=c.plus($w(k,h+2,b).times(s+""))),c=Li(c,new k(p),h),k.precision=b,e==null?(qt=!0,At(c,b)):c;c=d,a+=2}}function JI(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=ou(r/Lt),t.d=[],n=(r+1)%Lt,r<0&&(n+=Lt),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Lt;n<a;)t.d.push(+e.slice(n,n+=Lt));e=e.slice(n),n=Lt-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),qt&&(t.e>$p||t.e<-$p))throw Error(dN+r)}else t.s=0,t.e=0,t.d=[0];return t}function At(t,e,r){var n,a,s,o,c,d,h,m,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Lt,a=e,h=p[m=0];else{if(m=Math.ceil((n+1)/Lt),s=p.length,m>=s)return t;for(h=s=p[m],o=1;s>=10;s/=10)o++;n%=Lt,a=n-Lt+o}if(r!==void 0&&(s=So(10,o-a-1),c=h/s%10|0,d=e<0||p[m+1]!==void 0||h%s,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/So(10,o-a):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return d?(s=ur(t),p.length=1,e=e-s-1,p[0]=So(10,(Lt-e%Lt)%Lt),t.e=ou(-e/Lt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,s=1,m--):(p.length=m+1,s=So(10,Lt-n),p[m]=a>0?(h/So(10,o-a)%So(10,a)|0)*s:0),d)for(;;)if(m==0){(p[0]+=s)==Sr&&(p[0]=1,++t.e);break}else{if(p[m]+=s,p[m]!=Sr)break;p[m--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(qt&&(t.e>$p||t.e<-$p))throw Error(dN+ur(t));return t}function eL(t,e){var r,n,a,s,o,c,d,h,m,p,y=t.constructor,v=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),qt?At(e,v):e;if(d=t.d,p=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(m=o<0,m?(r=d,o=-o,c=p.length):(r=p,n=h,c=d.length),a=Math.max(Math.ceil(v/Lt),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=p.length,m=a<c,m&&(c=a),a=0;a<c;a++)if(d[a]!=p[a]){m=d[a]<p[a];break}o=0}for(m&&(r=d,d=p,p=r,e.s=-e.s),c=d.length,a=p.length-c;a>0;--a)d[c++]=0;for(a=p.length;a>o;){if(d[--a]<p[a]){for(s=a;s&&d[--s]===0;)d[s]=Sr-1;--d[s],d[a]+=Sr}d[a]-=p[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,qt?At(e,v):e):new y(0)}function Yo(t,e,r){var n,a=ur(t),s=Qa(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+ks(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+ks(-a-1)+s,r&&(n=r-o)>0&&(s+=ks(n))):a>=o?(s+=ks(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+ks(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=ks(n))),t.s<0?"-"+s:s}function ZI(t,e){if(t.length>e)return t.length=e,!0}function tL(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Fo+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return JI(o,s.toString())}else if(typeof s!="string")throw Error(Fo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,gJ.test(s))JI(o,s);else throw Error(Fo+s)}if(a.prototype=Re,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=tL,a.config=a.set=yJ,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function yJ(t){if(!t||typeof t!="object")throw Error(na+"Object expected");var e,r,n,a=["precision",1,su,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(ou(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Fo+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Fo+r+": "+n);return this}var hN=tL(pJ);On=new hN(1);const Nt=hN;function xJ(t){return kJ(t)||wJ(t)||bJ(t)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(t,e){if(t){if(typeof t=="string")return v_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v_(t,e)}}function wJ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function kJ(t){if(Array.isArray(t))return v_(t)}function v_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _J=function(e){return e},rL={},nL=function(e){return e===rL},eO=function(e){return function r(){return arguments.length===0||arguments.length===1&&nL(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},jJ=function t(e,r){return e===1?r:eO(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(function(c){return c!==rL}).length;return o>=e?r.apply(void 0,a):t(e-o,eO(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=a.map(function(p){return nL(p)?d.shift():p});return r.apply(void 0,xJ(m).concat(d))}))})},sg=function(e){return jJ(e.length,e)},b_=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},NJ=sg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),SJ=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return _J;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},s.apply(void 0,arguments))}},w_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},aL=function(e){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(c,d){return c===r[d]})||(r=s,n=e.apply(void 0,s)),n}};function EJ(t){var e;return t===0?e=1:e=Math.floor(new Nt(t).abs().log(10).toNumber())+1,e}function TJ(t,e,r){for(var n=new Nt(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var AJ=sg(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),CJ=sg(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),PJ=sg(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const og={rangeStep:TJ,getDigitCount:EJ,interpolateNumber:AJ,uninterpolateNumber:CJ,uninterpolateTruncation:PJ};function k_(t){return RJ(t)||OJ(t)||iL(t)||IJ()}function IJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function RJ(t){if(Array.isArray(t))return __(t)}function nh(t,e){return LJ(t)||MJ(t,e)||iL(t,e)||DJ()}function DJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iL(t,e){if(t){if(typeof t=="string")return __(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return __(t,e)}}function __(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MJ(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,s=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function LJ(t){if(Array.isArray(t))return t}function sL(t){var e=nh(t,2),r=e[0],n=e[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function oL(t,e,r){if(t.lte(0))return new Nt(0);var n=og.getDigitCount(t.toNumber()),a=new Nt(10).pow(n),s=t.div(a),o=n!==1?.05:.1,c=new Nt(Math.ceil(s.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new Nt(Math.ceil(d))}function $J(t,e,r){var n=1,a=new Nt(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Nt(10).pow(og.getDigitCount(t)-1),a=new Nt(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Nt(Math.floor(t)))}else t===0?a=new Nt(Math.floor((e-1)/2)):r||(a=new Nt(Math.floor(t)));var o=Math.floor((e-1)/2),c=SJ(NJ(function(d){return a.add(new Nt(d-o).mul(n)).toNumber()}),b_);return c(0,e)}function lL(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Nt(0),tickMin:new Nt(0),tickMax:new Nt(0)};var s=oL(new Nt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new Nt(0):(o=new Nt(t).add(e).div(2),o=o.sub(new Nt(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),d=Math.ceil(new Nt(e).sub(o).div(s).toNumber()),h=c+d+1;return h>r?lL(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:s,tickMin:o.sub(new Nt(c).mul(s)),tickMax:o.add(new Nt(d).mul(s))})}function FJ(t){var e=nh(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=sL([r,n]),d=nh(c,2),h=d[0],m=d[1];if(h===-1/0||m===1/0){var p=m===1/0?[h].concat(k_(b_(0,a-1).map(function(){return 1/0}))):[].concat(k_(b_(0,a-1).map(function(){return-1/0})),[m]);return r>n?w_(p):p}if(h===m)return $J(h,a,s);var y=lL(h,m,o,s),v=y.step,w=y.tickMin,k=y.tickMax,b=og.rangeStep(w,k.add(new Nt(.1).mul(v)),v);return r>n?w_(b):b}function VJ(t,e){var r=nh(t,2),n=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=sL([n,a]),c=nh(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var m=Math.max(e,2),p=oL(new Nt(h).sub(d).div(m-1),s,0),y=[].concat(k_(og.rangeStep(new Nt(d),new Nt(h).sub(new Nt(.99).mul(p)),p)),[h]);return n>a?w_(y):y}var UJ=aL(FJ),BJ=aL(VJ),qJ="Invariant failed";function Xo(t,e){throw new Error(qJ)}var zJ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function Fp(){return Fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fp.apply(this,arguments)}function WJ(t,e){return QJ(t)||KJ(t,e)||GJ(t,e)||HJ()}function HJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(t,e){if(t){if(typeof t=="string")return tO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tO(t,e)}}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function QJ(t){if(Array.isArray(t))return t}function YJ(t,e){if(t==null)return{};var r=XJ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dL(n.key),n)}}function eZ(t,e,r){return e&&ZJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tZ(t,e,r){return e=Vp(e),rZ(t,cL()?Reflect.construct(e,r||[],Vp(t).constructor):e.apply(t,r))}function rZ(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nZ(t)}function nZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!t})()}function Vp(t){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vp(t)}function aZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j_(t,e)}function j_(t,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},j_(t,e)}function uL(t,e,r){return e=dL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dL(t){var e=iZ(t,"string");return Dc(e)=="symbol"?e:e+""}function iZ(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lg=(function(t){function e(){return JJ(this,e),tZ(this,e,arguments)}return aZ(e,t),eZ(e,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,y=YJ(n,zJ),v=He(y,!1);this.props.direction==="x"&&m.type!=="number"&&Xo();var w=d.map(function(k){var b=h(k,c),N=b.x,S=b.y,E=b.value,P=b.errorVal;if(!P)return null;var _=[],O,T;if(Array.isArray(P)){var R=WJ(P,2);O=R[0],T=R[1]}else O=T=P;if(s==="vertical"){var M=m.scale,D=S+a,A=D+o,F=D-o,L=M(E-O),Z=M(E+T);_.push({x1:Z,y1:A,x2:Z,y2:F}),_.push({x1:L,y1:D,x2:Z,y2:D}),_.push({x1:L,y1:A,x2:L,y2:F})}else if(s==="horizontal"){var ae=p.scale,W=N+a,G=W-o,Y=W+o,te=ae(E-O),ne=ae(E+T);_.push({x1:G,y1:ne,x2:Y,y2:ne}),_.push({x1:W,y1:te,x2:W,y2:ne}),_.push({x1:G,y1:te,x2:Y,y2:te})}return Q.createElement(kt,Fp({className:"recharts-errorBar",key:"bar-".concat(_.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},v),_.map(function(z){return Q.createElement("line",Fp({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return Q.createElement(kt,{className:"recharts-errorBars"},w)}}])})(Q.Component);uL(lg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});uL(lg,"displayName","ErrorBar");function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function rO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rO(Object(r),!0).forEach(function(n){sZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sZ(t,e,r){return e=oZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oZ(t){var e=lZ(t,"string");return ah(e)=="symbol"?e:e+""}function lZ(t,e){if(ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hL=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,o=In(r,Lo);if(!o)return null;var c=Lo.defaultProps,d=c!==void 0?wo(wo({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:s==="children"?h=(n||[]).reduce(function(m,p){var y=p.item,v=p.props,w=v.sectors||v.data||[];return m.concat(w.map(function(k){return{type:o.props.iconType||y.props.legendType,value:k.name,color:k.fill,payload:k}}))},[]):h=(n||[]).map(function(m){var p=m.item,y=p.type.defaultProps,v=y!==void 0?wo(wo({},y),p.props):{},w=v.dataKey,k=v.name,b=v.legendType,N=v.hide;return{inactive:N,dataKey:w,type:d.iconType||b||"square",color:fN(p),value:k||w,payload:v}}),wo(wo(wo({},d),Lo.getWithHeight(o,a)),{},{payload:h,item:o})};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function nO(t){return hZ(t)||dZ(t)||uZ(t)||cZ()}function cZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uZ(t,e){if(t){if(typeof t=="string")return N_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N_(t,e)}}function dZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hZ(t){if(Array.isArray(t))return N_(t)}function N_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aO(Object(r),!0).forEach(function(n){xc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xc(t,e,r){return e=fZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fZ(t){var e=mZ(t,"string");return ih(e)=="symbol"?e:e+""}function mZ(t,e){if(ih(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yr(t,e,r){return st(t)||st(e)?r:yr(e)?Ln(t,e,r):Ke(e)?e(t):r}function jd(t,e,r,n){var a=hJ(t,function(c){return Yr(c,e)});if(r==="number"){var s=a.filter(function(c){return Ee(c)||parseFloat(c)});return s.length?[ag(s),ng(s)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!st(c)}):a;return o.map(function(c){return yr(c)||c instanceof Date?c:""})}var pZ=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n?.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var d=s.range,h=0;h<c;h++){var m=h>0?a[h-1].coordinate:a[c-1].coordinate,p=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,v=void 0;if(on(p-m)!==on(y-p)){var w=[];if(on(y-p)===on(d[1]-d[0])){v=y;var k=p+d[1]-d[0];w[0]=Math.min(k,(k+m)/2),w[1]=Math.max(k,(k+m)/2)}else{v=m;var b=y+d[1]-d[0];w[0]=Math.min(p,(b+p)/2),w[1]=Math.max(p,(b+p)/2)}var N=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(e>N[0]&&e<=N[1]||e>=w[0]&&e<=w[1]){o=a[h].index;break}}else{var S=Math.min(m,y),E=Math.max(m,y);if(e>(S+p)/2&&e<=(E+p)/2){o=a[h].index;break}}}else for(var P=0;P<c;P++)if(P===0&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P===c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},fN=function(e){var r,n=e,a=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Xt(Xt({},e.type.defaultProps),e.props):e.props,o=s.stroke,c=s.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},gZ=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},c=Object.keys(s),d=0,h=c.length;d<h;d++)for(var m=s[c[d]].stackGroups,p=Object.keys(m),y=0,v=p.length;y<v;y++){var w=m[p[y]],k=w.items,b=w.cateAxisId,N=k.filter(function(T){return Mi(T.type).indexOf("Bar")>=0});if(N&&N.length){var S=N[0].type.defaultProps,E=S!==void 0?Xt(Xt({},S),N[0].props):N[0].props,P=E.barSize,_=E[b];o[_]||(o[_]=[]);var O=st(P)?r:P;o[_].push({item:N[0],stackList:N.slice(1),barSize:st(O)?void 0:ln(O,n,0)})}}return o},yZ=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=ln(r,a,0,!0),m,p=[];if(o[0].barSize===+o[0].barSize){var y=!1,v=a/d,w=o.reduce(function(P,_){return P+_.barSize||0},0);w+=(d-1)*h,w>=a&&(w-=(d-1)*h,h=0),w>=a&&v>0&&(y=!0,v*=.9,w=d*v);var k=(a-w)/2>>0,b={offset:k-h,size:0};m=o.reduce(function(P,_){var O={item:_.item,position:{offset:b.offset+b.size+h,size:y?v:_.barSize}},T=[].concat(nO(P),[O]);return b=T[T.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(R){T.push({item:R,position:b})}),T},p)}else{var N=ln(n,a,0,!0);a-2*N-(d-1)*h<=0&&(h=0);var S=(a-2*N-(d-1)*h)/d;S>1&&(S>>=0);var E=c===+c?Math.min(S,c):S;m=o.reduce(function(P,_,O){var T=[].concat(nO(P),[{item:_.item,position:{offset:N+(S+h)*O+(S-E)/2,size:E}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(R){T.push({item:R,position:T[T.length-1].position})}),T},p)}return m},xZ=function(e,r,n,a){var s=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=hL({children:s,legendWidth:d});if(h){var m=a||{},p=m.width,y=m.height,v=h.align,w=h.verticalAlign,k=h.layout;if((k==="vertical"||k==="horizontal"&&w==="middle")&&v!=="center"&&Ee(e[v]))return Xt(Xt({},e),{},xc({},v,e[v]+(p||0)));if((k==="horizontal"||k==="vertical"&&v==="center")&&w!=="middle"&&Ee(e[w]))return Xt(Xt({},e),{},xc({},w,e[w]+(y||0)))}return e},vZ=function(e,r,n){return st(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},fL=function(e,r,n,a,s){var o=r.props.children,c=ra(o,lg).filter(function(h){return vZ(a,s,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,m){var p=Yr(m,n);if(st(p))return h;var y=Array.isArray(p)?[ag(p),ng(p)]:[p,p],v=d.reduce(function(w,k){var b=Yr(m,k,0),N=y[0]-Math.abs(Array.isArray(b)?b[0]:b),S=y[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(N,w[0]),Math.max(S,w[1])]},[1/0,-1/0]);return[Math.min(v[0],h[0]),Math.max(v[1],h[1])]},[1/0,-1/0])}return null},bZ=function(e,r,n,a,s){var o=r.map(function(c){return fL(e,c,n,s,a)}).filter(function(c){return!st(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},mL=function(e,r,n,a,s){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&fL(e,d,h,a)||jd(e,h,n,s)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var m=0,p=h.length;m<p;m++)c[h[m]]||(c[h[m]]=!0,d.push(h[m]));return d},[])},pL=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},gL=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var s,o,c=e.map(function(d){return d.coordinate===r&&(s=!0),d.coordinate===n&&(o=!0),d.coordinate});return s||c.push(r),o||c.push(n),c},Oi=function(e,r,n){if(!e)return null;var a=e.scale,s=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&c?.length>=2?on(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var y=s?s.indexOf(p):p;return{coordinate:a(y)+h,value:p,offset:h}});return m.filter(function(p){return!Wh(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:a(p)+h,value:p,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(p){return{coordinate:a(p)+h,value:p,offset:h}}):a.domain().map(function(p,y){return{coordinate:a(p)+h,value:s?s[p]:p,index:y,offset:h}})},Fw=new WeakMap,Im=function(e,r){if(typeof r!="function")return e;Fw.has(e)||Fw.set(e,new WeakMap);var n=Fw.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},yL=function(e,r,n){var a=e.scale,s=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:Xd(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Rp(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_d(),realScaleType:"point"}:s==="category"?{scale:Xd(),realScaleType:"band"}:{scale:Rp(),realScaleType:"linear"};if(Go(a)){var d="scale".concat(B0(a));return{scale:(qI[d]||_d)(),realScaleType:qI[d]?d:"point"}}return Ke(a)?{scale:a}:{scale:_d(),realScaleType:"point"}},iO=1e-4,xL=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),s=Math.min(a[0],a[1])-iO,o=Math.max(a[0],a[1])+iO,c=e(r[0]),d=e(r[n-1]);(c<s||c>o||d<s||d>o)&&e.domain([r[0],r[n-1]])}},wZ=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},kZ=function(e,r){if(!r||r.length!==2||!Ee(r[0])||!Ee(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!Ee(e[0])||e[0]<n)&&(s[0]=n),(!Ee(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},_Z=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0,c=0;c<r;++c){var d=Wh(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},jZ=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0;o<r;++o){var c=Wh(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=s,e[o][n][1]=s+c,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},NZ={sign:_Z,expand:hH,none:Ec,silhouette:fH,wiggle:mH,positive:jZ},SZ=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),s=NZ[n],o=dH().keys(a).value(function(c,d){return+Yr(c,d,0)}).order(t_).offset(s);return o(e)},EZ=function(e,r,n,a,s,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(p,y){var v,w=(v=y.type)!==null&&v!==void 0&&v.defaultProps?Xt(Xt({},y.type.defaultProps),y.props):y.props,k=w.stackId,b=w.hide;if(b)return p;var N=w[n],S=p[N]||{hasStack:!1,stackGroups:{}};if(yr(k)){var E=S.stackGroups[k]||{numericAxisId:n,cateAxisId:a,items:[]};E.items.push(y),S.hasStack=!0,S.stackGroups[k]=E}else S.stackGroups[Hh("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return Xt(Xt({},p),{},xc({},N,S))},d),m={};return Object.keys(h).reduce(function(p,y){var v=h[y];if(v.hasStack){var w={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(k,b){var N=v.stackGroups[b];return Xt(Xt({},k),{},xc({},b,{numericAxisId:n,cateAxisId:a,items:N.items,stackedData:SZ(e,N.items,s)}))},w)}return Xt(Xt({},p),{},xc({},y,v))},m)},vL=function(e,r){var n=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var m=UJ(h,s,c);return e.domain([ag(m),ng(m)]),{niceTicks:m}}if(s&&a==="number"){var p=e.domain(),y=BJ(p,s,c);return{niceTicks:y}}return null},sO=function(e){var r=e.axis,n=e.ticks,a=e.offset,s=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=Yr(o,r.dataKey,r.domain[c]);return st(d)?null:r.scale(d)-s/2+a},TZ=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},AZ=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Xt(Xt({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(yr(s)){var o=r[s];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},CZ=function(e){return e.reduce(function(r,n){return[ag(n.concat([r[0]]).filter(Ee)),ng(n.concat([r[1]]).filter(Ee))]},[1/0,-1/0])},bL=function(e,r,n){return Object.keys(e).reduce(function(a,s){var o=e[s],c=o.stackedData,d=c.reduce(function(h,m){var p=CZ(m.slice(r,n+1));return[Math.min(h[0],p[0]),Math.max(h[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},oO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S_=function(e,r,n){if(Ke(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(Ee(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(oO.test(e[0])){var s=+oO.exec(e[0])[1];a[0]=r[0]-s}else Ke(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(Ee(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(lO.test(e[1])){var o=+lO.exec(e[1])[1];a[1]=r[1]+o}else Ke(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Up=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var s=U1(r,function(p){return p.coordinate}),o=1/0,c=1,d=s.length;c<d;c++){var h=s[c],m=s[c-1];o=Math.min((h.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},cO=function(e,r,n){return!e||!e.length||ig(e,Ln(n,"type.defaultProps.domain"))?r:e},wL=function(e,r){var n=e.type.defaultProps?Xt(Xt({},e.type.defaultProps),e.props):e.props,a=n.dataKey,s=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,m=n.hide;return Xt(Xt({},He(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:s||a,color:fN(e),value:Yr(r,a),type:d,payload:r,chartType:h,hide:m})};function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function uO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uO(Object(r),!0).forEach(function(n){kL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kL(t,e,r){return e=PZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PZ(t){var e=IZ(t,"string");return sh(e)=="symbol"?e:e+""}function IZ(t,e){if(sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OZ(t,e){return LZ(t)||MZ(t,e)||DZ(t,e)||RZ()}function RZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DZ(t,e){if(t){if(typeof t=="string")return dO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(t,e)}}function dO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MZ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function LZ(t){if(Array.isArray(t))return t}var Bp=Math.PI/180,$Z=function(e){return e*180/Math.PI},Rt=function(e,r,n,a){return{x:e+Math.cos(-Bp*a)*n,y:r+Math.sin(-Bp*a)*n}},_L=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},FZ=function(e,r,n,a,s){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,m=ln(e.cx,o,o/2),p=ln(e.cy,c,c/2),y=_L(o,c,n),v=ln(e.innerRadius,y,0),w=ln(e.outerRadius,y,y*.8),k=Object.keys(r);return k.reduce(function(b,N){var S=r[N],E=S.domain,P=S.reversed,_;if(st(S.range))a==="angleAxis"?_=[d,h]:a==="radiusAxis"&&(_=[v,w]),P&&(_=[_[1],_[0]]);else{_=S.range;var O=_,T=OZ(O,2);d=T[0],h=T[1]}var R=yL(S,s),M=R.realScaleType,D=R.scale;D.domain(E).range(_),xL(D);var A=vL(D,Si(Si({},S),{},{realScaleType:M})),F=Si(Si(Si({},S),A),{},{range:_,radius:w,realScaleType:M,scale:D,cx:m,cy:p,innerRadius:v,outerRadius:w,startAngle:d,endAngle:h});return Si(Si({},b),{},kL({},N,F))},{})},VZ=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-o,2))},UZ=function(e,r){var n=e.x,a=e.y,s=r.cx,o=r.cy,c=VZ({x:n,y:a},{x:s,y:o});if(c<=0)return{radius:c};var d=(n-s)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:$Z(h),angleInRadian:h}},BZ=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:n-o*360}},qZ=function(e,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(s,o);return e+c*360},hO=function(e,r){var n=e.x,a=e.y,s=UZ({x:n,y:a},r),o=s.radius,c=s.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var m=BZ(r),p=m.startAngle,y=m.endAngle,v=c,w;if(p<=y){for(;v>y;)v-=360;for(;v<p;)v+=360;w=v>=p&&v<=y}else{for(;v>p;)v-=360;for(;v<y;)v+=360;w=v>=y&&v<=p}return w?Si(Si({},r),{},{radius:o,angle:qZ(v,r)}):null},jL=function(e){return!V.isValidElement(e)&&!Ke(e)&&typeof e!="boolean"?e.className:""};function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}var zZ=["offset"];function WZ(t){return QZ(t)||KZ(t)||GZ(t)||HZ()}function HZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GZ(t,e){if(t){if(typeof t=="string")return E_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E_(t,e)}}function KZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QZ(t){if(Array.isArray(t))return E_(t)}function E_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function YZ(t,e){if(t==null)return{};var r=XZ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fO(Object(r),!0).forEach(function(n){JZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JZ(t,e,r){return e=ZZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZZ(t){var e=eee(t,"string");return oh(e)=="symbol"?e:e+""}function eee(t,e){if(oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lh(){return lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lh.apply(this,arguments)}var tee=function(e){var r=e.value,n=e.formatter,a=st(e.children)?r:e.children;return Ke(n)?n(a):a},ree=function(e,r){var n=on(r-e),a=Math.min(Math.abs(r-e),360);return n*a},nee=function(e,r,n){var a=e.position,s=e.viewBox,o=e.offset,c=e.className,d=s,h=d.cx,m=d.cy,p=d.innerRadius,y=d.outerRadius,v=d.startAngle,w=d.endAngle,k=d.clockWise,b=(p+y)/2,N=ree(v,w),S=N>=0?1:-1,E,P;a==="insideStart"?(E=v+S*o,P=k):a==="insideEnd"?(E=w-S*o,P=!k):a==="end"&&(E=w+S*o,P=k),P=N<=0?P:!P;var _=Rt(h,m,b,E),O=Rt(h,m,b,E+(P?1:-1)*359),T="M".concat(_.x,",").concat(_.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(P?0:1,`,
    `).concat(O.x,",").concat(O.y),R=st(e.id)?Hh("recharts-radial-line-"):e.id;return Q.createElement("text",lh({},n,{dominantBaseline:"central",className:at("recharts-radial-bar-label",c)}),Q.createElement("defs",null,Q.createElement("path",{id:R,d:T})),Q.createElement("textPath",{xlinkHref:"#".concat(R)},r))},aee=function(e){var r=e.viewBox,n=e.offset,a=e.position,s=r,o=s.cx,c=s.cy,d=s.innerRadius,h=s.outerRadius,m=s.startAngle,p=s.endAngle,y=(m+p)/2;if(a==="outside"){var v=Rt(o,c,h+n,y),w=v.x,k=v.y;return{x:w,y:k,textAnchor:w>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var b=(d+h)/2,N=Rt(o,c,b,y),S=N.x,E=N.y;return{x:S,y:E,textAnchor:"middle",verticalAnchor:"middle"}},iee=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,s=e.position,o=r,c=o.x,d=o.y,h=o.width,m=o.height,p=m>=0?1:-1,y=p*a,v=p>0?"end":"start",w=p>0?"start":"end",k=h>=0?1:-1,b=k*a,N=k>0?"end":"start",S=k>0?"start":"end";if(s==="top"){var E={x:c+h/2,y:d-p*a,textAnchor:"middle",verticalAnchor:v};return pr(pr({},E),n?{height:Math.max(d-n.y,0),width:h}:{})}if(s==="bottom"){var P={x:c+h/2,y:d+m+y,textAnchor:"middle",verticalAnchor:w};return pr(pr({},P),n?{height:Math.max(n.y+n.height-(d+m),0),width:h}:{})}if(s==="left"){var _={x:c-b,y:d+m/2,textAnchor:N,verticalAnchor:"middle"};return pr(pr({},_),n?{width:Math.max(_.x-n.x,0),height:m}:{})}if(s==="right"){var O={x:c+h+b,y:d+m/2,textAnchor:S,verticalAnchor:"middle"};return pr(pr({},O),n?{width:Math.max(n.x+n.width-O.x,0),height:m}:{})}var T=n?{width:h,height:m}:{};return s==="insideLeft"?pr({x:c+b,y:d+m/2,textAnchor:S,verticalAnchor:"middle"},T):s==="insideRight"?pr({x:c+h-b,y:d+m/2,textAnchor:N,verticalAnchor:"middle"},T):s==="insideTop"?pr({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:w},T):s==="insideBottom"?pr({x:c+h/2,y:d+m-y,textAnchor:"middle",verticalAnchor:v},T):s==="insideTopLeft"?pr({x:c+b,y:d+y,textAnchor:S,verticalAnchor:w},T):s==="insideTopRight"?pr({x:c+h-b,y:d+y,textAnchor:N,verticalAnchor:w},T):s==="insideBottomLeft"?pr({x:c+b,y:d+m-y,textAnchor:S,verticalAnchor:v},T):s==="insideBottomRight"?pr({x:c+h-b,y:d+m-y,textAnchor:N,verticalAnchor:v},T):ru(s)&&(Ee(s.x)||Co(s.x))&&(Ee(s.y)||Co(s.y))?pr({x:c+ln(s.x,h),y:d+ln(s.y,m),textAnchor:"end",verticalAnchor:"end"},T):pr({x:c+h/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},T)},see=function(e){return"cx"in e&&Ee(e.cx)};function Er(t){var e=t.offset,r=e===void 0?5:e,n=YZ(t,zZ),a=pr({offset:r},n),s=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,m=a.className,p=m===void 0?"":m,y=a.textBreakAll;if(!s||st(c)&&st(d)&&!V.isValidElement(h)&&!Ke(h))return null;if(V.isValidElement(h))return V.cloneElement(h,a);var v;if(Ke(h)){if(v=V.createElement(h,a),V.isValidElement(v))return v}else v=tee(a);var w=see(s),k=He(a,!0);if(w&&(o==="insideStart"||o==="insideEnd"||o==="end"))return nee(a,v,k);var b=w?aee(a):iee(a);return Q.createElement(Qo,lh({className:at("recharts-label",p)},k,b,{breakAll:y}),v)}Er.displayName="Label";var NL=function(e){var r=e.cx,n=e.cy,a=e.angle,s=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,m=e.outerRadius,p=e.x,y=e.y,v=e.top,w=e.left,k=e.width,b=e.height,N=e.clockWise,S=e.labelViewBox;if(S)return S;if(Ee(k)&&Ee(b)){if(Ee(p)&&Ee(y))return{x:p,y,width:k,height:b};if(Ee(v)&&Ee(w))return{x:v,y:w,width:k,height:b}}return Ee(p)&&Ee(y)?{x:p,y,width:0,height:0}:Ee(r)&&Ee(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:m||d||c||0,clockWise:N}:e.viewBox?e.viewBox:{}},oee=function(e,r){return e?e===!0?Q.createElement(Er,{key:"label-implicit",viewBox:r}):yr(e)?Q.createElement(Er,{key:"label-implicit",viewBox:r,value:e}):V.isValidElement(e)?e.type===Er?V.cloneElement(e,{key:"label-implicit",viewBox:r}):Q.createElement(Er,{key:"label-implicit",content:e,viewBox:r}):Ke(e)?Q.createElement(Er,{key:"label-implicit",content:e,viewBox:r}):ru(e)?Q.createElement(Er,lh({viewBox:r},e,{key:"label-implicit"})):null:null},lee=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=NL(e),o=ra(a,Er).map(function(d,h){return V.cloneElement(d,{viewBox:r||s,key:"label-".concat(h)})});if(!n)return o;var c=oee(e.label,r||s);return[c].concat(WZ(o))};Er.parseViewBox=NL;Er.renderCallByParent=lee;var Vw,mO;function cee(){if(mO)return Vw;mO=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Vw=t,Vw}var uee=cee();const dee=bt(uee);function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}var hee=["valueAccessor"],fee=["data","dataKey","clockWise","id","textBreakAll"];function mee(t){return xee(t)||yee(t)||gee(t)||pee()}function pee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gee(t,e){if(t){if(typeof t=="string")return T_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T_(t,e)}}function yee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xee(t){if(Array.isArray(t))return T_(t)}function T_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(this,arguments)}function pO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pO(Object(r),!0).forEach(function(n){vee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vee(t,e,r){return e=bee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bee(t){var e=wee(t,"string");return ch(e)=="symbol"?e:e+""}function wee(t,e){if(ch(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yO(t,e){if(t==null)return{};var r=kee(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _ee=function(e){return Array.isArray(e.value)?dee(e.value):e.value};function Ms(t){var e=t.valueAccessor,r=e===void 0?_ee:e,n=yO(t,hee),a=n.data,s=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=yO(n,fee);return!a||!a.length?null:Q.createElement(kt,{className:"recharts-label-list"},a.map(function(m,p){var y=st(s)?r(m,p):Yr(m&&m.payload,s),v=st(c)?{}:{id:"".concat(c,"-").concat(p)};return Q.createElement(Er,qp({},He(m,!0),h,v,{parentViewBox:m.parentViewBox,value:y,textBreakAll:d,viewBox:Er.parseViewBox(st(o)?m:gO(gO({},m),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ms.displayName="LabelList";function jee(t,e){return t?t===!0?Q.createElement(Ms,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||Ke(t)?Q.createElement(Ms,{key:"labelList-implicit",data:e,content:t}):ru(t)?Q.createElement(Ms,qp({data:e},t,{key:"labelList-implicit"})):null:null}function Nee(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ra(n,Ms).map(function(o,c){return V.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var s=jee(t.label,e);return[s].concat(mee(a))}Ms.renderCallByParent=Nee;function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function A_(){return A_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A_.apply(this,arguments)}function xO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xO(Object(r),!0).forEach(function(n){See(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function See(t,e,r){return e=Eee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eee(t){var e=Tee(t,"string");return uh(e)=="symbol"?e:e+""}function Tee(t,e){if(uh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aee=function(e,r){var n=on(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Om=function(e){var r=e.cx,n=e.cy,a=e.radius,s=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,m=d*(c?1:-1)+a,p=Math.asin(d/m)/Bp,y=h?s:s+o*p,v=Rt(r,n,m,y),w=Rt(r,n,a,y),k=h?s-o*p:s,b=Rt(r,n,m*Math.cos(p*Bp),k);return{center:v,circleTangency:w,lineTangency:b,theta:p}},SL=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.startAngle,c=e.endAngle,d=Aee(o,c),h=o+d,m=Rt(r,n,s,o),p=Rt(r,n,s,h),y="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var v=Rt(r,n,a,o),w=Rt(r,n,a,h);y+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Cee=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,m=e.endAngle,p=on(m-h),y=Om({cx:r,cy:n,radius:s,angle:h,sign:p,cornerRadius:o,cornerIsExternal:d}),v=y.circleTangency,w=y.lineTangency,k=y.theta,b=Om({cx:r,cy:n,radius:s,angle:m,sign:-p,cornerRadius:o,cornerIsExternal:d}),N=b.circleTangency,S=b.lineTangency,E=b.theta,P=d?Math.abs(h-m):Math.abs(h-m)-k-E;if(P<0)return c?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):SL({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:h,endAngle:m});var _="M ".concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
  `);if(a>0){var O=Om({cx:r,cy:n,radius:a,angle:h,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),T=O.circleTangency,R=O.lineTangency,M=O.theta,D=Om({cx:r,cy:n,radius:a,angle:m,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=D.circleTangency,F=D.lineTangency,L=D.theta,Z=d?Math.abs(h-m):Math.abs(h-m)-M-L;if(Z<0&&o===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Z>180),",").concat(+(p>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(R.x,",").concat(R.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},Pee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mN=function(e){var r=vO(vO({},Pee),e),n=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,y=r.className;if(o<s||m===p)return null;var v=at("recharts-sector",y),w=o-s,k=ln(c,w,0,!0),b;return k>0&&Math.abs(m-p)<360?b=Cee({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(k,w/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:p}):b=SL({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:m,endAngle:p}),Q.createElement("path",A_({},He(r,!0),{className:v,d:b,role:"img"}))};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function C_(){return C_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C_.apply(this,arguments)}function bO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bO(Object(r),!0).forEach(function(n){Iee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iee(t,e,r){return e=Oee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oee(t){var e=Ree(t,"string");return dh(e)=="symbol"?e:e+""}function Ree(t,e){if(dh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kO={curveBasisClosed:eH,curveBasisOpen:tH,curveBasis:ZW,curveBumpX:FW,curveBumpY:VW,curveLinearClosed:rH,curveLinear:z0,curveMonotoneX:nH,curveMonotoneY:aH,curveNatural:iH,curveStep:sH,curveStepAfter:lH,curveStepBefore:oH},Rm=function(e){return e.x===+e.x&&e.y===+e.y},td=function(e){return e.x},rd=function(e){return e.y},Dee=function(e,r){if(Ke(e))return e;var n="curve".concat(B0(e));return(n==="curveMonotone"||n==="curveBump")&&r?kO["".concat(n).concat(r==="vertical"?"Y":"X")]:kO[n]||z0},Mee=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,s=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,m=Dee(n,c),p=h?s.filter(function(k){return Rm(k)}):s,y;if(Array.isArray(o)){var v=h?o.filter(function(k){return Rm(k)}):o,w=p.map(function(k,b){return wO(wO({},k),{},{base:v[b]})});return c==="vertical"?y=Nm().y(rd).x1(td).x0(function(k){return k.base.x}):y=Nm().x(td).y1(rd).y0(function(k){return k.base.y}),y.defined(Rm).curve(m),y(w)}return c==="vertical"&&Ee(o)?y=Nm().y(rd).x1(td).x0(o):Ee(o)?y=Nm().x(td).y1(rd).y0(o):y=j6().x(td).y(rd),y.defined(Rm).curve(m),y(p)},P_=function(e){var r=e.className,n=e.points,a=e.path,s=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Mee(e):a;return V.createElement("path",C_({},He(e,!1),yp(e),{className:at("recharts-curve",r),d:o,ref:s}))},Uw={exports:{}},Bw,_O;function Lee(){if(_O)return Bw;_O=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bw=t,Bw}var qw,jO;function $ee(){if(jO)return qw;jO=1;var t=Lee();function e(){}function r(){}return r.resetWarningCache=e,qw=function(){function n(o,c,d,h,m,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return s.PropTypes=s,s},qw}var NO;function Fee(){return NO||(NO=1,Uw.exports=$ee()()),Uw.exports}var Vee=Fee();const vt=bt(Vee);var Uee=Object.getOwnPropertyNames,Bee=Object.getOwnPropertySymbols,qee=Object.prototype.hasOwnProperty;function SO(t,e){return function(n,a,s){return t(n,a,s)&&e(n,a,s)}}function Dm(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var s=a.cache,o=s.get(r),c=s.get(n);if(o&&c)return o===n&&c===r;s.set(r,n),s.set(n,r);var d=t(r,n,a);return s.delete(r),s.delete(n),d}}function EO(t){return Uee(t).concat(Bee(t))}var zee=Object.hasOwn||(function(t,e){return qee.call(t,e)});function ol(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Wee="__v",Hee="__o",Gee="_owner",TO=Object.getOwnPropertyDescriptor,AO=Object.keys;function Kee(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Qee(t,e){return ol(t.getTime(),e.getTime())}function Yee(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Xee(t,e){return t===e}function CO(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.entries(),o,c,d=0;(o=s.next())&&!o.done;){for(var h=e.entries(),m=!1,p=0;(c=h.next())&&!c.done;){if(a[p]){p++;continue}var y=o.value,v=c.value;if(r.equals(y[0],v[0],d,p,t,e,r)&&r.equals(y[1],v[1],y[0],v[0],t,e,r)){m=a[p]=!0;break}p++}if(!m)return!1;d++}return!0}var Jee=ol;function Zee(t,e,r){var n=AO(t),a=n.length;if(AO(e).length!==a)return!1;for(;a-- >0;)if(!EL(t,e,r,n[a]))return!1;return!0}function nd(t,e,r){var n=EO(t),a=n.length;if(EO(e).length!==a)return!1;for(var s,o,c;a-- >0;)if(s=n[a],!EL(t,e,r,s)||(o=TO(t,s),c=TO(e,s),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function ete(t,e){return ol(t.valueOf(),e.valueOf())}function tte(t,e){return t.source===e.source&&t.flags===e.flags}function PO(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.values(),o,c;(o=s.next())&&!o.done;){for(var d=e.values(),h=!1,m=0;(c=d.next())&&!c.done;){if(!a[m]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[m]=!0;break}m++}if(!h)return!1}return!0}function rte(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function nte(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function EL(t,e,r,n){return(n===Gee||n===Hee||n===Wee)&&(t.$$typeof||e.$$typeof)?!0:zee(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var ate="[object Arguments]",ite="[object Boolean]",ste="[object Date]",ote="[object Error]",lte="[object Map]",cte="[object Number]",ute="[object Object]",dte="[object RegExp]",hte="[object Set]",fte="[object String]",mte="[object URL]",pte=Array.isArray,IO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,OO=Object.assign,gte=Object.prototype.toString.call.bind(Object.prototype.toString);function yte(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,c=t.areObjectsEqual,d=t.arePrimitiveWrappersEqual,h=t.areRegExpsEqual,m=t.areSetsEqual,p=t.areTypedArraysEqual,y=t.areUrlsEqual;return function(w,k,b){if(w===k)return!0;if(w==null||k==null)return!1;var N=typeof w;if(N!==typeof k)return!1;if(N!=="object")return N==="number"?o(w,k,b):N==="function"?a(w,k,b):!1;var S=w.constructor;if(S!==k.constructor)return!1;if(S===Object)return c(w,k,b);if(pte(w))return e(w,k,b);if(IO!=null&&IO(w))return p(w,k,b);if(S===Date)return r(w,k,b);if(S===RegExp)return h(w,k,b);if(S===Map)return s(w,k,b);if(S===Set)return m(w,k,b);var E=gte(w);return E===ste?r(w,k,b):E===dte?h(w,k,b):E===lte?s(w,k,b):E===hte?m(w,k,b):E===ute?typeof w.then!="function"&&typeof k.then!="function"&&c(w,k,b):E===mte?y(w,k,b):E===ote?n(w,k,b):E===ate?c(w,k,b):E===ite||E===cte||E===fte?d(w,k,b):!1}}function xte(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?nd:Kee,areDatesEqual:Qee,areErrorsEqual:Yee,areFunctionsEqual:Xee,areMapsEqual:n?SO(CO,nd):CO,areNumbersEqual:Jee,areObjectsEqual:n?nd:Zee,arePrimitiveWrappersEqual:ete,areRegExpsEqual:tte,areSetsEqual:n?SO(PO,nd):PO,areTypedArraysEqual:n?nd:rte,areUrlsEqual:nte};if(r&&(a=OO({},a,r(a))),e){var s=Dm(a.areArraysEqual),o=Dm(a.areMapsEqual),c=Dm(a.areObjectsEqual),d=Dm(a.areSetsEqual);a=OO({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:d})}return a}function vte(t){return function(e,r,n,a,s,o,c){return t(e,r,c)}}function bte(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,s=t.strict;if(n)return function(d,h){var m=n(),p=m.cache,y=p===void 0?e?new WeakMap:void 0:p,v=m.meta;return r(d,h,{cache:y,equals:a,meta:v,strict:s})};if(e)return function(d,h){return r(d,h,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(d,h){return r(d,h,o)}}var wte=Ks();Ks({strict:!0});Ks({circular:!0});Ks({circular:!0,strict:!0});Ks({createInternalComparator:function(){return ol}});Ks({strict:!0,createInternalComparator:function(){return ol}});Ks({circular:!0,createInternalComparator:function(){return ol}});Ks({circular:!0,createInternalComparator:function(){return ol},strict:!0});function Ks(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,s=t.strict,o=s===void 0?!1:s,c=xte(t),d=yte(c),h=n?n(d):vte(d);return bte({circular:r,comparator:d,createState:a,equals:h,strict:o})}function kte(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function RO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(s){r<0&&(r=s),s-r>e?(t(s),r=-1):kte(a)};requestAnimationFrame(n)}function I_(t){"@babel/helpers - typeof";return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I_(t)}function _te(t){return Ete(t)||Ste(t)||Nte(t)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nte(t,e){if(t){if(typeof t=="string")return DO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DO(t,e)}}function DO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ste(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ete(t){if(Array.isArray(t))return t}function Tte(){var t={},e=function(){return null},r=!1,n=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,c=_te(o),d=c[0],h=c.slice(1);if(typeof d=="number"){RO(a.bind(null,h),d);return}a(d),RO(a.bind(null,h));return}I_(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function MO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(r),!0).forEach(function(n){TL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TL(t,e,r){return e=Ate(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ate(t){var e=Cte(t,"string");return hh(e)==="symbol"?e:String(e)}function Cte(t,e){if(hh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pte=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},Ite=function(e){return e},Ote=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Nd=function(e,r){return Object.keys(r).reduce(function(n,a){return LO(LO({},n),{},TL({},a,e(a,r[a])))},{})},$O=function(e,r,n){return e.map(function(a){return"".concat(Ote(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Rte(t,e){return Lte(t)||Mte(t,e)||AL(t,e)||Dte()}function Dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Lte(t){if(Array.isArray(t))return t}function $te(t){return Ute(t)||Vte(t)||AL(t)||Fte()}function Fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AL(t,e){if(t){if(typeof t=="string")return O_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O_(t,e)}}function Vte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ute(t){if(Array.isArray(t))return O_(t)}function O_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zp=1e-4,CL=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},PL=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},FO=function(e,r){return function(n){var a=CL(e,r);return PL(a,n)}},Bte=function(e,r){return function(n){var a=CL(e,r),s=[].concat($te(a.map(function(o,c){return o*c}).slice(1)),[0]);return PL(s,n)}},VO=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],s=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,c=1;break;case"ease":a=.25,s=.1,o=.25,c=1;break;case"ease-in":a=.42,s=0,o=1,c=1;break;case"ease-out":a=.42,s=0,o=.58,c=1;break;case"ease-in-out":a=0,s=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),m=Rte(h,4);a=m[0],s=m[1],o=m[2],c=m[3]}}}var p=FO(a,o),y=FO(s,c),v=Bte(a,o),w=function(N){return N>1?1:N<0?0:N},k=function(N){for(var S=N>1?1:N,E=S,P=0;P<8;++P){var _=p(E)-S,O=v(E);if(Math.abs(_-S)<zp||O<zp)return y(E);E=w(E-_/O)}return y(E)};return k.isStepper=!1,k},qte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,s=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(m,p,y){var v=-(m-p)*n,w=y*s,k=y+(v-w)*c/1e3,b=y*c/1e3+m;return Math.abs(b-p)<zp&&Math.abs(k)<zp?[p,0]:[b,k]};return d.isStepper=!0,d.dt=c,d},zte=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VO(a);case"spring":return qte();default:if(a.split("(")[0]==="cubic-bezier")return VO(a)}return typeof a=="function"?a:null};function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function UO(t){return Gte(t)||Hte(t)||IL(t)||Wte()}function Wte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gte(t){if(Array.isArray(t))return D_(t)}function BO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(r),!0).forEach(function(n){R_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R_(t,e,r){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kte(t){var e=Qte(t,"string");return fh(e)==="symbol"?e:String(e)}function Qte(t,e){if(fh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yte(t,e){return Zte(t)||Jte(t,e)||IL(t,e)||Xte()}function Xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IL(t,e){if(t){if(typeof t=="string")return D_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D_(t,e)}}function D_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Zte(t){if(Array.isArray(t))return t}var Wp=function(e,r,n){return e+(r-e)*n},M_=function(e){var r=e.from,n=e.to;return r!==n},ere=function t(e,r,n){var a=Nd(function(s,o){if(M_(o)){var c=e(o.from,o.to,o.velocity),d=Yte(c,2),h=d[0],m=d[1];return Dr(Dr({},o),{},{from:h,velocity:m})}return o},r);return n<1?Nd(function(s,o){return M_(o)?Dr(Dr({},o),{},{velocity:Wp(o.velocity,a[s].velocity,n),from:Wp(o.from,a[s].from,n)}):o},r):t(e,a,n-1)};const tre=(function(t,e,r,n,a){var s=Pte(t,e),o=s.reduce(function(b,N){return Dr(Dr({},b),{},R_({},N,[t[N],e[N]]))},{}),c=s.reduce(function(b,N){return Dr(Dr({},b),{},R_({},N,{from:t[N],velocity:0,to:e[N]}))},{}),d=-1,h,m,p=function(){return null},y=function(){return Nd(function(N,S){return S.from},c)},v=function(){return!Object.values(c).filter(M_).length},w=function(N){h||(h=N);var S=N-h,E=S/r.dt;c=ere(r,c,E),a(Dr(Dr(Dr({},t),e),y())),h=N,v()||(d=requestAnimationFrame(p))},k=function(N){m||(m=N);var S=(N-m)/n,E=Nd(function(_,O){return Wp.apply(void 0,UO(O).concat([r(S)]))},o);if(a(Dr(Dr(Dr({},t),e),E)),S<1)d=requestAnimationFrame(p);else{var P=Nd(function(_,O){return Wp.apply(void 0,UO(O).concat([r(1)]))},o);a(Dr(Dr(Dr({},t),e),P))}};return p=r.isStepper?w:k,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}var rre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nre(t,e){if(t==null)return{};var r=are(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function are(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function zw(t){return lre(t)||ore(t)||sre(t)||ire()}function ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sre(t,e){if(t){if(typeof t=="string")return L_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L_(t,e)}}function ore(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lre(t){if(Array.isArray(t))return L_(t)}function L_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qO(Object(r),!0).forEach(function(n){fd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fd(t,e,r){return e=OL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ure(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OL(n.key),n)}}function dre(t,e,r){return e&&ure(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OL(t){var e=hre(t,"string");return Mc(e)==="symbol"?e:String(e)}function hre(t,e){if(Mc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$_(t,e)}function $_(t,e){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$_(t,e)}function mre(t){var e=pre();return function(){var n=Hp(t),a;if(e){var s=Hp(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return F_(this,a)}}function F_(t,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V_(t)}function V_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hp(t){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(t)}var Hi=(function(t){fre(r,t);var e=mre(r);function r(n,a){var s;cre(this,r),s=e.call(this,n,a);var o=s.props,c=o.isActive,d=o.attributeName,h=o.from,m=o.to,p=o.steps,y=o.children,v=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(V_(s)),s.changeStyle=s.changeStyle.bind(V_(s)),!c||v<=0)return s.state={style:{}},typeof y=="function"&&(s.state={style:m}),F_(s);if(p&&p.length)s.state={style:p[0].style};else if(h){if(typeof y=="function")return s.state={style:h},F_(s);s.state={style:d?fd({},d,h):h}}else s.state={style:{}};return s}return dre(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,c=s.canBegin,d=s.attributeName,h=s.shouldReAnimate,m=s.to,p=s.from,y=this.state.style;if(c){if(!o){var v={style:d?fd({},d,m):m};this.state&&y&&(d&&y[d]!==m||!d&&y!==m)&&this.setState(v);return}if(!(wte(a.to,m)&&a.canBegin&&a.isActive)){var w=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var k=w||h?p:a.to;if(this.state&&y){var b={style:d?fd({},d,k):k};(d&&y[d]!==k||!d&&y!==k)&&this.setState(b)}this.runAnimation(wa(wa({},this.props),{},{from:k,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,c=a.to,d=a.duration,h=a.easing,m=a.begin,p=a.onAnimationEnd,y=a.onAnimationStart,v=tre(o,c,zte(h),d,this.changeStyle),w=function(){s.stopJSAnimation=v()};this.manager.start([y,m,w,d,p])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],m=h.style,p=h.duration,y=p===void 0?0:p,v=function(k,b,N){if(N===0)return k;var S=b.duration,E=b.easing,P=E===void 0?"ease":E,_=b.style,O=b.properties,T=b.onAnimationEnd,R=N>0?o[N-1]:b,M=O||Object.keys(_);if(typeof P=="function"||P==="spring")return[].concat(zw(k),[s.runJSAnimation.bind(s,{from:R.style,to:_,duration:S,easing:P}),S]);var D=$O(M,S,P),A=wa(wa(wa({},R.style),_),{},{transition:D});return[].concat(zw(k),[A,S,T]).filter(Ite)};return this.manager.start([d].concat(zw(o.reduce(v,[m,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Tte());var s=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,m=a.onAnimationStart,p=a.onAnimationEnd,y=a.steps,v=a.children,w=this.manager;if(this.unSubscribe=w.subscribe(this.handleStyleChange),typeof h=="function"||typeof v=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var k=c?fd({},c,d):d,b=$O(Object.keys(k),o,h);w.start([m,s,wa(wa({},k),{},{transition:b}),o,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=nre(a,rre),h=V.Children.count(s),m=this.state.style;if(typeof s=="function")return s(m);if(!c||h===0||o<=0)return s;var p=function(v){var w=v.props,k=w.style,b=k===void 0?{}:k,N=w.className,S=V.cloneElement(v,wa(wa({},d),{},{style:wa(wa({},b),m),className:N}));return S};return h===1?p(V.Children.only(s)):Q.createElement("div",null,V.Children.map(s,function(y){return p(y)}))}}]),r})(V.PureComponent);Hi.displayName="Animate";Hi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Hi.propTypes={from:vt.oneOfType([vt.object,vt.string]),to:vt.oneOfType([vt.object,vt.string]),attributeName:vt.string,duration:vt.number,begin:vt.number,easing:vt.oneOfType([vt.string,vt.func]),steps:vt.arrayOf(vt.shape({duration:vt.number.isRequired,style:vt.object.isRequired,easing:vt.oneOfType([vt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vt.func]),properties:vt.arrayOf("string"),onAnimationEnd:vt.func})),children:vt.oneOfType([vt.node,vt.func]),isActive:vt.bool,canBegin:vt.bool,onAnimationEnd:vt.func,shouldReAnimate:vt.bool,onAnimationStart:vt.func,onAnimationReStart:vt.func};function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gp.apply(this,arguments)}function gre(t,e){return bre(t)||vre(t,e)||xre(t,e)||yre()}function yre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(t,e){if(t){if(typeof t=="string")return zO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zO(t,e)}}function zO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function bre(t){if(Array.isArray(t))return t}function WO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(r),!0).forEach(function(n){wre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wre(t,e,r){return e=kre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kre(t){var e=_re(t,"string");return mh(e)=="symbol"?e:e+""}function _re(t,e){if(mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GO=function(e,r,n,a,s){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,m;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],y=0,v=4;y<v;y++)p[y]=s[y]>o?o:s[y];m="M".concat(e,",").concat(r+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(h,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*p[1])),m+="L ".concat(e+n,",").concat(r+a-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(h,`,
        `).concat(e+n-d*p[2],",").concat(r+a)),m+="L ".concat(e+d*p[3],",").concat(r+a),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*p[3])),m+="Z"}else if(o>0&&s===+s&&s>0){var w=Math.min(o,s);m="M ".concat(e,",").concat(r+c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+d*w,",").concat(r,`
            L `).concat(e+n-d*w,",").concat(r,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*w,`
            L `).concat(e+n,",").concat(r+a-c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n-d*w,",").concat(r+a,`
            L `).concat(e+d*w,",").concat(r+a,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*w," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return m},jre=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,s=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(s,s+c),m=Math.max(s,s+c),p=Math.min(o,o+d),y=Math.max(o,o+d);return n>=h&&n<=m&&a>=p&&a<=y}return!1},Nre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pN=function(e){var r=HO(HO({},Nre),e),n=V.useRef(),a=V.useState(-1),s=gre(a,2),o=s[0],c=s[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&c(P)}catch{}},[]);var d=r.x,h=r.y,m=r.width,p=r.height,y=r.radius,v=r.className,w=r.animationEasing,k=r.animationDuration,b=r.animationBegin,N=r.isAnimationActive,S=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||m===0||p===0)return null;var E=at("recharts-rectangle",v);return S?Q.createElement(Hi,{canBegin:o>0,from:{width:m,height:p,x:d,y:h},to:{width:m,height:p,x:d,y:h},duration:k,animationEasing:w,isActive:S},function(P){var _=P.width,O=P.height,T=P.x,R=P.y;return Q.createElement(Hi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:k,isActive:N,easing:w},Q.createElement("path",Gp({},He(r,!0),{className:E,d:GO(T,R,_,O,y),ref:n})))}):Q.createElement("path",Gp({},He(r,!0),{className:E,d:GO(d,h,m,p,y)}))},Sre=["points","className","baseLinePoints","connectNulls"];function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ic.apply(this,arguments)}function Ere(t,e){if(t==null)return{};var r=Tre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Tre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function KO(t){return Ire(t)||Pre(t)||Cre(t)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cre(t,e){if(t){if(typeof t=="string")return U_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(t,e)}}function Pre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ire(t){if(Array.isArray(t))return U_(t)}function U_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var QO=function(e){return e&&e.x===+e.x&&e.y===+e.y},Ore=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){QO(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),QO(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Sd=function(e,r){var n=Ore(e);r&&(n=[n.reduce(function(s,o){return[].concat(KO(s),KO(o))},[])]);var a=n.map(function(s){return s.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Rre=function(e,r,n){var a=Sd(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Sd(r.reverse(),n).slice(1))},Dre=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,s=e.connectNulls,o=Ere(e,Sre);if(!r||!r.length)return null;var c=at("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=Rre(r,a,s);return Q.createElement("g",{className:c},Q.createElement("path",ic({},He(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?Q.createElement("path",ic({},He(o,!0),{fill:"none",d:Sd(r,s)})):null,d?Q.createElement("path",ic({},He(o,!0),{fill:"none",d:Sd(a,s)})):null)}var m=Sd(r,s);return Q.createElement("path",ic({},He(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:c,d:m}))};function B_(){return B_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B_.apply(this,arguments)}var gN=function(e){var r=e.cx,n=e.cy,a=e.r,s=e.className,o=at("recharts-dot",s);return r===+r&&n===+n&&a===+a?V.createElement("circle",B_({},He(e,!1),yp(e),{className:o,cx:r,cy:n,r:a})):null};function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}var Mre=["x","y","top","left","width","height","className"];function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q_.apply(this,arguments)}function YO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lre(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(r),!0).forEach(function(n){$re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $re(t,e,r){return e=Fre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fre(t){var e=Vre(t,"string");return ph(e)=="symbol"?e:e+""}function Vre(t,e){if(ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ure(t,e){if(t==null)return{};var r=Bre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qre=function(e,r,n,a,s,o){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},zre=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,m=e.width,p=m===void 0?0:m,y=e.height,v=y===void 0?0:y,w=e.className,k=Ure(e,Mre),b=Lre({x:n,y:s,top:c,left:h,width:p,height:v},k);return!Ee(n)||!Ee(s)||!Ee(p)||!Ee(v)||!Ee(c)||!Ee(h)?null:Q.createElement("path",q_({},He(b,!0),{className:at("recharts-cross",w),d:qre(n,s,p,v,c,h)}))},Ww,XO;function Wre(){if(XO)return Ww;XO=1;var t=rg(),e=Q3(),r=ui();function n(a,s){return a&&a.length?t(a,r(s,2),e):void 0}return Ww=n,Ww}var Hre=Wre();const Gre=bt(Hre);var Hw,JO;function Kre(){if(JO)return Hw;JO=1;var t=rg(),e=ui(),r=Y3();function n(a,s){return a&&a.length?t(a,e(s,2),r):void 0}return Hw=n,Hw}var Qre=Kre();const Yre=bt(Qre);var Xre=["cx","cy","angle","ticks","axisLine"],Jre=["ticks","tick","angle","tickFormatter","stroke"];function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ed.apply(this,arguments)}function ZO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ko(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(r),!0).forEach(function(n){cg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eR(t,e){if(t==null)return{};var r=Zre(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ene(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DL(n.key),n)}}function tne(t,e,r){return e&&tR(t.prototype,e),r&&tR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rne(t,e,r){return e=Kp(e),nne(t,RL()?Reflect.construct(e,r||[],Kp(t).constructor):e.apply(t,r))}function nne(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ane(t)}function ane(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RL=function(){return!!t})()}function Kp(t){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kp(t)}function ine(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z_(t,e)}function z_(t,e){return z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},z_(t,e)}function cg(t,e,r){return e=DL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DL(t){var e=sne(t,"string");return Lc(e)=="symbol"?e:e+""}function sne(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ug=(function(t){function e(){return ene(this,e),rne(this,e,arguments)}return ine(e,t),tne(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,o=s.angle,c=s.cx,d=s.cy;return Rt(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,c=n.ticks,d=Gre(c,function(m){return m.coordinate||0}),h=Yre(c,function(m){return m.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=eR(n,Xre),m=c.reduce(function(w,k){return[Math.min(w[0],k.coordinate),Math.max(w[1],k.coordinate)]},[1/0,-1/0]),p=Rt(a,s,m[0],o),y=Rt(a,s,m[1],o),v=ko(ko(ko({},He(h,!1)),{},{fill:"none"},He(d,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return Q.createElement("line",Ed({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,m=eR(a,Jre),p=this.getTickTextAnchor(),y=He(m,!1),v=He(o,!1),w=s.map(function(k,b){var N=n.getTickValueCoord(k),S=ko(ko(ko(ko({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(N.x,", ").concat(N.y,")")},y),{},{stroke:"none",fill:h},v),{},{index:b},N),{},{payload:k});return Q.createElement(kt,Ed({className:at("recharts-polar-radius-axis-tick",jL(o)),key:"tick-".concat(k.coordinate)},Ko(n.props,k,b)),e.renderTickItem(o,S,d?d(k.value,b):k.value))});return Q.createElement(kt,{className:"recharts-polar-radius-axis-ticks"},w)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,o=n.tick;return!a||!a.length?null:Q.createElement(kt,{className:at("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Er.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return Q.isValidElement(n)?o=Q.cloneElement(n,a):Ke(n)?o=n(a):o=Q.createElement(Qo,Ed({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])})(V.PureComponent);cg(ug,"displayName","PolarRadiusAxis");cg(ug,"axisType","radiusAxis");cg(ug,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Eo(){return Eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eo.apply(this,arguments)}function rR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(r),!0).forEach(function(n){dg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function one(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LL(n.key),n)}}function lne(t,e,r){return e&&nR(t.prototype,e),r&&nR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cne(t,e,r){return e=Qp(e),une(t,ML()?Reflect.construct(e,r||[],Qp(t).constructor):e.apply(t,r))}function une(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dne(t)}function dne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ML(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!t})()}function Qp(t){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(t)}function hne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W_(t,e)}function W_(t,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},W_(t,e)}function dg(t,e,r){return e=LL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LL(t){var e=fne(t,"string");return $c(e)=="symbol"?e:e+""}function fne(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mne=Math.PI/180,aR=1e-5,hg=(function(t){function e(){return one(this,e),cne(this,e,arguments)}return hne(e,t),lne(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,m=h||8,p=Rt(s,o,c,n.coordinate),y=Rt(s,o,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*mne),o;return s>aR?o=a==="outer"?"start":"end":s<-aR?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=_o(_o({},He(this.props,!1)),{},{fill:"none"},He(c,!1));if(d==="circle")return Q.createElement(gN,Eo({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:s,r:o}));var m=this.props.ticks,p=m.map(function(y){return Rt(a,s,o,y.coordinate)});return Q.createElement(Dre,Eo({className:"recharts-polar-angle-axis-line"},h,{points:p}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,m=He(this.props,!1),p=He(o,!1),y=_o(_o({},m),{},{fill:"none"},He(c,!1)),v=s.map(function(w,k){var b=n.getTickLineCoord(w),N=n.getTickTextAnchor(w),S=_o(_o(_o({textAnchor:N},m),{},{stroke:"none",fill:h},p),{},{index:k,payload:w,x:b.x2,y:b.y2});return Q.createElement(kt,Eo({className:at("recharts-polar-angle-axis-tick",jL(o)),key:"tick-".concat(w.coordinate)},Ko(n.props,w,k)),c&&Q.createElement("line",Eo({className:"recharts-polar-angle-axis-tick-line"},y,b)),o&&e.renderTickItem(o,S,d?d(w.value,k):w.value))});return Q.createElement(kt,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!a||!a.length?null:Q.createElement(kt,{className:at("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var o;return Q.isValidElement(n)?o=Q.cloneElement(n,a):Ke(n)?o=n(a):o=Q.createElement(Qo,Eo({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])})(V.PureComponent);dg(hg,"displayName","PolarAngleAxis");dg(hg,"axisType","angleAxis");dg(hg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Gw,iR;function pne(){if(iR)return Gw;iR=1;var t=G6(),e=t(Object.getPrototypeOf,Object);return Gw=e,Gw}var Kw,sR;function gne(){if(sR)return Kw;sR=1;var t=Gi(),e=pne(),r=Ki(),n="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,c=s.hasOwnProperty,d=o.call(Object);function h(m){if(!r(m)||t(m)!=n)return!1;var p=e(m);if(p===null)return!0;var y=c.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==d}return Kw=h,Kw}var yne=gne();const xne=bt(yne);var Qw,oR;function vne(){if(oR)return Qw;oR=1;var t=Gi(),e=Ki(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return Qw=n,Qw}var bne=vne();const wne=bt(bne);function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yp.apply(this,arguments)}function kne(t,e){return Sne(t)||Nne(t,e)||jne(t,e)||_ne()}function _ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jne(t,e){if(t){if(typeof t=="string")return lR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lR(t,e)}}function lR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sne(t){if(Array.isArray(t))return t}function cR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cR(Object(r),!0).forEach(function(n){Ene(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ene(t,e,r){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tne(t){var e=Ane(t,"string");return gh(e)=="symbol"?e:e+""}function Ane(t,e){if(gh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dR=function(e,r,n,a,s){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+s),c+="L ".concat(e+n-o/2-a,",").concat(r+s),c+="L ".concat(e,",").concat(r," Z"),c},Cne={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pne=function(e){var r=uR(uR({},Cne),e),n=V.useRef(),a=V.useState(-1),s=kne(a,2),o=s[0],c=s[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&c(E)}catch{}},[]);var d=r.x,h=r.y,m=r.upperWidth,p=r.lowerWidth,y=r.height,v=r.className,w=r.animationEasing,k=r.animationDuration,b=r.animationBegin,N=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||y!==+y||m===0&&p===0||y===0)return null;var S=at("recharts-trapezoid",v);return N?Q.createElement(Hi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:m,lowerWidth:p,height:y,x:d,y:h},duration:k,animationEasing:w,isActive:N},function(E){var P=E.upperWidth,_=E.lowerWidth,O=E.height,T=E.x,R=E.y;return Q.createElement(Hi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:k,easing:w},Q.createElement("path",Yp({},He(r,!0),{className:S,d:dR(T,R,P,_,O),ref:n})))}):Q.createElement("g",null,Q.createElement("path",Yp({},He(r,!0),{className:S,d:dR(d,h,m,p,y)})))},Ine=["option","shapeType","propTransformer","activeClassName","isActive"];function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function One(t,e){if(t==null)return{};var r=Rne(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(r),!0).forEach(function(n){Dne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dne(t,e,r){return e=Mne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mne(t){var e=Lne(t,"string");return yh(e)=="symbol"?e:e+""}function Lne(t,e){if(yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ne(t,e){return Xp(Xp({},e),t)}function Fne(t,e){return t==="symbols"}function fR(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return Q.createElement(pN,r);case"trapezoid":return Q.createElement(Pne,r);case"sector":return Q.createElement(mN,r);case"symbols":if(Fne(e))return Q.createElement(O1,r);break;default:return null}}function Vne(t){return V.isValidElement(t)?t.props:t}function $L(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?$ne:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,c=t.isActive,d=One(t,Ine),h;if(V.isValidElement(e))h=V.cloneElement(e,Xp(Xp({},d),Vne(e)));else if(Ke(e))h=e(d);else if(xne(e)&&!wne(e)){var m=a(e,d);h=Q.createElement(fR,{shapeType:r,elementProps:m})}else{var p=d;h=Q.createElement(fR,{shapeType:r,elementProps:p})}return c?Q.createElement(kt,{className:o},h):h}function fg(t,e){return e!=null&&"trapezoids"in t.props}function mg(t,e){return e!=null&&"sectors"in t.props}function xh(t,e){return e!=null&&"points"in t.props}function Une(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&s}function Bne(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function qne(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function zne(t,e){var r;return fg(t,e)?r=Une:mg(t,e)?r=Bne:xh(t,e)&&(r=qne),r}function Wne(t,e){var r;return fg(t,e)?r="trapezoids":mg(t,e)?r="sectors":xh(t,e)&&(r="points"),r}function Hne(t,e){if(fg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(mg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return xh(t,e)?e.payload:{}}function Gne(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=Wne(r,e),s=Hne(r,e),o=n.filter(function(d,h){var m=ig(s,d),p=r.props[a].filter(function(w){var k=zne(r,e);return k(w,e)}),y=r.props[a].indexOf(p[p.length-1]),v=h===y;return m&&v}),c=n.indexOf(o[o.length-1]);return c}var Ym;function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sc.apply(this,arguments)}function mR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mR(Object(r),!0).forEach(function(n){Jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VL(n.key),n)}}function Qne(t,e,r){return e&&pR(t.prototype,e),r&&pR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yne(t,e,r){return e=Jp(e),Xne(t,FL()?Reflect.construct(e,r||[],Jp(t).constructor):e.apply(t,r))}function Xne(t,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jne(t)}function Jne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FL=function(){return!!t})()}function Jp(t){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jp(t)}function Zne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H_(t,e)}function H_(t,e){return H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H_(t,e)}function Jn(t,e,r){return e=VL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VL(t){var e=eae(t,"string");return Fc(e)=="symbol"?e:e+""}function eae(t,e){if(Fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yi=(function(t){function e(r){var n;return Kne(this,e),n=Yne(this,e,[r]),Jn(n,"pieRef",null),Jn(n,"sectorRefs",[]),Jn(n,"id",Hh("recharts-pie-")),Jn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ke(a)&&a()}),Jn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ke(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Zne(e,t),Qne(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,d=s.dataKey,h=s.valueKey,m=He(this.props,!1),p=He(o,!1),y=He(c,!1),v=o&&o.offsetRadius||20,w=n.map(function(k,b){var N=(k.startAngle+k.endAngle)/2,S=Rt(k.cx,k.cy,k.outerRadius+v,N),E=It(It(It(It({},m),k),{},{stroke:"none"},p),{},{index:b,textAnchor:e.getTextAnchor(S.x,k.cx)},S),P=It(It(It(It({},m),k),{},{fill:"none",stroke:k.fill},y),{},{index:b,points:[Rt(k.cx,k.cy,k.outerRadius,N),S]}),_=d;return st(d)&&st(h)?_="value":st(d)&&(_=h),Q.createElement(kt,{key:"label-".concat(k.startAngle,"-").concat(k.endAngle,"-").concat(k.midAngle,"-").concat(b)},c&&e.renderLabelLineItem(c,P,"line"),e.renderLabelItem(o,E,Yr(k,_)))});return Q.createElement(kt,{className:"recharts-pie-labels"},w)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,o=s.activeShape,c=s.blendStroke,d=s.inactiveShape;return n.map(function(h,m){if(h?.startAngle===0&&h?.endAngle===0&&n.length!==1)return null;var p=a.isActiveIndex(m),y=d&&a.hasActiveIndex()?d:null,v=p?o:y,w=It(It({},h),{},{stroke:c?h.fill:h.stroke,tabIndex:-1});return Q.createElement(kt,sc({ref:function(b){b&&!a.sectorRefs.includes(b)&&a.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Ko(a.props,h,m),{key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(m)}),Q.createElement($L,sc({option:v,isActive:p,shapeType:"sector"},w)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,p=this.state,y=p.prevSectors,v=p.prevIsAnimationActive;return Q.createElement(Hi,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(v),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(w){var k=w.t,b=[],N=s&&s[0],S=N.startAngle;return s.forEach(function(E,P){var _=y&&y[P],O=P>0?Ln(E,"paddingAngle",0):0;if(_){var T=ws(_.endAngle-_.startAngle,E.endAngle-E.startAngle),R=It(It({},E),{},{startAngle:S+O,endAngle:S+T(k)+O});b.push(R),S=R.endAngle}else{var M=E.endAngle,D=E.startAngle,A=ws(0,M-D),F=A(k),L=It(It({},E),{},{startAngle:S+O,endAngle:S+F+O});b.push(L),S=L.endAngle}}),Q.createElement(kt,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[c].focus(),a.setState({sectorToFocus:c});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!ig(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,o=a.sectors,c=a.className,d=a.label,h=a.cx,m=a.cy,p=a.innerRadius,y=a.outerRadius,v=a.isAnimationActive,w=this.state.isAnimationFinished;if(s||!o||!o.length||!Ee(h)||!Ee(m)||!Ee(p)||!Ee(y))return null;var k=at("recharts-pie",c);return Q.createElement(kt,{tabIndex:this.props.rootTabIndex,className:k,ref:function(N){n.pieRef=N}},this.renderSectors(),d&&this.renderLabels(o),Er.renderCallByParent(this.props,null,!1),(!v||w)&&Ms.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if(Q.isValidElement(n))return Q.cloneElement(n,a);if(Ke(n))return n(a);var o=at("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return Q.createElement(P_,sc({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,s){if(Q.isValidElement(n))return Q.cloneElement(n,a);var o=s;if(Ke(n)&&(o=n(a),Q.isValidElement(o)))return o;var c=at("recharts-pie-label-text",typeof n!="boolean"&&!Ke(n)?n.className:"");return Q.createElement(Qo,sc({},a,{alignmentBaseline:"middle",className:c}),o)}}])})(V.PureComponent);Ym=Yi;Jn(Yi,"displayName","Pie");Jn(Yi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!au.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Jn(Yi,"parseDeltaAngle",function(t,e){var r=on(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Jn(Yi,"getRealPieData",function(t){var e=t.data,r=t.children,n=He(t,!1),a=ra(r,Q0);return e&&e.length?e.map(function(s,o){return It(It(It({payload:s},n),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return It(It({},n),s.props)}):[]});Jn(Yi,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,s=e.height,o=_L(a,s),c=n+ln(t.cx,a,a/2),d=r+ln(t.cy,s,s/2),h=ln(t.innerRadius,o,0),m=ln(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:d,innerRadius:h,outerRadius:m,maxRadius:p}});Jn(Yi,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?It(It({},e.type.defaultProps),e.props):e.props,a=Ym.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,o=n.startAngle,c=n.endAngle,d=n.paddingAngle,h=n.dataKey,m=n.nameKey,p=n.valueKey,y=n.tooltipType,v=Math.abs(n.minAngle),w=Ym.parseCoordinateOfPie(n,r),k=Ym.parseDeltaAngle(o,c),b=Math.abs(k),N=h;st(h)&&st(p)?(Aa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):st(h)&&(Aa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=p);var S=a.filter(function(R){return Yr(R,N,0)!==0}).length,E=(b>=360?S:S-1)*d,P=b-S*v-E,_=a.reduce(function(R,M){var D=Yr(M,N,0);return R+(Ee(D)?D:0)},0),O;if(_>0){var T;O=a.map(function(R,M){var D=Yr(R,N,0),A=Yr(R,m,M),F=(Ee(D)?D:0)/_,L;M?L=T.endAngle+on(k)*d*(D!==0?1:0):L=o;var Z=L+on(k)*((D!==0?v:0)+F*P),ae=(L+Z)/2,W=(w.innerRadius+w.outerRadius)/2,G=[{name:A,value:D,payload:R,dataKey:N,type:y}],Y=Rt(w.cx,w.cy,W,ae);return T=It(It(It({percent:F,cornerRadius:s,name:A,tooltipPayload:G,midAngle:ae,middleRadius:W,tooltipPosition:Y},R),w),{},{value:Yr(R,N),startAngle:L,endAngle:Z,payload:R,paddingAngle:on(k)*d}),T})}return It(It({},w),{},{sectors:O,data:a})});var Yw,gR;function tae(){if(gR)return Yw;gR=1;var t=Math.ceil,e=Math.max;function r(n,a,s,o){for(var c=-1,d=e(t((a-n)/(s||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=s;return h}return Yw=r,Yw}var Xw,yR;function UL(){if(yR)return Xw;yR=1;var t=c3(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var s=a<0?-1:1;return s*r}return a===a?a:0}return Xw=n,Xw}var Jw,xR;function rae(){if(xR)return Jw;xR=1;var t=tae(),e=K0(),r=UL();function n(a){return function(s,o,c){return c&&typeof c!="number"&&e(s,o,c)&&(o=c=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),c=c===void 0?s<o?1:-1:r(c),t(s,o,c,a)}}return Jw=n,Jw}var Zw,vR;function nae(){if(vR)return Zw;vR=1;var t=rae(),e=t();return Zw=e,Zw}var aae=nae();const Zp=bt(aae);function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function bR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bR(Object(r),!0).forEach(function(n){BL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BL(t,e,r){return e=iae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iae(t){var e=sae(t,"string");return vh(e)=="symbol"?e:e+""}function sae(t,e){if(vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oae=["Webkit","Moz","O","ms"],lae=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=oae.reduce(function(s,o){return wR(wR({},s),{},BL({},o+n,r))},{});return a[e]=r,a};function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e0.apply(this,arguments)}function kR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ek(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(r),!0).forEach(function(n){Pn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zL(n.key),n)}}function uae(t,e,r){return e&&_R(t.prototype,e),r&&_R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dae(t,e,r){return e=t0(e),hae(t,qL()?Reflect.construct(e,r||[],t0(t).constructor):e.apply(t,r))}function hae(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fae(t)}function fae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qL=function(){return!!t})()}function t0(t){return t0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t0(t)}function mae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G_(t,e)}function G_(t,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G_(t,e)}function Pn(t,e,r){return e=zL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zL(t){var e=pae(t,"string");return Vc(e)=="symbol"?e:e+""}function pae(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gae=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,s=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=_d().domain(Zp(0,d)).range([s,s+o-c]),m=h.domain().map(function(p){return h(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:m}},jR=function(e){return e.changedTouches&&!!e.changedTouches.length},Uc=(function(t){function e(r){var n;return cae(this,e),n=dae(this,e,[r]),Pn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Pn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Pn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,s=a.endIndex,o=a.onDragEnd,c=a.startIndex;o?.({endIndex:s,startIndex:c})}),n.detachDragEndListener()}),Pn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Pn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Pn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Pn(n,"handleSlideDragStart",function(a){var s=jR(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return mae(e,t),uae(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,m=h.length-1,p=Math.min(a,s),y=Math.max(a,s),v=e.getIndexInRange(o,p),w=e.getIndexInRange(o,y);return{startIndex:v-v%d,endIndex:w===m?m:w-w%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,o=a.tickFormatter,c=a.dataKey,d=Yr(s[n],c,n);return Ke(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,m=d.width,p=d.travellerWidth,y=d.startIndex,v=d.endIndex,w=d.onChange,k=n.pageX-s;k>0?k=Math.min(k,h+m-p-c,h+m-p-o):k<0&&(k=Math.max(k,h-o,h-c));var b=this.getIndex({startX:o+k,endX:c+k});(b.startIndex!==y||b.endIndex!==v)&&w&&w(b),this.setState({startX:o+k,endX:c+k,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=jR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],m=this.props,p=m.x,y=m.width,v=m.travellerWidth,w=m.onChange,k=m.gap,b=m.data,N={startX:this.state.startX,endX:this.state.endX},S=n.pageX-s;S>0?S=Math.min(S,p+y-v-h):S<0&&(S=Math.max(S,p-h)),N[o]=h+S;var E=this.getIndex(N),P=E.startIndex,_=E.endIndex,O=function(){var R=b.length-1;return o==="startX"&&(c>d?P%k===0:_%k===0)||c<d&&_===R||o==="endX"&&(c>d?_%k===0:P%k===0)||c>d&&_===R};this.setState(Pn(Pn({},o,h+S),"brushMoveStartX",n.pageX),function(){w&&O()&&w(E)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,m=this.state[a],p=c.indexOf(m);if(p!==-1){var y=p+n;if(!(y===-1||y>=c.length)){var v=c[y];a==="startX"&&v>=h||a==="endX"&&v<=d||this.setState(Pn({},a,v),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return Q.createElement("rect",{stroke:h,fill:d,x:a,y:s,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.data,h=n.children,m=n.padding,p=V.Children.only(h);return p?Q.cloneElement(p,{x:a,y:s,width:o,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,o,c=this,d=this.props,h=d.y,m=d.travellerWidth,p=d.height,y=d.traveller,v=d.ariaLabel,w=d.data,k=d.startIndex,b=d.endIndex,N=Math.max(n,this.props.x),S=ek(ek({},He(this.props,!1)),{},{x:N,y:h,width:m,height:p}),E=v||"Min value: ".concat((s=w[k])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=w[b])===null||o===void 0?void 0:o.name);return Q.createElement(kt,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),c.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,S))}},{key:"renderSlide",value:function(n,a){var s=this.props,o=s.y,c=s.height,d=s.stroke,h=s.travellerWidth,m=Math.min(n,a)+h,p=Math.max(Math.abs(a-n)-h,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:o,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,m=this.state,p=m.startX,y=m.endX,v=5,w={pointerEvents:"none",fill:h};return Q.createElement(kt,{className:"recharts-brush-texts"},Q.createElement(Qo,e0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-v,y:o+c/2},w),this.getTextOfTick(a)),Q.createElement(Qo,e0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+d+v,y:o+c/2},w),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,o=n.children,c=n.x,d=n.y,h=n.width,m=n.height,p=n.alwaysShowText,y=this.state,v=y.startX,w=y.endX,k=y.isTextActive,b=y.isSlideMoving,N=y.isTravellerMoving,S=y.isTravellerFocused;if(!a||!a.length||!Ee(c)||!Ee(d)||!Ee(h)||!Ee(m)||h<=0||m<=0)return null;var E=at("recharts-brush",s),P=Q.Children.count(o)===1,_=lae("userSelect","none");return Q.createElement(kt,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(v,w),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(w,"endX"),(k||b||N||S||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(s+c/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:a,y:s,width:o,height:c,fill:d,stroke:"none"}),Q.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return Q.isValidElement(n)?s=Q.cloneElement(n,a):Ke(n)?s=n(a):s=e.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,m=n.startIndex,p=n.endIndex;if(s!==a.prevData||h!==a.prevUpdateId)return ek({prevData:s,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},s&&s.length?gae({data:s,width:o,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var y=a.scale.domain().map(function(v){return a.scale(v)});return{prevData:s,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,o=0,c=s-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(V.PureComponent);Pn(Uc,"displayName","Brush");Pn(Uc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tk,NR;function yae(){if(NR)return tk;NR=1;var t=V1();function e(r,n){var a;return t(r,function(s,o,c){return a=n(s,o,c),!a}),!!a}return tk=e,tk}var rk,SR;function xae(){if(SR)return rk;SR=1;var t=V6(),e=ui(),r=yae(),n=_n(),a=K0();function s(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return rk=s,rk}var vae=xae();const bae=bt(vae);var ri=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},nk,ER;function wae(){if(ER)return nk;ER=1;var t=a3();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return nk=e,nk}var ak,TR;function kae(){if(TR)return ak;TR=1;var t=wae(),e=r3(),r=ui();function n(a,s){var o={};return s=r(s,3),e(a,function(c,d,h){t(o,d,s(c,d,h))}),o}return ak=n,ak}var _ae=kae();const jae=bt(_ae);var ik,AR;function Nae(){if(AR)return ik;AR=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return ik=t,ik}var sk,CR;function Sae(){if(CR)return sk;CR=1;var t=V1();function e(r,n){var a=!0;return t(r,function(s,o,c){return a=!!n(s,o,c),a}),a}return sk=e,sk}var ok,PR;function Eae(){if(PR)return ok;PR=1;var t=Nae(),e=Sae(),r=ui(),n=_n(),a=K0();function s(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return ok=s,ok}var Tae=Eae();const WL=bt(Tae);var Aae=["x","y"];function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},K_.apply(this,arguments)}function IR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(r),!0).forEach(function(n){Cae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cae(t,e,r){return e=Pae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pae(t){var e=Iae(t,"string");return bh(e)=="symbol"?e:e+""}function Iae(t,e){if(bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oae(t,e){if(t==null)return{};var r=Rae(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Dae(t,e){var r=t.x,n=t.y,a=Oae(t,Aae),s="".concat(r),o=parseInt(s,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),m=parseInt(h,10),p="".concat(e.width||a.width),y=parseInt(p,10);return ad(ad(ad(ad(ad({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function OR(t){return Q.createElement($L,K_({shapeType:"rectangle",propTransformer:Dae,activeClassName:"recharts-active-bar"},t))}var Mae=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var s=Ee(n)||oW(n);return s?e(n,a):(s||Xo(),r)}},Lae=["value","background"],HL;function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function $ae(t,e){if(t==null)return{};var r=Fae(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r0.apply(this,arguments)}function RR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(r),!0).forEach(function(n){Cs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KL(n.key),n)}}function Uae(t,e,r){return e&&DR(t.prototype,e),r&&DR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bae(t,e,r){return e=n0(e),qae(t,GL()?Reflect.construct(e,r||[],n0(t).constructor):e.apply(t,r))}function qae(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zae(t)}function zae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GL=function(){return!!t})()}function n0(t){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n0(t)}function Wae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q_(t,e)}function Q_(t,e){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Q_(t,e)}function Cs(t,e,r){return e=KL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KL(t){var e=Hae(t,"string");return Bc(e)=="symbol"?e:e+""}function Hae(t,e){if(Bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Us=(function(t){function e(){var r;Vae(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Bae(this,e,[].concat(a)),Cs(r,"state",{isAnimationFinished:!1}),Cs(r,"id",Hh("recharts-bar-")),Cs(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Cs(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Wae(e,t),Uae(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,o=s.shape,c=s.dataKey,d=s.activeIndex,h=s.activeBar,m=He(this.props,!1);return n&&n.map(function(p,y){var v=y===d,w=v?h:o,k=lr(lr(lr({},m),p),{},{isActive:v,option:w,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Q.createElement(kt,r0({className:"recharts-bar-rectangle"},Ko(a.props,p,y),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(y)}),Q.createElement(OR,k))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,m=a.animationEasing,p=a.animationId,y=this.state.prevData;return Q.createElement(Hi,{begin:d,duration:h,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var w=v.t,k=s.map(function(b,N){var S=y&&y[N];if(S){var E=ws(S.x,b.x),P=ws(S.y,b.y),_=ws(S.width,b.width),O=ws(S.height,b.height);return lr(lr({},b),{},{x:E(w),y:P(w),width:_(w),height:O(w)})}if(o==="horizontal"){var T=ws(0,b.height),R=T(w);return lr(lr({},b),{},{y:b.y+b.height-R,height:R})}var M=ws(0,b.width),D=M(w);return lr(lr({},b),{},{width:D})});return Q.createElement(kt,null,n.renderRectanglesStatically(k))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!ig(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,o=a.dataKey,c=a.activeIndex,d=He(this.props.background,!1);return s.map(function(h,m){h.value;var p=h.background,y=$ae(h,Lae);if(!p)return null;var v=lr(lr(lr(lr(lr({},y),{},{fill:"#eee"},p),d),Ko(n.props,h,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return Q.createElement(OR,r0({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},v))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,c=s.xAxis,d=s.yAxis,h=s.layout,m=s.children,p=ra(m,lg);if(!p)return null;var y=h==="vertical"?o[0].height/2:o[0].width/2,v=function(b,N){var S=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:S,errorVal:Yr(b,N)}},w={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(kt,w,p.map(function(k){return Q.cloneElement(k,{key:"error-bar-".concat(a,"-").concat(k.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:v})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,m=n.top,p=n.width,y=n.height,v=n.isAnimationActive,w=n.background,k=n.id;if(a||!s||!s.length)return null;var b=this.state.isAnimationFinished,N=at("recharts-bar",o),S=c&&c.allowDataOverflow,E=d&&d.allowDataOverflow,P=S||E,_=st(k)?this.id:k;return Q.createElement(kt,{className:N},S||E?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(_)},Q.createElement("rect",{x:S?h:h-p/2,y:E?m:m-y/2,width:S?p:p*2,height:E?y:y*2}))):null,Q.createElement(kt,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(_,")"):null},w?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,_),(!v||b)&&Ms.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(V.PureComponent);HL=Us;Cs(Us,"displayName","Bar");Cs(Us,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!au.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cs(Us,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,s=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,m=t.dataStartIndex,p=t.displayedData,y=t.offset,v=wZ(n,r);if(!v)return null;var w=e.layout,k=r.type.defaultProps,b=k!==void 0?lr(lr({},k),r.props):r.props,N=b.dataKey,S=b.children,E=b.minPointSize,P=w==="horizontal"?o:s,_=h?P.scale.domain():null,O=TZ({numericAxis:P}),T=ra(S,Q0),R=p.map(function(M,D){var A,F,L,Z,ae,W;h?A=kZ(h[m+D],_):(A=Yr(M,N),Array.isArray(A)||(A=[O,A]));var G=Mae(E,HL.defaultProps.minPointSize)(A[1],D);if(w==="horizontal"){var Y,te=[o.scale(A[0]),o.scale(A[1])],ne=te[0],z=te[1];F=sO({axis:s,ticks:c,bandSize:a,offset:v.offset,entry:M,index:D}),L=(Y=z??ne)!==null&&Y!==void 0?Y:void 0,Z=v.size;var ee=ne-z;if(ae=Number.isNaN(ee)?0:ee,W={x:F,y:o.y,width:Z,height:o.height},Math.abs(G)>0&&Math.abs(ae)<Math.abs(G)){var J=on(ae||G)*(Math.abs(G)-Math.abs(ae));L-=J,ae+=J}}else{var le=[s.scale(A[0]),s.scale(A[1])],fe=le[0],be=le[1];if(F=fe,L=sO({axis:o,ticks:d,bandSize:a,offset:v.offset,entry:M,index:D}),Z=be-fe,ae=v.size,W={x:s.x,y:L,width:s.width,height:ae},Math.abs(G)>0&&Math.abs(Z)<Math.abs(G)){var me=on(Z||G)*(Math.abs(G)-Math.abs(Z));Z+=me}}return lr(lr(lr({},M),{},{x:F,y:L,width:Z,height:ae,value:h?A:A[1],payload:M,background:W},T&&T[D]&&T[D].props),{},{tooltipPayload:[wL(r,M)],tooltipPosition:{x:F+Z/2,y:L+ae/2}})});return lr({data:R,layout:w},y)});function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Gae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QL(n.key),n)}}function Kae(t,e,r){return e&&MR(t.prototype,e),r&&MR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function LR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ja(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(r),!0).forEach(function(n){pg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pg(t,e,r){return e=QL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QL(t){var e=Qae(t,"string");return wh(e)=="symbol"?e:e+""}function Qae(t,e){if(wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yae=function(e,r,n,a,s){var o=e.width,c=e.height,d=e.layout,h=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!In(h,Us);return m.reduce(function(v,w){var k=r[w],b=k.orientation,N=k.domain,S=k.padding,E=S===void 0?{}:S,P=k.mirror,_=k.reversed,O="".concat(b).concat(P?"Mirror":""),T,R,M,D,A;if(k.type==="number"&&(k.padding==="gap"||k.padding==="no-gap")){var F=N[1]-N[0],L=1/0,Z=k.categoricalDomain.sort(uW);if(Z.forEach(function(le,fe){fe>0&&(L=Math.min((le||0)-(Z[fe-1]||0),L))}),Number.isFinite(L)){var ae=L/F,W=k.layout==="vertical"?n.height:n.width;if(k.padding==="gap"&&(T=ae*W/2),k.padding==="no-gap"){var G=ln(e.barCategoryGap,ae*W),Y=ae*W/2;T=Y-G-(Y-G)/W*G}}}a==="xAxis"?R=[n.left+(E.left||0)+(T||0),n.left+n.width-(E.right||0)-(T||0)]:a==="yAxis"?R=d==="horizontal"?[n.top+n.height-(E.bottom||0),n.top+(E.top||0)]:[n.top+(E.top||0)+(T||0),n.top+n.height-(E.bottom||0)-(T||0)]:R=k.range,_&&(R=[R[1],R[0]]);var te=yL(k,s,y),ne=te.scale,z=te.realScaleType;ne.domain(N).range(R),xL(ne);var ee=vL(ne,ja(ja({},k),{},{realScaleType:z}));a==="xAxis"?(A=b==="top"&&!P||b==="bottom"&&P,M=n.left,D=p[O]-A*k.height):a==="yAxis"&&(A=b==="left"&&!P||b==="right"&&P,M=p[O]-A*k.width,D=n.top);var J=ja(ja(ja({},k),ee),{},{realScaleType:z,x:M,y:D,scale:ne,width:a==="xAxis"?n.width:k.width,height:a==="yAxis"?n.height:k.height});return J.bandSize=Up(J,ee),!k.hide&&a==="xAxis"?p[O]+=(A?-1:1)*J.height:k.hide||(p[O]+=(A?-1:1)*J.width),ja(ja({},v),{},pg({},w,J))},{})},YL=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(a,o),width:Math.abs(s-n),height:Math.abs(o-a)}},Xae=function(e){var r=e.x1,n=e.y1,a=e.x2,s=e.y2;return YL({x:r,y:n},{x:a,y:s})},XL=(function(){function t(e){Gae(this,t),this.scale=e}return Kae(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();pg(XL,"EPS",1e-4);var yN=function(e){var r=Object.keys(e).reduce(function(n,a){return ja(ja({},n),{},pg({},a,XL.create(e[a])))},{});return ja(ja({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,c=s.position;return jae(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return WL(a,function(s,o){return r[o].isInRange(s)})}})};function Jae(t){return(t%180+180)%180}var Zae=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Jae(a),o=s*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},lk,$R;function eie(){if($R)return lk;$R=1;var t=ui(),e=Gh(),r=H0();function n(a){return function(s,o,c){var d=Object(s);if(!e(s)){var h=t(o,3);s=r(s),o=function(p){return h(d[p],p,d)}}var m=a(s,o,c);return m>-1?d[h?s[m]:m]:void 0}}return lk=n,lk}var ck,FR;function tie(){if(FR)return ck;FR=1;var t=UL();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return ck=e,ck}var uk,VR;function rie(){if(VR)return uk;VR=1;var t=X6(),e=ui(),r=tie(),n=Math.max;function a(s,o,c){var d=s==null?0:s.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(s,e(o,3),h)}return uk=a,uk}var dk,UR;function nie(){if(UR)return dk;UR=1;var t=eie(),e=rie(),r=t(e);return dk=r,dk}var aie=nie();const iie=bt(aie);var sie=f6();const oie=bt(sie);var lie=oie(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),xN=V.createContext(void 0),vN=V.createContext(void 0),JL=V.createContext(void 0),ZL=V.createContext({}),e5=V.createContext(void 0),t5=V.createContext(0),r5=V.createContext(0),BR=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,m=lie(s);return Q.createElement(xN.Provider,{value:n},Q.createElement(vN.Provider,{value:a},Q.createElement(ZL.Provider,{value:s},Q.createElement(JL.Provider,{value:m},Q.createElement(e5.Provider,{value:o},Q.createElement(t5.Provider,{value:h},Q.createElement(r5.Provider,{value:d},c)))))))},cie=function(){return V.useContext(e5)},n5=function(e){var r=V.useContext(xN);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},uie=function(){var e=V.useContext(xN);return Ts(e)},die=function(){var e=V.useContext(vN),r=iie(e,function(n){return WL(n.domain,Number.isFinite)});return r||Ts(e)},a5=function(e){var r=V.useContext(vN);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},hie=function(){var e=V.useContext(JL);return e},fie=function(){return V.useContext(ZL)},bN=function(){return V.useContext(r5)},wN=function(){return V.useContext(t5)};function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function mie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s5(n.key),n)}}function gie(t,e,r){return e&&pie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yie(t,e,r){return e=a0(e),xie(t,i5()?Reflect.construct(e,r||[],a0(t).constructor):e.apply(t,r))}function xie(t,e){if(e&&(qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vie(t)}function vie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i5=function(){return!!t})()}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a0(t)}function bie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}function Y_(t,e){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Y_(t,e)}function qR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(r),!0).forEach(function(n){kN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kN(t,e,r){return e=s5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s5(t){var e=wie(t,"string");return qc(e)=="symbol"?e:e+""}function wie(t,e){if(qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kie(t,e){return Sie(t)||Nie(t,e)||jie(t,e)||_ie()}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jie(t,e){if(t){if(typeof t=="string")return WR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WR(t,e)}}function WR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nie(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sie(t){if(Array.isArray(t))return t}function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X_.apply(this,arguments)}var Eie=function(e,r){var n;return Q.isValidElement(e)?n=Q.cloneElement(e,r):Ke(e)?n=e(r):n=Q.createElement("line",X_({},r,{className:"recharts-reference-line-line"})),n},Tie=function(e,r,n,a,s,o,c,d,h){var m=s.x,p=s.y,y=s.width,v=s.height;if(n){var w=h.y,k=e.y.apply(w,{position:o});if(ri(h,"discard")&&!e.y.isInRange(k))return null;var b=[{x:m+y,y:k},{x:m,y:k}];return d==="left"?b.reverse():b}if(r){var N=h.x,S=e.x.apply(N,{position:o});if(ri(h,"discard")&&!e.x.isInRange(S))return null;var E=[{x:S,y:p+v},{x:S,y:p}];return c==="top"?E.reverse():E}if(a){var P=h.segment,_=P.map(function(O){return e.apply(O,{position:o})});return ri(h,"discard")&&bae(_,function(O){return!e.isInRange(O)})?null:_}return null};function Aie(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=cie(),m=n5(a),p=a5(s),y=hie();if(!h||!y)return null;Aa(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=yN({x:m.scale,y:p.scale}),w=yr(e),k=yr(r),b=n&&n.length===2,N=Tie(v,w,k,b,y,t.position,m.orientation,p.orientation,t);if(!N)return null;var S=kie(N,2),E=S[0],P=E.x,_=E.y,O=S[1],T=O.x,R=O.y,M=ri(t,"hidden")?"url(#".concat(h,")"):void 0,D=zR(zR({clipPath:M},He(t,!0)),{},{x1:P,y1:_,x2:T,y2:R});return Q.createElement(kt,{className:at("recharts-reference-line",c)},Eie(o,D),Er.renderCallByParent(t,Xae({x1:P,y1:_,x2:T,y2:R})))}var _N=(function(t){function e(){return mie(this,e),yie(this,e,arguments)}return bie(e,t),gie(e,[{key:"render",value:function(){return Q.createElement(Aie,this.props)}}])})(Q.Component);kN(_N,"displayName","ReferenceLine");kN(_N,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(this,arguments)}function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function HR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(r),!0).forEach(function(n){gg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l5(n.key),n)}}function Iie(t,e,r){return e&&Pie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oie(t,e,r){return e=i0(e),Rie(t,o5()?Reflect.construct(e,r||[],i0(t).constructor):e.apply(t,r))}function Rie(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Die(t)}function Die(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o5=function(){return!!t})()}function i0(t){return i0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i0(t)}function Mie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z_(t,e)}function Z_(t,e){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z_(t,e)}function gg(t,e,r){return e=l5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l5(t){var e=Lie(t,"string");return zc(e)=="symbol"?e:e+""}function Lie(t,e){if(zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $ie=function(e){var r=e.x,n=e.y,a=e.xAxis,s=e.yAxis,o=yN({x:a.scale,y:s.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return ri(e,"discard")&&!o.isInRange(c)?null:c},yg=(function(t){function e(){return Cie(this,e),Oie(this,e,arguments)}return Mie(e,t),Iie(e,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=yr(a),m=yr(s);if(Aa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!m)return null;var p=$ie(this.props);if(!p)return null;var y=p.x,v=p.y,w=this.props,k=w.shape,b=w.className,N=ri(this.props,"hidden")?"url(#".concat(d,")"):void 0,S=GR(GR({clipPath:N},He(this.props,!0)),{},{cx:y,cy:v});return Q.createElement(kt,{className:at("recharts-reference-dot",b)},e.renderDot(k,S),Er.renderCallByParent(this.props,{x:y-o,y:v-o,width:2*o,height:2*o}))}}])})(Q.Component);gg(yg,"displayName","ReferenceDot");gg(yg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gg(yg,"renderDot",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):Ke(t)?r=t(e):r=Q.createElement(gN,J_({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function ej(){return ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ej.apply(this,arguments)}function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function KR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(r),!0).forEach(function(n){xg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u5(n.key),n)}}function Uie(t,e,r){return e&&Vie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bie(t,e,r){return e=s0(e),qie(t,c5()?Reflect.construct(e,r||[],s0(t).constructor):e.apply(t,r))}function qie(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zie(t)}function zie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c5=function(){return!!t})()}function s0(t){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s0(t)}function Wie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tj(t,e)}function tj(t,e){return tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tj(t,e)}function xg(t,e,r){return e=u5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u5(t){var e=Hie(t,"string");return Wc(e)=="symbol"?e:e+""}function Hie(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gie=function(e,r,n,a,s){var o=s.x1,c=s.x2,d=s.y1,h=s.y2,m=s.xAxis,p=s.yAxis;if(!m||!p)return null;var y=yN({x:m.scale,y:p.scale}),v={x:e?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},w={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return ri(s,"discard")&&(!y.isInRange(v)||!y.isInRange(w))?null:YL(v,w)},vg=(function(t){function e(){return Fie(this,e),Bie(this,e,arguments)}return Wie(e,t),Uie(e,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,m=n.clipPathId;Aa(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=yr(a),y=yr(s),v=yr(o),w=yr(c),k=this.props.shape;if(!p&&!y&&!v&&!w&&!k)return null;var b=Gie(p,y,v,w,this.props);if(!b&&!k)return null;var N=ri(this.props,"hidden")?"url(#".concat(m,")"):void 0;return Q.createElement(kt,{className:at("recharts-reference-area",d)},e.renderRect(k,QR(QR({clipPath:N},He(this.props,!0)),b)),Er.renderCallByParent(this.props,b))}}])})(Q.Component);xg(vg,"displayName","ReferenceArea");xg(vg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xg(vg,"renderRect",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):Ke(t)?r=t(e):r=Q.createElement(pN,ej({},e,{className:"recharts-reference-area-rect"})),r});function d5(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function Kie(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Zae(n,r)}function Qie(t,e,r){var n=r==="width",a=t.x,s=t.y,o=t.width,c=t.height;return e===1?{start:n?a:s,end:n?a+o:s+c}:{start:n?a+o:s+c,end:n?a:s}}function o0(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Yie(t,e){return d5(t,e+1)}function Xie(t,e,r,n,a){for(var s=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,m=o,p=function(){var w=n?.[d];if(w===void 0)return{v:d5(n,h)};var k=d,b,N=function(){return b===void 0&&(b=r(w,k)),b},S=w.coordinate,E=d===0||o0(t,S,N,m,c);E||(d=0,m=o,h+=1),E&&(m=S+t*(N()/2+a),d+=h)},y;h<=s.length;)if(y=p(),y)return y.v;return[]}function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function YR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(r),!0).forEach(function(n){Jie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jie(t,e,r){return e=Zie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zie(t){var e=ese(t,"string");return kh(e)=="symbol"?e:e+""}function ese(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tse(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,c=e.start,d=e.end,h=function(y){var v=s[y],w,k=function(){return w===void 0&&(w=r(v,y)),w};if(y===o-1){var b=t*(v.coordinate+t*k()/2-d);s[y]=v=Hr(Hr({},v),{},{tickCoord:b>0?v.coordinate-b*t:v.coordinate})}else s[y]=v=Hr(Hr({},v),{},{tickCoord:v.coordinate});var N=o0(t,v.tickCoord,k,c,d);N&&(d=v.tickCoord-t*(k()/2+a),s[y]=Hr(Hr({},v),{},{isShow:!0}))},m=o-1;m>=0;m--)h(m);return s}function rse(t,e,r,n,a,s){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(s){var m=n[c-1],p=r(m,c-1),y=t*(m.coordinate+t*p/2-h);o[c-1]=m=Hr(Hr({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var v=o0(t,m.tickCoord,function(){return p},d,h);v&&(h=m.tickCoord-t*(p/2+a),o[c-1]=Hr(Hr({},m),{},{isShow:!0}))}for(var w=s?c-1:c,k=function(S){var E=o[S],P,_=function(){return P===void 0&&(P=r(E,S)),P};if(S===0){var O=t*(E.coordinate-t*_()/2-d);o[S]=E=Hr(Hr({},E),{},{tickCoord:O<0?E.coordinate-O*t:E.coordinate})}else o[S]=E=Hr(Hr({},E),{},{tickCoord:E.coordinate});var T=o0(t,E.tickCoord,_,d,h);T&&(d=E.tickCoord+t*(_()/2+a),o[S]=Hr(Hr({},E),{},{isShow:!0}))},b=0;b<w;b++)k(b);return o}function jN(t,e,r){var n=t.tick,a=t.ticks,s=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,m=t.unit,p=t.angle;if(!a||!a.length||!n)return[];if(Ee(d)||au.isSsr)return Yie(a,typeof d=="number"&&Ee(d)?d:0);var y=[],v=c==="top"||c==="bottom"?"width":"height",w=m&&v==="width"?kd(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},k=function(E,P){var _=Ke(h)?h(E.value,P):E.value;return v==="width"?Kie(kd(_,{fontSize:e,letterSpacing:r}),w,p):kd(_,{fontSize:e,letterSpacing:r})[v]},b=a.length>=2?on(a[1].coordinate-a[0].coordinate):1,N=Qie(s,b,v);return d==="equidistantPreserveStart"?Xie(b,N,k,a,o):(d==="preserveStart"||d==="preserveStartEnd"?y=rse(b,N,k,a,o,d==="preserveStartEnd"):y=tse(b,N,k,a,o),y.filter(function(S){return S.isShow}))}var nse=["viewBox"],ase=["viewBox"],ise=["ticks"];function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oc.apply(this,arguments)}function XR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(r),!0).forEach(function(n){NN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hk(t,e){if(t==null)return{};var r=sse(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ose(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f5(n.key),n)}}function lse(t,e,r){return e&&JR(t.prototype,e),r&&JR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cse(t,e,r){return e=l0(e),use(t,h5()?Reflect.construct(e,r||[],l0(t).constructor):e.apply(t,r))}function use(t,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dse(t)}function dse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h5=function(){return!!t})()}function l0(t){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l0(t)}function hse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rj(t,e)}function rj(t,e){return rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rj(t,e)}function NN(t,e,r){return e=f5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f5(t){var e=fse(t,"string");return Hc(e)=="symbol"?e:e+""}function fse(t,e){if(Hc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lu=(function(t){function e(r){var n;return ose(this,e),n=cse(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return hse(e,t),lse(e,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,o=hk(n,nse),c=this.props,d=c.viewBox,h=hk(c,ase);return!gc(s,d)||!gc(o,h)||!gc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,m=a.tickSize,p=a.mirror,y=a.tickMargin,v,w,k,b,N,S,E=p?-1:1,P=n.tickSize||m,_=Ee(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":v=w=n.coordinate,b=o+ +!p*d,k=b-E*P,S=k-E*y,N=_;break;case"left":k=b=n.coordinate,w=s+ +!p*c,v=w-E*P,N=v-E*y,S=_;break;case"right":k=b=n.coordinate,w=s+ +p*c,v=w+E*P,N=v+E*y,S=_;break;default:v=w=n.coordinate,b=o+ +p*d,k=b+E*P,S=k+E*y,N=_;break}return{line:{x1:v,y1:k,x2:w,y2:b},tick:{x:N,y:S}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,m=n.axisLine,p=mr(mr(mr({},He(this.props,!1)),He(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);p=mr(mr({},p),{},{x1:a,y1:s+y*c,x2:a+o,y2:s+y*c})}else{var v=+(d==="left"&&!h||d==="right"&&h);p=mr(mr({},p),{},{x1:a+v*o,y1:s,x2:a+v*o,y2:s+c})}return Q.createElement("line",oc({},p,{className:at("recharts-cartesian-axis-line",Ln(m,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var o=this,c=this.props,d=c.tickLine,h=c.stroke,m=c.tick,p=c.tickFormatter,y=c.unit,v=jN(mr(mr({},this.props),{},{ticks:n}),a,s),w=this.getTickTextAnchor(),k=this.getTickVerticalAnchor(),b=He(this.props,!1),N=He(m,!1),S=mr(mr({},b),{},{fill:"none"},He(d,!1)),E=v.map(function(P,_){var O=o.getTickLineCoord(P),T=O.line,R=O.tick,M=mr(mr(mr(mr({textAnchor:w,verticalAnchor:k},b),{},{stroke:"none",fill:h},N),R),{},{index:_,payload:P,visibleTicksCount:v.length,tickFormatter:p});return Q.createElement(kt,oc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Ko(o.props,P,_)),d&&Q.createElement("line",oc({},S,T,{className:at("recharts-cartesian-axis-tick-line",Ln(d,"className"))})),m&&e.renderTickItem(m,M,"".concat(Ke(p)?p(P.value,_):P.value).concat(y||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,m=a.hide;if(m)return null;var p=this.props,y=p.ticks,v=hk(p,ise),w=y;return Ke(d)&&(w=y&&y.length>0?d(this.props):d(v)),o<=0||c<=0||!w||!w.length?null:Q.createElement(kt,{className:at("recharts-cartesian-axis",h),ref:function(b){n.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(w,this.state.fontSize,this.state.letterSpacing),Er.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var o,c=at(a.className,"recharts-cartesian-axis-tick-value");return Q.isValidElement(n)?o=Q.cloneElement(n,mr(mr({},a),{},{className:c})):Ke(n)?o=n(mr(mr({},a),{},{className:c})):o=Q.createElement(Qo,oc({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])})(V.Component);NN(lu,"displayName","CartesianAxis");NN(lu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mse=["x1","y1","x2","y2","key"],pse=["offset"];function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function ZR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(r),!0).forEach(function(n){gse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gse(t,e,r){return e=yse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yse(t){var e=xse(t,"string");return Jo(e)=="symbol"?e:e+""}function xse(t,e){if(Jo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oo.apply(this,arguments)}function eD(t,e){if(t==null)return{};var r=vse(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bse=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,s=e.y,o=e.width,c=e.height,d=e.ry;return Q.createElement("rect",{x:a,y:s,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function m5(t,e){var r;if(Q.isValidElement(t))r=Q.cloneElement(t,e);else if(Ke(t))r=t(e);else{var n=e.x1,a=e.y1,s=e.x2,o=e.y2,c=e.key,d=eD(e,mse),h=He(d,!1);h.offset;var m=eD(h,pse);r=Q.createElement("line",Oo({},m,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:c}))}return r}function wse(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(c,d){var h=Qr(Qr({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return m5(a,h)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kse(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(c,d){var h=Qr(Qr({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return m5(a,h)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _se(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,s=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var m=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,v){return y-v});a!==m[0]&&m.unshift(0);var p=m.map(function(y,v){var w=!m[v+1],k=w?a+o-y:m[v+1]-y;if(k<=0)return null;var b=v%e.length;return Q.createElement("rect",{key:"react-".concat(v),y,x:n,height:k,width:s,stroke:"none",fill:e[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function jse(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var m=h.map(function(y){return Math.round(y+s-s)}).sort(function(y,v){return y-v});s!==m[0]&&m.unshift(0);var p=m.map(function(y,v){var w=!m[v+1],k=w?s+c-y:m[v+1]-y;if(k<=0)return null;var b=v%n.length;return Q.createElement("rect",{key:"react-".concat(v),x:y,y:o,width:k,height:d,stroke:"none",fill:n[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Nse=function(e,r){var n=e.xAxis,a=e.width,s=e.height,o=e.offset;return gL(jN(Qr(Qr(Qr({},lu.defaultProps),n),{},{ticks:Oi(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},Sse=function(e,r){var n=e.yAxis,a=e.width,s=e.height,o=e.offset;return gL(jN(Qr(Qr(Qr({},lu.defaultProps),n),{},{ticks:Oi(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},Jl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function p5(t){var e,r,n,a,s,o,c=bN(),d=wN(),h=fie(),m=Qr(Qr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Jl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Jl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Jl.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Jl.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Jl.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Jl.verticalFill,x:Ee(t.x)?t.x:h.left,y:Ee(t.y)?t.y:h.top,width:Ee(t.width)?t.width:h.width,height:Ee(t.height)?t.height:h.height}),p=m.x,y=m.y,v=m.width,w=m.height,k=m.syncWithTicks,b=m.horizontalValues,N=m.verticalValues,S=uie(),E=die();if(!Ee(v)||v<=0||!Ee(w)||w<=0||!Ee(p)||p!==+p||!Ee(y)||y!==+y)return null;var P=m.verticalCoordinatesGenerator||Nse,_=m.horizontalCoordinatesGenerator||Sse,O=m.horizontalPoints,T=m.verticalPoints;if((!O||!O.length)&&Ke(_)){var R=b&&b.length,M=_({yAxis:E?Qr(Qr({},E),{},{ticks:R?b:E.ticks}):void 0,width:c,height:d,offset:h},R?!0:k);Aa(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jo(M),"]")),Array.isArray(M)&&(O=M)}if((!T||!T.length)&&Ke(P)){var D=N&&N.length,A=P({xAxis:S?Qr(Qr({},S),{},{ticks:D?N:S.ticks}):void 0,width:c,height:d,offset:h},D?!0:k);Aa(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jo(A),"]")),Array.isArray(A)&&(T=A)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(bse,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),Q.createElement(wse,Oo({},m,{offset:h,horizontalPoints:O,xAxis:S,yAxis:E})),Q.createElement(kse,Oo({},m,{offset:h,verticalPoints:T,xAxis:S,yAxis:E})),Q.createElement(_se,Oo({},m,{horizontalPoints:O})),Q.createElement(jse,Oo({},m,{verticalPoints:T})))}p5.displayName="CartesianGrid";function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function Ese(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x5(n.key),n)}}function Ase(t,e,r){return e&&Tse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cse(t,e,r){return e=c0(e),Pse(t,g5()?Reflect.construct(e,r||[],c0(t).constructor):e.apply(t,r))}function Pse(t,e){if(e&&(Gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ise(t)}function Ise(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c0(t)}function Ose(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nj(t,e)}function nj(t,e){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nj(t,e)}function y5(t,e,r){return e=x5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x5(t){var e=Rse(t,"string");return Gc(e)=="symbol"?e:e+""}function Rse(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aj.apply(this,arguments)}function Dse(t){var e=t.xAxisId,r=bN(),n=wN(),a=n5(e);return a==null?null:V.createElement(lu,aj({},a,{className:at("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Oi(o,!0)}}))}var bg=(function(t){function e(){return Ese(this,e),Cse(this,e,arguments)}return Ose(e,t),Ase(e,[{key:"render",value:function(){return V.createElement(Dse,this.props)}}])})(V.Component);y5(bg,"displayName","XAxis");y5(bg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function Mse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w5(n.key),n)}}function $se(t,e,r){return e&&Lse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fse(t,e,r){return e=u0(e),Vse(t,v5()?Reflect.construct(e,r||[],u0(t).constructor):e.apply(t,r))}function Vse(t,e){if(e&&(Kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Use(t)}function Use(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!t})()}function u0(t){return u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u0(t)}function Bse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ij(t,e)}function ij(t,e){return ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ij(t,e)}function b5(t,e,r){return e=w5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w5(t){var e=qse(t,"string");return Kc(e)=="symbol"?e:e+""}function qse(t,e){if(Kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sj.apply(this,arguments)}var zse=function(e){var r=e.yAxisId,n=bN(),a=wN(),s=a5(r);return s==null?null:V.createElement(lu,sj({},s,{className:at("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Oi(c,!0)}}))},wg=(function(t){function e(){return Mse(this,e),Fse(this,e,arguments)}return Bse(e,t),$se(e,[{key:"render",value:function(){return V.createElement(zse,this.props)}}])})(V.Component);b5(wg,"displayName","YAxis");b5(wg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function tD(t){return Kse(t)||Gse(t)||Hse(t)||Wse()}function Wse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hse(t,e){if(t){if(typeof t=="string")return oj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oj(t,e)}}function Gse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kse(t){if(Array.isArray(t))return oj(t)}function oj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lj=function(e,r,n,a,s){var o=ra(e,_N),c=ra(e,yg),d=[].concat(tD(o),tD(c)),h=ra(e,vg),m="".concat(a,"Id"),p=a[0],y=r;if(d.length&&(y=d.reduce(function(k,b){if(b.props[m]===n&&ri(b.props,"extendDomain")&&Ee(b.props[p])){var N=b.props[p];return[Math.min(k[0],N),Math.max(k[1],N)]}return k},y)),h.length){var v="".concat(p,"1"),w="".concat(p,"2");y=h.reduce(function(k,b){if(b.props[m]===n&&ri(b.props,"extendDomain")&&Ee(b.props[v])&&Ee(b.props[w])){var N=b.props[v],S=b.props[w];return[Math.min(k[0],N,S),Math.max(k[1],N,S)]}return k},y)}return s&&s.length&&(y=s.reduce(function(k,b){return Ee(b)?[Math.min(k[0],b),Math.max(k[1],b)]:k},y)),y},fk={exports:{}},rD;function Qse(){return rD||(rD=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function s(d,h,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new a(m,p||d,y),w=r?r+h:h;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],v]:d._events[w].push(v):(d._events[w]=v,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)e.call(m,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=r?r+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,w=new Array(v);y<v;y++)w[y]=p[y].fn;return w},c.prototype.listenerCount=function(h){var m=r?r+h:h,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,m,p,y,v,w){var k=r?r+h:h;if(!this._events[k])return!1;var b=this._events[k],N=arguments.length,S,E;if(b.fn){switch(b.once&&this.removeListener(h,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,m),!0;case 3:return b.fn.call(b.context,m,p),!0;case 4:return b.fn.call(b.context,m,p,y),!0;case 5:return b.fn.call(b.context,m,p,y,v),!0;case 6:return b.fn.call(b.context,m,p,y,v,w),!0}for(E=1,S=new Array(N-1);E<N;E++)S[E-1]=arguments[E];b.fn.apply(b.context,S)}else{var P=b.length,_;for(E=0;E<P;E++)switch(b[E].once&&this.removeListener(h,b[E].fn,void 0,!0),N){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,m);break;case 3:b[E].fn.call(b[E].context,m,p);break;case 4:b[E].fn.call(b[E].context,m,p,y);break;default:if(!S)for(_=1,S=new Array(N-1);_<N;_++)S[_-1]=arguments[_];b[E].fn.apply(b[E].context,S)}}return!0},c.prototype.on=function(h,m,p){return s(this,h,m,p,!1)},c.prototype.once=function(h,m,p){return s(this,h,m,p,!0)},c.prototype.removeListener=function(h,m,p,y){var v=r?r+h:h;if(!this._events[v])return this;if(!m)return o(this,v),this;var w=this._events[v];if(w.fn)w.fn===m&&(!y||w.once)&&(!p||w.context===p)&&o(this,v);else{for(var k=0,b=[],N=w.length;k<N;k++)(w[k].fn!==m||y&&!w[k].once||p&&w[k].context!==p)&&b.push(w[k]);b.length?this._events[v]=b.length===1?b[0]:b:o(this,v)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(fk)),fk.exports}var Yse=Qse();const Xse=bt(Yse);var mk=new Xse,pk="recharts.syncMouseEvents";function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function Jse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k5(n.key),n)}}function eoe(t,e,r){return e&&Zse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gk(t,e,r){return e=k5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k5(t){var e=toe(t,"string");return _h(e)=="symbol"?e:e+""}function toe(t,e){if(_h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var roe=(function(){function t(){Jse(this,t),gk(this,"activeIndex",0),gk(this,"coordinateList",[]),gk(this,"layout","horizontal")}return eoe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,y=r.mouseHandlerCallback,v=y===void 0?null:y;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=s+d+h,y=o+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])})();function noe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&Ee(n)&&Ee(a))return!0}return!1}function aoe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function _5(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,s=t.endAngle,o=Rt(e,r,n,a),c=Rt(e,r,n,s);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function ioe(t,e,r){var n,a,s,o;if(t==="horizontal")n=e.x,s=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,m=e.outerRadius,p=e.angle,y=Rt(c,d,h,p),v=Rt(c,d,m,p);n=y.x,a=y.y,s=v.x,o=v.y}else return _5(e);return[{x:n,y:a},{x:s,y:o}]}function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function nD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(r),!0).forEach(function(n){soe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function soe(t,e,r){return e=ooe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ooe(t){var e=loe(t,"string");return jh(e)=="symbol"?e:e+""}function loe(t,e){if(jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function coe(t){var e,r,n=t.element,a=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,m=t.tooltipAxisBandSize,p=t.layout,y=t.chartName,v=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!v||!s||!o||y!=="ScatterChart"&&a!=="axis")return null;var w,k=P_;if(y==="ScatterChart")w=o,k=zre;else if(y==="BarChart")w=aoe(p,o,d,m),k=pN;else if(p==="radial"){var b=_5(o),N=b.cx,S=b.cy,E=b.radius,P=b.startAngle,_=b.endAngle;w={cx:N,cy:S,startAngle:P,endAngle:_,innerRadius:E,outerRadius:E},k=mN}else w={points:ioe(p,o,d)},k=P_;var O=Mm(Mm(Mm(Mm({stroke:"#ccc",pointerEvents:"none"},d),w),He(v,!1)),{},{payload:c,payloadIndex:h,className:at("recharts-tooltip-cursor",v.className)});return V.isValidElement(v)?V.cloneElement(v,O):V.createElement(k,O)}var uoe=["item"],doe=["children","className","width","height","style","compact","title","desc"];function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lc.apply(this,arguments)}function aD(t,e){return moe(t)||foe(t,e)||N5(t,e)||hoe()}function hoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function foe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,c=[],d=!0,h=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(d=(n=s.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function moe(t){if(Array.isArray(t))return t}function iD(t,e){if(t==null)return{};var r=poe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function poe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function goe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yoe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S5(n.key),n)}}function xoe(t,e,r){return e&&yoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function voe(t,e,r){return e=d0(e),boe(t,j5()?Reflect.construct(e,r||[],d0(t).constructor):e.apply(t,r))}function boe(t,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return woe(t)}function woe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j5=function(){return!!t})()}function d0(t){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d0(t)}function koe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cj(t,e)}function cj(t,e){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cj(t,e)}function Yc(t){return Noe(t)||joe(t)||N5(t)||_oe()}function _oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N5(t,e){if(t){if(typeof t=="string")return uj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uj(t,e)}}function joe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Noe(t){if(Array.isArray(t))return uj(t)}function uj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(r),!0).forEach(function(n){ze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ze(t,e,r){return e=S5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S5(t){var e=Soe(t,"string");return Qc(e)=="symbol"?e:e+""}function Soe(t,e){if(Qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eoe={xAxis:["bottom","top"],yAxis:["left","right"]},Toe={width:"100%",height:"100%"},E5={x:0,y:0};function Lm(t){return t}var Aoe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Coe=function(e,r,n,a){var s=r.find(function(m){return m&&m.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,c=a.radius;return pe(pe(pe({},a),Rt(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=s.coordinate,h=a.angle;return pe(pe(pe({},a),Rt(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return E5},kg=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Yc(c),Yc(h)):c},[]);return o.length>0?o:e&&e.length&&Ee(a)&&Ee(s)?e.slice(a,s+1):[]};function T5(t){return t==="number"?[0,"auto"]:void 0}var dj=function(e,r,n,a){var s=e.graphicalItems,o=e.tooltipAxis,c=kg(r,e);return n<0||!s||!s.length||n>=c.length?null:s.reduce(function(d,h){var m,p=(m=h.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var v=p===void 0?c:p;y=Hk(v,o.dataKey,a)}else y=p&&p[n]||c[n];return y?[].concat(Yc(d),[wL(h,y)]):d},[])},oD=function(e,r,n,a){var s=a||{x:e.chartX,y:e.chartY},o=Aoe(s,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,m=pZ(o,c,h,d);if(m>=0&&h){var p=h[m]&&h[m].value,y=dj(e,r,m,p),v=Coe(n,c,m,s);return{activeTooltipIndex:m,activeLabel:p,activePayload:y,activeCoordinate:v}}return null},Poe=function(e,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,y=e.stackOffset,v=pL(m,s);return n.reduce(function(w,k){var b,N=k.type.defaultProps!==void 0?pe(pe({},k.type.defaultProps),k.props):k.props,S=N.type,E=N.dataKey,P=N.allowDataOverflow,_=N.allowDuplicatedCategory,O=N.scale,T=N.ticks,R=N.includeHidden,M=N[o];if(w[M])return w;var D=kg(e.data,{graphicalItems:a.filter(function(ee){var J,le=o in ee.props?ee.props[o]:(J=ee.type.defaultProps)===null||J===void 0?void 0:J[o];return le===M}),dataStartIndex:d,dataEndIndex:h}),A=D.length,F,L,Z;noe(N.domain,P,S)&&(F=S_(N.domain,null,P),v&&(S==="number"||O!=="auto")&&(Z=jd(D,E,"category")));var ae=T5(S);if(!F||F.length===0){var W,G=(W=N.domain)!==null&&W!==void 0?W:ae;if(E){if(F=jd(D,E,S),S==="category"&&v){var Y=cW(F);_&&Y?(L=F,F=Zp(0,A)):_||(F=cO(G,F,k).reduce(function(ee,J){return ee.indexOf(J)>=0?ee:[].concat(Yc(ee),[J])},[]))}else if(S==="category")_?F=F.filter(function(ee){return ee!==""&&!st(ee)}):F=cO(G,F,k).reduce(function(ee,J){return ee.indexOf(J)>=0||J===""||st(J)?ee:[].concat(Yc(ee),[J])},[]);else if(S==="number"){var te=bZ(D,a.filter(function(ee){var J,le,fe=o in ee.props?ee.props[o]:(J=ee.type.defaultProps)===null||J===void 0?void 0:J[o],be="hide"in ee.props?ee.props.hide:(le=ee.type.defaultProps)===null||le===void 0?void 0:le.hide;return fe===M&&(R||!be)}),E,s,m);te&&(F=te)}v&&(S==="number"||O!=="auto")&&(Z=jd(D,E,"category"))}else v?F=Zp(0,A):c&&c[M]&&c[M].hasStack&&S==="number"?F=y==="expand"?[0,1]:bL(c[M].stackGroups,d,h):F=mL(D,a.filter(function(ee){var J=o in ee.props?ee.props[o]:ee.type.defaultProps[o],le="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return J===M&&(R||!le)}),S,m,!0);if(S==="number")F=lj(p,F,M,s,T),G&&(F=S_(G,F,P));else if(S==="category"&&G){var ne=G,z=F.every(function(ee){return ne.indexOf(ee)>=0});z&&(F=ne)}}return pe(pe({},w),{},ze({},M,pe(pe({},N),{},{axisType:s,domain:F,categoricalDomain:Z,duplicateDomain:L,originalDomain:(b=N.domain)!==null&&b!==void 0?b:ae,isCategorical:v,layout:m})))},{})},Ioe=function(e,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,y=kg(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),v=y.length,w=pL(m,s),k=-1;return n.reduce(function(b,N){var S=N.type.defaultProps!==void 0?pe(pe({},N.type.defaultProps),N.props):N.props,E=S[o],P=T5("number");if(!b[E]){k++;var _;return w?_=Zp(0,v):c&&c[E]&&c[E].hasStack?(_=bL(c[E].stackGroups,d,h),_=lj(p,_,E,s)):(_=S_(P,mL(y,n.filter(function(O){var T,R,M=o in O.props?O.props[o]:(T=O.type.defaultProps)===null||T===void 0?void 0:T[o],D="hide"in O.props?O.props.hide:(R=O.type.defaultProps)===null||R===void 0?void 0:R.hide;return M===E&&!D}),"number",m),a.defaultProps.allowDataOverflow),_=lj(p,_,E,s)),pe(pe({},b),{},ze({},E,pe(pe({axisType:s},a.defaultProps),{},{hide:!0,orientation:Ln(Eoe,"".concat(s,".").concat(k%2),null),domain:_,originalDomain:P,isCategorical:w,layout:m})))}return b},{})},Ooe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.children,p="".concat(a,"Id"),y=ra(m,s),v={};return y&&y.length?v=Poe(e,{axes:y,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(v=Ioe(e,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),v},Roe=function(e){var r=Ts(e),n=Oi(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:U1(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Up(r,n)}},lD=function(e){var r=e.children,n=e.defaultShowTooltip,a=In(r,Uc),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Doe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Mi(r&&r.type);return n&&n.indexOf("Bar")>=0})},cD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Moe=function(e,r){var n=e.props,a=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,m=n.height,p=n.children,y=n.margin||{},v=In(p,Uc),w=In(p,Lo),k=Object.keys(d).reduce(function(_,O){var T=d[O],R=T.orientation;return!T.mirror&&!T.hide?pe(pe({},_),{},ze({},R,_[R]+T.width)):_},{left:y.left||0,right:y.right||0}),b=Object.keys(o).reduce(function(_,O){var T=o[O],R=T.orientation;return!T.mirror&&!T.hide?pe(pe({},_),{},ze({},R,Ln(_,"".concat(R))+T.height)):_},{top:y.top||0,bottom:y.bottom||0}),N=pe(pe({},b),k),S=N.bottom;v&&(N.bottom+=v.props.height||Uc.defaultProps.height),w&&r&&(N=xZ(N,a,n,r));var E=h-N.left-N.right,P=m-N.top-N.bottom;return pe(pe({brushBottom:S},N),{},{width:Math.max(E,0),height:Math.max(P,0)})},Loe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},A5=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,y=function(N,S){var E=S.graphicalItems,P=S.stackGroups,_=S.offset,O=S.updateId,T=S.dataStartIndex,R=S.dataEndIndex,M=N.barSize,D=N.layout,A=N.barGap,F=N.barCategoryGap,L=N.maxBarSize,Z=cD(D),ae=Z.numericAxisName,W=Z.cateAxisName,G=Doe(E),Y=[];return E.forEach(function(te,ne){var z=kg(N.data,{graphicalItems:[te],dataStartIndex:T,dataEndIndex:R}),ee=te.type.defaultProps!==void 0?pe(pe({},te.type.defaultProps),te.props):te.props,J=ee.dataKey,le=ee.maxBarSize,fe=ee["".concat(ae,"Id")],be=ee["".concat(W,"Id")],me={},xe=d.reduce(function(Pe,rt){var Cr=S["".concat(rt.axisType,"Map")],Et=ee["".concat(rt.axisType,"Id")];Cr&&Cr[Et]||rt.axisType==="zAxis"||Xo();var hn=Cr[Et];return pe(pe({},Pe),{},ze(ze({},rt.axisType,hn),"".concat(rt.axisType,"Ticks"),Oi(hn)))},me),q=xe[W],he=xe["".concat(W,"Ticks")],ge=P&&P[fe]&&P[fe].hasStack&&AZ(te,P[fe].stackGroups),ce=Mi(te.type).indexOf("Bar")>=0,Ne=Up(q,he),Ae=[],et=G&&gZ({barSize:M,stackGroups:P,totalSize:Loe(xe,W)});if(ce){var tt,St,ar=st(le)?L:le,ut=(tt=(St=Up(q,he,!0))!==null&&St!==void 0?St:ar)!==null&&tt!==void 0?tt:0;Ae=yZ({barGap:A,barCategoryGap:F,bandSize:ut!==Ne?ut:Ne,sizeList:et[be],maxBarSize:ar}),ut!==Ne&&(Ae=Ae.map(function(Pe){return pe(pe({},Pe),{},{position:pe(pe({},Pe.position),{},{offset:Pe.position.offset-ut/2})})}))}var ye=te&&te.type&&te.type.getComposedData;ye&&Y.push({props:pe(pe({},ye(pe(pe({},xe),{},{displayedData:z,props:N,dataKey:J,item:te,bandSize:Ne,barPosition:Ae,offset:_,stackedData:ge,layout:D,dataStartIndex:T,dataEndIndex:R}))),{},ze(ze(ze({key:te.key||"item-".concat(ne)},ae,xe[ae]),W,xe[W]),"animationId",O)),childIndex:wW(te,N.children),item:te})}),Y},v=function(N,S){var E=N.props,P=N.dataStartIndex,_=N.dataEndIndex,O=N.updateId;if(!j2({props:E}))return null;var T=E.children,R=E.layout,M=E.stackOffset,D=E.data,A=E.reverseStackOrder,F=cD(R),L=F.numericAxisName,Z=F.cateAxisName,ae=ra(T,n),W=EZ(D,ae,"".concat(L,"Id"),"".concat(Z,"Id"),M,A),G=d.reduce(function(ee,J){var le="".concat(J.axisType,"Map");return pe(pe({},ee),{},ze({},le,Ooe(E,pe(pe({},J),{},{graphicalItems:ae,stackGroups:J.axisType===L&&W,dataStartIndex:P,dataEndIndex:_}))))},{}),Y=Moe(pe(pe({},G),{},{props:E,graphicalItems:ae}),S?.legendBBox);Object.keys(G).forEach(function(ee){G[ee]=m(E,G[ee],Y,ee.replace("Map",""),r)});var te=G["".concat(Z,"Map")],ne=Roe(te),z=y(E,pe(pe({},G),{},{dataStartIndex:P,dataEndIndex:_,updateId:O,graphicalItems:ae,stackGroups:W,offset:Y}));return pe(pe({formattedGraphicalItems:z,graphicalItems:ae,offset:Y,stackGroups:W},ne),G)},w=(function(b){function N(S){var E,P,_;return goe(this,N),_=voe(this,N,[S]),ze(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ze(_,"accessibilityManager",new roe),ze(_,"handleLegendBBoxUpdate",function(O){if(O){var T=_.state,R=T.dataStartIndex,M=T.dataEndIndex,D=T.updateId;_.setState(pe({legendBBox:O},v({props:_.props,dataStartIndex:R,dataEndIndex:M,updateId:D},pe(pe({},_.state),{},{legendBBox:O}))))}}),ze(_,"handleReceiveSyncEvent",function(O,T,R){if(_.props.syncId===O){if(R===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(T)}}),ze(_,"handleBrushChange",function(O){var T=O.startIndex,R=O.endIndex;if(T!==_.state.dataStartIndex||R!==_.state.dataEndIndex){var M=_.state.updateId;_.setState(function(){return pe({dataStartIndex:T,dataEndIndex:R},v({props:_.props,dataStartIndex:T,dataEndIndex:R,updateId:M},_.state))}),_.triggerSyncEvent({dataStartIndex:T,dataEndIndex:R})}}),ze(_,"handleMouseEnter",function(O){var T=_.getMouseInfo(O);if(T){var R=pe(pe({},T),{},{isTooltipActive:!0});_.setState(R),_.triggerSyncEvent(R);var M=_.props.onMouseEnter;Ke(M)&&M(R,O)}}),ze(_,"triggeredAfterMouseMove",function(O){var T=_.getMouseInfo(O),R=T?pe(pe({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(R),_.triggerSyncEvent(R);var M=_.props.onMouseMove;Ke(M)&&M(R,O)}),ze(_,"handleItemMouseEnter",function(O){_.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),ze(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),ze(_,"handleMouseMove",function(O){O.persist(),_.throttleTriggeredAfterMouseMove(O)}),ze(_,"handleMouseLeave",function(O){_.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};_.setState(T),_.triggerSyncEvent(T);var R=_.props.onMouseLeave;Ke(R)&&R(T,O)}),ze(_,"handleOuterEvent",function(O){var T=bW(O),R=Ln(_.props,"".concat(T));if(T&&Ke(R)){var M,D;/.*touch.*/i.test(T)?D=_.getMouseInfo(O.changedTouches[0]):D=_.getMouseInfo(O),R((M=D)!==null&&M!==void 0?M:{},O)}}),ze(_,"handleClick",function(O){var T=_.getMouseInfo(O);if(T){var R=pe(pe({},T),{},{isTooltipActive:!0});_.setState(R),_.triggerSyncEvent(R);var M=_.props.onClick;Ke(M)&&M(R,O)}}),ze(_,"handleMouseDown",function(O){var T=_.props.onMouseDown;if(Ke(T)){var R=_.getMouseInfo(O);T(R,O)}}),ze(_,"handleMouseUp",function(O){var T=_.props.onMouseUp;if(Ke(T)){var R=_.getMouseInfo(O);T(R,O)}}),ze(_,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),ze(_,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&_.handleMouseDown(O.changedTouches[0])}),ze(_,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&_.handleMouseUp(O.changedTouches[0])}),ze(_,"handleDoubleClick",function(O){var T=_.props.onDoubleClick;if(Ke(T)){var R=_.getMouseInfo(O);T(R,O)}}),ze(_,"handleContextMenu",function(O){var T=_.props.onContextMenu;if(Ke(T)){var R=_.getMouseInfo(O);T(R,O)}}),ze(_,"triggerSyncEvent",function(O){_.props.syncId!==void 0&&mk.emit(pk,_.props.syncId,O,_.eventEmitterSymbol)}),ze(_,"applySyncEvent",function(O){var T=_.props,R=T.layout,M=T.syncMethod,D=_.state.updateId,A=O.dataStartIndex,F=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)_.setState(pe({dataStartIndex:A,dataEndIndex:F},v({props:_.props,dataStartIndex:A,dataEndIndex:F,updateId:D},_.state)));else if(O.activeTooltipIndex!==void 0){var L=O.chartX,Z=O.chartY,ae=O.activeTooltipIndex,W=_.state,G=W.offset,Y=W.tooltipTicks;if(!G)return;if(typeof M=="function")ae=M(Y,O);else if(M==="value"){ae=-1;for(var te=0;te<Y.length;te++)if(Y[te].value===O.activeLabel){ae=te;break}}var ne=pe(pe({},G),{},{x:G.left,y:G.top}),z=Math.min(L,ne.x+ne.width),ee=Math.min(Z,ne.y+ne.height),J=Y[ae]&&Y[ae].value,le=dj(_.state,_.props.data,ae),fe=Y[ae]?{x:R==="horizontal"?Y[ae].coordinate:z,y:R==="horizontal"?ee:Y[ae].coordinate}:E5;_.setState(pe(pe({},O),{},{activeLabel:J,activeCoordinate:fe,activePayload:le,activeTooltipIndex:ae}))}else _.setState(O)}),ze(_,"renderCursor",function(O){var T,R=_.state,M=R.isTooltipActive,D=R.activeCoordinate,A=R.activePayload,F=R.offset,L=R.activeTooltipIndex,Z=R.tooltipAxisBandSize,ae=_.getTooltipEventType(),W=(T=O.props.active)!==null&&T!==void 0?T:M,G=_.props.layout,Y=O.key||"_recharts-cursor";return Q.createElement(coe,{key:Y,activeCoordinate:D,activePayload:A,activeTooltipIndex:L,chartName:r,element:O,isActive:W,layout:G,offset:F,tooltipAxisBandSize:Z,tooltipEventType:ae})}),ze(_,"renderPolarAxis",function(O,T,R){var M=Ln(O,"type.axisType"),D=Ln(_.state,"".concat(M,"Map")),A=O.type.defaultProps,F=A!==void 0?pe(pe({},A),O.props):O.props,L=D&&D[F["".concat(M,"Id")]];return V.cloneElement(O,pe(pe({},L),{},{className:at(M,L.className),key:O.key||"".concat(T,"-").concat(R),ticks:Oi(L,!0)}))}),ze(_,"renderPolarGrid",function(O){var T=O.props,R=T.radialLines,M=T.polarAngles,D=T.polarRadius,A=_.state,F=A.radiusAxisMap,L=A.angleAxisMap,Z=Ts(F),ae=Ts(L),W=ae.cx,G=ae.cy,Y=ae.innerRadius,te=ae.outerRadius;return V.cloneElement(O,{polarAngles:Array.isArray(M)?M:Oi(ae,!0).map(function(ne){return ne.coordinate}),polarRadius:Array.isArray(D)?D:Oi(Z,!0).map(function(ne){return ne.coordinate}),cx:W,cy:G,innerRadius:Y,outerRadius:te,key:O.key||"polar-grid",radialLines:R})}),ze(_,"renderLegend",function(){var O=_.state.formattedGraphicalItems,T=_.props,R=T.children,M=T.width,D=T.height,A=_.props.margin||{},F=M-(A.left||0)-(A.right||0),L=hL({children:R,formattedGraphicalItems:O,legendWidth:F,legendContent:h});if(!L)return null;var Z=L.item,ae=iD(L,uoe);return V.cloneElement(Z,pe(pe({},ae),{},{chartWidth:M,chartHeight:D,margin:A,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),ze(_,"renderTooltip",function(){var O,T=_.props,R=T.children,M=T.accessibilityLayer,D=In(R,_a);if(!D)return null;var A=_.state,F=A.isTooltipActive,L=A.activeCoordinate,Z=A.activePayload,ae=A.activeLabel,W=A.offset,G=(O=D.props.active)!==null&&O!==void 0?O:F;return V.cloneElement(D,{viewBox:pe(pe({},W),{},{x:W.left,y:W.top}),active:G,label:ae,payload:G?Z:[],coordinate:L,accessibilityLayer:M})}),ze(_,"renderBrush",function(O){var T=_.props,R=T.margin,M=T.data,D=_.state,A=D.offset,F=D.dataStartIndex,L=D.dataEndIndex,Z=D.updateId;return V.cloneElement(O,{key:O.key||"_recharts-brush",onChange:Im(_.handleBrushChange,O.props.onChange),data:M,x:Ee(O.props.x)?O.props.x:A.left,y:Ee(O.props.y)?O.props.y:A.top+A.height+A.brushBottom-(R.bottom||0),width:Ee(O.props.width)?O.props.width:A.width,startIndex:F,endIndex:L,updateId:"brush-".concat(Z)})}),ze(_,"renderReferenceElement",function(O,T,R){if(!O)return null;var M=_,D=M.clipPathId,A=_.state,F=A.xAxisMap,L=A.yAxisMap,Z=A.offset,ae=O.type.defaultProps||{},W=O.props,G=W.xAxisId,Y=G===void 0?ae.xAxisId:G,te=W.yAxisId,ne=te===void 0?ae.yAxisId:te;return V.cloneElement(O,{key:O.key||"".concat(T,"-").concat(R),xAxis:F[Y],yAxis:L[ne],viewBox:{x:Z.left,y:Z.top,width:Z.width,height:Z.height},clipPathId:D})}),ze(_,"renderActivePoints",function(O){var T=O.item,R=O.activePoint,M=O.basePoint,D=O.childIndex,A=O.isRange,F=[],L=T.props.key,Z=T.item.type.defaultProps!==void 0?pe(pe({},T.item.type.defaultProps),T.item.props):T.item.props,ae=Z.activeDot,W=Z.dataKey,G=pe(pe({index:D,dataKey:W,cx:R.x,cy:R.y,r:4,fill:fN(T.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},He(ae,!1)),yp(ae));return F.push(N.renderActiveDot(ae,G,"".concat(L,"-activePoint-").concat(D))),M?F.push(N.renderActiveDot(ae,pe(pe({},G),{},{cx:M.x,cy:M.y}),"".concat(L,"-basePoint-").concat(D))):A&&F.push(null),F}),ze(_,"renderGraphicChild",function(O,T,R){var M=_.filterFormatItem(O,T,R);if(!M)return null;var D=_.getTooltipEventType(),A=_.state,F=A.isTooltipActive,L=A.tooltipAxis,Z=A.activeTooltipIndex,ae=A.activeLabel,W=_.props.children,G=In(W,_a),Y=M.props,te=Y.points,ne=Y.isRange,z=Y.baseLine,ee=M.item.type.defaultProps!==void 0?pe(pe({},M.item.type.defaultProps),M.item.props):M.item.props,J=ee.activeDot,le=ee.hide,fe=ee.activeBar,be=ee.activeShape,me=!!(!le&&F&&G&&(J||fe||be)),xe={};D!=="axis"&&G&&G.props.trigger==="click"?xe={onClick:Im(_.handleItemMouseEnter,O.props.onClick)}:D!=="axis"&&(xe={onMouseLeave:Im(_.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:Im(_.handleItemMouseEnter,O.props.onMouseEnter)});var q=V.cloneElement(O,pe(pe({},M.props),xe));function he(rt){return typeof L.dataKey=="function"?L.dataKey(rt.payload):null}if(me)if(Z>=0){var ge,ce;if(L.dataKey&&!L.allowDuplicatedCategory){var Ne=typeof L.dataKey=="function"?he:"payload.".concat(L.dataKey.toString());ge=Hk(te,Ne,ae),ce=ne&&z&&Hk(z,Ne,ae)}else ge=te?.[Z],ce=ne&&z&&z[Z];if(be||fe){var Ae=O.props.activeIndex!==void 0?O.props.activeIndex:Z;return[V.cloneElement(O,pe(pe(pe({},M.props),xe),{},{activeIndex:Ae})),null,null]}if(!st(ge))return[q].concat(Yc(_.renderActivePoints({item:M,activePoint:ge,basePoint:ce,childIndex:Z,isRange:ne})))}else{var et,tt=(et=_.getItemByXY(_.state.activeCoordinate))!==null&&et!==void 0?et:{graphicalItem:q},St=tt.graphicalItem,ar=St.item,ut=ar===void 0?O:ar,ye=St.childIndex,Pe=pe(pe(pe({},M.props),xe),{},{activeIndex:ye});return[V.cloneElement(ut,Pe),null,null]}return ne?[q,null,null]:[q,null]}),ze(_,"renderCustomized",function(O,T,R){return V.cloneElement(O,pe(pe({key:"recharts-customized-".concat(R)},_.props),_.state))}),ze(_,"renderMap",{CartesianGrid:{handler:Lm,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:Lm},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:Lm},YAxis:{handler:Lm},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((E=S.id)!==null&&E!==void 0?E:Hh("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=u3(_.triggeredAfterMouseMove,(P=S.throttleDelay)!==null&&P!==void 0?P:1e3/60),_.state={},_}return koe(N,b),xoe(N,[{key:"componentDidMount",value:function(){var E,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,P=E.children,_=E.data,O=E.height,T=E.layout,R=In(P,_a);if(R){var M=R.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,A=dj(this.state,_,M,D),F=this.state.tooltipTicks[M].coordinate,L=(this.state.offset.top+O)/2,Z=T==="horizontal",ae=Z?{x:F,y:L}:{y:F,x:L},W=this.state.formattedGraphicalItems.find(function(Y){var te=Y.item;return te.type.name==="Scatter"});W&&(ae=pe(pe({},ae),W.props.points[M].tooltipPosition),A=W.props.points[M].tooltipPayload);var G={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:D,activePayload:A,activeCoordinate:ae};this.setState(G),this.renderCursor(R),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var _,O;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(E){Kk([In(E.children,_a)],[In(this.props.children,_a)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=In(this.props.children,_a);if(E&&typeof E.props.shared=="boolean"){var P=E.props.shared?"axis":"item";return c.indexOf(P)>=0?P:s}return s}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var P=this.container,_=P.getBoundingClientRect(),O=oQ(_),T={chartX:Math.round(E.pageX-O.left),chartY:Math.round(E.pageY-O.top)},R=_.width/P.offsetWidth||1,M=this.inRange(T.chartX,T.chartY,R);if(!M)return null;var D=this.state,A=D.xAxisMap,F=D.yAxisMap,L=this.getTooltipEventType(),Z=oD(this.state,this.props.data,this.props.layout,M);if(L!=="axis"&&A&&F){var ae=Ts(A).scale,W=Ts(F).scale,G=ae&&ae.invert?ae.invert(T.chartX):null,Y=W&&W.invert?W.invert(T.chartY):null;return pe(pe({},T),{},{xValue:G,yValue:Y},Z)}return Z?pe(pe({},T),Z):null}},{key:"inRange",value:function(E,P){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,T=E/_,R=P/_;if(O==="horizontal"||O==="vertical"){var M=this.state.offset,D=T>=M.left&&T<=M.left+M.width&&R>=M.top&&R<=M.top+M.height;return D?{x:T,y:R}:null}var A=this.state,F=A.angleAxisMap,L=A.radiusAxisMap;if(F&&L){var Z=Ts(F);return hO({x:T,y:R},Z)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,P=this.getTooltipEventType(),_=In(E,_a),O={};_&&P==="axis"&&(_.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=yp(this.props,this.handleOuterEvent);return pe(pe({},T),O)}},{key:"addListener",value:function(){mk.on(pk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){mk.removeListener(pk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,P,_){for(var O=this.state.formattedGraphicalItems,T=0,R=O.length;T<R;T++){var M=O[T];if(M.item===E||M.props.key===E.key||P===Mi(M.item.type)&&_===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,P=this.state.offset,_=P.left,O=P.top,T=P.height,R=P.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:E},Q.createElement("rect",{x:_,y:O,height:T,width:R})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(P,_){var O=aD(_,2),T=O[0],R=O[1];return pe(pe({},P),{},ze({},T,R.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(P,_){var O=aD(_,2),T=O[0],R=O[1];return pe(pe({},P),{},ze({},T,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(E){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(E){var P=this.state,_=P.formattedGraphicalItems,O=P.activeItem;if(_&&_.length)for(var T=0,R=_.length;T<R;T++){var M=_[T],D=M.props,A=M.item,F=A.type.defaultProps!==void 0?pe(pe({},A.type.defaultProps),A.props):A.props,L=Mi(A.type);if(L==="Bar"){var Z=(D.data||[]).find(function(Y){return jre(E,Y)});if(Z)return{graphicalItem:M,payload:Z}}else if(L==="RadialBar"){var ae=(D.data||[]).find(function(Y){return hO(E,Y)});if(ae)return{graphicalItem:M,payload:ae}}else if(fg(M,O)||mg(M,O)||xh(M,O)){var W=Gne({graphicalItem:M,activeTooltipItem:O,itemData:F.data}),G=F.activeIndex===void 0?W:F.activeIndex;return{graphicalItem:pe(pe({},M),{},{childIndex:G}),payload:xh(M,O)?F.data[W]:M.props.data[W]}}}return null}},{key:"render",value:function(){var E=this;if(!j2(this))return null;var P=this.props,_=P.children,O=P.className,T=P.width,R=P.height,M=P.style,D=P.compact,A=P.title,F=P.desc,L=iD(P,doe),Z=He(L,!1);if(D)return Q.createElement(BR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(Yk,lc({},Z,{width:T,height:R,title:A,desc:F}),this.renderClipPath(),S2(_,this.renderMap)));if(this.props.accessibilityLayer){var ae,W;Z.tabIndex=(ae=this.props.tabIndex)!==null&&ae!==void 0?ae:0,Z.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Z.onKeyDown=function(Y){E.accessibilityManager.keyboardEvent(Y)},Z.onFocus=function(){E.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Q.createElement(BR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",lc({className:at("recharts-wrapper",O),style:pe({position:"relative",cursor:"default",width:T,height:R},M)},G,{ref:function(te){E.container=te}}),Q.createElement(Yk,lc({},Z,{width:T,height:R,title:A,desc:F,style:Toe}),this.renderClipPath(),S2(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(V.Component);ze(w,"displayName",r),ze(w,"defaultProps",pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),ze(w,"getDerivedStateFromProps",function(b,N){var S=b.dataKey,E=b.data,P=b.children,_=b.width,O=b.height,T=b.layout,R=b.stackOffset,M=b.margin,D=N.dataStartIndex,A=N.dataEndIndex;if(N.updateId===void 0){var F=lD(b);return pe(pe(pe({},F),{},{updateId:0},v(pe(pe({props:b},F),{},{updateId:0}),N)),{},{prevDataKey:S,prevData:E,prevWidth:_,prevHeight:O,prevLayout:T,prevStackOffset:R,prevMargin:M,prevChildren:P})}if(S!==N.prevDataKey||E!==N.prevData||_!==N.prevWidth||O!==N.prevHeight||T!==N.prevLayout||R!==N.prevStackOffset||!gc(M,N.prevMargin)){var L=lD(b),Z={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},ae=pe(pe({},oD(N,E,T)),{},{updateId:N.updateId+1}),W=pe(pe(pe({},L),Z),ae);return pe(pe(pe({},W),v(pe({props:b},W),N)),{},{prevDataKey:S,prevData:E,prevWidth:_,prevHeight:O,prevLayout:T,prevStackOffset:R,prevMargin:M,prevChildren:P})}if(!Kk(P,N.prevChildren)){var G,Y,te,ne,z=In(P,Uc),ee=z&&(G=(Y=z.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&G!==void 0?G:D,J=z&&(te=(ne=z.props)===null||ne===void 0?void 0:ne.endIndex)!==null&&te!==void 0?te:A,le=ee!==D||J!==A,fe=!st(E),be=fe&&!le?N.updateId:N.updateId+1;return pe(pe({updateId:be},v(pe(pe({props:b},N),{},{updateId:be,dataStartIndex:ee,dataEndIndex:J}),N)),{},{prevChildren:P,dataStartIndex:ee,dataEndIndex:J})}return null}),ze(w,"renderActiveDot",function(b,N,S){var E;return V.isValidElement(b)?E=V.cloneElement(b,N):Ke(b)?E=b(N):E=Q.createElement(gN,N),Q.createElement(kt,{className:"recharts-active-dot",key:S},E)});var k=V.forwardRef(function(N,S){return Q.createElement(w,lc({},N,{ref:S}))});return k.displayName=w.displayName,k},$oe=A5({chartName:"BarChart",GraphicalChild:Us,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:bg},{axisType:"yAxis",AxisComp:wg}],formatAxisMap:Yae}),Foe=A5({chartName:"PieChart",GraphicalChild:Yi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:hg},{axisType:"radiusAxis",AxisComp:ug}],formatAxisMap:FZ,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const SN=t=>t&&typeof t=="number"?new Date(Math.round((t-25569)*86400*1e3)):null,C5=t=>t?t.getTime()/864e5+25569:null,_g=t=>{const e=SN(t);return e?e.toISOString().split("T")[0]:""},EN=t=>{if(!t)return null;const e=new Date(Date.UTC(...t.split("-").map((r,n)=>n===1?parseInt(r)-1:parseInt(r))));return C5(e)},TN=t=>{const e=SN(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},uD=t=>{if(!t)return"";const[e,r]=t.split(":"),n=parseInt(e,10),a=n>=12?"PM":"AM";return`${(n+11)%12+1}:${r} ${a}`},Voe=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",Ye=t=>t==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),dD={priority:{emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500",default:"bg-gray-100 text-gray-800 border-gray-500"},status:{completed:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800",open:"bg-yellow-100 text-yellow-800","in progress":"bg-purple-100 text-purple-800","on hold":"bg-pink-100 text-pink-800",cancelled:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},customerType:{"national account":"bg-blue-100 text-blue-800",commercial:"bg-purple-100 text-purple-800",residential:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",default:"bg-gray-100 text-gray-800"},techStatus:{available:"bg-green-100 text-green-800","on site":"bg-blue-100 text-blue-800","en route":"bg-yellow-100 text-yellow-800","on break":"bg-gray-100 text-gray-800","on call":"bg-teal-100 text-teal-800","day off":"bg-slate-200 text-slate-800",default:"bg-gray-100 text-gray-800"}},Uoe=(t,e)=>{const r=dD[t];return r?r[e?.toLowerCase()]||r.default:dD.status.default},Boe={"single-member-llc":20,"s-corp":20,"c-corp":21,partnership:20},qoe=({workOrders:t,bills:e,weeklyCosts:r,taxPayments:n,openModal:a,handleDelete:s})=>{if(!t||!e||!r||!n)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Tax Estimation"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-4",children:"Loading tax data..."})]});const[o,c]=V.useState(20),[d,h]=V.useState("single-member-llc"),[m,p]=V.useState("quarterly"),[y,v]=V.useState(!1);V.useEffect(()=>{c(Boe[d])},[d]);const w=V.useMemo(()=>{const E=new Date;let P,_;switch(m){case"weekly":P=new Date(E.setDate(E.getDate()-E.getDay())),_=new Date(E.setDate(E.getDate()-E.getDay()+6));break;case"monthly":P=new Date(E.getFullYear(),E.getMonth(),1),_=new Date(E.getFullYear(),E.getMonth()+1,0);break;case"quarterly":const O=Math.floor(E.getMonth()/3);P=new Date(E.getFullYear(),O*3,1),_=new Date(E.getFullYear(),O*3+3,0);break;case"yearly":P=new Date(E.getFullYear(),0,1),_=new Date(E.getFullYear(),11,31);break;default:P=new Date,_=new Date}return{start:P,end:_}},[m]),k=V.useMemo(()=>{const E=(t||[]).filter(F=>{if(F["Order Status"]!=="Completed"||!F["Completed Date"])return!1;const L=new Date(TN(F["Completed Date"]));return L>=w.start&&L<=w.end}),P=(e||[]).reduce((F,L)=>F+L.amount,0)+(r||[]).reduce((F,L)=>F+L.amount,0)*4.33,_=(w.end-w.start)/(1e3*60*60*24*30.44),O=P*_,T=E.reduce((F,L)=>F+(L.NTE||0),0),R=E.reduce((F,L)=>L.lineItems&&Array.isArray(L.lineItems)?F+L.lineItems.reduce((Z,ae)=>Z+(ae.amount||0),0):F,0),M=T-R,D=M-O,A=D>0?D*(o/100):0;return{netProfit:D,estimatedTax:A,grossProfit:M,periodOperatingExpenses:O}},[t,e,r,o,w]),b=V.useMemo(()=>(n||[]).filter(E=>{if(!E.date)return!1;const P=new Date(E.date);return P>=w.start&&P<=w.end}).reduce((E,P)=>E+(P.amount||0),0),[n,w]),N=k.estimatedTax-b,S=[{name:"Tax Liability","Estimated Tax":k.estimatedTax,"Taxes Paid":b}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Tax Estimation"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filingStatus",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filing Status"}),i.jsxs("select",{id:"filingStatus",value:d,onChange:E=>h(E.target.value),className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-slate-800 dark:text-white",children:[i.jsx("option",{value:"single-member-llc",children:"Single-Member LLC"}),i.jsx("option",{value:"s-corp",children:"S-Corporation"}),i.jsx("option",{value:"c-corp",children:"C-Corporation"}),i.jsx("option",{value:"partnership",children:"Partnership"})]}),(d==="llc"||d==="single-member-llc")&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"LLC tax rates vary. Consult a tax professional."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estimated Tax Rate (%)"}),i.jsx("input",{id:"taxRate",type:"number",value:o,onChange:E=>c(parseFloat(E.target.value)||0),className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-slate-800 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estimation Period"}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:[i.jsx("button",{onClick:()=>p("weekly"),className:`w-full px-2 py-1 text-xs rounded ${m==="weekly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Weekly"}),i.jsx("button",{onClick:()=>p("monthly"),className:`w-full px-2 py-1 text-xs rounded ${m==="monthly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),i.jsx("button",{onClick:()=>p("quarterly"),className:`w-full px-2 py-1 text-xs rounded ${m==="quarterly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Quarterly"}),i.jsx("button",{onClick:()=>p("yearly"),className:`w-full px-2 py-1 text-xs rounded ${m==="yearly"?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx(Ao,{title:`Estimated ${m} Net Profit`,value:`$${k.netProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Tr,{}),color:"blue"}),i.jsx(Ao,{title:"Estimated Tax Liability",value:`$${k.estimatedTax.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Tr,{}),color:"orange",subtext:k.netProfit<=0?"No tax on negative profit":""}),i.jsx(Ao,{title:"Overpayment / (Underpayment)",value:`${N<0?"":"-"}$${Math.abs(N).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i.jsx(Tr,{}),color:N>=0?"green":"red",subtext:N>=0?"You have overpaid":"Remaining balance due"})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("button",{onClick:()=>v(!y),className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 hover:underline",children:["Show Calculation Breakdown ",i.jsx(Fd,{className:`transition-transform ${y?"rotate-180":""}`,size:16})]}),y&&i.jsxs("div",{className:"mt-2 p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-sm space-y-2 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Gross Profit (from Jobs):"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.grossProfit.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"- Est. Operating Expenses:"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.periodOperatingExpenses.toFixed(2)]})]}),i.jsx("hr",{className:"border-slate-300 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"= Estimated Net Profit:"})," ",i.jsxs("span",{className:"font-mono",children:["$",k.netProfit.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["x Tax Rate (",o,"%):"]})," ",i.jsxs("span",{className:"font-mono",children:["$",k.estimatedTax.toFixed(2)]})]})]})]}),k.netProfit<=0&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/50 border border-blue-400 dark:border-blue-700 text-blue-800 dark:text-blue-200 rounded-lg flex items-center gap-3",children:[i.jsx(s6,{size:20}),i.jsx("p",{className:"text-sm",children:"Your estimated tax is $0.00 because your estimated net profit is negative. The tax rate will apply once your profit is positive."})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Liability vs. Payments"}),i.jsx(d3,{width:"100%",height:200,children:i.jsxs($oe,{data:S,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[i.jsx(p5,{strokeDasharray:"3 3"}),i.jsx(bg,{type:"number"}),i.jsx(wg,{type:"category",dataKey:"name",hide:!0}),i.jsx(_a,{formatter:E=>`$${E.toLocaleString()}`}),i.jsx(Lo,{}),i.jsx(Us,{dataKey:"Estimated Tax",fill:"#f97316"}),i.jsx(Us,{dataKey:"Taxes Paid",fill:"#16a34a"})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Recorded Tax Payments"}),i.jsxs("button",{onClick:()=>a("taxPayment"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(aa,{size:16})," Record Payment"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Date"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-right",children:"Amount"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:(n||[]).map(E=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50",children:[i.jsx("td",{className:"p-3 font-medium",children:E.date}),i.jsx("td",{className:"p-3",children:E.notes}),i.jsxs("td",{className:"p-3 text-right font-mono",children:["$",(E.amount||0).toFixed(2)]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("button",{onClick:()=>a("taxPayment",E),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 mr-2",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>s("taxPayment",E.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500",children:i.jsx(Jt,{size:16})})]})]},E.id))})]})})]})]})},zoe=({workOrders:t,tasks:e,technicians:r,openModal:n})=>{const[a,s]=V.useState(new Date),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=new Date(a.getFullYear(),a.getMonth(),1),h=new Date(a.getFullYear(),a.getMonth()+1,0),m=d.getDay(),p=h.getDate(),y=[];for(let N=0;N<m;N++)y.push(null);for(let N=1;N<=p;N++)y.push(new Date(a.getFullYear(),a.getMonth(),N));const v=V.useMemo(()=>{const N={};return(t||[]).forEach(S=>{if(S["Schedule Date"]){const E=_g(S["Schedule Date"]);N[E]||(N[E]=[]),N[E].push({...S,type:"job"})}}),(e||[]).forEach(S=>{if(S.date){const E=new Date(S.date).toISOString().split("T")[0];N[E]||(N[E]=[]),N[E].push({...S,type:"task"})}}),(r||[]).forEach(S=>{if(S.status==="Day Off"&&S.dayOffDate){const E=new Date(S.dayOffDate).toISOString().split("T")[0];N[E]||(N[E]=[]),N[E].push({id:`off-${S.id}`,name:`${S.name} - Day Off`,type:"time-off"})}}),N},[t,e,r]),w=()=>{s(new Date(a.getFullYear(),a.getMonth()-1,1))},k=()=>{s(new Date(a.getFullYear(),a.getMonth()+1,1))};if(!t||!e||!r)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 text-center",children:"Loading calendar events..."});const b=N=>{switch(N){case"job":return"bg-cyan-100 dark:bg-cyan-900/50 text-cyan-800 dark:text-cyan-200";case"task":return"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-200";case"time-off":return"bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(n6,{})}),i.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:[c[a.getMonth()]," ",a.getFullYear()]}),i.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(a6,{})})]}),i.jsx("div",{className:"flex justify-end gap-2 mb-4",children:i.jsxs("button",{onClick:()=>n("task"),className:"flex items-center gap-2 text-sm bg-amber-500 hover:bg-amber-400 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(aa,{size:16})," Add Task"]})}),i.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[o.map(N=>i.jsx("div",{className:"font-bold text-sm text-slate-500 dark:text-slate-400 py-2",children:N},N)),y.map((N,S)=>{const E=N?N.toISOString().split("T")[0]:"";return i.jsxs("div",{className:`h-32 border border-slate-200 dark:border-slate-700 rounded-md p-1 overflow-y-auto ${N?"cursor-pointer":"bg-slate-50 dark:bg-slate-800/50"}`,onClick:()=>N&&n("task",{date:E}),children:[N&&i.jsx("span",{className:"text-xs font-semibold text-gray-800 dark:text-white",children:N.getDate()}),(N&&v[E]||[]).map(P=>i.jsxs("div",{onClick:_=>{_.stopPropagation(),P.type!=="time-off"&&n(P.type,P)},className:`text-xs rounded p-1 mt-1 hover:opacity-80 ${b(P.type)}`,children:[P.type==="time-off"&&i.jsx(xz,{size:12,className:"inline mr-1"}),P.name||P.title||P.Company]},P.id))]},S)})]})]})},Woe=({item:t=null,type:e,onSave:r,onClose:n,debts:a=[],clients:s=[],vehicles:o=[]})=>{const[c,d]=V.useState({}),[h,m]=V.useState(null);V.useEffect(()=>{if(t)d(t);else{const b=p(e);d(b)}},[t,e]);const p=b=>({bill:{name:"",amount:"",dueDay:1,category:"Utilities",isAutoPay:!1,isRecurring:!1,notes:""},debt:{name:"",creditor:"",debtType:"Credit Card",totalAmount:"",paidAmount:0,interestRate:"",minimumPayment:"",dueDate:"",notes:""},income:{name:"",amount:"",type:"monthly",status:"active",isRecurring:!0,notes:""},weekly:{name:"",amount:"",category:"Other",notes:""},job:{name:"",revenue:"",materialCost:"",laborCost:"",date:new Date().toISOString().split("T")[0],notes:"",clientId:""},task:{title:"",date:new Date().toISOString().split("T")[0],notes:"",isComplete:!1},invoice:{invoiceNumber:"",jobNumber:"",customer:"",billTo:"",grandTotal:"",totalCost:"",netTerms:"Net 30",transactionDate:new Date().toISOString().split("T")[0],dueDate:"",paymentDate:"",completedOn:"",invoiceStatus:"Open",priority:"STD",terms:"Limited Warranty",description:"",serviceAddress:"",locationType:"Commercial",jobType:"Service Call",lineItems:"",payments:"",company:"Mechanical Temp",division:"HVAC & Refrigeration",status:"Unpaid",net:"",invNum:"",jobNo:"",daysElapsed:0,notes:""},taxPayment:{date:new Date().toISOString().split("T")[0],amount:"",notes:""},goal:{name:"",type:"revenue",targetValue:"",deadline:new Date().toISOString().split("T")[0]},client:{name:"",address:"",phone:"",email:"",parentId:"",isParent:!1,companyType:"regular",notes:""},inventory:{name:"",quantity:"",cost:"",notes:""},vehicle:{name:"",make:"",model:"",year:new Date().getFullYear().toString(),vin:"",licensePlate:"",currentMileage:"",status:"active",color:"",registrationExpiry:"",insuranceExpiry:"",lastServiceMileage:"",nextServiceDue:"",notes:""},maintenanceLog:{vehicleId:"",date:new Date().toISOString().split("T")[0],type:"Oil Change",cost:"",mileage:"",notes:"",nextServiceMileage:""}})[b]||{},y=b=>{const{name:N,value:S,type:E,checked:P}=b.target;d(_=>({..._,[N]:E==="checkbox"?P:S}))},v=b=>{if(b.preventDefault(),!c.name&&!c.title&&!c.billTo&&!c.customer){alert("Please fill in the required fields.");return}const N={...c};if(({bill:["amount","dueDay"],debt:["totalAmount","paidAmount","interestRate","minimumPayment"],income:["amount"],weekly:["amount"],job:["revenue","materialCost","laborCost"],invoice:["grandTotal","totalCost","net","daysElapsed"],taxPayment:["amount"],goal:["targetValue"],inventory:["quantity","cost"],vehicle:["currentMileage","year","lastServiceMileage"],maintenanceLog:["cost","mileage","nextServiceMileage"]}[e]||[]).forEach(P=>{N[P]!==void 0&&N[P]!==""&&(N[P]=parseFloat(N[P])||0)}),e==="client"){if(N.isParent&&N.parentId){alert('A parent company cannot have a parent company. Please uncheck "Is Parent Company" or remove the parent selection.');return}N.isParent?(N.companyType="parent",N.parentId=null):N.parentId?N.companyType="child":N.companyType="regular"}if(e==="invoice"){if(N.invoiceNumber||(N.invoiceNumber=`INV-${Date.now().toString().slice(-6)}`),N.transactionDate&&N.netTerms&&!N.dueDate){const P=new Date(N.transactionDate);let _=30;N.netTerms.includes("45")?_=45:N.netTerms.includes("15")?_=15:N.netTerms.includes("Due on Receipt")&&(_=0);const O=new Date(P);O.setDate(O.getDate()+_),N.dueDate=O.toISOString().split("T")[0]}N.status=N.invoiceStatus==="Paid"?"Paid":"Unpaid",N.net=N.grandTotal,N.invNum=N.invoiceNumber,N.jobNo=N.jobNumber,!N.grandTotal&&N.net&&(N.grandTotal=N.net)}r(N,h)},w=s.filter(b=>(b.isParent||b.companyType==="parent")&&(!t||b.id!==t.id)),k=()=>{switch(e){case"bill":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bill Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"amount",value:c.amount||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Due Day"}),i.jsx("input",{type:"number",min:"1",max:"31",name:"dueDay",value:c.dueDay||1,onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),i.jsxs("select",{name:"category",value:c.category||"Utilities",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Utilities",children:"Utilities"}),i.jsx("option",{value:"Insurance",children:"Insurance"}),i.jsx("option",{value:"Vehicle",children:"Vehicle"}),i.jsx("option",{value:"Software",children:"Software"}),i.jsx("option",{value:"Overhead",children:"Overhead"}),i.jsx("option",{value:"Equipment",children:"Equipment"}),i.jsx("option",{value:"Marketing",children:"Marketing"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isAutoPay",checked:c.isAutoPay||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Auto Pay"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isRecurring",checked:c.isRecurring||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Recurring"})]})]})]});case"debt":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Debt Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Chase Credit Card, Car Loan",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Creditor/Lender"}),i.jsx("input",{type:"text",name:"creditor",value:c.creditor||"",onChange:y,placeholder:"e.g., Chase Bank, Toyota Financial",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Debt Type"}),i.jsxs("select",{name:"debtType",value:c.debtType||"Credit Card",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Credit Card",children:"Credit Card"}),i.jsx("option",{value:"Personal Loan",children:"Personal Loan"}),i.jsx("option",{value:"Auto Loan",children:"Auto Loan"}),i.jsx("option",{value:"Mortgage",children:"Mortgage"}),i.jsx("option",{value:"Student Loan",children:"Student Loan"}),i.jsx("option",{value:"Business Loan",children:"Business Loan"}),i.jsx("option",{value:"Medical Debt",children:"Medical Debt"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Total Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"totalAmount",value:c.totalAmount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount Paid"}),i.jsx("input",{type:"number",step:"0.01",name:"paidAmount",value:c.paidAmount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Interest Rate (%) *"}),i.jsx("input",{type:"number",step:"0.01",name:"interestRate",value:c.interestRate||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Minimum Payment"}),i.jsx("input",{type:"number",step:"0.01",name:"minimumPayment",value:c.minimumPayment||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payment Due Date"}),i.jsx("input",{type:"date",name:"dueDate",value:c.dueDate||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),(c.totalAmount||c.paidAmount)&&i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-slate-800 dark:text-white mb-3",children:"Payment Progress"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Remaining Balance:"}),i.jsxs("span",{className:"font-mono font-semibold text-orange-600 dark:text-orange-400",children:["$",((parseFloat(c.totalAmount)||0)-(parseFloat(c.paidAmount)||0)).toFixed(2)]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(c.totalAmount>0?(parseFloat(c.paidAmount)||0)/parseFloat(c.totalAmount)*100:0,100)}%`}})}),i.jsxs("div",{className:"text-center text-xs text-slate-500 dark:text-slate-400",children:[c.totalAmount>0?((parseFloat(c.paidAmount)||0)/parseFloat(c.totalAmount)*100).toFixed(1):0,"% paid off"]})]})]})]});case"income":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Income Source Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Main Business Revenue, Consulting Services",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"amount",value:c.amount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Income Type *"}),i.jsxs("select",{name:"type",value:c.type||"monthly",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"quarterly",children:"Quarterly"}),i.jsx("option",{value:"annually",children:"Annually"}),i.jsx("option",{value:"one-time",children:"One-time"}),i.jsx("option",{value:"project-based",children:"Project-based"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{name:"status",value:c.status||"active",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"paused",children:"Paused"})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isRecurring",checked:c.isRecurring||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Recurring Income"})]})})]}),c.amount&&parseFloat(c.amount)>0&&c.type&&i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Income Projection Analysis"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[c.type||"Monthly",":"]}),i.jsxs("p",{className:"font-mono font-bold text-green-600 dark:text-green-400",children:["$",parseFloat(c.amount).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Monthly:"}),i.jsxs("p",{className:"font-mono font-bold text-blue-600 dark:text-blue-400",children:["$",(()=>{const b=parseFloat(c.amount);switch(c.type){case"weekly":return(b*4.33).toFixed(2);case"quarterly":return(b/3).toFixed(2);case"annually":return(b/12).toFixed(2);case"monthly":default:return b.toFixed(2)}})()]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Annual:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400",children:["$",(()=>{const b=parseFloat(c.amount);let N;switch(c.type){case"weekly":N=b*4.33;break;case"quarterly":N=b/3;break;case"annually":N=b/12;break;case"monthly":default:N=b;break}return(N*12).toLocaleString()})()]})]})]})]})]});case"weekly":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost Item Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Projected Payroll, Fuel & Maintenance",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Weekly Amount *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"amount",value:c.amount||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),i.jsxs("select",{name:"category",value:c.category||"Other",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Payroll",children:"Payroll"}),i.jsx("option",{value:"Fuel & Maintenance",children:"Fuel & Maintenance"}),i.jsx("option",{value:"Equipment Rental",children:"Equipment Rental"}),i.jsx("option",{value:"Utilities",children:"Utilities"}),i.jsx("option",{value:"Insurance",children:"Insurance"}),i.jsx("option",{value:"Marketing",children:"Marketing"}),i.jsx("option",{value:"Office Expenses",children:"Office Expenses"}),i.jsx("option",{value:"Supplies",children:"Supplies"}),i.jsx("option",{value:"Contractors",children:"Contractors"}),i.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.amount&&parseFloat(c.amount)>0&&i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Cost Impact Analysis"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Weekly:"}),i.jsxs("p",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:["$",parseFloat(c.amount).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Monthly:"}),i.jsxs("p",{className:"font-mono font-bold text-orange-600 dark:text-orange-400",children:["$",(parseFloat(c.amount)*4.33).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Annual:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400",children:["$",(parseFloat(c.amount)*52).toLocaleString()]})]})]})]})]});case"vehicle":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"e.g., Jason's Truck, Red Van",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Make *"}),i.jsxs("select",{name:"make",value:c.make||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"",children:"Select Make"}),i.jsx("option",{value:"FORD",children:"Ford"}),i.jsx("option",{value:"CHEVROLET",children:"Chevrolet"}),i.jsx("option",{value:"GMC",children:"GMC"}),i.jsx("option",{value:"TOYOTA",children:"Toyota"}),i.jsx("option",{value:"HONDA",children:"Honda"}),i.jsx("option",{value:"NISSAN",children:"Nissan"}),i.jsx("option",{value:"RAM",children:"Ram"}),i.jsx("option",{value:"DODGE",children:"Dodge"}),i.jsx("option",{value:"JEEP",children:"Jeep"}),i.jsx("option",{value:"HYUNDAI",children:"Hyundai"}),i.jsx("option",{value:"KIA",children:"Kia"}),i.jsx("option",{value:"MAZDA",children:"Mazda"}),i.jsx("option",{value:"SUBARU",children:"Subaru"}),i.jsx("option",{value:"VOLKSWAGEN",children:"Volkswagen"}),i.jsx("option",{value:"BMW",children:"BMW"}),i.jsx("option",{value:"MERCEDES",children:"Mercedes-Benz"}),i.jsx("option",{value:"AUDI",children:"Audi"}),i.jsx("option",{value:"LEXUS",children:"Lexus"}),i.jsx("option",{value:"ACURA",children:"Acura"}),i.jsx("option",{value:"INFINITI",children:"Infiniti"}),i.jsx("option",{value:"CADILLAC",children:"Cadillac"}),i.jsx("option",{value:"LINCOLN",children:"Lincoln"}),i.jsx("option",{value:"BUICK",children:"Buick"}),i.jsx("option",{value:"CHRYSLER",children:"Chrysler"}),i.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Model *"}),i.jsx("input",{type:"text",name:"model",value:c.model||"",onChange:y,placeholder:"e.g., F-150, TRANSIT, SIERRA",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Year *"}),i.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,name:"year",value:c.year||new Date().getFullYear(),onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Color"}),i.jsx("input",{type:"text",name:"color",value:c.color||"",onChange:y,placeholder:"e.g., White, Black, Blue",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{name:"status",value:c.status||"active",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"maintenance",children:"In Maintenance"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"sold",children:"Sold"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"VIN"}),i.jsx("input",{type:"text",name:"vin",value:c.vin||"",onChange:y,placeholder:"17-character VIN",maxLength:"17",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"License Plate"}),i.jsx("input",{type:"text",name:"licensePlate",value:c.licensePlate||"",onChange:y,placeholder:"e.g., DD16326",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage *"}),i.jsx("input",{type:"number",min:"0",name:"currentMileage",value:c.currentMileage||"",onChange:y,placeholder:"e.g., 104071",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Last Service Mileage"}),i.jsx("input",{type:"number",min:"0",name:"lastServiceMileage",value:c.lastServiceMileage||"",onChange:y,placeholder:"e.g., 98000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Registration Expiry"}),i.jsx("input",{type:"date",name:"registrationExpiry",value:c.registrationExpiry||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Insurance Expiry"}),i.jsx("input",{type:"date",name:"insuranceExpiry",value:c.insuranceExpiry||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Due"}),i.jsx("input",{type:"date",name:"nextServiceDue",value:c.nextServiceDue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),(c.name||c.make||c.model)&&i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"🚗 Vehicle Preview"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:c.name||"Unnamed Vehicle"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[c.year," ",c.make," ",c.model,c.color&&` (${c.color})`]}),c.licensePlate&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Plate: ",c.licensePlate]}),c.currentMileage&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Mileage: ",parseInt(c.currentMileage).toLocaleString()," miles"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Status: ",i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs ${c.status==="active"?"bg-green-100 text-green-800":c.status==="maintenance"?"bg-yellow-100 text-yellow-800":c.status==="inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:c.status||"active"})]})]})]})]});case"client":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",name:"phone",value:c.phone||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:c.email||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),i.jsx("textarea",{name:"address",value:c.address||"",onChange:y,rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(mc,{size:16}),"Company Structure & Hierarchy"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",id:"isParent",name:"isParent",checked:c.isParent||!1,onChange:y,className:"mt-1 w-4 h-4 text-blue-600 bg-white dark:bg-slate-600 border-slate-300 dark:border-slate-500 rounded focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"isParent",className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Mo,{size:14}),"This is a parent company"]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Check this if this company has multiple locations or subsidiaries"})]})]}),!c.isParent&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Parent Company (Optional)"}),i.jsxs("select",{name:"parentId",value:c.parentId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- Independent Company --"}),w.map(b=>i.jsx("option",{value:b.id,children:b.name},b.id))]}),w.length===0&&i.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"No parent companies available. Create a parent company first if needed."})]}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded border",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(s6,{size:12,className:"mt-0.5 flex-shrink-0"}),i.jsx("div",{children:c.isParent?i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Parent Company Benefits:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:"• Can have multiple child locations/subsidiaries"}),i.jsx("li",{children:"• Appears in hierarchy view with all child companies"}),i.jsx("li",{children:"• Useful for corporate clients with multiple locations"})]})]}):c.parentId?i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"Child Company Setup:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:"• This location will be grouped under the parent company"}),i.jsx("li",{children:"• Jobs and invoices can be tracked separately"}),i.jsx("li",{children:"• Parent company can see consolidated reports"})]})]}):i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Independent Company:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:"• Standalone client with no parent/child relationships"}),i.jsx("li",{children:"• Can be converted to parent company later if needed"}),i.jsx("li",{children:"• Most common setup for individual businesses"})]})]})})]})}),(c.isParent||c.parentId)&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border border-slate-200 dark:border-slate-600",children:[i.jsx("h5",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hierarchy Preview:"}),c.isParent?i.jsxs("div",{className:"text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium",children:[i.jsx(mc,{size:12}),c.name||"New Parent Company"]}),i.jsx("div",{className:"ml-4 mt-1 text-slate-500 dark:text-slate-400",children:"└── Child companies can be added later"})]}):c.parentId&&i.jsxs("div",{className:"text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium",children:[i.jsx(mc,{size:12}),w.find(b=>b.id===c.parentId)?.name||"Parent Company"]}),i.jsxs("div",{className:"ml-4 mt-1 text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx("span",{children:"└──"}),i.jsx(Mo,{size:10}),c.name||"New Child Location"]})]})]})]})]})]});case"job":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Revenue *"}),i.jsx("input",{type:"number",step:"0.01",name:"revenue",value:c.revenue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Material Cost"}),i.jsx("input",{type:"number",step:"0.01",name:"materialCost",value:c.materialCost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Labor Cost"}),i.jsx("input",{type:"number",step:"0.01",name:"laborCost",value:c.laborCost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Date"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client"}),i.jsxs("select",{name:"clientId",value:c.clientId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"Select Client"}),s.map(b=>i.jsx("option",{value:b.id,children:b.name},b.id))]})]})]})]});case"maintenanceLog":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle *"}),i.jsxs("select",{name:"vehicleId",value:c.vehicleId||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"",children:"Select Vehicle"}),o.map(b=>i.jsxs("option",{value:b.id,children:[b.name||"Unnamed"," - ",b.make," ",b.model]},b.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Date *"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Type *"}),i.jsxs("select",{name:"type",value:c.type||"Oil Change",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"Oil Change",children:"Oil Change"}),i.jsx("option",{value:"Tire Rotation",children:"Tire Rotation"}),i.jsx("option",{value:"Brake Service",children:"Brake Service"}),i.jsx("option",{value:"Transmission Service",children:"Transmission Service"}),i.jsx("option",{value:"Engine Repair",children:"Engine Repair"}),i.jsx("option",{value:"Inspection",children:"Inspection"}),i.jsx("option",{value:"A/C Service",children:"A/C Service"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost ($)"}),i.jsx("input",{type:"number",step:"0.01",name:"cost",value:c.cost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage *"}),i.jsx("input",{type:"number",name:"mileage",value:c.mileage||"",onChange:y,placeholder:"Current vehicle mileage",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Mileage"}),i.jsx("input",{type:"number",name:"nextServiceMileage",value:c.nextServiceMileage||"",onChange:y,placeholder:"When next service is due",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]});case"invoice":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"📋 AppSheet Invoice Data"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"This form creates invoices compatible with your AppSheet system (1,091 records)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Invoice Number"}),i.jsx("input",{type:"text",name:"invoiceNumber",value:c.invoiceNumber||"",onChange:y,placeholder:"Auto-generated if empty",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Leave empty to auto-generate (e.g., 12457956)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Number *"}),i.jsx("input",{type:"text",name:"jobNumber",value:c.jobNumber||"",onChange:y,placeholder:"e.g., 6753455-01, 3686529",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Customer *"}),i.jsx("input",{type:"text",name:"customer",value:c.customer||"",onChange:y,placeholder:"e.g., Value City Furniture #175, Rally House #160",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bill To *"}),i.jsx("input",{type:"text",name:"billTo",value:c.billTo||"",onChange:y,placeholder:"e.g., Value City Furniture, Sampler Stores",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Who receives the invoice"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Grand Total *"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"grandTotal",value:c.grandTotal||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Total Cost"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"totalCost",value:c.totalCost||"",onChange:y,placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Labor + material costs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Net Terms"}),i.jsxs("select",{name:"netTerms",value:c.netTerms||"Net 30",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Net 15",children:"Net 15"}),i.jsx("option",{value:"Net 30",children:"Net 30"}),i.jsx("option",{value:"Net 45",children:"Net 45"}),i.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Address *"}),i.jsx("input",{type:"text",name:"serviceAddress",value:c.serviceAddress||"",onChange:y,placeholder:"e.g., 27775 Novi Rd, Novi, MI 48377, USA",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Description *"}),i.jsx("textarea",{name:"description",value:c.description||"",onChange:y,rows:"3",placeholder:"Describe the work performed, issues found, and solutions provided...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Transaction Date *"}),i.jsx("input",{type:"date",name:"transactionDate",value:c.transactionDate||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Completed On"}),i.jsx("input",{type:"date",name:"completedOn",value:c.completedOn||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Invoice Status"}),i.jsxs("select",{name:"invoiceStatus",value:c.invoiceStatus||"Open",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Open",children:"Open"}),i.jsx("option",{value:"Paid",children:"Paid"}),i.jsx("option",{value:"Overdue",children:"Overdue"}),i.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Location Type"}),i.jsxs("select",{name:"locationType",value:c.locationType||"Commercial",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Commercial",children:"Commercial"}),i.jsx("option",{value:"Residential",children:"Residential"}),i.jsx("option",{value:"Industrial",children:"Industrial"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Job Type"}),i.jsxs("select",{name:"jobType",value:c.jobType||"Service Call",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Service Call",children:"Service Call"}),i.jsx("option",{value:"Installation",children:"Installation"}),i.jsx("option",{value:"Maintenance",children:"Maintenance"}),i.jsx("option",{value:"Repair",children:"Repair"}),i.jsx("option",{value:"Emergency",children:"Emergency"})]})]})]}),c.grandTotal&&parseFloat(c.grandTotal)>0&&i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"💰 Invoice Summary"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Invoice Total:"}),i.jsxs("p",{className:"font-mono font-bold text-green-600 dark:text-green-400 text-lg",children:["$",parseFloat(c.grandTotal||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Total Costs:"}),i.jsxs("p",{className:"font-mono font-bold text-blue-600 dark:text-blue-400 text-lg",children:["$",parseFloat(c.totalCost||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Profit Margin:"}),i.jsxs("p",{className:"font-mono font-bold text-purple-600 dark:text-purple-400 text-lg",children:["$",(parseFloat(c.grandTotal||0)-parseFloat(c.totalCost||0)).toFixed(2)]})]})]})]})]});case"inventory":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Item Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity *"}),i.jsx("input",{type:"number",min:"0",name:"quantity",value:c.quantity||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost per Unit"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"cost",value:c.cost||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]})]});case"task":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Task Title *"}),i.jsx("input",{type:"text",name:"title",value:c.title||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Due Date"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"isComplete",checked:c.isComplete||!1,onChange:y,className:"mr-2"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as Complete"})]})})]})]});case"taxPayment":return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payment Date *"}),i.jsx("input",{type:"date",name:"date",value:c.date?c.date.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",name:"amount",value:c.amount||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]})]})});case"goal":return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Name *"}),i.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Type"}),i.jsxs("select",{name:"type",value:c.type||"revenue",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"revenue",children:"Revenue"}),i.jsx("option",{value:"profit",children:"Profit"}),i.jsx("option",{value:"clients",children:"New Clients"}),i.jsx("option",{value:"jobs",children:"Completed Jobs"}),i.jsx("option",{value:"debt",children:"Debt Payoff"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Value *"}),i.jsx("input",{type:"number",step:"0.01",name:"targetValue",value:c.targetValue||"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Date"}),i.jsx("input",{type:"date",name:"deadline",value:c.deadline?c.deadline.split("T")[0]:"",onChange:y,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]})]});default:return i.jsxs("div",{children:["Form not implemented for type: ",e]})}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:t?`Edit ${e}`:`Add New ${e}`}),i.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx(si,{size:24})})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[i.jsxs("div",{className:"space-y-4",children:[k(),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{name:"notes",value:c.notes||"",onChange:y,rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Additional notes or comments..."})]}),(e==="bill"||e==="invoice")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Attachment"}),i.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:b=>m(b.target.files[0]),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Upload receipt or related document (images and PDFs only)"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsxs("button",{onClick:v,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:[t?"Update":"Add"," ",e]})]})]})]})})},ll=(t,e,r)=>fc(t,"artifacts","workOrderManagement","users",e,r),Ca=(t,e,r,n)=>gr(t,"artifacts","workOrderManagement","users",e,r,n),P5=t=>{const r=["street","city","state"].filter(n=>!t[n]?.trim());return r.length>0?{isValid:!1,missing:r,suggestion:`Please provide: ${r.join(", ")}`}:{isValid:!0}},AN=t=>{const{street:e,city:r,state:n,zip:a,country:s="USA"}=t;return[e,r,n,a,s].filter(c=>c&&c.trim()).join(", ")},Hoe=async t=>{try{if(!t||typeof t!="string")throw new Error("Address is required and must be a string");if(typeof google>"u"||!google.maps||!google.maps.Geocoder)throw new Error("Google Maps JavaScript API is not loaded");const e=new google.maps.Geocoder,r=t.trim().replace(/\s+/g," ");return console.log("Geocoding request:",r),new Promise((n,a)=>{e.geocode({address:r,region:"US"},(s,o)=>{switch(console.log("Geocoding status:",o),console.log("Geocoding results:",s),o){case google.maps.GeocoderStatus.OK:if(s&&s.length>0){const c=s[0],d=c.geometry.location;n({success:!0,coordinates:{lat:d.lat(),lng:d.lng()},formattedAddress:c.formatted_address,addressComponents:c.address_components})}else a(new Error("No results found for the provided address"));break;case google.maps.GeocoderStatus.ZERO_RESULTS:a(new Error("No results found. Please check the address and try again."));break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:a(new Error("API quota exceeded. Please try again later."));break;case google.maps.GeocoderStatus.REQUEST_DENIED:a(new Error("Request denied. Check your API key configuration."));break;case google.maps.GeocoderStatus.INVALID_REQUEST:a(new Error("Invalid request. Please provide a valid address."));break;default:a(new Error(`Geocoding failed with status: ${o}`))}})})}catch(e){return console.error("Geocoding error:",e),{success:!1,error:e.message,suggestions:["Ensure the address includes street number, street name, city, and state/zip","Check that Google Maps JavaScript API is properly loaded","Verify your API key configuration in Google Cloud Console","Try with a more complete or differently formatted address"]}}},Goe=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Address is required and must be a string");if(!e)throw new Error("Google Maps API key is required for REST API geocoding");const r=t.trim().replace(/\s+/g," "),a=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(r)}&key=${e}`;console.log("REST geocoding request:",r);const s=await fetch(a);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();switch(console.log("REST geocoding response:",o),o.status){case"OK":if(o.results&&o.results.length>0){const c=o.results[0],d=c.geometry.location;return{success:!0,coordinates:{lat:d.lat,lng:d.lng},formattedAddress:c.formatted_address,addressComponents:c.address_components}}else throw new Error("No results found for the provided address");case"ZERO_RESULTS":throw new Error("No results found. Please check the address and try again.");case"OVER_QUERY_LIMIT":throw new Error("API quota exceeded. Please try again later or upgrade your plan.");case"REQUEST_DENIED":throw new Error("Request denied. Check your API key and make sure Geocoding API is enabled.");case"INVALID_REQUEST":throw new Error("Invalid request. Please provide a valid address.");case"UNKNOWN_ERROR":throw new Error("Server error occurred. Please try again later.");default:throw new Error(`Geocoding failed with status: ${o.status}`)}}catch(r){return console.error("REST geocoding error:",r),{success:!1,error:r.message,suggestions:["Ensure the address includes street number, street name, city, and state/zip","Check that your Google Maps API key is valid and has Geocoding API enabled","Verify you haven't exceeded your API quota","Try with a more complete or differently formatted address"]}}},CN=async(t,e=null)=>{try{const r=await Hoe(t);return r.success?r:e&&r.error.includes("Google Maps JavaScript API")?(console.log("Falling back to REST API geocoding..."),await Goe(t,e)):r}catch(r){return console.error("Smart geocoding error:",r),{success:!1,error:r.message,suggestions:["Try with a more complete address or check your API configuration"]}}},Koe=(t,e,r,n)=>{const a=I4(ll(t,e,r));return bd(a,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));n(o)},s=>console.error(`Error fetching ${r}:`,s))},hD=(t,e,r)=>{const n={...r,createdAt:Bt()},a=gr(ll(t,e,"workOrders"));return Ea(a,{...n,id:a.id})},Qoe=(t,e,r,n)=>{const a=Ca(t,e,"workOrders",r);return ea(a,{...n,updatedAt:Bt()})},Yoe=async(t,e,r,n)=>{const a=Ca(t,e,"workOrders",r),s=await u1(a);if(s.exists()){const o={text:n.trim(),timestamp:new Date().toISOString()},c=s.data().notes||[];return ea(a,{notes:[...c,o],updatedAt:Bt()})}},Xoe=(t,e,r)=>{const n=gr(ll(t,e,"customers"));return Ea(n,{...r,id:n.id,createdAt:Bt()})},Joe=async(t,e,r,n=null)=>{try{const a=gr(ll(t,e,"customers"));if(r.address||r.street&&r.city&&r.state){let s;if(typeof r.address=="string")s=r.address;else{const c={street:r.street||r.address?.street,city:r.city||r.address?.city,state:r.state||r.address?.state,zip:r.zip||r.address?.zip},d=P5(c);if(!d.isValid)return console.warn("Address validation failed:",d.suggestion),Ea(a,{...r,id:a.id,geocodingError:d.suggestion,createdAt:Bt()});s=AN(c)}console.log("Attempting to geocode:",s);const o=await CN(s,n);if(o.success){const c={...r,id:a.id,coordinates:o.coordinates,formattedAddress:o.formattedAddress,createdAt:Bt()};return await Ea(a,c),{success:!0,id:a.id,coordinates:o.coordinates,message:"Customer added successfully with coordinates"}}else{console.warn("Geocoding failed:",o.error);const c={...r,id:a.id,geocodingError:o.error,geocodingSuggestions:o.suggestions,createdAt:Bt()};return await Ea(a,c),{success:!0,id:a.id,coordinates:null,warning:`Customer saved without coordinates: ${o.error}`,suggestions:o.suggestions}}}else return await Ea(a,{...r,id:a.id,createdAt:Bt()}),{success:!0,id:a.id,coordinates:null,message:"Customer added successfully (no address provided)"}}catch(a){throw console.error("Error adding customer:",a),a}},Zoe=(t,e,r,n)=>{const a=Ca(t,e,"customers",r);return ea(a,{...n,updatedAt:Bt()})},ele=async(t,e,r,n,a=null)=>{try{const s=Ca(t,e,"customers",r);if(["address","street","city","state","zip"].some(d=>d in n)){const d=await u1(s),m={...d.exists()?d.data():{},...n};let p;if(m.address&&typeof m.address=="string")p=m.address;else{const y={street:m.street,city:m.city,state:m.state,zip:m.zip};P5(y).isValid&&(p=AN(y))}if(p){const y=await CN(p,a);if(y.success){const v={...n,coordinates:y.coordinates,formattedAddress:y.formattedAddress,geocodingError:null,updatedAt:Bt()};return await ea(s,v),{success:!0,coordinates:y.coordinates,message:"Customer updated successfully with coordinates"}}else{const v={...n,geocodingError:y.error,geocodingSuggestions:y.suggestions,updatedAt:Bt()};return await ea(s,v),{success:!0,coordinates:null,warning:`Customer updated without coordinates: ${y.error}`}}}}return await ea(s,{...n,updatedAt:Bt()}),{success:!0,message:"Customer updated successfully"}}catch(s){throw console.error("Error updating customer:",s),s}},tle=(t,e,r)=>{const n=Ca(t,e,"customers",r);return h1(n)},rle=(t,e,r)=>{const n=gr(ll(t,e,"technicians"));return Ea(n,{...r,id:n.id,createdAt:Bt()})},nle=(t,e,r,n)=>{const a=Ca(t,e,"technicians",r);return ea(a,{...n,updatedAt:Bt()})},ale=async(t,e,r,n)=>{const a=await u1(Ca(t,e,"technicians",r));if(!a.exists())return;const s=a.data(),o=qk(t);(n||[]).forEach(d=>{if(d.technician?.includes(s.name)){const h=Ca(t,e,"workOrders",d.id);o.update(h,{technician:d.technician.filter(m=>m!==s.name)})}});const c=Ca(t,e,"technicians",r);return o.delete(c),o.commit()},ile=(t,e,r)=>{const n=gr(ll(t,e,"invoices"),r.id);return Ea(n,{...r,createdAt:Bt()})},sle=(t,e,r)=>{const n=gr(ll(t,e,"quotes"),r.id);return Ea(n,{...r,createdAt:Bt()})},hj=(t,e,r,n)=>{const a=Ca(t,e,"invoices",r);return ea(a,{...n,updatedAt:Bt()})},md=(t,e,r,n)=>{const a=Ca(t,e,"quotes",r);return ea(a,{...n,updatedAt:Bt()})},Zl=(t,e,r)=>{const[n,a]=V.useState([]),[s,o]=V.useState(!0);return V.useEffect(()=>{if(!e||!t)return;o(!0);const c=Koe(t,e,r,d=>{a(d),o(!1)});return()=>c()},[t,e,r]),{data:n,loading:s}},Td=t=>t&&typeof t=="number"?new Date(Math.round((t-25569)*86400*1e3)):null,ole=t=>{const e=Td(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},lle=t=>{if(!t)return"";const[e,r]=t.split(":"),n=parseInt(e,10),a=n>=12?"PM":"AM";return`${(n+11)%12+1}:${r} ${a}`},fD=t=>t==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),mD=t=>({emergency:"bg-red-100 text-red-800 border-red-500 dark:bg-red-900/50 dark:text-red-200 dark:border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500 dark:bg-orange-900/50 dark:text-orange-200 dark:border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500",cle=t=>({completed:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",scheduled:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200",open:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200","in progress":"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200","on hold":"bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",ule=t=>{if(!t)return"later";const e=Td(t);if(!e)return"later";const r=new Date,n=new Date(r);n.setDate(n.getDate()+1);const a=new Date(r);a.setDate(a.getDate()+7);const s=e.toDateString()===r.toDateString(),o=e.toDateString()===n.toDateString(),c=e<=a&&e>n;return s?"today":o?"tomorrow":c?"thisweek":"later"},$m=({title:t,value:e,icon:r,color:n})=>{const a={blue:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-300",green:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-300",yellow:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-300",purple:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-full ${a[n]||a.blue}`,children:r}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),i.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:e})]})]})},Xm=({order:t,onSelectOrder:e})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-transparent dark:border-slate-700 border-l-4",style:{borderColor:mD(t.Priority).borderColor},children:[i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded-full ${mD(t.Priority)}`,children:t.Priority}),i.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${cle(t["Order Status"])}`,children:t["Order Status"]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold mt-3 flex items-center",children:[i.jsx(r6,{size:12,className:"mr-1.5"})," ",t.Client]}),i.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[t.Company," - #",t["Loc #"]]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:t.Task}),i.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(M0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsx("span",{children:t.technician?.join(", ")||"Unassigned"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(O0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsxs("span",{children:["Scheduled: ",ole(t["Schedule Date"])||"Not Set"," ",t.startTime&&`(${lle(t.startTime)})`]})]}),t.clientWO&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-bold mr-2",children:"Client WO:"}),i.jsx("span",{children:t.clientWO})]})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 px-5 py-3",children:i.jsx("button",{onClick:()=>e(t),className:"w-full text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:"View Details"})})]}),Fm=({title:t,orders:e,onSelectOrder:r,badge:n})=>e.length?i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:t}),n&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200 rounded-full",children:n})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>i.jsx(Xm,{order:a,onSelectOrder:r},a.id))})]}):null,Vm=({active:t,onClick:e,children:r,count:n})=>i.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-lg transition-colors ${t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:[r,n>0&&i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t?"bg-blue-500 text-white":"bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300"}`,children:n})]}),dle=({currentPage:t,totalPages:e,onPageChange:r})=>e<=1?null:i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[i.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"p-2 rounded-lg bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-slate-600",children:i.jsx(n6,{size:20})}),i.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(e,5)},(n,a)=>{const s=a+1;return i.jsx("button",{onClick:()=>r(s),className:`px-3 py-2 rounded-lg text-sm font-medium ${t===s?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:s},s)})}),i.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"p-2 rounded-lg bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-slate-600",children:i.jsx(a6,{size:20})})]}),pD=()=>{const{workOrders:t,invoices:e,filteredOrders:r,setSelectedOrder:n,searchTerm:a,setSearchTerm:s}=Zr(),[o,c]=V.useState("active"),[d,h]=V.useState(1),m=15,p=V.useMemo(()=>{const S=t||[],E=e||[],P=new Date,_=new Date(P.getFullYear(),P.getMonth(),1),O=S.filter(D=>D["Order Status"]==="Open").length,T=S.filter(D=>{const A=Td(D["Completed Date"]);return D["Order Status"]==="Completed"&&A>=_}).length,R=E.filter(D=>new Date(D.date)>=_).reduce((D,A)=>D+(A.total||0),0),M=E.length>0?E.reduce((D,A)=>D+(A.total||0),0)/E.length:0;return{openOrders:O,completedThisMonth:T,billedThisMonth:R,avgInvoiceValue:M}},[t,e]),y=V.useMemo(()=>{const S=r||[],E=new Date,P=new Date(E.getTime()-10080*60*1e3),_=S.filter(M=>["Open","In Progress","On Hold"].includes(M["Order Status"])),O=S.filter(M=>M["Order Status"]==="Scheduled"||M["Schedule Date"]&&Td(M["Schedule Date"])>E),T=S.filter(M=>{const D=Td(M["Completed Date"]);return M["Order Status"]==="Completed"&&D>=P});return{active:_,scheduled:O,recent:T,all:S}},[r]),v=V.useMemo(()=>{const S={today:[],tomorrow:[],thisweek:[],later:[]};return y.scheduled.forEach(E=>{const P=ule(E["Schedule Date"]);S[P].push(E)}),S},[y.scheduled]),w=V.useMemo(()=>{if(o!=="all")return[];const S=(d-1)*m;return y.all.slice(S,S+m)},[y.all,d,m,o]),k=Math.ceil(y.all.length/m),b=S=>{c(S),h(1)},N=()=>{switch(o){case"active":return y.active.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.active.map(S=>i.jsx(Xm,{order:S,onSelectOrder:n},S.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Active Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"All work orders are either scheduled or completed."})]});case"scheduled":return i.jsxs("div",{children:[i.jsx(Fm,{title:"Today",orders:v.today,onSelectOrder:n,badge:v.today.length}),i.jsx(Fm,{title:"Tomorrow",orders:v.tomorrow,onSelectOrder:n,badge:v.tomorrow.length}),i.jsx(Fm,{title:"This Week",orders:v.thisweek,onSelectOrder:n,badge:v.thisweek.length}),i.jsx(Fm,{title:"Later",orders:v.later,onSelectOrder:n,badge:v.later.length}),y.scheduled.length===0&&i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Scheduled Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Schedule work orders to see them organized by date."})]})]});case"recent":return y.recent.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.recent.map(S=>i.jsx(Xm,{order:S,onSelectOrder:n},S.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Recently Completed Work Orders"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Completed work orders from the last 7 days will appear here."})]});case"all":return i.jsxs("div",{children:[w.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(S=>i.jsx(Xm,{order:S,onSelectOrder:n},S.id))}):i.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"No Work Orders Found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Try adjusting your search criteria."})]}),i.jsx(dle,{currentPage:d,totalPages:k,onPageChange:h})]});default:return null}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx($m,{title:"Open Work Orders",value:p.openOrders,icon:i.jsx(Na,{size:24}),color:"yellow"}),i.jsx($m,{title:"Completed This Month",value:p.completedThisMonth,icon:i.jsx(oz,{size:24}),color:"green"}),i.jsx($m,{title:"Billed This Month",value:fD(p.billedThisMonth),icon:i.jsx(Tr,{size:24}),color:"blue"}),i.jsx($m,{title:"Avg. Invoice Value",value:fD(p.avgInvoiceValue),icon:i.jsx(iz,{size:24}),color:"purple"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm mb-8",children:i.jsxs("div",{className:"relative",children:[i.jsx("label",{htmlFor:"work-order-search",className:"sr-only",children:"Search Work Orders"}),i.jsx(ii,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500",size:20}),i.jsx("input",{type:"text",id:"work-order-search",name:"work-order-search",placeholder:"Search by WO#, Client, Location, Tech...",value:a,onChange:S=>s(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-8",children:[i.jsx(Vm,{active:o==="active",onClick:()=>b("active"),count:y.active.length,children:"Active"}),i.jsx(Vm,{active:o==="scheduled",onClick:()=>b("scheduled"),count:y.scheduled.length,children:"Scheduled"}),i.jsx(Vm,{active:o==="recent",onClick:()=>b("recent"),count:y.recent.length,children:"Recent"}),i.jsx(Vm,{active:o==="all",onClick:()=>b("all"),count:y.all.length,children:"All"})]}),N()]})},yk=(t,e)=>{const n={priority:{emergency:"bg-red-100 text-red-800 border-red-500 dark:bg-red-900/50 dark:text-red-200 dark:border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500 dark:bg-orange-900/50 dark:text-orange-200 dark:border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500",default:"bg-gray-100 text-gray-800 border-gray-500 dark:bg-gray-600/50 dark:text-gray-200 dark:border-gray-500"},techStatus:{available:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200","on site":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200","en route":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200","on break":"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200","on call":"bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-200","day off":"bg-slate-200 text-slate-800 dark:bg-slate-600 dark:text-slate-200",default:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200"}}[t];return n?n[e?.toLowerCase()]||n.default:""},hle=()=>{const{workOrders:t,technicians:e,handlers:r,setSelectedOrder:n}=Zr(),[a,s]=V.useState(new Date().toISOString().split("T")[0]),o=Array.from({length:13},(b,N)=>N+7),c=V.useMemo(()=>(e||[]).filter(b=>b.name!=="Unassigned"),[e]),{scheduledOrders:d,unscheduledOrders:h}=V.useMemo(()=>{if(!t)return{scheduledOrders:[],unscheduledOrders:[]};const b=t.filter(S=>_g(S["Schedule Date"])===a&&S.startTime&&S.endTime&&S.technician?.length>0),N=t.filter(S=>S["Order Status"]==="Open"||!S.technician||S.technician.length===0).sort((S,E)=>{const P={Emergency:1,Urgent:2,Regular:3,Low:4};return(P[S.Priority]||5)-(P[E.Priority]||5)});return{scheduledOrders:b,unscheduledOrders:N}},[t,a]),m=b=>{const N=c.findIndex(S=>S.name===b);return N===-1?-1:N+2},p=b=>{if(!b)return 0;const[N,S]=b.split(":").map(Number);return isNaN(N)||isNaN(S)?0:(N-7)*4+S/15+2},y=(b,N)=>{b.dataTransfer.setData("workOrderId",N.id)},v=(b,N,S)=>{b.preventDefault();const E=b.dataTransfer.getData("workOrderId"),P=t.find(T=>T.id===E);if(!P)return;const _=S,O=`${String(parseInt(S.split(":")[0])+2).padStart(2,"0")}:${S.split(":")[1]}`;r.updateOrder(P.id,{...P,technician:[N],"Schedule Date":EN(a),startTime:_,endTime:O,"Order Status":"Scheduled"})},w=b=>{b.preventDefault();const N=b.dataTransfer.getData("workOrderId"),S=t.find(E=>E.id===N);S&&r.updateOrder(S.id,{...S,technician:[],"Schedule Date":null,startTime:null,endTime:null,"Order Status":"Open"})},k=b=>b.preventDefault();return!t||!e?i.jsx("div",{className:"p-6",children:"Loading dispatch data..."}):i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Dispatch Board"}),i.jsx("input",{type:"date",value:a,onChange:b=>s(b.target.value),className:"p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/4 bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm",onDrop:w,onDragOver:k,children:[i.jsx("h4",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white",children:"Unassigned Jobs"}),i.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:h.map(b=>i.jsxs("div",{draggable:!0,onDragStart:N=>y(N,b),className:`p-2 border-l-4 rounded cursor-grab ${yk("priority",b.Priority)}`,children:[i.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:b.Company}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:b.Task})]},b.id))})]}),i.jsx("div",{className:"w-3/4 bg-white dark:bg-slate-700 p-4 rounded-lg shadow-sm overflow-x-auto",children:i.jsxs("div",{className:"grid gap-px bg-gray-200 dark:bg-slate-600 min-w-max",style:{gridTemplateColumns:`60px repeat(${c.length}, minmax(200px, 1fr))`,gridTemplateRows:`auto repeat(${o.length*4}, 20px)`},children:[i.jsx("div",{className:"bg-gray-100 dark:bg-slate-600 sticky top-0 z-10"}),c.map(b=>i.jsxs("div",{className:"bg-gray-100 dark:bg-slate-600 text-center font-bold p-2 sticky top-0 z-10 flex flex-col",children:[i.jsx("span",{className:"text-gray-800 dark:text-white",children:b.name}),i.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full mt-1 ${yk("techStatus",b.status)}`,children:b.status})]},b.id)),o.map(b=>i.jsxs(Q.Fragment,{children:[i.jsxs("div",{className:"row-start-auto bg-gray-50 dark:bg-slate-600 text-right pr-2 text-xs text-gray-500 dark:text-gray-400 -translate-y-2 sticky left-0 z-10",style:{gridRow:(b-7)*4+2},children:[b>12?b-12:b,":00 ",b>=12?"PM":"AM"]}),c.map((N,S)=>i.jsx(Q.Fragment,{children:Array.from({length:4}).map((E,P)=>i.jsx("div",{onDrop:_=>v(_,N.name,`${String(b).padStart(2,"0")}:${String(P*15).padStart(2,"0")}`),onDragOver:k,className:"border-t border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700",style:{gridRow:(b-7)*4+P+2,gridColumn:S+2}},`${N.id}-${b}-${P}`))},N.id))]},b)),d.flatMap(b=>(b.technician||[]).map(N=>{const S=m(N),E=p(b.startTime),P=p(b.endTime);return S<0||!E||!P||P<=E?null:i.jsxs("div",{draggable:!0,onDragStart:_=>y(_,b),className:`p-2 m-px rounded-lg text-xs cursor-grab overflow-hidden ${yk("priority",b.Priority)}`,style:{gridColumn:S,gridRow:`${E} / ${P}`},onClick:()=>n(b),children:[i.jsx("p",{className:"font-bold truncate text-gray-800 dark:text-gray-200",children:b.Company}),i.jsx("p",{className:"truncate text-gray-600 dark:text-gray-400",children:b.Task})]},`${b.id}-${N}`)}))]})})]})]})},fle=()=>{const{workOrders:t,technicians:e,customers:r}=Zr(),n=V.useRef(null),[a,s]=V.useState(null),[o,c]=V.useState([]),[d,h]=V.useState(!1),[m,p]=V.useState("ALL"),[y,v]=V.useState("today"),[w,k]=V.useState(new Date().toISOString().split("T")[0]),[b,N]=V.useState(new Date().toISOString().split("T")[0]);V.useEffect(()=>{const _=()=>{window.google&&window.google.maps?h(!0):setTimeout(_,100)};_()},[]),V.useEffect(()=>{d&&n.current&&!a&&s(new window.google.maps.Map(n.current,{center:{lat:42.4731,lng:-83.2504},zoom:10}))},[d,n,a]);const S=V.useMemo(()=>{if(!t||!e)return[];let _,O;const T=new Date;switch(T.setHours(0,0,0,0),y){case"today":_=new Date(T),O=new Date(T);break;case"3-day":_=new Date(T),O=new Date(T),O.setDate(_.getDate()+2);break;case"week":_=new Date(T);const D=_.getDay();_.setDate(_.getDate()-D),O=new Date(_),O.setDate(_.getDate()+6);break;case"custom":_=new Date(w+"T00:00:00"),O=new Date(b+"T23:59:59");break;default:_=new Date(T),O=new Date(T)}O.setHours(23,59,59,999);const R=t.filter(D=>{const A=SN(D["Schedule Date"]);return A&&A>=_&&A<=O}),M=e.find(D=>D.id===m)?.name;return m!=="ALL"&&M?R.filter(D=>D.technician?.includes(M)).sort((D,A)=>(D.startTime||"").localeCompare(A.startTime||"")):R.sort((D,A)=>(D.startTime||"").localeCompare(A.startTime||""))},[m,t,e,y,w,b]);V.useEffect(()=>{if(a&&r){o.forEach(T=>T.setMap(null));const _=[],O=new window.google.maps.LatLngBounds;S.forEach((T,R)=>{const D=r.find(A=>A.name===T.Client)?.locations?.find(A=>A.name===T.Company&&A.locNum===T["Loc #"]);if(D&&D.lat&&D.lng){const A={lat:D.lat,lng:D.lng},F=new window.google.maps.Marker({position:A,map:a,label:`${R+1}`,title:`${T.Company}
${T.Task}`});_.push(F),O.extend(A)}}),c(_),S.length>0&&!O.isEmpty()&&a.fitBounds(O)}},[a,S,r]);const E=V.useMemo(()=>S.reduce((_,O)=>{const T=_g(O["Schedule Date"]);return _[T]||(_[T]={}),(O.technician||[]).forEach(R=>{_[T][R]||(_[T][R]=[]),_[T][R].push(O)}),_},{}),[S]),P=()=>window.print();return!e||!r?i.jsx("div",{className:"p-6",children:"Loading data..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Route Planning"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("select",{value:y,onChange:_=>v(_.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"3-day",children:"Next 3 Days"}),i.jsx("option",{value:"week",children:"This Week"}),i.jsx("option",{value:"custom",children:"Custom Range"})]}),y==="custom"&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"date",value:w,onChange:_=>k(_.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"date",value:b,onChange:_=>N(_.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("select",{value:m,onChange:_=>p(_.target.value),className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"ALL",children:"All Technicians"}),e.filter(_=>_.name!=="Unassigned").map(_=>i.jsx("option",{value:_.id,children:_.name},_.id))]}),i.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700",children:[i.jsx(Bd,{size:20})," Print Route"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 max-h-[600px] overflow-y-auto",children:[i.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-800 dark:text-white",children:"Job Order"}),Object.keys(E).length>0?Object.entries(E).map(([_,O])=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"font-bold text-md mb-2 p-2 bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-white rounded-md sticky top-0",children:new Date(_+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries(O).map(([T,R])=>i.jsxs("div",{className:"mb-4",children:[m==="ALL"&&i.jsx("h6",{className:"font-semibold text-sm mb-2 p-2 bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-white rounded-md",children:T}),i.jsx("div",{className:"space-y-2",children:R.map((M,D)=>i.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-lg flex items-start gap-4 bg-white dark:bg-slate-700/50",children:[i.jsx("span",{className:"text-lg font-bold text-gray-400 dark:text-gray-500 mt-1",children:D+1}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-800 dark:text-white",children:[uD(M.startTime)," - ",uD(M.endTime)]}),i.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[M.Company," - ",M.City]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:M.Task})]})]},M.id))})]},T))]},_)):i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No jobs scheduled for this selection."})]}),i.jsx("div",{className:"md:col-span-2 bg-gray-200 dark:bg-slate-600 rounded-lg min-h-[600px]",children:i.jsx("div",{ref:n,className:"w-full h-full rounded-lg",children:!d&&i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading map..."})})})})]})]})},mle=t=>({"national account":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200",commercial:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200",residential:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",maintenance:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",ple=({onClose:t,onAddCustomer:e})=>{const[r,n]=V.useState(""),[a,s]=V.useState("Commercial"),[o,c]=V.useState(""),[d,h]=V.useState(""),[m,p]=V.useState(""),[y,v]=V.useState(""),[w,k]=V.useState(""),[b,N]=V.useState("MI"),[S,E]=V.useState(""),[P,_]=V.useState(!1),[O,T]=V.useState(""),[R,M]=V.useState(""),D=async A=>{if(A.preventDefault(),!r.trim()){alert("Customer name cannot be empty.");return}_(!0),T(""),M("");const F={name:r,type:a,contact:{name:o,email:d,phone:m},street:y,city:w,state:b,zip:S,billingAddress:{street:y,city:w,state:b,zip:S},locations:[]};try{const L=await e(F);L&&L.coordinates?(M(`Customer added successfully with coordinates: ${L.coordinates.lat}, ${L.coordinates.lng}`),setTimeout(()=>t(),1500)):L&&L.warning?(T(L.warning),setTimeout(()=>t(),3e3)):t()}catch(L){console.error("Error adding customer:",L),T(`Failed to add customer: ${L.message}`)}_(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:D,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Customer"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[P&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(x1,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Adding customer and geocoding address..."})]}),O&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Mn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:O})]}),R&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[i.jsx(Rs,{size:16}),i.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:R})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Name *"}),i.jsx("input",{type:"text",value:r,onChange:A=>n(A.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Type"}),i.jsxs("select",{value:a,onChange:A=>s(A.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:P,children:[i.jsx("option",{children:"Commercial"}),i.jsx("option",{children:"Residential"}),i.jsx("option",{children:"National Account"}),i.jsx("option",{children:"Maintenance"})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Primary Contact"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Name"}),i.jsx("input",{value:o,onChange:A=>c(A.target.value),type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),i.jsx("input",{value:d,onChange:A=>h(A.target.value),type:"email",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),i.jsx("input",{value:m,onChange:A=>p(A.target.value),type:"tel",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:["Billing Address",i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Used for geocoding - include complete address)"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Street Address *"}),i.jsx("input",{value:y,onChange:A=>v(A.target.value),type:"text",placeholder:"123 Main Street",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City *"}),i.jsx("input",{value:w,onChange:A=>k(A.target.value),type:"text",placeholder:"Detroit",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State *"}),i.jsx("input",{value:b,onChange:A=>N(A.target.value),type:"text",placeholder:"MI",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zip Code"}),i.jsx("input",{value:S,onChange:A=>E(A.target.value),type:"text",placeholder:"48201",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:P})]})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:P,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:P,children:P?"Adding...":"Save Customer"})]})]})})},gle=({customer:t,onClose:e,onUpdateCustomer:r})=>{const[n,a]=V.useState({...t,street:t.billingAddress?.street||t.street||"",city:t.billingAddress?.city||t.city||"",state:t.billingAddress?.state||t.state||"",zip:t.billingAddress?.zip||t.zip||""}),[s,o]=V.useState(!1),[c,d]=V.useState(""),[h,m]=V.useState(""),p=(v,w=null)=>{const{name:k,value:b}=v.target;a(w?N=>({...N,[w]:{...N[w],[k]:b}}):N=>({...N,[k]:b}))},y=async v=>{v.preventDefault(),o(!0),d(""),m("");try{const w={...n,billingAddress:{street:n.street,city:n.city,state:n.state,zip:n.zip}},k=await r(w);k&&k.coordinates?(m(`Customer updated successfully with new coordinates: ${k.coordinates.lat}, ${k.coordinates.lng}`),setTimeout(()=>e(),1500)):k&&k.warning?(d(k.warning),setTimeout(()=>e(),3e3)):e()}catch(w){console.error("Error updating customer:",w),d(`Failed to update customer: ${w.message}`)}o(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:y,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Edit Customer"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[s&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(x1,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Updating customer and re-geocoding address..."})]}),c&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Mn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:c})]}),h&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[i.jsx(Rs,{size:16}),i.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:h})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Name"}),i.jsx("input",{type:"text",name:"name",value:n.name,onChange:p,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Customer Type"}),i.jsxs("select",{name:"type",value:n.type,onChange:p,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:s,children:[i.jsx("option",{children:"Commercial"}),i.jsx("option",{children:"Residential"}),i.jsx("option",{children:"National Account"}),i.jsx("option",{children:"Maintenance"})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Primary Contact"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Name"}),i.jsx("input",{name:"name",value:n.contact?.name||"",onChange:v=>p(v,"contact"),type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),i.jsx("input",{name:"email",value:n.contact?.email||"",onChange:v=>p(v,"contact"),type:"email",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),i.jsx("input",{name:"phone",value:n.contact?.phone||"",onChange:v=>p(v,"contact"),type:"tel",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:["Billing Address",i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Changes will re-geocode the address)"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Street"}),i.jsx("input",{name:"street",value:n.street,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City"}),i.jsx("input",{name:"city",value:n.city,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State"}),i.jsx("input",{name:"state",value:n.state,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zip"}),i.jsx("input",{name:"zip",value:n.zip,onChange:p,type:"text",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",disabled:s})]})]})]}),t.coordinates&&i.jsxs("div",{className:"pt-2 text-xs text-gray-500 dark:text-gray-400",children:["Current coordinates: ",t.coordinates.lat,", ",t.coordinates.lng]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:e,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:s,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?"Updating...":"Save Changes"})]})]})})},yle=({customer:t,onClose:e,onAddLocation:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState(""),[p,y]=V.useState("MI"),[v,w]=V.useState(""),[k,b]=V.useState(!1),[N,S]=V.useState(""),E=async P=>{if(P.preventDefault(),!n.trim()){alert("Location name cannot be empty.");return}b(!0),S("");try{const O=AN({street:c,city:h,state:p,zip:v});console.log("Geocoding location:",O);const T=await CN(O);let R={name:n,locNum:s,street:c,city:h,state:p,zip:v,assets:[]};T.success?(R.coordinates=T.coordinates,R.formattedAddress=T.formattedAddress,console.log("Location geocoded successfully:",T.coordinates)):(R.geocodingError=T.error,S(`Location will be saved without coordinates: ${T.error}`),console.warn("Geocoding failed:",T.error)),r(t,R),T.success?e():setTimeout(()=>e(),2e3)}catch(_){console.error("Error adding location:",_),S(`Failed to add location: ${_.message}`)}b(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:E,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Add Location to ",t.name]})}),i.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[k&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx(x1,{className:"animate-spin",size:16}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Adding location and geocoding address..."})]}),N&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[i.jsx(Mn,{size:16}),i.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:N})]}),i.jsx("input",{type:"text",placeholder:"Location Name *",value:n,onChange:P=>a(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,disabled:k}),i.jsx("input",{type:"text",placeholder:"Location # (optional)",value:s,onChange:P=>o(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"Street Address *",value:c,onChange:P=>d(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",placeholder:"City *",value:h,onChange:P=>m(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"State *",value:p,onChange:P=>y(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k}),i.jsx("input",{type:"text",placeholder:"Zip Code",value:v,onChange:P=>w(P.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",disabled:k})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"* Complete address information improves geocoding accuracy for mapping features"})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:e,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:k,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:k,children:k?"Adding...":"Add Location"})]})]})})},xle=({customer:t,locationIndex:e,onClose:r,onAddAsset:n})=>{const[a,s]=V.useState(""),[o,c]=V.useState("HVAC Unit"),[d,h]=V.useState(""),[m,p]=V.useState("Trane"),[y,v]=V.useState(""),[w,k]=V.useState(""),[b,N]=V.useState(""),[S,E]=V.useState(""),[P,_]=V.useState([{size:"",quantity:1}]),[O,T]=V.useState("DD"),[R,M]=V.useState(!1),D=["Trane","Carrier","Lennox","Goodman","Rheem","York","Other"],A=["HVAC Unit","Rooftop Unit","Furnace","Air Conditioner","Heat Pump","Boiler","Other"],F=(G,Y,te)=>{const ne=[...P];ne[G][Y]=te,_(ne)},L=()=>_([...P,{size:"",quantity:1}]),Z=G=>_(P.filter((Y,te)=>te!==G)),ae=G=>{if(G.preventDefault(),!a.trim())return;const Y={name:a,type:o==="Other"?d:o,brand:m==="Other"?y:m,model:w,serialNumber:b,installDate:S,filters:P.filter(te=>te.size.trim()),driveType:O,economizer:R};n(t,e,Y),r()},W="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:ae,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Asset"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Name"}),i.jsx("input",{type:"text",placeholder:"e.g., Rooftop Unit 1",value:a,onChange:G=>s(G.target.value),className:W,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Type"}),i.jsx("select",{value:o,onChange:G=>c(G.target.value),className:W,children:A.map(G=>i.jsx("option",{value:G,children:G},G))})]}),o==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Asset Type"}),i.jsx("input",{type:"text",value:d,onChange:G=>h(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Brand"}),i.jsx("select",{value:m,onChange:G=>p(G.target.value),className:W,children:D.map(G=>i.jsx("option",{value:G,children:G},G))})]}),m==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Brand"}),i.jsx("input",{type:"text",value:y,onChange:G=>v(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Model"}),i.jsx("input",{type:"text",value:w,onChange:G=>k(G.target.value),className:W})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Serial Number"}),i.jsx("input",{type:"text",value:b,onChange:G=>N(G.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Install Date"}),i.jsx("input",{type:"date",value:S,onChange:G=>E(G.target.value),className:W})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Filters"}),P.map((G,Y)=>i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Size (e.g., 20x20x1)",value:G.size,onChange:te=>F(Y,"size",te.target.value),className:"flex-grow p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("input",{type:"number",value:G.quantity,onChange:te=>F(Y,"quantity",parseInt(te.target.value)||1),className:"w-20 p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("button",{type:"button",onClick:()=>Z(Y),className:"text-red-500 hover:text-red-700",children:i.jsx(Jt,{size:18})})]},Y)),i.jsx("button",{type:"button",onClick:L,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Add Filter"})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Drive Type"}),i.jsxs("select",{value:O,onChange:G=>T(G.target.value),className:W,children:[i.jsx("option",{children:"DD"}),i.jsx("option",{children:"Belt Drive"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",id:"economizer",checked:R,onChange:G=>M(G.target.checked),className:"h-4 w-4"}),i.jsx("label",{htmlFor:"economizer",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Has Economizer"})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:r,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Add Asset"})]})]})})},vle=({asset:t,customer:e,locationIndex:r,assetIndex:n,onClose:a,onUpdateAsset:s})=>{const[o,c]=V.useState(t),[d,h]=V.useState(t.type),[m,p]=V.useState(""),[y,v]=V.useState(t.brand),[w,k]=V.useState(""),[b,N]=V.useState(t.filters||[{size:"",quantity:1}]),S=["Trane","Carrier","Lennox","Goodman","Rheem","York","Other"],E=["HVAC Unit","Rooftop Unit","Furnace","Air Conditioner","Heat Pump","Boiler","Other"];V.useEffect(()=>{E.includes(t.type)||(h("Other"),p(t.type)),S.includes(t.brand)||(v("Other"),k(t.brand))},[t]);const P=D=>{const{name:A,value:F,type:L,checked:Z}=D.target;c(ae=>({...ae,[A]:L==="checkbox"?Z:F}))},_=(D,A,F)=>{const L=[...b];L[D][A]=F,N(L)},O=()=>N([...b,{size:"",quantity:1}]),T=D=>N(b.filter((A,F)=>F!==D)),R=D=>{D.preventDefault();const A={...o,type:d==="Other"?m:d,brand:y==="Other"?w:y,filters:b.filter(F=>F.size.trim())};s(e,r,n,A),a()},M="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:R,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Edit Asset"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Name"}),i.jsx("input",{type:"text",name:"name",value:o.name,onChange:P,className:M,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Asset Type"}),i.jsx("select",{value:d,onChange:D=>h(D.target.value),className:M,children:E.map(D=>i.jsx("option",{value:D,children:D},D))})]}),d==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Asset Type"}),i.jsx("input",{type:"text",value:m,onChange:D=>p(D.target.value),className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Brand"}),i.jsx("select",{value:y,onChange:D=>v(D.target.value),className:M,children:S.map(D=>i.jsx("option",{value:D,children:D},D))})]}),y==="Other"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Custom Brand"}),i.jsx("input",{type:"text",value:w,onChange:D=>k(D.target.value),className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Model"}),i.jsx("input",{type:"text",name:"model",value:o.model,onChange:P,className:M})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Serial Number"}),i.jsx("input",{type:"text",name:"serialNumber",value:o.serialNumber,onChange:P,className:M})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Install Date"}),i.jsx("input",{type:"date",name:"installDate",value:o.installDate,onChange:P,className:M})]})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600",children:[i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Filters"}),b.map((D,A)=>i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Size (e.g., 20x20x1)",value:D.size,onChange:F=>_(A,"size",F.target.value),className:"flex-grow p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("input",{type:"number",value:D.quantity,onChange:F=>_(A,"quantity",parseInt(F.target.value)||1),className:"w-20 p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"}),i.jsx("button",{type:"button",onClick:()=>T(A),className:"text-red-500 hover:text-red-700",children:i.jsx(Jt,{size:18})})]},A)),i.jsx("button",{type:"button",onClick:O,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Add Filter"})]}),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-600 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Drive Type"}),i.jsxs("select",{name:"driveType",value:o.driveType,onChange:P,className:M,children:[i.jsx("option",{children:"DD"}),i.jsx("option",{children:"Belt Drive"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",id:"economizer",name:"economizer",checked:o.economizer,onChange:P,className:"h-4 w-4"}),i.jsx("label",{htmlFor:"economizer",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Has Economizer"})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:a,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},ble=()=>{const{customers:t,handlers:e,db:r,userId:n}=Zr(),[a,s]=V.useState(!1),[o,c]=V.useState(null),[d,h]=V.useState(null),[m,p]=V.useState(null),[y,v]=V.useState(null),[w,k]=V.useState(new Set),[b,N]=V.useState({}),S=A=>{const F=new Set(w);F.has(A)?F.delete(A):F.add(A),k(F)},E=(A,F)=>{N(L=>{const Z=new Set(L[A]);return Z.has(F)?Z.delete(F):Z.add(F),{...L,[A]:Z}})},P=async A=>{try{return r&&n?await Joe(r,n,A):e.addCustomer(A)}catch(F){throw console.error("Error in handleAddCustomer:",F),F}},_=async A=>{try{return r&&n&&A.id?await ele(r,n,A.id,A):e.updateCustomer(A)}catch(F){throw console.error("Error in handleUpdateCustomer:",F),F}},O=(A,F)=>{const L=[...A.locations||[],F];e.updateCustomer({...A,locations:L})},T=(A,F)=>{if(window.confirm("Are you sure you want to delete this location?")){const L=A.locations.filter((Z,ae)=>ae!==F);e.updateCustomer({...A,locations:L})}},R=(A,F,L)=>{const Z=[...A.locations],ae=Z[F];ae.assets=[...ae.assets||[],L],e.updateCustomer({...A,locations:Z})},M=(A,F,L,Z)=>{const ae=[...A.locations];ae[F].assets[L]=Z,e.updateCustomer({...A,locations:ae})},D=(A,F,L)=>{if(window.confirm("Are you sure you want to delete this asset?")){const Z=[...A.locations];Z[F].assets.splice(L,1),e.updateCustomer({...A,locations:Z})}};return t?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Customer Management"}),i.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[i.jsx(aa,{size:20})," Add New Customer"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(A=>{const F=w.has(A.id);return i.jsxs("div",{className:"border border-gray-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50",onClick:()=>S(A.id),children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:A.name}),i.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${mle(A.type)}`,children:A.type}),A.coordinates&&i.jsx(Rs,{size:16,className:"text-green-600",title:"Location geocoded"}),A.geocodingError&&i.jsx(Mn,{size:16,className:"text-yellow-600",title:`Geocoding failed: ${A.geocodingError}`})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",onClick:L=>L.stopPropagation(),children:[i.jsx("button",{onClick:()=>c(A),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>h(A),className:"text-sm text-green-600 dark:text-green-400 hover:underline",children:"Add Location"}),i.jsx("button",{onClick:()=>{window.confirm("Delete this customer and all their locations?")&&e.deleteCustomer(A.id)},className:"text-sm text-red-600 dark:text-red-400 hover:underline",children:"Delete Customer"})]}),i.jsx(Fd,{className:`transition-transform ${F?"rotate-180":""}`})]})]}),F&&i.jsxs("div",{className:"p-4 border-t dark:border-slate-700",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Primary Contact"}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(M0,{size:14})," ",A.contact?.name]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(v1,{size:14})," ",A.contact?.email]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(b1,{size:14})," ",A.contact?.phone]})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Billing Address"}),i.jsx("p",{className:"text-gray-800 dark:text-gray-300",children:A.billingAddress?.street||A.street}),i.jsxs("p",{className:"text-gray-800 dark:text-gray-300",children:[A.billingAddress?.city||A.city,", ",A.billingAddress?.state||A.state," ",A.billingAddress?.zip||A.zip]}),A.coordinates&&i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(Rs,{size:12})," ",A.coordinates.lat.toFixed(6),", ",A.coordinates.lng.toFixed(6)]}),A.geocodingError&&i.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 flex items-center gap-1",children:[i.jsx(Mn,{size:12})," Geocoding failed"]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1",children:["Service Locations (",(A.locations||[]).length,")"]}),i.jsx("div",{className:"space-y-3",children:(A.locations||[]).map((L,Z)=>{const ae=b[A.id]?.has(Z);return i.jsxs("div",{className:"pl-4 border-l-2 border-slate-200 dark:border-slate-600 py-2",children:[i.jsxs("div",{className:"flex justify-between items-start cursor-pointer",onClick:()=>E(A.id,Z),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fd,{className:`transition-transform ${ae?"rotate-180":""}`,size:16}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-semibold flex items-center gap-2",children:[i.jsx(mc,{size:14})," ",L.name," (#",L.locNum,")",L.coordinates&&i.jsx(Rs,{size:12,className:"text-green-600"}),L.geocodingError&&i.jsx(Mn,{size:12,className:"text-yellow-600"})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:[L.street,", ",L.city,", ",L.state," ",L.zip]}),L.coordinates&&i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 ml-6",children:["📍 ",L.coordinates.lat.toFixed(6),", ",L.coordinates.lng.toFixed(6)]})]})]}),i.jsxs("div",{className:"flex gap-2",onClick:W=>W.stopPropagation(),children:[i.jsx("button",{onClick:()=>p({customer:A,locationIndex:Z}),className:"text-xs text-green-600 dark:text-green-400 hover:underline",children:"Add Asset"}),i.jsx("button",{onClick:()=>T(A,Z),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Delete"})]})]}),ae&&i.jsxs("div",{className:"mt-2 pl-6",children:[i.jsxs("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:["Assets (",(L.assets||[]).length,")"]}),i.jsxs("div",{className:"pl-4 border-l-2 border-slate-200 dark:border-slate-600 space-y-1 mt-1",children:[(L.assets||[]).map((W,G)=>i.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"flex items-center gap-2 font-semibold",children:[i.jsx(i6,{size:12})," ",W.name," (",W.type,")"]}),i.jsxs("ul",{className:"pl-5 list-disc text-gray-500 dark:text-gray-500",children:[i.jsxs("li",{children:["Brand: ",W.brand,", Model: ",W.model,", S/N: ",W.serialNumber]}),i.jsxs("li",{children:["Installed: ",W.installDate]}),i.jsxs("li",{children:["Filters: ",(W.filters||[]).map(Y=>`${Y.quantity}x ${Y.size}`).join(", ")||"N/A"]}),i.jsxs("li",{children:["Drive: ",W.driveType,", Economizer: ",W.economizer?"Yes":"No"]})]})]}),i.jsxs("div",{className:"flex gap-2",onClick:Y=>Y.stopPropagation(),children:[i.jsx("button",{onClick:()=>v({customer:A,locationIndex:Z,assetIndex:G,asset:W}),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>D(A,Z,G),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Delete"})]})]},G)),!(L.assets||[]).length&&i.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 italic",children:"No assets recorded."})]})]})]},Z)})})]})]})]},A.id)})}),a&&i.jsx(ple,{onAddCustomer:P,onClose:()=>s(!1)}),o&&i.jsx(gle,{customer:o,onUpdateCustomer:_,onClose:()=>c(null)}),d&&i.jsx(yle,{customer:d,onAddLocation:O,onClose:()=>h(null)}),m&&i.jsx(xle,{customer:m.customer,locationIndex:m.locationIndex,onAddAsset:R,onClose:()=>p(null)}),y&&i.jsx(vle,{asset:y.asset,customer:y.customer,locationIndex:y.locationIndex,assetIndex:y.assetIndex,onUpdateAsset:M,onClose:()=>v(null)})]}):i.jsx("div",{className:"p-6",children:"Loading customer data..."})},wle=t=>({available:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200","on site":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200","en route":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200","on break":"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200","on call":"bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-200","day off":"bg-slate-200 text-slate-800 dark:bg-slate-600 dark:text-slate-200"})[t?.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",kle=({onClose:t,onAdd:e})=>{const[r,n]=V.useState({name:"",email:"",phone:"",mobileAccess:!1,password:"",confirmPassword:""}),[a,s]=V.useState(!1),[o,c]=V.useState(""),d=m=>{const{name:p,value:y,type:v,checked:w}=m.target;n(k=>({...k,[p]:v==="checkbox"?w:y}))},h=async m=>{if(m.preventDefault(),!!r.name.trim()){s(!0),c("");try{let p={name:r.name,email:r.email,phone:r.phone,status:"Available",mobileAccess:r.mobileAccess,createdAt:new Date().toISOString()};if(r.mobileAccess){if(r.password!==r.confirmPassword)throw new Error("Passwords do not match");if(r.password.length<6)throw new Error("Password must be at least 6 characters");const y=Sj(),v=await aM(y,r.email,r.password);p.id=v.user.uid,p.firebaseUid=v.user.uid,p.mobileCredentials={email:r.email,temporaryPassword:r.password,createdAt:new Date().toISOString()}}await e(p),t()}catch(p){console.error("Error creating technician:",p),c(p.message)}finally{s(!1)}}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:h,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Technician"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Name"}),i.jsx("input",{type:"text",name:"name",value:r.name,onChange:d,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:r.mobileAccess})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Phone"}),i.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:d,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("input",{type:"checkbox",name:"mobileAccess",id:"mobileAccess",checked:r.mobileAccess,onChange:d,className:"h-4 w-4 text-blue-600"}),i.jsxs("label",{htmlFor:"mobileAccess",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[i.jsx(qd,{size:16}),"Grant Mobile App Access"]})]}),r.mobileAccess&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg space-y-3",children:[i.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-3",children:"Creating mobile access will generate login credentials for the HVAC Service app."}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Password (min 6 characters)"}),i.jsx("input",{type:"password",name:"password",value:r.password,onChange:d,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:d,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0})]})]})]}),o&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg text-sm",children:o})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",disabled:a,children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:bg-gray-400",disabled:a,children:a?"Creating...":"Save Technician"})]})]})})},_le=({technician:t,onClose:e,onUpdate:r})=>{const[n,a]=V.useState(t),s=c=>{const{name:d,value:h,type:m,checked:p}=c.target;a(y=>({...y,[d]:m==="checkbox"?p:h}))},o=c=>{c.preventDefault(),r(n),e()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:o,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Edit Technician"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Name"}),i.jsx("input",{type:"text",name:"name",value:n.name,onChange:s,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:n.email,onChange:s,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Phone"}),i.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:s,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Status"}),i.jsxs("select",{name:"status",value:n.status,onChange:s,className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",children:[i.jsx("option",{children:"Available"}),i.jsx("option",{children:"En Route"}),i.jsx("option",{children:"On Site"}),i.jsx("option",{children:"On Break"}),i.jsx("option",{children:"On Call"}),i.jsx("option",{children:"Day Off"})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",name:"mobileAccess",id:"editMobileAccess",checked:n.mobileAccess||!1,onChange:s,className:"h-4 w-4 text-blue-600"}),i.jsxs("label",{htmlFor:"editMobileAccess",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[i.jsx(qd,{size:16}),"Mobile App Access"]})]}),n.mobileAccess&&i.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Firebase account already created. Contact IT for password reset if needed."})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:e,className:"text-gray-700 dark:text-gray-300 font-bold py-2 px-4",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},jle=({technician:t,onClose:e})=>{const[r,n]=V.useState(!1);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[i.jsx(o6,{size:24}),"Mobile App Credentials"]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:t.name}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"ml-2 font-mono text-blue-600 dark:text-blue-400",children:t.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Password:"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"ml-2 font-mono text-blue-600 dark:text-blue-400",children:r&&t.mobileCredentials?.temporaryPassword||"••••••••"}),i.jsx("button",{onClick:()=>n(!r),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:r?"Hide":"Show"})]})]})]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:i.jsxs("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[i.jsx("strong",{children:"Security Note:"})," Share these credentials securely with the technician. They should change the password after their first login."]})})]}),i.jsx("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:e,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Close"})})]})})},Nle=()=>{const{technicians:t,handlers:e}=Zr(),[r,n]=V.useState(!1),[a,s]=V.useState(null),[o,c]=V.useState(null);return t?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Technician Management"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage field technicians and mobile app access"})]}),i.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[i.jsx(aa,{size:20})," Add New Technician"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(d=>i.jsx("div",{className:"border border-gray-200 dark:border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.name}),i.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${wle(d.status)}`,children:d.status}),d.mobileAccess&&i.jsxs("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200 flex items-center gap-1",children:[i.jsx(qd,{size:12}),"Mobile Access"]})]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(v1,{size:14})," ",d.email]}),i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(b1,{size:14})," ",d.phone]})]}),d.mobileAccess&&d.mobileCredentials&&i.jsx("div",{className:"mt-2",children:i.jsxs("button",{onClick:()=>c(d),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[i.jsx(o6,{size:12}),"View Mobile Credentials"]})})]}),d.name!=="Unassigned"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>s(d),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-slate-700 rounded-full",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>e.deleteTechnician(d.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-slate-700 rounded-full",children:i.jsx(Jt,{size:16})})]})]})},d.id))}),i.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Mobile App Integration"}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[i.jsx("p",{children:"• Technicians with mobile access can use the HVAC Service Reporter app"}),i.jsx("p",{children:"• They can view assigned work orders and submit completed service reports"}),i.jsx("p",{children:"• Service reports automatically sync back to this system"}),i.jsxs("p",{children:["• Currently ",i.jsx("strong",{children:t.filter(d=>d.mobileAccess).length})," technicians have mobile access"]})]})]}),r&&i.jsx(kle,{onAdd:e.addTechnician,onClose:()=>n(!1)}),a&&i.jsx(_le,{technician:a,onUpdate:e.updateTechnician,onClose:()=>s(null)}),o&&i.jsx(jle,{technician:o,onClose:()=>c(null)})]}):i.jsx("div",{className:"p-6",children:"Loading technician data..."})},Ei={PAID:"Paid",PENDING:"Pending",OVERDUE:"Overdue",DRAFT:"Draft"},gD=t=>{try{if(!t)return"N/A";const e=new Date(t);return isNaN(e.getTime())?"Invalid Date":e.toLocaleDateString()}catch(e){return console.warn("Date formatting error:",e),"Invalid Date"}},Sle=t=>{const{type:e,data:r}=t;if(!e||!r)throw new Error("Missing document type or data");if(!r.id||!r.customerName)throw new Error("Missing required fields: id or customerName");if(!r.lineItems||!Array.isArray(r.lineItems))throw new Error("Line items are required and must be an array");if(r.lineItems.length===0)throw new Error("At least one line item is required");return!0},Ele=()=>{if(!window.jspdf||!window.jspdf.jsPDF)throw new Error("jsPDF library is not loaded. Please refresh the page and try again.");const{jsPDF:t}=window.jspdf;if(typeof new t().autoTable!="function")throw new Error("autoTable plugin is not available. Please ensure jspdf-autotable is loaded.");return{jsPDF:t}},I5=t=>{try{const{jsPDF:e}=Ele();Sle(t);const r=new e,{type:n,data:a,workOrder:s,customer:o}=t;r.setFontSize(24),r.setFont(void 0,"bold"),r.text("MECHANICAL TEMP",20,30),r.setFontSize(12),r.setFont(void 0,"normal"),r.text("23093 Telegraph Rd",20,40),r.text("Southfield, MI 48033",20,47),r.text("Phone: (313) 282-4758",20,54),r.text("Email: office@mechanicaltemp.com",20,61),r.setFontSize(20),r.setFont(void 0,"bold"),r.text(n.toUpperCase(),200,30,{align:"right"}),r.setFontSize(12),r.setFont(void 0,"normal"),r.text(`${n} #: ${a.id}`,200,45,{align:"right"}),r.text(`Date: ${gD(a.date)}`,200,52,{align:"right"}),a.dueDate&&r.text(`Due Date: ${gD(a.dueDate)}`,200,59,{align:"right"});let c=80;if(r.setFontSize(14),r.setFont(void 0,"bold"),r.text("Bill To:",20,c),r.setFont(void 0,"normal"),r.setFontSize(12),c+=7,r.text(a.customerName||"Unknown Customer",20,c),o?.billingAddress){c+=7,r.text(o.billingAddress.street||"",20,c),c+=7;const y=o.billingAddress.city||"",v=o.billingAddress.state||"",w=o.billingAddress.zip||"";r.text(`${y}, ${v} ${w}`.trim(),20,c)}if(s){c+=10,r.setFont(void 0,"bold"),r.text("Service Location:",20,c),r.setFont(void 0,"normal"),c+=7;const y=s.Company||"N/A",v=s.City||"",w=s.State||"";r.text(`${y} - ${v}, ${w}`,20,c)}c+=15;const d=[["Description","Qty","Rate","Amount"]],h=a.lineItems.map(y=>[y.description||"No description",y.quantity||0,Ye(y.rate||0),Ye(y.amount||0)]);r.autoTable({startY:c,head:d,body:h,theme:"striped",headStyles:{fillColor:[22,163,74]},margin:{left:20,right:20}}),c=r.lastAutoTable.finalY+10;const m=200;if(r.setFontSize(12),r.text("Subtotal:",m-50,c,{align:"right"}),r.text(Ye(a.subtotal||0),m,c,{align:"right"}),a.discount&&a.discount>0&&(c+=7,r.text("Discount:",m-50,c,{align:"right"}),r.text(`-${Ye(a.discount)}`,m,c,{align:"right"})),a.lateFee&&a.lateFee>0&&(c+=7,r.text("Late Fee:",m-50,c,{align:"right"}),r.text(Ye(a.lateFee),m,c,{align:"right"})),c+=7,r.setFont(void 0,"bold"),r.text("Total:",m-50,c,{align:"right"}),r.text(Ye(a.total||0),m,c,{align:"right"}),s&&o){const v=(o.locations||[]).find(w=>w.name===s.Company&&w.locNum===s["Loc #"]);if(v?.assets&&v.assets.length>0){const w=s.servicedAssets?v.assets.filter(k=>s.servicedAssets.includes(k.name)):v.assets;if(w.length>0){c=Math.max(r.lastAutoTable.finalY,c)+15,r.setFontSize(14),r.setFont(void 0,"bold"),r.text("Serviced Assets:",20,c),c+=7;const k=w.map(b=>[b.name||"N/A",b.brand||"N/A",b.model||"N/A",b.serialNumber||"N/A"]);r.autoTable({startY:c,head:[["Name","Brand","Model","Serial #"]],body:k,theme:"grid",headStyles:{fillColor:[100,116,139]},margin:{left:20,right:20}})}}}const p=`${n}-${a.id}.pdf`;r.save(p),console.log(`PDF generated successfully: ${p}`)}catch(e){console.error("PDF Generation Error:",e);let r="Failed to generate PDF. ";return e.message.includes("library")?r+="Please refresh the page and try again.":e.message.includes("required")?r+="Missing required information.":r+="Please try again or contact support.",alert(r),!1}},O5=(t,e,r)=>{try{if(!t)throw new Error("Invoice data is required");if(!t.id)throw new Error("Invoice ID is required");const n=(e||[]).find(o=>o.id===t.workOrderId),a=(r||[]).find(o=>o.id===t.customerId);return I5({type:"Invoice",data:t,workOrder:n,customer:a})!==!1}catch(n){return console.error("Invoice PDF generation failed:",n),alert("Failed to generate invoice PDF: "+n.message),!1}},R5=(t,e)=>{try{if(!t)throw new Error("Quote data is required");if(!t.id)throw new Error("Quote ID is required");const r=(e||[]).find(a=>a.id===t.customerId);return I5({type:"Quote",data:t,customer:r})!==!1}catch(r){return console.error("Quote PDF generation failed:",r),alert("Failed to generate quote PDF: "+r.message),!1}},Tle=({onClose:t})=>{const{workOrders:e,customers:r,handlers:n}=Zr(),[a,s]=V.useState(""),[o,c]=V.useState([{description:"Service Call",quantity:1,rate:150,amount:150}]),[d,h]=V.useState(""),m=V.useMemo(()=>!a||!e?null:e.find(N=>N.id===a),[a,e]),p=V.useMemo(()=>!m||!r?null:r.find(N=>N.name===m.Client),[m,r]);V.useEffect(()=>{m?(c(m.lineItems||[{description:`Service for WO# ${m["WO#"]}`,quantity:1,rate:150,amount:150}]),h(m.Task||"")):(c([{description:"Service Call",quantity:1,rate:150,amount:150}]),h(""))},[m]);const y=(N,S,E)=>{const P=[...o],_=P[N];_[S]=E;const O=parseFloat(_.quantity)||0,T=parseFloat(_.rate)||0;_.amount=O*T,c(P)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0}]),w=N=>{o.length>1&&c(o.filter((S,E)=>E!==N))},k=()=>{if(!m)return alert("Please select a work order.");const N=o.reduce((P,_)=>P+(_.amount||0),0),E={id:`INV-${Date.now()}`,workOrderId:m.id,customerId:p?.id||"",customerName:m.Client,workOrderNumber:m["WO#"],date:new Date().toISOString(),lineItems:o,subtotal:N,discount:0,lateFee:0,total:N,status:Ei.DRAFT,description:d};n.addInvoice(E),t()},b=o.reduce((N,S)=>N+(S.amount||0),0);return!e||!r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading Data..."})}):i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Create New Invoice"}),i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(si,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Select Work Order to Invoice"}),i.jsxs("select",{value:a,onChange:N=>s(N.target.value),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Select Work Order --"}),(e||[]).filter(N=>N["Order Status"]==="Completed").map(N=>i.jsxs("option",{value:N.id,children:[N["WO#"]," - ",N.Company]},N.id))]})]}),m&&p&&i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:p.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[p.billingAddress?.city,", ",p.billingAddress?.state," ",p.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[m.Company," (#",m["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m.City,", ",m.State]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Work Description"}),i.jsx("textarea",{value:d,onChange:N=>h(N.target.value),placeholder:"Describe the work performed...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((N,S)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:N.description,onChange:E=>y(S,"description",E.target.value),className:"col-span-6 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Qty",value:N.quantity,onChange:E=>y(S,"quantity",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Rate",value:N.rate,onChange:E=>y(S,"rate",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("span",{className:"col-span-1 text-right font-mono",children:Ye(N.amount)}),i.jsx("button",{onClick:()=>w(S),className:"col-span-1 text-red-500",disabled:o.length===1,children:i.jsx(Jt,{size:18})})]},S))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(b)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{type:"button",onClick:k,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",disabled:!a,children:"Create Invoice"})]})]})})},Ale=({onClose:t})=>{const{workOrders:e,customers:r,handlers:n}=Zr(),[a,s]=V.useState(""),[o,c]=V.useState([{description:"",quantity:1,rate:0,amount:0}]),[d,h]=V.useState(""),m=V.useMemo(()=>!a||!e?null:e.find(N=>N.id===a),[a,e]),p=V.useMemo(()=>!m||!r?null:r.find(N=>N.name===m.Client),[m,r]);V.useEffect(()=>{m?(c(m.lineItems||[{description:`Quote for WO# ${m["WO#"]}`,quantity:1,rate:0,amount:0}]),h(m.Task||"")):(c([{description:"",quantity:1,rate:0,amount:0}]),h(""))},[m]);const y=(N,S,E)=>{const P=[...o],_=P[N];_[S]=E;const O=parseFloat(_.quantity)||0,T=parseFloat(_.rate)||0;_.amount=O*T,c(P)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0}]),w=N=>{o.length>1&&c(o.filter((S,E)=>E!==N))},k=()=>{if(!m)return alert("Please select a work order to generate a quote.");const N=o.reduce((P,_)=>P+(_.amount||0),0),E={id:`QUO-${Date.now()}`,workOrderId:m.id,customerId:p?.id||"",customerName:m.Client,date:new Date().toISOString(),lineItems:o,subtotal:N,total:N,status:"Draft",description:d};n.addQuote(E),t()},b=o.reduce((N,S)=>N+(S.amount||0),0);return!e||!r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading Data..."})}):i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Create New Quote"}),i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(si,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Select Work Order to Quote"}),i.jsxs("select",{value:a,onChange:N=>s(N.target.value),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Select Work Order --"}),(e||[]).map(N=>i.jsxs("option",{value:N.id,children:[N["WO#"]," - ",N.Company]},N.id))]})]}),m&&p&&i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:p.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[p.billingAddress?.city,", ",p.billingAddress?.state," ",p.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[m.Company," (#",m["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m.City,", ",m.State]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Quote Description"}),i.jsx("textarea",{value:d,onChange:N=>h(N.target.value),placeholder:"Describe the work to be quoted...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((N,S)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:N.description,onChange:E=>y(S,"description",E.target.value),className:"col-span-6 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Qty",value:N.quantity,onChange:E=>y(S,"quantity",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("input",{type:"number",placeholder:"Rate",value:N.rate,onChange:E=>y(S,"rate",E.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600"}),i.jsx("span",{className:"col-span-1 text-right font-mono",children:Ye(N.amount)}),i.jsx("button",{onClick:()=>w(S),className:"col-span-1 text-red-500",disabled:o.length===1,children:i.jsx(Jt,{size:18})})]},S))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(b)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:t,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{type:"button",onClick:k,className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",disabled:!a,children:"Create Quote"})]})]})})},D5=()=>{const{editingInvoice:t,setEditingInvoice:e,db:r,userId:n,workOrders:a,customers:s}=Zr(),[o,c]=V.useState([]),[d,h]=V.useState(0),[m,p]=V.useState(0),[y,v]=V.useState(""),w=V.useMemo(()=>!t||!a?null:a.find(R=>R.id===t.workOrderId),[t,a]),k=V.useMemo(()=>!t||!s?null:s.find(R=>R.id===t.customerId),[t,s]),b=V.useMemo(()=>!w||!k?[]:k?.locations?.find(M=>M.name===w.Company&&M.locNum===w["Loc #"])?.assets||[],[w,k]);V.useEffect(()=>{t&&(c(t.lineItems||[{description:"",quantity:1,rate:0,amount:0,asset:""}]),h(t.discount||0),p(t.lateFee||0),v(t.description||w?.Task||""))},[t,w]);const N=(R,M,D)=>{const A=[...o],F=A[R];F[M]=D;const L=parseFloat(F.quantity)||0,Z=parseFloat(F.rate)||0;F.amount=L*Z,c(A)},S=()=>{c([...o,{description:"",quantity:1,rate:0,amount:0,asset:""}])},E=R=>{o.length>1&&c(o.filter((M,D)=>D!==R))},P=()=>{const R={...t,lineItems:o,discount:d,lateFee:m,description:y};hj(r,n,t.id,R),e(null)},_=()=>e(null);if(!t)return null;const O=o.reduce((R,M)=>R+(M.amount||0),0),T=O-d+m;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Edit Invoice #",t.id]}),i.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(si,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:k?.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:k?.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[k?.billingAddress?.city,", ",k?.billingAddress?.state," ",k?.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Service Location"}),i.jsxs("p",{className:"text-gray-800 dark:text-white",children:[w?.Company," (#",w?.["Loc #"],")"]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[w?.City,", ",w?.State]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["WO#: ",w?.["WO#"]]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Work Description"}),i.jsx("textarea",{value:y,onChange:R=>v(R.target.value),placeholder:"Describe the work performed...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((R,M)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:R.description,onChange:D=>N(M,"description",D.target.value),className:"col-span-5 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsxs("select",{value:R.asset||"",onChange:D=>N(M,"asset",D.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- No Asset --"}),b.map(D=>i.jsx("option",{value:D.name,children:D.name},D.name))]}),i.jsx("input",{type:"number",placeholder:"Qty",value:R.quantity,onChange:D=>N(M,"quantity",D.target.value),className:"col-span-1 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("input",{type:"number",placeholder:"Rate",value:R.rate,onChange:D=>N(M,"rate",D.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("span",{className:"col-span-1 text-right font-mono text-gray-800 dark:text-white",children:Ye(R.amount)}),i.jsx("button",{onClick:()=>E(M),className:"col-span-1 text-red-500 hover:text-red-400 disabled:opacity-50",disabled:o.length===1,children:i.jsx(Jt,{size:18})})]},M))}),i.jsx("button",{onClick:S,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Discount ($)"}),i.jsx("input",{type:"number",value:d,onChange:R=>h(parseFloat(R.target.value)||0),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Late Fee ($)"}),i.jsx("input",{type:"number",value:m,onChange:R=>p(parseFloat(R.target.value)||0),className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:[i.jsxs("p",{children:["Subtotal: ",i.jsx("span",{className:"font-mono",children:Ye(O)})]}),i.jsxs("p",{className:"font-bold text-lg",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(T)})]})]})]})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("button",{onClick:()=>O5(t,a,s),className:"flex items-center gap-2 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:[i.jsx(Bd,{size:16})," View as PDF"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:_,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{onClick:P,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})})},M5=()=>{const{editingQuote:t,setEditingQuote:e,db:r,userId:n,customers:a,handlers:s}=Zr(),[o,c]=V.useState([]),[d,h]=V.useState(""),m=V.useMemo(()=>!t||!a?null:a.find(E=>E.id===t.customerId),[t,a]),p=V.useMemo(()=>!m||!m.locations?[]:m.locations.flatMap(E=>E.assets||[]),[m]);V.useEffect(()=>{t&&(c(t.lineItems||[{description:"",quantity:1,rate:0,amount:0,asset:""}]),h(t.description||""))},[t]);const y=(E,P,_)=>{const O=[...o],T=O[E];T[P]=_;const R=parseFloat(T.quantity)||0,M=parseFloat(T.rate)||0;T.amount=R*M,c(O)},v=()=>c([...o,{description:"",quantity:1,rate:0,amount:0,asset:""}]),w=E=>{o.length>1&&c(o.filter((P,_)=>_!==E))},k=()=>{const E=o.reduce((_,O)=>_+(O.amount||0),0),P={...t,lineItems:o,subtotal:E,total:E,description:d};md(r,n,t.id,P),e(null)},b=()=>{if(!t)return;const E=o.reduce((_,O)=>_+(O.amount||0),0),P={id:`INV-${Date.now()}`,quoteId:t.id,customerId:t.customerId,customerName:t.customerName,date:new Date().toISOString(),lineItems:o,subtotal:E,discount:0,lateFee:0,total:E,status:Ei.DRAFT,description:d};s.addInvoice(P),s.updateQuote({...t,status:"Converted"}),e(null)},N=()=>e(null);if(!t)return null;const S=o.reduce((E,P)=>E+(P.amount||0),0);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Edit Quote #",t.id]}),i.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(pp,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Bill To"}),i.jsx("p",{className:"text-gray-800 dark:text-white",children:m?.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:m?.billingAddress?.street}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[m?.billingAddress?.city,", ",m?.billingAddress?.state," ",m?.billingAddress?.zip]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:"Primary Contact"}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(M0,{size:14})," ",m?.contact?.name]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(v1,{size:14})," ",m?.contact?.email]}),i.jsxs("p",{className:"flex items-center gap-2 text-gray-800 dark:text-gray-300",children:[i.jsx(b1,{size:14})," ",m?.contact?.phone]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Quote Description"}),i.jsx("textarea",{value:d,onChange:E=>h(E.target.value),placeholder:"Describe the work being quoted...",className:"w-full p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2",children:o.map((E,P)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",placeholder:"Description",value:E.description,onChange:_=>y(P,"description",_.target.value),className:"col-span-5 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsxs("select",{value:E.asset||"",onChange:_=>y(P,"asset",_.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- No Asset --"}),p.map(_=>i.jsx("option",{value:_.name,children:_.name},_.name))]}),i.jsx("input",{type:"number",placeholder:"Qty",value:E.quantity,onChange:_=>y(P,"quantity",_.target.value),className:"col-span-1 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("input",{type:"number",placeholder:"Rate",value:E.rate,onChange:_=>y(P,"rate",_.target.value),className:"col-span-2 p-2 border rounded bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"}),i.jsx("span",{className:"col-span-1 text-right font-mono text-gray-800 dark:text-white",children:Ye(E.amount)}),i.jsx("button",{onClick:()=>w(P),className:"col-span-1 text-red-500 hover:text-red-400 disabled:opacity-50",disabled:o.length===1,children:i.jsx(Jt,{size:18})})]},P))}),i.jsx("button",{onClick:v,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ Add Item"})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 p-4 rounded-lg text-right",children:i.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Total: ",i.jsx("span",{className:"font-mono",children:Ye(S)})]})})]}),i.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("button",{onClick:()=>R5(t,a),className:"flex items-center gap-2 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:[i.jsx(Bd,{size:16})," View as PDF"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:b,className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[i.jsx(Bi,{size:16})," Convert to Invoice"]}),i.jsx("button",{onClick:N,className:"font-bold py-2 px-4 text-gray-700 dark:text-gray-300",children:"Cancel"}),i.jsx("button",{onClick:k,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})})},Cle=()=>{const{invoices:t,quotes:e,workOrders:r,customers:n,handlers:a,editingInvoice:s,setEditingInvoice:o,editingQuote:c,setEditingQuote:d}=Zr(),[h,m]=V.useState("invoices"),[p,y]=V.useState(!1),[v,w]=V.useState(!1),[k,b]=V.useState(new Set),[N,S]=V.useState(!1);V.useEffect(()=>{let D=0;const A=25,F=()=>{if(D++,window.jspdf&&window.jspdf.jsPDF)try{if(typeof new window.jspdf.jsPDF().autoTable=="function"){S(!0);return}}catch(L){console.warn("PDF library test failed:",L)}D<A?setTimeout(F,200):(console.error("PDF libraries failed to load after 5 seconds"),S(!1))};F()},[]);const E=V.useMemo(()=>{const D=t||[],A=D.reduce((ne,z)=>ne+(z.total||0),0),F=D.filter(ne=>ne.status===Ei.PAID),L=D.filter(ne=>ne.status!==Ei.PAID),Z=F.reduce((ne,z)=>ne+(z.total||0),0),ae=L.reduce((ne,z)=>ne+(z.total||0),0),W=e||[],G=W.reduce((ne,z)=>ne+(z.total||0),0),Y=W.filter(ne=>ne.status==="Draft"||ne.status==="Pending"),te=W.filter(ne=>ne.status==="Approved");return{totalInvoiceAmount:A,paidInvoicesCount:F.length,unpaidInvoicesCount:L.length,totalPaidAmount:Z,totalUnpaidAmount:ae,totalQuoteAmount:G,pendingQuotesCount:Y.length,approvedQuotesCount:te.length}},[t,e]),P=D=>{const A=new Set(k);A.has(D)?A.delete(D):A.add(D),b(A)},_=D=>({[Ei.PAID]:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",[Ei.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",[Ei.OVERDUE]:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",[Ei.DRAFT]:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",Draft:"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",Pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",Approved:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",Rejected:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200","Converted to Work Order":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200"})[D]||"bg-gray-100 text-gray-800 dark:bg-gray-600/50 dark:text-gray-200",O=(D,...A)=>{D(...A)&&console.log("PDF generated successfully")},T=async D=>{if(window.confirm(`Approve quote ${D.id} for ${D.customerName}?`))try{a.approveQuote?await a.approveQuote(D):await a.updateQuote({...D,status:"Approved",approvedAt:new Date().toISOString()})}catch(A){console.error("Error approving quote:",A),alert("Failed to approve quote")}},R=async D=>{if(window.confirm(`Reject quote ${D.id} for ${D.customerName}?`))try{a.rejectQuote?await a.rejectQuote(D):await a.updateQuote({...D,status:"Rejected",rejectedAt:new Date().toISOString()})}catch(A){console.error("Error rejecting quote:",A),alert("Failed to reject quote")}},M=async D=>{if(window.confirm(`Convert approved quote ${D.id} to a work order?`))try{if(a.convertQuoteToWorkOrder)await a.convertQuoteToWorkOrder(D),alert(`Work order created successfully from quote ${D.id}`);else{const A={"WO#":`WO-${Date.now()}`,Client:D.customerName,Company:D.customerName,Task:`Work from Quote #${D.id}`,NTE:D.total,"Order Status":"Open","Schedule Date":"",Priority:"Regular",technician:[],quoteId:D.id,lineItems:D.lineItems||[],notes:[`Created from approved quote #${D.id}`]};await a.addNewOrder(A),await a.updateQuote({...D,status:"Converted to Work Order",convertedAt:new Date().toISOString()}),alert(`Work order created successfully from quote ${D.id}`)}}catch(A){console.error("Error converting quote to work order:",A),alert("Failed to convert quote to work order")}};return!t||!e||!r||!n?i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading billing data..."})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Billing & Invoicing"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700",children:[i.jsx(Bi,{size:20})," Create Invoice"]}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[i.jsx(aa,{size:20})," Create Quote"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Invoiced"}),i.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:Ye(E.totalInvoiceAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(t||[]).length," invoices"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Collected"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ye(E.totalPaidAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.paidInvoicesCount," paid"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Outstanding"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:Ye(E.totalUnpaidAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.unpaidInvoicesCount," unpaid"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quotes Pending"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ye(E.totalQuoteAmount)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.pendingQuotesCount," pending"]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quotes Approved"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:E.approvedQuotesCount}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ready to convert"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[i.jsx("div",{className:"border-b dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex gap-6 px-6",children:[i.jsxs("button",{onClick:()=>m("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="invoices"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["Invoices (",(t||[]).length,")"]}),i.jsxs("button",{onClick:()=>m("quotes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="quotes"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["Quotes (",(e||[]).length,")"]})]})}),i.jsxs("div",{className:"p-6",children:[h==="invoices"&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-3",children:"Invoice ID"}),i.jsx("th",{scope:"col",className:"p-3",children:"Customer"}),i.jsx("th",{scope:"col",className:"p-3",children:"Date"}),i.jsx("th",{scope:"col",className:"p-3",children:"Items"}),i.jsx("th",{scope:"col",className:"p-3",children:"Total"}),i.jsx("th",{scope:"col",className:"p-3",children:"Status"}),i.jsx("th",{scope:"col",className:"p-3",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(D=>i.jsxs(Q.Fragment,{children:[i.jsxs("tr",{className:"bg-white border-b dark:bg-slate-800 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:["#",D.id]}),i.jsx("td",{className:"p-3",children:D.customerName}),i.jsx("td",{className:"p-3",children:new Date(D.date).toLocaleDateString()}),i.jsx("td",{className:"p-3",children:i.jsxs("button",{onClick:()=>P(D.id),className:"flex items-center gap-1 text-blue-600 hover:text-blue-500",children:[D.lineItems?.length||0," items ",i.jsx(Fd,{size:14})]})}),i.jsx("td",{className:"p-3 font-mono font-semibold",children:Ye(D.total)}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_(D.status)}`,children:D.status})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>O(O5,D,r,n),className:"flex items-center gap-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white disabled:opacity-50 disabled:cursor-wait",disabled:!N,title:N?"Generate PDF":"PDF library loading...",children:[i.jsx(Bd,{size:16})," ",!N&&"Loading..."]}),D.status!==Ei.PAID?i.jsxs("button",{onClick:()=>a.markInvoicePaid(D.id,!0),className:"flex items-center gap-1 text-green-600 hover:text-green-500 text-xs",children:[i.jsx(ta,{size:16})," Mark Paid"]}):i.jsxs("button",{onClick:()=>a.markInvoicePaid(D.id,!1),className:"flex items-center gap-1 text-orange-600 hover:text-orange-500 text-xs",children:[i.jsx(pp,{size:16})," Mark Unpaid"]}),i.jsxs("button",{onClick:()=>o(D),className:"flex items-center gap-1 font-semibold text-blue-600 hover:text-blue-500 text-xs",children:[i.jsx(pA,{size:16})," Edit"]})]})})]}),k.has(D.id)&&i.jsx("tr",{className:"bg-gray-50 dark:bg-slate-900/50",children:i.jsxs("td",{colSpan:"7",className:"p-4",children:[i.jsx("h4",{className:"font-bold mb-2 text-gray-800 dark:text-white",children:"Invoice Details:"}),i.jsx("ul",{className:"list-disc pl-5 text-gray-700 dark:text-gray-300 space-y-1",children:(D.lineItems||[]).map((A,F)=>i.jsxs("li",{children:[A.quantity,"x ",A.description," @ ",Ye(A.rate)," = ",Ye(A.amount)]},F))}),i.jsxs("div",{className:"mt-2 pt-2 border-t dark:border-slate-600 text-right text-gray-800 dark:text-white",children:[i.jsxs("p",{children:["Subtotal: ",Ye(D.subtotal)]}),D.discount>0&&i.jsxs("p",{className:"text-green-600",children:["Discount: -",Ye(D.discount)]}),D.lateFee>0&&i.jsxs("p",{className:"text-red-600",children:["Late Fee: +",Ye(D.lateFee)]}),i.jsxs("p",{className:"font-bold text-lg",children:["Total: ",Ye(D.total)]})]})]})})]},D.id))})]})}),h==="quotes"&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-3",children:"Quote ID"}),i.jsx("th",{scope:"col",className:"p-3",children:"Customer"}),i.jsx("th",{scope:"col",className:"p-3",children:"Date"}),i.jsx("th",{scope:"col",className:"p-3",children:"Total"}),i.jsx("th",{scope:"col",className:"p-3",children:"Status"}),i.jsx("th",{scope:"col",className:"p-3",children:"Actions"})]})}),i.jsx("tbody",{children:e.map(D=>i.jsxs("tr",{className:"bg-white border-b dark:bg-slate-800 dark:border-slate-700",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:D.id}),i.jsx("td",{className:"p-3",children:D.customerName}),i.jsx("td",{className:"p-3",children:new Date(D.date).toLocaleDateString()}),i.jsx("td",{className:"p-3 font-mono",children:Ye(D.total)}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_(D.status)}`,children:D.status})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>O(R5,D,n),className:"flex items-center gap-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white disabled:opacity-50",disabled:!N,title:N?"Generate PDF":"PDF library loading...",children:i.jsx(Bd,{size:16})}),D.status==="Draft"||D.status==="Pending"?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>T(D),className:"flex items-center gap-1 text-green-600 hover:text-green-500 text-xs",title:"Approve Quote",children:[i.jsx(yz,{size:14})," Approve"]}),i.jsxs("button",{onClick:()=>R(D),className:"flex items-center gap-1 text-red-600 hover:text-red-500 text-xs",title:"Reject Quote",children:[i.jsx(gz,{size:14})," Reject"]})]}):D.status==="Approved"?i.jsxs("button",{onClick:()=>M(D),className:"flex items-center gap-1 text-blue-600 hover:text-blue-500 text-xs",title:"Convert to Work Order",children:[i.jsx(Na,{size:14})," Create WO"]}):null,i.jsxs("button",{onClick:()=>d(D),className:"flex items-center gap-1 font-semibold text-blue-600 hover:text-blue-500 text-xs",children:[i.jsx(pA,{size:14})," Edit"]})]})})]},D.id))})]})})]})]}),p&&i.jsx(Tle,{onClose:()=>y(!1)}),v&&i.jsx(Ale,{onClose:()=>w(!1)}),s&&i.jsx(D5,{}),c&&i.jsx(M5,{})]})},Ple=()=>{const{workOrders:t,technicians:e}=Zr();if(!t||!e)return i.jsx("div",{className:"p-6",children:"Loading reporting data..."});const r=t.filter(d=>d["Order Status"]==="Completed"),n=r.reduce((d,h)=>d+(h.NTE||0),0),a=V.useMemo(()=>e.filter(h=>h.name!=="Unassigned").map(h=>{const m=t.filter(p=>p.technician?.includes(h.name)&&p["Order Status"]==="Completed").length;return{name:h.name,count:m}}).sort((h,m)=>m.count-h.count),[t,e]),s=Math.max(...a.map(d=>d.count),0),o=d=>d===0?"text-yellow-500":d===1?"text-gray-400":d===2?"text-yellow-600":"text-gray-400",c=()=>{alert("PDF download functionality would be implemented here with a proper PDF library")};return i.jsxs("div",{id:"reporting-view",className:"bg-white dark:bg-slate-700 p-6 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Reporting Dashboard"}),i.jsxs("button",{onClick:c,className:"flex items-center gap-2 bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700",children:[i.jsx(Sc,{size:20})," Download PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-slate-600 rounded-lg text-center",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400",children:"Completed Jobs"}),i.jsx("p",{className:"text-5xl font-bold text-green-600",children:r.length})]}),i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-slate-600 rounded-lg text-center",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400",children:"Potential Revenue"}),i.jsx("p",{className:"text-5xl font-bold text-blue-600",children:Ye(n)})]})]}),i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-slate-600 rounded-lg",children:[i.jsx("h4",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Technician Leaderboard"}),i.jsx("div",{className:"space-y-4",children:a.map((d,h)=>i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 text-center",children:h<3?i.jsx(nz,{size:24,className:o(h)}):i.jsx("span",{className:"text-lg font-bold text-gray-400 dark:text-gray-500",children:h+1})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-gray-800 dark:text-white",children:d.name}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-600 rounded-full h-4 mt-1",children:i.jsx("div",{className:"bg-blue-600 h-4 rounded-full",style:{width:`${s>0?d.count/s*100:0}%`}})})]}),i.jsx("div",{className:"w-12 text-right font-bold text-lg text-gray-800 dark:text-white",children:d.count})]},d.name))})]})]})},Ile=()=>{const{workOrders:t,invoices:e}=Zr(),[r,n]=V.useState(""),[a,s]=V.useState(0),[o,c]=V.useState(0),[d,h]=V.useState(0),[m,p]=V.useState(!0);if(!t)return i.jsx("div",{className:"p-6",children:"Loading calculator data..."});const y=V.useMemo(()=>(t||[]).filter(E=>E["Order Status"]==="Completed"),[t]),v=V.useMemo(()=>!r||!e?[]:e.filter(E=>E.workOrderId===r),[r,e]),w=V.useMemo(()=>v.reduce((E,P)=>E+(P.total||0),0),[v]);V.useEffect(()=>{const E=t.find(P=>P.id===r);if(E){const P=m&&w>0?w:E.NTE||0;s(P),c(E.materialCost||0),h(E.laborCost||0)}else s(0),c(0),h(0)},[r,t,w,m]);const k=o+d,b=a-k,N=a>0?b/a*100:0,S=t.find(E=>E.id===r);return i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Profit & Margin Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 rounded-lg space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Load Data from Completed Work Order (Optional)"}),i.jsxs("select",{value:r,onChange:E=>n(E.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"-- Manual Entry --"}),y.map(E=>{const P=e?e.filter(O=>O.workOrderId===E.id).length:0,_=e?e.filter(O=>O.workOrderId===E.id).reduce((O,T)=>O+(T.total||0),0):0;return i.jsxs("option",{value:E.id,children:[E["WO#"]," - ",E.Company,P>0?` [${P} invoice(s): ${Ye(_)}]`:` [NTE: ${Ye(E.NTE)}]`]},E.id)})]})]}),S&&v.length>0&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Revenue Source:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"useInvoiceData",checked:m,onChange:E=>p(E.target.checked),className:"h-4 w-4"}),i.jsx("label",{htmlFor:"useInvoiceData",className:"text-sm text-blue-700 dark:text-blue-300",children:"Use Invoice Total"})]})]}),i.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Work Order NTE:"}),i.jsx("span",{className:"font-mono",children:Ye(S.NTE||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Total Invoiced (",v.length," invoice",v.length!==1?"s":"","):"]}),i.jsx("span",{className:"font-mono",children:Ye(w)})]}),v.map((E,P)=>i.jsxs("div",{className:"flex justify-between text-xs ml-4",children:[i.jsxs("span",{children:["• Invoice #",E.id,":"]}),i.jsx("span",{className:"font-mono",children:Ye(E.total||0)})]},E.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:["Total Revenue ($)",S&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:m&&w>0?"(from invoices)":"(from work order NTE)"})]}),i.jsx("input",{type:"number",value:a,onChange:E=>s(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Material Cost ($)"}),i.jsx("input",{type:"number",value:o,onChange:E=>c(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Labor Cost ($)"}),i.jsx("input",{type:"number",value:d,onChange:E=>h(parseFloat(E.target.value)||0),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 rounded-lg flex flex-col justify-center items-center space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Profit Margin"}),i.jsxs("p",{className:`text-6xl font-bold ${N>=25?"text-green-500":N>=15?"text-yellow-500":"text-red-500"}`,children:[N.toFixed(1),i.jsx("span",{className:"text-4xl",children:"%"})]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[N>=25&&"Excellent margin",N>=15&&N<25&&"Good margin",N<15&&N>=0&&"Low margin",N<0&&"Loss"]})]}),i.jsxs("div",{className:"w-full grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Revenue"}),i.jsx("p",{className:"text-lg font-semibold text-blue-500",children:Ye(a)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cost"}),i.jsx("p",{className:"text-lg font-semibold text-red-500",children:Ye(k)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Net Profit"}),i.jsx("p",{className:`text-lg font-semibold ${b>=0?"text-green-500":"text-red-500"}`,children:Ye(b)})]})]}),S&&v.length>0&&i.jsx("div",{className:"w-full text-center text-xs",children:w!==(S.NTE||0)&&i.jsxs("div",{className:`px-2 py-1 rounded ${w>(S.NTE||0)?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[w>(S.NTE||0)?"↗":"↘",Ye(Math.abs(w-(S.NTE||0))),w>(S.NTE||0)?" over NTE":" under NTE"]})})]})]})]})},yD=t=>{switch(t?.toLowerCase()){case"completed":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},xD=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},vD=(t,e)=>{if(!t||!e)return"N/A";try{const r=new Date(t),a=new Date(e)-r,s=Math.floor(a/(1e3*60*60)),o=Math.floor(a%(1e3*60*60)/(1e3*60));return`${s}h ${o}m`}catch{return"N/A"}},Ole=()=>{const{serviceReports:t=[],technicians:e=[],workOrders:r=[],customers:n=[]}=Zr(),[a,s]=V.useState(""),[o,c]=V.useState("all"),[d,h]=V.useState("all"),[m,p]=V.useState("all"),[y,v]=V.useState(null),[w,k]=V.useState(!1),b=V.useMemo(()=>t?.length?t.filter(_=>{const O=!a||_.workOrderId?.toLowerCase().includes(a.toLowerCase())||_.customerName?.toLowerCase().includes(a.toLowerCase())||_.location?.toLowerCase().includes(a.toLowerCase())||_.technicianName?.toLowerCase().includes(a.toLowerCase()),T=o==="all"||_.status===o,R=d==="all"||_.technicianId===d,M=m==="all"||(()=>{const D=new Date(_.completedAt||_.createdAt),A=new Date;switch(m){case"today":return D.toDateString()===A.toDateString();case"week":const F=new Date(A.getTime()-10080*60*1e3);return D>=F;case"month":const L=new Date(A.getTime()-720*60*60*1e3);return D>=L;default:return!0}})();return O&&T&&R&&M}):[],[t,a,o,d,m]),N=_=>{v(_),k(!0)},S=_=>{_.pdfUrl?window.open(_.pdfUrl,"_blank"):console.log("Generate PDF for report:",_.id)},E=_=>e.find(T=>T.id===_)?.name||"Unknown Technician",P=_=>r.find(T=>T.id===_)||{};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Service Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View completed service reports from mobile technicians"})]}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.length," of ",t?.length||0," reports"]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search reports...",value:a,onChange:_=>s(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),i.jsx("div",{children:i.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"in_progress",children:"In Progress"}),i.jsx("option",{value:"pending",children:"Pending"})]})}),i.jsx("div",{children:i.jsxs("select",{value:d,onChange:_=>h(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Technicians"}),e?.filter(_=>_.mobileAccess).map(_=>i.jsx("option",{value:_.id,children:_.name},_.id))]})}),i.jsx("div",{children:i.jsxs("select",{value:m,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"week",children:"Past Week"}),i.jsx("option",{value:"month",children:"Past Month"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Work Order"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Technician"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Completed"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b?.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:[i.jsx(Bi,{className:"mx-auto w-12 h-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No service reports found"}),i.jsx("p",{className:"text-sm",children:"Service reports from mobile technicians will appear here"})]})}):b.map(_=>{const O=P(_.workOrderId);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.workOrderId}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[i.jsx(Rs,{className:"w-3 h-3 mr-1"}),_.location||O.location]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(M0,{className:"w-4 h-4 mr-2 text-gray-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E(_.technicianId)}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.technicianEmail})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.customerName||O.customerName})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${yD(_.status)}`,children:[_.status==="completed"&&i.jsx(ta,{className:"w-3 h-3 mr-1"}),_.status==="in_progress"&&i.jsx(Vd,{className:"w-3 h-3 mr-1"}),_.status==="pending"&&i.jsx(Mn,{className:"w-3 h-3 mr-1"}),(_.status||"pending").replace("_"," ").toUpperCase()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(O0,{className:"w-4 h-4 mr-1"}),xD(_.completedAt)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Vd,{className:"w-4 h-4 mr-1"}),vD(_.startTime,_.completedAt)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>N(_),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:i.jsx(cz,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>S(_),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Download PDF",children:i.jsx(Sc,{className:"w-4 h-4"})})]})})]},_.id)})})]})})}),w&&y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Service Report Details"}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Work Order: ",y.workOrderId]})]}),i.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(X,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Technician"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:E(y.technicianId)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Customer"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:y.customerName})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:y.location})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${yD(y.status)}`,children:(y.status||"pending").replace("_"," ").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Completed"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:xD(y.completedAt)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Duration"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:vD(y.startTime,y.completedAt)})]})]})]}),y.units&&y.units.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(Na,{className:"w-4 h-4 mr-2"}),"Units Serviced (",y.units.length,")"]}),i.jsx("div",{className:"space-y-4",children:y.units.map((_,O)=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Type"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:_.type})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Model"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:_.model||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Serial"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:_.serial||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:_.location||"N/A"})]})]}),_.notes&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Notes"}),i.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:_.notes})]}),_.photos&&_.photos.length>0&&i.jsxs("div",{className:"mt-3",children:[i.jsxs("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Photos (",_.photos.length,")"]}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:_.photos.map((T,R)=>i.jsx("img",{src:T.url||T,alt:`Unit ${O+1} Photo ${R+1}`,className:"w-full h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>window.open(T.url||T,"_blank")},R))})]})]},O))})]}),y.punchList&&y.punchList.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:["Punch List (",y.punchList.length," items)"]}),i.jsx("div",{className:"space-y-2",children:y.punchList.map((_,O)=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[i.jsx(ta,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:_.description||_}),_.completed&&i.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"✓ Completed"})]},O))})]}),y.notes&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-md font-medium text-gray-900 dark:text-white mb-2",children:"Service Notes"}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:i.jsx("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:y.notes})})]}),y.photos&&y.photos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(sz,{className:"w-4 h-4 mr-2"}),"General Photos (",y.photos.length,")"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.photos.map((_,O)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:_.url||_,alt:`Service Photo ${O+1}`,className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>window.open(_.url||_,"_blank")}),_.caption&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:_.caption})]},O))})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-600",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Close"}),i.jsxs("button",{onClick:()=>S(y),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[i.jsx(Sc,{className:"w-4 h-4 inline mr-2"}),"Download PDF"]})]})]})})})]})},Rle=()=>{const{customers:t,inventory:e,technicians:r,handlers:n,setIsAddingOrder:a}=Zr(),[s,o]=V.useState(""),[c,d]=V.useState(""),[h,m]=V.useState("Regular"),[p,y]=V.useState(""),[v,w]=V.useState(""),[k,b]=V.useState([{description:"NTE",quantity:1,rate:75,amount:75,inventoryId:null,asset:""}]),N=V.useMemo(()=>(t||[]).find(ye=>ye.id===s),[s,t]),[S,E]=V.useState([]),[P,_]=V.useState(""),[O,T]=V.useState([]),[R,M]=V.useState(""),[D,A]=V.useState(0),[F,L]=V.useState(!1),[Z,ae]=V.useState(""),[W,G]=V.useState(""),[Y,te]=V.useState(""),[ne,z]=V.useState("MI"),[ee,J]=V.useState([]),[le,fe]=V.useState(null),be=V.useMemo(()=>(r||[]).filter(ye=>ye.mobileAccess&&ye.name!=="Unassigned"),[r]);V.useEffect(()=>{t&&t.length>0&&!s&&o(t[0].id)},[t,s]),V.useEffect(()=>{if(N){if(N.locations?.length>0){A(0),L(!1);const ye=N.locations[0];ye.assets?.length>0&&T(ye.assets.map(Pe=>Pe.name))}else A(0),L(!0),ae(N.type==="Residential"?"Primary Residence":"Main Location"),G(N.type==="Residential"?"N/A":"001"),te(N.billingAddress?.city||""),z(N.billingAddress?.state||"MI");J([]),T([])}},[N]),V.useEffect(()=>{if(N&&!F&&N.locations?.length>0){const ye=N.locations[D];ye?.assets?.length>0?T(ye.assets.map(Pe=>Pe.name)):T([])}},[D,N,F]);const me=()=>{a(!1)},xe=()=>{const ye=new Date().toISOString().split("T")[0].replace(/-/g,""),Pe=new Date().toTimeString().slice(0,5).replace(":",""),rt=Math.floor(Math.random()*999).toString().padStart(3,"0");return`WO-${ye}-${Pe}-${rt}`},q=ye=>{J(Pe=>Pe.includes(ye)?Pe.filter(rt=>rt!==ye):[...Pe,ye])},he=ye=>{E(Pe=>Pe.includes(ye)?Pe.filter(rt=>rt!==ye):[...Pe,ye])},ge=ye=>{T(Pe=>Pe.includes(ye)?Pe.filter(rt=>rt!==ye):[...Pe,ye])},ce=()=>{R.trim()&&!O.includes(R.trim())&&(T(ye=>[...ye,R.trim()]),M(""))},Ne=ye=>{T(Pe=>Pe.filter(rt=>rt!==ye))},Ae=ye=>{ye.preventDefault();let Pe;if(F){if(!Z.trim()||!Y.trim())return alert("Please fill out the new location name and city.");Pe={name:Z.trim(),locNum:W.trim()||"N/A",city:Y.trim(),state:ne.trim(),assets:[]}}else Pe=N?.locations[D];if(!s||!N||!Pe||!c.trim())return alert("Please fill out all required fields, including the task description.");const Cr={"Work Order #":p.trim()||xe(),"Client WO#":p.trim()||"",Client:N.name,Company:Pe.name,"Loc #":Pe.locNum,Task:c,Priority:h,Notes:v.trim(),City:Pe.city,State:Pe.state,lineItems:k,servicedAssets:ee,"Order Status":"Open","Created Date":EN(new Date().toISOString().split("T")[0]),technician:S,"Schedule Date":P||"",expectedAssets:O,Address:`${Pe.city}, ${Pe.state}`};n.addNewOrder(Cr,le)},et=()=>b([...k,{description:"",quantity:1,rate:0,amount:0,inventoryId:null,asset:""}]),tt=ye=>{k.length>1&&b(k.filter((Pe,rt)=>rt!==ye))},St=(ye,Pe,rt)=>{const Cr=[...k],Et=Cr[ye];if(Et[Pe]=rt,Pe==="inventoryId"){const hn=(e||[]).find(zt=>zt.id===rt);hn&&(Et.description=hn.name,Et.rate=hn.price)}Et.amount=(Et.quantity||0)*(Et.rate||0),b(Cr)};if(!t)return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:"Loading customer data..."})});const ar=V.useMemo(()=>F||!N||!N.locations||N.locations.length===0?[]:N.locations[D]?.assets||[],[D,N,F]),ut="w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("form",{onSubmit:Ae,className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Add New Work Order"}),i.jsx("button",{type:"button",onClick:me,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(si,{size:28})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Work Order Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Client"}),i.jsxs("select",{value:s,onChange:ye=>o(ye.target.value),className:ut,children:[i.jsx("option",{value:"",children:"Select a customer..."}),(t||[]).map(ye=>i.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Task / Issue"}),i.jsx("input",{type:"text",value:c,onChange:ye=>d(ye.target.value),placeholder:"e.g., AC not cooling",className:ut,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Priority"}),i.jsxs("select",{value:h,onChange:ye=>m(ye.target.value),className:ut,children:[i.jsx("option",{children:"Regular"}),i.jsx("option",{children:"Low"}),i.jsx("option",{children:"Urgent"}),i.jsx("option",{children:"Emergency"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:["Client WO# ",i.jsx("span",{className:"text-xs text-gray-500",children:"(optional)"})]}),i.jsx("input",{type:"text",value:p,onChange:ye=>y(ye.target.value),placeholder:"Client's work order #",className:ut}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave blank to auto-generate"})]})]})]}),i.jsxs("fieldset",{className:"border border-blue-300 dark:border-blue-600 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[i.jsxs("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white flex items-center gap-2",children:[i.jsx(qd,{size:20}),"Mobile Technician Assignment"]}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:["Assign to Mobile Technicians (",S.length," selected)"]}),be.length===0?i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center",children:["No technicians with mobile access found.",i.jsx("br",{}),"Add technicians with mobile access in Technician Management."]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:be.map(ye=>i.jsxs("label",{className:"flex items-center gap-2 p-3 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:S.includes(ye.id),onChange:()=>he(ye.id),className:"h-4 w-4 rounded text-blue-600 focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:ye.name}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ye.status," • ",ye.email]})]})]},ye.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1 flex items-center gap-2",children:[i.jsx(O0,{size:16}),"Schedule Date (Optional)"]}),i.jsx("input",{type:"datetime-local",value:P,onChange:ye=>_(ye.target.value),className:ut}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Technicians will see this scheduled date in their mobile app"})]})]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Service Location"}),N&&!F?i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mt-2 mb-1",children:"Select Location"}),i.jsx("select",{value:D,onChange:ye=>A(parseInt(ye.target.value)),className:ut,children:(N.locations||[]).map((ye,Pe)=>i.jsxs("option",{value:Pe,children:[ye.name," (#",ye.locNum,") - ",ye.city]},Pe))})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location Name"}),i.jsx("input",{value:Z,onChange:ye=>ae(ye.target.value),type:"text",className:ut})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location #"}),i.jsx("input",{value:W,onChange:ye=>G(ye.target.value),type:"text",className:ut})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"City"}),i.jsx("input",{value:Y,onChange:ye=>te(ye.target.value),type:"text",className:ut})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"State"}),i.jsx("input",{value:ne,onChange:ye=>z(ye.target.value),type:"text",className:ut})]})]})]}),i.jsxs("fieldset",{className:"border border-green-300 dark:border-green-600 p-4 rounded-lg bg-green-50 dark:bg-green-900/20",children:[i.jsxs("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white flex items-center gap-2",children:[i.jsx(i6,{size:20}),"Expected Assets for Mobile App"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"These assets will be suggested to technicians in the mobile app to help guide their service work."}),ar.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:"Assets from Location"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:ar.map((ye,Pe)=>i.jsxs("label",{className:"flex items-center gap-2 p-2 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:O.includes(ye.name),onChange:()=>ge(ye.name),className:"h-4 w-4 rounded text-green-600 focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:ye.name})]},Pe))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:"Add Custom Expected Asset"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:R,onChange:ye=>M(ye.target.value),placeholder:"e.g., Rooftop Unit #1, Boiler System",className:`${ut} flex-1`,onKeyPress:ye=>ye.key==="Enter"&&(ye.preventDefault(),ce())}),i.jsx("button",{type:"button",onClick:ce,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add"})]})]}),O.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-2",children:["Expected Assets (",O.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:O.map((ye,Pe)=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 rounded-full text-sm",children:[ye,i.jsx("button",{type:"button",onClick:()=>Ne(ye),className:"hover:text-green-600 dark:hover:text-green-300",children:i.jsx(si,{size:14})})]},Pe))})]})]}),ar.length>0&&i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Assets Being Serviced"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:ar.map((ye,Pe)=>i.jsxs("label",{className:"flex items-center gap-2 p-2 border dark:border-slate-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"checkbox",checked:ee.includes(ye.name),onChange:()=>q(ye.name),className:"h-4 w-4 rounded text-blue-600 focus:ring-blue-500"}),i.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[ye.name," (",ye.type,")"]})]},Pe))})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Attachments"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Upload PDF Form or Checklist"}),i.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[i.jsx("input",{type:"file",accept:".pdf",onChange:ye=>fe(ye.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),le&&i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:le.name})]})]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Line Items"}),i.jsx("div",{className:"space-y-2 mt-2",children:k.map((ye,Pe)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsxs("select",{className:`col-span-3 ${ut}`,value:ye.inventoryId||"",onChange:rt=>St(Pe,"inventoryId",rt.target.value),children:[i.jsx("option",{value:"",children:"-- Custom Item --"}),(e||[]).map(rt=>i.jsx("option",{value:rt.id,children:rt.name},rt.id))]}),i.jsx("input",{type:"text",placeholder:"Description",value:ye.description,onChange:rt=>St(Pe,"description",rt.target.value),className:`col-span-4 ${ut}`}),i.jsx("input",{type:"number",placeholder:"Qty",value:ye.quantity,onChange:rt=>St(Pe,"quantity",parseFloat(rt.target.value)),className:`col-span-1 ${ut}`}),i.jsx("input",{type:"number",placeholder:"Rate",value:ye.rate,onChange:rt=>St(Pe,"rate",parseFloat(rt.target.value)),className:`col-span-2 ${ut}`}),i.jsx("div",{className:"col-span-1 p-2 text-right font-mono dark:text-gray-300",children:Ye(ye.amount)}),i.jsx("button",{type:"button",onClick:()=>tt(Pe),className:"col-span-1 text-red-500 hover:text-red-700 disabled:opacity-50",disabled:k.length<=1,children:i.jsx(Jt,{size:18})})]},Pe))}),i.jsxs("button",{type:"button",onClick:et,className:"mt-2 flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold",children:[i.jsx(aa,{size:16})," Add Line Item"]})]}),i.jsxs("fieldset",{className:"border dark:border-slate-600 p-4 rounded-lg",children:[i.jsx("legend",{className:"text-lg font-semibold px-2 text-gray-800 dark:text-white",children:"Notes"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Additional Information"}),i.jsx("textarea",{value:v,onChange:ye=>w(ye.target.value),placeholder:"Add any additional notes, special instructions, or observations...",rows:4,className:`${ut} resize-vertical min-h-[100px]`})]})]})]}),i.jsx("div",{className:"p-6 bg-gray-50 dark:bg-slate-900 border-t dark:border-slate-700 mt-auto",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.length>0&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(qd,{size:16}),S.length," mobile technician(s) will receive this work order"]})}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:!s||!c.trim(),children:"Create Work Order"})]})})]})})};function Dle(t,e){switch(e.type){case"SET_FIELD":return{...t,[e.field]:e.value};case"TOGGLE_TECH":{const r=t.assignedTechnicians.includes(e.techName)?t.assignedTechnicians.filter(n=>n!==e.techName):[...t.assignedTechnicians,e.techName];return{...t,assignedTechnicians:r}}case"RESET_FORM":return e.payload;default:return t}}const Mle=()=>{const{selectedOrder:t,setSelectedOrder:e,technicians:r,handlers:n}=Zr(),a=t,[s,o]=V.useReducer(Dle,{}),[c,d]=V.useState("");if(V.useEffect(()=>{a&&o({type:"RESET_FORM",payload:{status:a["Order Status"],assignedTechnicians:a.technician||[],scheduleDate:_g(a["Schedule Date"]),startTime:a.startTime||"",endTime:a.endTime||"",clientWO:a["Client WO#"]||""}})},[a]),!a)return null;const h=(w,k)=>{o({type:"SET_FIELD",field:w,value:k})},m=w=>{o({type:"TOGGLE_TECH",techName:w})},p=()=>{const w={};s.status!==a["Order Status"]&&(w["Order Status"]=s.status,s.status==="Completed"&&!a["Completed Date"]&&(w["Completed Date"]=C5(new Date))),JSON.stringify(s.assignedTechnicians)!==JSON.stringify(a.technician)&&(w.technician=s.assignedTechnicians);const k=EN(s.scheduleDate);(k!==a["Schedule Date"]||s.startTime!==a.startTime||s.endTime!==a.endTime)&&(w["Schedule Date"]=k,w.startTime=s.startTime,w.endTime=s.endTime,s.status==="Open"&&s.scheduleDate&&(w["Order Status"]="Scheduled")),s.clientWO!==a["Client WO#"]&&(w["Client WO#"]=s.clientWO),Object.keys(w).length>0&&n.updateOrder(a.id,w)},y=()=>{c.trim()&&n.addNote(a.id,c,()=>d(""))},v=V.useMemo(()=>[{label:"Work Order #",value:a["Work Order #"]||a["WO#"],icon:i.jsx(Na,{})},{label:"Client WO#",value:a["Client WO#"],icon:i.jsx(r6,{})},{label:"Location",value:`${a.Company} (#${a["Loc #"]})`,icon:i.jsx(mc,{})},{label:"Address",value:`${a.City}, ${a.State}`,icon:i.jsx(Rs,{})},{label:"Priority",value:a.Priority,icon:i.jsx(R0,{}),style:`${Uoe("priority",a.Priority)} px-2 py-0.5 rounded-full text-xs font-semibold`},{label:"Task",value:a.Task},{label:"NTE Amount",value:Ye(a.NTE)},{label:"Created Date",value:TN(a["Created Date"])}],[a]);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsxs("header",{className:"p-6 border-b border-gray-200 dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Work Order Details"}),i.jsx("button",{onClick:()=>e(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx(si,{size:28})})]}),i.jsxs("main",{className:"p-6 overflow-y-auto",children:[i.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:v.map(w=>i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:w.label}),i.jsxs("div",{className:"text-base text-gray-900 dark:text-white font-semibold flex items-center gap-2 mt-1",children:[w.icon&&i.jsx("span",{className:"text-gray-400",children:Q.cloneElement(w.icon,{size:16})}),i.jsx("span",{className:w.style||"",children:w.value})]})]},w.label))}),i.jsxs("section",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Job Management"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Status"}),i.jsxs("select",{value:s.status||"",onChange:w=>h("status",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white",children:[i.jsx("option",{children:"Open"}),i.jsx("option",{children:"Scheduled"}),i.jsx("option",{children:"In Progress"}),i.jsx("option",{children:"On Hold"}),i.jsx("option",{children:"Completed"}),i.jsx("option",{children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Assigned Technicians"}),i.jsx("div",{className:"border border-gray-300 dark:border-slate-600 p-2 rounded-lg max-h-24 overflow-y-auto bg-white dark:bg-slate-700",children:(r||[]).filter(w=>w.name!=="Unassigned").map(w=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`tech-${w.id}`,checked:(s.assignedTechnicians||[]).includes(w.name),onChange:()=>m(w.name),className:"mr-2"}),i.jsx("label",{htmlFor:`tech-${w.id}`,className:"text-gray-900 dark:text-white",children:w.name})]},w.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Schedule Date"}),i.jsx("input",{type:"date",value:s.scheduleDate||"",onChange:w=>h("scheduleDate",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Start Time"}),i.jsx("input",{type:"time",value:s.startTime||"",onChange:w=>h("startTime",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"End Time"}),i.jsx("input",{type:"time",value:s.endTime||"",onChange:w=>h("endTime",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 block mb-1",children:"Client WO#"}),i.jsx("input",{type:"text",value:s.clientWO||"",onChange:w=>h("clientWO",w.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:p,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})})]}),i.jsxs("section",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[i.jsx(l6,{size:20,className:"mr-2"}),"Work Notes"]}),i.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto bg-gray-50 dark:bg-slate-700 p-3 rounded-lg",children:a.notes&&a.notes.length>0?a.notes.sort((w,k)=>new Date(k.timestamp)-new Date(w.timestamp)).map((w,k)=>i.jsxs("div",{className:"text-sm bg-white dark:bg-slate-600 p-2 rounded shadow-sm",children:[i.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:w.text}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right",children:Voe(w.timestamp)})]},k)):i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No notes for this job yet."})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("textarea",{value:c,onChange:w=>d(w.target.value),placeholder:"Add a new note...",rows:"3",className:"w-full p-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white"}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("button",{onClick:y,disabled:!c.trim(),className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Add Note"})})]})]})]})]})})},L5=V.createContext(null),Zr=()=>V.useContext(L5),Lle=({userId:t,db:e,inventory:r})=>{const{data:n,loading:a}=Zl(e,t,"workOrders"),{data:s,loading:o}=Zl(e,t,"customers"),{data:c,loading:d}=Zl(e,t,"technicians"),{data:h,loading:m}=Zl(e,t,"invoices"),{data:p,loading:y}=Zl(e,t,"quotes"),{data:v,loading:w}=Zl(e,t,"serviceReports"),[k,b]=V.useState("dashboard"),[N,S]=V.useState(null),[E,P]=V.useState(!1),[_,O]=V.useState(null),[T,R]=V.useState(null),[M,D]=V.useState(""),[A,F]=V.useState("All"),L=V.useMemo(()=>{let W=n||[];if(A&&A!=="All"&&(W=W.filter(G=>G["Order Status"]===A)),M.trim()){const G=M.toLowerCase();W=W.filter(Y=>{const te=String(Y["Work Order #"]||"").toLowerCase(),ne=String(Y["Client WO#"]||"").toLowerCase(),z=String(Y.Client||"").toLowerCase(),ee=String(Y.Company||"").toLowerCase(),J=String(Y.Task||"").toLowerCase(),le=String(Y["Loc #"]||"").toLowerCase(),fe=String(Y.Priority||"").toLowerCase(),be=String(Y["Order Status"]||"").toLowerCase(),me=String(Y.Notes||"").toLowerCase(),xe=Array.isArray(Y.technician)?Y.technician.some(ge=>String(ge||"").toLowerCase().includes(G)):String(Y.technician||"").toLowerCase().includes(G),q=Array.isArray(Y.lineItems)?Y.lineItems.some(ge=>String(ge.description||"").toLowerCase().includes(G)||String(ge.asset||"").toLowerCase().includes(G)):!1,he=Array.isArray(Y.servicedAssets)?Y.servicedAssets.some(ge=>String(ge||"").toLowerCase().includes(G)):!1;return te.includes(G)||ne.includes(G)||z.includes(G)||ee.includes(G)||J.includes(G)||le.includes(G)||fe.includes(G)||be.includes(G)||me.includes(G)||xe||q||he})}return W},[n,M,A]),Z=V.useMemo(()=>({updateOrder:(W,G)=>Qoe(e,t,W,G),addNote:(W,G,Y)=>Yoe(e,t,W,G).then(Y),addNewOrder:W=>hD(e,t,W).then(()=>P(!1)),addCustomer:W=>Xoe(e,t,W),updateCustomer:W=>Zoe(e,t,W.id,W),deleteCustomer:W=>tle(e,t,W),addTechnician:W=>rle(e,t,W),updateTechnician:W=>nle(e,t,W.id,W),deleteTechnician:W=>{window.confirm("Are you sure?")&&ale(e,t,W,n)},addInvoice:W=>ile(e,t,W),addQuote:W=>sle(e,t,W),updateInvoice:W=>hj(e,t,W.id,W),updateQuote:W=>md(e,t,W.id,W),markInvoicePaid:(W,G)=>hj(e,t,W,{status:G?"Paid":"Pending",paidDate:G?new Date().toISOString():null}),approveQuote:W=>md(e,t,W.id,{...W,status:"Approved",approvedAt:new Date().toISOString()}),rejectQuote:W=>md(e,t,W.id,{...W,status:"Rejected",rejectedAt:new Date().toISOString()}),convertQuoteToWorkOrder:async W=>{const G={"WO#":`WO-${Date.now()}`,Client:W.customerName,Company:W.customerName,Task:`Work from Quote #${W.id}`,NTE:W.total,"Order Status":"Open","Schedule Date":"",Priority:"Regular",technician:[],quoteId:W.id,lineItems:W.lineItems||[],notes:[`Created from approved quote #${W.id}`]};return await hD(e,t,G),md(e,t,W.id,{...W,status:"Converted to Work Order",convertedAt:new Date().toISOString()})}}),[e,t,n]),ae={workOrders:n,customers:s,technicians:c,invoices:h,quotes:p,serviceReports:v,inventory:r,filteredOrders:L,loading:a||o||d||m||y||w,currentView:k,setCurrentView:b,selectedOrder:N,setSelectedOrder:S,isAddingOrder:E,setIsAddingOrder:P,editingInvoice:_,setEditingInvoice:O,editingQuote:T,setEditingQuote:R,searchTerm:M,setSearchTerm:D,statusFilter:A,setStatusFilter:F,handlers:Z};return i.jsx(L5.Provider,{value:ae,children:i.jsx($le,{})})},$le=()=>{const{loading:t,currentView:e,setCurrentView:r,selectedOrder:n,isAddingOrder:a,editingInvoice:s,editingQuote:o,setIsAddingOrder:c}=Zr(),d=V.useMemo(()=>[{key:"dashboard",label:"Dashboard"},{key:"dispatch",label:"Dispatch Board"},{key:"route",label:"Route Planning"},{key:"customers",label:"Customers"},{key:"technicians",label:"Technicians"},{key:"billing",label:"Billing"},{key:"service-reports",label:"Service Reports"},{key:"reporting",label:"Reporting"},{key:"margin-calculator",label:"Margin Calculator"}],[]),h=()=>{if(t)return i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})});switch(e){case"dashboard":return i.jsx(pD,{});case"dispatch":return i.jsx(hle,{});case"route":return i.jsx(fle,{});case"customers":return i.jsx(ble,{});case"technicians":return i.jsx(Nle,{});case"billing":return i.jsx(Cle,{});case"service-reports":return i.jsx(Ole,{});case"reporting":return i.jsx(Ple,{});case"margin-calculator":return i.jsx(Ile,{});default:return i.jsx(pD,{})}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Work Order Management"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Operational tasks module."})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:d.map(m=>i.jsx("button",{onClick:()=>r(m.key),className:`px-3 py-1 text-xs rounded ${e===m.key?"bg-cyan-600 text-white":"text-slate-600 dark:text-slate-300"}`,children:m.label},m.key))}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(aa,{size:20})," Add Work Order"]})]})]}),h()]}),n&&i.jsx(Mle,{}),a&&i.jsx(Rle,{}),s&&i.jsx(D5,{}),o&&i.jsx(M5,{})]})},Fle=({vehicles:t=[],maintenanceLogs:e=[],openModal:r,handleDelete:n,searchTerm:a="",setSearchTerm:s,jobs:o=[]})=>{const[c,d]=V.useState("all"),[h,m]=V.useState("grid"),[p,y]=V.useState("name"),[v,w]=V.useState("asc"),[k,b]=V.useState([]),[N,S]=V.useState(!1),[E,P]=V.useState(null),[_,O]=V.useState(!1),[T,R]=V.useState("vehicles"),M=[{value:"oil_change",label:"Oil Change",interval:3e3,category:"Engine",cost:50},{value:"tire_rotation",label:"Tire Rotation",interval:6e3,category:"Tires",cost:25},{value:"brake_service",label:"Brake Service",interval:12e3,category:"Brakes",cost:300},{value:"transmission",label:"Transmission Service",interval:3e4,category:"Transmission",cost:150},{value:"coolant_flush",label:"Coolant Flush",interval:24e3,category:"Cooling",cost:100},{value:"air_filter",label:"Air Filter",interval:12e3,category:"Engine",cost:30},{value:"spark_plugs",label:"Spark Plugs",interval:3e4,category:"Engine",cost:120},{value:"belts_hoses",label:"Belts & Hoses",interval:24e3,category:"Engine",cost:200},{value:"battery",label:"Battery Service",interval:36e3,category:"Electrical",cost:150},{value:"inspection",label:"Annual Inspection",interval:12e3,category:"Legal",cost:50},{value:"ac_service",label:"A/C Service",interval:12e3,category:"HVAC",cost:180},{value:"general_repair",label:"General Repair",interval:0,category:"Repair",cost:200},{value:"preventive",label:"Preventive Maintenance",interval:6e3,category:"Maintenance",cost:100}];V.useEffect(()=>{console.log("Vehicles updated:",t.length),b([...t])},[t]);const D=({onImport:J})=>{const le=V.useRef(null),fe=be=>{const me=be.target.files[0];me&&(J(me),be.target.value="")};return i.jsxs("div",{className:"inline-block",children:[i.jsx("input",{ref:le,type:"file",accept:".csv",onChange:fe,style:{display:"none"}}),i.jsxs("button",{onClick:()=>le.current?.click(),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-lg transition-colors",children:[i.jsx(D0,{size:16}),"Import Vehicles"]})]})},A=J=>{if(!J){alert("Please select a file.");return}const le=new FileReader;le.onload=fe=>{try{const me=fe.target.result.split(`
`).filter(ge=>ge.trim());if(me.length<2){alert("CSV file must have at least a header row and one data row.");return}const xe=ge=>{const ce=[];let Ne="",Ae=!1;for(let et=0;et<ge.length;et++){const tt=ge[et];tt==='"'?Ae=!Ae:tt===","&&!Ae?(ce.push(Ne.trim()),Ne=""):Ne+=tt}return ce.push(Ne.trim()),ce},q=xe(me[0]).map(ge=>ge.replace(/"/g,"").trim().toLowerCase()),he=[];for(let ge=1;ge<me.length;ge++){const ce=xe(me[ge]),Ne={};q.forEach((Ae,et)=>{const tt=ce[et]?ce[et].replace(/"/g,"").trim():"";Ae.includes("name")||Ae.includes("vehicle")?Ne.name=tt:Ae.includes("make")?Ne.make=tt.toUpperCase():Ae.includes("model")?Ne.model=tt:Ae.includes("year")?Ne.year=tt:Ae.includes("license")||Ae.includes("plate")?Ne.licensePlate=tt:Ae.includes("vin")?Ne.vin=tt:Ae.includes("mileage")||Ae.includes("miles")?Ne.currentMileage=parseInt(tt)||0:Ae.includes("status")?Ne.status=tt.toLowerCase()||"active":Ae.includes("notes")&&(Ne.notes=tt)}),(Ne.name||Ne.make&&Ne.model)&&(Ne.name=Ne.name||`${Ne.make} ${Ne.model}`,Ne.status=Ne.status||"active",he.push(Ne))}if(he.length===0){alert("No valid vehicle records found in the CSV file.");return}he.forEach(ge=>{r("vehicle",ge)}),alert(`Found ${he.length} vehicles to import. Please review and save each one.`)}catch(be){console.error("Error parsing CSV:",be),alert("Error parsing CSV file. Please check the file format.")}},le.readAsText(J)},F=()=>{if(k.length===0){alert("No vehicles to export.");return}const J=k.map(q=>({"Vehicle Name":q.name||"",Make:q.make||"",Model:q.model||"",Year:q.year||"","License Plate":q.licensePlate||"",VIN:q.vin||"","Current Mileage":q.currentMileage||0,Status:q.status||"active",Notes:q.notes||"","Date Added":q.createdAt?new Date(q.createdAt.seconds*1e3).toLocaleDateString():""})),le=Object.keys(J[0]),fe=[le.join(","),...J.map(q=>le.map(he=>{const ge=q[he];return typeof ge=="string"&&(ge.includes(",")||ge.includes('"')||ge.includes(`
`))?`"${ge.replace(/"/g,'""')}"`:ge}).join(","))].join(`
`),be=new Blob([fe],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(be),xe=document.createElement("a");xe.href=me,xe.download=`vehicle-fleet-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(me),console.log(`Exported ${k.length} vehicles to CSV`)},L=()=>{const J=[{"Vehicle Name":"Service Truck 1",Make:"FORD",Model:"F-150",Year:"2020","License Plate":"ABC123",VIN:"1FTFW1ET0LKD12345","Current Mileage":"75000",Status:"active",Notes:"Primary service vehicle"}],le=Object.keys(J[0]),fe=[le.join(","),...J.map(q=>le.map(he=>q[he]).join(","))].join(`
`),be=new Blob([fe],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(be),xe=document.createElement("a");xe.href=me,xe.download="vehicle-import-template.csv",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(me)},Z=async(J,le)=>{if(window.confirm('Delete "'+le+'"?')){console.log("Starting delete for vehicle:",J,le),S(!0);try{const fe=k.filter(be=>be.id!==J);b(fe),await n("vehicle",J),console.log("Vehicle deleted successfully")}catch(fe){console.error("Delete failed, reverting UI:",fe),b([...t]),alert("Failed to delete vehicle: "+fe.message)}finally{S(!1)}}},ae=()=>{let J=0;return k.forEach(le=>{M.forEach(fe=>{if(fe.interval>0){const be=e.filter(he=>he.vehicleId===le.id&&he.serviceType===fe.value).sort((he,ge)=>new Date(ge.date)-new Date(he.date))[0],me=le.currentMileage||0,xe=be&&be.mileage||0;me-xe>=fe.interval&&J++}})}),J},W=V.useMemo(()=>{const J=k.filter(ce=>!ce.status||ce.status==="active"),le=k.reduce((ce,Ne)=>ce+(Ne.currentMileage||0),0),fe=k.length>0?le/k.length:0,be=new Date().getFullYear(),me=k.reduce((ce,Ne)=>ce+(be-parseInt(Ne.year||be)),0),xe=k.length>0?me/k.length:0,q=k.filter(ce=>(ce.currentMileage||0)>1e5).length,he=e.filter(ce=>ce.date&&new Date(ce.date).getFullYear()===be).reduce((ce,Ne)=>ce+(Ne.cost||0),0),ge=ae();return{totalVehicles:k.length,activeVehicles:J.length,avgMileage:Math.round(fe),avgAge:xe.toFixed(1),highMileageVehicles:q,totalMaintenanceCost:he,overdueMaintenance:ge}},[k,e]),G=J=>{const le=[],fe=J.currentMileage||0;return M.forEach(be=>{if(be.interval>0){const me=e.filter(ge=>ge.vehicleId===J.id&&ge.serviceType===be.value).sort((ge,ce)=>new Date(ce.date)-new Date(ge.date))[0],xe=me&&me.mileage||0,q=fe-xe,he=be.interval-q;q>=be.interval?le.push({type:"overdue",service:be.label,mileage:Math.abs(he),severity:"high"}):he<=1e3&&he>0&&le.push({type:"due_soon",service:be.label,mileage:he,severity:"medium"})}}),le.sort((be,me)=>me.severity==="high"?1:-1)},Y=V.useMemo(()=>{let J=k;return a&&(J=J.filter(fe=>fe.name?.toLowerCase().includes(a.toLowerCase())||fe.make?.toLowerCase().includes(a.toLowerCase())||fe.model?.toLowerCase().includes(a.toLowerCase())||fe.licensePlate?.toLowerCase().includes(a.toLowerCase())||fe.vin?.toLowerCase().includes(a.toLowerCase()))),c!=="all"&&(J=J.filter(fe=>(fe.status||"active")===c)),[...J].sort((fe,be)=>{let me,xe;switch(p){case"name":me=fe.name||"",xe=be.name||"";break;case"mileage":me=fe.currentMileage||0,xe=be.currentMileage||0;break;case"year":me=parseInt(fe.year||0),xe=parseInt(be.year||0);break;case"make":me=fe.make||"",xe=be.make||"";break;default:me=fe.name||"",xe=be.name||""}return typeof me=="string"?v==="asc"?me.localeCompare(xe):xe.localeCompare(me):v==="asc"?me-xe:xe-me})},[k,a,c,p,v]),te=J=>{const le=J.status||"active";return le==="active"?{status:"active",color:"text-green-500",icon:ta,bg:"bg-green-50 border-green-200 dark:bg-green-900/10 dark:border-green-800",label:"Active"}:le==="maintenance"?{status:"maintenance",color:"text-yellow-500",icon:Mn,bg:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/10 dark:border-yellow-800",label:"In Maintenance"}:{status:"inactive",color:"text-gray-500",icon:pp,bg:"bg-gray-50 border-gray-200 dark:bg-gray-900/10 dark:border-gray-800",label:"Inactive"}},ne=({title:J,value:le,icon:fe,color:be,subtext:me,onClick:xe})=>i.jsx("div",{className:`bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 transition-all hover:shadow-md ${xe?"cursor-pointer hover:border-blue-300":""}`,onClick:xe,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:J}),i.jsx("p",{className:"text-2xl font-bold "+be,children:le}),me&&i.jsx("p",{className:"text-xs text-slate-400",children:me})]}),i.jsx(fe,{size:24,className:be})]})}),z=()=>{const[J,le]=V.useState({vehicleId:E?.id||"",serviceType:"",description:"",cost:"",mileage:"",date:new Date().toISOString().split("T")[0],nextServiceMileage:"",notes:""}),fe=M.find(me=>me.value===J.serviceType),be=me=>{me.preventDefault();const xe={...J,cost:parseFloat(J.cost)||0,mileage:parseInt(J.mileage)||0,nextServiceMileage:parseInt(J.nextServiceMileage)||0,createdAt:new Date().toISOString()};!xe.nextServiceMileage&&fe?.interval&&(xe.nextServiceMileage=xe.mileage+fe.interval),r("maintenanceLog",xe),O(!1),le({vehicleId:"",serviceType:"",description:"",cost:"",mileage:"",date:new Date().toISOString().split("T")[0],nextServiceMileage:"",notes:""})};return V.useEffect(()=>{fe&&le(me=>({...me,cost:me.cost||fe.cost.toString(),description:me.description||fe.label}))},[fe]),_?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Na,{className:"text-blue-500",size:24}),"Add Service Record"]}),i.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx(pp,{size:24})})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vehicle *"}),i.jsxs("select",{value:J.vehicleId,onChange:me=>le(xe=>({...xe,vehicleId:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select Vehicle"}),k.map(me=>i.jsxs("option",{value:me.id,children:[me.name||"Unnamed"," - ",me.make," ",me.model]},me.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Type *"}),i.jsxs("select",{value:J.serviceType,onChange:me=>le(xe=>({...xe,serviceType:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select Service"}),M.map(me=>i.jsxs("option",{value:me.value,children:[me.label," (",me.category,")"]},me.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Date *"}),i.jsx("input",{type:"date",value:J.date,onChange:me=>le(xe=>({...xe,date:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Mileage"}),i.jsx("input",{type:"number",value:J.mileage,onChange:me=>le(xe=>({...xe,mileage:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 45000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cost ($)"}),i.jsx("input",{type:"number",step:"0.01",value:J.cost,onChange:me=>le(xe=>({...xe,cost:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Next Service Mileage"}),i.jsx("input",{type:"number",value:J.nextServiceMileage,onChange:me=>le(xe=>({...xe,nextServiceMileage:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:fe?`Auto: ${(parseInt(J.mileage)||0)+fe.interval}`:"Optional"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),i.jsx("input",{type:"text",value:J.description,onChange:me=>le(xe=>({...xe,description:me.target.value})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the service"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:J.notes,onChange:me=>le(xe=>({...xe,notes:me.target.value})),rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Additional notes, parts used, recommendations, etc."})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsx("button",{type:"button",onClick:be,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Add Service Record"})]})]})]})}):null},ee=()=>{const J=[...e].sort((le,fe)=>new Date(fe.date)-new Date(le.date));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Na,{className:"text-blue-500",size:24}),"Maintenance History"]}),i.jsxs("button",{onClick:()=>{P(null),O(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Ud,{size:18}),"Add Service"]})]}),J.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Date"}),i.jsx("th",{className:"p-3",children:"Vehicle"}),i.jsx("th",{className:"p-3",children:"Service"}),i.jsx("th",{className:"p-3",children:"Mileage"}),i.jsx("th",{className:"p-3",children:"Cost"}),i.jsx("th",{className:"p-3",children:"Next Due"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:J.map(le=>{const fe=k.find(me=>me.id===le.vehicleId),be=M.find(me=>me.value===le.serviceType);return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-3",children:le.date?new Date(le.date).toLocaleDateString():"N/A"}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:fe?.name||"Unknown Vehicle"}),i.jsxs("div",{className:"text-xs text-slate-500",children:[fe?.make," ",fe?.model]})]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:be?.label||le.serviceType}),le.description&&i.jsx("div",{className:"text-xs text-slate-500",children:le.description})]})}),i.jsx("td",{className:"p-3 font-mono",children:(le.mileage||0).toLocaleString()}),i.jsxs("td",{className:"p-3 font-mono",children:["$",(le.cost||0).toFixed(2)]}),i.jsx("td",{className:"p-3 font-mono",children:le.nextServiceMileage?le.nextServiceMileage.toLocaleString():"N/A"}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>r("maintenanceLog",le),className:"p-1 text-slate-500 hover:text-blue-600 transition-colors",title:"Edit Service",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>n("maintenanceLog",le.id),className:"p-1 text-slate-500 hover:text-red-600 transition-colors",title:"Delete Service",children:i.jsx(Jt,{size:16})})]})})]},le.id)})})]})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Na,{size:48,className:"text-slate-300 dark:text-slate-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-500 dark:text-slate-400 mb-2",children:"No maintenance records yet"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mb-4",children:"Start tracking your vehicle maintenance and services"}),i.jsx("button",{onClick:()=>O(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Service"})]})]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(I0,{className:"text-blue-500",size:24}),"Fleet Overview"]}),k.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(D,{onImport:A}),i.jsxs("button",{onClick:F,className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg transition-colors",children:[i.jsx(Sc,{size:16}),"Export Vehicles"]}),i.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-sm bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded-lg transition-colors",children:[i.jsx(Bi,{size:16}),"CSV Template"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[i.jsx(ne,{title:"Total Vehicles",value:W.totalVehicles,icon:jm,color:"text-blue-500"}),i.jsx(ne,{title:"Active Fleet",value:W.activeVehicles,icon:ta,color:"text-green-500",subtext:(W.activeVehicles/(W.totalVehicles||1)*100).toFixed(0)+"% active"}),i.jsx(ne,{title:"Avg Mileage",value:W.avgMileage.toLocaleString(),icon:Rs,color:"text-purple-500",subtext:"miles per vehicle"}),i.jsx(ne,{title:"Fleet Age",value:W.avgAge+" yrs",icon:Vd,color:"text-orange-500",subtext:"average age"}),i.jsx(ne,{title:"High Mileage",value:W.highMileageVehicles,icon:Oa,color:"text-amber-500",subtext:">100k miles"}),i.jsx(ne,{title:"Maintenance Cost",value:"$"+W.totalMaintenanceCost.toLocaleString(),icon:Tr,color:"text-emerald-500",subtext:"this year"}),i.jsx(ne,{title:"Overdue Services",value:W.overdueMaintenance,icon:R0,color:W.overdueMaintenance>0?"text-red-500":"text-green-500",subtext:"need attention",onClick:()=>R("maintenance")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"flex",children:[i.jsx("button",{onClick:()=>R("vehicles"),className:`px-6 py-4 text-sm font-medium transition-colors ${T==="vehicles"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/10":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jm,{size:18}),"Vehicles (",k.length,")"]})}),i.jsx("button",{onClick:()=>R("maintenance"),className:`px-6 py-4 text-sm font-medium transition-colors ${T==="maintenance"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/10":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Na,{size:18}),"Maintenance (",e.length,")",W.overdueMaintenance>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:W.overdueMaintenance})]})})]})}),i.jsx("div",{className:"p-6",children:T==="vehicles"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Vehicle Fleet Management"}),i.jsxs("div",{className:"flex items-center gap-2",children:[k.length>0&&i.jsxs("button",{onClick:()=>m(h==="grid"?"table":"grid"),className:"flex items-center gap-2 text-sm bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 px-3 py-2 rounded-lg transition-colors",children:[h==="grid"?i.jsx(Bi,{size:16}):i.jsx(jm,{size:16}),h==="grid"?"Table View":"Grid View"]}),i.jsxs("button",{onClick:()=>r("vehicle"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Ud,{size:18}),"Add Vehicle"]})]})]}),k.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search by name, make, model, license plate, or VIN...",value:a,onChange:J=>s(J.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qh,{size:18,className:"text-slate-400"}),i.jsxs("select",{value:c,onChange:J=>d(J.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"maintenance",children:"In Maintenance"}),i.jsx("option",{value:"retired",children:"Retired"})]}),i.jsxs("select",{value:p,onChange:J=>y(J.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"name",children:"Sort by Name"}),i.jsx("option",{value:"mileage",children:"Sort by Mileage"}),i.jsx("option",{value:"year",children:"Sort by Year"}),i.jsx("option",{value:"make",children:"Sort by Make"})]}),i.jsx("button",{onClick:()=>w(v==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors",title:"Sort "+(v==="asc"?"Descending":"Ascending"),children:i.jsx(Oa,{size:18,className:v==="desc"?"rotate-180":""})})]})]}),k.length>0?h==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Y.map(J=>{const le=te(J),fe=G(J);return i.jsxs("div",{className:"p-5 rounded-lg border-2 transition-all hover:shadow-lg group "+le.bg+(N?" opacity-50":""),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(le.icon,{size:24,className:le.color}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:J.name||"Unnamed Vehicle"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:le.label})]})]}),i.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>{P(J),O(!0)},className:"p-2 text-slate-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Add Service",disabled:N,children:i.jsx(Na,{size:16})}),i.jsx("button",{onClick:()=>r("vehicle",J),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit Vehicle",disabled:N,children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>Z(J.id,J.name||"Unnamed Vehicle"),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete Vehicle",disabled:N,children:i.jsx(Jt,{size:16})})]})]}),fe.length>0&&i.jsxs("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Wk,{size:16,className:"text-amber-600"}),i.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Maintenance Alerts"})]}),i.jsxs("div",{className:"space-y-1",children:[fe.slice(0,2).map((be,me)=>i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:be.type==="overdue"?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300",children:[be.service,": ",be.type==="overdue"?`${be.mileage} miles overdue`:`due in ${be.mileage} miles`]})},me)),fe.length>2&&i.jsxs("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:["+",fe.length-2," more alerts"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Make/Model"}),i.jsxs("span",{className:"font-medium",children:[J.make||"N/A"," ",J.model||"N/A"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Year"}),i.jsx("span",{className:"font-medium",children:J.year||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"License"}),i.jsx("span",{className:"font-medium",children:J.licensePlate||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"Mileage"}),i.jsxs("span",{className:"font-medium",children:[(J.currentMileage||0).toLocaleString()," mi"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 block",children:"VIN"}),i.jsx("span",{className:"font-medium text-xs",children:J.vin||"N/A"})]})]})]},J.id)})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3",children:"Vehicle"}),i.jsx("th",{className:"p-3",children:"Make/Model"}),i.jsx("th",{className:"p-3",children:"Year"}),i.jsx("th",{className:"p-3",children:"License"}),i.jsx("th",{className:"p-3",children:"Mileage"}),i.jsx("th",{className:"p-3",children:"Alerts"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:Y.map(J=>{const le=te(J),fe=G(J);return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50"+(N?" opacity-50":""),children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(le.icon,{size:16,className:le.color}),i.jsx("span",{className:"text-xs",children:le.label})]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:J.name||"Unnamed"}),J.vin&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["VIN: ",J.vin.slice(-6)]})]})}),i.jsxs("td",{className:"p-3",children:[J.make||"N/A"," ",J.model||"N/A"]}),i.jsx("td",{className:"p-3",children:J.year||"N/A"}),i.jsx("td",{className:"p-3",children:J.licensePlate||"N/A"}),i.jsx("td",{className:"p-3 font-mono",children:(J.currentMileage||0).toLocaleString()}),i.jsx("td",{className:"p-3",children:fe.length>0?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wk,{size:14,className:"text-amber-500"}),i.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:[fe.length," alert",fe.length>1?"s":""]})]}):i.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"✓ Up to date"})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>{P(J),O(!0)},className:"p-1 text-slate-500 hover:text-green-600 transition-colors",title:"Add Service",disabled:N,children:i.jsx(Na,{size:16})}),i.jsx("button",{onClick:()=>r("vehicle",J),className:"p-1 text-slate-500 hover:text-blue-600 transition-colors",title:"Edit Vehicle",disabled:N,children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>Z(J.id,J.name||"Unnamed Vehicle"),className:"p-1 text-slate-500 hover:text-red-600 transition-colors",title:"Delete Vehicle",disabled:N,children:i.jsx(Jt,{size:16})})]})})]},J.id)})})]})}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 dark:bg-slate-700 rounded-full mb-6",children:i.jsx(jm,{size:40,className:"text-slate-400 dark:text-slate-500"})}),i.jsx("h3",{className:"text-xl font-medium text-slate-500 dark:text-slate-400 mb-3",children:"No vehicles in your fleet yet"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mb-6 max-w-md mx-auto",children:"Start building your fleet by adding your first vehicle. Track maintenance, costs, and manage your entire fleet from one place."}),i.jsx("button",{onClick:()=>r("vehicle"),className:"bg-blue-600 hover:bg-blue-500 text-white px-8 py-3 rounded-lg transition-colors font-medium text-lg",disabled:N,children:"Add Your First Vehicle"})]})]}):i.jsx(ee,{})})]}),i.jsx(z,{}),N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Deleting vehicle..."})]})})]})},Vle=()=>{const[t,e]=V.useState({netProfit:"",ownerSalary:"",ownerPerks:"",depreciation:"",amortization:"",interestExpense:""}),[r,n]=V.useState({recurringRevenue:0,ownerInvolvement:0,customerBase:0,profitabilityTrend:0,technicianTeam:0,brandMarketing:0}),[a,s]=V.useState(0),[o,c]=V.useState(2.75),[d,h]=V.useState(0);V.useEffect(()=>{const S=Object.values(t).map(E=>parseFloat(E)||0).reduce((E,P)=>E+P,0);s(S)},[t]),V.useEffect(()=>{const S=Object.values(r).reduce((E,P)=>E+P,0)/6;S<=.5?c(2+S*1.5):S<=1.5?c(2.75+(S-.5)*.75):c(3.5+(S-1.5)*2)},[r]),V.useEffect(()=>{h(a*o)},[a,o]);const m=(N,S)=>{e(E=>({...E,[N]:S}))},p=(N,S)=>{n(E=>({...E,[N]:S}))},y=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(N),v=()=>o<2.75?"Conservative Range":o<3.5?"Average Range":"Premium Range",w=()=>o<2.75?"text-red-600 dark:text-red-400":o<3.5?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",k=()=>{const S=[["HVAC Business Valuation Calculator"],[""],["Financial Information"],["Pre-Tax Net Profit",y(parseFloat(t.netProfit)||0)],["Owner Salary",y(parseFloat(t.ownerSalary)||0)],["Owner Perks",y(parseFloat(t.ownerPerks)||0)],["Depreciation",y(parseFloat(t.depreciation)||0)],["Amortization",y(parseFloat(t.amortization)||0)],["Interest Expense",y(parseFloat(t.interestExpense)||0)],["Seller Discretionary Earnings (SDE)",y(a)],[""],["Valuation Results"],["SDE",y(a)],["Multiple",o.toFixed(2)+"x"],["Estimated Business Value",y(d)]].map(O=>O.join(",")).join(`
`),E=new Blob([S],{type:"text/csv"}),P=window.URL.createObjectURL(E),_=document.createElement("a");_.href=P,_.download="hvac-business-valuation.csv",_.click(),window.URL.revokeObjectURL(P)},b=[{field:"recurringRevenue",title:"Recurring Revenue",icon:i.jsx(Oa,{className:"w-5 h-5"}),options:["< 15% of revenue from service contracts","15% - 30% from service contracts","> 30% from stable service contracts"]},{field:"ownerInvolvement",title:"Owner Involvement",icon:i.jsx(Mo,{className:"w-5 h-5"}),options:["Business relies entirely on you","You are key, but have manager/lead tech","Business runs on systems, with or without you"]},{field:"customerBase",title:"Customer Base",icon:i.jsx(mc,{className:"w-5 h-5"}),options:["Top 5 customers > 30% of revenue","Some customer concentration exists","No single customer > 5% of revenue"]},{field:"profitabilityTrend",title:"Profitability Trend",icon:i.jsx(Tr,{className:"w-5 h-5"}),options:["Profits flat, declining, or unpredictable","Profits stable and consistent","Clear year-over-year profit growth"]},{field:"technicianTeam",title:"Technician Team",icon:i.jsx(Mo,{className:"w-5 h-5"}),options:["High turnover; hard to find help","Stable team, normal turnover","Experienced, loyal techs, low turnover"]},{field:"brandMarketing",title:"Brand & Marketing",icon:i.jsx(mz,{className:"w-5 h-5"}),options:["Little online presence; word-of-mouth only","Basic website and some reviews","Strong brand, great reviews, active marketing"]}];return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"bg-blue-600 text-white p-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(pc,{className:"w-8 h-8"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"HVAC Business Valuation Calculator"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Calculate your Seller's Discretionary Earnings (SDE) and estimate your business value"})]})]})}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 p-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-white",children:"Financial Information"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Enter your typical annual figures to calculate your SDE:"}),i.jsx("div",{className:"space-y-4",children:[{key:"netProfit",label:"Pre-Tax Net Profit",desc:"From your income statement"},{key:"ownerSalary",label:"+ Owner's Salary",desc:"Your total salary and distributions"},{key:"ownerPerks",label:"+ Owner's Perks",desc:"Health insurance, vehicle costs, etc."},{key:"depreciation",label:"+ Depreciation",desc:"From income statement or tax return"},{key:"amortization",label:"+ Amortization",desc:"From your income statement"},{key:"interestExpense",label:"+ Interest Expense",desc:"Total interest on business debt"}].map(({key:N,label:S,desc:E})=>i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:S}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:E})]}),i.jsx("div",{className:"w-32",children:i.jsx("input",{type:"number",value:t[N],onChange:P=>m(N,P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})]},N))}),i.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Seller's Discretionary Earnings (SDE)"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Your total earnings figure"})]}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(a)})]})})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border-2 border-green-200 dark:border-green-800",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800 dark:text-green-200",children:"Final Valuation"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Your SDE:"}),i.jsx("span",{className:"font-semibold",children:y(a)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"x Valuation Multiple:"}),i.jsxs("span",{className:`font-semibold ${w()}`,children:[o.toFixed(2),"x (",v(),")"]})]}),i.jsx("div",{className:"border-t pt-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Estimated Business Value:"}),i.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:y(d)})]})})]}),i.jsxs("button",{onClick:k,className:"mt-4 w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[i.jsx(Sc,{className:"w-4 h-4"}),"Export Results to CSV"]})]})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-white",children:"Valuation Multiple Scorecard"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Rate each factor to determine your valuation multiple:"}),i.jsx("div",{className:"space-y-6",children:b.map(({field:N,title:S,icon:E,options:P})=>i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[E,i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white",children:S})]}),i.jsx("div",{className:"space-y-2",children:P.map((_,O)=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[i.jsx("input",{type:"radio",name:N,value:O,checked:r[N]===O,onChange:T=>p(N,parseInt(T.target.value)),className:"w-4 h-4 text-blue-600 border-slate-300 dark:border-slate-600 focus:ring-blue-500"}),i.jsx("span",{className:`text-sm group-hover:text-blue-600 dark:group-hover:text-blue-400 ${O===0?"text-red-600 dark:text-red-400":O===1?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:_})]},O))})]},N))}),i.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"How to Interpret Your Multiple:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Conservative (2.0x - 2.75x):"})," Higher risk factors present"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Average (2.75x - 3.5x):"})," Mixed risk profile"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Premium (3.5x - 4.5x+):"})," Lower risk, strong fundamentals"]})]})]})]})})]})})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-6 border-t",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Example Calculation:"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"An HVAC business with $200,000 SDE, solid service contracts, stable team, and growing profits might earn a 3.5x multiple: $200,000 × 3.5 = $700,000 estimated value."})]}),i.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Disclaimer:"})," This calculator provides estimates for informational purposes only. Actual business valuations may vary significantly based on market conditions, buyer preferences, and other factors not captured in this tool. Consult with a business broker or valuation professional for a comprehensive analysis."]})})]})]})},Ule=({inventory:t,openModal:e,handleDelete:r,handleBulkDelete:n,searchTerm:a,setSearchTerm:s,selectedIds:o,setSelectedIds:c,handleImportCSV:d,handleExportCSV:h})=>{const m=[{key:"name",header:"Item Name",render:v=>i.jsx("span",{className:"font-medium",children:v.name})},{key:"quantity",header:"Quantity on Hand",className:"text-center",render:v=>i.jsx("span",{children:v.quantity})},{key:"cost",header:"Cost per Item",className:"text-right",render:v=>i.jsxs("span",{className:"font-mono",children:["$",(v.cost||0).toFixed(2)]})}],p=V.useMemo(()=>t.filter(v=>(v.name||"").toLowerCase().includes(a.toLowerCase())),[t,a]),y=v=>{v.target.checked?c(p.map(w=>w.id)):c([])};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Inventory Management"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",placeholder:"Search Inventory...",value:a,onChange:v=>s(v.target.value),className:"w-full md:w-auto bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-sm text-slate-800 dark:text-white"}),o.length>0&&i.jsxs("button",{onClick:()=>n("inventory",o),className:"flex items-center gap-2 text-sm bg-red-600 hover:bg-red-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Jt,{size:16})," Delete (",o.length,")"]}),i.jsx("input",{type:"file",id:"csv-importer-inventory",className:"hidden",accept:".csv",onChange:v=>d(v.target.files[0],"inventory")}),i.jsxs("label",{htmlFor:"csv-importer-inventory",className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors cursor-pointer",children:[i.jsx(D0,{size:16})," Import CSV"]}),i.jsxs("button",{onClick:()=>h(t,"inventory"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Bi,{size:16})," Export to CSV"]}),i.jsxs("button",{onClick:()=>e("inventory"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(aa,{size:16})," Add New"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:i.jsx("input",{type:"checkbox",onChange:y})}),m.map(v=>i.jsx("th",{className:`p-3 ${v.className||""}`,children:v.header},v.key)),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:p.map(v=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 text-slate-700 dark:text-slate-200",children:[i.jsx("td",{className:"p-3",children:i.jsx("input",{type:"checkbox",checked:o.includes(v.id),onChange:()=>{c(w=>w.includes(v.id)?w.filter(k=>k!==v.id):[...w,v.id])}})}),m.map(w=>i.jsx("td",{className:`p-3 ${w.className||""}`,children:w.render(v)},w.key)),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("button",{onClick:()=>e("inventory",v),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 mr-2",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>r("inventory",v.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500",children:i.jsx(Jt,{size:16})})]})]},v.id))})]})})]})},Ble=({bills:t,paidStatus:e,onClose:r})=>{const n=V.useMemo(()=>{const a=new Date,s=new Date;return s.setDate(a.getDate()+3),t.filter(o=>{if(e[o.id])return!1;const c=new Date(a.getFullYear(),a.getMonth(),o.dueDay);return c>=a&&c<=s})},[t,e]);return n.length===0?null:i.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900/50 border border-yellow-400 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Wk,{size:20,className:"mr-3"}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-bold",children:"Upcoming Bills!"}),i.jsx("ul",{className:"list-disc list-inside mt-1",children:n.map(a=>i.jsxs("li",{children:[a.name," is due on day ",a.dueDay,"."]},a.id))})]})]}),i.jsx("button",{onClick:r,className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:i.jsx(si,{size:18})})]})},qle=({data:t,onSliceClick:e})=>{const[r,n]=V.useState(0),a=V.useCallback((o,c)=>{n(c)},[n]),s=o=>{const{cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:y,fill:v,payload:w}=o;return i.jsxs("g",{className:"cursor-pointer",onClick:()=>e(w.name),children:[i.jsx("text",{x:c,y:d,dy:8,textAnchor:"middle",fill:v,className:"font-bold text-lg",children:w.name}),i.jsx(mN,{cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:y,fill:v})]})};return i.jsx(d3,{width:"100%",height:300,children:i.jsxs(Foe,{children:[i.jsx(_a,{contentStyle:{backgroundColor:"#334155",border:"1px solid #475569",borderRadius:"0.5rem"},labelStyle:{color:"#cbd5e1"},itemStyle:{color:"#f1f5f9"},formatter:o=>`$${o.toFixed(2)}`}),i.jsx(Yi,{activeIndex:r,activeShape:s,data:t,cx:"50%",cy:"50%",innerRadius:70,outerRadius:90,fill:"#8884d8",dataKey:"value",onMouseEnter:a,onClick:o=>e(o.name),children:t.map((o,c)=>i.jsx(Q0,{fill:o.color},`cell-${c}`))})]})})},zle=({invoices:t=[],bills:e=[],weeklyCosts:r=[],currentBankBalance:n=0,setCurrentBankBalance:a})=>{const s=v=>{if(v==null||v==="")return 0;const w=typeof v=="string"?parseFloat(v.replace(/[^0-9.-]/g,"")):Number(v);return isNaN(w)?0:w},o=t.filter(v=>v.status==="Unpaid"),c=o.reduce((v,w)=>v+s(w.grandTotal),0),d=e.reduce((v,w)=>v+s(w.amount),0),h=r.reduce((v,w)=>v+s(w.amount),0)*4.33,m=d+h,p=s(n)+c-m,y=()=>{const v=prompt("Enter current bank balance:",n);if(v!==null&&!isNaN(v)&&v.trim()!==""){const w=parseFloat(v);w>=0?a(w):alert("Please enter a positive number for the balance.")}};return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Cash Flow Forecast"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Current Balance"}),i.jsxs("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",s(n).toLocaleString()]})]}),i.jsx(Tr,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsx("button",{onClick:y,className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline cursor-pointer",children:"Update Balance"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Click to update your current bank balance"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Pending Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["$",c.toLocaleString()]})]}),i.jsx(Oa,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:[o.length," unpaid invoices"]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"Monthly Expenses"}),i.jsxs("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:["$",m.toLocaleString()]})]}),i.jsx(c6,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Bills + Weekly costs"})]}),i.jsxs("div",{className:`${p>=0?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"} p-4 rounded-lg`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-sm font-medium ${p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"Projected Balance"}),i.jsxs("p",{className:`text-2xl font-bold ${p>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:["$",p.toLocaleString()]})]}),p>=0?i.jsx(Oa,{className:"text-green-600 dark:text-green-400",size:24}):i.jsx(Mn,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsx("p",{className:`text-xs mt-1 ${p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"After collections & expenses"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Pending Collections"}),i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.length>0?o.map((v,w)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:v.billTo||v.customer||"Unknown Client"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Due: ",v.dueDate||"No date"]})]}),i.jsxs("p",{className:"font-bold text-green-600 dark:text-green-400",children:["$",s(v.grandTotal).toLocaleString()]})]},w)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No pending invoices"})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Monthly Obligations"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monthly Bills"}),i.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",d.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Weekly Costs (Monthly)"}),i.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",h.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-100 dark:bg-slate-600 rounded-lg border-t-2 border-slate-300 dark:border-slate-500",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-white",children:"Total Expenses"}),i.jsxs("span",{className:"font-bold text-red-700 dark:text-red-300 text-lg",children:["$",m.toLocaleString()]})]})]})]})]}),p<0&&i.jsxs("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"text-red-600 dark:text-red-400",size:20}),i.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200",children:"Cash Flow Alert"})]}),i.jsx("p",{className:"text-red-700 dark:text-red-300 mt-2",children:"Your projected balance is negative. Consider following up on pending invoices or reducing expenses."})]}),s(n)===0&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tr,{className:"text-blue-600 dark:text-blue-400",size:20}),i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Update Your Balance"})]}),i.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:'Click "Update Balance" above to enter your current bank balance for accurate cash flow forecasting.'})]})]})})},Wle=({workOrders:t,bills:e,weeklyCosts:r,reportingPeriod:n,dateRange:a})=>{if(!t||!e||!r)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Profit & Loss Statement"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading data..."})]});const s=V.useMemo(()=>{const c=(t||[]).filter(S=>{if(S["Order Status"]!=="Completed"||!S["Completed Date"])return!1;const E=new Date(TN(S["Completed Date"]));return E>=a.start&&E<=a.end}),d=c.reduce((S,E)=>S+(E.NTE||0),0),h=c.reduce((S,E)=>{if(E.lineItems&&Array.isArray(E.lineItems)){const P=E.lineItems.reduce((_,O)=>_+(O.amount||0),0);return S+P}return S+(E.materialCost||0)+(E.laborCost||0)},0),m=d-h,p=(a.end-a.start)/(1e3*60*60*24*30.44),y=(e||[]).reduce((S,E)=>{const P=E.category||"Uncategorized";return S[P]=(S[P]||0)+E.amount,S},{}),v=(r||[]).reduce((S,E)=>S+E.amount,0)*p;v>0&&(y["Weekly & Misc"]=(y["Weekly & Misc"]||0)+v);const w=Object.values(y).reduce((S,E)=>S+E,0),k=m-w,b=d>0?m/d*100:0,N=d>0?k/d*100:0;return{revenue:d,cogs:h,grossProfit:m,operatingExpenses:w,expensesByCategory:y,netProfit:k,grossProfitMargin:b,netProfitMargin:N}},[t,e,r,a]),o=()=>{const c={month:"long",year:"numeric"};if(n==="monthly")return`For the Month of ${a.start.toLocaleString("default",c)}`;if(n==="quarterly"){const d={month:"long",day:"numeric",year:"numeric"};return`For the Quarter Ending ${a.end.toLocaleDateString("default",d)}`}return n==="yearly"?`For the Year ${a.start.getFullYear()}`:""};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Profit & Loss Statement"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:o()}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 font-semibold",children:[i.jsx("span",{children:"Total Revenue"}),i.jsx("span",{className:"font-mono",children:Ye(s.revenue)})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 pl-8",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cost of Goods Sold (COGS)"}),i.jsxs("span",{className:"font-mono",children:["(",Ye(s.cogs),")"]})]}),i.jsx("hr",{className:"border-slate-200 dark:border-slate-700 my-2"}),i.jsxs("div",{className:"flex justify-between items-center p-3 font-bold text-lg",children:[i.jsx("span",{children:"Gross Profit"}),i.jsx("span",{className:"font-mono",children:Ye(s.grossProfit)})]}),i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8 text-xs text-slate-500",children:[i.jsx("span",{children:"Gross Profit Margin"}),i.jsxs("span",{className:"font-mono",children:[s.grossProfitMargin.toFixed(1),"%"]})]}),i.jsx("hr",{className:"border-slate-200 dark:border-slate-700 my-2"}),i.jsx("div",{className:"p-3 font-semibold",children:i.jsx("span",{children:"Operating Expenses"})}),Object.entries(s.expensesByCategory).map(([c,d])=>i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:c}),i.jsxs("span",{className:"font-mono",children:["(",Ye(d),")"]})]},c)),i.jsxs("div",{className:"flex justify-between items-center p-3 pl-8 font-semibold",children:[i.jsx("span",{children:"Total Operating Expenses"}),i.jsxs("span",{className:"font-mono",children:["(",Ye(s.operatingExpenses),")"]})]}),i.jsx("hr",{className:"border-slate-300 dark:border-slate-600 my-2 border-2"}),i.jsxs("div",{className:"flex justify-between items-center p-3 font-bold text-xl",style:{color:s.netProfit>=0?"#22c55e":"#ef4444"},children:[i.jsx("span",{children:"Net Profit"}),i.jsx("span",{className:"font-mono",children:Ye(s.netProfit)})]}),i.jsxs("div",{className:"flex justify-between items-center p-1 pl-8 text-xs text-slate-500",children:[i.jsx("span",{children:"Net Profit Margin"}),i.jsxs("span",{className:"font-mono",children:[s.netProfitMargin.toFixed(1),"%"]})]})]})]})},Hle=({debts:t=[],openModal:e,handleDelete:r,searchTerm:n,setSearchTerm:a,handleImportCSV:s,handleExportCSV:o,debtPayoffStrategies:c={avalanche:[],snowball:[]}})=>{const[d,h]=V.useState("overview"),[m,p]=V.useState("avalanche"),[y,v]=V.useState(500),w=V.useMemo(()=>{const _=t.reduce((A,F)=>A+(F.totalAmount||0),0),O=t.reduce((A,F)=>A+(F.paidAmount||0),0),T=_-O,R=t.length>0?t.reduce((A,F)=>A+(F.interestRate||0),0)/t.length:0,M=Math.max(...t.map(A=>A.interestRate||0)),D=Math.min(...t.map(A=>(A.totalAmount||0)-(A.paidAmount||0)));return{totalDebt:_,totalPaid:O,totalRemaining:T,avgInterestRate:R,highestInterest:M,lowestBalance:D===1/0?0:D,payoffProgress:_>0?O/_*100:0}},[t]),k=_=>{const O=c[_]||[];let T=[],R=0,M=y;return O.forEach((D,A)=>{const F=(D.totalAmount||0)-(D.paidAmount||0),L=(D.interestRate||0)/100/12;if(F>0&&M>0){const Z=Math.ceil(Math.log(1+F*L/M)/Math.log(1+L));T.push({...D,monthsToPayoff:isFinite(Z)?Z:0,order:A+1,remaining:F}),R=Math.max(R,Z)}}),{timeline:T,totalMonthsToPayoff:R}},b=k("avalanche"),N=k("snowball"),S=V.useMemo(()=>n?t.filter(_=>_.name?.toLowerCase().includes(n.toLowerCase())||_.creditor?.toLowerCase().includes(n.toLowerCase())):t,[t,n]),E=_=>(_.totalAmount||0)-(_.paidAmount||0)<=0?"text-green-600 dark:text-green-400":_.interestRate>20?"text-red-600 dark:text-red-400":_.interestRate>10?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400",P=_=>_.interestRate>20?i.jsx(Mn,{className:"text-red-500",size:16}):_.interestRate>10?i.jsx(Oa,{className:"text-yellow-500",size:16}):i.jsx(ta,{className:"text-green-500",size:16});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Debt Management"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Track debts, plan payoffs, and achieve financial freedom"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>s&&s(),className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(D0,{size:16}),"Import"]}),i.jsxs("button",{onClick:()=>o&&o(t,"debts"),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Sc,{size:16}),"Export"]}),i.jsxs("button",{onClick:()=>e("debt"),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(aa,{size:18}),"Add Debt"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Total Debt"}),i.jsxs("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",w.totalDebt.toLocaleString()]})]}),i.jsx(px,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Remaining: $",w.totalRemaining.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Paid Off"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",w.totalPaid.toLocaleString()]})]}),i.jsx(ta,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[w.payoffProgress.toFixed(1),"% complete"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Avg Interest"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[w.avgInterestRate.toFixed(1),"%"]})]}),i.jsx(fz,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Highest: ",w.highestInterest,"%"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Active Debts"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.filter(_=>_.totalAmount-_.paidAmount>0).length})]}),i.jsx(I0,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["of ",t.length," total"]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-1 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsxs("button",{onClick:()=>h("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="overview"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(px,{size:16}),"Overview"]}),i.jsxs("button",{onClick:()=>h("strategies"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="strategies"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(gp,{size:16}),"Payoff Strategies"]}),i.jsxs("button",{onClick:()=>h("calculator"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${d==="calculator"?"bg-purple-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(pc,{size:16}),"Calculator"]})]})}),d==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search debts...",value:n,onChange:_=>a(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:S.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(px,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No debts found"}),i.jsx("p",{className:"mb-4",children:"Add your debts to start tracking and planning payoffs."}),i.jsx("button",{onClick:()=>e("debt"),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Debt"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Debt Details"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Interest Rate"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Total Amount"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Paid"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Remaining"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Progress"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.map(_=>{const O=(_.totalAmount||0)-(_.paidAmount||0),T=_.totalAmount>0?(_.paidAmount||0)/_.totalAmount*100:0;return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[P(_),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),_.creditor&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:_.creditor})]})]})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("span",{className:`font-mono font-semibold ${E(_)}`,children:[(_.interestRate||0).toFixed(1),"%"]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono text-slate-900 dark:text-white",children:["$",(_.totalAmount||0).toLocaleString()]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",(_.paidAmount||0).toLocaleString()]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("span",{className:"font-mono font-semibold text-orange-600 dark:text-orange-400",children:["$",O.toLocaleString()]})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(T,100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1 text-slate-500 dark:text-slate-400",children:[T.toFixed(1),"%"]})]}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>e("debt",_),className:"text-slate-400 hover:text-blue-500 transition-colors",title:"Edit debt",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>r("debt",_.id),className:"text-slate-400 hover:text-red-500 transition-colors",title:"Delete debt",children:i.jsx(Jt,{size:16})})]})})]},_.id)})})]})})})]}),d==="strategies"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Debt Payoff Strategies"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${m==="avalanche"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,onClick:()=>p("avalanche"),children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(c6,{className:"text-purple-600",size:20}),i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:"Debt Avalanche"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Pay off debts with highest interest rates first. Saves more money on interest."}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Estimated timeline: ",b.totalMonthsToPayoff," months"]})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${m==="snowball"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,onClick:()=>p("snowball"),children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(vz,{className:"text-purple-600",size:20}),i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:"Debt Snowball"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Pay off smallest balances first. Builds momentum and motivation."}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Estimated timeline: ",N.totalMonthsToPayoff," months"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monthly Debt Payment Budget"}),i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:y,onChange:_=>v(parseFloat(_.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"500"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:[m==="avalanche"?"Avalanche":"Snowball"," Payoff Plan"]}),i.jsx("div",{className:"space-y-4",children:(m==="avalanche"?b.timeline:N.timeline).map((_,O)=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:_.order}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["$",_.remaining.toLocaleString()," remaining at ",_.interestRate,"%"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[_.monthsToPayoff," months"]}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"to pay off"})]})]},_.id))})]})]}),d==="calculator"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:"Debt Payoff Calculator"}),i.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-400 py-12",children:[i.jsx(pc,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Advanced debt calculator coming soon!"}),i.jsx("p",{className:"text-sm mt-2",children:"Calculate exact payoff dates, interest savings, and payment schedules."})]})]})]})},Gle=({incomes:t,openModal:e,handleDelete:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState("all"),[c,d]=V.useState("all"),[h,m]=V.useState({key:"amount",direction:"desc"}),p=["all","monthly","weekly","quarterly","annually","one-time","project-based"],y=["all","active","pending","completed","paused"],v=V.useMemo(()=>t.filter(_=>{const O=_.name.toLowerCase().includes(n.toLowerCase())||_.notes&&_.notes.toLowerCase().includes(n.toLowerCase()),T=s==="all"||_.type===s,R=c==="all"||_.status===c;return O&&T&&R}).sort((_,O)=>{if(h.key==="amount"){const T=parseFloat(_.amount)||0,R=parseFloat(O.amount)||0;return h.direction==="asc"?T-R:R-T}return h.key==="name"?h.direction==="asc"?_.name.localeCompare(O.name):O.name.localeCompare(_.name):0}),[t,n,s,c,h]),w=V.useMemo(()=>{const P=t.filter(A=>A.status!=="completed"&&A.status!=="paused"),O=P.map(A=>{const F=parseFloat(A.amount)||0;switch(A.type){case"weekly":return F*4.33;case"quarterly":return F/3;case"annually":return F/12;case"monthly":default:return F}}).reduce((A,F)=>A+F,0),T=O*12,R=t.reduce((A,F)=>{const L=F.type||"monthly",Z=parseFloat(F.amount)||0;return A[L]=(A[L]||0)+Z,A},{}),M=t.reduce((A,F)=>{const L=F.status||"active";return A[L]=(A[L]||0)+1,A},{}),D=t.reduce((A,F)=>{const L=parseFloat(F.amount)||0;return L>A.amount?{name:F.name,amount:L}:A},{name:"None",amount:0});return{totalMonthlyIncome:O,totalAnnualIncome:T,typeBreakdown:R,statusBreakdown:M,highestIncome:D,activeCount:P.length,totalCount:t.length,averageIncome:P.length>0?O/P.length:0}},[t]),k=P=>{m(_=>({key:P,direction:_.key===P&&_.direction==="desc"?"asc":"desc"}))},b=P=>{switch(P){case"active":return i.jsx(ta,{size:14,className:"text-green-500"});case"pending":return i.jsx(Vd,{size:14,className:"text-yellow-500"});case"completed":return i.jsx(ta,{size:14,className:"text-blue-500"});case"paused":return i.jsx(Mn,{size:14,className:"text-red-500"});default:return i.jsx(ta,{size:14,className:"text-green-500"})}},N=P=>{const _={monthly:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",weekly:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",quarterly:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",annually:"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200","one-time":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200","project-based":"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-800 dark:text-cyan-200"};return _[P]||_.monthly},S=(P,_)=>{const O=parseFloat(P)||0;switch(_){case"weekly":return O*4.33;case"quarterly":return O/3;case"annually":return O/12;case"monthly":default:return O}},E=()=>{if(t.length===0){alert("No income sources to export.");return}try{const P=["Source Name","Amount","Type","Monthly Equivalent","Annual Equivalent","Status","Recurring","Notes"],_=t.map(D=>[D.name||"",(parseFloat(D.amount)||0).toFixed(2),D.type||"monthly",S(D.amount,D.type).toFixed(2),(S(D.amount,D.type)*12).toFixed(2),D.status||"active",D.isRecurring?"Yes":"No",D.notes||""]),O=[P.join(","),..._.map(D=>D.map(A=>typeof A=="string"&&A.includes(",")?`"${A}"`:A).join(","))].join(`
`),T=new Blob([O],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),M=URL.createObjectURL(T);R.setAttribute("href",M),R.setAttribute("download",`income_sources_${new Date().toISOString().split("T")[0]}.csv`),R.style.visibility="hidden",document.body.appendChild(R),R.click(),document.body.removeChild(R),alert(`Successfully exported ${t.length} income sources!`)}catch(P){console.error("Error exporting CSV:",P),alert("Failed to export CSV: "+P.message)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Income"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",w.totalMonthlyIncome.toLocaleString()]})]}),i.jsx(Tr,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[w.activeCount," active sources"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Annual Projection"}),i.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",w.totalAnnualIncome.toLocaleString()]})]}),i.jsx(Oa,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Based on current rates"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Average Income"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",w.averageIncome.toLocaleString()]})]}),i.jsx(I0,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Per active source/month"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Top Source"}),i.jsx("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400 truncate",children:w.highestIncome.name})]}),i.jsx(gp,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["$",w.highestIncome.amount.toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Income Sources"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Track and manage your revenue streams and income sources"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:E,className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Bi,{size:16}),"Export CSV"]}),i.jsxs("button",{onClick:()=>e("income"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(aa,{size:16}),"Add Income Source"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search income sources...",value:n,onChange:P=>a(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qh,{className:"text-slate-400",size:16}),i.jsx("select",{value:s,onChange:P=>o(P.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:p.map(P=>i.jsx("option",{value:P,children:P==="all"?"All Types":P.charAt(0).toUpperCase()+P.slice(1).replace("-"," ")},P))}),i.jsx("select",{value:c,onChange:P=>d(P.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:y.map(P=>i.jsx("option",{value:P,children:P==="all"?"All Status":P.charAt(0).toUpperCase()+P.slice(1)},P))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>k("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Income Source",h.key==="name"&&i.jsx("span",{children:h.direction==="asc"?"↑":"↓"})]})}),i.jsx("th",{className:"p-3 text-right cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>k("amount"),children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Amount",h.key==="amount"&&i.jsx("span",{children:h.direction==="asc"?"↑":"↓"})]})}),i.jsx("th",{className:"p-3",children:"Type"}),i.jsx("th",{className:"p-3 text-right",children:"Monthly Equiv."}),i.jsx("th",{className:"p-3 text-right",children:"Annual Equiv."}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3",children:"Recurring"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:v.length>0?v.map(P=>{const _=parseFloat(P.amount)||0,O=S(_,P.type),T=O*12;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:P.name})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono font-bold text-green-600 dark:text-green-400",children:["$",_.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${N(P.type)}`,children:(P.type||"monthly").replace("-"," ")})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:["$",O.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",T.toLocaleString()]})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-1",children:[b(P.status),i.jsx("span",{className:"text-xs capitalize",children:P.status||"active"})]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.isRecurring?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}`,children:P.isRecurring?"Yes":"No"})}),i.jsx("td",{className:"p-3 max-w-xs",children:i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.notes&&P.notes.length>30?`${P.notes.substring(0,30)}...`:P.notes||"—"})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>e("income",P),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit income source",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>r("income",P.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete income source",children:i.jsx(Jt,{size:16})})]})})]},P.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:n||s!=="all"||c!=="all"?i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(ii,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No income sources match your search criteria"}),i.jsx("button",{onClick:()=>{a(""),o("all"),d("all")},className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Clear filters"})]}):i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Tr,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No income sources added yet"}),i.jsx("button",{onClick:()=>e("income"),className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Add your first income source"})]})})})})]})}),v.length>0&&i.jsx("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border",children:i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 text-sm",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Showing ",v.length," of ",t.length," income sources"]})}),i.jsxs("div",{className:"flex items-center gap-6 font-medium",children:[i.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Monthly: $",v.reduce((P,_)=>P+S(_.amount,_.type),0).toFixed(2)]}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Annual: $",(v.reduce((P,_)=>P+S(_.amount,_.type),0)*12).toLocaleString()]})]})]})})]}),w.totalCount>=1&&w.highestIncome.amount>w.totalMonthlyIncome*.7&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"text-amber-600 dark:text-amber-400",size:20}),i.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Income Diversification Alert"})]}),i.jsxs("p",{className:"text-amber-700 dark:text-amber-300 text-sm mt-2",children:["Your top income source (",w.highestIncome.name,") represents over 70% of your total income. Consider diversifying your income streams to reduce financial risk."]})]})]})},Kle=({goalsWithProgress:t=[],openModal:e,onDeleteGoal:r,onEditGoal:n})=>{const[a,s]=V.useState(null),[o,c]=V.useState(!1),[d,h]=V.useState({name:"",description:"",target:"",current:0,deadline:"",type:"savings"}),m=S=>{s(S)},p=S=>{r(S),s(null)},y=()=>{s(null)},v=S=>S>=100?"from-green-500 to-emerald-500":S>=80?"from-green-500 to-green-600":S>=50?"from-yellow-500 to-orange-500":S>=25?"from-orange-500 to-red-500":"from-red-500 to-red-600",w=S=>{const E=new Date,_=new Date(S)-E,O=Math.ceil(_/(1e3*60*60*24));return O<0?{text:"Overdue",color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/20"}:O===0?{text:"Due Today",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20"}:O===1?{text:"1 day left",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20"}:O<=7?{text:`${O} days left`,color:"text-yellow-600",bgColor:"bg-yellow-100 dark:bg-yellow-900/20"}:O<=30?{text:`${O} days left`,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/20"}:{text:`${O} days left`,color:"text-slate-600",bgColor:"bg-slate-100 dark:bg-slate-700"}},k=S=>{const E=S.target-S.current,P=Math.ceil((new Date(S.deadline)-new Date)/(1e3*60*60*24));return P>0?Math.ceil(E/P):0},b=(S,E)=>{console.log("Update goal progress:",S,E)},N=S=>{S.preventDefault(),d.name&&d.target&&d.deadline&&(e("goal",{name:d.name,description:d.description,targetValue:Number(d.target),current:Number(d.current),deadline:d.deadline,type:d.type}),h({name:"",description:"",target:"",current:0,deadline:"",type:"savings"}),c(!1))};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-100 to-blue-100 dark:from-cyan-900/30 dark:to-blue-900/30 rounded-lg",children:i.jsx(gp,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Financial Goals"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.filter(S=>S.progress>=100).length," of ",t.length," completed"]})]})]}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[i.jsx(Ud,{size:16}),"Add Goal"]})]}),t.length>0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg",children:i.jsx(ta,{className:"text-green-600 dark:text-green-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Completed"}),i.jsx("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:t.filter(S=>S.progress>=100).length})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg",children:i.jsx(Oa,{className:"text-blue-600 dark:text-blue-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"In Progress"}),i.jsx("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:t.filter(S=>S.progress>0&&S.progress<100).length})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-800 rounded-lg",children:i.jsx(Vd,{className:"text-orange-600 dark:text-orange-400",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Total Value"}),i.jsxs("p",{className:"text-xl font-bold text-orange-800 dark:text-orange-200",children:["$",t.reduce((S,E)=>S+(E.targetValue||0),0).toLocaleString()]})]})]})})]}),i.jsx("div",{className:"space-y-4",children:t.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:i.jsx(gp,{size:32,className:"opacity-50"})}),i.jsx("h4",{className:"font-semibold text-lg mb-2",children:"No financial goals yet"}),i.jsx("p",{className:"text-sm mb-4",children:"Set your first goal and start tracking your financial progress!"}),i.jsx("button",{onClick:()=>c(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-lg text-sm font-medium transition-colors",children:"Create Your First Goal"})]}):t.map(S=>{const E=S.progress||0,P=E>=100,_=(S.targetValue||0)-(S.current||0),O=w(S.deadline),T=v(E),R=O.text==="Overdue",M=k({target:S.targetValue||0,current:S.current||0,deadline:S.deadline});return i.jsx("div",{className:`relative border rounded-lg p-5 transition-all duration-200 hover:shadow-md ${P?"border-green-200 dark:border-green-800 bg-gradient-to-r from-green-50/50 to-emerald-50/50 dark:from-green-900/10 dark:to-emerald-900/10":R?"border-red-200 dark:border-red-800 bg-gradient-to-r from-red-50/50 to-pink-50/50 dark:from-red-900/10 dark:to-pink-900/10":"border-slate-200 dark:border-slate-600 hover:border-cyan-300 dark:hover:border-cyan-700"}`,children:a!==S.id?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white",children:S.name}),P&&i.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 text-xs font-medium rounded-full",children:"✓ Completed"}),S.type&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S.type==="savings"?"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200":S.type==="debt"?"bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-200":S.type==="investment"?"bg-purple-100 dark:bg-purple-800 text-purple-800 dark:text-purple-200":S.type==="purchase"?"bg-orange-100 dark:bg-orange-800 text-orange-800 dark:text-orange-200":"bg-cyan-100 dark:bg-cyan-800 text-cyan-800 dark:text-cyan-200"}`,children:S.type||"savings"}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.bgColor} ${O.color}`,children:O.text})]}),S.description&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:S.description}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Current"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",(S.current||0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Target"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",(S.targetValue||0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Remaining"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",_>0?_.toLocaleString():"0"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Daily Need"}),i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-white",children:["$",M>0?M.toLocaleString():"0"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 ml-4",children:[i.jsx("button",{onClick:()=>b(S.id,(S.current||0)+(S.targetValue||0)*.1),className:"text-green-600 hover:text-green-500 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",title:"Add 10%",children:i.jsx(Ud,{size:18})}),i.jsx("button",{onClick:()=>b(S.id,Math.max(0,(S.current||0)-(S.targetValue||0)*.1)),className:"text-orange-600 hover:text-orange-500 p-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",title:"Subtract 10%",children:i.jsx(dz,{size:18})}),i.jsx("button",{onClick:()=>m(S.id),className:"text-red-600 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Goal",children:i.jsx(Jt,{size:18})})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Progress"}),i.jsxs("span",{className:`font-bold ${P?"text-green-600":"text-cyan-600"}`,children:[E.toFixed(1),"%"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`h-4 rounded-full transition-all duration-700 relative overflow-hidden bg-gradient-to-r ${T}`,style:{width:`${Math.min(E,100)}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),E>15&&i.jsx("div",{className:"absolute inset-0 flex items-center px-2",children:i.jsxs("span",{className:"text-xs font-medium text-white drop-shadow",children:["$",(S.current||0).toLocaleString()]})})]}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{children:["Deadline: ",new Date(S.deadline).toLocaleDateString()]}),!P&&_>0&&M>0&&i.jsxs("span",{children:["Need $",M.toLocaleString(),"/day"]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:i.jsx(Jt,{className:"text-red-600 dark:text-red-400",size:24})}),i.jsxs("p",{className:"text-slate-800 dark:text-white font-medium mb-4",children:['Delete "',S.name,'"?']}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"This action cannot be undone."}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>p(S.id),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium",children:"Delete Goal"}),i.jsx("button",{onClick:y,className:"px-4 py-2 bg-slate-300 hover:bg-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500 text-slate-800 dark:text-white rounded-lg transition-colors font-medium",children:"Cancel"})]})]})})},S.id)})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-lg border border-slate-200 dark:border-slate-700 shadow-2xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Create Financial Goal"}),i.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:i.jsx(si,{size:20})})]}),i.jsxs("form",{onSubmit:N,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Type"}),i.jsxs("select",{value:d.type,onChange:S=>h({...d,type:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"savings",children:"💰 Savings Goal"}),i.jsx("option",{value:"debt",children:"💳 Debt Payoff"}),i.jsx("option",{value:"investment",children:"📈 Investment Target"}),i.jsx("option",{value:"purchase",children:"🛍️ Large Purchase"}),i.jsx("option",{value:"emergency",children:"🆘 Emergency Fund"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Goal Name"}),i.jsx("input",{type:"text",value:d.name,onChange:S=>h({...d,name:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Emergency Fund, New Car, Pay off Credit Card",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),i.jsx("textarea",{value:d.description,onChange:S=>h({...d,description:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of your goal and why it matters to you",rows:"3"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Amount"}),i.jsx("input",{type:"number",value:d.current,onChange:S=>h({...d,current:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Amount"}),i.jsx("input",{type:"number",value:d.target,onChange:S=>h({...d,target:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10000",required:!0,min:"1"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Deadline"}),i.jsx("input",{type:"date",value:d.deadline,onChange:S=>h({...d,deadline:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:new Date().toISOString().split("T")[0]})]}),d.target>0&&d.deadline&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium mb-1",children:"Goal Calculation:"}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["To reach $",d.target.toLocaleString()," by ",new Date(d.deadline).toLocaleDateString(),", you need to save $",Math.ceil((d.target-d.current)/Math.max(1,Math.ceil((new Date(d.deadline)-new Date)/(1e3*60*60*24)))).toLocaleString()," per day."]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Create Goal"})]})]})]})})]})},Qle=({weeklyCosts:t,openModal:e,handleDelete:r})=>{const[n,a]=V.useState(""),[s,o]=V.useState("all"),[c,d]=V.useState({key:"amount",direction:"desc"}),h=["all","Payroll","Fuel & Maintenance","Equipment Rental","Utilities","Insurance","Marketing","Office Expenses","Supplies","Contractors","Other"],m=V.useMemo(()=>t.filter(k=>{const b=k.name.toLowerCase().includes(n.toLowerCase())||k.notes&&k.notes.toLowerCase().includes(n.toLowerCase()),N=s==="all"||k.category===s;return b&&N}).sort((k,b)=>{if(c.key==="amount"){const N=parseFloat(k.amount)||0,S=parseFloat(b.amount)||0;return c.direction==="asc"?N-S:S-N}return c.key==="name"?c.direction==="asc"?k.name.localeCompare(b.name):b.name.localeCompare(k.name):0}),[t,n,s,c]),p=V.useMemo(()=>{const w=t.reduce((_,O)=>_+(parseFloat(O.amount)||0),0),k=w*4.33,b=w*52,N=t.reduce((_,O)=>(parseFloat(O.amount)||0)>_?parseFloat(O.amount)||0:_,0),S=t.length>0?w/t.length:0,E=t.reduce((_,O)=>{const T=O.category||"Other";return _[T]=(_[T]||0)+(parseFloat(O.amount)||0),_},{}),P=Object.entries(E).reduce((_,[O,T])=>T>(_.amount||0)?{category:O,amount:T}:_,{category:"None",amount:0});return{totalWeekly:w,totalMonthly:k,totalAnnual:b,highestCost:N,averageCost:S,categoryTotals:E,topCategory:P,itemCount:t.length}},[t]),y=w=>{d(k=>({key:w,direction:k.key===w&&k.direction==="desc"?"asc":"desc"}))},v=()=>{if(t.length===0){alert("No weekly costs to export.");return}try{const w=["Name","Weekly Amount","Monthly Amount (4.33x)","Annual Amount (52x)","Category","Notes"],k=t.map(P=>[P.name||"",(parseFloat(P.amount)||0).toFixed(2),((parseFloat(P.amount)||0)*4.33).toFixed(2),((parseFloat(P.amount)||0)*52).toFixed(2),P.category||"Other",P.notes||""]),b=[w.join(","),...k.map(P=>P.map(_=>typeof _=="string"&&_.includes(",")?`"${_}"`:_).join(","))].join(`
`),N=new Blob([b],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a"),E=URL.createObjectURL(N);S.setAttribute("href",E),S.setAttribute("download",`weekly_costs_${new Date().toISOString().split("T")[0]}.csv`),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S),alert(`Successfully exported ${t.length} weekly costs!`)}catch(w){console.error("Error exporting CSV:",w),alert("Failed to export CSV: "+w.message)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Weekly Total"}),i.jsxs("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",p.totalWeekly.toLocaleString()]})]}),i.jsx(O0,{className:"text-red-600 dark:text-red-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[p.itemCount," cost items"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Impact"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",p.totalMonthly.toLocaleString()]})]}),i.jsx(Oa,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"x4.33 weeks/month"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Annual Impact"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",p.totalAnnual.toLocaleString()]})]}),i.jsx(I0,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"x52 weeks/year"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Top Category"}),i.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:p.topCategory.category})]}),i.jsx(Tr,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["$",p.topCategory.amount.toLocaleString(),"/week"]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Recurring Weekly Costs"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Track and manage your regular weekly business expenses"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Bi,{size:16}),"Export CSV"]}),i.jsxs("button",{onClick:()=>e("weekly"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(aa,{size:16}),"Add Weekly Cost"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search weekly costs...",value:n,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qh,{className:"text-slate-400",size:16}),i.jsx("select",{value:s,onChange:w=>o(w.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:h.map(w=>i.jsx("option",{value:w,children:w==="all"?"All Categories":w},w))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>y("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Cost Item",c.key==="name"&&i.jsx("span",{children:c.direction==="asc"?"↑":"↓"})]})}),i.jsx("th",{className:"p-3",children:"Category"}),i.jsx("th",{className:"p-3 text-right cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>y("amount"),children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Weekly Amount",c.key==="amount"&&i.jsx("span",{children:c.direction==="asc"?"↑":"↓"})]})}),i.jsx("th",{className:"p-3 text-right",children:"Monthly Impact"}),i.jsx("th",{className:"p-3 text-right",children:"Annual Impact"}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:m.length>0?m.map(w=>{const k=parseFloat(w.amount)||0,b=k*4.33,N=k*52;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:w.name})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:w.category||"Other"})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:["$",k.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-orange-600 dark:text-orange-400",children:["$",b.toFixed(2)]})}),i.jsx("td",{className:"p-3 text-right",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",N.toLocaleString()]})}),i.jsx("td",{className:"p-3 max-w-xs",children:i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:w.notes&&w.notes.length>50?`${w.notes.substring(0,50)}...`:w.notes||"—"})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>e("weekly",w),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit cost",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>r("weekly",w.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete cost",children:i.jsx(Jt,{size:16})})]})})]},w.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:n||s!=="all"?i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(ii,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No weekly costs match your search criteria"}),i.jsx("button",{onClick:()=>{a(""),o("all")},className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Clear filters"})]}):i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Tr,{size:24,className:"text-slate-400"}),i.jsx("span",{children:"No weekly costs added yet"}),i.jsx("button",{onClick:()=>e("weekly"),className:"text-cyan-600 hover:text-cyan-500 text-sm font-medium",children:"Add your first weekly cost"})]})})})})]})}),m.length>0&&i.jsx("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border",children:i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 text-sm",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Showing ",m.length," of ",t.length," costs"]})}),i.jsxs("div",{className:"flex items-center gap-6 font-medium",children:[i.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Weekly: $",m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0).toFixed(2)]}),i.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:["Monthly: $",(m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0)*4.33).toFixed(2)]}),i.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["Annual: $",(m.reduce((w,k)=>w+(parseFloat(k.amount)||0),0)*52).toLocaleString()]})]})]})})]}),p.highestCost>1e3&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(R0,{className:"text-amber-600 dark:text-amber-400",size:20}),i.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"High Weekly Cost Alert"})]}),i.jsxs("p",{className:"text-amber-700 dark:text-amber-300 text-sm mt-2",children:["You have a weekly cost of $",p.highestCost.toLocaleString(),", which amounts to $",(p.highestCost*52).toLocaleString()," annually. Consider reviewing this expense for potential savings opportunities."]})]})]})},Yle=[{min:1e4,max:1/0,rate:10},{min:8e3,max:9999,rate:8},{min:5e3,max:7999,rate:5},{min:3500,max:4999,rate:3},{min:0,max:3499,rate:1.5}],Xle=[{min:1e4,max:1/0,bonus:10},{min:8e3,max:9999,bonus:8},{min:5e3,max:7999,bonus:5},{min:3500,max:4999,bonus:2},{min:0,max:3499,bonus:0}],Jle=({userId:t,db:e,appId:r})=>{const[n,a]=V.useState(Yle),[s,o]=V.useState(0),[c,d]=V.useState(Xle),[h,m]=V.useState(0),[p,y]=V.useState(0),[v,w]=V.useState([]),[k,b]=V.useState("employees"),[N,S]=V.useState(!1),[E,P]=V.useState(null),[_,O]=V.useState(""),[T,R]=V.useState("all"),[M,D]=V.useState("all"),[A,F]=V.useState({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""});V.useEffect(()=>{if(!t||!e||!r){console.log("Missing Firebase props:",{userId:t,db:e,appId:r});return}console.log("Setting up Firebase listener for employees...");const q=fc(e,"artifacts",r,"users",t,"employees"),he=bd(q,ge=>{const ce=ge.docs.map(Ne=>({id:Ne.id,...Ne.data()}));console.log("Employees loaded from Firebase:",ce),w(ce)},ge=>{console.error("Error fetching employees:",ge)});return()=>he()},[t,e,r]);const L=V.useMemo(()=>v.filter(q=>{const he=q.name.toLowerCase().includes(_.toLowerCase())||q.position.toLowerCase().includes(_.toLowerCase())||q.email.toLowerCase().includes(_.toLowerCase()),ge=T==="all"||q.status===T,ce=M==="all"||q.department===M;return he&&ge&&ce}),[v,_,T,M]),Z=V.useMemo(()=>{const q=v.filter(Ne=>Ne.status==="active");let he=0,ge=0,ce=0;return q.forEach(Ne=>{if(Ne.payType==="salary"?he+=(Ne.baseSalary||0)/12:(he+=(Ne.hourlyRate||0)*(Ne.hoursWorked||0),ce+=Ne.hoursWorked||0),Ne.incentiveType==="percent"){const Ae=n.find(et=>Ne.salesAmount>=et.min&&Ne.salesAmount<=et.max);Ae&&(ge+=Ne.salesAmount*(Ae.rate/100))}else if(Ne.incentiveType==="hourly"){const Ae=c.find(et=>Ne.salesAmount>=et.min&&Ne.salesAmount<=et.max);Ae&&(ge+=(Ne.hoursWorked||0)*Ae.bonus)}}),{activeEmployeeCount:q.length,totalEmployeeCount:v.length,totalBasePay:he,totalIncentives:ge,totalPayroll:he+ge,averagePay:q.length>0?(he+ge)/q.length:0,totalHours:ce}},[v,n,c]),ae=V.useMemo(()=>["all",...[...new Set(v.map(he=>he.department))]],[v]),W=V.useMemo(()=>{const q=n.find(he=>s>=he.min&&s<=he.max);return q?s*(q.rate/100):0},[s,n]),G=V.useMemo(()=>{const q=c.find(he=>h>=he.min&&h<=he.max);return!q||!p?0:p*q.bonus},[h,p,c]),Y=(q,he,ge)=>{const ce=[...n];ce[q][he]=parseFloat(ge)||0,a(ce)},te=(q,he,ge)=>{const ce=[...c];ce[q][he]=parseFloat(ge)||0,d(ce)},ne=(q,he)=>{F(ge=>({...ge,[q]:he}))},z=async()=>{if(console.log("Adding employee:",A),!A.name.trim()){alert("Please enter employee name");return}if(!t||!e||!r){alert("Please ensure you're logged in.");return}try{const q=fc(e,"artifacts",r,"users",t,"employees");await M4(q,{...A,baseSalary:parseFloat(A.baseSalary)||0,hourlyRate:parseFloat(A.hourlyRate)||0,hoursWorked:0,salesAmount:0,createdAt:Bt()}),console.log("Employee saved to Firebase successfully!"),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""}),S(!1)}catch(q){console.error("Error adding employee:",q),alert("Failed to add employee: "+q.message)}},ee=q=>{F(q),P(q.id),S(!0)},J=async()=>{if(!(!t||!e||!E))try{const q=gr(e,"artifacts",r,"users",t,"employees",E);await ea(q,{...A,baseSalary:parseFloat(A.baseSalary)||0,hourlyRate:parseFloat(A.hourlyRate)||0,modifiedAt:Bt()}),P(null),S(!1),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""})}catch(q){console.error("Error updating employee:",q),alert("Failed to update employee: "+q.message)}},le=async q=>{if(!(!t||!e)&&window.confirm("Are you sure you want to delete this employee?"))try{const he=gr(e,"artifacts",r,"users",t,"employees",q);await h1(he),console.log("Employee deleted from Firebase")}catch(he){console.error("Error deleting employee:",he),alert("Failed to delete employee: "+he.message)}},fe=async(q,he,ge)=>{if(!(!t||!e))try{const ce=gr(e,"artifacts",r,"users",t,"employees",q);await ea(ce,{[he]:parseFloat(ge)||0,modifiedAt:Bt()})}catch(ce){console.error("Error updating employee data:",ce)}},be=q=>{if(q.incentiveType==="percent"){const he=n.find(ge=>q.salesAmount>=ge.min&&q.salesAmount<=ge.max);return he?q.salesAmount*(he.rate/100):0}else if(q.incentiveType==="hourly"){const he=c.find(ge=>q.salesAmount>=ge.min&&q.salesAmount<=ge.max);return he?(q.hoursWorked||0)*he.bonus:0}return 0},me=q=>q.payType==="salary"?(q.baseSalary||0)/12:(q.hourlyRate||0)*(q.hoursWorked||0),xe=q=>{switch(q){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"inactive":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";case"terminated":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Payroll Management System"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Manage employees, calculate payroll, and track incentives"})]})}),i.jsxs("div",{className:"flex space-x-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsxs("button",{onClick:()=>b("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="employees"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(Mo,{size:16}),"Employees"]}),i.jsxs("button",{onClick:()=>b("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="payroll"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(pc,{size:16}),"Payroll"]}),i.jsxs("button",{onClick:()=>b("incentives"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="incentives"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(Oa,{size:16}),"Incentive Calculator"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Active Employees"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Z.activeEmployeeCount})]}),i.jsx(Mo,{className:"text-blue-600 dark:text-blue-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["of ",Z.totalEmployeeCount," total"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Monthly Base Pay"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",Z.totalBasePay.toLocaleString()]})]}),i.jsx(Tr,{className:"text-green-600 dark:text-green-400",size:24})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Avg: $",Z.averagePay.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Incentives"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",Z.totalIncentives.toLocaleString()]})]}),i.jsx(Oa,{className:"text-purple-600 dark:text-purple-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Current period"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Total Payroll"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",Z.totalPayroll.toLocaleString()]})]}),i.jsx(pc,{className:"text-orange-600 dark:text-orange-400",size:24})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Base + incentives"})]})]}),k==="employees"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Employee Management"}),i.jsxs("button",{onClick:()=>{console.log("Add Employee button clicked"),S(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(Ud,{size:16}),"Add Employee"]})]}),v.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(Mo,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No employees yet"}),i.jsx("p",{className:"mb-4",children:"Add your first employee to get started with payroll management."}),i.jsx("button",{onClick:()=>{console.log("Add First Employee button clicked"),S(!0)},className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg transition-colors",children:"Add First Employee"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search employees...",value:_,onChange:q=>O(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qh,{className:"text-slate-400",size:16}),i.jsxs("select",{value:T,onChange:q=>R(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"terminated",children:"Terminated"})]}),i.jsx("select",{value:M,onChange:q=>D(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:ae.map(q=>i.jsx("option",{value:q,children:q==="all"?"All Departments":q},q))})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Employee"}),i.jsx("th",{className:"p-3",children:"Department"}),i.jsx("th",{className:"p-3",children:"Pay Type"}),i.jsx("th",{className:"p-3",children:"Base Pay"}),i.jsx("th",{className:"p-3",children:"Incentive Type"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"text-sm",children:L.map(q=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:q.position}),i.jsx("div",{className:"text-xs text-slate-400",children:q.email})]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:q.department})}),i.jsxs("td",{className:"p-3",children:[i.jsx("span",{className:"capitalize",children:q.payType}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.payType==="salary"?`$${q.baseSalary.toLocaleString()}/year`:`$${q.hourlyRate}/hour`})]}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",me(q).toLocaleString()]})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"capitalize",children:q.incentiveType})}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${xe(q.status)}`,children:q.status})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>ee(q),className:"text-slate-500 dark:text-slate-400 hover:text-blue-500 p-1 rounded transition-colors",title:"Edit employee",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>le(q.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete employee",children:i.jsx(Jt,{size:16})})]})})]},q.id))})]})})]}),N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:E?"Edit Employee":"Add New Employee"})}),i.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",value:A.name,onChange:q=>ne("name",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Position *"}),i.jsx("input",{type:"text",value:A.position,onChange:q=>ne("position",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:A.email,onChange:q=>ne("email",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:A.phone,onChange:q=>ne("phone",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Department"}),i.jsxs("select",{value:A.department,onChange:q=>ne("department",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"Operations",children:"Operations"}),i.jsx("option",{value:"Sales",children:"Sales"}),i.jsx("option",{value:"Administration",children:"Administration"}),i.jsx("option",{value:"Management",children:"Management"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Pay Type"}),i.jsxs("select",{value:A.payType,onChange:q=>ne("payType",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"salary",children:"Salary"}),i.jsx("option",{value:"hourly",children:"Hourly"})]})]}),A.payType==="salary"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Annual Salary"}),i.jsx("input",{type:"number",value:A.baseSalary,onChange:q=>ne("baseSalary",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hourly Rate"}),i.jsx("input",{type:"number",step:"0.01",value:A.hourlyRate,onChange:q=>ne("hourlyRate",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Incentive Type"}),i.jsxs("select",{value:A.incentiveType,onChange:q=>ne("incentiveType",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"percent",children:"Percentage"}),i.jsx("option",{value:"hourly",children:"Hourly Bonus"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),i.jsxs("select",{value:A.status,onChange:q=>ne("status",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"terminated",children:"Terminated"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hire Date"}),i.jsx("input",{type:"date",value:A.hireDate,onChange:q=>ne("hireDate",q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:A.notes,onChange:q=>ne("notes",q.target.value),rows:"3",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Additional notes about the employee..."})]})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{S(!1),P(null),F({name:"",position:"",email:"",phone:"",baseSalary:"",payType:"salary",hourlyRate:"",incentiveType:"none",status:"active",hireDate:new Date().toISOString().split("T")[0],department:"Operations",notes:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Cancel"}),i.jsx("button",{onClick:()=>{console.log("Form submit button clicked"),E?J():z()},className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:E?"Update Employee":"Add Employee"})]})]})})]}),k==="payroll"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:"Payroll Calculator"}),v.filter(q=>q.status==="active").length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(pc,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No active employees"}),i.jsx("p",{className:"mb-4",children:"Add some employees to start calculating payroll."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Employee"}),i.jsx("th",{className:"p-3",children:"Hours"}),i.jsx("th",{className:"p-3",children:"Sales"}),i.jsx("th",{className:"p-3",children:"Base Pay"}),i.jsx("th",{className:"p-3",children:"Incentive"}),i.jsx("th",{className:"p-3",children:"Total Pay"})]})}),i.jsx("tbody",{className:"text-sm",children:v.filter(q=>q.status==="active").map(q=>{const he=me(q),ge=be(q),ce=he+ge;return i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50",children:[i.jsxs("td",{className:"p-3",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.position})]}),i.jsx("td",{className:"p-3",children:q.payType==="hourly"?i.jsx("input",{type:"number",value:q.hoursWorked||"",onChange:Ne=>fe(q.id,"hoursWorked",Ne.target.value),className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"0"}):i.jsx("span",{className:"text-slate-400",children:"—"})}),i.jsx("td",{className:"p-3",children:q.incentiveType!=="none"?i.jsx("input",{type:"number",value:q.salesAmount||"",onChange:Ne=>fe(q.id,"salesAmount",Ne.target.value),className:"w-24 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"0"}):i.jsx("span",{className:"text-slate-400",children:"—"})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",he.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:["$",ge.toFixed(2)]})}),i.jsx("td",{className:"p-3",children:i.jsxs("span",{className:"font-mono font-bold text-blue-600 dark:text-blue-400",children:["$",ce.toFixed(2)]})})]},q.id)})})]})})]}),k==="incentives"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Percent Incentive Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Brackets"}),i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2",children:"Sales Bracket"}),i.jsx("th",{className:"p-2",children:"% Scale"})]})}),i.jsx("tbody",{children:n.map((q,he)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("td",{className:"p-2 font-mono bg-blue-100 dark:bg-blue-900/50",children:["$",q.min.toLocaleString(),q.max===1/0?"+":` - $${q.max.toLocaleString()}`]}),i.jsxs("td",{className:"p-2 bg-blue-100 dark:bg-blue-900/50",children:[i.jsx("input",{type:"number",value:q.rate,onChange:ge=>Y(he,"rate",ge.target.value),className:"w-20 bg-transparent text-right font-mono"})," %"]})]},he))})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Calculation"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Actual Sales"}),i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:s,onChange:q=>o(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 pl-10 p-2 rounded-md"})]})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 p-4 rounded-lg text-center",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Estimated Bonus"}),i.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",W.toFixed(2)]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:"Hourly Incentive Calculator"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Brackets"}),i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2",children:"Sales Bracket"}),i.jsx("th",{className:"p-2",children:"Bonus per Hour"})]})}),i.jsx("tbody",{children:c.map((q,he)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("td",{className:"p-2 font-mono bg-blue-100 dark:bg-blue-900/50",children:["$",q.min.toLocaleString(),q.max===1/0?"+":` - $${q.max.toLocaleString()}`]}),i.jsxs("td",{className:"p-2 bg-blue-100 dark:bg-blue-900/50",children:["$ ",i.jsx("input",{type:"number",value:q.bonus,onChange:ge=>te(he,"bonus",ge.target.value),className:"w-20 bg-transparent text-right font-mono"})]})]},he))})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Bonus Calculation"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Actual Sales"}),i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"number",value:h,onChange:q=>m(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 pl-10 p-2 rounded-md"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hours Worked"}),i.jsx("input",{type:"number",value:p,onChange:q=>y(parseFloat(q.target.value)||0),className:"w-full bg-yellow-100 dark:bg-yellow-800/50 p-2 rounded-md"})]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 p-4 rounded-lg text-center",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Estimated Bonus"}),i.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",G.toFixed(2)]})]})]})]})]})]})]})]})},Zle=({bills:t,paidStatus:e,selectedCategory:r,setSelectedCategory:n,handleTogglePaid:a,handleSort:s,openModal:o,handleDelete:c,handleEnhancedExportCSV:d})=>{const[h,m]=V.useState(""),[p,y]=V.useState("dueDay"),[v,w]=V.useState("asc"),[k,b]=V.useState("all"),[N,S]=V.useState("all"),[E,P]=V.useState("all"),[_,O]=V.useState(!1),T=new Date,R=new Date(T.getFullYear(),T.getMonth(),T.getDate()-T.getDay()),M=new Date(R.getTime()+8640*60*1e3),D=new Date(M.getTime()+1440*60*1e3),A=new Date(D.getTime()+8640*60*1e3),F=new Date(T.getFullYear(),T.getMonth(),1),L=new Date(T.getFullYear(),T.getMonth()+1,0),Z=V.useMemo(()=>{let te=t.filter(ne=>{if(r&&ne.category!==r||h&&!ne.name.toLowerCase().includes(h.toLowerCase())||k==="paid"&&!e[ne.id]||k==="unpaid"&&e[ne.id]||E==="under100"&&ne.amount>=100||E==="100to500"&&(ne.amount<100||ne.amount>500)||E==="over500"&&ne.amount<=500)return!1;if(N!=="all"&&ne.dueDay){const z=new Date(T.getFullYear(),T.getMonth(),ne.dueDay);switch(z<T&&z.setMonth(z.getMonth()+1),N){case"overdue":if(z>=T)return!1;break;case"thisWeek":if(z<R||z>M)return!1;break;case"nextWeek":if(z<D||z>A)return!1;break;case"thisMonth":if(z<F||z>L)return!1;break}}return!0});return te.sort((ne,z)=>{let ee=ne[p],J=z[p];p==="status"&&(ee=e[ne.id]?"paid":"unpaid",J=e[z.id]?"paid":"unpaid"),typeof ee=="string"&&(ee=ee.toLowerCase(),J=J.toLowerCase());let le=0;return ee<J&&(le=-1),ee>J&&(le=1),v==="desc"?-le:le}),te},[t,r,h,k,N,E,p,v,e,T]),ae=te=>{p===te?w(v==="asc"?"desc":"asc"):(y(te),w("asc"))},W=()=>{m(""),y("dueDay"),w("asc"),b("all"),S("all"),P("all"),n(null)},G=V.useMemo(()=>{let te=0;return h&&te++,r&&te++,k!=="all"&&te++,N!=="all"&&te++,E!=="all"&&te++,te},[h,r,k,N,E]),Y=({type:te,label:ne})=>{const z=Q.useRef(null);return i.jsxs("div",{className:"inline-block",children:[i.jsx("input",{ref:z,type:"file",accept:".csv",onChange:ee=>{ee.target.files[0]&&(window.handleEnhancedCSVImport?.(ee.target.files[0],te),ee.target.value="")},style:{display:"none"}}),i.jsxs("button",{onClick:()=>z.current?.click(),className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(D0,{size:16}),ne]})]})};return i.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Monthly Bills"}),r&&i.jsxs("button",{onClick:()=>n(null),className:"text-sm text-cyan-500 dark:text-cyan-400 hover:underline",children:["Clear Filter: ",r]}),G>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:[G," filter",G!==1?"s":""," active"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Y,{type:"bill",label:"Import"}),i.jsxs("button",{onClick:()=>d(Z,"bills"),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Bi,{size:16})," Export"]})]})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),i.jsx("input",{type:"text",placeholder:"Search bills by name...",value:h,onChange:te=>m(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-cyan-500 focus:border-transparent"}),h&&i.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:i.jsx(si,{size:16})})]}),i.jsxs("button",{onClick:()=>O(!_),className:`flex items-center gap-2 px-4 py-2 rounded-md border transition-colors ${_?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300":"border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx(qh,{size:16}),"Filters",i.jsx(Fd,{className:`transition-transform ${_?"rotate-180":""}`,size:16})]}),G>0&&i.jsx("button",{onClick:W,className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:"Clear All"})]}),_&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Sort By"}),i.jsxs("select",{value:`${p}-${v}`,onChange:te=>{const[ne,z]=te.target.value.split("-");y(ne),w(z)},className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),i.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),i.jsx("option",{value:"dueDay-asc",children:"Due Date (Early)"}),i.jsx("option",{value:"dueDay-desc",children:"Due Date (Late)"}),i.jsx("option",{value:"amount-asc",children:"Amount (Low-High)"}),i.jsx("option",{value:"amount-desc",children:"Amount (High-Low)"}),i.jsx("option",{value:"status-asc",children:"Status (Unpaid First)"}),i.jsx("option",{value:"status-desc",children:"Status (Paid First)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Payment Status"}),i.jsxs("select",{value:k,onChange:te=>b(te.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Bills"}),i.jsx("option",{value:"unpaid",children:"Unpaid Only"}),i.jsx("option",{value:"paid",children:"Paid Only"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Due Date"}),i.jsxs("select",{value:N,onChange:te=>S(te.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Dates"}),i.jsx("option",{value:"overdue",children:"Overdue"}),i.jsx("option",{value:"thisWeek",children:"This Week"}),i.jsx("option",{value:"nextWeek",children:"Next Week"}),i.jsx("option",{value:"thisMonth",children:"This Month"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Amount Range"}),i.jsxs("select",{value:E,onChange:te=>P(te.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Amounts"}),i.jsx("option",{value:"under100",children:"Under $100"}),i.jsx("option",{value:"100to500",children:"$100 - $500"}),i.jsx("option",{value:"over500",children:"Over $500"})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Showing ",Z.length," of ",t.length," bills",G>0&&` with ${G} filter${G!==1?"s":""} applied`]})})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:i.jsxs("button",{onClick:()=>ae("status"),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-300",children:["Status",p==="status"&&(v==="asc"?i.jsx(_m,{size:14}):i.jsx(km,{size:14}))]})}),i.jsx("th",{className:"p-3",children:i.jsxs("button",{onClick:()=>ae("name"),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-300",children:["Name",p==="name"&&(v==="asc"?i.jsx(_m,{size:14}):i.jsx(km,{size:14}))]})}),i.jsx("th",{className:"p-3",children:"Notes"}),i.jsx("th",{className:"p-3",children:"Receipt"}),i.jsx("th",{className:"p-3 text-right",children:i.jsxs("button",{onClick:()=>ae("amount"),className:"flex items-center gap-1 ml-auto hover:text-slate-700 dark:hover:text-slate-300",children:["Amount",p==="amount"&&(v==="asc"?i.jsx(_m,{size:14}):i.jsx(km,{size:14}))]})}),i.jsx("th",{className:"p-3 text-center",children:i.jsxs("button",{onClick:()=>ae("dueDay"),className:"flex items-center gap-1 mx-auto hover:text-slate-700 dark:hover:text-slate-300",children:["Due Day",p==="dueDay"&&(v==="asc"?i.jsx(_m,{size:14}):i.jsx(km,{size:14}))]})}),i.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),i.jsx("tbody",{children:Z.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-medium mb-2",children:"No bills added yet"}),i.jsx("p",{className:"text-sm",children:'Click "Add New Bill" to get started'})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-medium mb-2",children:"No bills match your filters"}),i.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]})})}):Z.map(te=>i.jsxs("tr",{className:`border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${e[te.id]?"text-slate-400 dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:[i.jsx("td",{className:"p-3",children:i.jsx("button",{onClick:()=>a(te.id),className:"hover:scale-110 transition-transform",children:e[te.id]?i.jsx(ta,{className:"text-green-500",size:20}):i.jsx(lz,{className:"text-slate-400 dark:text-slate-600",size:20})})}),i.jsxs("td",{className:`p-3 font-medium ${e[te.id]?"line-through":""}`,children:[te.name,te.category&&i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:te.category})]}),i.jsx("td",{className:"p-3 text-center",children:te.notes&&i.jsxs("div",{className:"group relative flex justify-center",children:[i.jsx(l6,{size:16,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-slate-700 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:te.notes})]})}),i.jsx("td",{className:"p-3 text-center",children:te.attachmentURL?i.jsx("a",{href:te.attachmentURL,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform inline-block",children:i.jsx(mA,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}):i.jsx(mA,{size:16,className:"text-slate-400 dark:text-slate-600"})}),i.jsxs("td",{className:"p-3 text-right font-mono font-semibold",children:["$",(te.amount||0).toFixed(2)]}),i.jsx("td",{className:"p-3 text-center font-medium",children:te.dueDay}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>o("bill",te),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 p-1 rounded transition-colors",title:"Edit bill",children:i.jsx(Ta,{size:16})}),i.jsx("button",{onClick:()=>c("bill",te.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete bill",children:i.jsx(Jt,{size:16})})]})})]},te.id))})]})}),i.jsxs("button",{onClick:()=>o("bill"),className:"mt-4 flex items-center gap-2 text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 font-semibold transition-colors",children:[i.jsx(aa,{size:18}),"Add New Bill"]})]})},ece={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},ka="hvac-finance-dashboard",PN=PD(ece),bD=Sj(PN),sn=SB(PN),tce=Qq(PN),rce=()=>{const[t,e]=V.useState(null),[r,n]=V.useState(!0),[a,s]=V.useState([]),[o,c]=V.useState([]),[d,h]=V.useState([]),[m,p]=V.useState([]),[y,v]=V.useState([]),[w,k]=V.useState([]),[b,N]=V.useState([]),[S,E]=V.useState([]),[P,_]=V.useState([]),[O,T]=V.useState([]),[R,M]=V.useState({}),[D,A]=V.useState(!1),[F,L]=V.useState(null),[Z,ae]=V.useState("bill"),[W,G]=V.useState("dashboard"),[Y,te]=V.useState(null),[ne,z]=V.useState(0),[ee,J]=V.useState({start:new Date,end:new Date}),[le,fe]=V.useState("monthly"),[be,me]=V.useState(!0),[xe,q]=V.useState("dark"),[he,ge]=V.useState(""),[ce,Ne]=V.useState([]),[Ae,et]=V.useState([]),[tt,St]=V.useState([]);V.useEffect(()=>{document.documentElement.classList.toggle("dark",xe==="dark")},[xe]);const ar=()=>q(xe==="light"?"dark":"light");V.useEffect(()=>{const qe=new Date;let Xe,mt;if(le==="monthly")Xe=new Date(qe.getFullYear(),qe.getMonth(),1),mt=new Date(qe.getFullYear(),qe.getMonth()+1,0);else if(le==="quarterly"){const nt=Math.floor(qe.getMonth()/3);Xe=new Date(qe.getFullYear(),nt*3,1),mt=new Date(qe.getFullYear(),nt*3+3,0)}else Xe=new Date(qe.getFullYear(),0,1),mt=new Date(qe.getFullYear(),11,31);J({start:Xe,end:mt})},[le]);const ut=V.useMemo(()=>ee.start.getFullYear()+"-"+String(ee.start.getMonth()+1).padStart(2,"0"),[ee]);V.useEffect(()=>{const qe=T9(bD,Xe=>{e(Xe?Xe.uid:null),n(!1)});return()=>qe()},[]),V.useEffect(()=>{if(!t)return;const Xe=Object.entries({bills:s,debts:c,incomes:h,weeklyCosts:p,tasks:v,taxPayments:k,goals:N,inventory:E,vehicles:_,maintenanceLogs:T,workOrders:et,technicians:St}).map(([nt,Wt])=>bd(I4(fc(sn,"artifacts",ka,"users",t,nt)),br=>{Wt(br.docs.map(Ht=>({id:Ht.id,...Ht.data()})))},br=>console.error(`Error fetching ${nt}:`,br))),mt=bd(gr(sn,"artifacts",ka,"users",t,"paidStatus",ut),nt=>{M(nt.exists()?nt.data().status:{})},nt=>console.error("Error fetching paid status:",nt));return()=>{Xe.forEach(nt=>nt()),mt()}},[t,ut]),V.useEffect(()=>{if(!t)return;const qe=bd(gr(sn,"artifacts",ka,"users",t,"settings","currentBalance"),Xe=>{z(Xe.exists()&&Xe.data().amount||0)},Xe=>console.error("Error fetching current balance:",Xe));return()=>qe()},[t]);const ye=V.useMemo(()=>{const qe=(d||[]).reduce((Ht,Vr)=>Ht+(Vr.amount||0),0),Xe=(a||[]).reduce((Ht,Vr)=>Ht+(Vr.amount||0),0),mt=(m||[]).reduce((Ht,Vr)=>Ht+(Vr.amount||0),0)*4.33,nt=Xe+mt,Wt=qe-nt,br=(o||[]).reduce((Ht,Vr)=>Ht+((Vr.totalAmount||0)-(Vr.paidAmount||0)),0);return{totalIncome:qe,totalOutflow:nt,netCashFlow:Wt,totalDebt:br}},[a,o,d,m]),Pe=V.useMemo(()=>{const qe=(a||[]).reduce((mt,nt)=>{const Wt=nt.category||"Uncategorized";return mt[Wt]=(mt[Wt]||0)+nt.amount,mt},{}),Xe=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#19D4FF"];return Object.entries(qe).map(([mt,nt],Wt)=>({name:mt,value:nt,color:Xe[Wt%Xe.length]})).sort((mt,nt)=>nt.value-mt.value)},[a]),rt=V.useMemo(()=>(b||[]).map(qe=>{let Xe=0;if(qe.type==="debt"){const mt=(o||[]).find(nt=>nt.id===qe.targetId);mt&&(Xe=mt.paidAmount/mt.totalAmount*100)}return{...qe,progress:Math.min(Xe,100)}}),[b,o]),Cr=async qe=>{t&&await Ea(gr(sn,"artifacts",ka,"users",t,"paidStatus",ut),{status:{...R,[qe]:!R[qe]}},{merge:!0})},Et=(qe,Xe=null)=>{ae(qe),L(Xe),A(!0)},hn=async qe=>{if(!t)return alert("Please log in to update the balance.");await Ea(gr(sn,"artifacts",ka,"users",t,"settings","currentBalance"),{amount:qe,updatedAt:Bt()},{merge:!0})},zt=async(qe,Xe)=>{if(!t)return;const nt={bill:"bills",debt:"debts",income:"incomes",weekly:"weeklyCosts",task:"tasks",taxPayment:"taxPayments",goal:"goals",inventory:"inventory",vehicle:"vehicles",maintenanceLog:"maintenanceLogs"}[Z];if(!nt)return alert("Invalid modal type for saving.");const Wt=["artifacts",ka,"users",t,nt],br={...qe,modifiedAt:Bt()};if(Xe){const Ht=Kq(tce,`receipts/${t}/${Date.now()}-${Xe.name}`);br.attachmentURL=await Hq(Ht,Xe).then(()=>Gq(Ht))}F?.id?await ea(gr(sn,...Wt,F.id),br):await M4(fc(sn,...Wt),{...br,createdAt:Bt()}),A(!1),L(null)},jt=async(qe,Xe)=>{if(!t||!window.confirm("Delete this item?"))return;const nt={bill:"bills",debt:"debts",income:"incomes",weekly:"weeklyCosts",task:"tasks",taxPayment:"taxPayments",goal:"goals",inventory:"inventory",vehicle:"vehicles",maintenanceLog:"maintenanceLogs"}[qe];if(!nt)return alert("Invalid item type for deletion.");await h1(gr(sn,"artifacts",ka,"users",t,nt,Xe))},$n=async(qe,Xe)=>{if(!t||!Xe.length||!window.confirm(`Delete ${Xe.length} selected items?`))return;const nt={inventory:"inventory",vehicle:"vehicles"}[qe];if(!nt)return alert("Invalid bulk delete type.");const Wt=qk(sn);Xe.forEach(br=>{Wt.delete(gr(sn,"artifacts",ka,"users",t,nt,br)),qe==="vehicle"&&(O||[]).filter(Ht=>Ht.vehicleId===br).forEach(Ht=>Wt.delete(gr(sn,"artifacts",ka,"users",t,"maintenanceLogs",Ht.id)))}),await Wt.commit(),Ne([])},Qs=async()=>{if(!t||!window.confirm("Clear all your business data? This is irreversible."))return;const qe=["bills","debts","incomes","weeklyCosts","tasks","taxPayments","goals","inventory","vehicles","maintenanceLogs","paidStatus","system","settings","workOrders","technicians","customers"];for(const Xe of qe){const mt=await LB(fc(sn,"artifacts",ka,"users",t,Xe));if(!mt.empty){const nt=qk(sn);mt.docs.forEach(Wt=>nt.delete(Wt.ref)),await nt.commit()}}alert("All business data has been cleared.")};if(r)return i.jsx("div",{className:"bg-slate-900 text-white min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})});if(!t)return i.jsx(bz,{setUserId:e});const Da=()=>i.jsxs(i.Fragment,{children:[be&&i.jsx(Ble,{bills:a,paidStatus:R,onClose:()=>me(!1)}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx(Ao,{title:"Total Monthly Income",value:`$${ye.totalIncome.toLocaleString()}`,icon:i.jsx(az,{size:24}),color:"green"}),i.jsx(Ao,{title:"Total Monthly Outflow",value:`$${ye.totalOutflow.toLocaleString()}`,icon:i.jsx(rz,{size:24}),color:"red"}),i.jsx(Ao,{title:"Projected Net",value:`$${ye.netCashFlow.toLocaleString()}`,icon:i.jsx(Tr,{size:24}),color:ye.netCashFlow>=0?"cyan":"amber"}),i.jsx(Ao,{title:"Outstanding Debt",value:`$${ye.totalDebt.toLocaleString()}`,icon:i.jsx(R0,{size:24}),color:"orange"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[i.jsx(Zle,{bills:a,paidStatus:R,selectedCategory:Y,setSelectedCategory:te,handleTogglePaid:Cr,openModal:Et,handleDelete:jt}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Expense Breakdown"}),i.jsx(qle,{data:Pe,onSliceClick:te})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Work Order Management"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Access advanced invoicing, customer management, and dispatch."}),i.jsxs("button",{onClick:()=>G("workorder"),className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Na,{size:16})," Open Work Orders"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Getting Started"}),i.jsxs("button",{onClick:Qs,className:"w-full flex items-center justify-center gap-2 text-sm bg-red-600 hover:bg-red-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(Jt,{size:16})," Clear All Data"]})]})]})]})]});return i.jsxs("div",{className:`${xe} bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-white min-h-screen font-sans`,children:[i.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[i.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Business Financial Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete Business Management Solution"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:ar,className:"p-2 rounded-full bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-slate-700",children:xe==="light"?i.jsx(hz,{size:20}):i.jsx(pz,{size:20})}),i.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-3 rounded-lg",children:[i.jsx("span",{className:"text-sm font-semibold",children:"Period:"}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-md p-1",children:[i.jsx("button",{onClick:()=>fe("monthly"),className:`px-3 py-1 text-sm rounded transition-colors ${le==="monthly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Monthly"}),i.jsx("button",{onClick:()=>fe("quarterly"),className:`px-3 py-1 text-sm rounded transition-colors ${le==="quarterly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Quarterly"}),i.jsx("button",{onClick:()=>fe("yearly"),className:`px-3 py-1 text-sm rounded transition-colors ${le==="yearly"?"bg-blue-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Yearly"})]})]}),i.jsxs("button",{onClick:()=>A9(bD),className:"flex items-center gap-2 text-sm bg-slate-600 hover:bg-slate-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[i.jsx(uz,{size:16})," Logout"]})]})]}),i.jsxs("nav",{className:"flex items-center border-b border-slate-200 dark:border-slate-700 mb-6 overflow-x-auto",children:[i.jsx("button",{onClick:()=>G("dashboard"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="dashboard"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Dashboard"}),i.jsx("button",{onClick:()=>G("calendar"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="calendar"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calendar"}),i.jsx("button",{onClick:()=>G("workorder"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="workorder"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Work Orders"}),i.jsx("button",{onClick:()=>G("vehicles"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="vehicles"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Vehicles"}),i.jsx("button",{onClick:()=>G("inventory"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="inventory"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Inventory"}),i.jsx("button",{onClick:()=>G("debts"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="debts"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Debt"}),i.jsx("button",{onClick:()=>G("incomes"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="incomes"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Income"}),i.jsx("button",{onClick:()=>G("weeklyCosts"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="weeklyCosts"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Weekly Costs"}),i.jsx("button",{onClick:()=>G("goals"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="goals"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Goals"}),i.jsx("button",{onClick:()=>G("pnl"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="pnl"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"P&L"}),i.jsx("button",{onClick:()=>G("forecast"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="forecast"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Forecast"}),i.jsx("button",{onClick:()=>G("valuation"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="valuation"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Valuation"}),i.jsx("button",{onClick:()=>G("tax"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="tax"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Tax"}),i.jsx("button",{onClick:()=>G("incentives"),className:`px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${W==="incentives"?"text-cyan-600 dark:text-white border-b-2 border-cyan-500":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Incentives"})]}),i.jsxs("main",{children:[W==="dashboard"&&Da(),W==="valuation"&&i.jsx(Vle,{}),W==="calendar"&&i.jsx(zoe,{tasks:y,openModal:Et,workOrders:Ae,technicians:tt}),W==="tax"&&i.jsx(qoe,{taxPayments:w,openModal:Et,handleDelete:jt,workOrders:Ae,bills:a,weeklyCosts:m}),W==="pnl"&&i.jsx(Wle,{bills:a,weeklyCosts:m,reportingPeriod:le,dateRange:ee,workOrders:Ae}),W==="forecast"&&i.jsx(zle,{bills:a,weeklyCosts:m,currentBankBalance:ne,setCurrentBankBalance:hn}),W==="goals"&&i.jsx(Kle,{goalsWithProgress:rt,openModal:Et,onDeleteGoal:qe=>jt("goal",qe),onEditGoal:qe=>Et("goal",qe)}),W==="incentives"&&i.jsx(Jle,{userId:t,db:sn,appId:ka}),W==="workorder"&&i.jsx(Lle,{userId:t,db:sn,inventory:S}),W==="vehicles"&&i.jsx(Fle,{vehicles:P,maintenanceLogs:O,openModal:Et,handleDelete:jt,searchTerm:he,setSearchTerm:ge,handleBulkDelete:$n,selectedIds:ce,setSelectedIds:Ne}),W==="inventory"&&i.jsx(Ule,{inventory:S,openModal:Et,handleDelete:jt,handleBulkDelete:$n,selectedIds:ce,setSelectedIds:Ne,searchTerm:he,setSearchTerm:ge}),W==="debts"&&i.jsx(Hle,{debts:o,openModal:Et,handleDelete:jt,searchTerm:he,setSearchTerm:ge}),W==="incomes"&&i.jsx(Gle,{incomes:d,openModal:Et,handleDelete:jt}),W==="weeklyCosts"&&i.jsx(Qle,{weeklyCosts:m,openModal:Et,handleDelete:jt})]}),i.jsx("footer",{className:"text-center mt-8 py-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Powered by ",i.jsx("a",{href:"https://service.money/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-cyan-600 dark:text-cyan-400 hover:underline",children:"Service Coin"})]})})]}),D&&i.jsx(Woe,{item:F,type:Z,onSave:zt,onClose:()=>A(!1),debts:o,vehicles:P})]})};Y$.createRoot(document.getElementById("root")).render(i.jsx(Q.StrictMode,{children:i.jsx(rce,{})}));
