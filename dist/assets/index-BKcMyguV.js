(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function yy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $h={exports:{}},ga={},Wh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function Y0(){if(Vm)return Ce;Vm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.iterator;function P(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function b(j,H,me){this.props=j,this.context=H,this.refs=W,this.updater=me||V}b.prototype.isReactComponent={},b.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},b.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function q(){}q.prototype=b.prototype;function ne(j,H,me){this.props=j,this.context=H,this.refs=W,this.updater=me||V}var ae=ne.prototype=new q;ae.constructor=ne,$(ae,b.prototype),ae.isPureReactComponent=!0;var oe=Array.isArray,he=Object.prototype.hasOwnProperty,X={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(j,H,me){var xe,ke={},Ae=null,Ve=null;if(H!=null)for(xe in H.ref!==void 0&&(Ve=H.ref),H.key!==void 0&&(Ae=""+H.key),H)he.call(H,xe)&&!R.hasOwnProperty(xe)&&(ke[xe]=H[xe]);var Re=arguments.length-2;if(Re===1)ke.children=me;else if(1<Re){for(var Be=Array(Re),Ze=0;Ze<Re;Ze++)Be[Ze]=arguments[Ze+2];ke.children=Be}if(j&&j.defaultProps)for(xe in Re=j.defaultProps,Re)ke[xe]===void 0&&(ke[xe]=Re[xe]);return{$$typeof:r,type:j,key:Ae,ref:Ve,props:ke,_owner:X.current}}function C(j,H){return{$$typeof:r,type:j.type,key:H,ref:j.ref,props:j.props,_owner:j._owner}}function A(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function O(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(me){return H[me]})}var L=/\/+/g;function k(j,H){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):H.toString(36)}function He(j,H,me,xe,ke){var Ae=typeof j;(Ae==="undefined"||Ae==="boolean")&&(j=null);var Ve=!1;if(j===null)Ve=!0;else switch(Ae){case"string":case"number":Ve=!0;break;case"object":switch(j.$$typeof){case r:case e:Ve=!0}}if(Ve)return Ve=j,ke=ke(Ve),j=xe===""?"."+k(Ve,0):xe,oe(ke)?(me="",j!=null&&(me=j.replace(L,"$&/")+"/"),He(ke,H,me,"",function(Ze){return Ze})):ke!=null&&(A(ke)&&(ke=C(ke,me+(!ke.key||Ve&&Ve.key===ke.key?"":(""+ke.key).replace(L,"$&/")+"/")+j)),H.push(ke)),1;if(Ve=0,xe=xe===""?".":xe+":",oe(j))for(var Re=0;Re<j.length;Re++){Ae=j[Re];var Be=xe+k(Ae,Re);Ve+=He(Ae,H,me,Be,ke)}else if(Be=P(j),typeof Be=="function")for(j=Be.call(j),Re=0;!(Ae=j.next()).done;)Ae=Ae.value,Be=xe+k(Ae,Re++),Ve+=He(Ae,H,me,Be,ke);else if(Ae==="object")throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ve}function _t(j,H,me){if(j==null)return j;var xe=[],ke=0;return He(j,xe,"","",function(Ae){return H.call(me,Ae,ke++)}),xe}function At(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(me){(j._status===0||j._status===-1)&&(j._status=1,j._result=me)},function(me){(j._status===0||j._status===-1)&&(j._status=2,j._result=me)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var Fe={current:null},re={transition:null},ge={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:re,ReactCurrentOwner:X};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:_t,forEach:function(j,H,me){_t(j,function(){H.apply(this,arguments)},me)},count:function(j){var H=0;return _t(j,function(){H++}),H},toArray:function(j){return _t(j,function(H){return H})||[]},only:function(j){if(!A(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ce.Component=b,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=ne,Ce.StrictMode=i,Ce.Suspense=y,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ce.act=se,Ce.cloneElement=function(j,H,me){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var xe=$({},j.props),ke=j.key,Ae=j.ref,Ve=j._owner;if(H!=null){if(H.ref!==void 0&&(Ae=H.ref,Ve=X.current),H.key!==void 0&&(ke=""+H.key),j.type&&j.type.defaultProps)var Re=j.type.defaultProps;for(Be in H)he.call(H,Be)&&!R.hasOwnProperty(Be)&&(xe[Be]=H[Be]===void 0&&Re!==void 0?Re[Be]:H[Be])}var Be=arguments.length-2;if(Be===1)xe.children=me;else if(1<Be){Re=Array(Be);for(var Ze=0;Ze<Be;Ze++)Re[Ze]=arguments[Ze+2];xe.children=Re}return{$$typeof:r,type:j.type,key:ke,ref:Ae,props:xe,_owner:Ve}},Ce.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Ce.createElement=I,Ce.createFactory=function(j){var H=I.bind(null,j);return H.type=j,H},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(j){return{$$typeof:f,render:j}},Ce.isValidElement=A,Ce.lazy=function(j){return{$$typeof:E,_payload:{_status:-1,_result:j},_init:At}},Ce.memo=function(j,H){return{$$typeof:_,type:j,compare:H===void 0?null:H}},Ce.startTransition=function(j){var H=re.transition;re.transition={};try{j()}finally{re.transition=H}},Ce.unstable_act=se,Ce.useCallback=function(j,H){return Fe.current.useCallback(j,H)},Ce.useContext=function(j){return Fe.current.useContext(j)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(j){return Fe.current.useDeferredValue(j)},Ce.useEffect=function(j,H){return Fe.current.useEffect(j,H)},Ce.useId=function(){return Fe.current.useId()},Ce.useImperativeHandle=function(j,H,me){return Fe.current.useImperativeHandle(j,H,me)},Ce.useInsertionEffect=function(j,H){return Fe.current.useInsertionEffect(j,H)},Ce.useLayoutEffect=function(j,H){return Fe.current.useLayoutEffect(j,H)},Ce.useMemo=function(j,H){return Fe.current.useMemo(j,H)},Ce.useReducer=function(j,H,me){return Fe.current.useReducer(j,H,me)},Ce.useRef=function(j){return Fe.current.useRef(j)},Ce.useState=function(j){return Fe.current.useState(j)},Ce.useSyncExternalStore=function(j,H,me){return Fe.current.useSyncExternalStore(j,H,me)},Ce.useTransition=function(){return Fe.current.useTransition()},Ce.version="18.3.1",Ce}var jm;function bd(){return jm||(jm=1,Wh.exports=Y0()),Wh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function J0(){if(Lm)return ga;Lm=1;var r=bd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,y,_){var E,x={},P=null,V=null;_!==void 0&&(P=""+_),y.key!==void 0&&(P=""+y.key),y.ref!==void 0&&(V=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(x[E]=y[E]);if(f&&f.defaultProps)for(E in y=f.defaultProps,y)x[E]===void 0&&(x[E]=y[E]);return{$$typeof:e,type:f,key:P,ref:V,props:x,_owner:o.current}}return ga.Fragment=t,ga.jsx=h,ga.jsxs=h,ga}var Mm;function X0(){return Mm||(Mm=1,$h.exports=J0()),$h.exports}var g=X0(),Z=bd();const Du=yy(Z);var pu={},qh={exports:{}},nn={},Hh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function Z0(){return Fm||(Fm=1,function(r){function e(re,ge){var se=re.length;re.push(ge);e:for(;0<se;){var j=se-1>>>1,H=re[j];if(0<o(H,ge))re[j]=ge,re[se]=H,se=j;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ge=re[0],se=re.pop();if(se!==ge){re[0]=se;e:for(var j=0,H=re.length,me=H>>>1;j<me;){var xe=2*(j+1)-1,ke=re[xe],Ae=xe+1,Ve=re[Ae];if(0>o(ke,se))Ae<H&&0>o(Ve,ke)?(re[j]=Ve,re[Ae]=se,j=Ae):(re[j]=ke,re[xe]=se,j=xe);else if(Ae<H&&0>o(Ve,se))re[j]=Ve,re[Ae]=se,j=Ae;else break e}}return ge}function o(re,ge){var se=re.sortIndex-ge.sortIndex;return se!==0?se:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var y=[],_=[],E=1,x=null,P=3,V=!1,$=!1,W=!1,b=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(re){for(var ge=t(_);ge!==null;){if(ge.callback===null)i(_);else if(ge.startTime<=re)i(_),ge.sortIndex=ge.expirationTime,e(y,ge);else break;ge=t(_)}}function oe(re){if(W=!1,ae(re),!$)if(t(y)!==null)$=!0,At(he);else{var ge=t(_);ge!==null&&Fe(oe,ge.startTime-re)}}function he(re,ge){$=!1,W&&(W=!1,q(I),I=-1),V=!0;var se=P;try{for(ae(ge),x=t(y);x!==null&&(!(x.expirationTime>ge)||re&&!O());){var j=x.callback;if(typeof j=="function"){x.callback=null,P=x.priorityLevel;var H=j(x.expirationTime<=ge);ge=r.unstable_now(),typeof H=="function"?x.callback=H:x===t(y)&&i(y),ae(ge)}else i(y);x=t(y)}if(x!==null)var me=!0;else{var xe=t(_);xe!==null&&Fe(oe,xe.startTime-ge),me=!1}return me}finally{x=null,P=se,V=!1}}var X=!1,R=null,I=-1,C=5,A=-1;function O(){return!(r.unstable_now()-A<C)}function L(){if(R!==null){var re=r.unstable_now();A=re;var ge=!0;try{ge=R(!0,re)}finally{ge?k():(X=!1,R=null)}}else X=!1}var k;if(typeof ne=="function")k=function(){ne(L)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,_t=He.port2;He.port1.onmessage=L,k=function(){_t.postMessage(null)}}else k=function(){b(L,0)};function At(re){R=re,X||(X=!0,k())}function Fe(re,ge){I=b(function(){re(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){$||V||($=!0,At(he))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(re){switch(P){case 1:case 2:case 3:var ge=3;break;default:ge=P}var se=P;P=ge;try{return re()}finally{P=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=P;P=re;try{return ge()}finally{P=se}},r.unstable_scheduleCallback=function(re,ge,se){var j=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?j+se:j):se=j,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=se+H,re={id:E++,callback:ge,priorityLevel:re,startTime:se,expirationTime:H,sortIndex:-1},se>j?(re.sortIndex=se,e(_,re),t(y)===null&&re===t(_)&&(W?(q(I),I=-1):W=!0,Fe(oe,se-j))):(re.sortIndex=H,e(y,re),$||V||($=!0,At(he))),re},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(re){var ge=P;return function(){var se=P;P=ge;try{return re.apply(this,arguments)}finally{P=se}}}}(Kh)),Kh}var Um;function ew(){return Um||(Um=1,Hh.exports=Z0()),Hh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function tw(){if(zm)return nn;zm=1;var r=bd(),e=ew();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},x={};function P(n){return y.call(x,n)?!0:y.call(E,n)?!1:_.test(n)?x[n]=!0:(E[n]=!0,!1)}function V(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,a,c){if(s===null||typeof s>"u"||V(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];b[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function ae(n,s,a,c){var d=b.hasOwnProperty(s)?b[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,a,d,c)&&(a=null),c||d===null?P(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),X=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),re=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,j;function H(n){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var me=!1;function xe(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,S=m.length-1;1<=w&&0<=S&&d[w]!==m[S];)S--;for(;1<=w&&0<=S;w--,S--)if(d[w]!==m[S]){if(w!==1||S!==1)do if(w--,S--,0>S||d[w]!==m[S]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=S);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function ke(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case X:return"Portal";case C:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case A:return(n._context.displayName||"Context")+".Provider";case L:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _t:return s=n.displayName||null,s!==null?s:Ae(n.type)||"Memo";case At:s=n._payload,n=n._init;try{return Ae(n(s))}catch{}}return null}function Ve(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ze(n){var s=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Gt(n){n._valueTracker||(n._valueTracker=Ze(n))}function Br(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function pn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function gr(n,s){var a=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function yr(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Re(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ei(n,s){s=s.checked,s!=null&&ae(n,"checked",s,!1)}function Ti(n,s){Ei(n,s);var a=Re(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Cs(n,s.type,a):s.hasOwnProperty("defaultValue")&&Cs(n,s.type,Re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Po(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Cs(n,s,a){(s!=="number"||pn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Hn=Array.isArray;function Kn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Re(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Rs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ns(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Hn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Re(a)}}function vr(n,s){var a=Re(s.value),c=Re(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Ps(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function st(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?st(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sn,bs=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Sn=Sn||document.createElement("div"),Sn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Sn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ot(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(ct).forEach(function(n){wt.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ct[s]=ct[n]})});function kn(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ct.hasOwnProperty(n)&&ct[n]?(""+s).trim():s+"px"}function An(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=kn(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var _r=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ds(n,s){if(s){if(_r[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Os(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vs=null;function xi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ii=null,mn=null,Gn=null;function Si(n){if(n=ta(n)){if(typeof Ii!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Rl(s),Ii(n.stateNode,n.type,s))}}function Qn(n){mn?Gn?Gn.push(n):Gn=[n]:mn=n}function bo(){if(mn){var n=mn,s=Gn;if(Gn=mn=null,Si(n),s)for(n=0;n<s.length;n++)Si(s[n])}}function js(n,s){return n(s)}function Do(){}var wr=!1;function Oo(n,s,a){if(wr)return n(s,a);wr=!0;try{return js(n,s,a)}finally{wr=!1,(mn!==null||Gn!==null)&&(Do(),bo())}}function at(n,s){var a=n.stateNode;if(a===null)return null;var c=Rl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var ki=!1;if(f)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){ki=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{ki=!1}function Ls(n,s,a,c,d,m,w,S,N){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Q){this.onError(Q)}}var Ms=!1,Ai=null,Rn=!1,Vo=null,yc={onError:function(n){Ms=!0,Ai=n}};function Ci(n,s,a,c,d,m,w,S,N){Ms=!1,Ai=null,Ls.apply(yc,arguments)}function el(n,s,a,c,d,m,w,S,N){if(Ci.apply(this,arguments),Ms){if(Ms){var z=Ai;Ms=!1,Ai=null}else throw Error(t(198));Rn||(Rn=!0,Vo=z)}}function Nn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Fs(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Pn(n){if(Nn(n)!==n)throw Error(t(188))}function tl(n){var s=n.alternate;if(!s){if(s=Nn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Pn(d),n;if(m===c)return Pn(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,S=d.child;S;){if(S===a){w=!0,a=d,c=m;break}if(S===c){w=!0,c=d,a=m;break}S=S.sibling}if(!w){for(S=m.child;S;){if(S===a){w=!0,a=m,c=d;break}if(S===c){w=!0,c=m,a=d;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function jo(n){return n=tl(n),n!==null?Ri(n):null}function Ri(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ri(n);if(s!==null)return s;n=n.sibling}return null}var Ni=e.unstable_scheduleCallback,Lo=e.unstable_cancelCallback,nl=e.unstable_shouldYield,vc=e.unstable_requestPaint,We=e.unstable_now,rl=e.unstable_getCurrentPriorityLevel,Us=e.unstable_ImmediatePriority,$r=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,Mo=e.unstable_LowPriority,sl=e.unstable_IdlePriority,zs=null,on=null;function il(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(zs,n,void 0,(n.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:al,Fo=Math.log,ol=Math.LN2;function al(n){return n>>>=0,n===0?32:31-(Fo(n)/ol|0)|0}var Pi=64,bi=4194304;function Wr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bs(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var S=w&~d;S!==0?c=Wr(S):(m&=w,m!==0&&(c=Wr(m)))}else w=a&~d,w!==0?c=Wr(w):m!==0&&(c=Wr(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Wt(s),d=1<<a,c|=n[a],s&=~d;return c}function _c(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Wt(m),S=1<<w,N=d[w];N===-1?((S&a)===0||(S&c)!==0)&&(d[w]=_c(S,s)):N<=s&&(n.expiredLanes|=S),m&=~S}}function an(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $s(){var n=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),n}function qr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Hr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Wt(s),n[s]=a}function $e(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Wt(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Kr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Wt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Pe=0;function Gr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ll,Di,ul,cl,hl,Uo=!1,Yn=[],Ct=null,bn=null,Dn=null,Qr=new Map,yn=new Map,Jn=[],wc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dl(n,s){switch(n){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Qr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function Qt(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ta(s),s!==null&&Di(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Ec(n,s,a,c,d){switch(s){case"focusin":return Ct=Qt(Ct,n,s,a,c,d),!0;case"dragenter":return bn=Qt(bn,n,s,a,c,d),!0;case"mouseover":return Dn=Qt(Dn,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return Qr.set(m,Qt(Qr.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,yn.set(m,Qt(yn.get(m)||null,n,s,a,c,d)),!0}return!1}function fl(n){var s=Gs(n.target);if(s!==null){var a=Nn(s);if(a!==null){if(s=a.tag,s===13){if(s=Fs(a),s!==null){n.blockedOn=s,hl(n.priority,function(){ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Oi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Vs=c,a.target.dispatchEvent(c),Vs=null}else return s=ta(a),s!==null&&Di(s),n.blockedOn=a,!1;s.shift()}return!0}function Ws(n,s,a){Tr(n)&&a.delete(s)}function pl(){Uo=!1,Ct!==null&&Tr(Ct)&&(Ct=null),bn!==null&&Tr(bn)&&(bn=null),Dn!==null&&Tr(Dn)&&(Dn=null),Qr.forEach(Ws),yn.forEach(Ws)}function On(n,s){n.blockedOn===s&&(n.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pl)))}function Vn(n){function s(d){return On(d,n)}if(0<Yn.length){On(Yn[0],n);for(var a=1;a<Yn.length;a++){var c=Yn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ct!==null&&On(Ct,n),bn!==null&&On(bn,n),Dn!==null&&On(Dn,n),Qr.forEach(s),yn.forEach(s),a=0;a<Jn.length;a++)c=Jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)fl(a),a.blockedOn===null&&Jn.shift()}var xr=oe.ReactCurrentBatchConfig,Yr=!0;function Je(n,s,a,c){var d=Pe,m=xr.transition;xr.transition=null;try{Pe=1,zo(n,s,a,c)}finally{Pe=d,xr.transition=m}}function Tc(n,s,a,c){var d=Pe,m=xr.transition;xr.transition=null;try{Pe=4,zo(n,s,a,c)}finally{Pe=d,xr.transition=m}}function zo(n,s,a,c){if(Yr){var d=Oi(n,s,a,c);if(d===null)Dc(n,s,c,qs,a),dl(n,c);else if(Ec(d,n,s,a,c))c.stopPropagation();else if(dl(n,c),s&4&&-1<wc.indexOf(n)){for(;d!==null;){var m=ta(d);if(m!==null&&ll(m),m=Oi(n,s,a,c),m===null&&Dc(n,s,c,qs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Dc(n,s,c,null,a)}}var qs=null;function Oi(n,s,a,c){if(qs=null,n=xi(c),n=Gs(n),n!==null)if(s=Nn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Fs(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qs=n,null}function Bo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rl()){case Us:return 1;case $r:return 4;case gn:case Mo:return 16;case sl:return 536870912;default:return 16}default:return 16}}var ln=null,Vi=null,Yt=null;function $o(){if(Yt)return Yt;var n,s=Vi,a=s.length,c,d="value"in ln?ln.value:ln.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return Yt=d.slice(n,1<c?1-c:void 0)}function ji(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function Wo(){return!1}function Rt(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xn:Wo,this.isPropagationStopped=Wo,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=Rt(jn),Zn=se({},jn,{view:0,detail:0}),xc=Rt(Zn),Mi,Ir,Jr,Hs=se({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jr&&(Jr&&n.type==="mousemove"?(Mi=n.screenX-Jr.screenX,Ir=n.screenY-Jr.screenY):Ir=Mi=0,Jr=n),Mi)},movementY:function(n){return"movementY"in n?n.movementY:Ir}}),Fi=Rt(Hs),qo=se({},Hs,{dataTransfer:0}),ml=Rt(qo),Ui=se({},Zn,{relatedTarget:0}),zi=Rt(Ui),gl=se({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=Rt(gl),yl=se({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vl=Rt(yl),_l=se({},jn,{data:0}),Ho=Rt(_l),Bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function El(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=wl[n])?!!s[n]:!1}function er(){return El}var u=se({},Zn,{key:function(n){if(n.key){var s=Bi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(n){return n.type==="keypress"?ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Rt(u),v=se({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Rt(v),M=se({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),B=Rt(M),te=se({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Rt(te),mt=se({},Hs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),De=Rt(mt),Et=[9,13,27,32],ht=f&&"CompositionEvent"in window,vn=null;f&&"documentMode"in document&&(vn=document.documentMode);var un=f&&"TextEvent"in window&&!vn,Ks=f&&(!ht||vn&&8<vn&&11>=vn),$i=" ",Rf=!1;function Nf(n,s){switch(n){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wi=!1;function K_(n,s){switch(n){case"compositionend":return Pf(s);case"keypress":return s.which!==32?null:(Rf=!0,$i);case"textInput":return n=s.data,n===$i&&Rf?null:n;default:return null}}function G_(n,s){if(Wi)return n==="compositionend"||!ht&&Nf(n,s)?(n=$o(),Yt=Vi=ln=null,Wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var Q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Q_[n.type]:s==="textarea"}function Df(n,s,a,c){Qn(c),s=kl(s,"onChange"),0<s.length&&(a=new Li("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Ko=null,Go=null;function Y_(n){Jf(n,0)}function Tl(n){var s=Qi(n);if(Br(s))return n}function J_(n,s){if(n==="change")return s}var Of=!1;if(f){var Ic;if(f){var Sc="oninput"in document;if(!Sc){var Vf=document.createElement("div");Vf.setAttribute("oninput","return;"),Sc=typeof Vf.oninput=="function"}Ic=Sc}else Ic=!1;Of=Ic&&(!document.documentMode||9<document.documentMode)}function jf(){Ko&&(Ko.detachEvent("onpropertychange",Lf),Go=Ko=null)}function Lf(n){if(n.propertyName==="value"&&Tl(Go)){var s=[];Df(s,Go,n,xi(n)),Oo(Y_,s)}}function X_(n,s,a){n==="focusin"?(jf(),Ko=s,Go=a,Ko.attachEvent("onpropertychange",Lf)):n==="focusout"&&jf()}function Z_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tl(Go)}function e0(n,s){if(n==="click")return Tl(s)}function t0(n,s){if(n==="input"||n==="change")return Tl(s)}function n0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ln=typeof Object.is=="function"?Object.is:n0;function Qo(n,s){if(Ln(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!Ln(n[d],s[d]))return!1}return!0}function Mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ff(n,s){var a=Mf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mf(a)}}function Uf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Uf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function zf(){for(var n=window,s=pn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=pn(n.document)}return s}function kc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function r0(n){var s=zf(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Uf(a.ownerDocument.documentElement,a)){if(c!==null&&kc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Ff(a,m);var w=Ff(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s0=f&&"documentMode"in document&&11>=document.documentMode,qi=null,Ac=null,Yo=null,Cc=!1;function Bf(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cc||qi==null||qi!==pn(c)||(c=qi,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Yo&&Qo(Yo,c)||(Yo=c,c=kl(Ac,"onSelect"),0<c.length&&(s=new Li("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=qi)))}function xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Hi={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Rc={},$f={};f&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Il(n){if(Rc[n])return Rc[n];if(!Hi[n])return n;var s=Hi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in $f)return Rc[n]=s[a];return n}var Wf=Il("animationend"),qf=Il("animationiteration"),Hf=Il("animationstart"),Kf=Il("transitionend"),Gf=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,s){Gf.set(n,s),l(s,[n])}for(var Nc=0;Nc<Qf.length;Nc++){var Pc=Qf[Nc],i0=Pc.toLowerCase(),o0=Pc[0].toUpperCase()+Pc.slice(1);Xr(i0,"on"+o0)}Xr(Wf,"onAnimationEnd"),Xr(qf,"onAnimationIteration"),Xr(Hf,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(Kf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Yf(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,el(c,s,void 0,n),n.currentTarget=null}function Jf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var S=c[w],N=S.instance,z=S.currentTarget;if(S=S.listener,N!==m&&d.isPropagationStopped())break e;Yf(d,S,z),m=N}else for(w=0;w<c.length;w++){if(S=c[w],N=S.instance,z=S.currentTarget,S=S.listener,N!==m&&d.isPropagationStopped())break e;Yf(d,S,z),m=N}}}if(Rn)throw n=Vo,Rn=!1,Vo=null,n}function Ke(n,s){var a=s[Fc];a===void 0&&(a=s[Fc]=new Set);var c=n+"__bubble";a.has(c)||(Xf(s,n,2,!1),a.add(c))}function bc(n,s,a){var c=0;s&&(c|=4),Xf(a,n,c,s)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function Xo(n){if(!n[Sl]){n[Sl]=!0,i.forEach(function(a){a!=="selectionchange"&&(a0.has(a)||bc(a,!1,n),bc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Sl]||(s[Sl]=!0,bc("selectionchange",!1,s))}}function Xf(n,s,a,c){switch(Bo(s)){case 1:var d=Je;break;case 4:d=Tc;break;default:d=zo}a=d.bind(null,s,a,n),d=void 0,!ki||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Dc(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;S!==null;){if(w=Gs(S),w===null)return;if(N=w.tag,N===5||N===6){c=m=w;continue e}S=S.parentNode}}c=c.return}Oo(function(){var z=m,Q=xi(a),J=[];e:{var G=Gf.get(n);if(G!==void 0){var ie=Li,ue=n;switch(n){case"keypress":if(ji(a)===0)break e;case"keydown":case"keyup":ie=p;break;case"focusin":ue="focus",ie=zi;break;case"focusout":ue="blur",ie=zi;break;case"beforeblur":case"afterblur":ie=zi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=B;break;case Wf:case qf:case Hf:ie=Sr;break;case Kf:ie=Ue;break;case"scroll":ie=xc;break;case"wheel":ie=De;break;case"copy":case"cut":case"paste":ie=vl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=T}var de=(s&4)!==0,lt=!de&&n==="scroll",F=de?G!==null?G+"Capture":null:G;de=[];for(var D=z,U;D!==null;){U=D;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,F!==null&&(ee=at(D,F),ee!=null&&de.push(Zo(D,ee,U)))),lt)break;D=D.return}0<de.length&&(G=new ie(G,ue,null,a,Q),J.push({event:G,listeners:de}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",G&&a!==Vs&&(ue=a.relatedTarget||a.fromElement)&&(Gs(ue)||ue[kr]))break e;if((ie||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=z,ue=ue?Gs(ue):null,ue!==null&&(lt=Nn(ue),ue!==lt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=z),ie!==ue)){if(de=Fi,ee="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(de=T,ee="onPointerLeave",F="onPointerEnter",D="pointer"),lt=ie==null?G:Qi(ie),U=ue==null?G:Qi(ue),G=new de(ee,D+"leave",ie,a,Q),G.target=lt,G.relatedTarget=U,ee=null,Gs(Q)===z&&(de=new de(F,D+"enter",ue,a,Q),de.target=U,de.relatedTarget=lt,ee=de),lt=ee,ie&&ue)t:{for(de=ie,F=ue,D=0,U=de;U;U=Ki(U))D++;for(U=0,ee=F;ee;ee=Ki(ee))U++;for(;0<D-U;)de=Ki(de),D--;for(;0<U-D;)F=Ki(F),U--;for(;D--;){if(de===F||F!==null&&de===F.alternate)break t;de=Ki(de),F=Ki(F)}de=null}else de=null;ie!==null&&Zf(J,G,ie,de,!1),ue!==null&&lt!==null&&Zf(J,lt,ue,de,!0)}}e:{if(G=z?Qi(z):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var pe=J_;else if(bf(G))if(Of)pe=t0;else{pe=Z_;var ve=X_}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(pe=e0);if(pe&&(pe=pe(n,z))){Df(J,pe,a,Q);break e}ve&&ve(n,G,z),n==="focusout"&&(ve=G._wrapperState)&&ve.controlled&&G.type==="number"&&Cs(G,"number",G.value)}switch(ve=z?Qi(z):window,n){case"focusin":(bf(ve)||ve.contentEditable==="true")&&(qi=ve,Ac=z,Yo=null);break;case"focusout":Yo=Ac=qi=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Bf(J,a,Q);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":Bf(J,a,Q)}var _e;if(ht)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Wi?Nf(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ks&&a.locale!=="ko"&&(Wi||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Wi&&(_e=$o()):(ln=Q,Vi="value"in ln?ln.value:ln.textContent,Wi=!0)),ve=kl(z,Ee),0<ve.length&&(Ee=new Ho(Ee,n,null,a,Q),J.push({event:Ee,listeners:ve}),_e?Ee.data=_e:(_e=Pf(a),_e!==null&&(Ee.data=_e)))),(_e=un?K_(n,a):G_(n,a))&&(z=kl(z,"onBeforeInput"),0<z.length&&(Q=new Ho("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:z}),Q.data=_e))}Jf(J,s)})}function Zo(n,s,a){return{instance:n,listener:s,currentTarget:a}}function kl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=at(n,a),m!=null&&c.unshift(Zo(n,m,d)),m=at(n,s),m!=null&&c.push(Zo(n,m,d))),n=n.return}return c}function Ki(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Zf(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var S=a,N=S.alternate,z=S.stateNode;if(N!==null&&N===c)break;S.tag===5&&z!==null&&(S=z,d?(N=at(a,m),N!=null&&w.unshift(Zo(a,N,S))):d||(N=at(a,m),N!=null&&w.push(Zo(a,N,S)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var l0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function ep(n){return(typeof n=="string"?n:""+n).replace(l0,`
`).replace(u0,"")}function Al(n,s,a){if(s=ep(s),ep(n)!==s&&a)throw Error(t(425))}function Cl(){}var Oc=null,Vc=null;function jc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lc=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(n){return tp.resolve(null).then(n).catch(d0)}:Lc;function d0(n){setTimeout(function(){throw n})}function Mc(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Vn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Vn(s)}function Zr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function np(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),tr="__reactFiber$"+Gi,ea="__reactProps$"+Gi,kr="__reactContainer$"+Gi,Fc="__reactEvents$"+Gi,f0="__reactListeners$"+Gi,p0="__reactHandles$"+Gi;function Gs(n){var s=n[tr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[kr]||a[tr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=np(n);n!==null;){if(a=n[tr])return a;n=np(n)}return s}n=a,a=n.parentNode}return null}function ta(n){return n=n[tr]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Qi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Rl(n){return n[ea]||null}var Uc=[],Yi=-1;function es(n){return{current:n}}function Ge(n){0>Yi||(n.current=Uc[Yi],Uc[Yi]=null,Yi--)}function qe(n,s){Yi++,Uc[Yi]=n.current,n.current=s}var ts={},jt=es(ts),Jt=es(!1),Qs=ts;function Ji(n,s){var a=n.type.contextTypes;if(!a)return ts;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(n){return n=n.childContextTypes,n!=null}function Nl(){Ge(Jt),Ge(jt)}function rp(n,s,a){if(jt.current!==ts)throw Error(t(168));qe(jt,s),qe(Jt,a)}function sp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Ve(n)||"Unknown",d));return se({},a,c)}function Pl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ts,Qs=jt.current,qe(jt,n),qe(Jt,Jt.current),!0}function ip(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=sp(n,s,Qs),c.__reactInternalMemoizedMergedChildContext=n,Ge(Jt),Ge(jt),qe(jt,n)):Ge(Jt),qe(Jt,a)}var Ar=null,bl=!1,zc=!1;function op(n){Ar===null?Ar=[n]:Ar.push(n)}function m0(n){bl=!0,op(n)}function ns(){if(!zc&&Ar!==null){zc=!0;var n=0,s=Pe;try{var a=Ar;for(Pe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ar=null,bl=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(n+1)),Ni(Us,ns),d}finally{Pe=s,zc=!1}}return null}var Xi=[],Zi=0,Dl=null,Ol=0,_n=[],wn=0,Ys=null,Cr=1,Rr="";function Js(n,s){Xi[Zi++]=Ol,Xi[Zi++]=Dl,Dl=n,Ol=s}function ap(n,s,a){_n[wn++]=Cr,_n[wn++]=Rr,_n[wn++]=Ys,Ys=n;var c=Cr;n=Rr;var d=32-Wt(c)-1;c&=~(1<<d),a+=1;var m=32-Wt(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-Wt(s)+d|a<<d|c,Rr=m+n}else Cr=1<<m|a<<d|c,Rr=n}function Bc(n){n.return!==null&&(Js(n,1),ap(n,1,0))}function $c(n){for(;n===Dl;)Dl=Xi[--Zi],Xi[Zi]=null,Ol=Xi[--Zi],Xi[Zi]=null;for(;n===Ys;)Ys=_n[--wn],_n[wn]=null,Rr=_n[--wn],_n[wn]=null,Cr=_n[--wn],_n[wn]=null}var cn=null,hn=null,Xe=!1,Mn=null;function lp(n,s){var a=In(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function up(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,cn=n,hn=Zr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,cn=n,hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ys!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=In(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function Wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qc(n){if(Xe){var s=hn;if(s){var a=s;if(!up(n,s)){if(Wc(n))throw Error(t(418));s=Zr(a.nextSibling);var c=cn;s&&up(n,s)?lp(c,a):(n.flags=n.flags&-4097|2,Xe=!1,cn=n)}}else{if(Wc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Xe=!1,cn=n}}}function cp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function Vl(n){if(n!==cn)return!1;if(!Xe)return cp(n),Xe=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!jc(n.type,n.memoizedProps)),s&&(s=hn)){if(Wc(n))throw hp(),Error(t(418));for(;s;)lp(n,s),s=Zr(s.nextSibling)}if(cp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){hn=Zr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}hn=null}}else hn=cn?Zr(n.stateNode.nextSibling):null;return!0}function hp(){for(var n=hn;n;)n=Zr(n.nextSibling)}function eo(){hn=cn=null,Xe=!1}function Hc(n){Mn===null?Mn=[n]:Mn.push(n)}var g0=oe.ReactCurrentBatchConfig;function na(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var S=d.refs;w===null?delete S[m]:S[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function jl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function dp(n){var s=n._init;return s(n._payload)}function fp(n){function s(F,D){if(n){var U=F.deletions;U===null?(F.deletions=[D],F.flags|=16):U.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)s(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=cs(F,D),F.index=0,F.sibling=null,F}function m(F,D,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<D?(F.flags|=2,D):U):(F.flags|=2,D)):(F.flags|=1048576,D)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,D,U,ee){return D===null||D.tag!==6?(D=Lh(U,F.mode,ee),D.return=F,D):(D=d(D,U),D.return=F,D)}function N(F,D,U,ee){var pe=U.type;return pe===R?Q(F,D,U.props.children,ee,U.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===At&&dp(pe)===D.type)?(ee=d(D,U.props),ee.ref=na(F,D,U),ee.return=F,ee):(ee=ou(U.type,U.key,U.props,null,F.mode,ee),ee.ref=na(F,D,U),ee.return=F,ee)}function z(F,D,U,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Mh(U,F.mode,ee),D.return=F,D):(D=d(D,U.children||[]),D.return=F,D)}function Q(F,D,U,ee,pe){return D===null||D.tag!==7?(D=ii(U,F.mode,ee,pe),D.return=F,D):(D=d(D,U),D.return=F,D)}function J(F,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Lh(""+D,F.mode,U),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case he:return U=ou(D.type,D.key,D.props,null,F.mode,U),U.ref=na(F,null,D),U.return=F,U;case X:return D=Mh(D,F.mode,U),D.return=F,D;case At:var ee=D._init;return J(F,ee(D._payload),U)}if(Hn(D)||ge(D))return D=ii(D,F.mode,U,null),D.return=F,D;jl(F,D)}return null}function G(F,D,U,ee){var pe=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return pe!==null?null:S(F,D,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case he:return U.key===pe?N(F,D,U,ee):null;case X:return U.key===pe?z(F,D,U,ee):null;case At:return pe=U._init,G(F,D,pe(U._payload),ee)}if(Hn(U)||ge(U))return pe!==null?null:Q(F,D,U,ee,null);jl(F,U)}return null}function ie(F,D,U,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(U)||null,S(D,F,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case he:return F=F.get(ee.key===null?U:ee.key)||null,N(D,F,ee,pe);case X:return F=F.get(ee.key===null?U:ee.key)||null,z(D,F,ee,pe);case At:var ve=ee._init;return ie(F,D,U,ve(ee._payload),pe)}if(Hn(ee)||ge(ee))return F=F.get(U)||null,Q(D,F,ee,pe,null);jl(D,ee)}return null}function ue(F,D,U,ee){for(var pe=null,ve=null,_e=D,Ee=D=0,It=null;_e!==null&&Ee<U.length;Ee++){_e.index>Ee?(It=_e,_e=null):It=_e.sibling;var Le=G(F,_e,U[Ee],ee);if(Le===null){_e===null&&(_e=It);break}n&&_e&&Le.alternate===null&&s(F,_e),D=m(Le,D,Ee),ve===null?pe=Le:ve.sibling=Le,ve=Le,_e=It}if(Ee===U.length)return a(F,_e),Xe&&Js(F,Ee),pe;if(_e===null){for(;Ee<U.length;Ee++)_e=J(F,U[Ee],ee),_e!==null&&(D=m(_e,D,Ee),ve===null?pe=_e:ve.sibling=_e,ve=_e);return Xe&&Js(F,Ee),pe}for(_e=c(F,_e);Ee<U.length;Ee++)It=ie(_e,F,Ee,U[Ee],ee),It!==null&&(n&&It.alternate!==null&&_e.delete(It.key===null?Ee:It.key),D=m(It,D,Ee),ve===null?pe=It:ve.sibling=It,ve=It);return n&&_e.forEach(function(hs){return s(F,hs)}),Xe&&Js(F,Ee),pe}function de(F,D,U,ee){var pe=ge(U);if(typeof pe!="function")throw Error(t(150));if(U=pe.call(U),U==null)throw Error(t(151));for(var ve=pe=null,_e=D,Ee=D=0,It=null,Le=U.next();_e!==null&&!Le.done;Ee++,Le=U.next()){_e.index>Ee?(It=_e,_e=null):It=_e.sibling;var hs=G(F,_e,Le.value,ee);if(hs===null){_e===null&&(_e=It);break}n&&_e&&hs.alternate===null&&s(F,_e),D=m(hs,D,Ee),ve===null?pe=hs:ve.sibling=hs,ve=hs,_e=It}if(Le.done)return a(F,_e),Xe&&Js(F,Ee),pe;if(_e===null){for(;!Le.done;Ee++,Le=U.next())Le=J(F,Le.value,ee),Le!==null&&(D=m(Le,D,Ee),ve===null?pe=Le:ve.sibling=Le,ve=Le);return Xe&&Js(F,Ee),pe}for(_e=c(F,_e);!Le.done;Ee++,Le=U.next())Le=ie(_e,F,Ee,Le.value,ee),Le!==null&&(n&&Le.alternate!==null&&_e.delete(Le.key===null?Ee:Le.key),D=m(Le,D,Ee),ve===null?pe=Le:ve.sibling=Le,ve=Le);return n&&_e.forEach(function(Q0){return s(F,Q0)}),Xe&&Js(F,Ee),pe}function lt(F,D,U,ee){if(typeof U=="object"&&U!==null&&U.type===R&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case he:e:{for(var pe=U.key,ve=D;ve!==null;){if(ve.key===pe){if(pe=U.type,pe===R){if(ve.tag===7){a(F,ve.sibling),D=d(ve,U.props.children),D.return=F,F=D;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===At&&dp(pe)===ve.type){a(F,ve.sibling),D=d(ve,U.props),D.ref=na(F,ve,U),D.return=F,F=D;break e}a(F,ve);break}else s(F,ve);ve=ve.sibling}U.type===R?(D=ii(U.props.children,F.mode,ee,U.key),D.return=F,F=D):(ee=ou(U.type,U.key,U.props,null,F.mode,ee),ee.ref=na(F,D,U),ee.return=F,F=ee)}return w(F);case X:e:{for(ve=U.key;D!==null;){if(D.key===ve)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(F,D.sibling),D=d(D,U.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else s(F,D);D=D.sibling}D=Mh(U,F.mode,ee),D.return=F,F=D}return w(F);case At:return ve=U._init,lt(F,D,ve(U._payload),ee)}if(Hn(U))return ue(F,D,U,ee);if(ge(U))return de(F,D,U,ee);jl(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,U),D.return=F,F=D):(a(F,D),D=Lh(U,F.mode,ee),D.return=F,F=D),w(F)):a(F,D)}return lt}var to=fp(!0),pp=fp(!1),Ll=es(null),Ml=null,no=null,Kc=null;function Gc(){Kc=no=Ml=null}function Qc(n){var s=Ll.current;Ge(Ll),n._currentValue=s}function Yc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function ro(n,s){Ml=n,Kc=no=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Zt=!0),n.firstContext=null)}function En(n){var s=n._currentValue;if(Kc!==n)if(n={context:n,memoizedValue:s,next:null},no===null){if(Ml===null)throw Error(t(308));no=n,Ml.dependencies={lanes:0,firstContext:n}}else no=no.next=n;return s}var Xs=null;function Jc(n){Xs===null?Xs=[n]:Xs.push(n)}function mp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Jc(s)):(a.next=d.next,d.next=a),s.interleaved=a,Nr(n,c)}function Nr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var rs=!1;function Xc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ss(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Nr(n,a)}return d=c.interleaved,d===null?(s.next=s,Jc(c)):(s.next=d.next,d.next=s),c.interleaved=s,Nr(n,a)}function Fl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Kr(n,a)}}function yp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ul(n,s,a,c){var d=n.updateQueue;rs=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,z=N.next;N.next=null,w===null?m=z:w.next=z,w=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==w&&(S===null?Q.firstBaseUpdate=z:S.next=z,Q.lastBaseUpdate=N))}if(m!==null){var J=d.baseState;w=0,Q=z=N=null,S=m;do{var G=S.lane,ie=S.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,de=S;switch(G=s,ie=a,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){J=ue.call(ie,J,G);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,G=typeof ue=="function"?ue.call(ie,J,G):ue,G==null)break e;J=se({},J,G);break e;case 2:rs=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else ie={eventTime:ie,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(z=Q=ie,N=J):Q=Q.next=ie,w|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(N=J),d.baseState=N,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);ti|=w,n.lanes=w,n.memoizedState=J}}function vp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ra={},nr=es(ra),sa=es(ra),ia=es(ra);function Zs(n){if(n===ra)throw Error(t(174));return n}function Zc(n,s){switch(qe(ia,s),qe(sa,n),qe(nr,ra),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:it(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=it(s,n)}Ge(nr),qe(nr,s)}function so(){Ge(nr),Ge(sa),Ge(ia)}function _p(n){Zs(ia.current);var s=Zs(nr.current),a=it(s,n.type);s!==a&&(qe(sa,n),qe(nr,a))}function eh(n){sa.current===n&&(Ge(nr),Ge(sa))}var et=es(0);function zl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var th=[];function nh(){for(var n=0;n<th.length;n++)th[n]._workInProgressVersionPrimary=null;th.length=0}var Bl=oe.ReactCurrentDispatcher,rh=oe.ReactCurrentBatchConfig,ei=0,tt=null,gt=null,Tt=null,$l=!1,oa=!1,aa=0,y0=0;function Lt(){throw Error(t(321))}function sh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Ln(n[a],s[a]))return!1;return!0}function ih(n,s,a,c,d,m){if(ei=m,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Bl.current=n===null||n.memoizedState===null?E0:T0,n=a(c,d),oa){m=0;do{if(oa=!1,aa=0,25<=m)throw Error(t(301));m+=1,Tt=gt=null,s.updateQueue=null,Bl.current=x0,n=a(c,d)}while(oa)}if(Bl.current=Hl,s=gt!==null&&gt.next!==null,ei=0,Tt=gt=tt=null,$l=!1,s)throw Error(t(300));return n}function oh(){var n=aa!==0;return aa=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?tt.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function Tn(){if(gt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var s=Tt===null?tt.memoizedState:Tt.next;if(s!==null)Tt=s,gt=n;else{if(n===null)throw Error(t(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?tt.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function la(n,s){return typeof s=="function"?s(n):s}function ah(n){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=gt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var S=w=null,N=null,z=m;do{var Q=z.lane;if((ei&Q)===Q)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var J={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(S=N=J,w=c):N=N.next=J,tt.lanes|=Q,ti|=Q}z=z.next}while(z!==null&&z!==m);N===null?w=c:N.next=S,Ln(c,s.memoizedState)||(Zt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,tt.lanes|=m,ti|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function lh(n){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Ln(m,s.memoizedState)||(Zt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function wp(){}function Ep(n,s){var a=tt,c=Tn(),d=s(),m=!Ln(c.memoizedState,d);if(m&&(c.memoizedState=d,Zt=!0),c=c.queue,uh(Ip.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ua(9,xp.bind(null,a,c,d,s),void 0,null),xt===null)throw Error(t(349));(ei&30)!==0||Tp(a,s,d)}return d}function Tp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function xp(n,s,a,c){s.value=a,s.getSnapshot=c,Sp(s)&&kp(n)}function Ip(n,s,a){return a(function(){Sp(s)&&kp(n)})}function Sp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Ln(n,a)}catch{return!0}}function kp(n){var s=Nr(n,1);s!==null&&Bn(s,n,1,-1)}function Ap(n){var s=rr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:n},s.queue=n,n=n.dispatch=w0.bind(null,tt,n),[s.memoizedState,n]}function ua(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Cp(){return Tn().memoizedState}function Wl(n,s,a,c){var d=rr();tt.flags|=n,d.memoizedState=ua(1|s,a,void 0,c===void 0?null:c)}function ql(n,s,a,c){var d=Tn();c=c===void 0?null:c;var m=void 0;if(gt!==null){var w=gt.memoizedState;if(m=w.destroy,c!==null&&sh(c,w.deps)){d.memoizedState=ua(s,a,m,c);return}}tt.flags|=n,d.memoizedState=ua(1|s,a,m,c)}function Rp(n,s){return Wl(8390656,8,n,s)}function uh(n,s){return ql(2048,8,n,s)}function Np(n,s){return ql(4,2,n,s)}function Pp(n,s){return ql(4,4,n,s)}function bp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Dp(n,s,a){return a=a!=null?a.concat([n]):null,ql(4,4,bp.bind(null,s,n),a)}function ch(){}function Op(n,s){var a=Tn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&sh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Vp(n,s){var a=Tn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&sh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function jp(n,s,a){return(ei&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(Ln(a,s)||(a=$s(),tt.lanes|=a,ti|=a,n.baseState=!0),s)}function v0(n,s){var a=Pe;Pe=a!==0&&4>a?a:4,n(!0);var c=rh.transition;rh.transition={};try{n(!1),s()}finally{Pe=a,rh.transition=c}}function Lp(){return Tn().memoizedState}function _0(n,s,a){var c=ls(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Mp(n))Fp(s,a);else if(a=mp(n,s,a,c),a!==null){var d=Kt();Bn(a,n,c,d),Up(a,s,c)}}function w0(n,s,a){var c=ls(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mp(n))Fp(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,S=m(w,a);if(d.hasEagerState=!0,d.eagerState=S,Ln(S,w)){var N=s.interleaved;N===null?(d.next=d,Jc(s)):(d.next=N.next,N.next=d),s.interleaved=d;return}}catch{}finally{}a=mp(n,s,d,c),a!==null&&(d=Kt(),Bn(a,n,c,d),Up(a,s,c))}}function Mp(n){var s=n.alternate;return n===tt||s!==null&&s===tt}function Fp(n,s){oa=$l=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Up(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Kr(n,a)}}var Hl={readContext:En,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},E0={readContext:En,useCallback:function(n,s){return rr().memoizedState=[n,s===void 0?null:s],n},useContext:En,useEffect:Rp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Wl(4194308,4,bp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Wl(4194308,4,n,s)},useInsertionEffect:function(n,s){return Wl(4,2,n,s)},useMemo:function(n,s){var a=rr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=rr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=_0.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var s=rr();return n={current:n},s.memoizedState=n},useState:Ap,useDebugValue:ch,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=Ap(!1),s=n[0];return n=v0.bind(null,n[1]),rr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=tt,d=rr();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),xt===null)throw Error(t(349));(ei&30)!==0||Tp(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Rp(Ip.bind(null,c,m,n),[n]),c.flags|=2048,ua(9,xp.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=rr(),s=xt.identifierPrefix;if(Xe){var a=Rr,c=Cr;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=aa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=y0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},T0={readContext:En,useCallback:Op,useContext:En,useEffect:uh,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Pp,useMemo:Vp,useReducer:ah,useRef:Cp,useState:function(){return ah(la)},useDebugValue:ch,useDeferredValue:function(n){var s=Tn();return jp(s,gt.memoizedState,n)},useTransition:function(){var n=ah(la)[0],s=Tn().memoizedState;return[n,s]},useMutableSource:wp,useSyncExternalStore:Ep,useId:Lp,unstable_isNewReconciler:!1},x0={readContext:En,useCallback:Op,useContext:En,useEffect:uh,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Pp,useMemo:Vp,useReducer:lh,useRef:Cp,useState:function(){return lh(la)},useDebugValue:ch,useDeferredValue:function(n){var s=Tn();return gt===null?s.memoizedState=n:jp(s,gt.memoizedState,n)},useTransition:function(){var n=lh(la)[0],s=Tn().memoizedState;return[n,s]},useMutableSource:wp,useSyncExternalStore:Ep,useId:Lp,unstable_isNewReconciler:!1};function Fn(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function hh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:se({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Kl={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=ls(n),m=Pr(c,d);m.payload=s,a!=null&&(m.callback=a),s=ss(n,m,d),s!==null&&(Bn(s,n,d,c),Fl(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=ls(n),m=Pr(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=ss(n,m,d),s!==null&&(Bn(s,n,d,c),Fl(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),c=ls(n),d=Pr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ss(n,d,c),s!==null&&(Bn(s,n,c,a),Fl(s,n,c))}};function zp(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Qo(a,c)||!Qo(d,m):!0}function Bp(n,s,a){var c=!1,d=ts,m=s.contextType;return typeof m=="object"&&m!==null?m=En(m):(d=Xt(s)?Qs:jt.current,c=s.contextTypes,m=(c=c!=null)?Ji(n,d):ts),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Kl,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function $p(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Kl.enqueueReplaceState(s,s.state,null)}function dh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Xc(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=En(m):(m=Xt(s)?Qs:jt.current,d.context=Ji(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(hh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Kl.enqueueReplaceState(d,d.state,null),Ul(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function io(n,s){try{var a="",c=s;do a+=ke(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function fh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function ph(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var I0=typeof WeakMap=="function"?WeakMap:Map;function Wp(n,s,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){eu||(eu=!0,Rh=c),ph(n,s)},a}function qp(n,s,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){ph(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){ph(n,s),typeof c!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Hp(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new I0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=M0.bind(null,n,s,a),s.then(n,n))}function Kp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Gp(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Pr(-1,1),s.tag=2,ss(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var S0=oe.ReactCurrentOwner,Zt=!1;function Ht(n,s,a,c){s.child=n===null?pp(s,null,a,c):to(s,n.child,a,c)}function Qp(n,s,a,c,d){a=a.render;var m=s.ref;return ro(s,d),c=ih(n,s,a,c,m,d),a=oh(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(Xe&&a&&Bc(s),s.flags|=1,Ht(n,s,c,d),s.child)}function Yp(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!jh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Jp(n,s,m,c,d)):(n=ou(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(w,c)&&n.ref===s.ref)return br(n,s,d)}return s.flags|=1,n=cs(m,c),n.ref=s.ref,n.return=s,s.child=n}function Jp(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(Qo(m,c)&&n.ref===s.ref)if(Zt=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Zt=!0);else return s.lanes=n.lanes,br(n,s,d)}return mh(n,s,a,c,d)}function Xp(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(ao,dn),dn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,qe(ao,dn),dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,qe(ao,dn),dn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,qe(ao,dn),dn|=c;return Ht(n,s,d,a),s.child}function Zp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function mh(n,s,a,c,d){var m=Xt(a)?Qs:jt.current;return m=Ji(s,m),ro(s,d),a=ih(n,s,a,c,m,d),c=oh(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(Xe&&c&&Bc(s),s.flags|=1,Ht(n,s,a,d),s.child)}function em(n,s,a,c,d){if(Xt(a)){var m=!0;Pl(s)}else m=!1;if(ro(s,d),s.stateNode===null)Ql(n,s),Bp(s,a,c),dh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,S=s.memoizedProps;w.props=S;var N=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=En(z):(z=Xt(a)?Qs:jt.current,z=Ji(s,z));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==c||N!==z)&&$p(s,w,c,z),rs=!1;var G=s.memoizedState;w.state=G,Ul(s,c,w,d),N=s.memoizedState,S!==c||G!==N||Jt.current||rs?(typeof Q=="function"&&(hh(s,a,Q,c),N=s.memoizedState),(S=rs||zp(s,a,S,c,G,N,z))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=z,c=S):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,gp(n,s),S=s.memoizedProps,z=s.type===s.elementType?S:Fn(s.type,S),w.props=z,J=s.pendingProps,G=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=En(N):(N=Xt(a)?Qs:jt.current,N=Ji(s,N));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==J||G!==N)&&$p(s,w,c,N),rs=!1,G=s.memoizedState,w.state=G,Ul(s,c,w,d);var ue=s.memoizedState;S!==J||G!==ue||Jt.current||rs?(typeof ie=="function"&&(hh(s,a,ie,c),ue=s.memoizedState),(z=rs||zp(s,a,z,c,G,ue,N)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ue,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ue,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ue),w.props=c,w.state=ue,w.context=N,c=z):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return gh(n,s,a,c,m,d)}function gh(n,s,a,c,d,m){Zp(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&ip(s,a,!1),br(n,s,m);c=s.stateNode,S0.current=s;var S=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=to(s,n.child,null,m),s.child=to(s,null,S,m)):Ht(n,s,S,m),s.memoizedState=c.state,d&&ip(s,a,!0),s.child}function tm(n){var s=n.stateNode;s.pendingContext?rp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&rp(n,s.context,!1),Zc(n,s.containerInfo)}function nm(n,s,a,c,d){return eo(),Hc(d),s.flags|=256,Ht(n,s,a,c),s.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function vh(n){return{baseLanes:n,cachePool:null,transitions:null}}function rm(n,s,a){var c=s.pendingProps,d=et.current,m=!1,w=(s.flags&128)!==0,S;if((S=w)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),qe(et,d&1),n===null)return qc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=au(w,c,0,null),n=ii(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=vh(a),s.memoizedState=yh,n):_h(s,w));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return k0(n,s,w,c,S,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,S=d.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=cs(d,N),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?m=cs(S,m):(m=ii(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?vh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=yh,c}return m=n.child,n=m.sibling,c=cs(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function _h(n,s){return s=au({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Gl(n,s,a,c){return c!==null&&Hc(c),to(s,n.child,null,a),n=_h(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function k0(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=fh(Error(t(422))),Gl(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=au({mode:"visible",children:c.children},d,0,null),m=ii(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&to(s,n.child,null,w),s.child.memoizedState=vh(w),s.memoizedState=yh,m);if((s.mode&1)===0)return Gl(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,m=Error(t(419)),c=fh(m,c,void 0),Gl(n,s,w,c)}if(S=(w&n.childLanes)!==0,Zt||S){if(c=xt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Nr(n,d),Bn(c,n,d,-1))}return Vh(),c=fh(Error(t(421))),Gl(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=F0.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,hn=Zr(d.nextSibling),cn=s,Xe=!0,Mn=null,n!==null&&(_n[wn++]=Cr,_n[wn++]=Rr,_n[wn++]=Ys,Cr=n.id,Rr=n.overflow,Ys=s),s=_h(s,c.children),s.flags|=4096,s)}function sm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Yc(n.return,s,a)}function wh(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function im(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(Ht(n,s,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sm(n,a,s);else if(n.tag===19)sm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(qe(et,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&zl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),wh(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&zl(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}wh(s,!0,a,null,m);break;case"together":wh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ql(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function br(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ti|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=cs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=cs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function A0(n,s,a){switch(s.tag){case 3:tm(s),eo();break;case 5:_p(s);break;case 1:Xt(s.type)&&Pl(s);break;case 4:Zc(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;qe(Ll,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(qe(et,et.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?rm(n,s,a):(qe(et,et.current&1),n=br(n,s,a),n!==null?n.sibling:null);qe(et,et.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return im(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),qe(et,et.current),c)break;return null;case 22:case 23:return s.lanes=0,Xp(n,s,a)}return br(n,s,a)}var om,Eh,am,lm;om=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Eh=function(){},am=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Zs(nr.current);var m=null;switch(a){case"input":d=gr(n,d),c=gr(n,c),m=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),m=[];break;case"textarea":d=Rs(n,d),c=Rs(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Cl)}Ds(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var S=d[z];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in c){var N=c[z];if(S=d?.[z],c.hasOwnProperty(z)&&N!==S&&(N!=null||S!=null))if(z==="style")if(S){for(w in S)!S.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&S[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(m||(m=[]),m.push(z,a)),a=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,S=S?S.__html:void 0,N!=null&&S!==N&&(m=m||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(m=m||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&Ke("scroll",n),m||S===N||(m=[])):(m=m||[]).push(z,N))}a&&(m=m||[]).push("style",a);var z=m;(s.updateQueue=z)&&(s.flags|=4)}},lm=function(n,s,a,c){a!==c&&(s.flags|=4)};function ca(n,s){if(!Xe)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function C0(n,s,a){var c=s.pendingProps;switch($c(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Xt(s.type)&&Nl(),Mt(s),null;case 3:return c=s.stateNode,so(),Ge(Jt),Ge(jt),nh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Vl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mn!==null&&(bh(Mn),Mn=null))),Eh(n,s),Mt(s),null;case 5:eh(s);var d=Zs(ia.current);if(a=s.type,n!==null&&s.stateNode!=null)am(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(n=Zs(nr.current),Vl(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[tr]=s,c[ea]=m,n=(s.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<Jo.length;d++)Ke(Jo[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":yr(c,m),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ke("invalid",c);break;case"textarea":Ns(c,m),Ke("invalid",c)}Ds(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var S=m[w];w==="children"?typeof S=="string"?c.textContent!==S&&(m.suppressHydrationWarning!==!0&&Al(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&Al(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Ke("scroll",c)}switch(a){case"input":Gt(c),Po(c,m,!0);break;case"textarea":Gt(c),Ps(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Cl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=st(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[tr]=s,n[ea]=c,om(n,s,!1,!1),s.stateNode=n;e:{switch(w=Os(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),d=c;break;case"iframe":case"object":case"embed":Ke("load",n),d=c;break;case"video":case"audio":for(d=0;d<Jo.length;d++)Ke(Jo[d],n);d=c;break;case"source":Ke("error",n),d=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),d=c;break;case"details":Ke("toggle",n),d=c;break;case"input":yr(n,c),d=gr(n,c),Ke("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":Ns(n,c),d=Rs(n,c),Ke("invalid",n);break;default:d=c}Ds(a,d),S=d;for(m in S)if(S.hasOwnProperty(m)){var N=S[m];m==="style"?An(n,N):m==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&bs(n,N)):m==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ot(n,N):typeof N=="number"&&ot(n,""+N):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?N!=null&&m==="onScroll"&&Ke("scroll",n):N!=null&&ae(n,m,N,w))}switch(a){case"input":Gt(n),Po(n,c,!1);break;case"textarea":Gt(n),Ps(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Re(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Kn(n,!!c.multiple,m,!1):c.defaultValue!=null&&Kn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Cl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(n&&s.stateNode!=null)lm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zs(ia.current),Zs(nr.current),Vl(s)){if(c=s.stateNode,a=s.memoizedProps,c[tr]=s,(m=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:Al(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Al(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[tr]=s,s.stateNode=c}return Mt(s),null;case 13:if(Ge(et),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&hn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)hp(),eo(),s.flags|=98560,m=!1;else if(m=Vl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[tr]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),m=!1}else Mn!==null&&(bh(Mn),Mn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(et.current&1)!==0?yt===0&&(yt=3):Vh())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return so(),Eh(n,s),n===null&&Xo(s.stateNode.containerInfo),Mt(s),null;case 10:return Qc(s.type._context),Mt(s),null;case 17:return Xt(s.type)&&Nl(),Mt(s),null;case 19:if(Ge(et),m=s.memoizedState,m===null)return Mt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)ca(m,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=zl(n),w!==null){for(s.flags|=128,ca(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return qe(et,et.current&1|2),s.child}n=n.sibling}m.tail!==null&&We()>lo&&(s.flags|=128,c=!0,ca(m,!1),s.lanes=4194304)}else{if(!c)if(n=zl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ca(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Xe)return Mt(s),null}else 2*We()-m.renderingStartTime>lo&&a!==1073741824&&(s.flags|=128,c=!0,ca(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=We(),s.sibling=null,a=et.current,qe(et,c?a&1|2:a&1),s):(Mt(s),null);case 22:case 23:return Oh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(dn&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function R0(n,s){switch($c(s),s.tag){case 1:return Xt(s.type)&&Nl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return so(),Ge(Jt),Ge(jt),nh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return eh(s),null;case 13:if(Ge(et),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));eo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ge(et),null;case 4:return so(),null;case 10:return Qc(s.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var Yl=!1,Ft=!1,N0=typeof WeakSet=="function"?WeakSet:Set,le=null;function oo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){rt(n,s,c)}else a.current=null}function Th(n,s,a){try{a()}catch(c){rt(n,s,c)}}var um=!1;function P0(n,s){if(Oc=Yr,n=zf(),kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,S=-1,N=-1,z=0,Q=0,J=n,G=null;t:for(;;){for(var ie;J!==a||d!==0&&J.nodeType!==3||(S=w+d),J!==m||c!==0&&J.nodeType!==3||(N=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===n)break t;if(G===a&&++z===d&&(S=w),G===m&&++Q===c&&(N=w),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}a=S===-1||N===-1?null:{start:S,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vc={focusedElem:n,selectionRange:a},Yr=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ue=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,lt=ue.memoizedState,F=s.stateNode,D=F.getSnapshotBeforeUpdate(s.elementType===s.type?de:Fn(s.type,de),lt);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){rt(s,s.return,ee)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ue=um,um=!1,ue}function ha(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Th(s,a,m)}d=d.next}while(d!==c)}}function Jl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function xh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function cm(n){var s=n.alternate;s!==null&&(n.alternate=null,cm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[tr],delete s[ea],delete s[Fc],delete s[f0],delete s[p0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hm(n){return n.tag===5||n.tag===3||n.tag===4}function dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ih(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Cl));else if(c!==4&&(n=n.child,n!==null))for(Ih(n,s,a),n=n.sibling;n!==null;)Ih(n,s,a),n=n.sibling}function Sh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Sh(n,s,a),n=n.sibling;n!==null;)Sh(n,s,a),n=n.sibling}var Nt=null,Un=!1;function is(n,s,a){for(a=a.child;a!==null;)fm(n,s,a),a=a.sibling}function fm(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(zs,a)}catch{}switch(a.tag){case 5:Ft||oo(a,s);case 6:var c=Nt,d=Un;Nt=null,is(n,s,a),Nt=c,Un=d,Nt!==null&&(Un?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Un?(n=Nt,a=a.stateNode,n.nodeType===8?Mc(n.parentNode,a):n.nodeType===1&&Mc(n,a),Vn(n)):Mc(Nt,a.stateNode));break;case 4:c=Nt,d=Un,Nt=a.stateNode.containerInfo,Un=!0,is(n,s,a),Nt=c,Un=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Th(a,s,w),d=d.next}while(d!==c)}is(n,s,a);break;case 1:if(!Ft&&(oo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){rt(a,s,S)}is(n,s,a);break;case 21:is(n,s,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,is(n,s,a),Ft=c):is(n,s,a);break;default:is(n,s,a)}}function pm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new N0),s.forEach(function(c){var d=U0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function zn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 5:Nt=S.stateNode,Un=!1;break e;case 3:Nt=S.stateNode.containerInfo,Un=!0;break e;case 4:Nt=S.stateNode.containerInfo,Un=!0;break e}S=S.return}if(Nt===null)throw Error(t(160));fm(m,w,d),Nt=null,Un=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(z){rt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mm(s,n),s=s.sibling}function mm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zn(s,n),sr(n),c&4){try{ha(3,n,n.return),Jl(3,n)}catch(de){rt(n,n.return,de)}try{ha(5,n,n.return)}catch(de){rt(n,n.return,de)}}break;case 1:zn(s,n),sr(n),c&512&&a!==null&&oo(a,a.return);break;case 5:if(zn(s,n),sr(n),c&512&&a!==null&&oo(a,a.return),n.flags&32){var d=n.stateNode;try{ot(d,"")}catch(de){rt(n,n.return,de)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,S=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&Ei(d,m),Os(S,w);var z=Os(S,m);for(w=0;w<N.length;w+=2){var Q=N[w],J=N[w+1];Q==="style"?An(d,J):Q==="dangerouslySetInnerHTML"?bs(d,J):Q==="children"?ot(d,J):ae(d,Q,J,z)}switch(S){case"input":Ti(d,m);break;case"textarea":vr(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ie=m.value;ie!=null?Kn(d,!!m.multiple,ie,!1):G!==!!m.multiple&&(m.defaultValue!=null?Kn(d,!!m.multiple,m.defaultValue,!0):Kn(d,!!m.multiple,m.multiple?[]:"",!1))}d[ea]=m}catch(de){rt(n,n.return,de)}}break;case 6:if(zn(s,n),sr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(de){rt(n,n.return,de)}}break;case 3:if(zn(s,n),sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Vn(s.containerInfo)}catch(de){rt(n,n.return,de)}break;case 4:zn(s,n),sr(n);break;case 13:zn(s,n),sr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Ch=We())),c&4&&pm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(z=Ft)||Q,zn(s,n),Ft=z):zn(s,n),sr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(le=n,Q=n.child;Q!==null;){for(J=le=Q;le!==null;){switch(G=le,ie=G.child,G.tag){case 0:case 11:case 14:case 15:ha(4,G,G.return);break;case 1:oo(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(de){rt(c,a,de)}}break;case 5:oo(G,G.return);break;case 22:if(G.memoizedState!==null){vm(J);continue}}ie!==null?(ie.return=G,le=ie):vm(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=J.stateNode,N=J.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,S.style.display=kn("display",w))}catch(de){rt(n,n.return,de)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(de){rt(n,n.return,de)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:zn(s,n),sr(n),c&4&&pm(n);break;case 21:break;default:zn(s,n),sr(n)}}function sr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(hm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ot(d,""),c.flags&=-33);var m=dm(n);Sh(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,S=dm(n);Ih(n,S,w);break;default:throw Error(t(161))}}catch(N){rt(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function b0(n,s,a){le=n,gm(n)}function gm(n,s,a){for(var c=(n.mode&1)!==0;le!==null;){var d=le,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Yl;if(!w){var S=d.alternate,N=S!==null&&S.memoizedState!==null||Ft;S=Yl;var z=Ft;if(Yl=w,(Ft=N)&&!z)for(le=d;le!==null;)w=le,N=w.child,w.tag===22&&w.memoizedState!==null?_m(d):N!==null?(N.return=w,le=N):_m(d);for(;m!==null;)le=m,gm(m),m=m.sibling;le=d,Yl=S,Ft=z}ym(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,le=m):ym(n)}}function ym(n){for(;le!==null;){var s=le;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Jl(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Fn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&vp(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}vp(s,w,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Vn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&xh(s)}catch(G){rt(s,s.return,G)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function vm(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function _m(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Jl(4,s)}catch(N){rt(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(N){rt(s,d,N)}}var m=s.return;try{xh(s)}catch(N){rt(s,m,N)}break;case 5:var w=s.return;try{xh(s)}catch(N){rt(s,w,N)}}}catch(N){rt(s,s.return,N)}if(s===n){le=null;break}var S=s.sibling;if(S!==null){S.return=s.return,le=S;break}le=s.return}}var D0=Math.ceil,Xl=oe.ReactCurrentDispatcher,kh=oe.ReactCurrentOwner,xn=oe.ReactCurrentBatchConfig,je=0,xt=null,dt=null,Pt=0,dn=0,ao=es(0),yt=0,da=null,ti=0,Zl=0,Ah=0,fa=null,en=null,Ch=0,lo=1/0,Dr=null,eu=!1,Rh=null,os=null,tu=!1,as=null,nu=0,pa=0,Nh=null,ru=-1,su=0;function Kt(){return(je&6)!==0?We():ru!==-1?ru:ru=We()}function ls(n){return(n.mode&1)===0?1:(je&2)!==0&&Pt!==0?Pt&-Pt:g0.transition!==null?(su===0&&(su=$s()),su):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:Bo(n.type)),n)}function Bn(n,s,a,c){if(50<pa)throw pa=0,Nh=null,Error(t(185));Hr(n,a,c),((je&2)===0||n!==xt)&&(n===xt&&((je&2)===0&&(Zl|=a),yt===4&&us(n,Pt)),tn(n,c),a===1&&je===0&&(s.mode&1)===0&&(lo=We()+500,bl&&ns()))}function tn(n,s){var a=n.callbackNode;Er(n,s);var c=Bs(n,n===xt?Pt:0);if(c===0)a!==null&&Lo(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Lo(a),s===1)n.tag===0?m0(Em.bind(null,n)):op(Em.bind(null,n)),h0(function(){(je&6)===0&&ns()}),a=null;else{switch(Gr(c)){case 1:a=Us;break;case 4:a=$r;break;case 16:a=gn;break;case 536870912:a=sl;break;default:a=gn}a=Rm(a,wm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function wm(n,s){if(ru=-1,su=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(uo()&&n.callbackNode!==a)return null;var c=Bs(n,n===xt?Pt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=iu(n,c);else{s=c;var d=je;je|=2;var m=xm();(xt!==n||Pt!==s)&&(Dr=null,lo=We()+500,ri(n,s));do try{j0();break}catch(S){Tm(n,S)}while(!0);Gc(),Xl.current=m,je=d,dt!==null?s=0:(xt=null,Pt=0,s=yt)}if(s!==0){if(s===2&&(d=an(n),d!==0&&(c=d,s=Ph(n,d))),s===1)throw a=da,ri(n,0),us(n,c),tn(n,We()),a;if(s===6)us(n,c);else{if(d=n.current.alternate,(c&30)===0&&!O0(d)&&(s=iu(n,c),s===2&&(m=an(n),m!==0&&(c=m,s=Ph(n,m))),s===1))throw a=da,ri(n,0),us(n,c),tn(n,We()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:si(n,en,Dr);break;case 3:if(us(n,c),(c&130023424)===c&&(s=Ch+500-We(),10<s)){if(Bs(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Lc(si.bind(null,n,en,Dr),s);break}si(n,en,Dr);break;case 4:if(us(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-Wt(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=We()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*D0(c/1960))-c,10<c){n.timeoutHandle=Lc(si.bind(null,n,en,Dr),c);break}si(n,en,Dr);break;case 5:si(n,en,Dr);break;default:throw Error(t(329))}}}return tn(n,We()),n.callbackNode===a?wm.bind(null,n):null}function Ph(n,s){var a=fa;return n.current.memoizedState.isDehydrated&&(ri(n,s).flags|=256),n=iu(n,s),n!==2&&(s=en,en=a,s!==null&&bh(s)),n}function bh(n){en===null?en=n:en.push.apply(en,n)}function O0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Ln(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s){for(s&=~Ah,s&=~Zl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Wt(s),c=1<<a;n[a]=-1,s&=~c}}function Em(n){if((je&6)!==0)throw Error(t(327));uo();var s=Bs(n,0);if((s&1)===0)return tn(n,We()),null;var a=iu(n,s);if(n.tag!==0&&a===2){var c=an(n);c!==0&&(s=c,a=Ph(n,c))}if(a===1)throw a=da,ri(n,0),us(n,s),tn(n,We()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,si(n,en,Dr),tn(n,We()),null}function Dh(n,s){var a=je;je|=1;try{return n(s)}finally{je=a,je===0&&(lo=We()+500,bl&&ns())}}function ni(n){as!==null&&as.tag===0&&(je&6)===0&&uo();var s=je;je|=1;var a=xn.transition,c=Pe;try{if(xn.transition=null,Pe=1,n)return n()}finally{Pe=c,xn.transition=a,je=s,(je&6)===0&&ns()}}function Oh(){dn=ao.current,Ge(ao)}function ri(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,c0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch($c(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Nl();break;case 3:so(),Ge(Jt),Ge(jt),nh();break;case 5:eh(c);break;case 4:so();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:Qc(c.type._context);break;case 22:case 23:Oh()}a=a.return}if(xt=n,dt=n=cs(n.current,null),Pt=dn=s,yt=0,da=null,Ah=Zl=ti=0,en=fa=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Xs=null}return n}function Tm(n,s){do{var a=dt;try{if(Gc(),Bl.current=Hl,$l){for(var c=tt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}$l=!1}if(ei=0,Tt=gt=tt=null,oa=!1,aa=0,kh.current=null,a===null||a.return===null){yt=1,da=s,dt=null;break}e:{var m=n,w=a.return,S=a,N=s;if(s=Pt,S.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,Q=S,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=Kp(w);if(ie!==null){ie.flags&=-257,Gp(ie,w,S,m,s),ie.mode&1&&Hp(m,z,s),s=ie,N=z;var ue=s.updateQueue;if(ue===null){var de=new Set;de.add(N),s.updateQueue=de}else ue.add(N);break e}else{if((s&1)===0){Hp(m,z,s),Vh();break e}N=Error(t(426))}}else if(Xe&&S.mode&1){var lt=Kp(w);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Gp(lt,w,S,m,s),Hc(io(N,S));break e}}m=N=io(N,S),yt!==4&&(yt=2),fa===null?fa=[m]:fa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var F=Wp(m,N,s);yp(m,F);break e;case 1:S=N;var D=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(os===null||!os.has(U)))){m.flags|=65536,s&=-s,m.lanes|=s;var ee=qp(m,S,s);yp(m,ee);break e}}m=m.return}while(m!==null)}Sm(a)}catch(pe){s=pe,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function xm(){var n=Xl.current;return Xl.current=Hl,n===null?Hl:n}function Vh(){(yt===0||yt===3||yt===2)&&(yt=4),xt===null||(ti&268435455)===0&&(Zl&268435455)===0||us(xt,Pt)}function iu(n,s){var a=je;je|=2;var c=xm();(xt!==n||Pt!==s)&&(Dr=null,ri(n,s));do try{V0();break}catch(d){Tm(n,d)}while(!0);if(Gc(),je=a,Xl.current=c,dt!==null)throw Error(t(261));return xt=null,Pt=0,yt}function V0(){for(;dt!==null;)Im(dt)}function j0(){for(;dt!==null&&!nl();)Im(dt)}function Im(n){var s=Cm(n.alternate,n,dn);n.memoizedProps=n.pendingProps,s===null?Sm(n):dt=s,kh.current=null}function Sm(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=C0(a,s,dn),a!==null){dt=a;return}}else{if(a=R0(a,s),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yt=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);yt===0&&(yt=5)}function si(n,s,a){var c=Pe,d=xn.transition;try{xn.transition=null,Pe=1,L0(n,s,a,c)}finally{xn.transition=d,Pe=c}return null}function L0(n,s,a,c){do uo();while(as!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if($e(n,m),n===xt&&(dt=xt=null,Pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||tu||(tu=!0,Rm(gn,function(){return uo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=xn.transition,xn.transition=null;var w=Pe;Pe=1;var S=je;je|=4,kh.current=null,P0(n,a),mm(a,n),r0(Vc),Yr=!!Oc,Vc=Oc=null,n.current=a,b0(a),vc(),je=S,Pe=w,xn.transition=m}else n.current=a;if(tu&&(tu=!1,as=n,nu=d),m=n.pendingLanes,m===0&&(os=null),il(a.stateNode),tn(n,We()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(eu)throw eu=!1,n=Rh,Rh=null,n;return(nu&1)!==0&&n.tag!==0&&uo(),m=n.pendingLanes,(m&1)!==0?n===Nh?pa++:(pa=0,Nh=n):pa=0,ns(),null}function uo(){if(as!==null){var n=Gr(nu),s=xn.transition,a=Pe;try{if(xn.transition=null,Pe=16>n?16:n,as===null)var c=!1;else{if(n=as,as=null,nu=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,le=n.current;le!==null;){var m=le,w=m.child;if((le.flags&16)!==0){var S=m.deletions;if(S!==null){for(var N=0;N<S.length;N++){var z=S[N];for(le=z;le!==null;){var Q=le;switch(Q.tag){case 0:case 11:case 15:ha(8,Q,m)}var J=Q.child;if(J!==null)J.return=Q,le=J;else for(;le!==null;){Q=le;var G=Q.sibling,ie=Q.return;if(cm(Q),Q===z){le=null;break}if(G!==null){G.return=ie,le=G;break}le=ie}}}var ue=m.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var lt=de.sibling;de.sibling=null,de=lt}while(de!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,le=w;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ha(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,le=F;break e}le=m.return}}var D=n.current;for(le=D;le!==null;){w=le;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,le=U;else e:for(w=D;le!==null;){if(S=le,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Jl(9,S)}}catch(pe){rt(S,S.return,pe)}if(S===w){le=null;break e}var ee=S.sibling;if(ee!==null){ee.return=S.return,le=ee;break e}le=S.return}}if(je=d,ns(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(zs,n)}catch{}c=!0}return c}finally{Pe=a,xn.transition=s}}return!1}function km(n,s,a){s=io(a,s),s=Wp(n,s,1),n=ss(n,s,1),s=Kt(),n!==null&&(Hr(n,1,s),tn(n,s))}function rt(n,s,a){if(n.tag===3)km(n,n,a);else for(;s!==null;){if(s.tag===3){km(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(os===null||!os.has(c))){n=io(a,n),n=qp(s,n,1),s=ss(s,n,1),n=Kt(),s!==null&&(Hr(s,1,n),tn(s,n));break}}s=s.return}}function M0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(Pt&a)===a&&(yt===4||yt===3&&(Pt&130023424)===Pt&&500>We()-Ch?ri(n,0):Ah|=a),tn(n,s)}function Am(n,s){s===0&&((n.mode&1)===0?s=1:(s=bi,bi<<=1,(bi&130023424)===0&&(bi=4194304)));var a=Kt();n=Nr(n,s),n!==null&&(Hr(n,s,a),tn(n,a))}function F0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Am(n,a)}function U0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Am(n,a)}var Cm;Cm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jt.current)Zt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Zt=!1,A0(n,s,a);Zt=(n.flags&131072)!==0}else Zt=!1,Xe&&(s.flags&1048576)!==0&&ap(s,Ol,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ql(n,s),n=s.pendingProps;var d=Ji(s,jt.current);ro(s,a),d=ih(null,s,c,n,d,a);var m=oh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xt(c)?(m=!0,Pl(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Xc(s),d.updater=Kl,s.stateNode=d,d._reactInternals=s,dh(s,c,n,a),s=gh(null,s,c,!0,m,a)):(s.tag=0,Xe&&m&&Bc(s),Ht(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Ql(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=B0(c),n=Fn(c,n),d){case 0:s=mh(null,s,c,n,a);break e;case 1:s=em(null,s,c,n,a);break e;case 11:s=Qp(null,s,c,n,a);break e;case 14:s=Yp(null,s,c,Fn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),mh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),em(n,s,c,d,a);case 3:e:{if(tm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,gp(n,s),Ul(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=io(Error(t(423)),s),s=nm(n,s,c,a,d);break e}else if(c!==d){d=io(Error(t(424)),s),s=nm(n,s,c,a,d);break e}else for(hn=Zr(s.stateNode.containerInfo.firstChild),cn=s,Xe=!0,Mn=null,a=pp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(eo(),c===d){s=br(n,s,a);break e}Ht(n,s,c,a)}s=s.child}return s;case 5:return _p(s),n===null&&qc(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,jc(c,d)?w=null:m!==null&&jc(c,m)&&(s.flags|=32),Zp(n,s),Ht(n,s,w,a),s.child;case 6:return n===null&&qc(s),null;case 13:return rm(n,s,a);case 4:return Zc(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=to(s,null,c,a):Ht(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),Qp(n,s,c,d,a);case 7:return Ht(n,s,s.pendingProps,a),s.child;case 8:return Ht(n,s,s.pendingProps.children,a),s.child;case 12:return Ht(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,qe(Ll,c._currentValue),c._currentValue=w,m!==null)if(Ln(m.value,w)){if(m.children===d.children&&!Jt.current){s=br(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var S=m.dependencies;if(S!==null){w=m.child;for(var N=S.firstContext;N!==null;){if(N.context===c){if(m.tag===1){N=Pr(-1,a&-a),N.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?N.next=N:(N.next=Q.next,Q.next=N),z.pending=N}}m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),Yc(m.return,a,s),S.lanes|=a;break}N=N.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),Yc(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Ht(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,ro(s,a),d=En(d),c=c(d),s.flags|=1,Ht(n,s,c,a),s.child;case 14:return c=s.type,d=Fn(c,s.pendingProps),d=Fn(c.type,d),Yp(n,s,c,d,a);case 15:return Jp(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),Ql(n,s),s.tag=1,Xt(c)?(n=!0,Pl(s)):n=!1,ro(s,a),Bp(s,c,d),dh(s,c,d,a),gh(null,s,c,!0,n,a);case 19:return im(n,s,a);case 22:return Xp(n,s,a)}throw Error(t(156,s.tag))};function Rm(n,s){return Ni(n,s)}function z0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,s,a,c){return new z0(n,s,a,c)}function jh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function B0(n){if(typeof n=="function")return jh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===_t)return 14}return 2}function cs(n,s){var a=n.alternate;return a===null?(a=In(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ou(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")jh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return ii(a.children,d,m,s);case I:w=8,d|=8;break;case C:return n=In(12,a,s,d|2),n.elementType=C,n.lanes=m,n;case k:return n=In(13,a,s,d),n.elementType=k,n.lanes=m,n;case He:return n=In(19,a,s,d),n.elementType=He,n.lanes=m,n;case Fe:return au(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:w=10;break e;case O:w=9;break e;case L:w=11;break e;case _t:w=14;break e;case At:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=In(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function ii(n,s,a,c){return n=In(7,n,c,s),n.lanes=a,n}function au(n,s,a,c){return n=In(22,n,c,s),n.elementType=Fe,n.lanes=a,n.stateNode={isHidden:!1},n}function Lh(n,s,a){return n=In(6,n,null,s),n.lanes=a,n}function Mh(n,s,a){return s=In(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function $0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qr(0),this.expirationTimes=qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Fh(n,s,a,c,d,m,w,S,N){return n=new $0(n,s,a,S,N),s===1?(s=1,m===!0&&(s|=8)):s=0,m=In(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xc(m),n}function W0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Nm(n){if(!n)return ts;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return sp(n,a,s)}return s}function Pm(n,s,a,c,d,m,w,S,N){return n=Fh(a,c,!0,n,d,m,w,S,N),n.context=Nm(null),a=n.current,c=Kt(),d=ls(a),m=Pr(c,d),m.callback=s??null,ss(a,m,d),n.current.lanes=d,Hr(n,d,c),tn(n,c),n}function lu(n,s,a,c){var d=s.current,m=Kt(),w=ls(d);return a=Nm(a),s.context===null?s.context=a:s.pendingContext=a,s=Pr(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ss(d,s,w),n!==null&&(Bn(n,d,w,m),Fl(n,d,w)),w}function uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Uh(n,s){bm(n,s),(n=n.alternate)&&bm(n,s)}function q0(){return null}var Dm=typeof reportError=="function"?reportError:function(n){console.error(n)};function zh(n){this._internalRoot=n}cu.prototype.render=zh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));lu(n,s,null,null)},cu.prototype.unmount=zh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ni(function(){lu(null,n,null,null)}),s[kr]=null}};function cu(n){this._internalRoot=n}cu.prototype.unstable_scheduleHydration=function(n){if(n){var s=cl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Jn.length&&s!==0&&s<Jn[a].priority;a++);Jn.splice(a,0,n),a===0&&fl(n)}};function Bh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function hu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Om(){}function H0(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var z=uu(w);m.call(z)}}var w=Pm(s,c,n,0,null,!1,!1,"",Om);return n._reactRootContainer=w,n[kr]=w.current,Xo(n.nodeType===8?n.parentNode:n),ni(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var z=uu(N);S.call(z)}}var N=Fh(n,0,!1,null,null,!1,!1,"",Om);return n._reactRootContainer=N,n[kr]=N.current,Xo(n.nodeType===8?n.parentNode:n),ni(function(){lu(s,N,a,c)}),N}function du(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var S=d;d=function(){var N=uu(w);S.call(N)}}lu(s,w,n,d)}else w=H0(a,s,n,d,c);return uu(w)}ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Wr(s.pendingLanes);a!==0&&(Kr(s,a|1),tn(s,We()),(je&6)===0&&(lo=We()+500,ns()))}break;case 13:ni(function(){var c=Nr(n,1);if(c!==null){var d=Kt();Bn(c,n,1,d)}}),Uh(n,1)}},Di=function(n){if(n.tag===13){var s=Nr(n,134217728);if(s!==null){var a=Kt();Bn(s,n,134217728,a)}Uh(n,134217728)}},ul=function(n){if(n.tag===13){var s=ls(n),a=Nr(n,s);if(a!==null){var c=Kt();Bn(a,n,s,c)}Uh(n,s)}},cl=function(){return Pe},hl=function(n,s){var a=Pe;try{return Pe=n,s()}finally{Pe=a}},Ii=function(n,s,a){switch(s){case"input":if(Ti(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Rl(c);if(!d)throw Error(t(90));Br(c),Ti(c,d)}}}break;case"textarea":vr(n,a);break;case"select":s=a.value,s!=null&&Kn(n,!!a.multiple,s,!1)}},js=Dh,Do=ni;var K0={usingClientEntryPoint:!1,Events:[ta,Qi,Rl,Qn,bo,Dh]},ma={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G0={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jo(n),n===null?null:n.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||q0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{zs=fu.inject(G0),on=fu}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K0,nn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bh(s))throw Error(t(200));return W0(n,s,null,a)},nn.createRoot=function(n,s){if(!Bh(n))throw Error(t(299));var a=!1,c="",d=Dm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Fh(n,1,!1,null,null,a,!1,c,d),n[kr]=s.current,Xo(n.nodeType===8?n.parentNode:n),new zh(s)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=jo(s),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return ni(n)},nn.hydrate=function(n,s,a){if(!hu(s))throw Error(t(200));return du(null,n,s,!0,a)},nn.hydrateRoot=function(n,s,a){if(!Bh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=Dm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Pm(s,null,n,1,a??null,d,!1,m,w),n[kr]=s.current,Xo(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new cu(s)},nn.render=function(n,s,a){if(!hu(s))throw Error(t(200));return du(null,n,s,!1,a)},nn.unmountComponentAtNode=function(n){if(!hu(n))throw Error(t(40));return n._reactRootContainer?(ni(function(){du(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1},nn.unstable_batchedUpdates=Dh,nn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!hu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return du(n,s,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Bm;function nw(){if(Bm)return qh.exports;Bm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qh.exports=tw(),qh.exports}var $m;function rw(){if($m)return pu;$m=1;var r=nw();return pu.createRoot=r.createRoot,pu.hydrateRoot=r.hydrateRoot,pu}var sw=rw();const iw=yy(sw);var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ow=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,E=l>>2,x=(l&3)<<4|f>>4;let P=(f&15)<<2|_>>6,V=_&63;y||(V=64,h||(P=64)),i.push(t[E],t[x],t[P],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(vy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ow(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||_==null||x==null)throw new aw;const P=l<<2|f>>4;if(i.push(P),_!==64){const V=f<<4&240|_>>2;if(i.push(V),x!==64){const $=_<<6&192|x;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class aw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lw=function(r){const e=vy(r);return _y.encodeByteArray(e,!0)},Ou=function(r){return lw(r).replace(/\./g,"")},wy=function(r){try{return _y.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=()=>uw().__FIREBASE_DEFAULTS__,hw=()=>{if(typeof process>"u"||typeof Wm>"u")return;const r=Wm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},dw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&wy(r[1]);return e&&JSON.parse(e)},Zu=()=>{try{return cw()||hw()||dw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ey=r=>{var e,t;return(t=(e=Zu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Ty=r=>{const e=Ey(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xy=()=>{var r;return(r=Zu())===null||r===void 0?void 0:r.config},Iy=r=>{var e;return(e=Zu())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ou(JSON.stringify(t)),Ou(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function mw(){var r;const e=(r=Zu())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _w(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ww(){return!mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ew(){try{return typeof indexedDB=="object"}catch{return!1}}function Tw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="FirebaseError";class pr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xw,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fa.prototype.create)}}class Fa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Iw(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new pr(o,f,i)}}function Iw(r,e){return r.replace(Sw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Sw=/\{\$([^}]+)}/g;function kw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Vu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(qm(l)&&qm(h)){if(!Vu(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function va(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function _a(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Aw(r,e){const t=new Cw(r,e);return t.subscribe.bind(t)}class Cw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Rw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Gh),o.error===void 0&&(o.error=Gh),o.complete===void 0&&(o.complete=Gh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Gh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r){return r&&r._delegate?r._delegate:r}class Es{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bw(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Pw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pw(r){return r===oi?void 0:r}function bw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Nw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const Ow={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Vw=be.INFO,jw={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Lw=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=jw[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=Vw,this._logHandler=Lw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const Mw=(r,e)=>e.some(t=>r instanceof t);let Hm,Km;function Fw(){return Hm||(Hm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uw(){return Km||(Km=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ky=new WeakMap,od=new WeakMap,Ay=new WeakMap,Qh=new WeakMap,Od=new WeakMap;function zw(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(vs(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ky.set(t,r)}).catch(()=>{}),Od.set(e,r),e}function Bw(r){if(od.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});od.set(r,e)}let ad={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return od.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ay.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $w(r){ad=r(ad)}function Ww(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Yh(this),e,...t);return Ay.set(i,e.sort?e.sort():[e]),vs(i)}:Uw().includes(r)?function(...e){return r.apply(Yh(this),e),vs(ky.get(this))}:function(...e){return vs(r.apply(Yh(this),e))}}function qw(r){return typeof r=="function"?Ww(r):(r instanceof IDBTransaction&&Bw(r),Mw(r,Fw())?new Proxy(r,ad):r)}function vs(r){if(r instanceof IDBRequest)return zw(r);if(Qh.has(r))return Qh.get(r);const e=qw(r);return e!==r&&(Qh.set(r,e),Od.set(e,r)),e}const Yh=r=>Od.get(r);function Hw(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=vs(h);return i&&h.addEventListener("upgradeneeded",y=>{i(vs(h.result),y.oldVersion,y.newVersion,vs(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),f.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const Kw=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],Jh=new Map;function Gm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Gw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Kw.includes(t)))return;const l=async function(h,...f){const y=this.transaction(h,o?"readwrite":"readonly");let _=y.store;return i&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&y.done]))[0]};return Jh.set(e,l),l}$w(r=>({...r,get:(e,t,i)=>Gm(e,t)||r.get(e,t,i),has:(e,t)=>!!Gm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Yw(r){const e=r.getComponent();return e?.type==="VERSION"}const ld="@firebase/app",Qm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Dd("@firebase/app"),Jw="@firebase/app-compat",Xw="@firebase/analytics-compat",Zw="@firebase/analytics",eE="@firebase/app-check-compat",tE="@firebase/app-check",nE="@firebase/auth",rE="@firebase/auth-compat",sE="@firebase/database",iE="@firebase/data-connect",oE="@firebase/database-compat",aE="@firebase/functions",lE="@firebase/functions-compat",uE="@firebase/installations",cE="@firebase/installations-compat",hE="@firebase/messaging",dE="@firebase/messaging-compat",fE="@firebase/performance",pE="@firebase/performance-compat",mE="@firebase/remote-config",gE="@firebase/remote-config-compat",yE="@firebase/storage",vE="@firebase/storage-compat",_E="@firebase/firestore",wE="@firebase/vertexai-preview",EE="@firebase/firestore-compat",TE="firebase",xE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",IE={[ld]:"fire-core",[Jw]:"fire-core-compat",[Zw]:"fire-analytics",[Xw]:"fire-analytics-compat",[tE]:"fire-app-check",[eE]:"fire-app-check-compat",[nE]:"fire-auth",[rE]:"fire-auth-compat",[sE]:"fire-rtdb",[iE]:"fire-data-connect",[oE]:"fire-rtdb-compat",[aE]:"fire-fn",[lE]:"fire-fn-compat",[uE]:"fire-iid",[cE]:"fire-iid-compat",[hE]:"fire-fcm",[dE]:"fire-fcm-compat",[fE]:"fire-perf",[pE]:"fire-perf-compat",[mE]:"fire-rc",[gE]:"fire-rc-compat",[yE]:"fire-gcs",[vE]:"fire-gcs-compat",[_E]:"fire-fst",[EE]:"fire-fst-compat",[wE]:"fire-vertex","fire-js":"fire-js",[TE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,SE=new Map,cd=new Map;function Ym(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function hi(r){const e=r.name;if(cd.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,r);for(const t of ju.values())Ym(t,r);for(const t of SE.values())Ym(t,r);return!0}function ec(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ir(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Fa("app","Firebase",kE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=xE;function Cy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ud,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(t||(t=xy()),!t)throw _s.create("no-options");const l=ju.get(o);if(l){if(Vu(t,l.options)&&Vu(i,l.config))return l;throw _s.create("duplicate-app",{appName:o})}const h=new Dw(o);for(const y of cd.values())h.addComponent(y);const f=new AE(t,i,h);return ju.set(o,f),f}function Vd(r=ud){const e=ju.get(r);if(!e&&r===ud&&xy())return Cy();if(!e)throw _s.create("no-app",{appName:r});return e}function or(r,e,t){var i;let o=(i=IE[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(f.join(" "));return}hi(new Es(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebase-heartbeat-database",RE=1,Ra="firebase-heartbeat-store";let Xh=null;function Ry(){return Xh||(Xh=Hw(CE,RE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ra)}catch(t){console.warn(t)}}}}).catch(r=>{throw _s.create("idb-open",{originalErrorMessage:r.message})})),Xh}async function NE(r){try{const t=(await Ry()).transaction(Ra),i=await t.objectStore(Ra).get(Ny(r));return await t.done,i}catch(e){if(e instanceof pr)Mr.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function Jm(r,e){try{const i=(await Ry()).transaction(Ra,"readwrite");await i.objectStore(Ra).put(e,Ny(r)),await i.done}catch(t){if(t instanceof pr)Mr.warn(t.message);else{const i=_s.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(i.message)}}}function Ny(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=1024,bE=30*24*60*60*1e3;class DE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Xm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=bE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xm(),{heartbeatsToSend:i,unsentEntries:o}=OE(this._heartbeatsCache.heartbeats),l=Ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mr.warn(t),""}}}function Xm(){return new Date().toISOString().substring(0,10)}function OE(r,e=PE){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zm(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zm(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class VE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ew()?Tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zm(r){return Ou(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r){hi(new Es("platform-logger",e=>new Qw(e),"PRIVATE")),hi(new Es("heartbeat",e=>new DE(e),"PRIVATE")),or(ld,Qm,r),or(ld,Qm,"esm2017"),or("fire-js","")}jE("");var LE="firebase",ME="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(LE,ME,"app");function jd(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FE=Py,by=new Fa("auth","Firebase",Py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Dd("@firebase/auth");function UE(r,...e){Lu.logLevel<=be.WARN&&Lu.warn(`Auth (${yi}): ${r}`,...e)}function Iu(r,...e){Lu.logLevel<=be.ERROR&&Lu.error(`Auth (${yi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(r,...e){throw Ld(r,...e)}function ar(r,...e){return Ld(r,...e)}function Dy(r,e,t){const i=Object.assign(Object.assign({},FE()),{[e]:t});return new Fa("auth","Firebase",i).create(e,{appName:r.name})}function Lr(r){return Dy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ld(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return by.create(r,...e)}function we(r,e,...t){if(!r)throw Ld(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Iu(e),new Error(e)}function Fr(r,e){r||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function zE(){return eg()==="http:"||eg()==="https:"}function eg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zE()||yw()||"connection"in navigator)?navigator.onLine:!0}function $E(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=pw()||vw()}get(){return BE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(r,e){Fr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new za(3e4,6e4);function Ss(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ks(r,e,t,i,o={}){return Vy(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Ua(Object.assign({key:r.config.apiKey},h)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:y},l);return gw()||(_.referrerPolicy="no-referrer"),Oy.fetch()(jy(r,r.config.apiHost,t,f),_)})}async function Vy(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},WE),e);try{const o=new KE(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw mu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[y,_]=f.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw mu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw mu(r,"user-disabled",h);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Dy(r,E,_);Wn(r,E)}}catch(o){if(o instanceof pr)throw o;Wn(r,"network-request-failed",{message:String(o)})}}async function Ba(r,e,t,i,o={}){const l=await ks(r,e,t,i,o);return"mfaPendingCredential"in l&&Wn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function jy(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Md(r.config,o):`${r.config.apiScheme}://${o}`}function HE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),qE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ar(r,e,i);return o.customData._tokenResponse=t,o}function tg(r){return r!==void 0&&r.enterprise!==void 0}class GE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QE(r,e){return ks(r,"GET","/v2/recaptchaConfig",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(r,e){return ks(r,"POST","/v1/accounts:delete",e)}async function Ly(r,e){return ks(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JE(r,e=!1){const t=kt(r),i=await t.getIdToken(e),o=Fd(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Ia(Zh(o.auth_time)),issuedAtTime:Ia(Zh(o.iat)),expirationTime:Ia(Zh(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Zh(r){return Number(r)*1e3}function Fd(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const o=wy(t);return o?JSON.parse(o):(Iu("Failed to decode base64 JWT payload"),null)}catch(o){return Iu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ng(r){const e=Fd(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof pr&&XE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function XE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Na(r,Ly(t,{idToken:i}));we(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?My(l.providerUserInfo):[],f=tT(r.providerData,h),y=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!f?.length,E=y?_:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new dd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function eT(r){const e=kt(r);await Mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function My(r){return r.map(e=>{var{providerId:t}=e,i=jd(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(r,e){const t=await Vy(r,{},async()=>{const i=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=jy(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Oy.fetch()(h,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rT(r,e){return ks(r,"POST","/v2/accounts:revokeToken",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=ng(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await nT(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new mo;return i&&(we(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new dd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Na(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JE(this,e)}reload(){return eT(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await Na(this,YE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,y,_,E;const x=(i=t.displayName)!==null&&i!==void 0?i:void 0,P=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(f=t.tenantId)!==null&&f!==void 0?f:void 0,b=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,q=(_=t.createdAt)!==null&&_!==void 0?_:void 0,ne=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ae,emailVerified:oe,isAnonymous:he,providerData:X,stsTokenManager:R}=t;we(ae&&R,e,"internal-error");const I=mo.fromJSON(this.name,R);we(typeof ae=="string",e,"internal-error"),ds(x,e.name),ds(P,e.name),we(typeof oe=="boolean",e,"internal-error"),we(typeof he=="boolean",e,"internal-error"),ds(V,e.name),ds($,e.name),ds(W,e.name),ds(b,e.name),ds(q,e.name),ds(ne,e.name);const C=new Vr({uid:ae,auth:e,email:P,emailVerified:oe,displayName:x,isAnonymous:he,photoURL:$,phoneNumber:V,tenantId:W,stsTokenManager:I,createdAt:q,lastLoginAt:ne});return X&&Array.isArray(X)&&(C.providerData=X.map(A=>Object.assign({},A))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new mo;o.updateFromServerResponse(t);const l=new Vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?My(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new mo;f.updateFromIdToken(i);const y=new Vr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new dd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;function jr(r){Fr(r instanceof Function,"Expected a class definition");let e=rg.get(r);return e?(Fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,rg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fy.type="NONE";const sg=Fy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r,e,t){return`firebase:${r}:${e}:${t}`}class go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Su(this.userKey,o.apiKey,l),this.fullPersistenceKey=Su("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new go(jr(sg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||jr(sg);const h=Su(i,e.config.apiKey,e.name);let f=null;for(const _ of t)try{const E=await _._get(h);if(E){const x=Vr._fromJSON(e,E);_!==l&&(f=x),l=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new go(l,e,i):(l=y[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($y(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qy(e))return"Blackberry";if(Hy(e))return"Webos";if(zy(e))return"Safari";if((e.includes("chrome/")||By(e))&&!e.includes("edge/"))return"Chrome";if(Wy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Uy(r=$t()){return/firefox\//i.test(r)}function zy(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function By(r=$t()){return/crios\//i.test(r)}function $y(r=$t()){return/iemobile/i.test(r)}function Wy(r=$t()){return/android/i.test(r)}function qy(r=$t()){return/blackberry/i.test(r)}function Hy(r=$t()){return/webos/i.test(r)}function Ud(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function sT(r=$t()){var e;return Ud(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iT(){return _w()&&document.documentMode===10}function Ky(r=$t()){return Ud(r)||Wy(r)||Hy(r)||qy(r)||/windows phone/i.test(r)||$y(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(r,e=[]){let t;switch(r){case"Browser":t=ig($t());break;case"Worker":t=`${ig($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const y=e(l);h(y)}catch(y){f(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(r,e={}){return ks(r,"GET","/v2/passwordPolicy",Ss(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=6;class uT{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:lT,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(h=y.containsNumericCharacter)!==null&&h!==void 0?h:!0),y.isValid&&(y.isValid=(f=y.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new og(this),this.idTokenSubscription=new og(this),this.beforeStateQueue=new oT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=by,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ly(this,{idToken:e}),i=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ir(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===f)&&y?.user&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$E()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Lr(this));const t=e?kt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aT(this),t=new uT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await rT(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&UE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function vi(r){return kt(r)}class og{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aw(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hT(r){tc=r}function Qy(r){return tc.loadJS(r)}function dT(){return tc.recaptchaEnterpriseScript}function fT(){return tc.gapiScript}function pT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const mT="recaptcha-enterprise",gT="NO_RECAPTCHA";class yT{constructor(e){this.type=mT,this.auth=vi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{QE(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const _=new GE(y);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(y=>{f(y)})})}function o(l,h,f){const y=window.grecaptcha;tg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h(gT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&tg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=dT();y.length!==0&&(y+=f),Qy(y).then(()=>{o(f,l,h)}).catch(_=>{h(_)})}}).catch(f=>{h(f)})})}}async function ag(r,e,t,i=!1){const o=new yT(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function fd(r,e,t,i){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ag(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ag(r,e,t,t==="getOobCode");return i(r,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(r,e){const t=ec(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Vu(l,e??{}))return o;Wn(o,"already-initialized")}return t.initialize({options:e})}function _T(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(jr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function wT(r,e,t){const i=vi(r);we(i._canInitEmulator,i,"emulator-config-failed"),we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Yy(e),{host:h,port:f}=ET(e),y=f===null?"":`:${f}`;i.config.emulator={url:`${l}//${h}${y}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),TT()}function Yy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ET(r){const e=Yy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:lg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:lg(h)}}}function lg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function TT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function xT(r,e){return ks(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(r,e){return Ba(r,"POST","/v1/accounts:signInWithPassword",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(r,e){return Ba(r,"POST","/v1/accounts:signInWithEmailLink",Ss(r,e))}async function kT(r,e){return Ba(r,"POST","/v1/accounts:signInWithEmailLink",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends zd{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Pa(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Pa(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fd(e,t,"signInWithPassword",IT);case"emailLink":return ST(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fd(e,i,"signUpPassword",xT);case"emailLink":return kT(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r,e){return Ba(r,"POST","/v1/accounts:signInWithIdp",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="http://localhost";class di extends zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=jd(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new di(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return yo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,yo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yo(e,t)}buildRequest(){const e={requestUri:AT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ua(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RT(r){const e=va(_a(r)).link,t=e?va(_a(e)).deep_link_id:null,i=va(_a(r)).deep_link_id;return(i?va(_a(i)).link:null)||i||t||e||r}class Bd{constructor(e){var t,i,o,l,h,f;const y=va(_a(e)),_=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,x=CT((o=y.mode)!==null&&o!==void 0?o:null);we(_&&E&&x,"argument-error"),this.apiKey=_,this.operation=x,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=y.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=y.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=RT(e);try{return new Bd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,t){return Pa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Bd.parseLink(t);return we(i,"argument-error"),Pa._fromEmailAndCode(e,i.code,i.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Jy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends $a{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends $a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return di._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends $a{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends $a{constructor(){super("twitter.com")}static credential(e,t){return di._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(r,e){return Ba(r,"POST","/v1/accounts:signUp",Ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Vr._fromIdTokenResponse(e,i,o),h=ug(i);return new fi({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ug(i);return new fi({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ug(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends pr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Fu(e,t,i,o)}}function Xy(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(r,l,e,i):l})}async function PT(r,e,t=!1){const i=await Na(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fi._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(r,e,t=!1){const{auth:i}=r;if(ir(i.app))return Promise.reject(Lr(i));const o="reauthenticate";try{const l=await Na(r,Xy(i,o,e,r),t);we(l.idToken,i,"internal-error");const h=Fd(l.idToken);we(h,i,"internal-error");const{sub:f}=h;return we(r.uid===f,i,"user-mismatch"),fi._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Wn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(r,e,t=!1){if(ir(r.app))return Promise.reject(Lr(r));const i="signIn",o=await Xy(r,i,e),l=await fi._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function DT(r,e){return Zy(vi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(r){const e=vi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OT(r,e,t){if(ir(r.app))return Promise.reject(Lr(r));const i=vi(r),h=await fd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NT).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&ev(r),y}),f=await fi._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function VT(r,e,t){return ir(r.app)?Promise.reject(Lr(r)):DT(kt(r),ko.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ev(r),i})}function jT(r,e,t,i){return kt(r).onIdTokenChanged(e,t,i)}function LT(r,e,t){return kt(r).beforeAuthStateChanged(e,t)}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=1e3,FT=10;class nv extends tv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ky(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);iT()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,FT):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},MT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nv.type="LOCAL";const UT=nv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends tv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rv.type="SESSION";const sv=rv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new nc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async _=>_(t.origin,l)),y=await zT(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,y)=>{const _=$d("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(x){const P=x;if(P.data.eventId===_)switch(P.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(P.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function $T(r){lr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function WT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qT(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function HT(){return iv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="firebaseLocalStorageDb",KT=1,zu="firebaseLocalStorage",av="fbase_key";class Wa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rc(r,e){return r.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function GT(){const r=indexedDB.deleteDatabase(ov);return new Wa(r).toPromise()}function pd(){const r=indexedDB.open(ov,KT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(zu,{keyPath:av})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(zu)?e(i):(i.close(),await GT(),e(await pd()))})})}async function cg(r,e,t){const i=rc(r,!0).put({[av]:e,value:t});return new Wa(i).toPromise()}async function QT(r,e){const t=rc(r,!1).get(e),i=await new Wa(t).toPromise();return i===void 0?null:i.value}function hg(r,e){const t=rc(r,!0).delete(e);return new Wa(t).toPromise()}const YT=800,JT=3;class lv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>JT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nc._getInstance(HT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await WT(),!this.activeServiceWorker)return;this.sender=new BT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pd();return await cg(e,Uu,"1"),await hg(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>cg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>QT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=rc(o,!1).getAll();return new Wa(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lv.type="LOCAL";const XT=lv;new za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r,e){return e?jr(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ex(r){return Zy(r.auth,new Wd(r),r.bypassAuthState)}function tx(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),bT(t,new Wd(r),r.bypassAuthState)}async function nx(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),PT(t,new Wd(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ex;case"linkViaPopup":case"linkViaRedirect":return nx;case"reauthViaPopup":case"reauthViaRedirect":return tx;default:Wn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new za(2e3,1e4);class po extends uv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=$d();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rx.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="pendingRedirect",ku=new Map;class ix extends uv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const i=await ox(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ox(r,e){const t=ux(e),i=lx(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function ax(r,e){ku.set(r._key(),e)}function lx(r){return jr(r._redirectPersistence)}function ux(r){return Su(sx,r.config.apiKey,r.name)}async function cx(r,e,t=!1){if(ir(r.app))return Promise.reject(Lr(r));const i=vi(r),o=ZT(i,e),h=await new ix(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=10*60*1e3;class dx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!cv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hx&&this.cachedEventUids.clear(),this.cachedEventUids.has(dg(e))}saveEventToCache(e){this.cachedEventUids.add(dg(e)),this.lastProcessedEventTime=Date.now()}}function dg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function cv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function fx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(r,e={}){return ks(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gx=/^https?/;async function yx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await px(r);for(const t of e)try{if(vx(t))return}catch{}Wn(r,"unauthorized-domain")}function vx(r){const e=hd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!gx.test(t))return!1;if(mx.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new za(3e4,6e4);function fg(){const r=lr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wx(r){return new Promise((e,t)=>{var i,o,l;function h(){fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fg(),t(ar(r,"network-request-failed"))},timeout:_x.get()})}if(!((o=(i=lr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=lr().gapi)===null||l===void 0)&&l.load)h();else{const f=pT("iframefcb");return lr()[f]=()=>{gapi.load?h():t(ar(r,"network-request-failed"))},Qy(`${fT()}?onload=${f}`).catch(y=>t(y))}}).catch(e=>{throw Au=null,e})}let Au=null;function Ex(r){return Au=Au||wx(r),Au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new za(5e3,15e3),xx="__/auth/iframe",Ix="emulator/auth/iframe",Sx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ax(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Md(e,Ix):`https://${r.config.authDomain}/${xx}`,i={apiKey:e.apiKey,appName:r.name,v:yi},o=kx.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ua(i).slice(1)}`}async function Cx(r){const e=await Ex(r),t=lr().gapi;return we(t,r,"internal-error"),e.open({where:document.body,url:Ax(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sx,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=ar(r,"network-request-failed"),f=lr().setTimeout(()=>{l(h)},Tx.get());function y(){lr().clearTimeout(f),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nx=500,Px=600,bx="_blank",Dx="http://localhost";class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ox(r,e,t,i=Nx,o=Px){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const y=Object.assign(Object.assign({},Rx),{width:i.toString(),height:o.toString(),top:l,left:h}),_=$t().toLowerCase();t&&(f=By(_)?bx:t),Uy(_)&&(e=e||Dx,y.scrollbars="yes");const E=Object.entries(y).reduce((P,[V,$])=>`${P}${V}=${$},`,"");if(sT(_)&&f!=="_self")return Vx(e||"",f),new pg(null);const x=window.open(e||"",f,E);we(x,r,"popup-blocked");try{x.focus()}catch{}return new pg(x)}function Vx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__/auth/handler",Lx="emulator/auth/handler",Mx=encodeURIComponent("fac");async function mg(r,e,t,i,o,l){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:yi,eventId:o};if(e instanceof Jy){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",kw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))h[E]=x}if(e instanceof $a){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const y=await r._getAppCheckToken(),_=y?`#${Mx}=${encodeURIComponent(y)}`:"";return`${Fx(r)}?${Ua(f).slice(1)}${_}`}function Fx({config:r}){return r.emulator?Md(r,Lx):`https://${r.authDomain}/${jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="webStorageSupport";class Ux{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sv,this._completeRedirectFn=cx,this._overrideRedirectResult=ax}async _openPopup(e,t,i,o){var l;Fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await mg(e,t,i,hd(),o);return Ox(e,h,$d())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await mg(e,t,i,hd(),o);return $T(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Fr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Cx(e),i=new dx(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ed,{type:ed},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[ed];h!==void 0&&t(!!h),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ky()||zy()||Ud()}}const zx=Ux;var gg="@firebase/auth",yg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wx(r){hi(new Es("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gy(r)},_=new cT(i,o,l,y);return _T(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),hi(new Es("auth-internal",e=>{const t=vi(e.getProvider("auth").getImmediate());return(i=>new Bx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(gg,yg,$x(r)),or(gg,yg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=5*60,Hx=Iy("authIdTokenMaxAge")||qx;let vg=null;const Kx=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Hx)return;const o=t?.token;vg!==o&&(vg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hv(r=Vd()){const e=ec(r,"auth");if(e.isInitialized())return e.getImmediate();const t=vT(r,{popupRedirectResolver:zx,persistence:[XT,UT,sv]}),i=Iy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=Kx(l.toString());LT(t,h,()=>h(t.currentUser)),jT(t,f=>h(f))}}const o=Ey("auth");return o&&wT(t,`http://${o}`),t}function Gx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}hT({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=ar("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Gx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wx("Browser");var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,dv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function C(){}C.prototype=I.prototype,R.D=I.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(A,O,L){for(var k=Array(arguments.length-2),He=2;He<arguments.length;He++)k[He-2]=arguments[He];return I.prototype[O].apply(A,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,C){C||(C=0);var A=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)A[O]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(O=0;16>O;++O)A[O]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=R.g[0],C=R.g[1],O=R.g[2];var L=R.g[3],k=I+(L^C&(O^L))+A[0]+3614090360&4294967295;I=C+(k<<7&4294967295|k>>>25),k=L+(O^I&(C^O))+A[1]+3905402710&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(C^L&(I^C))+A[2]+606105819&4294967295,O=L+(k<<17&4294967295|k>>>15),k=C+(I^O&(L^I))+A[3]+3250441966&4294967295,C=O+(k<<22&4294967295|k>>>10),k=I+(L^C&(O^L))+A[4]+4118548399&4294967295,I=C+(k<<7&4294967295|k>>>25),k=L+(O^I&(C^O))+A[5]+1200080426&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(C^L&(I^C))+A[6]+2821735955&4294967295,O=L+(k<<17&4294967295|k>>>15),k=C+(I^O&(L^I))+A[7]+4249261313&4294967295,C=O+(k<<22&4294967295|k>>>10),k=I+(L^C&(O^L))+A[8]+1770035416&4294967295,I=C+(k<<7&4294967295|k>>>25),k=L+(O^I&(C^O))+A[9]+2336552879&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(C^L&(I^C))+A[10]+4294925233&4294967295,O=L+(k<<17&4294967295|k>>>15),k=C+(I^O&(L^I))+A[11]+2304563134&4294967295,C=O+(k<<22&4294967295|k>>>10),k=I+(L^C&(O^L))+A[12]+1804603682&4294967295,I=C+(k<<7&4294967295|k>>>25),k=L+(O^I&(C^O))+A[13]+4254626195&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(C^L&(I^C))+A[14]+2792965006&4294967295,O=L+(k<<17&4294967295|k>>>15),k=C+(I^O&(L^I))+A[15]+1236535329&4294967295,C=O+(k<<22&4294967295|k>>>10),k=I+(O^L&(C^O))+A[1]+4129170786&4294967295,I=C+(k<<5&4294967295|k>>>27),k=L+(C^O&(I^C))+A[6]+3225465664&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^C&(L^I))+A[11]+643717713&4294967295,O=L+(k<<14&4294967295|k>>>18),k=C+(L^I&(O^L))+A[0]+3921069994&4294967295,C=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(C^O))+A[5]+3593408605&4294967295,I=C+(k<<5&4294967295|k>>>27),k=L+(C^O&(I^C))+A[10]+38016083&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^C&(L^I))+A[15]+3634488961&4294967295,O=L+(k<<14&4294967295|k>>>18),k=C+(L^I&(O^L))+A[4]+3889429448&4294967295,C=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(C^O))+A[9]+568446438&4294967295,I=C+(k<<5&4294967295|k>>>27),k=L+(C^O&(I^C))+A[14]+3275163606&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^C&(L^I))+A[3]+4107603335&4294967295,O=L+(k<<14&4294967295|k>>>18),k=C+(L^I&(O^L))+A[8]+1163531501&4294967295,C=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(C^O))+A[13]+2850285829&4294967295,I=C+(k<<5&4294967295|k>>>27),k=L+(C^O&(I^C))+A[2]+4243563512&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^C&(L^I))+A[7]+1735328473&4294967295,O=L+(k<<14&4294967295|k>>>18),k=C+(L^I&(O^L))+A[12]+2368359562&4294967295,C=O+(k<<20&4294967295|k>>>12),k=I+(C^O^L)+A[5]+4294588738&4294967295,I=C+(k<<4&4294967295|k>>>28),k=L+(I^C^O)+A[8]+2272392833&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^C)+A[11]+1839030562&4294967295,O=L+(k<<16&4294967295|k>>>16),k=C+(O^L^I)+A[14]+4259657740&4294967295,C=O+(k<<23&4294967295|k>>>9),k=I+(C^O^L)+A[1]+2763975236&4294967295,I=C+(k<<4&4294967295|k>>>28),k=L+(I^C^O)+A[4]+1272893353&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^C)+A[7]+4139469664&4294967295,O=L+(k<<16&4294967295|k>>>16),k=C+(O^L^I)+A[10]+3200236656&4294967295,C=O+(k<<23&4294967295|k>>>9),k=I+(C^O^L)+A[13]+681279174&4294967295,I=C+(k<<4&4294967295|k>>>28),k=L+(I^C^O)+A[0]+3936430074&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^C)+A[3]+3572445317&4294967295,O=L+(k<<16&4294967295|k>>>16),k=C+(O^L^I)+A[6]+76029189&4294967295,C=O+(k<<23&4294967295|k>>>9),k=I+(C^O^L)+A[9]+3654602809&4294967295,I=C+(k<<4&4294967295|k>>>28),k=L+(I^C^O)+A[12]+3873151461&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^C)+A[15]+530742520&4294967295,O=L+(k<<16&4294967295|k>>>16),k=C+(O^L^I)+A[2]+3299628645&4294967295,C=O+(k<<23&4294967295|k>>>9),k=I+(O^(C|~L))+A[0]+4096336452&4294967295,I=C+(k<<6&4294967295|k>>>26),k=L+(C^(I|~O))+A[7]+1126891415&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~C))+A[14]+2878612391&4294967295,O=L+(k<<15&4294967295|k>>>17),k=C+(L^(O|~I))+A[5]+4237533241&4294967295,C=O+(k<<21&4294967295|k>>>11),k=I+(O^(C|~L))+A[12]+1700485571&4294967295,I=C+(k<<6&4294967295|k>>>26),k=L+(C^(I|~O))+A[3]+2399980690&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~C))+A[10]+4293915773&4294967295,O=L+(k<<15&4294967295|k>>>17),k=C+(L^(O|~I))+A[1]+2240044497&4294967295,C=O+(k<<21&4294967295|k>>>11),k=I+(O^(C|~L))+A[8]+1873313359&4294967295,I=C+(k<<6&4294967295|k>>>26),k=L+(C^(I|~O))+A[15]+4264355552&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~C))+A[6]+2734768916&4294967295,O=L+(k<<15&4294967295|k>>>17),k=C+(L^(O|~I))+A[13]+1309151649&4294967295,C=O+(k<<21&4294967295|k>>>11),k=I+(O^(C|~L))+A[4]+4149444226&4294967295,I=C+(k<<6&4294967295|k>>>26),k=L+(C^(I|~O))+A[11]+3174756917&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~C))+A[2]+718787259&4294967295,O=L+(k<<15&4294967295|k>>>17),k=C+(L^(O|~I))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+L&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var C=I-this.blockSize,A=this.B,O=this.h,L=0;L<I;){if(O==0)for(;L<=C;)o(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<I;)if(A[O++]=R.charCodeAt(L++),O==this.blockSize){o(this,A),O=0;break}}else for(;L<I;)if(A[O++]=R[L++],O==this.blockSize){o(this,A),O=0;break}}this.h=O,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var C=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=C&255,C/=256;for(this.u(R),R=Array(16),I=C=0;4>I;++I)for(var A=0;32>A;A+=8)R[C++]=this.g[I]>>>A&255;return R};function l(R,I){var C=f;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=I(R)}function h(R,I){this.h=I;for(var C=[],A=!0,O=R.length-1;0<=O;O--){var L=R[O]|0;A&&L==I||(C[O]=L,A=!1)}this.g=C}var f={};function y(R){return-128<=R&&128>R?l(R,function(I){return new h([I|0],0>I?-1:0)}):new h([R|0],0>R?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return x;if(0>R)return b(_(-R));for(var I=[],C=1,A=0;R>=C;A++)I[A]=R/C|0,C*=4294967296;return new h(I,0)}function E(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return b(E(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(I,8)),A=x,O=0;O<R.length;O+=8){var L=Math.min(8,R.length-O),k=parseInt(R.substring(O,O+L),I);8>L?(L=_(Math.pow(I,L)),A=A.j(L).add(_(k))):(A=A.j(C),A=A.add(_(k)))}return A}var x=y(0),P=y(1),V=y(16777216);r=h.prototype,r.m=function(){if(W(this))return-b(this).m();for(var R=0,I=1,C=0;C<this.g.length;C++){var A=this.i(C);R+=(0<=A?A:4294967296+A)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(W(this))return"-"+b(this).toString(R);for(var I=_(Math.pow(R,6)),C=this,A="";;){var O=oe(C,I).g;C=q(C,O.j(I));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=O,$(C))return L+A;for(;6>L.length;)L="0"+L;A=L+A}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function W(R){return R.h==-1}r.l=function(R){return R=q(this,R),W(R)?-1:$(R)?0:1};function b(R){for(var I=R.g.length,C=[],A=0;A<I;A++)C[A]=~R.g[A];return new h(C,~R.h).add(P)}r.abs=function(){return W(this)?b(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],A=0,O=0;O<=I;O++){var L=A+(this.i(O)&65535)+(R.i(O)&65535),k=(L>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);A=k>>>16,L&=65535,k&=65535,C[O]=k<<16|L}return new h(C,C[C.length-1]&-2147483648?-1:0)};function q(R,I){return R.add(b(I))}r.j=function(R){if($(this)||$(R))return x;if(W(this))return W(R)?b(this).j(b(R)):b(b(this).j(R));if(W(R))return b(this.j(b(R)));if(0>this.l(V)&&0>R.l(V))return _(this.m()*R.m());for(var I=this.g.length+R.g.length,C=[],A=0;A<2*I;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<R.g.length;O++){var L=this.i(A)>>>16,k=this.i(A)&65535,He=R.i(O)>>>16,_t=R.i(O)&65535;C[2*A+2*O]+=k*_t,ne(C,2*A+2*O),C[2*A+2*O+1]+=L*_t,ne(C,2*A+2*O+1),C[2*A+2*O+1]+=k*He,ne(C,2*A+2*O+1),C[2*A+2*O+2]+=L*He,ne(C,2*A+2*O+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new h(C,0)};function ne(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function ae(R,I){this.g=R,this.h=I}function oe(R,I){if($(I))throw Error("division by zero");if($(R))return new ae(x,x);if(W(R))return I=oe(b(R),I),new ae(b(I.g),b(I.h));if(W(I))return I=oe(R,b(I)),new ae(b(I.g),I.h);if(30<R.g.length){if(W(R)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var C=P,A=I;0>=A.l(R);)C=he(C),A=he(A);var O=X(C,1),L=X(A,1);for(A=X(A,2),C=X(C,2);!$(A);){var k=L.add(A);0>=k.l(R)&&(O=O.add(C),L=k),A=X(A,1),C=X(C,1)}return I=q(R,O.j(I)),new ae(O,I)}for(O=x;0<=R.l(I);){for(C=Math.max(1,Math.floor(R.m()/I.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),L=_(C),k=L.j(I);W(k)||0<k.l(R);)C-=A,L=_(C),k=L.j(I);$(L)&&(L=P),O=O.add(L),R=q(R,k)}return new ae(O,R)}r.A=function(R){return oe(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)&R.i(A);return new h(C,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)|R.i(A);return new h(C,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)^R.i(A);return new h(C,this.h^R.h)};function he(R){for(var I=R.g.length+1,C=[],A=0;A<I;A++)C[A]=R.i(A)<<1|R.i(A-1)>>>31;return new h(C,R.h)}function X(R,I){var C=I>>5;I%=32;for(var A=R.g.length-C,O=[],L=0;L<A;L++)O[L]=0<I?R.i(L+C)>>>I|R.i(L+C+1)<<32-I:R.i(L+C);return new h(O,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,dv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,li=h}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fv,wa,pv,Cu,md,mv,gv,yv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in v))break e;v=v[M]}u=u[u.length-1],T=v[u],p=p(T),p!=T&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var v=0,T=!1,M={next:function(){if(!T&&v<u.length){var B=v++;return{value:p(B,u[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function y(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,v){return u.call.apply(u.bind,arguments)}function x(u,p,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function P(u,p,v){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:x,P.apply(null,arguments)}function V(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function $(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,M,B){for(var te=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)te[Ue-2]=arguments[Ue];return p.prototype[M].apply(T,te)}}function W(u){const p=u.length;if(0<p){const v=Array(p);for(let T=0;T<p;T++)v[T]=u[T];return v}return[]}function b(u,p){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(y(T)){const M=u.length||0,B=T.length||0;u.length=M+B;for(let te=0;te<B;te++)u[M+te]=T[te]}else u.push(T)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ne(u){return/^[\s\xa0]*$/.test(u)}function ae(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var he=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function X(u,p,v){for(const T in u)p.call(v,u[T],T,u)}function R(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function I(u){const p={};for(const v in u)p[v]=u[v];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let v,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(v in T)u[v]=T[v];for(let B=0;B<C.length;B++)v=C[B],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function O(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function L(u){f.setTimeout(()=>{throw u},0)}function k(){var u=ge;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class He{constructor(){this.h=this.g=null}add(p,v){const T=_t.get();T.set(p,v),this.h?this.h.next=T:this.g=T,this.h=T}}var _t=new q(()=>new At,u=>u.reset());class At{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,re=!1,ge=new He,se=()=>{const u=f.Promise.resolve(void 0);Fe=()=>{u.then(j)}};var j=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){L(v)}var p=_t;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}re=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return u}();function ke(u,p){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(he){e:{try{oe(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}$(ke,me);var Ae={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Be(u,p,v,T,M){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!T,this.ha=M,this.key=++Re,this.da=this.fa=!1}function Ze(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gt(u){this.src=u,this.g={},this.h=0}Gt.prototype.add=function(u,p,v,T,M){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var te=pn(u,p,T,M);return-1<te?(p=u[te],v||(p.fa=!1)):(p=new Be(p,this.src,B,!!T,M),p.fa=v,u.push(p)),p};function Br(u,p){var v=p.type;if(v in u.g){var T=u.g[v],M=Array.prototype.indexOf.call(T,p,void 0),B;(B=0<=M)&&Array.prototype.splice.call(T,M,1),B&&(Ze(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function pn(u,p,v,T){for(var M=0;M<u.length;++M){var B=u[M];if(!B.da&&B.listener==p&&B.capture==!!v&&B.ha==T)return M}return-1}var gr="closure_lm_"+(1e6*Math.random()|0),yr={};function Ei(u,p,v,T,M){if(Array.isArray(p)){for(var B=0;B<p.length;B++)Ei(u,p[B],v,T,M);return null}return v=Ps(v),u&&u[Ve]?u.K(p,v,_(T)?!!T.capture:!1,M):Ti(u,p,v,!1,T,M)}function Ti(u,p,v,T,M,B){if(!p)throw Error("Invalid event type");var te=_(M)?!!M.capture:!!M,Ue=Ns(u);if(Ue||(u[gr]=Ue=new Gt(u)),v=Ue.add(p,v,T,te,B),v.proxy)return v;if(T=Po(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)xe||(M=te),M===void 0&&(M=!1),u.addEventListener(p.toString(),T,M);else if(u.attachEvent)u.attachEvent(Kn(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Po(){function u(v){return p.call(u.src,u.listener,v)}const p=Rs;return u}function Cs(u,p,v,T,M){if(Array.isArray(p))for(var B=0;B<p.length;B++)Cs(u,p[B],v,T,M);else T=_(T)?!!T.capture:!!T,v=Ps(v),u&&u[Ve]?(u=u.i,p=String(p).toString(),p in u.g&&(B=u.g[p],v=pn(B,v,T,M),-1<v&&(Ze(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ns(u))&&(p=u.g[p.toString()],u=-1,p&&(u=pn(p,v,T,M)),(v=-1<u?p[u]:null)&&Hn(v))}function Hn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ve])Br(p.i,u);else{var v=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(v,T,u.capture):p.detachEvent?p.detachEvent(Kn(v),T):p.addListener&&p.removeListener&&p.removeListener(T),(v=Ns(p))?(Br(v,u),v.h==0&&(v.src=null,p[gr]=null)):Ze(u)}}}function Kn(u){return u in yr?yr[u]:yr[u]="on"+u}function Rs(u,p){if(u.da)u=!0;else{p=new ke(p,this);var v=u.listener,T=u.ha||u.src;u.fa&&Hn(u),u=v.call(T,p)}return u}function Ns(u){return u=u[gr],u instanceof Gt?u:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ps(u){return typeof u=="function"?u:(u[vr]||(u[vr]=function(p){return u.handleEvent(p)}),u[vr])}function st(){H.call(this),this.i=new Gt(this),this.M=this,this.F=null}$(st,H),st.prototype[Ve]=!0,st.prototype.removeEventListener=function(u,p,v,T){Cs(this,u,p,v,T)};function it(u,p){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new me(p,u);else if(p instanceof me)p.target=p.target||u;else{var M=p;p=new me(T,u),A(p,M)}if(M=!0,v)for(var B=v.length-1;0<=B;B--){var te=p.g=v[B];M=Sn(te,T,!0,p)&&M}if(te=p.g=u,M=Sn(te,T,!0,p)&&M,M=Sn(te,T,!1,p)&&M,v)for(B=0;B<v.length;B++)te=p.g=v[B],M=Sn(te,T,!1,p)&&M}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],T=0;T<v.length;T++)Ze(v[T]);delete u.g[p],u.h--}}this.F=null},st.prototype.K=function(u,p,v,T){return this.i.add(String(u),p,!1,v,T)},st.prototype.L=function(u,p,v,T){return this.i.add(String(u),p,!0,v,T)};function Sn(u,p,v,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,B=0;B<p.length;++B){var te=p[B];if(te&&!te.da&&te.capture==v){var Ue=te.listener,mt=te.ha||te.src;te.fa&&Br(u.i,te),M=Ue.call(mt,T)!==!1&&M}}return M&&!T.defaultPrevented}function bs(u,p,v){if(typeof u=="function")v&&(u=P(u,v));else if(u&&typeof u.handleEvent=="function")u=P(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function ot(u){u.g=bs(()=>{u.g=null,u.i&&(u.i=!1,ot(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ct extends H{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(u){H.call(this),this.h=u,this.g={}}$(wt,H);var kn=[];function An(u){X(u.g,function(p,v){this.g.hasOwnProperty(v)&&Hn(p)},u),u.g={}}wt.prototype.N=function(){wt.aa.N.call(this),An(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=f.JSON.stringify,Ds=f.JSON.parse,Os=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Vs(){}Vs.prototype.h=null;function xi(u){return u.h||(u.h=u.i())}function Ii(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){me.call(this,"d")}$(Gn,me);function Si(){me.call(this,"c")}$(Si,me);var Qn={},bo=null;function js(){return bo=bo||new st}Qn.La="serverreachability";function Do(u){me.call(this,Qn.La,u)}$(Do,me);function wr(u){const p=js();it(p,new Do(p))}Qn.STAT_EVENT="statevent";function Oo(u,p){me.call(this,Qn.STAT_EVENT,u),this.stat=p}$(Oo,me);function at(u){const p=js();it(p,new Oo(p,u))}Qn.Ma="timingevent";function ki(u,p){me.call(this,Qn.Ma,u),this.size=p}$(ki,me);function Cn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function Ms(u,p,v,T,M,B){u.info(function(){if(u.g)if(B)for(var te="",Ue=B.split("&"),mt=0;mt<Ue.length;mt++){var De=Ue[mt].split("=");if(1<De.length){var Et=De[0];De=De[1];var ht=Et.split("_");te=2<=ht.length&&ht[1]=="type"?te+(Et+"="+De+"&"):te+(Et+"=redacted&")}}else te=null;else te=B;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+p+`
`+v+`
`+te})}function Ai(u,p,v,T,M,B,te){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+p+`
`+v+`
`+B+" "+te})}function Rn(u,p,v,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+yc(u,v)+(T?" "+T:"")})}function Vo(u,p){u.info(function(){return"TIMEOUT: "+p})}Ls.prototype.info=function(){};function yc(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var te=1;te<M.length;te++)M[te]=""}}}}return _r(v)}catch{return p}}var Ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},el={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function Fs(){}$(Fs,Vs),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Nn=new Fs;function Pn(u,p,v,T){this.j=u,this.i=p,this.l=v,this.R=T||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tl}function tl(){this.i=null,this.g="",this.h=!1}var jo={},Ri={};function Ni(u,p,v){u.L=1,u.v=Kr(an(p)),u.m=v,u.P=!0,Lo(u,null)}function Lo(u,p){u.F=Date.now(),We(u),u.A=an(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Qr(v.i,"t",T),u.C=0,v=u.j.J,u.h=new tl,u.g=_l(u.j,v?p:null,!u.m),0<u.O&&(u.M=new ct(P(u.Y,u,u.g),u.O)),p=u.U,v=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(kn[0]=M.toString()),M=kn);for(var B=0;B<M.length;B++){var te=Ei(v,M[B],T||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),wr(),Ms(u.i,u.u,u.A,u.l,u.R,u.m)}Pn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yt(u)==3?p.j():this.Y(u)},Pn.prototype.Y=function(u){try{if(u==this.g)e:{const ht=Yt(this.g);var p=this.g.Ba();const vn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||$o(this.g)))){this.J||ht!=4||p==7||(p==8||0>=vn?wr(3):wr(2)),Us(this);var v=this.g.Z();this.X=v;t:if(nl(this)){var T=$o(this.g);u="";var M=T.length,B=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),$r(this);var te="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(B&&p==M-1)});T.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,Ai(this.i,this.u,this.A,this.l,this.R,ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,mt=this.g;if((Ue=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ue)){var De=Ue;break t}}De=null}if(v=De)Rn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mo(this,v);else{this.o=!1,this.s=3,at(12),gn(this),$r(this);break e}}if(this.P){v=!0;let un;for(;!this.J&&this.C<te.length;)if(un=vc(this,te),un==Ri){ht==4&&(this.s=4,at(14),v=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(un==jo){this.s=4,at(15),Rn(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else Rn(this.i,this.l,un,null),Mo(this,un);if(nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||te.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)Rn(this.i,this.l,te,"[Invalid Chunked Response]"),gn(this),$r(this);else if(0<te.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),qo(Et),Et.M=!0,at(11))}}else Rn(this.i,this.l,te,null),Mo(this,te);ht==4&&gn(this),this.o&&!this.J&&(ht==4?zi(this.j,this):(this.o=!1,We(this)))}else ji(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),gn(this),$r(this)}}}catch{}finally{}};function nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function vc(u,p){var v=u.C,T=p.indexOf(`
`,v);return T==-1?Ri:(v=Number(p.substring(v,T)),isNaN(v)?jo:(T+=1,T+v>p.length?Ri:(p=p.slice(T,T+v),u.C=T+v,p)))}Pn.prototype.cancel=function(){this.J=!0,gn(this)};function We(u){u.S=Date.now()+u.I,rl(u,u.I)}function rl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cn(P(u.ba,u),p)}function Us(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Pn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vo(this.i,this.A),this.L!=2&&(wr(),at(17)),gn(this),this.s=2,$r(this)):rl(this,this.S-u)};function $r(u){u.j.G==0||u.J||zi(u.j,u)}function gn(u){Us(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,An(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Mo(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||Wt(v.h,u))){if(!u.K&&Wt(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ui(v),jn(v);else break e;Fi(v),at(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=Cn(P(v.Za,v),6e3));if(1>=il(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Sr(v,11)}else if((u.K||v.g==u)&&Ui(v),!ne(p))for(M=v.Da.g.parse(p),p=0;p<M.length;p++){let De=M[p];if(v.T=De[0],De=De[1],v.G==2)if(De[0]=="c"){v.K=De[1],v.ia=De[2];const Et=De[3];Et!=null&&(v.la=Et,v.j.info("VER="+v.la));const ht=De[4];ht!=null&&(v.Aa=ht,v.j.info("SVER="+v.Aa));const vn=De[5];vn!=null&&typeof vn=="number"&&0<vn&&(T=1.5*vn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const un=u.g;if(un){const Ks=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var B=T.h;B.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Fo(B,B.h),B.h=null))}if(T.D){const $i=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;$i&&(T.ya=$i,$e(T.I,T.D,$i))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var te=u;if(T.qa=vl(T,T.J?T.ia:null,T.W),te.K){ol(T.h,te);var Ue=te,mt=T.L;mt&&(Ue.I=mt),Ue.B&&(Us(Ue),We(Ue)),T.g=te}else Hs(T);0<v.i.length&&Zn(v)}else De[0]!="stop"&&De[0]!="close"||Sr(v,7);else v.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Sr(v,7):Rt(v):De[0]!="noop"&&v.l&&v.l.ta(De),v.v=0)}}wr(4)}catch{}}var sl=class{constructor(u,p){this.g=u,this.map=p}};function zs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function il(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Fo(u,p){u.g?u.g.add(p):u.h=p}function ol(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}zs.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function al(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return W(u.i)}function Pi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var p=[],v=u.length,T=0;T<v;T++)p.push(u[T]);return p}p=[],v=0;for(T in u)p[v++]=u[T];return p}function bi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const T in u)p[v++]=T;return p}}}function Wr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=bi(u),T=Pi(u),M=T.length,B=0;B<M;B++)p.call(void 0,T[B],v&&v[B],u)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _c(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),M=null;if(0<=T){var B=u[v].substring(0,T);M=u[v].substring(T+1)}else B=u[v];p(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Er(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Er){this.h=u.h,$s(this,u.j),this.o=u.o,this.g=u.g,qr(this,u.s),this.l=u.l;var p=u.i,v=new Yn;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Hr(this,v),this.m=u.m}else u&&(p=String(u).match(Bs))?(this.h=!1,$s(this,p[1]||"",!0),this.o=Pe(p[2]||""),this.g=Pe(p[3]||"",!0),qr(this,p[4]),this.l=Pe(p[5]||"",!0),Hr(this,p[6]||"",!0),this.m=Pe(p[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}Er.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Gr(p,Di,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Gr(p,Di,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Gr(v,v.charAt(0)=="/"?cl:ul,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Gr(v,Uo)),u.join("")};function an(u){return new Er(u)}function $s(u,p,v){u.j=v?Pe(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function qr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Hr(u,p,v){p instanceof Yn?(u.i=p,Jn(u.i,u.h)):(v||(p=Gr(p,hl)),u.i=new Yn(p,u.h))}function $e(u,p,v){u.i.set(p,v)}function Kr(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pe(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gr(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,ll),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Di=/[#\/\?@]/g,ul=/[#\?:]/g,cl=/[#\?]/g,hl=/[#\?@]/g,Uo=/#/g;function Yn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ct(u){u.g||(u.g=new Map,u.h=0,u.i&&_c(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=Yn.prototype,r.add=function(u,p){Ct(this),this.i=null,u=yn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function bn(u,p){Ct(u),p=yn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Dn(u,p){return Ct(u),p=yn(u,p),u.g.has(p)}r.forEach=function(u,p){Ct(this),this.g.forEach(function(v,T){v.forEach(function(M){u.call(p,M,T,this)},this)},this)},r.na=function(){Ct(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let T=0;T<p.length;T++){const M=u[T];for(let B=0;B<M.length;B++)v.push(p[T])}return v},r.V=function(u){Ct(this);let p=[];if(typeof u=="string")Dn(this,u)&&(p=p.concat(this.g.get(yn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},r.set=function(u,p){return Ct(this),this.i=null,u=yn(this,u),Dn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Qr(u,p,v){bn(u,p),0<v.length&&(u.i=null,u.g.set(yn(u,p),W(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var T=p[v];const B=encodeURIComponent(String(T)),te=this.V(T);for(T=0;T<te.length;T++){var M=B;te[T]!==""&&(M+="="+encodeURIComponent(String(te[T]))),u.push(M)}}return this.i=u.join("&")};function yn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Jn(u,p){p&&!u.j&&(Ct(u),u.i=null,u.g.forEach(function(v,T){var M=T.toLowerCase();T!=M&&(bn(this,T),Qr(this,M,v))},u)),u.j=p}function wc(u,p){const v=new Ls;if(f.Image){const T=new Image;T.onload=V(Qt,v,"TestLoadImage: loaded",!0,p,T),T.onerror=V(Qt,v,"TestLoadImage: error",!1,p,T),T.onabort=V(Qt,v,"TestLoadImage: abort",!1,p,T),T.ontimeout=V(Qt,v,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function dl(u,p){const v=new Ls,T=new AbortController,M=setTimeout(()=>{T.abort(),Qt(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(M),B.ok?Qt(v,"TestPingServer: ok",!0,p):Qt(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Qt(v,"TestPingServer: error",!1,p)})}function Qt(u,p,v,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(v)}catch{}}function Ec(){this.g=new Os}function fl(u,p,v){const T=v||"";try{Wr(u,function(M,B){let te=M;_(M)&&(te=_r(M)),p.push(T+B+"="+encodeURIComponent(te))})}catch(M){throw p.push(T+"type="+encodeURIComponent("_badmap")),M}}function Tr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(Tr,Vs),Tr.prototype.g=function(){return new Ws(this.l,this.j)},Tr.prototype.i=function(u){return function(){return u}}({});function Ws(u,p){st.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ws,st),r=Ws.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Vn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?On(this):Vn(this),this.readyState==3&&pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,On(this))},r.Qa=function(u){this.g&&(this.response=u,On(this))},r.ga=function(){this.g&&On(this)};function On(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Vn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Vn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xr(u){let p="";return X(u,function(v,T){p+=T,p+=":",p+=v,p+=`\r
`}),p}function Yr(u,p,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=xr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):$e(u,p,v))}function Je(u){st.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Je,st);var Tc=/^https?$/i,zo=["POST","PUT"];r=Je.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?xi(this.o):xi(Nn),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){qs(this,B);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)v.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())v.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(zo,p,void 0))||T||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of v)this.g.setRequestHeader(B,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vi(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){qs(this,B)}};function qs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Oi(u),ln(u)}function Oi(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,it(this,"complete"),it(this,"abort"),ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},r.bb=function(){Bo(this)};function Bo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)bs(u.Ea,0,u);else if(it(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var T;if(T=te===0){var M=String(u.D).match(Bs)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),T=!Tc.test(M?M.toLowerCase():"")}v=T}if(v)it(u,"complete"),it(u,"success");else{u.m=6;try{var B=2<Yt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Oi(u)}}finally{ln(u)}}}}function ln(u,p){if(u.g){Vi(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||it(u,"ready");try{v.onreadystatechange=T}catch{}}}function Vi(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ds(p)}};function $o(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(u){const p={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ne(u[T]))continue;var v=O(u[T]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=p[M]||[];p[M]=B,B.push(v)}R(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Wo(u){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,u),this.cb=Xn("retryDelaySeedMs",1e4,u),this.Wa=Xn("forwardChannelMaxRetries",2,u),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zs(u&&u.concurrentRequestLimit),this.Da=new Ec,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Wo.prototype,r.la=8,r.G=1,r.connect=function(u,p,v,T){at(0),this.W=u,this.H=p||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=vl(this,null,this.W),Zn(this)};function Rt(u){if(Li(u),u.G==3){var p=u.U++,v=an(u.I);if($e(v,"SID",u.K),$e(v,"RID",p),$e(v,"TYPE","terminate"),Ir(u,v),p=new Pn(u,u.j,p),p.L=2,p.v=Kr(an(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.v,v=!0),v||(p.g=_l(p.j,null),p.g.ea(p.v)),p.F=Date.now(),We(p)}yl(u)}function jn(u){u.g&&(qo(u),u.g.cancel(),u.g=null)}function Li(u){jn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ui(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Zn(u){if(!on(u.h)&&!u.s){u.s=!0;var p=u.Ga;Fe||se(),re||(Fe(),re=!0),ge.add(p,u),u.B=0}}function xc(u,p){return il(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cn(P(u.Ga,u,p),gl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Pn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=I(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Jr(this,M,p),v=an(this.I),$e(v,"RID",u),$e(v,"CVER",22),this.D&&$e(v,"X-HTTP-Session-Id",this.D),Ir(this,v),B&&(this.O?p="headers="+encodeURIComponent(String(xr(B)))+"&"+p:this.m&&Yr(v,this.m,B)),Fo(this.h,M),this.Ua&&$e(v,"TYPE","init"),this.P?($e(v,"$req",p),$e(v,"SID","null"),M.T=!0,Ni(M,v,null)):Ni(M,v,p),this.G=2}}else this.G==3&&(u?Mi(this,u):this.i.length==0||on(this.h)||Mi(this))};function Mi(u,p){var v;p?v=p.l:v=u.U++;const T=an(u.I);$e(T,"SID",u.K),$e(T,"RID",v),$e(T,"AID",u.T),Ir(u,T),u.m&&u.o&&Yr(T,u.m,u.o),v=new Pn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Jr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fo(u.h,v),Ni(v,T,p)}function Ir(u,p){u.H&&X(u.H,function(v,T){$e(p,T,v)}),u.l&&Wr({},function(v,T){$e(p,T,v)})}function Jr(u,p,v){v=Math.min(u.i.length,v);var T=u.l?P(u.l.Na,u.l,u):null;e:{var M=u.i;let B=-1;for(;;){const te=["count="+v];B==-1?0<v?(B=M[0].g,te.push("ofs="+B)):B=0:te.push("ofs="+B);let Ue=!0;for(let mt=0;mt<v;mt++){let De=M[mt].g;const Et=M[mt].map;if(De-=B,0>De)B=Math.max(0,M[mt].g-100),Ue=!1;else try{fl(Et,te,"req"+De+"_")}catch{T&&T(Et)}}if(Ue){T=te.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,T}function Hs(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Fe||se(),re||(Fe(),re=!0),ge.add(p,u),u.v=0}}function Fi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cn(P(u.Fa,u),gl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,ml(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cn(P(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),jn(this),ml(this))};function qo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function ml(u){u.g=new Pn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=an(u.qa);$e(p,"RID","rpc"),$e(p,"SID",u.K),$e(p,"AID",u.T),$e(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(p,"TO",u.ja),$e(p,"TYPE","xmlhttp"),Ir(u,p),u.m&&u.o&&Yr(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Kr(an(p)),v.m=null,v.P=!0,Lo(v,u)}r.Za=function(){this.C!=null&&(this.C=null,jn(this),Fi(this),at(19))};function Ui(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function zi(u,p){var v=null;if(u.g==p){Ui(u),qo(u),u.g=null;var T=2}else if(Wt(u.h,p))v=p.D,ol(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;T=js(),it(T,new ki(T,v)),Zn(u)}else Hs(u);else if(M=p.s,M==3||M==0&&0<p.X||!(T==1&&xc(u,p)||T==2&&Fi(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),M){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function gl(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function Sr(u,p){if(u.j.info("Error code "+p),p==2){var v=P(u.fb,u),T=u.Xa;const M=!T;T=new Er(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||$s(T,"https"),Kr(T),M?wc(T.toString(),v):dl(T.toString(),v)}else at(2);u.G=0,u.l&&u.l.sa(p),yl(u),Li(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function yl(u){if(u.G=0,u.ka=[],u.l){const p=al(u.h);(p.length!=0||u.i.length!=0)&&(b(u.ka,p),b(u.ka,u.i),u.h.i.length=0,W(u.i),u.i.length=0),u.l.ra()}}function vl(u,p,v){var T=v instanceof Er?an(v):new Er(v);if(T.g!="")p&&(T.g=p+"."+T.g),qr(T,T.s);else{var M=f.location;T=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var B=new Er(null);T&&$s(B,T),p&&(B.g=p),M&&qr(B,M),v&&(B.l=v),T=B}return v=u.D,p=u.ya,v&&p&&$e(T,v,p),$e(T,"VER",u.la),Ir(u,T),T}function _l(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new Tr({eb:v})):new Je(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ho(){}r=Ho.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Bi(){}Bi.prototype.g=function(u,p){return new qt(u,p)};function qt(u,p){st.call(this),this.g=new Wo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ne(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ne(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new er(this)}$(qt,st),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Rt(this.g)},qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=_r(u),u=v);p.i.push(new sl(p.Ya++,u)),p.G==3&&Zn(p)},qt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,qt.aa.N.call(this)};function wl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}$(wl,Gn);function El(){Si.call(this),this.status=1}$(El,Si);function er(u){this.g=u}$(er,Ho),er.prototype.ua=function(){it(this.g,"a")},er.prototype.ta=function(u){it(this.g,new wl(u))},er.prototype.sa=function(u){it(this.g,new El)},er.prototype.ra=function(){it(this.g,"b")},Bi.prototype.createWebChannel=Bi.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,yv=function(){return new Bi},gv=function(){return js()},mv=Qn,md={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Cu=Ci,el.COMPLETE="complete",pv=el,Ii.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",st.prototype.listen=st.prototype.K,wa=Ii,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,fv=Je}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const wg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new Dd("@firebase/firestore");function ya(){return pi.logLevel}function fe(r,...e){if(pi.logLevel<=be.DEBUG){const t=e.map(qd);pi.debug(`Firestore (${Ao}): ${r}`,...t)}}function Ur(r,...e){if(pi.logLevel<=be.ERROR){const t=e.map(qd);pi.error(`Firestore (${Ao}): ${r}`,...t)}}function _o(r,...e){if(pi.logLevel<=be.WARN){const t=e.map(qd);pi.warn(`Firestore (${Ao}): ${r}`,...t)}}function qd(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: `+r;throw Ur(e),new Error(e)}function ze(r,e){r||Te()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}}class Yx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jx{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ui,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},f=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ui)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string"),new vv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new zt(e)}}class Xx{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zx{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Xx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ze(this.o===void 0);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new eI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=nI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Me(r,e){return r<e?-1:r>e?1:0}function wo(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new vt(0,0))}static max(){return new Ie(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qe extends ba{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Qe(t)}static emptyPath(){return new Qe([])}}const rI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends ba{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return rI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function sI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Ts(o,ye.empty(),e)}function iI(r){return new Ts(r.readTime,r.key,-1)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(Ie.min(),ye.empty(),-1)}static max(){return new Ts(Ie.max(),ye.empty(),-1)}}function oI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==aI)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,i)=>{t(e)})}static reject(e){return new Y((t,i)=>{i(e)})}static waitFor(e){return new Y((t,i)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},y=>i(y))}),h=!0,l===o&&t()})}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next(o=>o?Y.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new Y((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let y=0;y<l;y++){const _=y;t(e[_]).next(E=>{h[_]=E,++f,f===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new Y((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function uI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ha(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hd.oe=-1;function sc(r){return r==null}function Bu(r){return r===0&&1/r==-1/0}function cI(r){return typeof r=="number"&&Number.isInteger(r)&&!Bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _i(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function wv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??bt.RED,this.left=o??bt.EMPTY,this.right=l??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,o,l){return this}insert(e,t,i){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tg(this.data.getIterator())}getIteratorFrom(e){return new Tg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Tg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new fn([])}unionWith(e){let t=new Ot(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ev("Invalid base64 string: "+l):l}}(e);return new Vt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const hI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(r){if(ze(!!r),typeof r=="string"){let e=0;const t=hI.exec(r);if(ze(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function mi(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gd(r){const e=r.mapValue.fields.__previous_value__;return Kd(e)?Gd(e):e}function Da(r){const e=xs(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t,i,o,l,h,f,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=_}}class Oa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu={mapValue:{}};function gi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Kd(r)?4:pI(r)?9007199254740991:fI(r)?10:11:Te()}function dr(r,e){if(r===e)return!0;const t=gi(r);if(t!==gi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Da(r).isEqual(Da(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=xs(o.timestampValue),f=xs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return mi(o.bytesValue).isEqual(mi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),f=ut(l.doubleValue);return h===f?Bu(h)===Bu(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return wo(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Eg(h)!==Eg(f))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(f[y]===void 0||!dr(h[y],f[y])))return!1;return!0}(r,e);default:return Te()}}function Va(r,e){return(r.values||[]).find(t=>dr(t,e))!==void 0}function Eo(r,e){if(r===e)return 0;const t=gi(r),i=gi(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=ut(l.integerValue||l.doubleValue),y=ut(h.integerValue||h.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(r,e);case 3:return xg(r.timestampValue,e.timestampValue);case 4:return xg(Da(r),Da(e));case 5:return Me(r.stringValue,e.stringValue);case 6:return function(l,h){const f=mi(l),y=mi(h);return f.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),y=h.split("/");for(let _=0;_<f.length&&_<y.length;_++){const E=Me(f[_],y[_]);if(E!==0)return E}return Me(f.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Me(ut(l.latitude),ut(h.latitude));return f!==0?f:Me(ut(l.longitude),ut(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Ig(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,y,_,E;const x=l.fields||{},P=h.fields||{},V=(f=x.value)===null||f===void 0?void 0:f.arrayValue,$=(y=P.value)===null||y===void 0?void 0:y.arrayValue,W=Me(((_=V?.values)===null||_===void 0?void 0:_.length)||0,((E=$?.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:Ig(V,$)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===vu.mapValue&&h===vu.mapValue)return 0;if(l===vu.mapValue)return 1;if(h===vu.mapValue)return-1;const f=l.fields||{},y=Object.keys(f),_=h.fields||{},E=Object.keys(_);y.sort(),E.sort();for(let x=0;x<y.length&&x<E.length;++x){const P=Me(y[x],E[x]);if(P!==0)return P;const V=Eo(f[y[x]],_[E[x]]);if(V!==0)return V}return Me(y.length,E.length)}(r.mapValue,e.mapValue);default:throw Te()}}function xg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=xs(r),i=xs(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function Ig(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Eo(t[o],i[o]);if(l)return l}return Me(t.length,i.length)}function To(r){return gd(r)}function gd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=xs(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return mi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=gd(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${gd(t.fields[h])}`;return o+"}"}(r.mapValue):Te()}function Sg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function yd(r){return!!r&&"integerValue"in r}function Qd(r){return!!r&&"arrayValue"in r}function kg(r){return!!r&&"nullValue"in r}function Ag(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ru(r){return!!r&&"mapValue"in r}function fI(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Sa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _i(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Sa(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function pI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ru(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Sa(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Ru(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ru(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_i(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new rn(Sa(this.value))}}function Tv(r){const e=[];return _i(r.fields,(t,i)=>{const o=new Dt([t]);if(Ru(i)){const l=Tv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Bt(e,0,Ie.min(),Ie.min(),Ie.min(),rn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ie.min(),Ie.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ie.min(),Ie.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.position=e,this.inclusive=t}}function Cg(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=Eo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Rg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function mI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv=class{};class pt extends xv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yI(e,t,i):t==="array-contains"?new wI(e,i):t==="in"?new EI(e,i):t==="not-in"?new TI(e,i):t==="array-contains-any"?new xI(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vI(e,i):new _I(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Eo(t,this.value)):t!==null&&gi(this.value)===gi(t)&&this.matchesComparison(Eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends xv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new qn(e,t)}matches(e){return Iv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Iv(r){return r.op==="and"}function Sv(r){return gI(r)&&Iv(r)}function gI(r){for(const e of r.filters)if(e instanceof qn)return!1;return!0}function vd(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+To(r.value);if(Sv(r))return r.filters.map(e=>vd(e)).join(",");{const e=r.filters.map(t=>vd(t)).join(",");return`${r.op}(${e})`}}function kv(r,e){return r instanceof pt?function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&dr(i.value,o.value)}(r,e):r instanceof qn?function(i,o){return o instanceof qn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,f)=>l&&kv(h,o.filters[f]),!0):!1}(r,e):void Te()}function Av(r){return r instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${To(t.value)}`}(r):r instanceof qn?function(t){return t.op.toString()+" {"+t.getFilters().map(Av).join(" ,")+"}"}(r):"Filter"}class yI extends pt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class vI extends pt{constructor(e,t){super(e,"in",t),this.keys=Cv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _I extends pt{constructor(e,t){super(e,"not-in",t),this.keys=Cv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class wI extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qd(t)&&Va(t.arrayValue,this.value)}}class EI extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Va(this.value.arrayValue,t)}}class TI extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Va(this.value.arrayValue,t)}}class xI extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Va(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function Ng(r,e=null,t=[],i=[],o=null,l=null,h=null){return new II(r,e,t,i,o,l,h)}function Yd(r){const e=Se(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>vd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>To(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>To(i)).join(",")),e.ue=t}return e.ue}function Jd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!mI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!kv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Rg(r.startAt,e.startAt)&&Rg(r.endAt,e.endAt)}function _d(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SI(r,e,t,i,o,l,h,f){return new Ka(r,e,t,i,o,l,h,f)}function Xd(r){return new Ka(r)}function Pg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Rv(r){return r.collectionGroup!==null}function ka(r){const e=Se(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ot(Dt.comparator);return h.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(f=f.add(_.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Wu(l,i))}),t.has(Dt.keyField().canonicalString())||e.ce.push(new Wu(Dt.keyField(),i))}return e.ce}function ur(r){const e=Se(r);return e.le||(e.le=kI(e,ka(r))),e.le}function kI(r,e){if(r.limitType==="F")return Ng(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Wu(o.field,l)});const t=r.endAt?new $u(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new $u(r.startAt.position,r.startAt.inclusive):null;return Ng(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function wd(r,e){const t=r.filters.concat([e]);return new Ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ed(r,e,t){return new Ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ic(r,e){return Jd(ur(r),ur(e))&&r.limitType===e.limitType}function Nv(r){return`${Yd(ur(r))}|lt:${r.limitType}`}function co(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Av(o)).join(", ")}]`),sc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>To(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>To(o)).join(",")),`Target(${i})`}(ur(r))}; limitType=${r.limitType})`}function oc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of ka(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,f,y){const _=Cg(h,f,y);return h.inclusive?_<=0:_<0}(i.startAt,ka(i),o)||i.endAt&&!function(h,f,y){const _=Cg(h,f,y);return h.inclusive?_>=0:_>0}(i.endAt,ka(i),o))}(r,e)}function AI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Pv(r){return(e,t)=>{let i=!1;for(const o of ka(r)){const l=CI(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function CI(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):function(l,h,f){const y=h.data.field(l),_=f.data.field(l);return y!==null&&_!==null?Eo(y,_):Te()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new nt(ye.comparator);function zr(){return RI}const bv=new nt(ye.comparator);function Ea(...r){let e=bv;for(const t of r)e=e.insert(t.key,t);return e}function Dv(r){let e=bv;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ai(){return Aa()}function Ov(){return Aa()}function Aa(){return new Co(r=>r.toString(),(r,e)=>r.isEqual(e))}const NI=new nt(ye.comparator),PI=new Ot(ye.comparator);function Ne(...r){let e=PI;for(const t of r)e=e.add(t);return e}const bI=new Ot(Me);function DI(){return bI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function Vv(r){return{integerValue:""+r}}function OI(r,e){return cI(e)?Vv(e):Zd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this._=void 0}}function VI(r,e,t){return r instanceof qu?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Kd(l)&&(l=Gd(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof ja?Lv(r,e):r instanceof La?Mv(r,e):function(o,l){const h=jv(o,l),f=bg(h)+bg(o.Pe);return yd(h)&&yd(o.Pe)?Vv(f):Zd(o.serializer,f)}(r,e)}function jI(r,e,t){return r instanceof ja?Lv(r,e):r instanceof La?Mv(r,e):t}function jv(r,e){return r instanceof Hu?function(i){return yd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class qu extends ac{}class ja extends ac{constructor(e){super(),this.elements=e}}function Lv(r,e){const t=Fv(e);for(const i of r.elements)t.some(o=>dr(o,i))||t.push(i);return{arrayValue:{values:t}}}class La extends ac{constructor(e){super(),this.elements=e}}function Mv(r,e){let t=Fv(e);for(const i of r.elements)t=t.filter(o=>!dr(o,i));return{arrayValue:{values:t}}}class Hu extends ac{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bg(r){return ut(r.integerValue||r.doubleValue)}function Fv(r){return Qd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function LI(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof ja&&o instanceof ja||i instanceof La&&o instanceof La?wo(i.elements,o.elements,dr):i instanceof Hu&&o instanceof Hu?dr(i.Pe,o.Pe):i instanceof qu&&o instanceof qu}(r.transform,e.transform)}class MI{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lc{}function Uv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bv(r.key,cr.none()):new Ga(r.key,r.data,cr.none());{const t=r.data,i=rn.empty();let o=new Ot(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new As(r.key,i,new fn(o.toArray()),cr.none())}}function FI(r,e,t){r instanceof Ga?function(o,l,h){const f=o.value.clone(),y=Og(o.fieldTransforms,l,h.transformResults);f.setAll(y),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof As?function(o,l,h){if(!Nu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Og(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(zv(o)),y.setAll(f),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ca(r,e,t,i){return r instanceof Ga?function(l,h,f,y){if(!Nu(l.precondition,h))return f;const _=l.value.clone(),E=Vg(l.fieldTransforms,y,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(r,e,t,i):r instanceof As?function(l,h,f,y){if(!Nu(l.precondition,h))return f;const _=Vg(l.fieldTransforms,y,h),E=h.data;return E.setAll(zv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(x=>x.field))}(r,e,t,i):function(l,h,f){return Nu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function UI(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=jv(i.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function Dg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&wo(i,o,(l,h)=>LI(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ga extends lc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class As extends lc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function Og(r,e,t){const i=new Map;ze(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,jI(h,f,t[o]))}return i}function Vg(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,VI(l,h,e))}return i}class Bv extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zI extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&FI(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ca(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ca(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ov();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const y=Uv(h,f);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(t,i)=>Dg(t,i))&&wo(this.baseMutations,e.baseMutations,(t,i)=>Dg(t,i))}}class ef{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ze(e.mutations.length===i.length);let o=function(){return NI}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new ef(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Oe;function qI(r){switch(r){default:return Te();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function $v(r){if(r===void 0)return Ur("GRPC error has no .code"),K.UNKNOWN;switch(r){case ft.OK:return K.OK;case ft.CANCELLED:return K.CANCELLED;case ft.UNKNOWN:return K.UNKNOWN;case ft.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ft.INTERNAL:return K.INTERNAL;case ft.UNAVAILABLE:return K.UNAVAILABLE;case ft.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ft.NOT_FOUND:return K.NOT_FOUND;case ft.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ft.ABORTED:return K.ABORTED;case ft.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ft.DATA_LOSS:return K.DATA_LOSS;default:return Te()}}(Oe=ft||(ft={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new li([4294967295,4294967295],0);function jg(r){const e=HI().encode(r),t=new dv;return t.update(e),new Uint8Array(t.digest())}function Lg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new li([t,i],0),new li([o,l],0)]}class tf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ta(`Invalid padding: ${t}`);if(i<0)throw new Ta(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=li.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(li.fromNumber(i)));return o.compare(KI)===1&&(o=new li([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=jg(e),[i,o]=Lg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new tf(l,o,t);return i.forEach(f=>h.insert(f)),h}insert(e){if(this.Ie===0)return;const t=jg(e),[i,o]=Lg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uc(Ie.min(),o,new nt(Me),zr(),Ne())}}class Qa{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Qa(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Wv{constructor(e,t){this.targetId=e,this.me=t}}class qv{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Mg{constructor(){this.fe=0,this.ge=Ug(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),t=Ne(),i=Ne();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te()}}),new Qa(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Ug()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GI{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=Fg(),this.Qe=new nt(Me)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(_d(l))if(i===0){const h=new ye(l.path);this.Ue(t,h,Bt.newNoDocument(h,Ie.min()))}else ze(i===1);else{const h=this.Ye(t);if(h!==i){const f=this.Ze(e),y=f?this.Xe(f,e,h):1;if(y!==0){this.je(t);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=mi(i).toUint8Array()}catch(y){if(y instanceof Ev)return _o("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{f=new tf(h,o,l)}catch(y){return _o(y instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return f.Ie===0?null:f}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((l,h)=>{const f=this.Je(h);if(f){if(l.current&&_d(f.target)){const y=new ye(f.target.path);this.ke.get(y)!==null||this.it(h,y)||this.Ue(h,y,Bt.newNoDocument(y,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let i=Ne();this.qe.forEach((l,h)=>{let f=!0;h.forEachWhile(y=>{const _=this.Je(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new uc(e,t,this.Qe,this.ke,i);return this.ke=zr(),this.qe=Fg(),this.Qe=new nt(Me),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ot(Me),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Fg(){return new nt(ye.comparator)}function Ug(){return new nt(ye.comparator)}const QI={asc:"ASCENDING",desc:"DESCENDING"},YI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JI={and:"AND",or:"OR"};class XI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Td(r,e){return r.useProto3Json||sc(e)?e:{value:e}}function Ku(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(r,e){return Ku(r,e.toTimestamp())}function hr(r){return ze(!!r),Ie.fromTimestamp(function(t){const i=xs(t);return new vt(i.seconds,i.nanos)}(r))}function nf(r,e){return xd(r,e).canonicalString()}function xd(r,e){const t=function(o){return new Qe(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Kv(r){const e=Qe.fromString(r);return ze(Xv(e)),e}function Id(r,e){return nf(r.databaseId,e.path)}function td(r,e){const t=Kv(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(Qv(t))}function Gv(r,e){return nf(r.databaseId,e)}function eS(r){const e=Kv(r);return e.length===4?Qe.emptyPath():Qv(e)}function Sd(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Qv(r){return ze(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function zg(r,e,t){return{name:Id(r,e),fields:t.value.mapValue.fields}}function tS(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,E){return _.useProto3Json?(ze(E===void 0||typeof E=="string"),Vt.fromBase64String(E||"")):(ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Vt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(_){const E=_.code===void 0?K.UNKNOWN:$v(_.code);return new ce(E,_.message||"")}(h);t=new qv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=td(r,i.document.name),l=hr(i.document.updateTime),h=i.document.createTime?hr(i.document.createTime):Ie.min(),f=new rn({mapValue:{fields:i.document.fields}}),y=Bt.newFoundDocument(o,l,h,f),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Pu(_,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=td(r,i.document),l=i.readTime?hr(i.readTime):Ie.min(),h=Bt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Pu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=td(r,i.document),l=i.removedTargetIds||[];t=new Pu([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new WI(o,l),f=i.targetId;t=new Wv(f,h)}}return t}function nS(r,e){let t;if(e instanceof Ga)t={update:zg(r,e.key,e.value)};else if(e instanceof Bv)t={delete:Id(r,e.key)};else if(e instanceof As)t={update:zg(r,e.key,e.data),updateMask:hS(e.fieldMask)};else{if(!(e instanceof zI))return Te();t={verify:Id(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const f=h.transform;if(f instanceof qu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ja)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof La)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Hu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:ZI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(r,e.precondition)),t}function rS(r,e){return r&&r.length>0?(ze(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?hr(o.updateTime):hr(l);return h.isEqual(Ie.min())&&(h=hr(l)),new MI(h,o.transformResults||[])}(t,e))):[]}function sS(r,e){return{documents:[Gv(r,e.path)]}}function iS(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Gv(r,o);const l=function(_){if(_.length!==0)return Jv(qn.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(E=>function(P){return{field:ho(P.field),direction:lS(P.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Td(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:t,parent:o}}function oS(r){let e=eS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ze(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(x){const P=Yv(x);return P instanceof qn&&Sv(P)?P.getFilters():[P]}(t.where));let h=[];t.orderBy&&(h=function(x){return x.map(P=>function($){return new Wu(fo($.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(P))}(t.orderBy));let f=null;t.limit&&(f=function(x){let P;return P=typeof x=="object"?x.value:x,sc(P)?null:P}(t.limit));let y=null;t.startAt&&(y=function(x){const P=!!x.before,V=x.values||[];return new $u(V,P)}(t.startAt));let _=null;return t.endAt&&(_=function(x){const P=!x.before,V=x.values||[];return new $u(V,P)}(t.endAt)),SI(e,o,h,l,f,"F",y,_)}function aS(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fo(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fo(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=fo(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(r):r.fieldFilter!==void 0?function(t){return pt.create(fo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return qn.create(t.compositeFilter.filters.map(i=>Yv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(r):Te()}function lS(r){return QI[r]}function uS(r){return YI[r]}function cS(r){return JI[r]}function ho(r){return{fieldPath:r.canonicalString()}}function fo(r){return Dt.fromServerFormat(r.fieldPath)}function Jv(r){return r instanceof pt?function(t){if(t.op==="=="){if(Ag(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(kg(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ag(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(kg(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:uS(t.op),value:t.value}}}(r):r instanceof qn?function(t){const i=t.getFilters().map(o=>Jv(o));return i.length===1?i[0]:{compositeFilter:{op:cS(t.op),filters:i}}}(r):Te()}function hS(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Xv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,i,o,l=Ie.min(),h=Ie.min(),f=Vt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.ct=e}}function fS(r){const e=oS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.un=new mS}addToCollectionParentIndex(e,t){return this.un.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ts.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class mS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(Qe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xo(0)}static kn(){return new xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.changes=new Co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Ca(i.mutation,o,fn.empty(),vt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ne()){const o=ai();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=Ea();return l.forEach((f,y)=>{h=h.insert(f,y.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ai();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ne()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,i,o){let l=zr();const h=Aa(),f=function(){return Aa()}();return t.forEach((y,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof As)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Ca(E.mutation,_,E.mutation.getFieldMask(),vt.now())):h.set(_.key,fn.empty())}),this.recalculateAndSaveOverlays(e,l).next(y=>(y.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var x;return f.set(_,new yS(E,(x=h.get(_))!==null&&x!==void 0?x:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Aa();let o=new nt((h,f)=>h-f),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(y=>{const _=t.get(y);if(_===null)return;let E=i.get(y)||fn.empty();E=f.applyToLocalView(_,E),i.set(y,E);const x=(o.get(f.batchId)||Ne()).add(y);o=o.insert(f.batchId,x)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),_=y.key,E=y.value,x=Ov();E.forEach(P=>{if(!l.has(P)){const V=Uv(t.get(P),i.get(P));V!==null&&x.set(P,V),l=l.add(P)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,x))}return Y.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Y.resolve(ai());let f=-1,y=l;return h.next(_=>Y.forEach(_,(E,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{y=y.insert(E,P)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,y,_,Ne())).next(E=>({batchId:f,changes:Dv(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let o=Ea();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ea();return this.indexManager.getCollectionParents(e,l).next(f=>Y.forEach(f,y=>{const _=function(x,P){return new Ka(P,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((x,P)=>{h=h.insert(x,P)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((y,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Bt.newInvalidDocument(E)))});let f=Ea();return h.forEach((y,_)=>{const E=l.get(y);E!==void 0&&Ca(E.mutation,_,fn.empty(),vt.now()),oc(t,_)&&(f=f.insert(y,_))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Y.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:fS(o.bundledQuery),readTime:hr(o.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.overlays=new nt(ye.comparator),this.Ir=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ai();return Y.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.ht(e,t,l)}),Y.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const o=ai(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const y=f.getNext().value,_=y.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new nt((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=ai(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const f=ai(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,E)=>f.set(_,E)),!(f.size()>=o)););return Y.resolve(f)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new $I(t,i));let l=this.Ir.get(t);l===void 0&&(l=Ne(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.Tr=new Ot(St.Er),this.dr=new Ot(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new St(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new ye(new Qe([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.dr.forEachInRange([i,o],h=>{this.Vr(h),l.push(h.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Qe([])),i=new St(t,e),o=new St(t,e+1);let l=Ne();return this.dr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new St(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||Me(e.wr,t.wr)}static Ar(e,t){return Me(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ot(St.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new BI(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new St(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Y.resolve(h)}lookupMutationBatch(e,t){return Y.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],h=>{const f=this.Dr(h.wr);l.push(f)}),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Me);return t.forEach(o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],f=>{i=i.add(f.wr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new St(new ye(l),0);let f=new Ot(Me);return this.br.forEachWhile(y=>{const _=y.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(f=f.add(y.wr)),!0)},h),Y.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ze(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Y.forEach(t.mutations,o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new St(t,0),o=this.br.firstAfterOrEqual(i);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.Mr=e,this.docs=function(){return new nt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=zr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))}),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=zr();const h=t.path,f=new ye(h.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:_,value:{document:E}}=y.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||oI(iI(E),i)<=0||(o.has(E.key)||oc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te()}Or(e,t){return Y.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new IS(this)}getSize(e){return Y.resolve(this.size)}}class IS extends gS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),Y.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.persistence=e,this.Nr=new Co(t=>Yd(t),Jd),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rf,this.targetCount=0,this.kr=xo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,o)=>t(o)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new xo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Kn(t),Y.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),Y.waitFor(l).next(()=>o)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Hd(0),this.Kr=!1,this.Kr=!0,this.$r=new ES,this.referenceDelegate=e(this),this.Ur=new SS(this),this.indexManager=new pS,this.remoteDocumentCache=function(o){return new xS(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new dS(t),this.Gr=new _S(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new TS(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new AS(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,t){return Y.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class AS extends lI{constructor(e){super(),this.currentSequenceNumber=e}}class sf{constructor(e){this.persistence=e,this.Jr=new rf,this.Yr=null}static Zr(e){return new sf(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,i=>{const o=ye.fromPath(i);return this.ei(e,o).next(l=>{l||t.removeEntry(o,Ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Y.or([()=>Y.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new of(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ww()?8:uI($t())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Zi(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new CS;return this.Xi(e,t,h).next(f=>{if(l.result=f,this.zi)return this.es(e,t,h,f.size)})}).next(()=>l.result)}es(e,t,i,o){return i.documentReadCount<this.ji?(ya()<=be.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(ya()<=be.DEBUG&&fe("QueryEngine","Query:",co(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(ya()<=be.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):Y.resolve())}Yi(e,t){if(Pg(t))return Y.resolve(null);let i=ur(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ed(t,null,"F"),i=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=Ne(...l);return this.Ji.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,i).next(y=>{const _=this.ts(t,f);return this.ns(t,_,h,y.readTime)?this.Yi(e,Ed(t,null,"F")):this.rs(e,_,t,y)}))})))}Zi(e,t,i,o){return Pg(t)||o.isEqual(Ie.min())?Y.resolve(null):this.Ji.getDocuments(e,i).next(l=>{const h=this.ts(t,l);return this.ns(t,h,i,o)?Y.resolve(null):(ya()<=be.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),co(t)),this.rs(e,h,t,sI(o,-1)).next(f=>f))})}ts(e,t){let i=new Ot(Pv(e));return t.forEach((o,l)=>{oc(e,l)&&(i=i.add(l))}),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return ya()<=be.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",co(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ts.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new nt(Me),this._s=new Co(l=>Yd(l),Jd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function PS(r,e,t,i){return new NS(r,e,t,i)}async function Zv(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],f=[];let y=Ne();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}for(const _ of l){f.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:f}))})})}function bS(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return function(f,y,_,E){const x=_.batch,P=x.keys();let V=Y.resolve();return P.forEach($=>{V=V.next(()=>E.getEntry(y,$)).next(W=>{const b=_.docVersions.get($);ze(b!==null),W.version.compareTo(b)<0&&(x.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))})}),V.next(()=>f.mutationQueue.removeMutationBatch(y,x))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let y=Ne();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(y=y.add(f.batch.mutations[_].key));return y}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function e_(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function DS(r,e){const t=Se(r),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach((E,x)=>{const P=o.get(x);if(!P)return;f.push(t.Ur.removeMatchingKeys(l,E.removedDocuments,x).next(()=>t.Ur.addMatchingKeys(l,E.addedDocuments,x)));let V=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?V=V.withResumeToken(Vt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,i)),o=o.insert(x,V),function(W,b,q){return W.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(P,V,E)&&f.push(t.Ur.updateTargetData(l,V))});let y=zr(),_=Ne();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(OS(l,h,e.documentUpdates).next(E=>{y=E.Ps,_=E.Is})),!i.isEqual(Ie.min())){const E=t.Ur.getLastRemoteSnapshotVersion(l).next(x=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(E)}return Y.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,y,_)).next(()=>y)}).then(l=>(t.os=o,l))}function OS(r,e,t){let i=Ne(),o=Ne();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=zr();return t.forEach((f,y)=>{const _=l.get(f);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),y.isNoDocument()&&y.version.isEqual(Ie.min())?(e.removeEntry(f,y.readTime),h=h.insert(f,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),h=h.insert(f,y)):fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",y.version)}),{Ps:h,Is:o}})}function VS(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function jS(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ur.getTargetData(i,e).next(l=>l?(o=l,Y.resolve(o)):t.Ur.allocateTargetId(i).next(h=>(o=new ys(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function kd(r,e,t){const i=Se(r),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Ha(h))throw h;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Bg(r,e,t){const i=Se(r);let o=Ie.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",h=>function(y,_,E){const x=Se(y),P=x._s.get(E);return P!==void 0?Y.resolve(x.os.get(P)):x.Ur.getTargetData(_,E)}(i,h,ur(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,f.targetId).next(y=>{l=y})}).next(()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:Ne())).next(f=>(LS(i,AI(e),f),{documents:f,Ts:l})))}function LS(r,e,t){let i=r.us.get(e)||Ie.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.us.set(e,i)}class $g{constructor(){this.activeTargetIds=DI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MS{constructor(){this.so=new $g,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $g,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function nd(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class BS extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,h){const f=nd(),y=this.xo(t,i.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${f}:`,y,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,l,h),this.No(t,y,_,o).then(E=>(fe("RestConnection",`Received RPC '${t}' ${f}: `,E),E),E=>{throw _o("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",y,"request:",o),E})}Lo(t,i,o,l,h,f){return this.Mo(t,i,o,l,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ao}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}xo(t,i){const o=US[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=nd();return new Promise((h,f)=>{const y=new fv;y.setWithCredentials(!0),y.listenOnce(pv.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Cu.NO_ERROR:const E=y.getResponseJson();fe(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Cu.TIMEOUT:fe(Ut,`RPC '${e}' ${l} timed out`),f(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const x=y.getStatus();if(fe(Ut,`RPC '${e}' ${l} failed with status:`,x,"response text:",y.getResponseText()),x>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=P?.error;if(V&&V.status&&V.message){const $=function(b){const q=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(q)>=0?q:K.UNKNOWN}(V.status);f(new ce($,V.message))}else f(new ce(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new ce(K.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{fe(Ut,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(o);fe(Ut,`RPC '${e}' ${l} sending request:`,o),y.send(t,"POST",_,i,15)})}Bo(e,t,i){const o=nd(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=yv(),f=gv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");fe(Ut,`Creating RPC '${e}' stream ${o}: ${E}`,y);const x=h.createWebChannel(E,y);let P=!1,V=!1;const $=new zS({Io:b=>{V?fe(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(P||(fe(Ut,`Opening RPC '${e}' stream ${o} transport.`),x.open(),P=!0),fe(Ut,`RPC '${e}' stream ${o} sending:`,b),x.send(b))},To:()=>x.close()}),W=(b,q,ne)=>{b.listen(q,ae=>{try{ne(ae)}catch(oe){setTimeout(()=>{throw oe},0)}})};return W(x,wa.EventType.OPEN,()=>{V||(fe(Ut,`RPC '${e}' stream ${o} transport opened.`),$.yo())}),W(x,wa.EventType.CLOSE,()=>{V||(V=!0,fe(Ut,`RPC '${e}' stream ${o} transport closed`),$.So())}),W(x,wa.EventType.ERROR,b=>{V||(V=!0,_o(Ut,`RPC '${e}' stream ${o} transport errored:`,b),$.So(new ce(K.UNAVAILABLE,"The operation could not be completed")))}),W(x,wa.EventType.MESSAGE,b=>{var q;if(!V){const ne=b.data[0];ze(!!ne);const ae=ne,oe=ae.error||((q=ae[0])===null||q===void 0?void 0:q.error);if(oe){fe(Ut,`RPC '${e}' stream ${o} received error:`,oe);const he=oe.status;let X=function(C){const A=ft[C];if(A!==void 0)return $v(A)}(he),R=oe.message;X===void 0&&(X=K.INTERNAL,R="Unknown error status: "+he+" with message "+oe.message),V=!0,$.So(new ce(X,R)),x.close()}else fe(Ut,`RPC '${e}' stream ${o} received:`,ne),$.bo(ne)}}),W(f,mv.STAT_EVENT,b=>{b.stat===md.PROXY?fe(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===md.NOPROXY&&fe(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.wo()},0),$}}function rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(r){return new XI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,i,o,l,h,f,y){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===t&&this.P_(i,o)},i=>{e(()=>{const o=new ce(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $S extends n_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=tS(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?hr(h.readTime):Ie.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Sd(this.serializer),t.addTarget=function(l,h){let f;const y=h.target;if(f=_d(y)?{documents:sS(l,y)}:{query:iS(l,y)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Hv(l,h.resumeToken);const _=Td(l,h.expectedCount);_!==null&&(f.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Ku(l,h.snapshotVersion.toTimestamp());const _=Td(l,h.expectedCount);_!==null&&(f.expectedCount=_)}return f}(this.serializer,e);const i=aS(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Sd(this.serializer),t.removeTarget=e,this.a_(t)}}class WS extends n_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=rS(e.writeResults,e.commitTime),i=hr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Sd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>nS(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Mo(e,xd(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(K.UNKNOWN,l.toString())})}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Lo(e,xd(t,i),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(K.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ur(t),this.D_=!1):fe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{i.enqueueAndForget(async()=>{wi(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await async function(y){const _=Se(y);_.L_.add(4),await Ya(_),_.q_.set("Unknown"),_.L_.delete(4),await hc(_)}(this))})}),this.q_=new HS(i,o)}}async function hc(r){if(wi(r))for(const e of r.B_)await e(!0)}async function Ya(r){for(const e of r.B_)await e(!1)}function r_(r,e){const t=Se(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),cf(t)?uf(t):Ro(t).r_()&&lf(t,e))}function af(r,e){const t=Se(r),i=Ro(t);t.N_.delete(e),i.r_()&&s_(t,e),t.N_.size===0&&(i.r_()?i.o_():wi(t)&&t.q_.set("Unknown"))}function lf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ro(r).A_(e)}function s_(r,e){r.Q_.xe(e),Ro(r).R_(e)}function uf(r){r.Q_=new GI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Ro(r).start(),r.q_.v_()}function cf(r){return wi(r)&&!Ro(r).n_()&&r.N_.size>0}function wi(r){return Se(r).L_.size===0}function i_(r){r.Q_=void 0}async function GS(r){r.q_.set("Online")}async function QS(r){r.N_.forEach((e,t)=>{lf(r,e)})}async function YS(r,e){i_(r),cf(r)?(r.q_.M_(e),uf(r)):r.q_.set("Unknown")}async function JS(r,e,t){if(r.q_.set("Online"),e instanceof qv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))}(r,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gu(r,i)}else if(e instanceof Pu?r.Q_.Ke(e):e instanceof Wv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Ie.min()))try{const i=await e_(r.localStore);t.compareTo(i)>=0&&await function(l,h){const f=l.Q_.rt(h);return f.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.N_.get(_);E&&l.N_.set(_,E.withResumeToken(y.resumeToken,h))}}),f.targetMismatches.forEach((y,_)=>{const E=l.N_.get(y);if(!E)return;l.N_.set(y,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),s_(l,y);const x=new ys(E.target,y,_,E.sequenceNumber);lf(l,x)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),await Gu(r,i)}}async function Gu(r,e,t){if(!Ha(e))throw e;r.L_.add(1),await Ya(r),r.q_.set("Offline"),t||(t=()=>e_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await hc(r)})}function o_(r,e){return e().catch(t=>Gu(r,t,e))}async function dc(r){const e=Se(r),t=Is(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XS(e);)try{const o=await VS(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,ZS(e,o)}catch(o){await Gu(e,o)}a_(e)&&l_(e)}function XS(r){return wi(r)&&r.O_.length<10}function ZS(r,e){r.O_.push(e);const t=Is(r);t.r_()&&t.V_&&t.m_(e.mutations)}function a_(r){return wi(r)&&!Is(r).n_()&&r.O_.length>0}function l_(r){Is(r).start()}async function e1(r){Is(r).p_()}async function t1(r){const e=Is(r);for(const t of r.O_)e.m_(t.mutations)}async function n1(r,e,t){const i=r.O_.shift(),o=ef.from(i,e,t);await o_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await dc(r)}async function r1(r,e){e&&Is(r).V_&&await async function(i,o){if(function(h){return qI(h)&&h!==K.ABORTED}(o.code)){const l=i.O_.shift();Is(i).s_(),await o_(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await dc(i)}}(r,e),a_(r)&&l_(r)}async function qg(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=wi(t);t.L_.add(3),await Ya(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await hc(t)}async function s1(r,e){const t=Se(r);e?(t.L_.delete(2),await hc(t)):e||(t.L_.add(2),await Ya(t),t.q_.set("Unknown"))}function Ro(r){return r.K_||(r.K_=function(t,i,o){const l=Se(t);return l.w_(),new $S(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:GS.bind(null,r),Ro:QS.bind(null,r),mo:YS.bind(null,r),d_:JS.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),cf(r)?uf(r):r.q_.set("Unknown")):(await r.K_.stop(),i_(r))})),r.K_}function Is(r){return r.U_||(r.U_=function(t,i,o){const l=Se(t);return l.w_(),new WS(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:e1.bind(null,r),mo:r1.bind(null,r),f_:t1.bind(null,r),g_:n1.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await dc(r)):(await r.U_.stop(),r.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new hf(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(r,e){if(Ur("AsyncQueue",`${e}: ${r}`),Ha(r))return new ce(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ea(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.W_=new nt(ye.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Io{constructor(e,t,i,o,l,h,f,y,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new Io(e,t,vo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class o1{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Se(t),l=o.queries;o.queries=Kg(),l.forEach((h,f)=>{for(const y of f.j_)y.onError(i)})})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function Kg(){return new Co(r=>Nv(r),ic)}async function a1(r,e){const t=Se(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new i1,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=df(h,`Initialization of query '${co(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&ff(t)}async function l1(r,e){const t=Se(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function u1(r,e){const t=Se(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.j_)f.X_(o)&&(i=!0);h.z_=o}}i&&ff(t)}function c1(r,e,t){const i=Se(r),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function ff(r){r.Y_.forEach(e=>{e.next()})}var Ad,Gg;(Gg=Ad||(Ad={})).ea="default",Gg.Cache="cache";class h1{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Io(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.key=e}}class c_{constructor(e){this.key=e}}class d1{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ne(),this.mutatedKeys=Ne(),this.Aa=Pv(e),this.Ra=new vo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Hg,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,x)=>{const P=o.get(E),V=oc(this.query,x)?x:null,$=!!P&&this.mutatedKeys.has(P.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let b=!1;P&&V?P.data.isEqual(V.data)?$!==W&&(i.track({type:3,doc:V}),b=!0):this.ga(P,V)||(i.track({type:2,doc:V}),b=!0,(y&&this.Aa(V,y)>0||_&&this.Aa(V,_)<0)&&(f=!0)):!P&&V?(i.track({type:0,doc:V}),b=!0):P&&!V&&(i.track({type:1,doc:P}),b=!0,(y||_)&&(f=!0)),b&&(V?(h=h.add(V),l=W?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{Ra:h,fa:i,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((E,x)=>function(V,$){const W=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return W(V)-W($)}(E.type,x.type)||this.Aa(E.doc,x.doc)),this.pa(i),o=o!=null&&o;const f=t&&!o?this.ya():[],y=this.da.size===0&&this.current&&!o?1:0,_=y!==this.Ea;return this.Ea=y,h.length!==0||_?{snapshot:new Io(this.query,e.Ra,l,h,e.mutatedKeys,y===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ne(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new c_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new u_(i))}),t}ba(e){this.Ta=e.Ts,this.da=Ne();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Io.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class f1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class p1{constructor(e){this.key=e,this.va=!1}}class m1{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Co(f=>Nv(f),ic),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(ye.comparator),this.Na=new Map,this.La=new rf,this.Ba={},this.ka=new Map,this.qa=xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function g1(r,e,t=!0){const i=g_(r);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await h_(i,e,t,!0),o}async function y1(r,e){const t=g_(r);await h_(t,e,!0,!1)}async function h_(r,e,t,i){const o=await jS(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await v1(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&r_(r.remoteStore,o),f}async function v1(r,e,t,i,o){r.Ka=(x,P,V)=>async function(W,b,q,ne){let ae=b.view.ma(q);ae.ns&&(ae=await Bg(W.localStore,b.query,!1).then(({documents:R})=>b.view.ma(R,ae)));const oe=ne&&ne.targetChanges.get(b.targetId),he=ne&&ne.targetMismatches.get(b.targetId)!=null,X=b.view.applyChanges(ae,W.isPrimaryClient,oe,he);return Yg(W,b.targetId,X.wa),X.snapshot}(r,x,P,V);const l=await Bg(r.localStore,e,!0),h=new d1(e,l.Ts),f=h.ma(l.documents),y=Qa.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(f,r.isPrimaryClient,y);Yg(r,t,_.wa);const E=new f1(e,t,h);return r.Fa.set(e,E),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),_.snapshot}async function _1(r,e,t){const i=Se(r),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter(h=>!ic(h,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await kd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&af(i.remoteStore,o.targetId),Cd(i,o.targetId)}).catch(qa)):(Cd(i,o.targetId),await kd(i.localStore,o.targetId,!0))}async function w1(r,e){const t=Se(r),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),af(t.remoteStore,i.targetId))}async function E1(r,e,t){const i=C1(r);try{const o=await function(h,f){const y=Se(h),_=vt.now(),E=f.reduce((V,$)=>V.add($.key),Ne());let x,P;return y.persistence.runTransaction("Locally write mutations","readwrite",V=>{let $=zr(),W=Ne();return y.cs.getEntries(V,E).next(b=>{$=b,$.forEach((q,ne)=>{ne.isValidDocument()||(W=W.add(q))})}).next(()=>y.localDocuments.getOverlayedDocuments(V,$)).next(b=>{x=b;const q=[];for(const ne of f){const ae=UI(ne,x.get(ne.key).overlayedDocument);ae!=null&&q.push(new As(ne.key,ae,Tv(ae.value.mapValue),cr.exists(!0)))}return y.mutationQueue.addMutationBatch(V,_,q,f)}).next(b=>{P=b;const q=b.applyToLocalDocumentSet(x,W);return y.documentOverlayCache.saveOverlays(V,b.batchId,q)})}).then(()=>({batchId:P.batchId,changes:Dv(x)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,f,y){let _=h.Ba[h.currentUser.toKey()];_||(_=new nt(Me)),_=_.insert(f,y),h.Ba[h.currentUser.toKey()]=_}(i,o.batchId,t),await Ja(i,o.changes),await dc(i.remoteStore)}catch(o){const l=df(o,"Failed to persist write");t.reject(l)}}async function d_(r,e){const t=Se(r);try{const i=await DS(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Na.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?ze(h.va):o.removedDocuments.size>0&&(ze(h.va),h.va=!1))}),await Ja(t,i,e)}catch(i){await qa(i)}}function Qg(r,e,t){const i=Se(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach((l,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const y=Se(h);y.onlineState=f;let _=!1;y.queries.forEach((E,x)=>{for(const P of x.j_)P.Z_(f)&&(_=!0)}),_&&ff(y)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function T1(r,e,t){const i=Se(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let h=new nt(ye.comparator);h=h.insert(l,Bt.newNoDocument(l,Ie.min()));const f=Ne().add(l),y=new uc(Ie.min(),new Map,new nt(Me),h,f);await d_(i,y),i.Oa=i.Oa.remove(l),i.Na.delete(e),pf(i)}else await kd(i.localStore,e,!1).then(()=>Cd(i,e,t)).catch(qa)}async function x1(r,e){const t=Se(r),i=e.batch.batchId;try{const o=await bS(t.localStore,e);p_(t,i,null),f_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ja(t,o)}catch(o){await qa(o)}}async function I1(r,e,t){const i=Se(r);try{const o=await function(h,f){const y=Se(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return y.mutationQueue.lookupMutationBatch(_,f).next(x=>(ze(x!==null),E=x.keys(),y.mutationQueue.removeMutationBatch(_,x))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,E,f)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>y.localDocuments.getDocuments(_,E))})}(i.localStore,e);p_(i,e,t),f_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ja(i,o)}catch(o){await qa(o)}}function f_(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function p_(r,e,t){const i=Se(r);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Cd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(i=>{r.La.containsKey(i)||m_(r,i)})}function m_(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(af(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),pf(r))}function Yg(r,e,t){for(const i of t)i instanceof u_?(r.La.addReference(i.key,e),S1(r,i)):i instanceof c_?(fe("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||m_(r,i.key)):Te()}function S1(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(fe("SyncEngine","New document in limbo: "+t),r.xa.add(i),pf(r))}function pf(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ye(Qe.fromString(e)),i=r.qa.next();r.Na.set(i,new p1(t)),r.Oa=r.Oa.insert(t,i),r_(r.remoteStore,new ys(ur(Xd(t.path)),i,"TargetPurposeLimboResolution",Hd.oe))}}async function Ja(r,e,t){const i=Se(r),o=[],l=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach((f,y)=>{h.push(i.Ka(y,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const x=_?!_.fromCache:(E=t?.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(_){o.push(_);const x=of.Wi(y.targetId,_);l.push(x)}}))}),await Promise.all(h),i.Ca.d_(o),await async function(y,_){const E=Se(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Y.forEach(_,P=>Y.forEach(P.$i,V=>E.persistence.referenceDelegate.addReference(x,P.targetId,V)).next(()=>Y.forEach(P.Ui,V=>E.persistence.referenceDelegate.removeReference(x,P.targetId,V)))))}catch(x){if(!Ha(x))throw x;fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of _){const P=x.targetId;if(!x.fromCache){const V=E.os.get(P),$=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion($);E.os=E.os.insert(P,W)}}}(i.localStore,l))}async function k1(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=await Zv(t.localStore,e);t.currentUser=e,function(l,h){l.ka.forEach(f=>{f.forEach(y=>{y.reject(new ce(K.CANCELLED,h))})}),l.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ja(t,i.hs)}}function A1(r,e){const t=Se(r),i=t.Na.get(e);if(i&&i.va)return Ne().add(i.key);{let o=Ne();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const f=t.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function g_(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=d_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T1.bind(null,e),e.Ca.d_=u1.bind(null,e.eventManager),e.Ca.$a=c1.bind(null,e.eventManager),e}function C1(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I1.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return PS(this.persistence,new RS,e.initialUser,this.serializer)}Ga(e){return new kS(sf.Zr,this.serializer)}Wa(e){return new MS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class Rd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=k1.bind(null,this.syncEngine),await s1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o1}()}createDatastore(e){const t=cc(e.databaseInfo.databaseId),i=function(l){return new BS(l)}(e.databaseInfo);return function(l,h,f,y){return new qS(l,h,f,y)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,f){return new KS(i,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Qg(this.syncEngine,t,0),function(){return Wg.D()?new Wg:new FS}())}createSyncEngine(e,t){return function(o,l,h,f,y,_,E){const x=new m1(o,l,h,f,y,_);return E&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);fe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Ya(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Rd.provider={build:()=>new Rd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=_v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{fe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(fe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=df(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sd(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Zv(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Jg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await P1(r);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>qg(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>qg(e.remoteStore,o)),r._onlineComponents=e}async function P1(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),await sd(r,new Qu)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await sd(r,new Qu);return r._offlineComponents}async function y_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await Jg(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await Jg(r,new Rd))),r._onlineComponents}function b1(r){return y_(r).then(e=>e.syncEngine)}async function Xg(r){const e=await y_(r),t=e.eventManager;return t.onListen=g1.bind(null,e.syncEngine),t.onUnlisten=_1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=w1.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(r,e,t){if(!t)throw new ce(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function D1(r,e,t,i){if(e===!0&&i===!0)throw new ce(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ey(r){if(!ye.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ty(r){if(ye.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function fc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function ci(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fc(r);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Qx;switch(i.type){case"firstParty":return new Zx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Zg.get(t);i&&(fe("ComponentProvider","Removing Datastore"),Zg.delete(t),i.terminate())}(this),Promise.resolve()}}function O1(r,e,t,i={}){var o;const l=(r=ci(r,pc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let f,y;if(typeof i.mockUserToken=="string")f=i.mockUserToken,y=zt.MOCK_USER;else{f=Sy(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new zt(_)}r._authCredentials=new Yx(new vv(f,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class sn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ws extends No{constructor(e,t,i){super(e,t,Xd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ye(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function ry(r,e,...t){if(r=kt(r),__("collection","path",e),r instanceof pc){const i=Qe.fromString(e,...t);return ty(i),new ws(r,null,i)}{if(!(r instanceof sn||r instanceof ws))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return ty(i),new ws(r.firestore,null,i)}}function Nd(r,e,...t){if(r=kt(r),arguments.length===1&&(e=_v.newId()),__("doc","path",e),r instanceof pc){const i=Qe.fromString(e,...t);return ey(i),new sn(r,null,new ye(i))}{if(!(r instanceof sn||r instanceof ws))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return ey(i),new sn(r.firestore,r instanceof ws?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new t_(this,"async_queue_retry"),this.Vu=()=>{const i=rd();i&&fe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ui;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ha(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(i);throw Ur("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=hf.createAndSchedule(this,e,t,i,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function iy(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ma extends pc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new sy,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,await e}}}function V1(r,e){const t=typeof r=="object"?r:Vd(),i=typeof r=="string"?r:"(default)",o=ec(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Ty("firestore");l&&O1(o,...l)}return o}function w_(r){if(r._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||j1(r),r._firestoreClient}function j1(r){var e,t,i;const o=r._freezeSettings(),l=function(f,y,_,E){return new dI(f,y,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,v_(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new N1(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const y=f?._online.build();return{_offline:f?._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Vt.fromBase64String(e))}catch(t){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new So(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=/^__.*__$/;class M1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ga(e,this.data,t,this.fieldTransforms)}}class E_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function T_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class vf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(T_(this.Cu)&&L1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class F1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||cc(e)}Qu(e,t,i,o=!1){return new vf({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _f(r){const e=r._freezeSettings(),t=cc(r._databaseId);return new F1(r._databaseId,!!e.ignoreUndefinedProperties,t)}function U1(r,e,t,i,o,l={}){const h=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);wf("Data must be an object, but it was:",h,i);const f=x_(i,h);let y,_;if(l.merge)y=new fn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const x of l.mergeFields){const P=Pd(e,x,t);if(!h.contains(P))throw new ce(K.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);S_(E,P)||E.push(P)}y=new fn(E),_=h.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,_=h.fieldTransforms;return new M1(new rn(f),y,_)}class gc extends mf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}function z1(r,e,t,i){const o=r.Qu(1,e,t);wf("Data must be an object, but it was:",o,i);const l=[],h=rn.empty();_i(i,(y,_)=>{const E=Ef(e,y,t);_=kt(_);const x=o.Nu(E);if(_ instanceof gc)l.push(E);else{const P=Xa(_,x);P!=null&&(l.push(E),h.set(E,P))}});const f=new fn(l);return new E_(h,f,o.fieldTransforms)}function B1(r,e,t,i,o,l){const h=r.Qu(1,e,t),f=[Pd(e,i,t)],y=[o];if(l.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<l.length;P+=2)f.push(Pd(e,l[P])),y.push(l[P+1]);const _=[],E=rn.empty();for(let P=f.length-1;P>=0;--P)if(!S_(_,f[P])){const V=f[P];let $=y[P];$=kt($);const W=h.Nu(V);if($ instanceof gc)_.push(V);else{const b=Xa($,W);b!=null&&(_.push(V),E.set(V,b))}}const x=new fn(_);return new E_(E,x,h.fieldTransforms)}function $1(r,e,t,i=!1){return Xa(t,r.Qu(i?4:3,e))}function Xa(r,e){if(I_(r=kt(r)))return wf("Unsupported field value:",e,r),x_(r,e);if(r instanceof mf)return function(i,o){if(!T_(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const f of i){let y=Xa(f,o.Lu(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:Ku(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ku(o.serializer,l)}}if(i instanceof gf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof So)return{bytesValue:Hv(o.serializer,i._byteString)};if(i instanceof sn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:nf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof yf)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw f.Bu("VectorValues must only contain numeric values.");return Zd(f.serializer,y)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${fc(i)}`)}(r,e)}function x_(r,e){const t={};return wv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(r,(i,o)=>{const l=Xa(o,e.Mu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function I_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof gf||r instanceof So||r instanceof sn||r instanceof mf||r instanceof yf)}function wf(r,e,t){if(!I_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=fc(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function Pd(r,e,t){if((e=kt(e))instanceof mc)return e._internalPath;if(typeof e=="string")return Ef(r,e);throw Yu("Field path arguments must be of type string or ",r,!1,void 0,t)}const W1=new RegExp("[~\\*/\\[\\]]");function Ef(r,e,t){if(e.search(W1)>=0)throw Yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new mc(...e.split("."))._internalPath}catch{throw Yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Yu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new ce(K.INVALID_ARGUMENT,f+r+y)}function S_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(A_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class q1 extends k_{data(){return super.data()}}function A_(r,e){return typeof e=="string"?Ef(r,e):e instanceof mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tf{}class K1 extends Tf{}function G1(r,e,...t){let i=[];e instanceof Tf&&i.push(e),i=i.concat(t),function(l){const h=l.filter(y=>y instanceof If).length,f=l.filter(y=>y instanceof xf).length;if(h>1||h>0&&f>0)throw new ce(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)r=o._apply(r);return r}class xf extends K1{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new xf(e,t,i)}_apply(e){const t=this._parse(e);return C_(e._query,t),new No(e.firestore,e.converter,wd(e._query,t))}_parse(e){const t=_f(e.firestore);return function(l,h,f,y,_,E,x){let P;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ay(x,E);const V=[];for(const $ of x)V.push(oy(y,l,$));P={arrayValue:{values:V}}}else P=oy(y,l,x)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ay(x,E),P=$1(f,h,x,E==="in"||E==="not-in");return pt.create(_,E,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class If extends Tf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new If(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const f=l.getFlattenedFilters();for(const y of f)C_(h,y),h=wd(h,y)}(e._query,t),new No(e.firestore,e.converter,wd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oy(r,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new ce(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rv(e)&&t.indexOf("/")!==-1)throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(i))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sg(r,new ye(i))}if(t instanceof sn)return Sg(r,t._key);throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fc(t)}.`)}function ay(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C_(r,e){const t=function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q1{convertValue(e,t="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _i(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>ut(h.doubleValue));return new yf(l)}convertGeoPoint(e){return new gf(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Gd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const t=xs(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);ze(Xv(i));const o=new Oa(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Ur(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class R_ extends k_{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(A_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class bu extends R_{data(e={}){return super.data(e)}}class J1{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bu(this._firestore,this._userDataWriter,i.key,i,new xa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const y=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const y=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return f.type!==0&&(_=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:X1(f.type),doc:y,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X1(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class N_ extends Q1{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function ly(r,e,t,...i){r=ci(r,sn);const o=ci(r.firestore,Ma),l=_f(o);let h;return h=typeof(e=kt(e))=="string"||e instanceof mc?B1(l,"updateDoc",r._key,e,t,i):z1(l,"updateDoc",r._key,e),P_(o,[h.toMutation(r._key,cr.exists(!0))])}function Z1(r,e){const t=ci(r.firestore,Ma),i=Nd(r),o=Y1(r.converter,e);return P_(t,[U1(_f(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,cr.exists(!1))]).then(()=>i)}function ek(r,...e){var t,i,o;r=kt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||iy(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(iy(e[h])){const x=e[h];e[h]=(t=x.next)===null||t===void 0?void 0:t.bind(x),e[h+1]=(i=x.error)===null||i===void 0?void 0:i.bind(x),e[h+2]=(o=x.complete)===null||o===void 0?void 0:o.bind(x)}let y,_,E;if(r instanceof sn)_=ci(r.firestore,Ma),E=Xd(r._key.path),y={next:x=>{e[h]&&e[h](tk(_,r,x))},error:e[h+1],complete:e[h+2]};else{const x=ci(r,No);_=ci(x.firestore,Ma),E=x._query;const P=new N_(_);y={next:V=>{e[h]&&e[h](new J1(_,P,x,V))},error:e[h+1],complete:e[h+2]},H1(r._query)}return function(P,V,$,W){const b=new R1(W),q=new h1(V,b,$);return P.asyncQueue.enqueueAndForget(async()=>a1(await Xg(P),q)),()=>{b.Za(),P.asyncQueue.enqueueAndForget(async()=>l1(await Xg(P),q))}}(w_(_),E,f,y)}function P_(r,e){return function(i,o){const l=new ui;return i.asyncQueue.enqueueAndForget(async()=>E1(await b1(i),o,l)),l.promise}(w_(r),e)}function tk(r,e,t){const i=t.docs.get(e._key),o=new N_(r);return new R_(r,o,e._key,i,new xa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ao=o})(yi),hi(new Es("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new Ma(new Jx(i.getProvider("auth-internal")),new tI(i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(_.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),or(wg,"4.7.3",e),or(wg,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="firebasestorage.googleapis.com",nk="storageBucket",rk=2*60*1e3,sk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends pr{constructor(e,t,i=0){super(id(e),`Firebase Storage: ${t} (${id(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return id(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var fr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fr||(fr={}));function id(r){return"storage/"+r}function ik(){const r="An unknown error occurred, please check the error payload for server response.";return new mr(fr.UNKNOWN,r)}function ok(){return new mr(fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ak(){return new mr(fr.CANCELED,"User canceled the upload/download.")}function lk(r){return new mr(fr.INVALID_URL,"Invalid URL '"+r+"'.")}function uk(r){return new mr(fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function uy(r){return new mr(fr.INVALID_ARGUMENT,r)}function D_(){return new mr(fr.APP_DELETED,"The Firebase app was deleted.")}function ck(r){return new mr(fr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=$n.makeFromUrl(e,t)}catch{return new $n(e,"")}if(i.path==="")return i;throw uk(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const h="(/(.*))?$",f=new RegExp("^gs://"+o+h,"i"),y={bucket:1,path:3};function _(oe){oe.path_=decodeURIComponent(oe.path)}const E="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",V=new RegExp(`^https?://${x}/${E}/b/${o}/o${P}`,"i"),$={bucket:1,path:3},W=t===b_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",q=new RegExp(`^https?://${W}/${o}/${b}`,"i"),ae=[{regex:f,indices:y,postModify:l},{regex:V,indices:$,postModify:_},{regex:q,indices:{bucket:1,path:2},postModify:_}];for(let oe=0;oe<ae.length;oe++){const he=ae[oe],X=he.regex.exec(e);if(X){const R=X[he.indices.bucket];let I=X[he.indices.path];I||(I=""),i=new $n(R,I),he.postModify(i);break}}if(i==null)throw lk(e);return i}}class hk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(r,e,t){let i=1,o=null,l=null,h=!1,f=0;function y(){return f===2}let _=!1;function E(...b){_||(_=!0,e.apply(null,b))}function x(b){o=setTimeout(()=>{o=null,r(V,y())},b)}function P(){l&&clearTimeout(l)}function V(b,...q){if(_){P();return}if(b){P(),E.call(null,b,...q);return}if(y()||h){P(),E.call(null,b,...q);return}i<64&&(i*=2);let ae;f===1?(f=2,ae=0):ae=(i+Math.random())*1e3,x(ae)}let $=!1;function W(b){$||($=!0,P(),!_&&(o!==null?(b||(f=2),clearTimeout(o),x(0)):b||(f=1)))}return x(0),l=setTimeout(()=>{h=!0,W(!0)},t),W}function fk(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(r){return r!==void 0}function cy(r,e,t,i){if(i<e)throw uy(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw uy(`Invalid value for '${r}'. Expected ${t} or less.`)}function mk(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ju;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ju||(Ju={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,i,o,l,h,f,y,_,E,x,P=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=f,this.errorCallback_=y,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=x,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,$)=>{this.resolve_=V,this.reject_=$,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new wu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=f=>{const y=f.loaded,_=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,_)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const f=l.getErrorCode()===Ju.NO_ERROR,y=l.getStatus();if(!f||gk(y,this.additionalRetryCodes_)&&this.retry){const E=l.getErrorCode()===Ju.ABORT;i(!1,new wu(!1,null,E));return}const _=this.successCodes_.indexOf(y)!==-1;i(!0,new wu(_,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());pk(y)?l(y):l()}catch(y){h(y)}else if(f!==null){const y=ik();y.serverResponse=f.getErrorText(),this.errorCallback_?h(this.errorCallback_(f,y)):h(y)}else if(o.canceled){const y=this.appDelete_?D_():ak();h(y)}else{const y=ok();h(y)}};this.canceled_?t(!1,new wu(!1,null,!0)):this.backoffId_=dk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wu{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function vk(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function _k(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wk(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Ek(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Tk(r,e,t,i,o,l,h=!0){const f=mk(r.urlParams),y=r.url+f,_=Object.assign({},r.headers);return wk(_,e),vk(_,t),_k(_,l),Ek(_,i),new yk(y,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Ik(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this._service=e,t instanceof $n?this._location=t:this._location=$n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xu(e,t)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ik(this._location.path)}get storage(){return this._service}get parent(){const e=xk(this._location.path);if(e===null)return null;const t=new $n(this._location.bucket,e);return new Xu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ck(e)}}function hy(r,e){const t=e?.[nk];return t==null?null:$n.makeFromBucketSpec(t,r)}function Sk(r,e,t,i={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:Sy(o,r.app.options.projectId))}class kk{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=b_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rk,this._maxUploadRetryTime=sk,this._requests=new Set,o!=null?this._bucket=$n.makeFromBucketSpec(o,this._host):this._bucket=hy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=hy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xu(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new hk(D_());{const h=Tk(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const dy="@firebase/storage",fy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="storage";function Ak(r=Vd(),e){r=kt(r);const i=ec(r,O_).getImmediate({identifier:e}),o=Ty("storage");return o&&Ck(i,...o),i}function Ck(r,e,t,i={}){Sk(r,e,t,i)}function Rk(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new kk(t,i,o,e,yi)}function Nk(){hi(new Es(O_,Rk,"PUBLIC").setMultipleInstances(!0)),or(dy,fy,""),or(dy,fy,"esm2017")}Nk();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V_=(...r)=>r.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=Z.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...f},y)=>Z.createElement("svg",{ref:y,...bk,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:V_("lucide",o),...f},[...h.map(([_,E])=>Z.createElement(_,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,e)=>{const t=Z.forwardRef(({className:i,...o},l)=>Z.createElement(Dk,{ref:l,iconNode:e,className:V_(`lucide-${Pk(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Ye("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Ye("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=Ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Ye("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=Ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=Ye("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=Ye("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=Ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Ye("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kk=({setUserId:r})=>{const[e,t]=Z.useState(!0),[i,o]=Z.useState(""),[l,h]=Z.useState(""),[f,y]=Z.useState(""),[_,E]=Z.useState(!1),x=hv(),P=async V=>{V.preventDefault(),y(""),E(!0);try{e?await VT(x,i,l):await OT(x,i,l)}catch($){y($.message)}finally{E(!1)}};return g.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex flex-col justify-center items-center p-4",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx(L_,{className:"mx-auto h-12 w-auto text-cyan-500"}),g.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e?"Sign in to your account":"Create a new account"})]}),g.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-xl rounded-2xl p-8",children:[g.jsxs("form",{className:"space-y-6",onSubmit:P,children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:V=>o(V.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:V=>h(V.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),f&&g.jsx("div",{className:"rounded-md bg-red-50 p-4",children:g.jsx("p",{className:"text-sm text-red-700",children:f})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:_,className:"flex w-full justify-center rounded-md border border-transparent bg-cyan-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-400",children:_?"Processing...":e?"Sign in":"Create account"})})]}),g.jsx("div",{className:"mt-6",children:g.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[e?"Don't have an account?":"Already have an account?",g.jsx("button",{onClick:()=>t(!e),className:"font-medium text-cyan-600 hover:text-cyan-500 ml-1",children:e?"Sign up":"Sign in"})]})})]})]})})},Gk=({title:r,data:e,columns:t,type:i,searchTerm:o,setSearchTerm:l,handleImportCSV:h,handleExportCSV:f,openModal:y,handleDelete:_,debtPayoffStrategies:E})=>g.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[g.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r}),g.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[g.jsx("input",{type:"text",placeholder:"Search...",value:o,onChange:x=>l(x.target.value),className:"w-full md:w-auto bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2 text-sm text-slate-800 dark:text-white"}),(i==="client"||i==="job"||i==="inventory"||i==="invoice")&&g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"file",id:`csv-importer-${i}`,className:"hidden",accept:".csv",onChange:x=>h(x.target.files[0],i)}),g.jsxs("label",{htmlFor:`csv-importer-${i}`,className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-500 text-white font-semibold px-3 py-2 rounded-md transition-colors cursor-pointer",children:[g.jsx(qk,{size:16})," Import CSV"]})]}),g.jsxs("button",{onClick:()=>f(e,i),className:"flex items-center gap-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[g.jsx(M_,{size:16})," Export to CSV"]}),g.jsxs("button",{onClick:()=>y(i),className:"flex items-center gap-2 text-sm bg-green-600 hover:bg-green-500 text-white font-semibold px-3 py-2 rounded-md transition-colors",children:[g.jsx(Za,{size:16})," Add New"]})]})]}),i==="debt"&&E&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 bg-slate-100 dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg text-cyan-600 dark:text-cyan-400 mb-2",children:"Avalanche Method"}),g.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-3",children:"Pay off debts with the highest interest rate first to save the most money over time."}),g.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:E.avalanche.map(x=>g.jsxs("li",{children:[x.name," ",g.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["(",x.interestRate,"%)"]})]},x.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg text-green-600 dark:text-green-400 mb-2",children:"Snowball Method"}),g.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-3",children:"Pay off debts with the smallest balance first for quick wins and motivation."}),g.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:E.snowball.map(x=>g.jsxs("li",{children:[x.name," ",g.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["($",(x.totalAmount-x.paidAmount).toFixed(2),")"]})]},x.id))})]})]}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-700",children:g.jsxs("tr",{children:[t.map(x=>g.jsx("th",{className:`p-3 ${x.className||""}`,children:x.header},x.key)),g.jsx("th",{className:"p-3 text-center",children:"Actions"})]})}),g.jsx("tbody",{className:"text-sm",children:e.map(x=>g.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 text-slate-700 dark:text-slate-200",children:[t.map(P=>g.jsx("td",{className:`p-3 ${P.className||""}`,children:P.render(x)},P.key)),g.jsxs("td",{className:"p-3 text-center",children:[g.jsx("button",{onClick:()=>y(i,x),className:"text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 mr-2",children:g.jsx(z_,{size:16})}),g.jsx("button",{onClick:()=>_(i,x.id),className:"text-slate-500 dark:text-slate-400 hover:text-red-500",children:g.jsx(B_,{size:16})})]})]},x.id))})]})})]}),Qk=({jobs:r,clients:e,openModal:t,handleDelete:i,searchTerm:o,setSearchTerm:l,handleImportCSV:h,handleExportCSV:f})=>{const y=[{key:"name",header:"Job/Client",render:_=>g.jsx("span",{className:"font-medium",children:_.name})},{key:"client",header:"Client",render:_=>g.jsx("span",{children:e.find(E=>E.id===_.clientId)?.name||"N/A"})},{key:"revenue",header:"Revenue",className:"text-right",render:_=>g.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:["$",(_.revenue||0).toFixed(2)]})},{key:"materialCost",header:"Material Cost",className:"text-right",render:_=>g.jsxs("span",{className:"font-mono text-orange-600 dark:text-orange-400",children:["$",(_.materialCost||0).toFixed(2)]})},{key:"laborCost",header:"Labor Cost",className:"text-right",render:_=>g.jsxs("span",{className:"font-mono text-orange-600 dark:text-orange-400",children:["$",(_.laborCost||0).toFixed(2)]})},{key:"netProfit",header:"Net Profit",className:"text-right font-bold",render:_=>g.jsxs("span",{className:"font-mono text-cyan-600 dark:text-cyan-400",children:["$",((_.revenue||0)-(_.materialCost||0)-(_.laborCost||0)).toFixed(2)]})}];return g.jsx(Gk,{title:"Job Profitability",data:r,columns:y,type:"job",searchTerm:o,setSearchTerm:l,handleImportCSV:h,handleExportCSV:f,openModal:t,handleDelete:i})},Yk=({currentView:r,setCurrentView:e,onAddOrderClick:t})=>g.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[r!=="dashboard"?g.jsx("button",{onClick:()=>e("dashboard"),className:"p-2 rounded-full hover:bg-gray-100",children:g.jsx(Ok,{size:24})}):g.jsx(Af,{className:"h-8 w-8 text-blue-600"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HVAC Dispatch"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>e("billing"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(M_,{size:20})," Billing"]}),g.jsxs("button",{onClick:()=>e("reporting"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(Vk,{size:20})," Reporting"]}),g.jsxs("button",{onClick:()=>e("route"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(Uk,{size:20})," Route"]}),g.jsxs("button",{onClick:()=>e("dispatch"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(Sf,{size:20})," Dispatch"]}),g.jsxs("button",{onClick:()=>e("customers"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(Hk,{size:20})," Customers"]}),g.jsxs("button",{onClick:()=>e("technicians"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx(kf,{size:20})," Technicians"]}),g.jsxs("button",{onClick:t,className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[g.jsx(Za,{size:20})," Add Work Order"]})]})]})})}),Jk=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,Xk=r=>{const e=Jk(r);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},Zk=r=>{if(!r)return"";const[e,t]=r.split(":"),i=parseInt(e,10),o=i>=12?"PM":"AM";return`${(i+11)%12+1}:${t} ${o}`},py=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",eA=r=>({completed:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800",open:"bg-yellow-100 text-yellow-800","in progress":"bg-purple-100 text-purple-800","on hold":"bg-pink-100 text-pink-800",cancelled:"bg-red-100 text-red-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",tA=({order:r,onSelectOrder:e})=>g.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden border-l-4",style:{borderColor:py(r.Priority).borderColor},children:[g.jsxs("div",{className:"p-5",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded-full ${py(r.Priority)}`,children:r.Priority}),g.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${eA(r["Order Status"])}`,children:r["Order Status"]})]}),g.jsxs("p",{className:"text-xs text-gray-500 font-semibold mt-3 flex items-center",children:[g.jsx(j_,{size:12,className:"mr-1.5"})," ",r.Client]}),g.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:[r.Company," - #",r["Loc #"]]}),g.jsx("p",{className:"text-sm text-gray-500 font-medium",children:r.Task}),g.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(kf,{className:"w-4 h-4 mr-2 text-gray-400"}),g.jsx("span",{children:r.technician?.join(", ")||"Unassigned"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx(Sf,{className:"w-4 h-4 mr-2 text-gray-400"}),g.jsxs("span",{children:["Scheduled: ",Xk(r["Schedule Date"])||"Not Set"," ",r.startTime&&`(${Zk(r.startTime)})`]})]}),r.clientWO&&g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"font-bold mr-2",children:"Client WO:"}),g.jsx("span",{children:r.clientWO})]})]})]}),g.jsx("div",{className:"bg-gray-50 px-5 py-3",children:g.jsx("button",{onClick:()=>e(r),className:"w-full text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors",children:"View Details"})})]}),nA=({orders:r,onSelectOrder:e,searchTerm:t,setSearchTerm:i,statusFilter:o,setStatusFilter:l})=>g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"relative md:col-span-2",children:[g.jsx($k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by WO#, Client, Location, Tech...",value:t,onChange:h=>i(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),g.jsxs("div",{className:"relative",children:[g.jsx(Mk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),g.jsxs("select",{value:o,onChange:h=>l(h.target.value),className:"w-full appearance-none pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[g.jsx("option",{children:"All"}),g.jsx("option",{children:"Open"}),g.jsx("option",{children:"Scheduled"}),g.jsx("option",{children:"In Progress"}),g.jsx("option",{children:"On Hold"}),g.jsx("option",{children:"Completed"}),g.jsx("option",{children:"Cancelled"})]}),g.jsx(Lk,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:20})]})]})}),r.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(h=>g.jsx(tA,{order:h,onSelectOrder:e},h.id))}):g.jsxs("div",{className:"text-center py-16 px-6 bg-white rounded-lg shadow-sm",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No Work Orders Found"}),g.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or filter criteria."})]})]}),rA=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,sA=r=>r?r.getTime()/864e5+25569:null,iA=r=>{const e=rA(r);return e?e.toISOString().split("T")[0]:""},oA=r=>r?sA(new Date(r+"T00:00:00")):null,my=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",aA=r=>({available:"bg-green-100 text-green-800","on site":"bg-blue-100 text-blue-800","en route":"bg-yellow-100 text-yellow-800","on break":"bg-gray-100 text-gray-800","on call":"bg-teal-100 text-teal-800","day off":"bg-slate-200 text-slate-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",lA=({workOrders:r,technicians:e,onSelectOrder:t,onUpdateOrder:i})=>{const[o,l]=Z.useState(new Date().toISOString().split("T")[0]),h=Array.from({length:13},(b,q)=>q+7),f=e.filter(b=>b.name!=="Unassigned"),y=b=>{const q=f.findIndex(ne=>ne.name===b);return q===-1?-1:q+2},_=b=>{if(!b)return 0;const[q,ne]=b.split(":").map(Number);return isNaN(q)||isNaN(ne)?0:(q-7)*4+ne/15+2},E=r.filter(b=>iA(b["Schedule Date"])===o&&b.startTime&&b.endTime&&b.technician?.length>0),x=r.filter(b=>b["Order Status"]==="Open"||!b.technician||b.technician.length===0).sort((b,q)=>{const ne={Emergency:1,Urgent:2,Regular:3,Low:4};return(ne[b.Priority]||5)-(ne[q.Priority]||5)}),P=(b,q)=>{b.dataTransfer.setData("workOrder",JSON.stringify(q))},V=(b,q,ne)=>{b.preventDefault();const ae=JSON.parse(b.dataTransfer.getData("workOrder")),oe=ne,he=`${String(parseInt(ne.split(":")[0])+2).padStart(2,"0")}:${ne.split(":")[1]}`;i(ae.id,{...ae,technician:[q],"Schedule Date":oA(o),startTime:oe,endTime:he,"Order Status":"Scheduled"})},$=b=>{b.preventDefault();const q=JSON.parse(b.dataTransfer.getData("workOrder"));i(q.id,{...q,technician:[],"Schedule Date":null,startTime:null,endTime:null,"Order Status":"Open"})},W=b=>b.preventDefault();return g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dispatch Board"}),g.jsx("input",{type:"date",value:o,onChange:b=>l(b.target.value),className:"p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("div",{className:"w-1/4 bg-white p-4 rounded-lg shadow-sm",onDrop:$,onDragOver:W,children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:"Unassigned Jobs"}),g.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:x.map(b=>g.jsxs("div",{draggable:!0,onDragStart:q=>P(q,b),className:`p-2 border-l-4 rounded cursor-grab ${my(b.Priority)}`,children:[g.jsx("p",{className:"font-bold text-sm",children:b.Company}),g.jsx("p",{className:"text-xs text-gray-600",children:b.Task})]},b.id))})]}),g.jsx("div",{className:"w-3/4 bg-white p-4 rounded-lg shadow-sm overflow-x-auto",children:g.jsxs("div",{className:"grid gap-px bg-gray-200 min-w-max",style:{gridTemplateColumns:`60px repeat(${f.length}, minmax(200px, 1fr))`,gridTemplateRows:`auto repeat(${h.length*4}, 20px)`},children:[g.jsx("div",{className:"bg-gray-100 sticky top-0 z-10"}),f.map(b=>g.jsxs("div",{className:"bg-gray-100 text-center font-bold p-2 sticky top-0 z-10 flex flex-col",children:[g.jsx("span",{children:b.name}),g.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full mt-1 ${aA(b.status)}`,children:b.status})]},b.id)),h.map(b=>g.jsxs(Du.Fragment,{children:[g.jsxs("div",{className:"row-start-auto bg-gray-50 text-right pr-2 text-xs text-gray-500 -translate-y-2 sticky left-0 z-10",style:{gridRow:(b-7)*4+2},children:[b>12?b-12:b,":00 ",b>=12?"PM":"AM"]}),f.map((q,ne)=>g.jsx(Du.Fragment,{children:Array.from({length:4}).map((ae,oe)=>g.jsx("div",{onDrop:he=>V(he,q.name,`${String(b).padStart(2,"0")}:${String(oe*15).padStart(2,"0")}`),onDragOver:W,className:"border-t border-gray-200",style:{gridRow:(b-7)*4+oe+2,gridColumn:ne+2}},`${q.id}-${b}-${oe}`))},q.id))]},b)),E.flatMap(b=>b.technician.map(q=>{const ne=y(q),ae=_(b.startTime),oe=_(b.endTime);return ne<0||!ae||!oe||oe<=ae?null:g.jsxs("div",{draggable:!0,onDragStart:he=>P(he,b),className:`p-2 m-px rounded-lg text-xs cursor-grab overflow-hidden ${my(b.Priority)}`,style:{gridColumn:ne,gridRow:`${ae} / ${oe}`},onClick:()=>t(b),children:[g.jsx("p",{className:"font-bold truncate",children:b.Company}),g.jsx("p",{className:"truncate",children:b.Task})]},`${b.id}-${q}`)}))]})})]})]})},uA=r=>({"national account":"bg-blue-100 text-blue-800",commercial:"bg-purple-100 text-purple-800",residential:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",cA=({onClose:r,onAddCustomer:e})=>{const[t,i]=Z.useState(""),[o,l]=Z.useState("Commercial"),[h,f]=Z.useState(""),[y,_]=Z.useState(""),[E,x]=Z.useState(""),[P,V]=Z.useState(""),[$,W]=Z.useState(""),[b,q]=Z.useState("MI"),[ne,ae]=Z.useState(""),oe=he=>{if(he.preventDefault(),!t.trim()){alert("Customer name cannot be empty.");return}e({name:t,type:o,contact:{name:h,email:y,phone:E},billingAddress:{street:P,city:$,state:b,zip:ne},locations:[]}),r()};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:oe,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Customer"})}),g.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Name"}),g.jsx("input",{type:"text",value:t,onChange:he=>i(he.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Type"}),g.jsxs("select",{value:o,onChange:he=>l(he.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Commercial"}),g.jsx("option",{children:"Residential"}),g.jsx("option",{children:"National Account"}),g.jsx("option",{children:"Maintenance"})]})]})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("h3",{className:"font-semibold",children:"Primary Contact"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Name"}),g.jsx("input",{value:h,onChange:he=>f(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Email"}),g.jsx("input",{value:y,onChange:he=>_(he.target.value),type:"email",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Phone"}),g.jsx("input",{value:E,onChange:he=>x(he.target.value),type:"tel",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("h3",{className:"font-semibold",children:"Billing Address"}),g.jsxs("div",{className:"mt-2",children:[g.jsx("label",{className:"text-xs",children:"Street"}),g.jsx("input",{value:P,onChange:he=>V(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"City"}),g.jsx("input",{value:$,onChange:he=>W(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"State"}),g.jsx("input",{value:b,onChange:he=>q(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Zip"}),g.jsx("input",{value:ne,onChange:he=>ae(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:r,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Save Customer"})]})]})})},hA=({customer:r,onClose:e,onUpdateCustomer:t})=>{const[i,o]=Z.useState(r),l=(f,y=null)=>{const{name:_,value:E}=f.target;o(y?x=>({...x,[y]:{...x[y],[_]:E}}):x=>({...x,[_]:E}))},h=f=>{f.preventDefault(),t(i),e()};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:h,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Customer"})}),g.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Name"}),g.jsx("input",{type:"text",name:"name",value:i.name,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Type"}),g.jsxs("select",{name:"type",value:i.type,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Commercial"}),g.jsx("option",{children:"Residential"}),g.jsx("option",{children:"National Account"}),g.jsx("option",{children:"Maintenance"})]})]})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("h3",{className:"font-semibold",children:"Primary Contact"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Name"}),g.jsx("input",{name:"name",value:i.contact.name,onChange:f=>l(f,"contact"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Email"}),g.jsx("input",{name:"email",value:i.contact.email,onChange:f=>l(f,"contact"),type:"email",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Phone"}),g.jsx("input",{name:"phone",value:i.contact.phone,onChange:f=>l(f,"contact"),type:"tel",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("h3",{className:"font-semibold",children:"Billing Address"}),g.jsxs("div",{className:"mt-2",children:[g.jsx("label",{className:"text-xs",children:"Street"}),g.jsx("input",{name:"street",value:i.billingAddress.street,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"City"}),g.jsx("input",{name:"city",value:i.billingAddress.city,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"State"}),g.jsx("input",{name:"state",value:i.billingAddress.state,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs",children:"Zip"}),g.jsx("input",{name:"zip",value:i.billingAddress.zip,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},dA=({customer:r,onClose:e,onAddLocation:t})=>{const[i,o]=Z.useState(""),[l,h]=Z.useState(""),[f,y]=Z.useState(""),[_,E]=Z.useState("MI"),x=P=>{if(P.preventDefault(),!i.trim()){alert("Location name cannot be empty.");return}t(r.id,{name:i,locNum:l,city:f,state:_}),e()};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:x,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Add Location to ",r.name]})}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location Name"}),g.jsx("input",{type:"text",value:i,onChange:P=>o(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location #"}),g.jsx("input",{type:"text",value:l,onChange:P=>h(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"City"}),g.jsx("input",{type:"text",value:f,onChange:P=>y(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"State"}),g.jsx("input",{type:"text",value:_,onChange:P=>E(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Add Location"})]})]})})},fA=({customers:r,onAddCustomer:e,onUpdateCustomer:t,onAddLocation:i})=>{const[o,l]=Z.useState(!1),[h,f]=Z.useState(null),[y,_]=Z.useState(null);return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Customer Management"}),g.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[g.jsx(Za,{size:20})," Add New Customer"]})]}),g.jsx("div",{className:"space-y-4",children:r.map(E=>g.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900",children:E.name}),g.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${uA(E.type)}`,children:E.type})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>f(E),className:"text-sm text-blue-600 hover:underline",children:"Edit Details"}),g.jsx("button",{onClick:()=>_(E),className:"text-sm text-green-600 hover:underline",children:"Add Location"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.jsxs("div",{className:"text-sm",children:[g.jsx("p",{className:"font-semibold text-gray-600",children:"Primary Contact"}),g.jsxs("p",{className:"flex items-center gap-2",children:[g.jsx(kf,{size:14})," ",E.contact.name]}),g.jsxs("p",{className:"flex items-center gap-2",children:[g.jsx(F_,{size:14})," ",E.contact.email]}),g.jsxs("p",{className:"flex items-center gap-2",children:[g.jsx(U_,{size:14})," ",E.contact.phone]})]}),g.jsxs("div",{className:"text-sm",children:[g.jsx("p",{className:"font-semibold text-gray-600",children:"Billing Address"}),g.jsx("p",{children:E.billingAddress.street}),g.jsxs("p",{children:[E.billingAddress.city,", ",E.billingAddress.state," ",E.billingAddress.zip]})]})]}),g.jsxs("div",{className:"mt-3 pt-3 border-t",children:[g.jsxs("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:["Service Locations (",E.locations.length,")"]}),g.jsx("div",{className:"pl-4 border-l-2 space-y-1",children:E.locations.map((x,P)=>g.jsxs("div",{className:"text-sm text-gray-700",children:[g.jsx("span",{className:"font-semibold",children:x.name})," (#",x.locNum,") - ",x.city,", ",x.state]},`${x.name}-${x.locNum}-${P}`))})]})]},E.id))}),o&&g.jsx(cA,{onAddCustomer:e,onClose:()=>l(!1)}),h&&g.jsx(hA,{customer:h,onUpdateCustomer:t,onClose:()=>f(null)}),y&&g.jsx(dA,{customer:y,onAddLocation:i,onClose:()=>_(null)})]})},pA=({onClose:r,onAdd:e})=>{const[t,i]=Z.useState(""),[o,l]=Z.useState(""),[h,f]=Z.useState(""),y=_=>{_.preventDefault(),t.trim()&&(e({name:t,email:o,phone:h,status:"Available"}),r())};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:y,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Technician"})}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Name"}),g.jsx("input",{type:"text",value:t,onChange:_=>i(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Email"}),g.jsx("input",{type:"email",value:o,onChange:_=>l(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Phone"}),g.jsx("input",{type:"tel",value:h,onChange:_=>f(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:r,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Save Technician"})]})]})})},mA=({technician:r,onClose:e,onUpdate:t})=>{const[i,o]=Z.useState(r),l=f=>o(y=>({...y,[f.target.name]:f.target.value})),h=f=>{f.preventDefault(),t(i),e()};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:h,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Technician"})}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Name"}),g.jsx("input",{type:"text",name:"name",value:i.name,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Email"}),g.jsx("input",{type:"email",name:"email",value:i.email,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Phone"}),g.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Status"}),g.jsxs("select",{name:"status",value:i.status,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Available"}),g.jsx("option",{children:"En Route"}),g.jsx("option",{children:"On Site"}),g.jsx("option",{children:"On Break"}),g.jsx("option",{children:"On Call"}),g.jsx("option",{children:"Day Off"})]})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},gA=({technicians:r,onAddTechnician:e,onUpdateTechnician:t,onDeleteTechnician:i})=>{const[o,l]=Z.useState(!1),[h,f]=Z.useState(null);return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Technician Management"}),g.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[g.jsx(Za,{size:20})," Add New Technician"]})]}),g.jsx("div",{className:"space-y-4",children:r.map(y=>g.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900",children:y.name}),g.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-4 mt-1",children:[g.jsxs("span",{className:"flex items-center gap-1.5",children:[g.jsx(F_,{size:14})," ",y.email]}),g.jsxs("span",{className:"flex items-center gap-1.5",children:[g.jsx(U_,{size:14})," ",y.phone]})]})]}),y.name!=="Unassigned"&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>f(y),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:g.jsx(z_,{size:16})}),g.jsx("button",{onClick:()=>i(y.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:g.jsx(B_,{size:16})})]})]},y.id))}),o&&g.jsx(pA,{onAdd:e,onClose:()=>l(!1)}),h&&g.jsx(mA,{technician:h,onUpdate:t,onClose:()=>f(null)})]})},W_=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,yA=r=>{const e=W_(r);return e?e.toISOString().split("T")[0]:""},Eu=r=>{if(!r)return"";const[e,t]=r.split(":"),i=parseInt(e,10),o=i>=12?"PM":"AM";return`${(i+11)%12+1}:${t} ${o}`},vA=({workOrders:r,technicians:e})=>{const[t,i]=Z.useState("ALL"),[o,l]=Z.useState("today"),[h,f]=Z.useState(new Date().toISOString().split("T")[0]),[y,_]=Z.useState(new Date().toISOString().split("T")[0]),E=Z.useMemo(()=>{let V=new Date,$=new Date;switch(o){case"today":V.setHours(0,0,0,0),$.setHours(23,59,59,999);break;case"3-day":V.setHours(0,0,0,0),$.setDate(V.getDate()+2),$.setHours(23,59,59,999);break;case"week":const q=V.getDay();V.setDate(V.getDate()-q),V.setHours(0,0,0,0),$.setDate(V.getDate()+6),$.setHours(23,59,59,999);break;case"custom":V=new Date(h+"T00:00:00"),$=new Date(y+"T23:59:59");break}const W=r.filter(q=>{const ne=W_(q["Schedule Date"]);return ne&&ne>=V&&ne<=$}),b=e.find(q=>q.id===t)?.name;return t!=="ALL"?W.filter(q=>q.technician.includes(b)).sort((q,ne)=>(q.startTime||"").localeCompare(ne.startTime||"")):W.sort((q,ne)=>(q.startTime||"").localeCompare(ne.startTime||""))},[t,r,e,o,h,y]),x=Z.useMemo(()=>E.reduce((V,$)=>{const W=yA($["Schedule Date"]);return V[W]||(V[W]={}),$.technician.forEach(b=>{V[W][b]||(V[W][b]=[]),V[W][b].push($)}),V},{}),[E]),P=()=>window.print();return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 print:hidden",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Route Planning"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("select",{value:o,onChange:V=>l(V.target.value),className:"p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{value:"today",children:"Today"}),g.jsx("option",{value:"3-day",children:"Next 3 Days"}),g.jsx("option",{value:"week",children:"This Week"}),g.jsx("option",{value:"custom",children:"Custom Range"})]}),o==="custom"&&g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"date",value:h,onChange:V=>f(V.target.value),className:"p-2 border border-gray-300 rounded-lg"}),g.jsx("input",{type:"date",value:y,onChange:V=>_(V.target.value),className:"p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("select",{value:t,onChange:V=>i(V.target.value==="ALL"?"ALL":Number(V.target.value)),className:"p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{value:"ALL",children:"All Technicians"}),e.filter(V=>V.name!=="Unassigned").map(V=>g.jsx("option",{value:V.id,children:V.name},V.id))]}),g.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700",children:[g.jsx(Bk,{size:20})," Print Route"]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-1 print:col-span-3",children:[g.jsx("h3",{className:"font-bold text-lg mb-2",children:"Job Order"}),Object.keys(x).length>0?Object.entries(x).map(([V,$])=>g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"font-bold text-xl mb-2 p-2 bg-gray-200 rounded-md sticky top-20",children:new Date(V+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries($).map(([W,b])=>g.jsxs("div",{className:"mb-4",children:[t==="ALL"&&g.jsx("h5",{className:"font-bold text-md mb-2 p-2 bg-gray-100 rounded-md",children:W}),g.jsx("div",{className:"space-y-2",children:b.map((q,ne)=>g.jsxs("div",{className:"p-3 border rounded-lg flex items-center gap-4",children:[g.jsx("span",{className:"text-xl font-bold text-gray-400",children:ne+1}),g.jsxs("div",{children:[g.jsxs("p",{className:"font-bold",children:[Eu(q.startTime)," - ",Eu(q.endTime)]}),g.jsxs("p",{children:[q.Company," - ",q.City]}),g.jsx("p",{className:"text-sm text-gray-600",children:q.Task})]})]},q.id))})]},W))]},V)):g.jsx("p",{children:"No jobs scheduled for this selection."})]}),g.jsx("div",{className:"md:col-span-2 bg-gray-200 rounded-lg flex items-center justify-center h-96 print:hidden",children:g.jsx("p",{className:"text-gray-500",children:"Map Placeholder"})})]}),g.jsx("style",{children:"@media print { body * { visibility: hidden; } .print-container, .print-container * { visibility: visible; } .print-container { position: absolute; left: 0; top: 0; width: 100%; } }"}),g.jsxs("div",{className:"print-container hidden print:block",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Route for ",t==="ALL"?"All Technicians":e.find(V=>V.id===t)?.name," on ",new Date(h+"T00:00:00").toLocaleDateString()]}),Object.entries(x).map(([V,$])=>g.jsxs("div",{className:"mb-4",children:[g.jsx("h3",{className:"font-bold text-lg mt-4 border-t pt-2",children:new Date(V+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries($).map(([W,b])=>g.jsxs("div",{className:"mb-2",children:[g.jsx("h4",{className:"font-semibold text-md mt-2",children:W}),b.map((q,ne)=>g.jsxs("div",{className:"p-2 border-b",children:[g.jsx("p",{children:g.jsxs("strong",{children:[ne+1,". ",Eu(q.startTime)," - ",Eu(q.endTime),": ",q.Company]})}),g.jsxs("p",{children:[q.Task," at ",q.City,", ",q.State]})]},q.id))]},W))]},V))]})]})},gy=r=>r==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r),_A=({invoices:r,quotes:e})=>{const[t,i]=Z.useState("invoices");return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Billing"}),g.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[g.jsx(Za,{size:20})," Create Quote"]})]}),g.jsx("div",{className:"border-b border-gray-200",children:g.jsxs("nav",{className:"-mb-px flex gap-6",children:[g.jsx("button",{onClick:()=>i("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="invoices"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Invoices"}),g.jsx("button",{onClick:()=>i("quotes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="quotes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Quotes"})]})}),g.jsxs("div",{className:"mt-6",children:[t==="invoices"&&g.jsx("div",{children:r.map(o=>g.jsxs("div",{children:[o.id," - ",o.customerName," - ",gy(o.amount)," - ",o.status]},o.id))}),t==="quotes"&&g.jsx("div",{children:e.map(o=>g.jsxs("div",{children:[o.id," - ",o.customerName," - ",gy(o.amount)," - ",o.status]},o.id))})]})]})},q_=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,H_=r=>r?r.getTime()/864e5+25569:null,wA=r=>{const e=q_(r);return e?e.toISOString().split("T")[0]:""},EA=r=>r?H_(new Date(r+"T00:00:00")):null,TA=r=>r?new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",xA=r=>r==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r),IA=r=>{const e=q_(r);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},SA=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",kA=({order:r,onClose:e,onUpdate:t,onAddNote:i,technicians:o})=>{if(!r)return null;const[l,h]=Z.useState(r["Order Status"]),[f,y]=Z.useState(r.technician||[]),[_,E]=Z.useState(wA(r["Schedule Date"])),[x,P]=Z.useState(r.startTime||""),[V,$]=Z.useState(r.endTime||""),[W,b]=Z.useState(""),[q,ne]=Z.useState(r.clientWO||""),ae=X=>{const R=f.includes(X)?f.filter(I=>I!==X):[...f,X];y(R)},oe=()=>{const X={};l!==r["Order Status"]&&(X["Order Status"]=l,l==="Completed"&&!r["Completed Date"]&&(X["Completed Date"]=H_(new Date))),JSON.stringify(f)!==JSON.stringify(r.technician)&&(X.technician=f);const R=EA(_);(R!==r["Schedule Date"]||x!==r.startTime||V!==r.endTime)&&(X["Schedule Date"]=R,X.startTime=x,X.endTime=V,l==="Open"&&_&&(X["Order Status"]="Scheduled")),q!==r.clientWO&&(X.clientWO=q),Object.keys(X).length>0&&t(r.id,X)},he=[{label:"Work Order #",value:r["WO#"],icon:g.jsx(Af,{})},{label:"Client WO#",value:r.clientWO,icon:g.jsx(j_,{})},{label:"Location",value:`${r.Company} (#${r["Loc #"]})`,icon:g.jsx(jk,{})},{label:"Address",value:`${r.City}, ${r.State}`,icon:g.jsx(Fk,{})},{label:"Priority",value:r.Priority,icon:g.jsx(Wk,{}),style:`${SA(r.Priority)} px-2 py-0.5 rounded-full text-xs font-semibold`},{label:"Task",value:r.Task},{label:"NTE Amount",value:xA(r.NTE)},{label:"Created Date",value:IA(r["Created Date"])}];return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Work Order Details"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:g.jsx($_,{size:28})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto",children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:he.map(X=>g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-xs text-gray-500 font-medium",children:X.label}),g.jsxs("span",{className:`text-base text-gray-900 font-semibold flex items-center gap-2 mt-1 ${X.style||""}`,children:[X.icon&&g.jsx("span",{className:"text-gray-400",children:Du.cloneElement(X.icon,{size:16})}),g.jsx("span",{className:X.style||"",children:X.value})]})]},X.label))}),g.jsxs("div",{className:"mt-6 pt-6 border-t",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Job Management"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Status"}),g.jsxs("select",{value:l,onChange:X=>h(X.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Open"}),g.jsx("option",{children:"Scheduled"}),g.jsx("option",{children:"In Progress"}),g.jsx("option",{children:"On Hold"}),g.jsx("option",{children:"Completed"}),g.jsx("option",{children:"Cancelled"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Assigned Technicians"}),g.jsx("div",{className:"border p-2 rounded-lg max-h-24 overflow-y-auto",children:o.filter(X=>X.name!=="Unassigned").map(X=>g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:`tech-${X.id}`,checked:f.includes(X.name),onChange:()=>ae(X.name),className:"mr-2"}),g.jsx("label",{htmlFor:`tech-${X.id}`,children:X.name})]},X.id))})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Schedule Date"}),g.jsx("input",{type:"date",value:_,onChange:X=>E(X.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Start Time"}),g.jsx("input",{type:"time",value:x,onChange:X=>P(X.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"End Time"}),g.jsx("input",{type:"time",value:V,onChange:X=>$(X.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client WO#"}),g.jsx("input",{type:"text",value:q,onChange:X=>ne(X.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsx("div",{className:"mt-4 flex justify-end",children:g.jsx("button",{onClick:oe,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})})]}),g.jsxs("div",{className:"mt-6 pt-6 border-t",children:[g.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3 flex items-center",children:[g.jsx(zk,{size:20,className:"mr-2"}),"Work Notes"]}),g.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto bg-gray-50 p-3 rounded-lg",children:r.notes&&r.notes.length>0?r.notes.sort((X,R)=>new Date(R.timestamp)-new Date(X.timestamp)).map((X,R)=>g.jsxs("div",{className:"text-sm bg-white p-2 rounded shadow-sm",children:[g.jsx("p",{className:"text-gray-800",children:X.text}),g.jsx("p",{className:"text-xs text-gray-500 mt-1 text-right",children:TA(X.timestamp)})]},R)):g.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No notes for this job yet."})}),g.jsxs("div",{className:"mt-4",children:[g.jsx("textarea",{value:W,onChange:X=>b(X.target.value),placeholder:"Add a new note...",rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg"}),g.jsx("div",{className:"flex justify-end mt-2",children:g.jsx("button",{onClick:()=>i(r.id,W,()=>b("")),disabled:!W.trim(),className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Add Note"})})]})]})]})]})})},AA=r=>r?r.getTime()/864e5+25569:null,CA=r=>r?AA(new Date(r+"T00:00:00")):null,RA=({onClose:r,onAddOrder:e,customers:t})=>{const[i,o]=Z.useState(t[0]?.id||""),[l,h]=Z.useState(""),[f,y]=Z.useState(""),[_,E]=Z.useState("Regular"),[x,P]=Z.useState("Heating & Cooling"),[V,$]=Z.useState(""),[W,b]=Z.useState(""),[q,ne]=Z.useState(""),[ae,oe]=Z.useState(""),[he,X]=Z.useState(""),R=Z.useMemo(()=>t.find(A=>A.id===i),[i,t]);Z.useEffect(()=>{if(R?.locations?.[0]){const A=R.locations[0];h(`${A.name}-${A.locNum}-0`)}else h("")},[R]);const I=A=>{h(A)},C=A=>{A.preventDefault();const[O,L]=l.split("-").slice(0,2),k=R.locations.find(He=>He.name===O&&He.locNum===L);if(!i||!k||!f){alert("Please fill out all required fields.");return}e({Client:R.name,Company:k.name,"Loc #":k.locNum,Task:f,Priority:_,Category:x,City:k.city,State:k.state,NTE:parseFloat(V)||0,"Schedule Date":CA(W),startTime:q,endTime:ae,clientWO:he})};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("form",{onSubmit:C,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Work Order"}),g.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:g.jsx($_,{size:28})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client"}),g.jsx("select",{value:i,onChange:A=>o(parseInt(A.target.value)),className:"w-full p-2 border border-gray-300 rounded-lg",children:t.map(A=>g.jsx("option",{value:A.id,children:A.name},A.id))})]}),R&&g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location"}),g.jsx("select",{value:l,onChange:A=>I(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:R.locations.map((A,O)=>g.jsxs("option",{value:`${A.name}-${A.locNum}-${O}`,children:[A.name," (#",A.locNum,")"]},`${A.name}-${A.locNum}-${O}`))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client WO#"}),g.jsx("input",{type:"text",value:he,onChange:A=>X(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Task / Issue"}),g.jsx("textarea",{value:f,onChange:A=>y(A.target.value),rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Priority"}),g.jsxs("select",{value:_,onChange:A=>E(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Regular"}),g.jsx("option",{children:"Low"}),g.jsx("option",{children:"Urgent"}),g.jsx("option",{children:"Emergency"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Category"}),g.jsxs("select",{value:x,onChange:A=>P(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[g.jsx("option",{children:"Heating & Cooling"}),g.jsx("option",{children:"Refrigeration"}),g.jsx("option",{children:"Maintenance"}),g.jsx("option",{children:"Plumbing"}),g.jsx("option",{children:"Other"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"NTE Amount ($)"}),g.jsx("input",{type:"number",value:V,onChange:A=>$(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",placeholder:"e.g., 500"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Schedule Date"}),g.jsx("input",{type:"date",value:W,onChange:A=>b(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Start Time"}),g.jsx("input",{type:"time",value:q,onChange:A=>ne(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"End Time"}),g.jsx("input",{type:"time",value:ae,onChange:A=>oe(A.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),g.jsx("div",{className:"p-6 bg-gray-50 border-t mt-auto",children:g.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700",children:"Create Work Order"})})]})})},NA={apiKey:"AIzaSyAlev0GFpv3rzRYCJaMALOqlPwaowNfynI",authDomain:"hvac-finance-dashboard.firebaseapp.com",projectId:"hvac-finance-dashboard",storageBucket:"hvac-finance-dashboard.firebasestorage.app",messagingSenderId:"917610618621",appId:"1:917610618621:web:83c621d154c5f62c9be894"},Tu="hvac-master-dashboard",Cf=Cy(NA);hv(Cf);const xu=V1(Cf);Ak(Cf);const PA=r=>r?r.getTime()/864e5+25569:null,bA=()=>{const[r,e]=Z.useState(null),[t,i]=Z.useState(!0),[o,l]=Z.useState("finance"),[h,f]=Z.useState("dashboard"),[y,_]=Z.useState([]),[E,x]=Z.useState([]),[P,V]=Z.useState([]),[$,W]=Z.useState([]),[b,q]=Z.useState([]),[ne,ae]=Z.useState([]),[oe,he]=Z.useState([]),[X,R]=Z.useState([]),[I,C]=Z.useState([]),[A,O]=Z.useState([]),[L,k]=Z.useState([]),[He,_t]=Z.useState([]),[At,Fe]=Z.useState([]),[re,ge]=Z.useState([]),[se,j]=Z.useState([]),[H,me]=Z.useState([]),[xe,ke]=Z.useState([]),[Ae,Ve]=Z.useState(""),[Re,Be]=Z.useState("All"),[Ze,Gt]=Z.useState(null),[Br,pn]=Z.useState(!1),[gr,yr]=Z.useState("dashboard"),[Ei,Ti]=Z.useState(!1),[Po,Cs]=Z.useState(null),[Hn,Kn]=Z.useState("bill"),[Rs,Ns]=Z.useState("dark");Z.useEffect(()=>{if(!r)return;const ct=Object.entries({bills:_,debts:x,incomes:V,weeklyCosts:W,jobs:q,tasks:ae,invoices:he,taxPayments:R,goals:C,clients:ge,inventory:O,vehicles:k,maintenanceLogs:_t,recurringWork:Fe,workOrders:j,customers:me,technicians:ke}).map(([wt,kn])=>ek(G1(ry(xu,"artifacts",Tu,"users",r,wt)),An=>{kn(An.docs.map(_r=>({id:_r.id,..._r.data()})))},An=>console.error(`Error fetching ${wt}:`,An)));return()=>{ct.forEach(wt=>wt())}},[r]);const vr=(ot,ct)=>{const wt=Nd(xu,"artifacts",Tu,"users",r,"workOrders",ot);ly(wt,ct),Ze&&Ze.id===ot&&Gt(kn=>({...kn,...ct}))},Ps=(ot,ct,wt)=>{if(!ct.trim())return;const kn={text:ct.trim(),timestamp:new Date().toISOString()},An=Nd(xu,"artifacts",Tu,"users",r,"workOrders",ot),Ds=[...se.find(Os=>Os.id===ot).notes||[],kn];ly(An,{notes:Ds}),wt()},st=ot=>{const ct=`WO-${Date.now()}`,wt={...ot,"WO#":ct,id:ct,"Created Date":PA(new Date),"Order Status":ot["Schedule Date"]?"Scheduled":"Open",notes:[],technician:[]};Z1(ry(xu,"artifacts",Tu,"users",r,"workOrders"),wt),pn(!1)},it=()=>g.jsx("main",{children:gr==="jobs"&&g.jsx(Qk,{jobs:b,clients:re,openModal,handleDelete,searchTerm,setSearchTerm,handleEnhancedExportCSV})}),Sn=Z.useMemo(()=>se.filter(ot=>(Re==="All"||ot["Order Status"]===Re)&&Object.values(ot).some(ct=>String(ct).toLowerCase().includes(Ae.toLowerCase()))),[se,Ae,Re]),bs=()=>{switch(h){case"customers":return g.jsx(fA,{customers:H});case"dispatch":return g.jsx(lA,{workOrders:se,technicians:xe,onSelectOrder:Gt,onUpdateOrder:vr});case"technicians":return g.jsx(gA,{technicians:xe});case"route":return g.jsx(vA,{workOrders:se,technicians:xe});case"billing":return g.jsx(_A,{invoices:oe,quotes:[]});case"reporting":return g.jsx("div",{children:"Reporting View Placeholder"});case"dashboard":default:return g.jsx(nA,{orders:Sn,onSelectOrder:Gt,searchTerm:Ae,setSearchTerm:Ve,statusFilter:Re,setStatusFilter:Be})}};return t?g.jsx("div",{children:"Loading..."}):r?g.jsxs("div",{className:"bg-gray-50 min-h-screen font-sans",children:[g.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-20",children:g.jsx("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx(Af,{className:"h-8 w-8 text-blue-600"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HVAC Business Suite"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>l("finance"),className:`font-semibold py-2 px-4 rounded-lg flex items-center gap-2 ${o==="finance"?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:[g.jsx(L_,{size:20})," Finance"]}),g.jsxs("button",{onClick:()=>l("dispatch"),className:`font-semibold py-2 px-4 rounded-lg flex items-center gap-2 ${o==="dispatch"?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:[g.jsx(Sf,{size:20})," Dispatch"]})]})]})})}),o==="dispatch"&&g.jsxs(g.Fragment,{children:[g.jsx(Yk,{currentView:h,setCurrentView:f,onAddOrderClick:()=>pn(!0)}),g.jsx("main",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:bs()}),Ze&&g.jsx(kA,{order:Ze,onClose:()=>Gt(null),onUpdate:vr,onAddNote:Ps,technicians:xe}),Br&&g.jsx(RA,{customers:H,onAddOrder:st,onClose:()=>pn(!1)})]}),o==="finance"&&g.jsx("div",{className:`${Rs} bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-white`,children:g.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[g.jsxs("nav",{className:"flex items-center border-b border-slate-200 dark:border-slate-700 mb-6 overflow-x-auto",children:[g.jsx("button",{onClick:()=>yr("dashboard"),className:"px-4 py-3 text-sm ...",children:"Dashboard"}),g.jsx("button",{onClick:()=>yr("reports"),className:"px-4 py-3 text-sm ...",children:"Reports"})]}),it()]})})]}):g.jsx(Kk,{})};iw.createRoot(document.getElementById("root")).render(g.jsx(Du.StrictMode,{children:g.jsx(bA,{})}));
