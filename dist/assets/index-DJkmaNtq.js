(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function vy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wh={exports:{}},ga={},qh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function G0(){if(Vm)return Ce;Vm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function P(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function b(L,H,me){this.props=L,this.context=H,this.refs=W,this.updater=me||V}b.prototype.isReactComponent={},b.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=b.prototype;function ne(L,H,me){this.props=L,this.context=H,this.refs=W,this.updater=me||V}var ae=ne.prototype=new q;ae.constructor=ne,$(ae,b.prototype),ae.isPureReactComponent=!0;var oe=Array.isArray,he=Object.prototype.hasOwnProperty,Z={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(L,H,me){var Ie,Ae={},ke=null,Le=null;if(H!=null)for(Ie in H.ref!==void 0&&(Le=H.ref),H.key!==void 0&&(ke=""+H.key),H)he.call(H,Ie)&&!R.hasOwnProperty(Ie)&&(Ae[Ie]=H[Ie]);var Re=arguments.length-2;if(Re===1)Ae.children=me;else if(1<Re){for(var $e=Array(Re),tt=0;tt<Re;tt++)$e[tt]=arguments[tt+2];Ae.children=$e}if(L&&L.defaultProps)for(Ie in Re=L.defaultProps,Re)Ae[Ie]===void 0&&(Ae[Ie]=Re[Ie]);return{$$typeof:r,type:L,key:ke,ref:Le,props:Ae,_owner:Z.current}}function C(L,H){return{$$typeof:r,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function O(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return H[me]})}var j=/\/+/g;function A(L,H){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):H.toString(36)}function Ke(L,H,me,Ie,Ae){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var Le=!1;if(L===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(L.$$typeof){case r:case e:Le=!0}}if(Le)return Le=L,Ae=Ae(Le),L=Ie===""?"."+A(Le,0):Ie,oe(Ae)?(me="",L!=null&&(me=L.replace(j,"$&/")+"/"),Ke(Ae,H,me,"",function(tt){return tt})):Ae!=null&&(k(Ae)&&(Ae=C(Ae,me+(!Ae.key||Le&&Le.key===Ae.key?"":(""+Ae.key).replace(j,"$&/")+"/")+L)),H.push(Ae)),1;if(Le=0,Ie=Ie===""?".":Ie+":",oe(L))for(var Re=0;Re<L.length;Re++){ke=L[Re];var $e=Ie+A(ke,Re);Le+=Ke(ke,H,me,$e,Ae)}else if($e=P(L),typeof $e=="function")for(L=$e.call(L),Re=0;!(ke=L.next()).done;)ke=ke.value,$e=Ie+A(ke,Re++),Le+=Ke(ke,H,me,$e,Ae);else if(ke==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Le}function wt(L,H,me){if(L==null)return L;var Ie=[],Ae=0;return Ke(L,Ie,"","",function(ke){return H.call(me,ke,Ae++)}),Ie}function At(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var Ue={current:null},re={transition:null},ge={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:re,ReactCurrentOwner:Z};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:wt,forEach:function(L,H,me){wt(L,function(){H.apply(this,arguments)},me)},count:function(L){var H=0;return wt(L,function(){H++}),H},toArray:function(L){return wt(L,function(H){return H})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ce.Component=b,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=ne,Ce.StrictMode=i,Ce.Suspense=g,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ce.act=se,Ce.cloneElement=function(L,H,me){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ie=$({},L.props),Ae=L.key,ke=L.ref,Le=L._owner;if(H!=null){if(H.ref!==void 0&&(ke=H.ref,Le=Z.current),H.key!==void 0&&(Ae=""+H.key),L.type&&L.type.defaultProps)var Re=L.type.defaultProps;for($e in H)he.call(H,$e)&&!R.hasOwnProperty($e)&&(Ie[$e]=H[$e]===void 0&&Re!==void 0?Re[$e]:H[$e])}var $e=arguments.length-2;if($e===1)Ie.children=me;else if(1<$e){Re=Array($e);for(var tt=0;tt<$e;tt++)Re[tt]=arguments[tt+2];Ie.children=Re}return{$$typeof:r,type:L.type,key:Ae,ref:ke,props:Ie,_owner:Le}},Ce.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ce.createElement=I,Ce.createFactory=function(L){var H=I.bind(null,L);return H.type=L,H},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(L){return{$$typeof:f,render:L}},Ce.isValidElement=k,Ce.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:At}},Ce.memo=function(L,H){return{$$typeof:_,type:L,compare:H===void 0?null:H}},Ce.startTransition=function(L){var H=re.transition;re.transition={};try{L()}finally{re.transition=H}},Ce.unstable_act=se,Ce.useCallback=function(L,H){return Ue.current.useCallback(L,H)},Ce.useContext=function(L){return Ue.current.useContext(L)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(L){return Ue.current.useDeferredValue(L)},Ce.useEffect=function(L,H){return Ue.current.useEffect(L,H)},Ce.useId=function(){return Ue.current.useId()},Ce.useImperativeHandle=function(L,H,me){return Ue.current.useImperativeHandle(L,H,me)},Ce.useInsertionEffect=function(L,H){return Ue.current.useInsertionEffect(L,H)},Ce.useLayoutEffect=function(L,H){return Ue.current.useLayoutEffect(L,H)},Ce.useMemo=function(L,H){return Ue.current.useMemo(L,H)},Ce.useReducer=function(L,H,me){return Ue.current.useReducer(L,H,me)},Ce.useRef=function(L){return Ue.current.useRef(L)},Ce.useState=function(L){return Ue.current.useState(L)},Ce.useSyncExternalStore=function(L,H,me){return Ue.current.useSyncExternalStore(L,H,me)},Ce.useTransition=function(){return Ue.current.useTransition()},Ce.version="18.3.1",Ce}var Lm;function bd(){return Lm||(Lm=1,qh.exports=G0()),qh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function Q0(){if(jm)return ga;jm=1;var r=bd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,_){var E,S={},P=null,V=null;_!==void 0&&(P=""+_),g.key!==void 0&&(P=""+g.key),g.ref!==void 0&&(V=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(S[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)S[E]===void 0&&(S[E]=g[E]);return{$$typeof:e,type:f,key:P,ref:V,props:S,_owner:o.current}}return ga.Fragment=t,ga.jsx=h,ga.jsxs=h,ga}var Mm;function Y0(){return Mm||(Mm=1,Wh.exports=Q0()),Wh.exports}var y=Y0(),Q=bd();const Du=vy(Q);var mu={},Hh={exports:{}},rn={},Kh={exports:{}},Gh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function X0(){return Fm||(Fm=1,function(r){function e(re,ge){var se=re.length;re.push(ge);e:for(;0<se;){var L=se-1>>>1,H=re[L];if(0<o(H,ge))re[L]=ge,re[se]=H,se=L;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ge=re[0],se=re.pop();if(se!==ge){re[0]=se;e:for(var L=0,H=re.length,me=H>>>1;L<me;){var Ie=2*(L+1)-1,Ae=re[Ie],ke=Ie+1,Le=re[ke];if(0>o(Ae,se))ke<H&&0>o(Le,Ae)?(re[L]=Le,re[ke]=se,L=ke):(re[L]=Ae,re[Ie]=se,L=Ie);else if(ke<H&&0>o(Le,se))re[L]=Le,re[ke]=se,L=ke;else break e}}return ge}function o(re,ge){var se=re.sortIndex-ge.sortIndex;return se!==0?se:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],_=[],E=1,S=null,P=3,V=!1,$=!1,W=!1,b=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(re){for(var ge=t(_);ge!==null;){if(ge.callback===null)i(_);else if(ge.startTime<=re)i(_),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(_)}}function oe(re){if(W=!1,ae(re),!$)if(t(g)!==null)$=!0,At(he);else{var ge=t(_);ge!==null&&Ue(oe,ge.startTime-re)}}function he(re,ge){$=!1,W&&(W=!1,q(I),I=-1),V=!0;var se=P;try{for(ae(ge),S=t(g);S!==null&&(!(S.expirationTime>ge)||re&&!O());){var L=S.callback;if(typeof L=="function"){S.callback=null,P=S.priorityLevel;var H=L(S.expirationTime<=ge);ge=r.unstable_now(),typeof H=="function"?S.callback=H:S===t(g)&&i(g),ae(ge)}else i(g);S=t(g)}if(S!==null)var me=!0;else{var Ie=t(_);Ie!==null&&Ue(oe,Ie.startTime-ge),me=!1}return me}finally{S=null,P=se,V=!1}}var Z=!1,R=null,I=-1,C=5,k=-1;function O(){return!(r.unstable_now()-k<C)}function j(){if(R!==null){var re=r.unstable_now();k=re;var ge=!0;try{ge=R(!0,re)}finally{ge?A():(Z=!1,R=null)}}else Z=!1}var A;if(typeof ne=="function")A=function(){ne(j)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,wt=Ke.port2;Ke.port1.onmessage=j,A=function(){wt.postMessage(null)}}else A=function(){b(j,0)};function At(re){R=re,Z||(Z=!0,A())}function Ue(re,ge){I=b(function(){re(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){$||V||($=!0,At(he))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(P){case 1:case 2:case 3:var ge=3;break;default:ge=P}var se=P;P=ge;try{return re()}finally{P=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=P;P=re;try{return ge()}finally{P=se}},r.unstable_scheduleCallback=function(re,ge,se){var L=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?L+se:L):se=L,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=se+H,re={id:E++,callback:ge,priorityLevel:re,startTime:se,expirationTime:H,sortIndex:-1},se>L?(re.sortIndex=se,e(_,re),t(g)===null&&re===t(_)&&(W?(q(I),I=-1):W=!0,Ue(oe,se-L))):(re.sortIndex=H,e(g,re),$||V||($=!0,At(he))),re},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(re){var ge=P;return function(){var se=P;P=ge;try{return re.apply(this,arguments)}finally{P=se}}}}(Gh)),Gh}var Um;function J0(){return Um||(Um=1,Kh.exports=X0()),Kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function Z0(){if(zm)return rn;zm=1;var r=bd(),e=J0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function P(n){return g.call(S,n)?!0:g.call(E,n)?!1:_.test(n)?S[n]=!0:(E[n]=!0,!1)}function V(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,a,c){if(s===null||typeof s>"u"||V(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];b[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(q,ne);b[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function ae(n,s,a,c){var d=b.hasOwnProperty(s)?b[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,a,d,c)&&(a=null),c||d===null?P(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),Z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),re=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,L;function H(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var me=!1;function Ie(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,x=m.length-1;1<=w&&0<=x&&d[w]!==m[x];)x--;for(;1<=w&&0<=x;w--,x--)if(d[w]!==m[x]){if(w!==1||x!==1)do if(w--,x--,0>x||d[w]!==m[x]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function Ae(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=Ie(n.type,!1),n;case 11:return n=Ie(n.type.render,!1),n;case 1:return n=Ie(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case Z:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Ke:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case j:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wt:return s=n.displayName||null,s!==null?s:ke(n.type)||"Memo";case At:s=n._payload,n=n._init;try{return ke(n(s))}catch{}}return null}function Le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tt(n){var s=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Qt(n){n._valueTracker||(n._valueTracker=tt(n))}function Br(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $r(n,s){var a=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ds(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Re(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ei(n,s){s=s.checked,s!=null&&ae(n,"checked",s,!1)}function Ti(n,s){Ei(n,s);var a=Re(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Os(n,s.type,a):s.hasOwnProperty("defaultValue")&&Os(n,s.type,Re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Oo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Os(n,s,a){(s!=="number"||gn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Kn=Array.isArray;function Gn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Re(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Vs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ls(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Kn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Re(a)}}function js(n,s){var a=Re(s.value),c=Re(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Ii(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?lt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qn,xi=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function yr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rn=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(n){Rn.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Wr[s]=Wr[n]})});function Si(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Wr.hasOwnProperty(n)&&Wr[n]?(""+s).trim():s+"px"}function Ai(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Si(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ki=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ci(n,s){if(s){if(ki[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ri(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qr=null;function Hr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vr=null,Wt=null,yn=null;function Kr(n){if(n=ta(n)){if(typeof vr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Nl(s),vr(n.stateNode,n.type,s))}}function vn(n){Wt?yn?yn.push(n):yn=[n]:Wt=n}function Ms(){if(Wt){var n=Wt,s=yn;if(yn=Wt=null,Kr(n),s)for(n=0;n<s.length;n++)Kr(s[n])}}function _r(n,s){return n(s)}function ct(){}var Ge=!1;function an(n,s,a){if(Ge)return n(s,a);Ge=!0;try{return _r(n,s,a)}finally{Ge=!1,(Wt!==null||yn!==null)&&(ct(),Ms())}}function Pe(n,s){var a=n.stateNode;if(a===null)return null;var c=Nl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Yn=!1;if(f)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Yn=!1}function _n(n,s,a,c,d,m,w,x,N){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var wr=!1,Ni=null,Nn=!1,Vo=null,vc={onError:function(n){wr=!0,Ni=n}};function Pi(n,s,a,c,d,m,w,x,N){wr=!1,Ni=null,_n.apply(vc,arguments)}function tl(n,s,a,c,d,m,w,x,N){if(Pi.apply(this,arguments),wr){if(wr){var z=Ni;wr=!1,Ni=null}else throw Error(t(198));Nn||(Nn=!0,Vo=z)}}function Pn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Fs(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bn(n){if(Pn(n)!==n)throw Error(t(188))}function nl(n){var s=n.alternate;if(!s){if(s=Pn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return bn(d),n;if(m===c)return bn(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,x=d.child;x;){if(x===a){w=!0,a=d,c=m;break}if(x===c){w=!0,c=d,a=m;break}x=x.sibling}if(!w){for(x=m.child;x;){if(x===a){w=!0,a=m,c=d;break}if(x===c){w=!0,c=m,a=d;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Lo(n){return n=nl(n),n!==null?bi(n):null}function bi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=bi(n);if(s!==null)return s;n=n.sibling}return null}var Di=e.unstable_scheduleCallback,jo=e.unstable_cancelCallback,rl=e.unstable_shouldYield,_c=e.unstable_requestPaint,qe=e.unstable_now,sl=e.unstable_getCurrentPriorityLevel,Us=e.unstable_ImmediatePriority,Gr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,Mo=e.unstable_LowPriority,il=e.unstable_IdlePriority,zs=null,ln=null;function ol(n){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(zs,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:ll,Fo=Math.log,al=Math.LN2;function ll(n){return n>>>=0,n===0?32:31-(Fo(n)/al|0)|0}var Oi=64,Vi=4194304;function Qr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bs(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var x=w&~d;x!==0?c=Qr(x):(m&=w,m!==0&&(c=Qr(m)))}else w=a&~d,w!==0?c=Qr(w):m!==0&&(c=Qr(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-qt(s),d=1<<a,c|=n[a],s&=~d;return c}function wc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-qt(m),x=1<<w,N=d[w];N===-1?((x&a)===0||(x&c)!==0)&&(d[w]=wc(x,s)):N<=s&&(n.expiredLanes|=x),m&=~x}}function un(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $s(){var n=Oi;return Oi<<=1,(Oi&4194240)===0&&(Oi=64),n}function Yr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Xr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-qt(s),n[s]=a}function We(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-qt(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Jr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-qt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var be=0;function Zr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ul,Li,cl,hl,dl,Uo=!1,Xn=[],kt=null,Dn=null,On=null,es=new Map,En=new Map,Jn=[],Ec="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fl(n,s){switch(n){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":es.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(s.pointerId)}}function Yt(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ta(s),s!==null&&Li(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Tc(n,s,a,c,d){switch(s){case"focusin":return kt=Yt(kt,n,s,a,c,d),!0;case"dragenter":return Dn=Yt(Dn,n,s,a,c,d),!0;case"mouseover":return On=Yt(On,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return es.set(m,Yt(es.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,En.set(m,Yt(En.get(m)||null,n,s,a,c,d)),!0}return!1}function pl(n){var s=Gs(n.target);if(s!==null){var a=Pn(s);if(a!==null){if(s=a.tag,s===13){if(s=Fs(a),s!==null){n.blockedOn=s,dl(n.priority,function(){cl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ji(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);qr=c,a.target.dispatchEvent(c),qr=null}else return s=ta(a),s!==null&&Li(s),n.blockedOn=a,!1;s.shift()}return!0}function Ws(n,s,a){Tr(n)&&a.delete(s)}function ml(){Uo=!1,kt!==null&&Tr(kt)&&(kt=null),Dn!==null&&Tr(Dn)&&(Dn=null),On!==null&&Tr(On)&&(On=null),es.forEach(Ws),En.forEach(Ws)}function Vn(n,s){n.blockedOn===s&&(n.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ml)))}function Ln(n){function s(d){return Vn(d,n)}if(0<Xn.length){Vn(Xn[0],n);for(var a=1;a<Xn.length;a++){var c=Xn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(kt!==null&&Vn(kt,n),Dn!==null&&Vn(Dn,n),On!==null&&Vn(On,n),es.forEach(s),En.forEach(s),a=0;a<Jn.length;a++)c=Jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)pl(a),a.blockedOn===null&&Jn.shift()}var Ir=oe.ReactCurrentBatchConfig,ts=!0;function Je(n,s,a,c){var d=be,m=Ir.transition;Ir.transition=null;try{be=1,zo(n,s,a,c)}finally{be=d,Ir.transition=m}}function Ic(n,s,a,c){var d=be,m=Ir.transition;Ir.transition=null;try{be=4,zo(n,s,a,c)}finally{be=d,Ir.transition=m}}function zo(n,s,a,c){if(ts){var d=ji(n,s,a,c);if(d===null)Oc(n,s,c,qs,a),fl(n,c);else if(Tc(d,n,s,a,c))c.stopPropagation();else if(fl(n,c),s&4&&-1<Ec.indexOf(n)){for(;d!==null;){var m=ta(d);if(m!==null&&ul(m),m=ji(n,s,a,c),m===null&&Oc(n,s,c,qs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Oc(n,s,c,null,a)}}var qs=null;function ji(n,s,a,c){if(qs=null,n=Hr(c),n=Gs(n),n!==null)if(s=Pn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Fs(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qs=n,null}function Bo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sl()){case Us:return 1;case Gr:return 4;case wn:case Mo:return 16;case il:return 536870912;default:return 16}default:return 16}}var cn=null,Mi=null,Xt=null;function $o(){if(Xt)return Xt;var n,s=Mi,a=s.length,c,d="value"in cn?cn.value:cn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return Xt=d.slice(n,1<c?1-c:void 0)}function Fi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function Wo(){return!1}function Ct(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Zn:Wo,this.isPropagationStopped=Wo,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Ct(jn),er=se({},jn,{view:0,detail:0}),xc=Ct(er),zi,xr,ns,Hs=se({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ns&&(ns&&n.type==="mousemove"?(zi=n.screenX-ns.screenX,xr=n.screenY-ns.screenY):xr=zi=0,ns=n),zi)},movementY:function(n){return"movementY"in n?n.movementY:xr}}),Bi=Ct(Hs),qo=se({},Hs,{dataTransfer:0}),gl=Ct(qo),$i=se({},er,{relatedTarget:0}),Wi=Ct($i),yl=se({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=Ct(yl),vl=se({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_l=Ct(vl),wl=se({},jn,{data:0}),Ho=Ct(wl),qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},El={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=El[n])?!!s[n]:!1}function tr(){return Tl}var u=se({},er,{key:function(n){if(n.key){var s=qi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ht[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(n){return n.type==="keypress"?Fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Ct(u),v=se({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ct(v),M=se({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),B=Ct(M),te=se({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Ct(te),mt=se({},Hs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=Ct(mt),Et=[9,13,27,32],ht=f&&"CompositionEvent"in window,Tn=null;f&&"documentMode"in document&&(Tn=document.documentMode);var hn=f&&"TextEvent"in window&&!Tn,Ks=f&&(!ht||Tn&&8<Tn&&11>=Tn),Hi=" ",Rf=!1;function Nf(n,s){switch(n){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ki=!1;function q_(n,s){switch(n){case"compositionend":return Pf(s);case"keypress":return s.which!==32?null:(Rf=!0,Hi);case"textInput":return n=s.data,n===Hi&&Rf?null:n;default:return null}}function H_(n,s){if(Ki)return n==="compositionend"||!ht&&Nf(n,s)?(n=$o(),Xt=Mi=cn=null,Ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var K_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!K_[n.type]:s==="textarea"}function Df(n,s,a,c){vn(c),s=kl(s,"onChange"),0<s.length&&(a=new Ui("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Ko=null,Go=null;function G_(n){Xf(n,0)}function Il(n){var s=Ji(n);if(Br(s))return n}function Q_(n,s){if(n==="change")return s}var Of=!1;if(f){var Sc;if(f){var Ac="oninput"in document;if(!Ac){var Vf=document.createElement("div");Vf.setAttribute("oninput","return;"),Ac=typeof Vf.oninput=="function"}Sc=Ac}else Sc=!1;Of=Sc&&(!document.documentMode||9<document.documentMode)}function Lf(){Ko&&(Ko.detachEvent("onpropertychange",jf),Go=Ko=null)}function jf(n){if(n.propertyName==="value"&&Il(Go)){var s=[];Df(s,Go,n,Hr(n)),an(G_,s)}}function Y_(n,s,a){n==="focusin"?(Lf(),Ko=s,Go=a,Ko.attachEvent("onpropertychange",jf)):n==="focusout"&&Lf()}function X_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Il(Go)}function J_(n,s){if(n==="click")return Il(s)}function Z_(n,s){if(n==="input"||n==="change")return Il(s)}function e0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:e0;function Qo(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Mn(n[d],s[d]))return!1}return!0}function Mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ff(n,s){var a=Mf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mf(a)}}function Uf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Uf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function zf(){for(var n=window,s=gn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=gn(n.document)}return s}function kc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function t0(n){var s=zf(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Uf(a.ownerDocument.documentElement,a)){if(c!==null&&kc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Ff(a,m);var w=Ff(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var n0=f&&"documentMode"in document&&11>=document.documentMode,Gi=null,Cc=null,Yo=null,Rc=!1;function Bf(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rc||Gi==null||Gi!==gn(c)||(c=Gi,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Yo&&Qo(Yo,c)||(Yo=c,c=kl(Cc,"onSelect"),0<c.length&&(s=new Ui("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Gi)))}function xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Qi={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Nc={},$f={};f&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Sl(n){if(Nc[n])return Nc[n];if(!Qi[n])return n;var s=Qi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in $f)return Nc[n]=s[a];return n}var Wf=Sl("animationend"),qf=Sl("animationiteration"),Hf=Sl("animationstart"),Kf=Sl("transitionend"),Gf=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(n,s){Gf.set(n,s),l(s,[n])}for(var Pc=0;Pc<Qf.length;Pc++){var bc=Qf[Pc],r0=bc.toLowerCase(),s0=bc[0].toUpperCase()+bc.slice(1);rs(r0,"on"+s0)}rs(Wf,"onAnimationEnd"),rs(qf,"onAnimationIteration"),rs(Hf,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(Kf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function Yf(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,tl(c,s,void 0,n),n.currentTarget=null}function Xf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var x=c[w],N=x.instance,z=x.currentTarget;if(x=x.listener,N!==m&&d.isPropagationStopped())break e;Yf(d,x,z),m=N}else for(w=0;w<c.length;w++){if(x=c[w],N=x.instance,z=x.currentTarget,x=x.listener,N!==m&&d.isPropagationStopped())break e;Yf(d,x,z),m=N}}}if(Nn)throw n=Vo,Nn=!1,Vo=null,n}function Qe(n,s){var a=s[Uc];a===void 0&&(a=s[Uc]=new Set);var c=n+"__bubble";a.has(c)||(Jf(s,n,2,!1),a.add(c))}function Dc(n,s,a){var c=0;s&&(c|=4),Jf(a,n,c,s)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Jo(n){if(!n[Al]){n[Al]=!0,i.forEach(function(a){a!=="selectionchange"&&(i0.has(a)||Dc(a,!1,n),Dc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Al]||(s[Al]=!0,Dc("selectionchange",!1,s))}}function Jf(n,s,a,c){switch(Bo(s)){case 1:var d=Je;break;case 4:d=Ic;break;default:d=zo}a=d.bind(null,s,a,n),d=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Oc(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;x!==null;){if(w=Gs(x),w===null)return;if(N=w.tag,N===5||N===6){c=m=w;continue e}x=x.parentNode}}c=c.return}an(function(){var z=m,Y=Hr(a),J=[];e:{var G=Gf.get(n);if(G!==void 0){var ie=Ui,ue=n;switch(n){case"keypress":if(Fi(a)===0)break e;case"keydown":case"keyup":ie=p;break;case"focusin":ue="focus",ie=Wi;break;case"focusout":ue="blur",ie=Wi;break;case"beforeblur":case"afterblur":ie=Wi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=gl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=B;break;case Wf:case qf:case Hf:ie=Sr;break;case Kf:ie=ze;break;case"scroll":ie=xc;break;case"wheel":ie=Oe;break;case"copy":case"cut":case"paste":ie=_l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=T}var de=(s&4)!==0,ot=!de&&n==="scroll",F=de?G!==null?G+"Capture":null:G;de=[];for(var D=z,U;D!==null;){U=D;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,F!==null&&(ee=Pe(D,F),ee!=null&&de.push(Zo(D,ee,U)))),ot)break;D=D.return}0<de.length&&(G=new ie(G,ue,null,a,Y),J.push({event:G,listeners:de}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",G&&a!==qr&&(ue=a.relatedTarget||a.fromElement)&&(Gs(ue)||ue[Ar]))break e;if((ie||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=z,ue=ue?Gs(ue):null,ue!==null&&(ot=Pn(ue),ue!==ot||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=z),ie!==ue)){if(de=Bi,ee="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(de=T,ee="onPointerLeave",F="onPointerEnter",D="pointer"),ot=ie==null?G:Ji(ie),U=ue==null?G:Ji(ue),G=new de(ee,D+"leave",ie,a,Y),G.target=ot,G.relatedTarget=U,ee=null,Gs(Y)===z&&(de=new de(F,D+"enter",ue,a,Y),de.target=U,de.relatedTarget=ot,ee=de),ot=ee,ie&&ue)t:{for(de=ie,F=ue,D=0,U=de;U;U=Yi(U))D++;for(U=0,ee=F;ee;ee=Yi(ee))U++;for(;0<D-U;)de=Yi(de),D--;for(;0<U-D;)F=Yi(F),U--;for(;D--;){if(de===F||F!==null&&de===F.alternate)break t;de=Yi(de),F=Yi(F)}de=null}else de=null;ie!==null&&Zf(J,G,ie,de,!1),ue!==null&&ot!==null&&Zf(J,ot,ue,de,!0)}}e:{if(G=z?Ji(z):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var pe=Q_;else if(bf(G))if(Of)pe=Z_;else{pe=X_;var ve=Y_}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(pe=J_);if(pe&&(pe=pe(n,z))){Df(J,pe,a,Y);break e}ve&&ve(n,G,z),n==="focusout"&&(ve=G._wrapperState)&&ve.controlled&&G.type==="number"&&Os(G,"number",G.value)}switch(ve=z?Ji(z):window,n){case"focusin":(bf(ve)||ve.contentEditable==="true")&&(Gi=ve,Cc=z,Yo=null);break;case"focusout":Yo=Cc=Gi=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Bf(J,a,Y);break;case"selectionchange":if(n0)break;case"keydown":case"keyup":Bf(J,a,Y)}var _e;if(ht)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ki?Nf(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ks&&a.locale!=="ko"&&(Ki||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ki&&(_e=$o()):(cn=Y,Mi="value"in cn?cn.value:cn.textContent,Ki=!0)),ve=kl(z,Ee),0<ve.length&&(Ee=new Ho(Ee,n,null,a,Y),J.push({event:Ee,listeners:ve}),_e?Ee.data=_e:(_e=Pf(a),_e!==null&&(Ee.data=_e)))),(_e=hn?q_(n,a):H_(n,a))&&(z=kl(z,"onBeforeInput"),0<z.length&&(Y=new Ho("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:z}),Y.data=_e))}Xf(J,s)})}function Zo(n,s,a){return{instance:n,listener:s,currentTarget:a}}function kl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=Pe(n,a),m!=null&&c.unshift(Zo(n,m,d)),m=Pe(n,s),m!=null&&c.push(Zo(n,m,d))),n=n.return}return c}function Yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Zf(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var x=a,N=x.alternate,z=x.stateNode;if(N!==null&&N===c)break;x.tag===5&&z!==null&&(x=z,d?(N=Pe(a,m),N!=null&&w.unshift(Zo(a,N,x))):d||(N=Pe(a,m),N!=null&&w.push(Zo(a,N,x)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var o0=/\r\n?/g,a0=/\u0000|\uFFFD/g;function ep(n){return(typeof n=="string"?n:""+n).replace(o0,`
`).replace(a0,"")}function Cl(n,s,a){if(s=ep(s),ep(n)!==s&&a)throw Error(t(425))}function Rl(){}var Vc=null,Lc=null;function jc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,u0=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(n){return tp.resolve(null).then(n).catch(c0)}:Mc;function c0(n){setTimeout(function(){throw n})}function Fc(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Ln(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Ln(s)}function ss(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function np(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),nr="__reactFiber$"+Xi,ea="__reactProps$"+Xi,Ar="__reactContainer$"+Xi,Uc="__reactEvents$"+Xi,h0="__reactListeners$"+Xi,d0="__reactHandles$"+Xi;function Gs(n){var s=n[nr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ar]||a[nr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=np(n);n!==null;){if(a=n[nr])return a;n=np(n)}return s}n=a,a=n.parentNode}return null}function ta(n){return n=n[nr]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Nl(n){return n[ea]||null}var zc=[],Zi=-1;function is(n){return{current:n}}function Ye(n){0>Zi||(n.current=zc[Zi],zc[Zi]=null,Zi--)}function He(n,s){Zi++,zc[Zi]=n.current,n.current=s}var os={},Lt=is(os),Jt=is(!1),Qs=os;function eo(n,s){var a=n.type.contextTypes;if(!a)return os;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function Pl(){Ye(Jt),Ye(Lt)}function rp(n,s,a){if(Lt.current!==os)throw Error(t(168));He(Lt,s),He(Jt,a)}function sp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Le(n)||"Unknown",d));return se({},a,c)}function bl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||os,Qs=Lt.current,He(Lt,n),He(Jt,Jt.current),!0}function ip(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=sp(n,s,Qs),c.__reactInternalMemoizedMergedChildContext=n,Ye(Jt),Ye(Lt),He(Lt,n)):Ye(Jt),He(Jt,a)}var kr=null,Dl=!1,Bc=!1;function op(n){kr===null?kr=[n]:kr.push(n)}function f0(n){Dl=!0,op(n)}function as(){if(!Bc&&kr!==null){Bc=!0;var n=0,s=be;try{var a=kr;for(be=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}kr=null,Dl=!1}catch(d){throw kr!==null&&(kr=kr.slice(n+1)),Di(Us,as),d}finally{be=s,Bc=!1}}return null}var to=[],no=0,Ol=null,Vl=0,In=[],xn=0,Ys=null,Cr=1,Rr="";function Xs(n,s){to[no++]=Vl,to[no++]=Ol,Ol=n,Vl=s}function ap(n,s,a){In[xn++]=Cr,In[xn++]=Rr,In[xn++]=Ys,Ys=n;var c=Cr;n=Rr;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var m=32-qt(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-qt(s)+d|a<<d|c,Rr=m+n}else Cr=1<<m|a<<d|c,Rr=n}function $c(n){n.return!==null&&(Xs(n,1),ap(n,1,0))}function Wc(n){for(;n===Ol;)Ol=to[--no],to[no]=null,Vl=to[--no],to[no]=null;for(;n===Ys;)Ys=In[--xn],In[xn]=null,Rr=In[--xn],In[xn]=null,Cr=In[--xn],In[xn]=null}var dn=null,fn=null,Ze=!1,Fn=null;function lp(n,s){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function up(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,dn=n,fn=ss(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,dn=n,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ys!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,dn=n,fn=null,!0):!1;default:return!1}}function qc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Hc(n){if(Ze){var s=fn;if(s){var a=s;if(!up(n,s)){if(qc(n))throw Error(t(418));s=ss(a.nextSibling);var c=dn;s&&up(n,s)?lp(c,a):(n.flags=n.flags&-4097|2,Ze=!1,dn=n)}}else{if(qc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,dn=n}}}function cp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function Ll(n){if(n!==dn)return!1;if(!Ze)return cp(n),Ze=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!jc(n.type,n.memoizedProps)),s&&(s=fn)){if(qc(n))throw hp(),Error(t(418));for(;s;)lp(n,s),s=ss(s.nextSibling)}if(cp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){fn=ss(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}fn=null}}else fn=dn?ss(n.stateNode.nextSibling):null;return!0}function hp(){for(var n=fn;n;)n=ss(n.nextSibling)}function ro(){fn=dn=null,Ze=!1}function Kc(n){Fn===null?Fn=[n]:Fn.push(n)}var p0=oe.ReactCurrentBatchConfig;function na(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var x=d.refs;w===null?delete x[m]:x[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function jl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function dp(n){var s=n._init;return s(n._payload)}function fp(n){function s(F,D){if(n){var U=F.deletions;U===null?(F.deletions=[D],F.flags|=16):U.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)s(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=ms(F,D),F.index=0,F.sibling=null,F}function m(F,D,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<D?(F.flags|=2,D):U):(F.flags|=2,D)):(F.flags|=1048576,D)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function x(F,D,U,ee){return D===null||D.tag!==6?(D=Mh(U,F.mode,ee),D.return=F,D):(D=d(D,U),D.return=F,D)}function N(F,D,U,ee){var pe=U.type;return pe===R?Y(F,D,U.props.children,ee,U.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===At&&dp(pe)===D.type)?(ee=d(D,U.props),ee.ref=na(F,D,U),ee.return=F,ee):(ee=au(U.type,U.key,U.props,null,F.mode,ee),ee.ref=na(F,D,U),ee.return=F,ee)}function z(F,D,U,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Fh(U,F.mode,ee),D.return=F,D):(D=d(D,U.children||[]),D.return=F,D)}function Y(F,D,U,ee,pe){return D===null||D.tag!==7?(D=ii(U,F.mode,ee,pe),D.return=F,D):(D=d(D,U),D.return=F,D)}function J(F,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Mh(""+D,F.mode,U),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case he:return U=au(D.type,D.key,D.props,null,F.mode,U),U.ref=na(F,null,D),U.return=F,U;case Z:return D=Fh(D,F.mode,U),D.return=F,D;case At:var ee=D._init;return J(F,ee(D._payload),U)}if(Kn(D)||ge(D))return D=ii(D,F.mode,U,null),D.return=F,D;jl(F,D)}return null}function G(F,D,U,ee){var pe=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return pe!==null?null:x(F,D,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case he:return U.key===pe?N(F,D,U,ee):null;case Z:return U.key===pe?z(F,D,U,ee):null;case At:return pe=U._init,G(F,D,pe(U._payload),ee)}if(Kn(U)||ge(U))return pe!==null?null:Y(F,D,U,ee,null);jl(F,U)}return null}function ie(F,D,U,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(U)||null,x(D,F,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case he:return F=F.get(ee.key===null?U:ee.key)||null,N(D,F,ee,pe);case Z:return F=F.get(ee.key===null?U:ee.key)||null,z(D,F,ee,pe);case At:var ve=ee._init;return ie(F,D,U,ve(ee._payload),pe)}if(Kn(ee)||ge(ee))return F=F.get(U)||null,Y(D,F,ee,pe,null);jl(D,ee)}return null}function ue(F,D,U,ee){for(var pe=null,ve=null,_e=D,Ee=D=0,xt=null;_e!==null&&Ee<U.length;Ee++){_e.index>Ee?(xt=_e,_e=null):xt=_e.sibling;var Me=G(F,_e,U[Ee],ee);if(Me===null){_e===null&&(_e=xt);break}n&&_e&&Me.alternate===null&&s(F,_e),D=m(Me,D,Ee),ve===null?pe=Me:ve.sibling=Me,ve=Me,_e=xt}if(Ee===U.length)return a(F,_e),Ze&&Xs(F,Ee),pe;if(_e===null){for(;Ee<U.length;Ee++)_e=J(F,U[Ee],ee),_e!==null&&(D=m(_e,D,Ee),ve===null?pe=_e:ve.sibling=_e,ve=_e);return Ze&&Xs(F,Ee),pe}for(_e=c(F,_e);Ee<U.length;Ee++)xt=ie(_e,F,Ee,U[Ee],ee),xt!==null&&(n&&xt.alternate!==null&&_e.delete(xt.key===null?Ee:xt.key),D=m(xt,D,Ee),ve===null?pe=xt:ve.sibling=xt,ve=xt);return n&&_e.forEach(function(gs){return s(F,gs)}),Ze&&Xs(F,Ee),pe}function de(F,D,U,ee){var pe=ge(U);if(typeof pe!="function")throw Error(t(150));if(U=pe.call(U),U==null)throw Error(t(151));for(var ve=pe=null,_e=D,Ee=D=0,xt=null,Me=U.next();_e!==null&&!Me.done;Ee++,Me=U.next()){_e.index>Ee?(xt=_e,_e=null):xt=_e.sibling;var gs=G(F,_e,Me.value,ee);if(gs===null){_e===null&&(_e=xt);break}n&&_e&&gs.alternate===null&&s(F,_e),D=m(gs,D,Ee),ve===null?pe=gs:ve.sibling=gs,ve=gs,_e=xt}if(Me.done)return a(F,_e),Ze&&Xs(F,Ee),pe;if(_e===null){for(;!Me.done;Ee++,Me=U.next())Me=J(F,Me.value,ee),Me!==null&&(D=m(Me,D,Ee),ve===null?pe=Me:ve.sibling=Me,ve=Me);return Ze&&Xs(F,Ee),pe}for(_e=c(F,_e);!Me.done;Ee++,Me=U.next())Me=ie(_e,F,Ee,Me.value,ee),Me!==null&&(n&&Me.alternate!==null&&_e.delete(Me.key===null?Ee:Me.key),D=m(Me,D,Ee),ve===null?pe=Me:ve.sibling=Me,ve=Me);return n&&_e.forEach(function(K0){return s(F,K0)}),Ze&&Xs(F,Ee),pe}function ot(F,D,U,ee){if(typeof U=="object"&&U!==null&&U.type===R&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case he:e:{for(var pe=U.key,ve=D;ve!==null;){if(ve.key===pe){if(pe=U.type,pe===R){if(ve.tag===7){a(F,ve.sibling),D=d(ve,U.props.children),D.return=F,F=D;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===At&&dp(pe)===ve.type){a(F,ve.sibling),D=d(ve,U.props),D.ref=na(F,ve,U),D.return=F,F=D;break e}a(F,ve);break}else s(F,ve);ve=ve.sibling}U.type===R?(D=ii(U.props.children,F.mode,ee,U.key),D.return=F,F=D):(ee=au(U.type,U.key,U.props,null,F.mode,ee),ee.ref=na(F,D,U),ee.return=F,F=ee)}return w(F);case Z:e:{for(ve=U.key;D!==null;){if(D.key===ve)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(F,D.sibling),D=d(D,U.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else s(F,D);D=D.sibling}D=Fh(U,F.mode,ee),D.return=F,F=D}return w(F);case At:return ve=U._init,ot(F,D,ve(U._payload),ee)}if(Kn(U))return ue(F,D,U,ee);if(ge(U))return de(F,D,U,ee);jl(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,U),D.return=F,F=D):(a(F,D),D=Mh(U,F.mode,ee),D.return=F,F=D),w(F)):a(F,D)}return ot}var so=fp(!0),pp=fp(!1),Ml=is(null),Fl=null,io=null,Gc=null;function Qc(){Gc=io=Fl=null}function Yc(n){var s=Ml.current;Ye(Ml),n._currentValue=s}function Xc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function oo(n,s){Fl=n,Gc=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(en=!0),n.firstContext=null)}function Sn(n){var s=n._currentValue;if(Gc!==n)if(n={context:n,memoizedValue:s,next:null},io===null){if(Fl===null)throw Error(t(308));io=n,Fl.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return s}var Js=null;function Jc(n){Js===null?Js=[n]:Js.push(n)}function mp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Jc(s)):(a.next=d.next,d.next=a),s.interleaved=a,Nr(n,c)}function Nr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ls=!1;function Zc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function us(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Nr(n,a)}return d=c.interleaved,d===null?(s.next=s,Jc(c)):(s.next=d.next,d.next=s),c.interleaved=s,Nr(n,a)}function Ul(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Jr(n,a)}}function yp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function zl(n,s,a,c){var d=n.updateQueue;ls=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var N=x,z=N.next;N.next=null,w===null?m=z:w.next=z,w=N;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,x=Y.lastBaseUpdate,x!==w&&(x===null?Y.firstBaseUpdate=z:x.next=z,Y.lastBaseUpdate=N))}if(m!==null){var J=d.baseState;w=0,Y=z=N=null,x=m;do{var G=x.lane,ie=x.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:ie,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ue=n,de=x;switch(G=s,ie=a,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){J=ue.call(ie,J,G);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,G=typeof ue=="function"?ue.call(ie,J,G):ue,G==null)break e;J=se({},J,G);break e;case 2:ls=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[x]:G.push(x))}else ie={eventTime:ie,lane:G,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Y===null?(z=Y=ie,N=J):Y=Y.next=ie,w|=G;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;G=x,x=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(N=J),d.baseState=N,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);ti|=w,n.lanes=w,n.memoizedState=J}}function vp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ra={},rr=is(ra),sa=is(ra),ia=is(ra);function Zs(n){if(n===ra)throw Error(t(174));return n}function eh(n,s){switch(He(ia,s),He(sa,n),He(rr,ra),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ut(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ut(s,n)}Ye(rr),He(rr,s)}function ao(){Ye(rr),Ye(sa),Ye(ia)}function _p(n){Zs(ia.current);var s=Zs(rr.current),a=ut(s,n.type);s!==a&&(He(sa,n),He(rr,a))}function th(n){sa.current===n&&(Ye(rr),Ye(sa))}var nt=is(0);function Bl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var nh=[];function rh(){for(var n=0;n<nh.length;n++)nh[n]._workInProgressVersionPrimary=null;nh.length=0}var $l=oe.ReactCurrentDispatcher,sh=oe.ReactCurrentBatchConfig,ei=0,rt=null,gt=null,Tt=null,Wl=!1,oa=!1,aa=0,m0=0;function jt(){throw Error(t(321))}function ih(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function oh(n,s,a,c,d,m){if(ei=m,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$l.current=n===null||n.memoizedState===null?_0:w0,n=a(c,d),oa){m=0;do{if(oa=!1,aa=0,25<=m)throw Error(t(301));m+=1,Tt=gt=null,s.updateQueue=null,$l.current=E0,n=a(c,d)}while(oa)}if($l.current=Kl,s=gt!==null&&gt.next!==null,ei=0,Tt=gt=rt=null,Wl=!1,s)throw Error(t(300));return n}function ah(){var n=aa!==0;return aa=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?rt.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function An(){if(gt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var s=Tt===null?rt.memoizedState:Tt.next;if(s!==null)Tt=s,gt=n;else{if(n===null)throw Error(t(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?rt.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function la(n,s){return typeof s=="function"?s(n):s}function lh(n){var s=An(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=gt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var x=w=null,N=null,z=m;do{var Y=z.lane;if((ei&Y)===Y)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var J={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(x=N=J,w=c):N=N.next=J,rt.lanes|=Y,ti|=Y}z=z.next}while(z!==null&&z!==m);N===null?w=c:N.next=x,Mn(c,s.memoizedState)||(en=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,rt.lanes|=m,ti|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function uh(n){var s=An(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Mn(m,s.memoizedState)||(en=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function wp(){}function Ep(n,s){var a=rt,c=An(),d=s(),m=!Mn(c.memoizedState,d);if(m&&(c.memoizedState=d,en=!0),c=c.queue,ch(xp.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ua(9,Ip.bind(null,a,c,d,s),void 0,null),It===null)throw Error(t(349));(ei&30)!==0||Tp(a,s,d)}return d}function Tp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Ip(n,s,a,c){s.value=a,s.getSnapshot=c,Sp(s)&&Ap(n)}function xp(n,s,a){return a(function(){Sp(s)&&Ap(n)})}function Sp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function Ap(n){var s=Nr(n,1);s!==null&&$n(s,n,1,-1)}function kp(n){var s=sr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:n},s.queue=n,n=n.dispatch=v0.bind(null,rt,n),[s.memoizedState,n]}function ua(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Cp(){return An().memoizedState}function ql(n,s,a,c){var d=sr();rt.flags|=n,d.memoizedState=ua(1|s,a,void 0,c===void 0?null:c)}function Hl(n,s,a,c){var d=An();c=c===void 0?null:c;var m=void 0;if(gt!==null){var w=gt.memoizedState;if(m=w.destroy,c!==null&&ih(c,w.deps)){d.memoizedState=ua(s,a,m,c);return}}rt.flags|=n,d.memoizedState=ua(1|s,a,m,c)}function Rp(n,s){return ql(8390656,8,n,s)}function ch(n,s){return Hl(2048,8,n,s)}function Np(n,s){return Hl(4,2,n,s)}function Pp(n,s){return Hl(4,4,n,s)}function bp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Dp(n,s,a){return a=a!=null?a.concat([n]):null,Hl(4,4,bp.bind(null,s,n),a)}function hh(){}function Op(n,s){var a=An();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ih(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Vp(n,s){var a=An();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ih(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Lp(n,s,a){return(ei&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Mn(a,s)||(a=$s(),rt.lanes|=a,ti|=a,n.baseState=!0),s)}function g0(n,s){var a=be;be=a!==0&&4>a?a:4,n(!0);var c=sh.transition;sh.transition={};try{n(!1),s()}finally{be=a,sh.transition=c}}function jp(){return An().memoizedState}function y0(n,s,a){var c=fs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Mp(n))Fp(s,a);else if(a=mp(n,s,a,c),a!==null){var d=Gt();$n(a,n,c,d),Up(a,s,c)}}function v0(n,s,a){var c=fs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mp(n))Fp(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,x=m(w,a);if(d.hasEagerState=!0,d.eagerState=x,Mn(x,w)){var N=s.interleaved;N===null?(d.next=d,Jc(s)):(d.next=N.next,N.next=d),s.interleaved=d;return}}catch{}finally{}a=mp(n,s,d,c),a!==null&&(d=Gt(),$n(a,n,c,d),Up(a,s,c))}}function Mp(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function Fp(n,s){oa=Wl=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Up(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Jr(n,a)}}var Kl={readContext:Sn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},_0={readContext:Sn,useCallback:function(n,s){return sr().memoizedState=[n,s===void 0?null:s],n},useContext:Sn,useEffect:Rp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,ql(4194308,4,bp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return ql(4194308,4,n,s)},useInsertionEffect:function(n,s){return ql(4,2,n,s)},useMemo:function(n,s){var a=sr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=sr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=y0.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var s=sr();return n={current:n},s.memoizedState=n},useState:kp,useDebugValue:hh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=kp(!1),s=n[0];return n=g0.bind(null,n[1]),sr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=rt,d=sr();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),It===null)throw Error(t(349));(ei&30)!==0||Tp(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Rp(xp.bind(null,c,m,n),[n]),c.flags|=2048,ua(9,Ip.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=sr(),s=It.identifierPrefix;if(Ze){var a=Rr,c=Cr;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=aa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=m0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},w0={readContext:Sn,useCallback:Op,useContext:Sn,useEffect:ch,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Pp,useMemo:Vp,useReducer:lh,useRef:Cp,useState:function(){return lh(la)},useDebugValue:hh,useDeferredValue:function(n){var s=An();return Lp(s,gt.memoizedState,n)},useTransition:function(){var n=lh(la)[0],s=An().memoizedState;return[n,s]},useMutableSource:wp,useSyncExternalStore:Ep,useId:jp,unstable_isNewReconciler:!1},E0={readContext:Sn,useCallback:Op,useContext:Sn,useEffect:ch,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Pp,useMemo:Vp,useReducer:uh,useRef:Cp,useState:function(){return uh(la)},useDebugValue:hh,useDeferredValue:function(n){var s=An();return gt===null?s.memoizedState=n:Lp(s,gt.memoizedState,n)},useTransition:function(){var n=uh(la)[0],s=An().memoizedState;return[n,s]},useMutableSource:wp,useSyncExternalStore:Ep,useId:jp,unstable_isNewReconciler:!1};function Un(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function dh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:se({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gl={isMounted:function(n){return(n=n._reactInternals)?Pn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=fs(n),m=Pr(c,d);m.payload=s,a!=null&&(m.callback=a),s=us(n,m,d),s!==null&&($n(s,n,d,c),Ul(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=fs(n),m=Pr(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=us(n,m,d),s!==null&&($n(s,n,d,c),Ul(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Gt(),c=fs(n),d=Pr(a,c);d.tag=2,s!=null&&(d.callback=s),s=us(n,d,c),s!==null&&($n(s,n,c,a),Ul(s,n,c))}};function zp(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Qo(a,c)||!Qo(d,m):!0}function Bp(n,s,a){var c=!1,d=os,m=s.contextType;return typeof m=="object"&&m!==null?m=Sn(m):(d=Zt(s)?Qs:Lt.current,c=s.contextTypes,m=(c=c!=null)?eo(n,d):os),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gl,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function $p(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Gl.enqueueReplaceState(s,s.state,null)}function fh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Zc(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=Sn(m):(m=Zt(s)?Qs:Lt.current,d.context=eo(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(dh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Gl.enqueueReplaceState(d,d.state,null),zl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function lo(n,s){try{var a="",c=s;do a+=Ae(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function ph(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function mh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function Wp(n,s,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){tu||(tu=!0,Nh=c),mh(n,s)},a}function qp(n,s,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){mh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){mh(n,s),typeof c!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Hp(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new T0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=L0.bind(null,n,s,a),s.then(n,n))}function Kp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Gp(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Pr(-1,1),s.tag=2,us(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var I0=oe.ReactCurrentOwner,en=!1;function Kt(n,s,a,c){s.child=n===null?pp(s,null,a,c):so(s,n.child,a,c)}function Qp(n,s,a,c,d){a=a.render;var m=s.ref;return oo(s,d),c=oh(n,s,a,c,m,d),a=ah(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(Ze&&a&&$c(s),s.flags|=1,Kt(n,s,c,d),s.child)}function Yp(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!jh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Xp(n,s,m,c,d)):(n=au(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(w,c)&&n.ref===s.ref)return br(n,s,d)}return s.flags|=1,n=ms(m,c),n.ref=s.ref,n.return=s,s.child=n}function Xp(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(Qo(m,c)&&n.ref===s.ref)if(en=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return s.lanes=n.lanes,br(n,s,d)}return gh(n,s,a,c,d)}function Jp(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(co,pn),pn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,He(co,pn),pn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,He(co,pn),pn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,He(co,pn),pn|=c;return Kt(n,s,d,a),s.child}function Zp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function gh(n,s,a,c,d){var m=Zt(a)?Qs:Lt.current;return m=eo(s,m),oo(s,d),a=oh(n,s,a,c,m,d),c=ah(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(Ze&&c&&$c(s),s.flags|=1,Kt(n,s,a,d),s.child)}function em(n,s,a,c,d){if(Zt(a)){var m=!0;bl(s)}else m=!1;if(oo(s,d),s.stateNode===null)Yl(n,s),Bp(s,a,c),fh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var N=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=Sn(z):(z=Zt(a)?Qs:Lt.current,z=eo(s,z));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==c||N!==z)&&$p(s,w,c,z),ls=!1;var G=s.memoizedState;w.state=G,zl(s,c,w,d),N=s.memoizedState,x!==c||G!==N||Jt.current||ls?(typeof Y=="function"&&(dh(s,a,Y,c),N=s.memoizedState),(x=ls||zp(s,a,x,c,G,N,z))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=z,c=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,gp(n,s),x=s.memoizedProps,z=s.type===s.elementType?x:Un(s.type,x),w.props=z,J=s.pendingProps,G=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Sn(N):(N=Zt(a)?Qs:Lt.current,N=eo(s,N));var ie=a.getDerivedStateFromProps;(Y=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==J||G!==N)&&$p(s,w,c,N),ls=!1,G=s.memoizedState,w.state=G,zl(s,c,w,d);var ue=s.memoizedState;x!==J||G!==ue||Jt.current||ls?(typeof ie=="function"&&(dh(s,a,ie,c),ue=s.memoizedState),(z=ls||zp(s,a,z,c,G,ue,N)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ue,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ue,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ue),w.props=c,w.state=ue,w.context=N,c=z):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return yh(n,s,a,c,m,d)}function yh(n,s,a,c,d,m){Zp(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&ip(s,a,!1),br(n,s,m);c=s.stateNode,I0.current=s;var x=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=so(s,n.child,null,m),s.child=so(s,null,x,m)):Kt(n,s,x,m),s.memoizedState=c.state,d&&ip(s,a,!0),s.child}function tm(n){var s=n.stateNode;s.pendingContext?rp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&rp(n,s.context,!1),eh(n,s.containerInfo)}function nm(n,s,a,c,d){return ro(),Kc(d),s.flags|=256,Kt(n,s,a,c),s.child}var vh={dehydrated:null,treeContext:null,retryLane:0};function _h(n){return{baseLanes:n,cachePool:null,transitions:null}}function rm(n,s,a){var c=s.pendingProps,d=nt.current,m=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=n!==null&&n.memoizedState===null?!1:(d&2)!==0),x?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),He(nt,d&1),n===null)return Hc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=lu(w,c,0,null),n=ii(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=_h(a),s.memoizedState=vh,n):wh(s,w));if(d=n.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return x0(n,s,w,c,x,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,x=d.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=ms(d,N),c.subtreeFlags=d.subtreeFlags&14680064),x!==null?m=ms(x,m):(m=ii(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?_h(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=vh,c}return m=n.child,n=m.sibling,c=ms(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function wh(n,s){return s=lu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ql(n,s,a,c){return c!==null&&Kc(c),so(s,n.child,null,a),n=wh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function x0(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=ph(Error(t(422))),Ql(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=lu({mode:"visible",children:c.children},d,0,null),m=ii(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&so(s,n.child,null,w),s.child.memoizedState=_h(w),s.memoizedState=vh,m);if((s.mode&1)===0)return Ql(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var x=c.dgst;return c=x,m=Error(t(419)),c=ph(m,c,void 0),Ql(n,s,w,c)}if(x=(w&n.childLanes)!==0,en||x){if(c=It,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Nr(n,d),$n(c,n,d,-1))}return Lh(),c=ph(Error(t(421))),Ql(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=j0.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,fn=ss(d.nextSibling),dn=s,Ze=!0,Fn=null,n!==null&&(In[xn++]=Cr,In[xn++]=Rr,In[xn++]=Ys,Cr=n.id,Rr=n.overflow,Ys=s),s=wh(s,c.children),s.flags|=4096,s)}function sm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Xc(n.return,s,a)}function Eh(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function im(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(Kt(n,s,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sm(n,a,s);else if(n.tag===19)sm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(He(nt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Bl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Eh(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Bl(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Eh(s,!0,a,null,m);break;case"together":Eh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yl(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function br(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ti|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ms(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ms(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function S0(n,s,a){switch(s.tag){case 3:tm(s),ro();break;case 5:_p(s);break;case 1:Zt(s.type)&&bl(s);break;case 4:eh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;He(Ml,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(He(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?rm(n,s,a):(He(nt,nt.current&1),n=br(n,s,a),n!==null?n.sibling:null);He(nt,nt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return im(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(nt,nt.current),c)break;return null;case 22:case 23:return s.lanes=0,Jp(n,s,a)}return br(n,s,a)}var om,Th,am,lm;om=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Th=function(){},am=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Zs(rr.current);var m=null;switch(a){case"input":d=$r(n,d),c=$r(n,c),m=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),m=[];break;case"textarea":d=Vs(n,d),c=Vs(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Rl)}Ci(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var x=d[z];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in c){var N=c[z];if(x=d?.[z],c.hasOwnProperty(z)&&N!==x&&(N!=null||x!=null))if(z==="style")if(x){for(w in x)!x.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&x[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(m||(m=[]),m.push(z,a)),a=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,x=x?x.__html:void 0,N!=null&&x!==N&&(m=m||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(m=m||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&Qe("scroll",n),m||x===N||(m=[])):(m=m||[]).push(z,N))}a&&(m=m||[]).push("style",a);var z=m;(s.updateQueue=z)&&(s.flags|=4)}},lm=function(n,s,a,c){a!==c&&(s.flags|=4)};function ca(n,s){if(!Ze)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function A0(n,s,a){var c=s.pendingProps;switch(Wc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Zt(s.type)&&Pl(),Mt(s),null;case 3:return c=s.stateNode,ao(),Ye(Jt),Ye(Lt),rh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ll(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fn!==null&&(Dh(Fn),Fn=null))),Th(n,s),Mt(s),null;case 5:th(s);var d=Zs(ia.current);if(a=s.type,n!==null&&s.stateNode!=null)am(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(n=Zs(rr.current),Ll(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[nr]=s,c[ea]=m,n=(s.mode&1)!==0,a){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(d=0;d<Xo.length;d++)Qe(Xo[d],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":Ds(c,m),Qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Qe("invalid",c);break;case"textarea":Ls(c,m),Qe("invalid",c)}Ci(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var x=m[w];w==="children"?typeof x=="string"?c.textContent!==x&&(m.suppressHydrationWarning!==!0&&Cl(c.textContent,x,n),d=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(m.suppressHydrationWarning!==!0&&Cl(c.textContent,x,n),d=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&Qe("scroll",c)}switch(a){case"input":Qt(c),Oo(c,m,!0);break;case"textarea":Qt(c),Ii(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Rl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=s,n[ea]=c,om(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ri(a,c),a){case"dialog":Qe("cancel",n),Qe("close",n),d=c;break;case"iframe":case"object":case"embed":Qe("load",n),d=c;break;case"video":case"audio":for(d=0;d<Xo.length;d++)Qe(Xo[d],n);d=c;break;case"source":Qe("error",n),d=c;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),d=c;break;case"details":Qe("toggle",n),d=c;break;case"input":Ds(n,c),d=$r(n,c),Qe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Qe("invalid",n);break;case"textarea":Ls(n,c),d=Vs(n,c),Qe("invalid",n);break;default:d=c}Ci(a,d),x=d;for(m in x)if(x.hasOwnProperty(m)){var N=x[m];m==="style"?Ai(n,N):m==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&xi(n,N)):m==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&yr(n,N):typeof N=="number"&&yr(n,""+N):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?N!=null&&m==="onScroll"&&Qe("scroll",n):N!=null&&ae(n,m,N,w))}switch(a){case"input":Qt(n),Oo(n,c,!1);break;case"textarea":Qt(n),Ii(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Re(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Gn(n,!!c.multiple,m,!1):c.defaultValue!=null&&Gn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Rl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(n&&s.stateNode!=null)lm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zs(ia.current),Zs(rr.current),Ll(s)){if(c=s.stateNode,a=s.memoizedProps,c[nr]=s,(m=c.nodeValue!==a)&&(n=dn,n!==null))switch(n.tag){case 3:Cl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=s,s.stateNode=c}return Mt(s),null;case 13:if(Ye(nt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)hp(),ro(),s.flags|=98560,m=!1;else if(m=Ll(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[nr]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),m=!1}else Fn!==null&&(Dh(Fn),Fn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?yt===0&&(yt=3):Lh())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return ao(),Th(n,s),n===null&&Jo(s.stateNode.containerInfo),Mt(s),null;case 10:return Yc(s.type._context),Mt(s),null;case 17:return Zt(s.type)&&Pl(),Mt(s),null;case 19:if(Ye(nt),m=s.memoizedState,m===null)return Mt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)ca(m,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Bl(n),w!==null){for(s.flags|=128,ca(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return He(nt,nt.current&1|2),s.child}n=n.sibling}m.tail!==null&&qe()>ho&&(s.flags|=128,c=!0,ca(m,!1),s.lanes=4194304)}else{if(!c)if(n=Bl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ca(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Ze)return Mt(s),null}else 2*qe()-m.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,c=!0,ca(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=qe(),s.sibling=null,a=nt.current,He(nt,c?a&1|2:a&1),s):(Mt(s),null);case 22:case 23:return Vh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(pn&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function k0(n,s){switch(Wc(s),s.tag){case 1:return Zt(s.type)&&Pl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ao(),Ye(Jt),Ye(Lt),rh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return th(s),null;case 13:if(Ye(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ye(nt),null;case 4:return ao(),null;case 10:return Yc(s.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var Xl=!1,Ft=!1,C0=typeof WeakSet=="function"?WeakSet:Set,le=null;function uo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(n,s,c)}else a.current=null}function Ih(n,s,a){try{a()}catch(c){it(n,s,c)}}var um=!1;function R0(n,s){if(Vc=ts,n=zf(),kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,x=-1,N=-1,z=0,Y=0,J=n,G=null;t:for(;;){for(var ie;J!==a||d!==0&&J.nodeType!==3||(x=w+d),J!==m||c!==0&&J.nodeType!==3||(N=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===n)break t;if(G===a&&++z===d&&(x=w),G===m&&++Y===c&&(N=w),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}a=x===-1||N===-1?null:{start:x,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:n,selectionRange:a},ts=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ue=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,ot=ue.memoizedState,F=s.stateNode,D=F.getSnapshotBeforeUpdate(s.elementType===s.type?de:Un(s.type,de),ot);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){it(s,s.return,ee)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ue=um,um=!1,ue}function ha(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Ih(s,a,m)}d=d.next}while(d!==c)}}function Jl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function xh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function cm(n){var s=n.alternate;s!==null&&(n.alternate=null,cm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[nr],delete s[ea],delete s[Uc],delete s[h0],delete s[d0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hm(n){return n.tag===5||n.tag===3||n.tag===4}function dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Rl));else if(c!==4&&(n=n.child,n!==null))for(Sh(n,s,a),n=n.sibling;n!==null;)Sh(n,s,a),n=n.sibling}function Ah(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Ah(n,s,a),n=n.sibling;n!==null;)Ah(n,s,a),n=n.sibling}var Rt=null,zn=!1;function cs(n,s,a){for(a=a.child;a!==null;)fm(n,s,a),a=a.sibling}function fm(n,s,a){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(zs,a)}catch{}switch(a.tag){case 5:Ft||uo(a,s);case 6:var c=Rt,d=zn;Rt=null,cs(n,s,a),Rt=c,zn=d,Rt!==null&&(zn?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(zn?(n=Rt,a=a.stateNode,n.nodeType===8?Fc(n.parentNode,a):n.nodeType===1&&Fc(n,a),Ln(n)):Fc(Rt,a.stateNode));break;case 4:c=Rt,d=zn,Rt=a.stateNode.containerInfo,zn=!0,cs(n,s,a),Rt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Ih(a,s,w),d=d.next}while(d!==c)}cs(n,s,a);break;case 1:if(!Ft&&(uo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){it(a,s,x)}cs(n,s,a);break;case 21:cs(n,s,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,cs(n,s,a),Ft=c):cs(n,s,a);break;default:cs(n,s,a)}}function pm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new C0),s.forEach(function(c){var d=M0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Bn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:Rt=x.stateNode,zn=!1;break e;case 3:Rt=x.stateNode.containerInfo,zn=!0;break e;case 4:Rt=x.stateNode.containerInfo,zn=!0;break e}x=x.return}if(Rt===null)throw Error(t(160));fm(m,w,d),Rt=null,zn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(z){it(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mm(s,n),s=s.sibling}function mm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Bn(s,n),ir(n),c&4){try{ha(3,n,n.return),Jl(3,n)}catch(de){it(n,n.return,de)}try{ha(5,n,n.return)}catch(de){it(n,n.return,de)}}break;case 1:Bn(s,n),ir(n),c&512&&a!==null&&uo(a,a.return);break;case 5:if(Bn(s,n),ir(n),c&512&&a!==null&&uo(a,a.return),n.flags&32){var d=n.stateNode;try{yr(d,"")}catch(de){it(n,n.return,de)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,x=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{x==="input"&&m.type==="radio"&&m.name!=null&&Ei(d,m),Ri(x,w);var z=Ri(x,m);for(w=0;w<N.length;w+=2){var Y=N[w],J=N[w+1];Y==="style"?Ai(d,J):Y==="dangerouslySetInnerHTML"?xi(d,J):Y==="children"?yr(d,J):ae(d,Y,J,z)}switch(x){case"input":Ti(d,m);break;case"textarea":js(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ie=m.value;ie!=null?Gn(d,!!m.multiple,ie,!1):G!==!!m.multiple&&(m.defaultValue!=null?Gn(d,!!m.multiple,m.defaultValue,!0):Gn(d,!!m.multiple,m.multiple?[]:"",!1))}d[ea]=m}catch(de){it(n,n.return,de)}}break;case 6:if(Bn(s,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(de){it(n,n.return,de)}}break;case 3:if(Bn(s,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(de){it(n,n.return,de)}break;case 4:Bn(s,n),ir(n);break;case 13:Bn(s,n),ir(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Rh=qe())),c&4&&pm(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(z=Ft)||Y,Bn(s,n),Ft=z):Bn(s,n),ir(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(le=n,Y=n.child;Y!==null;){for(J=le=Y;le!==null;){switch(G=le,ie=G.child,G.tag){case 0:case 11:case 14:case 15:ha(4,G,G.return);break;case 1:uo(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(de){it(c,a,de)}}break;case 5:uo(G,G.return);break;case 22:if(G.memoizedState!==null){vm(J);continue}}ie!==null?(ie.return=G,le=ie):vm(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(x=J.stateNode,N=J.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,x.style.display=Si("display",w))}catch(de){it(n,n.return,de)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(de){it(n,n.return,de)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Bn(s,n),ir(n),c&4&&pm(n);break;case 21:break;default:Bn(s,n),ir(n)}}function ir(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(hm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(yr(d,""),c.flags&=-33);var m=dm(n);Ah(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,x=dm(n);Sh(n,x,w);break;default:throw Error(t(161))}}catch(N){it(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function N0(n,s,a){le=n,gm(n)}function gm(n,s,a){for(var c=(n.mode&1)!==0;le!==null;){var d=le,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Xl;if(!w){var x=d.alternate,N=x!==null&&x.memoizedState!==null||Ft;x=Xl;var z=Ft;if(Xl=w,(Ft=N)&&!z)for(le=d;le!==null;)w=le,N=w.child,w.tag===22&&w.memoizedState!==null?_m(d):N!==null?(N.return=w,le=N):_m(d);for(;m!==null;)le=m,gm(m),m=m.sibling;le=d,Xl=x,Ft=z}ym(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,le=m):ym(n)}}function ym(n){for(;le!==null;){var s=le;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Jl(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Un(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&vp(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}vp(s,w,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Ln(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&xh(s)}catch(G){it(s,s.return,G)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function vm(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function _m(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Jl(4,s)}catch(N){it(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(N){it(s,d,N)}}var m=s.return;try{xh(s)}catch(N){it(s,m,N)}break;case 5:var w=s.return;try{xh(s)}catch(N){it(s,w,N)}}}catch(N){it(s,s.return,N)}if(s===n){le=null;break}var x=s.sibling;if(x!==null){x.return=s.return,le=x;break}le=s.return}}var P0=Math.ceil,Zl=oe.ReactCurrentDispatcher,kh=oe.ReactCurrentOwner,kn=oe.ReactCurrentBatchConfig,je=0,It=null,dt=null,Nt=0,pn=0,co=is(0),yt=0,da=null,ti=0,eu=0,Ch=0,fa=null,tn=null,Rh=0,ho=1/0,Dr=null,tu=!1,Nh=null,hs=null,nu=!1,ds=null,ru=0,pa=0,Ph=null,su=-1,iu=0;function Gt(){return(je&6)!==0?qe():su!==-1?su:su=qe()}function fs(n){return(n.mode&1)===0?1:(je&2)!==0&&Nt!==0?Nt&-Nt:p0.transition!==null?(iu===0&&(iu=$s()),iu):(n=be,n!==0||(n=window.event,n=n===void 0?16:Bo(n.type)),n)}function $n(n,s,a,c){if(50<pa)throw pa=0,Ph=null,Error(t(185));Xr(n,a,c),((je&2)===0||n!==It)&&(n===It&&((je&2)===0&&(eu|=a),yt===4&&ps(n,Nt)),nn(n,c),a===1&&je===0&&(s.mode&1)===0&&(ho=qe()+500,Dl&&as()))}function nn(n,s){var a=n.callbackNode;Er(n,s);var c=Bs(n,n===It?Nt:0);if(c===0)a!==null&&jo(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&jo(a),s===1)n.tag===0?f0(Em.bind(null,n)):op(Em.bind(null,n)),u0(function(){(je&6)===0&&as()}),a=null;else{switch(Zr(c)){case 1:a=Us;break;case 4:a=Gr;break;case 16:a=wn;break;case 536870912:a=il;break;default:a=wn}a=Rm(a,wm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function wm(n,s){if(su=-1,iu=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var c=Bs(n,n===It?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=ou(n,c);else{s=c;var d=je;je|=2;var m=Im();(It!==n||Nt!==s)&&(Dr=null,ho=qe()+500,ri(n,s));do try{O0();break}catch(x){Tm(n,x)}while(!0);Qc(),Zl.current=m,je=d,dt!==null?s=0:(It=null,Nt=0,s=yt)}if(s!==0){if(s===2&&(d=un(n),d!==0&&(c=d,s=bh(n,d))),s===1)throw a=da,ri(n,0),ps(n,c),nn(n,qe()),a;if(s===6)ps(n,c);else{if(d=n.current.alternate,(c&30)===0&&!b0(d)&&(s=ou(n,c),s===2&&(m=un(n),m!==0&&(c=m,s=bh(n,m))),s===1))throw a=da,ri(n,0),ps(n,c),nn(n,qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:si(n,tn,Dr);break;case 3:if(ps(n,c),(c&130023424)===c&&(s=Rh+500-qe(),10<s)){if(Bs(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Gt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Mc(si.bind(null,n,tn,Dr),s);break}si(n,tn,Dr);break;case 4:if(ps(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-qt(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*P0(c/1960))-c,10<c){n.timeoutHandle=Mc(si.bind(null,n,tn,Dr),c);break}si(n,tn,Dr);break;case 5:si(n,tn,Dr);break;default:throw Error(t(329))}}}return nn(n,qe()),n.callbackNode===a?wm.bind(null,n):null}function bh(n,s){var a=fa;return n.current.memoizedState.isDehydrated&&(ri(n,s).flags|=256),n=ou(n,s),n!==2&&(s=tn,tn=a,s!==null&&Dh(s)),n}function Dh(n){tn===null?tn=n:tn.push.apply(tn,n)}function b0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Mn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s){for(s&=~Ch,s&=~eu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-qt(s),c=1<<a;n[a]=-1,s&=~c}}function Em(n){if((je&6)!==0)throw Error(t(327));fo();var s=Bs(n,0);if((s&1)===0)return nn(n,qe()),null;var a=ou(n,s);if(n.tag!==0&&a===2){var c=un(n);c!==0&&(s=c,a=bh(n,c))}if(a===1)throw a=da,ri(n,0),ps(n,s),nn(n,qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,si(n,tn,Dr),nn(n,qe()),null}function Oh(n,s){var a=je;je|=1;try{return n(s)}finally{je=a,je===0&&(ho=qe()+500,Dl&&as())}}function ni(n){ds!==null&&ds.tag===0&&(je&6)===0&&fo();var s=je;je|=1;var a=kn.transition,c=be;try{if(kn.transition=null,be=1,n)return n()}finally{be=c,kn.transition=a,je=s,(je&6)===0&&as()}}function Vh(){pn=co.current,Ye(co)}function ri(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,l0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(Wc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Pl();break;case 3:ao(),Ye(Jt),Ye(Lt),rh();break;case 5:th(c);break;case 4:ao();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Yc(c.type._context);break;case 22:case 23:Vh()}a=a.return}if(It=n,dt=n=ms(n.current,null),Nt=pn=s,yt=0,da=null,Ch=eu=ti=0,tn=fa=null,Js!==null){for(s=0;s<Js.length;s++)if(a=Js[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Js=null}return n}function Tm(n,s){do{var a=dt;try{if(Qc(),$l.current=Kl,Wl){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Wl=!1}if(ei=0,Tt=gt=rt=null,oa=!1,aa=0,kh.current=null,a===null||a.return===null){yt=1,da=s,dt=null;break}e:{var m=n,w=a.return,x=a,N=s;if(s=Nt,x.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,Y=x,J=Y.tag;if((Y.mode&1)===0&&(J===0||J===11||J===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ie=Kp(w);if(ie!==null){ie.flags&=-257,Gp(ie,w,x,m,s),ie.mode&1&&Hp(m,z,s),s=ie,N=z;var ue=s.updateQueue;if(ue===null){var de=new Set;de.add(N),s.updateQueue=de}else ue.add(N);break e}else{if((s&1)===0){Hp(m,z,s),Lh();break e}N=Error(t(426))}}else if(Ze&&x.mode&1){var ot=Kp(w);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Gp(ot,w,x,m,s),Kc(lo(N,x));break e}}m=N=lo(N,x),yt!==4&&(yt=2),fa===null?fa=[m]:fa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var F=Wp(m,N,s);yp(m,F);break e;case 1:x=N;var D=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(hs===null||!hs.has(U)))){m.flags|=65536,s&=-s,m.lanes|=s;var ee=qp(m,x,s);yp(m,ee);break e}}m=m.return}while(m!==null)}Sm(a)}catch(pe){s=pe,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Im(){var n=Zl.current;return Zl.current=Kl,n===null?Kl:n}function Lh(){(yt===0||yt===3||yt===2)&&(yt=4),It===null||(ti&268435455)===0&&(eu&268435455)===0||ps(It,Nt)}function ou(n,s){var a=je;je|=2;var c=Im();(It!==n||Nt!==s)&&(Dr=null,ri(n,s));do try{D0();break}catch(d){Tm(n,d)}while(!0);if(Qc(),je=a,Zl.current=c,dt!==null)throw Error(t(261));return It=null,Nt=0,yt}function D0(){for(;dt!==null;)xm(dt)}function O0(){for(;dt!==null&&!rl();)xm(dt)}function xm(n){var s=Cm(n.alternate,n,pn);n.memoizedProps=n.pendingProps,s===null?Sm(n):dt=s,kh.current=null}function Sm(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=A0(a,s,pn),a!==null){dt=a;return}}else{if(a=k0(a,s),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yt=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);yt===0&&(yt=5)}function si(n,s,a){var c=be,d=kn.transition;try{kn.transition=null,be=1,V0(n,s,a,c)}finally{kn.transition=d,be=c}return null}function V0(n,s,a,c){do fo();while(ds!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(We(n,m),n===It&&(dt=It=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||nu||(nu=!0,Rm(wn,function(){return fo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=kn.transition,kn.transition=null;var w=be;be=1;var x=je;je|=4,kh.current=null,R0(n,a),mm(a,n),t0(Lc),ts=!!Vc,Lc=Vc=null,n.current=a,N0(a),_c(),je=x,be=w,kn.transition=m}else n.current=a;if(nu&&(nu=!1,ds=n,ru=d),m=n.pendingLanes,m===0&&(hs=null),ol(a.stateNode),nn(n,qe()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(tu)throw tu=!1,n=Nh,Nh=null,n;return(ru&1)!==0&&n.tag!==0&&fo(),m=n.pendingLanes,(m&1)!==0?n===Ph?pa++:(pa=0,Ph=n):pa=0,as(),null}function fo(){if(ds!==null){var n=Zr(ru),s=kn.transition,a=be;try{if(kn.transition=null,be=16>n?16:n,ds===null)var c=!1;else{if(n=ds,ds=null,ru=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,le=n.current;le!==null;){var m=le,w=m.child;if((le.flags&16)!==0){var x=m.deletions;if(x!==null){for(var N=0;N<x.length;N++){var z=x[N];for(le=z;le!==null;){var Y=le;switch(Y.tag){case 0:case 11:case 15:ha(8,Y,m)}var J=Y.child;if(J!==null)J.return=Y,le=J;else for(;le!==null;){Y=le;var G=Y.sibling,ie=Y.return;if(cm(Y),Y===z){le=null;break}if(G!==null){G.return=ie,le=G;break}le=ie}}}var ue=m.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var ot=de.sibling;de.sibling=null,de=ot}while(de!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,le=w;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ha(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,le=F;break e}le=m.return}}var D=n.current;for(le=D;le!==null;){w=le;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,le=U;else e:for(w=D;le!==null;){if(x=le,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Jl(9,x)}}catch(pe){it(x,x.return,pe)}if(x===w){le=null;break e}var ee=x.sibling;if(ee!==null){ee.return=x.return,le=ee;break e}le=x.return}}if(je=d,as(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(zs,n)}catch{}c=!0}return c}finally{be=a,kn.transition=s}}return!1}function Am(n,s,a){s=lo(a,s),s=Wp(n,s,1),n=us(n,s,1),s=Gt(),n!==null&&(Xr(n,1,s),nn(n,s))}function it(n,s,a){if(n.tag===3)Am(n,n,a);else for(;s!==null;){if(s.tag===3){Am(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(hs===null||!hs.has(c))){n=lo(a,n),n=qp(s,n,1),s=us(s,n,1),n=Gt(),s!==null&&(Xr(s,1,n),nn(s,n));break}}s=s.return}}function L0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Gt(),n.pingedLanes|=n.suspendedLanes&a,It===n&&(Nt&a)===a&&(yt===4||yt===3&&(Nt&130023424)===Nt&&500>qe()-Rh?ri(n,0):Ch|=a),nn(n,s)}function km(n,s){s===0&&((n.mode&1)===0?s=1:(s=Vi,Vi<<=1,(Vi&130023424)===0&&(Vi=4194304)));var a=Gt();n=Nr(n,s),n!==null&&(Xr(n,s,a),nn(n,a))}function j0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),km(n,a)}function M0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),km(n,a)}var Cm;Cm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jt.current)en=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return en=!1,S0(n,s,a);en=(n.flags&131072)!==0}else en=!1,Ze&&(s.flags&1048576)!==0&&ap(s,Vl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Yl(n,s),n=s.pendingProps;var d=eo(s,Lt.current);oo(s,a),d=oh(null,s,c,n,d,a);var m=ah();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(c)?(m=!0,bl(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Zc(s),d.updater=Gl,s.stateNode=d,d._reactInternals=s,fh(s,c,n,a),s=yh(null,s,c,!0,m,a)):(s.tag=0,Ze&&m&&$c(s),Kt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Yl(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=U0(c),n=Un(c,n),d){case 0:s=gh(null,s,c,n,a);break e;case 1:s=em(null,s,c,n,a);break e;case 11:s=Qp(null,s,c,n,a);break e;case 14:s=Yp(null,s,c,Un(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),gh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),em(n,s,c,d,a);case 3:e:{if(tm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,gp(n,s),zl(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=lo(Error(t(423)),s),s=nm(n,s,c,a,d);break e}else if(c!==d){d=lo(Error(t(424)),s),s=nm(n,s,c,a,d);break e}else for(fn=ss(s.stateNode.containerInfo.firstChild),dn=s,Ze=!0,Fn=null,a=pp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),c===d){s=br(n,s,a);break e}Kt(n,s,c,a)}s=s.child}return s;case 5:return _p(s),n===null&&Hc(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,jc(c,d)?w=null:m!==null&&jc(c,m)&&(s.flags|=32),Zp(n,s),Kt(n,s,w,a),s.child;case 6:return n===null&&Hc(s),null;case 13:return rm(n,s,a);case 4:return eh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=so(s,null,c,a):Kt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),Qp(n,s,c,d,a);case 7:return Kt(n,s,s.pendingProps,a),s.child;case 8:return Kt(n,s,s.pendingProps.children,a),s.child;case 12:return Kt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,He(Ml,c._currentValue),c._currentValue=w,m!==null)if(Mn(m.value,w)){if(m.children===d.children&&!Jt.current){s=br(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var x=m.dependencies;if(x!==null){w=m.child;for(var N=x.firstContext;N!==null;){if(N.context===c){if(m.tag===1){N=Pr(-1,a&-a),N.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),z.pending=N}}m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),Xc(m.return,a,s),x.lanes|=a;break}N=N.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),Xc(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Kt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,oo(s,a),d=Sn(d),c=c(d),s.flags|=1,Kt(n,s,c,a),s.child;case 14:return c=s.type,d=Un(c,s.pendingProps),d=Un(c.type,d),Yp(n,s,c,d,a);case 15:return Xp(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),Yl(n,s),s.tag=1,Zt(c)?(n=!0,bl(s)):n=!1,oo(s,a),Bp(s,c,d),fh(s,c,d,a),yh(null,s,c,!0,n,a);case 19:return im(n,s,a);case 22:return Jp(n,s,a)}throw Error(t(156,s.tag))};function Rm(n,s){return Di(n,s)}function F0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,a,c){return new F0(n,s,a,c)}function jh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function U0(n){if(typeof n=="function")return jh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===wt)return 14}return 2}function ms(n,s){var a=n.alternate;return a===null?(a=Cn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function au(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")jh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return ii(a.children,d,m,s);case I:w=8,d|=8;break;case C:return n=Cn(12,a,s,d|2),n.elementType=C,n.lanes=m,n;case A:return n=Cn(13,a,s,d),n.elementType=A,n.lanes=m,n;case Ke:return n=Cn(19,a,s,d),n.elementType=Ke,n.lanes=m,n;case Ue:return lu(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case O:w=9;break e;case j:w=11;break e;case wt:w=14;break e;case At:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Cn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function ii(n,s,a,c){return n=Cn(7,n,c,s),n.lanes=a,n}function lu(n,s,a,c){return n=Cn(22,n,c,s),n.elementType=Ue,n.lanes=a,n.stateNode={isHidden:!1},n}function Mh(n,s,a){return n=Cn(6,n,null,s),n.lanes=a,n}function Fh(n,s,a){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function z0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yr(0),this.expirationTimes=Yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Uh(n,s,a,c,d,m,w,x,N){return n=new z0(n,s,a,x,N),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Cn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(m),n}function B0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Nm(n){if(!n)return os;n=n._reactInternals;e:{if(Pn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return sp(n,a,s)}return s}function Pm(n,s,a,c,d,m,w,x,N){return n=Uh(a,c,!0,n,d,m,w,x,N),n.context=Nm(null),a=n.current,c=Gt(),d=fs(a),m=Pr(c,d),m.callback=s??null,us(a,m,d),n.current.lanes=d,Xr(n,d,c),nn(n,c),n}function uu(n,s,a,c){var d=s.current,m=Gt(),w=fs(d);return a=Nm(a),s.context===null?s.context=a:s.pendingContext=a,s=Pr(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=us(d,s,w),n!==null&&($n(n,d,w,m),Ul(n,d,w)),w}function cu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function zh(n,s){bm(n,s),(n=n.alternate)&&bm(n,s)}function $0(){return null}var Dm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Bh(n){this._internalRoot=n}hu.prototype.render=Bh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));uu(n,s,null,null)},hu.prototype.unmount=Bh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ni(function(){uu(null,n,null,null)}),s[Ar]=null}};function hu(n){this._internalRoot=n}hu.prototype.unstable_scheduleHydration=function(n){if(n){var s=hl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Jn.length&&s!==0&&s<Jn[a].priority;a++);Jn.splice(a,0,n),a===0&&pl(n)}};function $h(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function du(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Om(){}function W0(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var z=cu(w);m.call(z)}}var w=Pm(s,c,n,0,null,!1,!1,"",Om);return n._reactRootContainer=w,n[Ar]=w.current,Jo(n.nodeType===8?n.parentNode:n),ni(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var x=c;c=function(){var z=cu(N);x.call(z)}}var N=Uh(n,0,!1,null,null,!1,!1,"",Om);return n._reactRootContainer=N,n[Ar]=N.current,Jo(n.nodeType===8?n.parentNode:n),ni(function(){uu(s,N,a,c)}),N}function fu(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var x=d;d=function(){var N=cu(w);x.call(N)}}uu(s,w,n,d)}else w=W0(a,s,n,d,c);return cu(w)}ul=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Qr(s.pendingLanes);a!==0&&(Jr(s,a|1),nn(s,qe()),(je&6)===0&&(ho=qe()+500,as()))}break;case 13:ni(function(){var c=Nr(n,1);if(c!==null){var d=Gt();$n(c,n,1,d)}}),zh(n,1)}},Li=function(n){if(n.tag===13){var s=Nr(n,134217728);if(s!==null){var a=Gt();$n(s,n,134217728,a)}zh(n,134217728)}},cl=function(n){if(n.tag===13){var s=fs(n),a=Nr(n,s);if(a!==null){var c=Gt();$n(a,n,s,c)}zh(n,s)}},hl=function(){return be},dl=function(n,s){var a=be;try{return be=n,s()}finally{be=a}},vr=function(n,s,a){switch(s){case"input":if(Ti(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Nl(c);if(!d)throw Error(t(90));Br(c),Ti(c,d)}}}break;case"textarea":js(n,a);break;case"select":s=a.value,s!=null&&Gn(n,!!a.multiple,s,!1)}},_r=Oh,ct=ni;var q0={usingClientEntryPoint:!1,Events:[ta,Ji,Nl,vn,Ms,Oh]},ma={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Lo(n),n===null?null:n.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{zs=pu.inject(H0),ln=pu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0,rn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(s))throw Error(t(200));return B0(n,s,null,a)},rn.createRoot=function(n,s){if(!$h(n))throw Error(t(299));var a=!1,c="",d=Dm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Uh(n,1,!1,null,null,a,!1,c,d),n[Ar]=s.current,Jo(n.nodeType===8?n.parentNode:n),new Bh(s)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Lo(s),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return ni(n)},rn.hydrate=function(n,s,a){if(!du(s))throw Error(t(200));return fu(null,n,s,!0,a)},rn.hydrateRoot=function(n,s,a){if(!$h(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=Dm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Pm(s,null,n,1,a??null,d,!1,m,w),n[Ar]=s.current,Jo(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new hu(s)},rn.render=function(n,s,a){if(!du(s))throw Error(t(200));return fu(null,n,s,!1,a)},rn.unmountComponentAtNode=function(n){if(!du(n))throw Error(t(40));return n._reactRootContainer?(ni(function(){fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1},rn.unstable_batchedUpdates=Oh,rn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!du(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return fu(n,s,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Bm;function ew(){if(Bm)return Hh.exports;Bm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hh.exports=Z0(),Hh.exports}var $m;function tw(){if($m)return mu;$m=1;var r=ew();return mu.createRoot=r.createRoot,mu.hydrateRoot=r.hydrateRoot,mu}var nw=tw();const rw=vy(nw);var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},sw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,S=(l&3)<<4|f>>4;let P=(f&15)<<2|_>>6,V=_&63;g||(V=64,h||(P=64)),i.push(t[E],t[S],t[P],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_y(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):sw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||_==null||S==null)throw new iw;const P=l<<2|f>>4;if(i.push(P),_!==64){const V=f<<4&240|_>>2;if(i.push(V),S!==64){const $=_<<6&192|S;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ow=function(r){const e=_y(r);return wy.encodeByteArray(e,!0)},Ou=function(r){return ow(r).replace(/\./g,"")},Ey=function(r){try{return wy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=()=>aw().__FIREBASE_DEFAULTS__,uw=()=>{if(typeof process>"u"||typeof Wm>"u")return;const r=Wm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},cw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ey(r[1]);return e&&JSON.parse(e)},Zu=()=>{try{return lw()||uw()||cw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ty=r=>{var e,t;return(t=(e=Zu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Iy=r=>{const e=Ty(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xy=()=>{var r;return(r=Zu())===null||r===void 0?void 0:r.config},Sy=r=>{var e;return(e=Zu())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ou(JSON.stringify(t)),Ou(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function fw(){var r;const e=(r=Zu())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yw(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function vw(){return!fw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _w(){try{return typeof indexedDB=="object"}catch{return!1}}function ww(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="FirebaseError";class mr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ew,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Tw(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new mr(o,f,i)}}function Tw(r,e){return r.replace(Iw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Iw=/\{\$([^}]+)}/g;function xw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Vu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(qm(l)&&qm(h)){if(!Vu(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function wa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ea(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Sw(r,e){const t=new Aw(r,e);return t.subscribe.bind(t)}class Aw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Qh),o.error===void 0&&(o.error=Qh),o.complete===void 0&&(o.complete=Qh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r){return r&&r._delegate?r._delegate:r}class As{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new hw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nw(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Rw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rw(r){return r===oi?void 0:r}function Nw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Cw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const bw={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Dw=De.INFO,Ow={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Vw=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Ow[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=Vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const Lw=(r,e)=>e.some(t=>r instanceof t);let Hm,Km;function jw(){return Hm||(Hm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mw(){return Km||(Km=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ky=new WeakMap,ad=new WeakMap,Cy=new WeakMap,Yh=new WeakMap,Od=new WeakMap;function Fw(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Is(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ky.set(t,r)}).catch(()=>{}),Od.set(e,r),e}function Uw(r){if(ad.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});ad.set(r,e)}let ld={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ad.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Cy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zw(r){ld=r(ld)}function Bw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Xh(this),e,...t);return Cy.set(i,e.sort?e.sort():[e]),Is(i)}:Mw().includes(r)?function(...e){return r.apply(Xh(this),e),Is(ky.get(this))}:function(...e){return Is(r.apply(Xh(this),e))}}function $w(r){return typeof r=="function"?Bw(r):(r instanceof IDBTransaction&&Uw(r),Lw(r,jw())?new Proxy(r,ld):r)}function Is(r){if(r instanceof IDBRequest)return Fw(r);if(Yh.has(r))return Yh.get(r);const e=$w(r);return e!==r&&(Yh.set(r,e),Od.set(e,r)),e}const Xh=r=>Od.get(r);function Ww(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Is(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Is(h.result),g.oldVersion,g.newVersion,Is(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const qw=["get","getKey","getAll","getAllKeys","count"],Hw=["put","add","delete","clear"],Jh=new Map;function Gm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Hw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||qw.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&g.done]))[0]};return Jh.set(e,l),l}zw(r=>({...r,get:(e,t,i)=>Gm(e,t)||r.get(e,t,i),has:(e,t)=>!!Gm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Gw(r){const e=r.getComponent();return e?.type==="VERSION"}const ud="@firebase/app",Qm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Dd("@firebase/app"),Qw="@firebase/app-compat",Yw="@firebase/analytics-compat",Xw="@firebase/analytics",Jw="@firebase/app-check-compat",Zw="@firebase/app-check",eE="@firebase/auth",tE="@firebase/auth-compat",nE="@firebase/database",rE="@firebase/data-connect",sE="@firebase/database-compat",iE="@firebase/functions",oE="@firebase/functions-compat",aE="@firebase/installations",lE="@firebase/installations-compat",uE="@firebase/messaging",cE="@firebase/messaging-compat",hE="@firebase/performance",dE="@firebase/performance-compat",fE="@firebase/remote-config",pE="@firebase/remote-config-compat",mE="@firebase/storage",gE="@firebase/storage-compat",yE="@firebase/firestore",vE="@firebase/vertexai-preview",_E="@firebase/firestore-compat",wE="firebase",EE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="[DEFAULT]",TE={[ud]:"fire-core",[Qw]:"fire-core-compat",[Xw]:"fire-analytics",[Yw]:"fire-analytics-compat",[Zw]:"fire-app-check",[Jw]:"fire-app-check-compat",[eE]:"fire-auth",[tE]:"fire-auth-compat",[nE]:"fire-rtdb",[rE]:"fire-data-connect",[sE]:"fire-rtdb-compat",[iE]:"fire-fn",[oE]:"fire-fn-compat",[aE]:"fire-iid",[lE]:"fire-iid-compat",[uE]:"fire-fcm",[cE]:"fire-fcm-compat",[hE]:"fire-perf",[dE]:"fire-perf-compat",[fE]:"fire-rc",[pE]:"fire-rc-compat",[mE]:"fire-gcs",[gE]:"fire-gcs-compat",[yE]:"fire-fst",[_E]:"fire-fst-compat",[vE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Map,IE=new Map,hd=new Map;function Ym(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function hi(r){const e=r.name;if(hd.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;hd.set(e,r);for(const t of Lu.values())Ym(t,r);for(const t of IE.values())Ym(t,r);return!0}function ec(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function or(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new za("app","Firebase",xE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=EE;function Ry(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:cd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw xs.create("bad-app-name",{appName:String(o)});if(t||(t=xy()),!t)throw xs.create("no-options");const l=Lu.get(o);if(l){if(Vu(t,l.options)&&Vu(i,l.config))return l;throw xs.create("duplicate-app",{appName:o})}const h=new Pw(o);for(const g of hd.values())h.addComponent(g);const f=new SE(t,i,h);return Lu.set(o,f),f}function Vd(r=cd){const e=Lu.get(r);if(!e&&r===cd&&xy())return Ry();if(!e)throw xs.create("no-app",{appName:r});return e}function ar(r,e,t){var i;let o=(i=TE[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(f.join(" "));return}hi(new As(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="firebase-heartbeat-database",kE=1,Pa="firebase-heartbeat-store";let Zh=null;function Ny(){return Zh||(Zh=Ww(AE,kE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Pa)}catch(t){console.warn(t)}}}}).catch(r=>{throw xs.create("idb-open",{originalErrorMessage:r.message})})),Zh}async function CE(r){try{const t=(await Ny()).transaction(Pa),i=await t.objectStore(Pa).get(Py(r));return await t.done,i}catch(e){if(e instanceof mr)Mr.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function Xm(r,e){try{const i=(await Ny()).transaction(Pa,"readwrite");await i.objectStore(Pa).put(e,Py(r)),await i.done}catch(t){if(t instanceof mr)Mr.warn(t.message);else{const i=xs.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(i.message)}}}function Py(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=1024,NE=30*24*60*60*1e3;class PE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Jm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=NE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jm(),{heartbeatsToSend:i,unsentEntries:o}=bE(this._heartbeatsCache.heartbeats),l=Ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mr.warn(t),""}}}function Jm(){return new Date().toISOString().substring(0,10)}function bE(r,e=RE){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zm(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zm(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class DE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _w()?ww().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zm(r){return Ou(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(r){hi(new As("platform-logger",e=>new Kw(e),"PRIVATE")),hi(new As("heartbeat",e=>new PE(e),"PRIVATE")),ar(ud,Qm,r),ar(ud,Qm,"esm2017"),ar("fire-js","")}OE("");var VE="firebase",LE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(VE,LE,"app");function Ld(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function by(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jE=by,Dy=new za("auth","Firebase",by());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Dd("@firebase/auth");function ME(r,...e){ju.logLevel<=De.WARN&&ju.warn(`Auth (${yi}): ${r}`,...e)}function Iu(r,...e){ju.logLevel<=De.ERROR&&ju.error(`Auth (${yi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(r,...e){throw jd(r,...e)}function lr(r,...e){return jd(r,...e)}function Oy(r,e,t){const i=Object.assign(Object.assign({},jE()),{[e]:t});return new za("auth","Firebase",i).create(e,{appName:r.name})}function jr(r){return Oy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jd(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Dy.create(r,...e)}function we(r,e,...t){if(!r)throw jd(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Iu(e),new Error(e)}function Fr(r,e){r||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function FE(){return eg()==="http:"||eg()==="https:"}function eg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FE()||mw()||"connection"in navigator)?navigator.onLine:!0}function zE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=dw()||gw()}get(){return UE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(r,e){Fr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new $a(3e4,6e4);function Ns(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ps(r,e,t,i,o={}){return Ly(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Ba(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:g},l);return pw()||(_.referrerPolicy="no-referrer"),Vy.fetch()(jy(r,r.config.apiHost,t,f),_)})}async function Ly(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},BE),e);try{const o=new qE(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw gu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,_]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw gu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw gu(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Oy(r,E,_);qn(r,E)}}catch(o){if(o instanceof mr)throw o;qn(r,"network-request-failed",{message:String(o)})}}async function Wa(r,e,t,i,o={}){const l=await Ps(r,e,t,i,o);return"mfaPendingCredential"in l&&qn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function jy(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Md(r.config,o):`${r.config.apiScheme}://${o}`}function WE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),$E.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=lr(r,e,i);return o.customData._tokenResponse=t,o}function tg(r){return r!==void 0&&r.enterprise!==void 0}class HE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function KE(r,e){return Ps(r,"GET","/v2/recaptchaConfig",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(r,e){return Ps(r,"POST","/v1/accounts:delete",e)}async function My(r,e){return Ps(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QE(r,e=!1){const t=_t(r),i=await t.getIdToken(e),o=Fd(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Aa(ed(o.auth_time)),issuedAtTime:Aa(ed(o.iat)),expirationTime:Aa(ed(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ed(r){return Number(r)*1e3}function Fd(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ey(t);return o?JSON.parse(o):(Iu("Failed to decode base64 JWT payload"),null)}catch(o){return Iu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ng(r){const e=Fd(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mr&&YE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function YE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ba(r,My(t,{idToken:i}));we(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Fy(l.providerUserInfo):[],f=ZE(r.providerData,h),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!f?.length,E=g?_:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new fd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,S)}async function JE(r){const e=_t(r);await Mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZE(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Fy(r){return r.map(e=>{var{providerId:t}=e,i=Ld(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(r,e){const t=await Ly(r,{},async()=>{const i=Ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=jy(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Vy.fetch()(h,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tT(r,e){return Ps(r,"POST","/v2/accounts:revokeToken",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=ng(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await eT(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new vo;return i&&(we(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Ld(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new fd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ba(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QE(this,e)}reload(){return JE(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await ba(this,GE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,g,_,E;const S=(i=t.displayName)!==null&&i!==void 0?i:void 0,P=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(f=t.tenantId)!==null&&f!==void 0?f:void 0,b=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,q=(_=t.createdAt)!==null&&_!==void 0?_:void 0,ne=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ae,emailVerified:oe,isAnonymous:he,providerData:Z,stsTokenManager:R}=t;we(ae&&R,e,"internal-error");const I=vo.fromJSON(this.name,R);we(typeof ae=="string",e,"internal-error"),ys(S,e.name),ys(P,e.name),we(typeof oe=="boolean",e,"internal-error"),we(typeof he=="boolean",e,"internal-error"),ys(V,e.name),ys($,e.name),ys(W,e.name),ys(b,e.name),ys(q,e.name),ys(ne,e.name);const C=new Vr({uid:ae,auth:e,email:P,emailVerified:oe,displayName:S,isAnonymous:he,photoURL:$,phoneNumber:V,tenantId:W,stsTokenManager:I,createdAt:q,lastLoginAt:ne});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(k=>Object.assign({},k))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new vo;o.updateFromServerResponse(t);const l=new Vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Fy(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new vo;f.updateFromIdToken(i);const g=new Vr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new fd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;function Lr(r){Fr(r instanceof Function,"Expected a class definition");let e=rg.get(r);return e?(Fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,rg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Uy.type="NONE";const sg=Uy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(r,e,t){return`firebase:${r}:${e}:${t}`}class _o{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=xu(this.userKey,o.apiKey,l),this.fullPersistenceKey=xu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _o(Lr(sg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Lr(sg);const h=xu(i,e.config.apiKey,e.name);let f=null;for(const _ of t)try{const E=await _._get(h);if(E){const S=Vr._fromJSON(e,E);_!==l&&(f=S),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new _o(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new _o(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hy(e))return"Blackberry";if(Ky(e))return"Webos";if(By(e))return"Safari";if((e.includes("chrome/")||$y(e))&&!e.includes("edge/"))return"Chrome";if(qy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function zy(r=$t()){return/firefox\//i.test(r)}function By(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $y(r=$t()){return/crios\//i.test(r)}function Wy(r=$t()){return/iemobile/i.test(r)}function qy(r=$t()){return/android/i.test(r)}function Hy(r=$t()){return/blackberry/i.test(r)}function Ky(r=$t()){return/webos/i.test(r)}function Ud(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function nT(r=$t()){var e;return Ud(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rT(){return yw()&&document.documentMode===10}function Gy(r=$t()){return Ud(r)||qy(r)||Ky(r)||Hy(r)||/windows phone/i.test(r)||Wy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(r,e=[]){let t;switch(r){case"Browser":t=ig($t());break;case"Worker":t=`${ig($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(r,e={}){return Ps(r,"GET","/v2/passwordPolicy",Ns(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=6;class aT{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:oT,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new og(this),this.idTokenSubscription=new og(this),this.beforeStateQueue=new sT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await My(this,{idToken:e}),i=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(jr(this));const t=e?_t(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iT(this),t=new aT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tT(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ME(`Error while retrieving App Check token: ${t.error}`),t?.token}}function vi(r){return _t(r)}class og{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sw(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uT(r){tc=r}function Yy(r){return tc.loadJS(r)}function cT(){return tc.recaptchaEnterpriseScript}function hT(){return tc.gapiScript}function dT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const fT="recaptcha-enterprise",pT="NO_RECAPTCHA";class mT{constructor(e){this.type=fT,this.auth=vi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{KE(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const _=new HE(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;tg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h(pT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&tg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=cT();g.length!==0&&(g+=f),Yy(g).then(()=>{o(f,l,h)}).catch(_=>{h(_)})}}).catch(f=>{h(f)})})}}async function ag(r,e,t,i=!1){const o=new mT(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function pd(r,e,t,i){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ag(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ag(r,e,t,t==="getOobCode");return i(r,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r,e){const t=ec(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Vu(l,e??{}))return o;qn(o,"already-initialized")}return t.initialize({options:e})}function yT(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function vT(r,e,t){const i=vi(r);we(i._canInitEmulator,i,"emulator-config-failed"),we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Xy(e),{host:h,port:f}=_T(e),g=f===null?"":`:${f}`;i.config.emulator={url:`${l}//${h}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),wT()}function Xy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _T(r){const e=Xy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:lg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:lg(h)}}}function lg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function wT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function ET(r,e){return Ps(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(r,e){return Wa(r,"POST","/v1/accounts:signInWithPassword",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(r,e){return Wa(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}async function xT(r,e){return Wa(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends zd{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Da(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Da(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,t,"signInWithPassword",TT);case"emailLink":return IT(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,i,"signUpPassword",ET);case"emailLink":return xT(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(r,e){return Wa(r,"POST","/v1/accounts:signInWithIdp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="http://localhost";class di extends zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Ld(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new di(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:ST,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ba(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kT(r){const e=wa(Ea(r)).link,t=e?wa(Ea(e)).deep_link_id:null,i=wa(Ea(r)).deep_link_id;return(i?wa(Ea(i)).link:null)||i||t||e||r}class Bd{constructor(e){var t,i,o,l,h,f;const g=wa(Ea(e)),_=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,S=AT((o=g.mode)!==null&&o!==void 0?o:null);we(_&&E&&S,"argument-error"),this.apiKey=_,this.operation=S,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=kT(e);try{return new Bd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,t){return Da._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Bd.parseLink(t);return we(i,"argument-error"),Da._fromEmailAndCode(e,i.code,i.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Jy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends qa{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return di._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends qa{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com";ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends qa{constructor(){super("twitter.com")}static credential(e,t){return di._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Es.credential(t,i)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(r,e){return Wa(r,"POST","/v1/accounts:signUp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Vr._fromIdTokenResponse(e,i,o),h=ug(i);return new fi({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ug(i);return new fi({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ug(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends mr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Fu(e,t,i,o)}}function Zy(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(r,l,e,i):l})}async function RT(r,e,t=!1){const i=await ba(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fi._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(r,e,t=!1){const{auth:i}=r;if(or(i.app))return Promise.reject(jr(i));const o="reauthenticate";try{const l=await ba(r,Zy(i,o,e,r),t);we(l.idToken,i,"internal-error");const h=Fd(l.idToken);we(h,i,"internal-error");const{sub:f}=h;return we(r.uid===f,i,"user-mismatch"),fi._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&qn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(r,e,t=!1){if(or(r.app))return Promise.reject(jr(r));const i="signIn",o=await Zy(r,i,e),l=await fi._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function PT(r,e){return ev(vi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(r){const e=vi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bT(r,e,t){if(or(r.app))return Promise.reject(jr(r));const i=vi(r),h=await pd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&tv(r),g}),f=await fi._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function DT(r,e,t){return or(r.app)?Promise.reject(jr(r)):PT(_t(r),Ro.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&tv(r),i})}function OT(r,e,t,i){return _t(r).onIdTokenChanged(e,t,i)}function VT(r,e,t){return _t(r).beforeAuthStateChanged(e,t)}function LT(r,e,t,i){return _t(r).onAuthStateChanged(e,t,i)}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=1e3,MT=10;class rv extends nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);rT()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,MT):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rv.type="LOCAL";const FT=rv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sv.type="SESSION";const iv=sv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new nc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async _=>_(t.origin,l)),g=await UT(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const _=$d("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){const P=S;if(P.data.eventId===_)switch(P.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(P.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function BT(r){ur().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function $T(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WT(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function qT(){return ov()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="firebaseLocalStorageDb",HT=1,zu="firebaseLocalStorage",lv="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rc(r,e){return r.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function KT(){const r=indexedDB.deleteDatabase(av);return new Ha(r).toPromise()}function md(){const r=indexedDB.open(av,HT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(zu,{keyPath:lv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(zu)?e(i):(i.close(),await KT(),e(await md()))})})}async function cg(r,e,t){const i=rc(r,!0).put({[lv]:e,value:t});return new Ha(i).toPromise()}async function GT(r,e){const t=rc(r,!1).get(e),i=await new Ha(t).toPromise();return i===void 0?null:i.value}function hg(r,e){const t=rc(r,!0).delete(e);return new Ha(t).toPromise()}const QT=800,YT=3;class uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await md(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>YT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ov()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nc._getInstance(qT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $T(),!this.activeServiceWorker)return;this.sender=new zT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await md();return await cg(e,Uu,"1"),await hg(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>cg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>GT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=rc(o,!1).getAll();return new Ha(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uv.type="LOCAL";const XT=uv;new $a(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r,e){return e?Lr(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZT(r){return ev(r.auth,new Wd(r),r.bypassAuthState)}function eI(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),NT(t,new Wd(r),r.bypassAuthState)}async function tI(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),RT(t,new Wd(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZT;case"linkViaPopup":case"linkViaRedirect":return tI;case"reauthViaPopup":case"reauthViaRedirect":return eI;default:qn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new $a(2e3,1e4);class yo extends cv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=$d();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nI.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="pendingRedirect",Su=new Map;class sI extends cv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const i=await iI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iI(r,e){const t=lI(e),i=aI(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function oI(r,e){Su.set(r._key(),e)}function aI(r){return Lr(r._redirectPersistence)}function lI(r){return xu(rI,r.config.apiKey,r.name)}async function uI(r,e,t=!1){if(or(r.app))return Promise.reject(jr(r));const i=vi(r),o=JT(i,e),h=await new sI(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=10*60*1e3;class hI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!hv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cI&&this.cachedEventUids.clear(),this.cachedEventUids.has(dg(e))}saveEventToCache(e){this.cachedEventUids.add(dg(e)),this.lastProcessedEventTime=Date.now()}}function dg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function hv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function dI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r,e={}){return Ps(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mI=/^https?/;async function gI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fI(r);for(const t of e)try{if(yI(t))return}catch{}qn(r,"unauthorized-domain")}function yI(r){const e=dd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!mI.test(t))return!1;if(pI.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new $a(3e4,6e4);function fg(){const r=ur().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function _I(r){return new Promise((e,t)=>{var i,o,l;function h(){fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fg(),t(lr(r,"network-request-failed"))},timeout:vI.get()})}if(!((o=(i=ur().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)h();else{const f=dT("iframefcb");return ur()[f]=()=>{gapi.load?h():t(lr(r,"network-request-failed"))},Yy(`${hT()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Au=null,e})}let Au=null;function wI(r){return Au=Au||_I(r),Au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new $a(5e3,15e3),TI="__/auth/iframe",II="emulator/auth/iframe",xI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AI(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Md(e,II):`https://${r.config.authDomain}/${TI}`,i={apiKey:e.apiKey,appName:r.name,v:yi},o=SI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ba(i).slice(1)}`}async function kI(r){const e=await wI(r),t=ur().gapi;return we(t,r,"internal-error"),e.open({where:document.body,url:AI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=lr(r,"network-request-failed"),f=ur().setTimeout(()=>{l(h)},EI.get());function g(){ur().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RI=500,NI=600,PI="_blank",bI="http://localhost";class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DI(r,e,t,i=RI,o=NI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g=Object.assign(Object.assign({},CI),{width:i.toString(),height:o.toString(),top:l,left:h}),_=$t().toLowerCase();t&&(f=$y(_)?PI:t),zy(_)&&(e=e||bI,g.scrollbars="yes");const E=Object.entries(g).reduce((P,[V,$])=>`${P}${V}=${$},`,"");if(nT(_)&&f!=="_self")return OI(e||"",f),new pg(null);const S=window.open(e||"",f,E);we(S,r,"popup-blocked");try{S.focus()}catch{}return new pg(S)}function OI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="__/auth/handler",LI="emulator/auth/handler",jI=encodeURIComponent("fac");async function mg(r,e,t,i,o,l){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:yi,eventId:o};if(e instanceof Jy){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",xw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof qa){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),_=g?`#${jI}=${encodeURIComponent(g)}`:"";return`${MI(r)}?${Ba(f).slice(1)}${_}`}function MI({config:r}){return r.emulator?Md(r,LI):`https://${r.authDomain}/${VI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="webStorageSupport";class FI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iv,this._completeRedirectFn=uI,this._overrideRedirectResult=oI}async _openPopup(e,t,i,o){var l;Fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await mg(e,t,i,dd(),o);return DI(e,h,$d())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await mg(e,t,i,dd(),o);return BT(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Fr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await kI(e),i=new hI(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(td,{type:td},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[td];h!==void 0&&t(!!h),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gy()||By()||Ud()}}const UI=FI;var gg="@firebase/auth",yg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $I(r){hi(new As("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qy(r)},_=new lT(i,o,l,g);return yT(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),hi(new As("auth-internal",e=>{const t=vi(e.getProvider("auth").getImmediate());return(i=>new zI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(gg,yg,BI(r)),ar(gg,yg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=5*60,qI=Sy("authIdTokenMaxAge")||WI;let vg=null;const HI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>qI)return;const o=t?.token;vg!==o&&(vg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function dv(r=Vd()){const e=ec(r,"auth");if(e.isInitialized())return e.getImmediate();const t=gT(r,{popupRedirectResolver:UI,persistence:[XT,FT,iv]}),i=Sy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=HI(l.toString());VT(t,h,()=>h(t.currentUser)),OT(t,f=>h(f))}}const o=Ty("auth");return o&&vT(t,`http://${o}`),t}function KI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}uT({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",KI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$I("Browser");var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,fv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function C(){}C.prototype=I.prototype,R.D=I.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(k,O,j){for(var A=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)A[Ke-2]=arguments[Ke];return I.prototype[O].apply(k,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,C){C||(C=0);var k=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)k[O]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(O=0;16>O;++O)k[O]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=R.g[0],C=R.g[1],O=R.g[2];var j=R.g[3],A=I+(j^C&(O^j))+k[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=j+(O^I&(C^O))+k[1]+3905402710&4294967295,j=I+(A<<12&4294967295|A>>>20),A=O+(C^j&(I^C))+k[2]+606105819&4294967295,O=j+(A<<17&4294967295|A>>>15),A=C+(I^O&(j^I))+k[3]+3250441966&4294967295,C=O+(A<<22&4294967295|A>>>10),A=I+(j^C&(O^j))+k[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=j+(O^I&(C^O))+k[5]+1200080426&4294967295,j=I+(A<<12&4294967295|A>>>20),A=O+(C^j&(I^C))+k[6]+2821735955&4294967295,O=j+(A<<17&4294967295|A>>>15),A=C+(I^O&(j^I))+k[7]+4249261313&4294967295,C=O+(A<<22&4294967295|A>>>10),A=I+(j^C&(O^j))+k[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=j+(O^I&(C^O))+k[9]+2336552879&4294967295,j=I+(A<<12&4294967295|A>>>20),A=O+(C^j&(I^C))+k[10]+4294925233&4294967295,O=j+(A<<17&4294967295|A>>>15),A=C+(I^O&(j^I))+k[11]+2304563134&4294967295,C=O+(A<<22&4294967295|A>>>10),A=I+(j^C&(O^j))+k[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=j+(O^I&(C^O))+k[13]+4254626195&4294967295,j=I+(A<<12&4294967295|A>>>20),A=O+(C^j&(I^C))+k[14]+2792965006&4294967295,O=j+(A<<17&4294967295|A>>>15),A=C+(I^O&(j^I))+k[15]+1236535329&4294967295,C=O+(A<<22&4294967295|A>>>10),A=I+(O^j&(C^O))+k[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=j+(C^O&(I^C))+k[6]+3225465664&4294967295,j=I+(A<<9&4294967295|A>>>23),A=O+(I^C&(j^I))+k[11]+643717713&4294967295,O=j+(A<<14&4294967295|A>>>18),A=C+(j^I&(O^j))+k[0]+3921069994&4294967295,C=O+(A<<20&4294967295|A>>>12),A=I+(O^j&(C^O))+k[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=j+(C^O&(I^C))+k[10]+38016083&4294967295,j=I+(A<<9&4294967295|A>>>23),A=O+(I^C&(j^I))+k[15]+3634488961&4294967295,O=j+(A<<14&4294967295|A>>>18),A=C+(j^I&(O^j))+k[4]+3889429448&4294967295,C=O+(A<<20&4294967295|A>>>12),A=I+(O^j&(C^O))+k[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=j+(C^O&(I^C))+k[14]+3275163606&4294967295,j=I+(A<<9&4294967295|A>>>23),A=O+(I^C&(j^I))+k[3]+4107603335&4294967295,O=j+(A<<14&4294967295|A>>>18),A=C+(j^I&(O^j))+k[8]+1163531501&4294967295,C=O+(A<<20&4294967295|A>>>12),A=I+(O^j&(C^O))+k[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=j+(C^O&(I^C))+k[2]+4243563512&4294967295,j=I+(A<<9&4294967295|A>>>23),A=O+(I^C&(j^I))+k[7]+1735328473&4294967295,O=j+(A<<14&4294967295|A>>>18),A=C+(j^I&(O^j))+k[12]+2368359562&4294967295,C=O+(A<<20&4294967295|A>>>12),A=I+(C^O^j)+k[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=j+(I^C^O)+k[8]+2272392833&4294967295,j=I+(A<<11&4294967295|A>>>21),A=O+(j^I^C)+k[11]+1839030562&4294967295,O=j+(A<<16&4294967295|A>>>16),A=C+(O^j^I)+k[14]+4259657740&4294967295,C=O+(A<<23&4294967295|A>>>9),A=I+(C^O^j)+k[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=j+(I^C^O)+k[4]+1272893353&4294967295,j=I+(A<<11&4294967295|A>>>21),A=O+(j^I^C)+k[7]+4139469664&4294967295,O=j+(A<<16&4294967295|A>>>16),A=C+(O^j^I)+k[10]+3200236656&4294967295,C=O+(A<<23&4294967295|A>>>9),A=I+(C^O^j)+k[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=j+(I^C^O)+k[0]+3936430074&4294967295,j=I+(A<<11&4294967295|A>>>21),A=O+(j^I^C)+k[3]+3572445317&4294967295,O=j+(A<<16&4294967295|A>>>16),A=C+(O^j^I)+k[6]+76029189&4294967295,C=O+(A<<23&4294967295|A>>>9),A=I+(C^O^j)+k[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=j+(I^C^O)+k[12]+3873151461&4294967295,j=I+(A<<11&4294967295|A>>>21),A=O+(j^I^C)+k[15]+530742520&4294967295,O=j+(A<<16&4294967295|A>>>16),A=C+(O^j^I)+k[2]+3299628645&4294967295,C=O+(A<<23&4294967295|A>>>9),A=I+(O^(C|~j))+k[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=j+(C^(I|~O))+k[7]+1126891415&4294967295,j=I+(A<<10&4294967295|A>>>22),A=O+(I^(j|~C))+k[14]+2878612391&4294967295,O=j+(A<<15&4294967295|A>>>17),A=C+(j^(O|~I))+k[5]+4237533241&4294967295,C=O+(A<<21&4294967295|A>>>11),A=I+(O^(C|~j))+k[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=j+(C^(I|~O))+k[3]+2399980690&4294967295,j=I+(A<<10&4294967295|A>>>22),A=O+(I^(j|~C))+k[10]+4293915773&4294967295,O=j+(A<<15&4294967295|A>>>17),A=C+(j^(O|~I))+k[1]+2240044497&4294967295,C=O+(A<<21&4294967295|A>>>11),A=I+(O^(C|~j))+k[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=j+(C^(I|~O))+k[15]+4264355552&4294967295,j=I+(A<<10&4294967295|A>>>22),A=O+(I^(j|~C))+k[6]+2734768916&4294967295,O=j+(A<<15&4294967295|A>>>17),A=C+(j^(O|~I))+k[13]+1309151649&4294967295,C=O+(A<<21&4294967295|A>>>11),A=I+(O^(C|~j))+k[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=j+(C^(I|~O))+k[11]+3174756917&4294967295,j=I+(A<<10&4294967295|A>>>22),A=O+(I^(j|~C))+k[2]+718787259&4294967295,O=j+(A<<15&4294967295|A>>>17),A=C+(j^(O|~I))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+j&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var C=I-this.blockSize,k=this.B,O=this.h,j=0;j<I;){if(O==0)for(;j<=C;)o(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<I;)if(k[O++]=R.charCodeAt(j++),O==this.blockSize){o(this,k),O=0;break}}else for(;j<I;)if(k[O++]=R[j++],O==this.blockSize){o(this,k),O=0;break}}this.h=O,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var C=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=C&255,C/=256;for(this.u(R),R=Array(16),I=C=0;4>I;++I)for(var k=0;32>k;k+=8)R[C++]=this.g[I]>>>k&255;return R};function l(R,I){var C=f;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=I(R)}function h(R,I){this.h=I;for(var C=[],k=!0,O=R.length-1;0<=O;O--){var j=R[O]|0;k&&j==I||(C[O]=j,k=!1)}this.g=C}var f={};function g(R){return-128<=R&&128>R?l(R,function(I){return new h([I|0],0>I?-1:0)}):new h([R|0],0>R?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return S;if(0>R)return b(_(-R));for(var I=[],C=1,k=0;R>=C;k++)I[k]=R/C|0,C*=4294967296;return new h(I,0)}function E(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return b(E(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(I,8)),k=S,O=0;O<R.length;O+=8){var j=Math.min(8,R.length-O),A=parseInt(R.substring(O,O+j),I);8>j?(j=_(Math.pow(I,j)),k=k.j(j).add(_(A))):(k=k.j(C),k=k.add(_(A)))}return k}var S=g(0),P=g(1),V=g(16777216);r=h.prototype,r.m=function(){if(W(this))return-b(this).m();for(var R=0,I=1,C=0;C<this.g.length;C++){var k=this.i(C);R+=(0<=k?k:4294967296+k)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(W(this))return"-"+b(this).toString(R);for(var I=_(Math.pow(R,6)),C=this,k="";;){var O=oe(C,I).g;C=q(C,O.j(I));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=O,$(C))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function W(R){return R.h==-1}r.l=function(R){return R=q(this,R),W(R)?-1:$(R)?0:1};function b(R){for(var I=R.g.length,C=[],k=0;k<I;k++)C[k]=~R.g[k];return new h(C,~R.h).add(P)}r.abs=function(){return W(this)?b(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],k=0,O=0;O<=I;O++){var j=k+(this.i(O)&65535)+(R.i(O)&65535),A=(j>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);k=A>>>16,j&=65535,A&=65535,C[O]=A<<16|j}return new h(C,C[C.length-1]&-2147483648?-1:0)};function q(R,I){return R.add(b(I))}r.j=function(R){if($(this)||$(R))return S;if(W(this))return W(R)?b(this).j(b(R)):b(b(this).j(R));if(W(R))return b(this.j(b(R)));if(0>this.l(V)&&0>R.l(V))return _(this.m()*R.m());for(var I=this.g.length+R.g.length,C=[],k=0;k<2*I;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<R.g.length;O++){var j=this.i(k)>>>16,A=this.i(k)&65535,Ke=R.i(O)>>>16,wt=R.i(O)&65535;C[2*k+2*O]+=A*wt,ne(C,2*k+2*O),C[2*k+2*O+1]+=j*wt,ne(C,2*k+2*O+1),C[2*k+2*O+1]+=A*Ke,ne(C,2*k+2*O+1),C[2*k+2*O+2]+=j*Ke,ne(C,2*k+2*O+2)}for(k=0;k<I;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=I;k<2*I;k++)C[k]=0;return new h(C,0)};function ne(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function ae(R,I){this.g=R,this.h=I}function oe(R,I){if($(I))throw Error("division by zero");if($(R))return new ae(S,S);if(W(R))return I=oe(b(R),I),new ae(b(I.g),b(I.h));if(W(I))return I=oe(R,b(I)),new ae(b(I.g),I.h);if(30<R.g.length){if(W(R)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var C=P,k=I;0>=k.l(R);)C=he(C),k=he(k);var O=Z(C,1),j=Z(k,1);for(k=Z(k,2),C=Z(C,2);!$(k);){var A=j.add(k);0>=A.l(R)&&(O=O.add(C),j=A),k=Z(k,1),C=Z(C,1)}return I=q(R,O.j(I)),new ae(O,I)}for(O=S;0<=R.l(I);){for(C=Math.max(1,Math.floor(R.m()/I.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=_(C),A=j.j(I);W(A)||0<A.l(R);)C-=k,j=_(C),A=j.j(I);$(j)&&(j=P),O=O.add(j),R=q(R,A)}return new ae(O,R)}r.A=function(R){return oe(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],k=0;k<I;k++)C[k]=this.i(k)&R.i(k);return new h(C,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],k=0;k<I;k++)C[k]=this.i(k)|R.i(k);return new h(C,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),C=[],k=0;k<I;k++)C[k]=this.i(k)^R.i(k);return new h(C,this.h^R.h)};function he(R){for(var I=R.g.length+1,C=[],k=0;k<I;k++)C[k]=R.i(k)<<1|R.i(k-1)>>>31;return new h(C,R.h)}function Z(R,I){var C=I>>5;I%=32;for(var k=R.g.length-C,O=[],j=0;j<k;j++)O[j]=0<I?R.i(j+C)>>>I|R.i(j+C+1)<<32-I:R.i(j+C);return new h(O,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,li=h}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});var yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pv,Ta,mv,ku,gd,gv,yv,vv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yu=="object"&&yu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in v))break e;v=v[M]}u=u[u.length-1],T=v[u],p=p(T),p!=T&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var v=0,T=!1,M={next:function(){if(!T&&v<u.length){var B=v++;return{value:p(B,u[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,v){return u.call.apply(u.bind,arguments)}function S(u,p,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function P(u,p,v){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,P.apply(null,arguments)}function V(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function $(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,M,B){for(var te=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)te[ze-2]=arguments[ze];return p.prototype[M].apply(T,te)}}function W(u){const p=u.length;if(0<p){const v=Array(p);for(let T=0;T<p;T++)v[T]=u[T];return v}return[]}function b(u,p){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(g(T)){const M=u.length||0,B=T.length||0;u.length=M+B;for(let te=0;te<B;te++)u[M+te]=T[te]}else u.push(T)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ne(u){return/^[\s\xa0]*$/.test(u)}function ae(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var he=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Z(u,p,v){for(const T in u)p.call(v,u[T],T,u)}function R(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function I(u){const p={};for(const v in u)p[v]=u[v];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let v,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(v in T)u[v]=T[v];for(let B=0;B<C.length;B++)v=C[B],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function O(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function j(u){f.setTimeout(()=>{throw u},0)}function A(){var u=ge;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ke{constructor(){this.h=this.g=null}add(p,v){const T=wt.get();T.set(p,v),this.h?this.h.next=T:this.g=T,this.h=T}}var wt=new q(()=>new At,u=>u.reset());class At{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,re=!1,ge=new Ke,se=()=>{const u=f.Promise.resolve(void 0);Ue=()=>{u.then(L)}};var L=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(v){j(v)}var p=wt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}re=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return u}();function Ae(u,p){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(he){e:{try{oe(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}$(Ae,me);var ke={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Re=0;function $e(u,p,v,T,M){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!T,this.ha=M,this.key=++Re,this.da=this.fa=!1}function tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qt(u){this.src=u,this.g={},this.h=0}Qt.prototype.add=function(u,p,v,T,M){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var te=gn(u,p,T,M);return-1<te?(p=u[te],v||(p.fa=!1)):(p=new $e(p,this.src,B,!!T,M),p.fa=v,u.push(p)),p};function Br(u,p){var v=p.type;if(v in u.g){var T=u.g[v],M=Array.prototype.indexOf.call(T,p,void 0),B;(B=0<=M)&&Array.prototype.splice.call(T,M,1),B&&(tt(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function gn(u,p,v,T){for(var M=0;M<u.length;++M){var B=u[M];if(!B.da&&B.listener==p&&B.capture==!!v&&B.ha==T)return M}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),Ds={};function Ei(u,p,v,T,M){if(Array.isArray(p)){for(var B=0;B<p.length;B++)Ei(u,p[B],v,T,M);return null}return v=Ii(v),u&&u[Le]?u.K(p,v,_(T)?!!T.capture:!1,M):Ti(u,p,v,!1,T,M)}function Ti(u,p,v,T,M,B){if(!p)throw Error("Invalid event type");var te=_(M)?!!M.capture:!!M,ze=Ls(u);if(ze||(u[$r]=ze=new Qt(u)),v=ze.add(p,v,T,te,B),v.proxy)return v;if(T=Oo(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Ie||(M=te),M===void 0&&(M=!1),u.addEventListener(p.toString(),T,M);else if(u.attachEvent)u.attachEvent(Gn(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Oo(){function u(v){return p.call(u.src,u.listener,v)}const p=Vs;return u}function Os(u,p,v,T,M){if(Array.isArray(p))for(var B=0;B<p.length;B++)Os(u,p[B],v,T,M);else T=_(T)?!!T.capture:!!T,v=Ii(v),u&&u[Le]?(u=u.i,p=String(p).toString(),p in u.g&&(B=u.g[p],v=gn(B,v,T,M),-1<v&&(tt(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ls(u))&&(p=u.g[p.toString()],u=-1,p&&(u=gn(p,v,T,M)),(v=-1<u?p[u]:null)&&Kn(v))}function Kn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Le])Br(p.i,u);else{var v=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(v,T,u.capture):p.detachEvent?p.detachEvent(Gn(v),T):p.addListener&&p.removeListener&&p.removeListener(T),(v=Ls(p))?(Br(v,u),v.h==0&&(v.src=null,p[$r]=null)):tt(u)}}}function Gn(u){return u in Ds?Ds[u]:Ds[u]="on"+u}function Vs(u,p){if(u.da)u=!0;else{p=new Ae(p,this);var v=u.listener,T=u.ha||u.src;u.fa&&Kn(u),u=v.call(T,p)}return u}function Ls(u){return u=u[$r],u instanceof Qt?u:null}var js="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ii(u){return typeof u=="function"?u:(u[js]||(u[js]=function(p){return u.handleEvent(p)}),u[js])}function lt(){H.call(this),this.i=new Qt(this),this.M=this,this.F=null}$(lt,H),lt.prototype[Le]=!0,lt.prototype.removeEventListener=function(u,p,v,T){Os(this,u,p,v,T)};function ut(u,p){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new me(p,u);else if(p instanceof me)p.target=p.target||u;else{var M=p;p=new me(T,u),k(p,M)}if(M=!0,v)for(var B=v.length-1;0<=B;B--){var te=p.g=v[B];M=Qn(te,T,!0,p)&&M}if(te=p.g=u,M=Qn(te,T,!0,p)&&M,M=Qn(te,T,!1,p)&&M,v)for(B=0;B<v.length;B++)te=p.g=v[B],M=Qn(te,T,!1,p)&&M}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],T=0;T<v.length;T++)tt(v[T]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,v,T){return this.i.add(String(u),p,!1,v,T)},lt.prototype.L=function(u,p,v,T){return this.i.add(String(u),p,!0,v,T)};function Qn(u,p,v,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,B=0;B<p.length;++B){var te=p[B];if(te&&!te.da&&te.capture==v){var ze=te.listener,mt=te.ha||te.src;te.fa&&Br(u.i,te),M=ze.call(mt,T)!==!1&&M}}return M&&!T.defaultPrevented}function xi(u,p,v){if(typeof u=="function")v&&(u=P(u,v));else if(u&&typeof u.handleEvent=="function")u=P(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function yr(u){u.g=xi(()=>{u.g=null,u.i&&(u.i=!1,yr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Wr extends H{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:yr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(u){H.call(this),this.h=u,this.g={}}$(Rn,H);var Si=[];function Ai(u){Z(u.g,function(p,v){this.g.hasOwnProperty(v)&&Kn(p)},u),u.g={}}Rn.prototype.N=function(){Rn.aa.N.call(this),Ai(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ki=f.JSON.stringify,Ci=f.JSON.parse,Ri=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function qr(){}qr.prototype.h=null;function Hr(u){return u.h||(u.h=u.i())}function vr(){}var Wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yn(){me.call(this,"d")}$(yn,me);function Kr(){me.call(this,"c")}$(Kr,me);var vn={},Ms=null;function _r(){return Ms=Ms||new lt}vn.La="serverreachability";function ct(u){me.call(this,vn.La,u)}$(ct,me);function Ge(u){const p=_r();ut(p,new ct(p))}vn.STAT_EVENT="statevent";function an(u,p){me.call(this,vn.STAT_EVENT,u),this.stat=p}$(an,me);function Pe(u){const p=_r();ut(p,new an(p,u))}vn.Ma="timingevent";function Yn(u,p){me.call(this,vn.Ma,u),this.size=p}$(Yn,me);function Vt(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function wr(u,p,v,T,M,B){u.info(function(){if(u.g)if(B)for(var te="",ze=B.split("&"),mt=0;mt<ze.length;mt++){var Oe=ze[mt].split("=");if(1<Oe.length){var Et=Oe[0];Oe=Oe[1];var ht=Et.split("_");te=2<=ht.length&&ht[1]=="type"?te+(Et+"="+Oe+"&"):te+(Et+"=redacted&")}}else te=null;else te=B;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+p+`
`+v+`
`+te})}function Ni(u,p,v,T,M,B,te){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+p+`
`+v+`
`+B+" "+te})}function Nn(u,p,v,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+vc(u,v)+(T?" "+T:"")})}function Vo(u,p){u.info(function(){return"TIMEOUT: "+p})}_n.prototype.info=function(){};function vc(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var te=1;te<M.length;te++)M[te]=""}}}}return ki(v)}catch{return p}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function Fs(){}$(Fs,qr),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Pn=new Fs;function bn(u,p,v,T){this.j=u,this.i=p,this.l=v,this.R=T||1,this.U=new Rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nl}function nl(){this.i=null,this.g="",this.h=!1}var Lo={},bi={};function Di(u,p,v){u.L=1,u.v=Jr(un(p)),u.m=v,u.P=!0,jo(u,null)}function jo(u,p){u.F=Date.now(),qe(u),u.A=un(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),es(v.i,"t",T),u.C=0,v=u.j.J,u.h=new nl,u.g=wl(u.j,v?p:null,!u.m),0<u.O&&(u.M=new Wr(P(u.Y,u,u.g),u.O)),p=u.U,v=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Si[0]=M.toString()),M=Si);for(var B=0;B<M.length;B++){var te=Ei(v,M[B],T||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Ge(),wr(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Xt(u)==3?p.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const ht=Xt(this.g);var p=this.g.Ba();const Tn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||$o(this.g)))){this.J||ht!=4||p==7||(p==8||0>=Tn?Ge(3):Ge(2)),Us(this);var v=this.g.Z();this.X=v;t:if(rl(this)){var T=$o(this.g);u="";var M=T.length,B=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Gr(this);var te="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(B&&p==M-1)});T.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,Ni(this.i,this.u,this.A,this.l,this.R,ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,mt=this.g;if((ze=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(ze)){var Oe=ze;break t}}Oe=null}if(v=Oe)Nn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mo(this,v);else{this.o=!1,this.s=3,Pe(12),wn(this),Gr(this);break e}}if(this.P){v=!0;let hn;for(;!this.J&&this.C<te.length;)if(hn=_c(this,te),hn==bi){ht==4&&(this.s=4,Pe(14),v=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Lo){this.s=4,Pe(15),Nn(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else Nn(this.i,this.l,hn,null),Mo(this,hn);if(rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||te.length!=0||this.h.h||(this.s=1,Pe(16),v=!1),this.o=this.o&&v,!v)Nn(this.i,this.l,te,"[Invalid Chunked Response]"),wn(this),Gr(this);else if(0<te.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),qo(Et),Et.M=!0,Pe(11))}}else Nn(this.i,this.l,te,null),Mo(this,te);ht==4&&wn(this),this.o&&!this.J&&(ht==4?Wi(this.j,this):(this.o=!1,qe(this)))}else Fi(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),wn(this),Gr(this)}}}catch{}finally{}};function rl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _c(u,p){var v=u.C,T=p.indexOf(`
`,v);return T==-1?bi:(v=Number(p.substring(v,T)),isNaN(v)?Lo:(T+=1,T+v>p.length?bi:(p=p.slice(T,T+v),u.C=T+v,p)))}bn.prototype.cancel=function(){this.J=!0,wn(this)};function qe(u){u.S=Date.now()+u.I,sl(u,u.I)}function sl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vt(P(u.ba,u),p)}function Us(u){u.B&&(f.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vo(this.i,this.A),this.L!=2&&(Ge(),Pe(17)),wn(this),this.s=2,Gr(this)):sl(this,this.S-u)};function Gr(u){u.j.G==0||u.J||Wi(u.j,u)}function wn(u){Us(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ai(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Mo(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||qt(v.h,u))){if(!u.K&&qt(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)$i(v),jn(v);else break e;Bi(v),Pe(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=Vt(P(v.Za,v),6e3));if(1>=ol(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Sr(v,11)}else if((u.K||v.g==u)&&$i(v),!ne(p))for(M=v.Da.g.parse(p),p=0;p<M.length;p++){let Oe=M[p];if(v.T=Oe[0],Oe=Oe[1],v.G==2)if(Oe[0]=="c"){v.K=Oe[1],v.ia=Oe[2];const Et=Oe[3];Et!=null&&(v.la=Et,v.j.info("VER="+v.la));const ht=Oe[4];ht!=null&&(v.Aa=ht,v.j.info("SVER="+v.Aa));const Tn=Oe[5];Tn!=null&&typeof Tn=="number"&&0<Tn&&(T=1.5*Tn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const hn=u.g;if(hn){const Ks=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var B=T.h;B.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Fo(B,B.h),B.h=null))}if(T.D){const Hi=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hi&&(T.ya=Hi,We(T.I,T.D,Hi))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var te=u;if(T.qa=_l(T,T.J?T.ia:null,T.W),te.K){al(T.h,te);var ze=te,mt=T.L;mt&&(ze.I=mt),ze.B&&(Us(ze),qe(ze)),T.g=te}else Hs(T);0<v.i.length&&er(v)}else Oe[0]!="stop"&&Oe[0]!="close"||Sr(v,7);else v.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Sr(v,7):Ct(v):Oe[0]!="noop"&&v.l&&v.l.ta(Oe),v.v=0)}}Ge(4)}catch{}}var il=class{constructor(u,p){this.g=u,this.map=p}};function zs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ol(u){return u.h?1:u.g?u.g.size:0}function qt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Fo(u,p){u.g?u.g.add(p):u.h=p}function al(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}zs.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ll(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return W(u.i)}function Oi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],v=u.length,T=0;T<v;T++)p.push(u[T]);return p}p=[],v=0;for(T in u)p[v++]=u[T];return p}function Vi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const T in u)p[v++]=T;return p}}}function Qr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Vi(u),T=Oi(u),M=T.length,B=0;B<M;B++)p.call(void 0,T[B],v&&v[B],u)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),M=null;if(0<=T){var B=u[v].substring(0,T);M=u[v].substring(T+1)}else B=u[v];p(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Er(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Er){this.h=u.h,$s(this,u.j),this.o=u.o,this.g=u.g,Yr(this,u.s),this.l=u.l;var p=u.i,v=new Xn;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Xr(this,v),this.m=u.m}else u&&(p=String(u).match(Bs))?(this.h=!1,$s(this,p[1]||"",!0),this.o=be(p[2]||""),this.g=be(p[3]||"",!0),Yr(this,p[4]),this.l=be(p[5]||"",!0),Xr(this,p[6]||"",!0),this.m=be(p[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}Er.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Zr(p,Li,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Zr(p,Li,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Zr(v,v.charAt(0)=="/"?hl:cl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Zr(v,Uo)),u.join("")};function un(u){return new Er(u)}function $s(u,p,v){u.j=v?be(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Yr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Xr(u,p,v){p instanceof Xn?(u.i=p,Jn(u.i,u.h)):(v||(p=Zr(p,dl)),u.i=new Xn(p,u.h))}function We(u,p,v){u.i.set(p,v)}function Jr(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function be(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zr(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,ul),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ul(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Li=/[#\/\?@]/g,cl=/[#\?:]/g,hl=/[#\?]/g,dl=/[#\?@]/g,Uo=/#/g;function Xn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function kt(u){u.g||(u.g=new Map,u.h=0,u.i&&wc(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=Xn.prototype,r.add=function(u,p){kt(this),this.i=null,u=En(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Dn(u,p){kt(u),p=En(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function On(u,p){return kt(u),p=En(u,p),u.g.has(p)}r.forEach=function(u,p){kt(this),this.g.forEach(function(v,T){v.forEach(function(M){u.call(p,M,T,this)},this)},this)},r.na=function(){kt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let T=0;T<p.length;T++){const M=u[T];for(let B=0;B<M.length;B++)v.push(p[T])}return v},r.V=function(u){kt(this);let p=[];if(typeof u=="string")On(this,u)&&(p=p.concat(this.g.get(En(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},r.set=function(u,p){return kt(this),this.i=null,u=En(this,u),On(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function es(u,p,v){Dn(u,p),0<v.length&&(u.i=null,u.g.set(En(u,p),W(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var T=p[v];const B=encodeURIComponent(String(T)),te=this.V(T);for(T=0;T<te.length;T++){var M=B;te[T]!==""&&(M+="="+encodeURIComponent(String(te[T]))),u.push(M)}}return this.i=u.join("&")};function En(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Jn(u,p){p&&!u.j&&(kt(u),u.i=null,u.g.forEach(function(v,T){var M=T.toLowerCase();T!=M&&(Dn(this,T),es(this,M,v))},u)),u.j=p}function Ec(u,p){const v=new _n;if(f.Image){const T=new Image;T.onload=V(Yt,v,"TestLoadImage: loaded",!0,p,T),T.onerror=V(Yt,v,"TestLoadImage: error",!1,p,T),T.onabort=V(Yt,v,"TestLoadImage: abort",!1,p,T),T.ontimeout=V(Yt,v,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function fl(u,p){const v=new _n,T=new AbortController,M=setTimeout(()=>{T.abort(),Yt(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(M),B.ok?Yt(v,"TestPingServer: ok",!0,p):Yt(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Yt(v,"TestPingServer: error",!1,p)})}function Yt(u,p,v,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(v)}catch{}}function Tc(){this.g=new Ri}function pl(u,p,v){const T=v||"";try{Qr(u,function(M,B){let te=M;_(M)&&(te=ki(M)),p.push(T+B+"="+encodeURIComponent(te))})}catch(M){throw p.push(T+"type="+encodeURIComponent("_badmap")),M}}function Tr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(Tr,qr),Tr.prototype.g=function(){return new Ws(this.l,this.j)},Tr.prototype.i=function(u){return function(){return u}}({});function Ws(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ws,lt),r=Ws.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ln(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ml(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ml(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Vn(this):Ln(this),this.readyState==3&&ml(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Vn(this))},r.Qa=function(u){this.g&&(this.response=u,Vn(this))},r.ga=function(){this.g&&Vn(this)};function Vn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ln(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ir(u){let p="";return Z(u,function(v,T){p+=T,p+=":",p+=v,p+=`\r
`}),p}function ts(u,p,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Ir(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):We(u,p,v))}function Je(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Je,lt);var Ic=/^https?$/i,zo=["POST","PUT"];r=Je.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?Hr(this.o):Hr(Pn),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){qs(this,B);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)v.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())v.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(zo,p,void 0))||T||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of v)this.g.setRequestHeader(B,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mi(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){qs(this,B)}};function qs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ji(u),cn(u)}function ji(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),cn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},r.bb=function(){Bo(this)};function Bo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)xi(u.Ea,0,u);else if(ut(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var T;if(T=te===0){var M=String(u.D).match(Bs)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),T=!Ic.test(M?M.toLowerCase():"")}v=T}if(v)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var B=2<Xt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",ji(u)}}finally{cn(u)}}}}function cn(u,p){if(u.g){Mi(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ut(u,"ready");try{v.onreadystatechange=T}catch{}}}function Mi(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ci(p)}};function $o(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(u){const p={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ne(u[T]))continue;var v=O(u[T]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=p[M]||[];p[M]=B,B.push(v)}R(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Wo(u){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,u),this.cb=Zn("retryDelaySeedMs",1e4,u),this.Wa=Zn("forwardChannelMaxRetries",2,u),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zs(u&&u.concurrentRequestLimit),this.Da=new Tc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Wo.prototype,r.la=8,r.G=1,r.connect=function(u,p,v,T){Pe(0),this.W=u,this.H=p||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=_l(this,null,this.W),er(this)};function Ct(u){if(Ui(u),u.G==3){var p=u.U++,v=un(u.I);if(We(v,"SID",u.K),We(v,"RID",p),We(v,"TYPE","terminate"),xr(u,v),p=new bn(u,u.j,p),p.L=2,p.v=Jr(un(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.v,v=!0),v||(p.g=wl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),qe(p)}vl(u)}function jn(u){u.g&&(qo(u),u.g.cancel(),u.g=null)}function Ui(u){jn(u),u.u&&(f.clearTimeout(u.u),u.u=null),$i(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function er(u){if(!ln(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ue||se(),re||(Ue(),re=!0),ge.add(p,u),u.B=0}}function xc(u,p){return ol(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vt(P(u.Ga,u,p),yl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new bn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=I(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=ns(this,M,p),v=un(this.I),We(v,"RID",u),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),xr(this,v),B&&(this.O?p="headers="+encodeURIComponent(String(Ir(B)))+"&"+p:this.m&&ts(v,this.m,B)),Fo(this.h,M),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",p),We(v,"SID","null"),M.T=!0,Di(M,v,null)):Di(M,v,p),this.G=2}}else this.G==3&&(u?zi(this,u):this.i.length==0||ln(this.h)||zi(this))};function zi(u,p){var v;p?v=p.l:v=u.U++;const T=un(u.I);We(T,"SID",u.K),We(T,"RID",v),We(T,"AID",u.T),xr(u,T),u.m&&u.o&&ts(T,u.m,u.o),v=new bn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ns(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fo(u.h,v),Di(v,T,p)}function xr(u,p){u.H&&Z(u.H,function(v,T){We(p,T,v)}),u.l&&Qr({},function(v,T){We(p,T,v)})}function ns(u,p,v){v=Math.min(u.i.length,v);var T=u.l?P(u.l.Na,u.l,u):null;e:{var M=u.i;let B=-1;for(;;){const te=["count="+v];B==-1?0<v?(B=M[0].g,te.push("ofs="+B)):B=0:te.push("ofs="+B);let ze=!0;for(let mt=0;mt<v;mt++){let Oe=M[mt].g;const Et=M[mt].map;if(Oe-=B,0>Oe)B=Math.max(0,M[mt].g-100),ze=!1;else try{pl(Et,te,"req"+Oe+"_")}catch{T&&T(Et)}}if(ze){T=te.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,T}function Hs(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ue||se(),re||(Ue(),re=!0),ge.add(p,u),u.v=0}}function Bi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vt(P(u.Fa,u),yl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vt(P(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),jn(this),gl(this))};function qo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function gl(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=un(u.qa);We(p,"RID","rpc"),We(p,"SID",u.K),We(p,"AID",u.T),We(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(p,"TO",u.ja),We(p,"TYPE","xmlhttp"),xr(u,p),u.m&&u.o&&ts(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Jr(un(p)),v.m=null,v.P=!0,jo(v,u)}r.Za=function(){this.C!=null&&(this.C=null,jn(this),Bi(this),Pe(19))};function $i(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Wi(u,p){var v=null;if(u.g==p){$i(u),qo(u),u.g=null;var T=2}else if(qt(u.h,p))v=p.D,al(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;T=_r(),ut(T,new Yn(T,v)),er(u)}else Hs(u);else if(M=p.s,M==3||M==0&&0<p.X||!(T==1&&xc(u,p)||T==2&&Bi(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),M){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function yl(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function Sr(u,p){if(u.j.info("Error code "+p),p==2){var v=P(u.fb,u),T=u.Xa;const M=!T;T=new Er(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||$s(T,"https"),Jr(T),M?Ec(T.toString(),v):fl(T.toString(),v)}else Pe(2);u.G=0,u.l&&u.l.sa(p),vl(u),Ui(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function vl(u){if(u.G=0,u.ka=[],u.l){const p=ll(u.h);(p.length!=0||u.i.length!=0)&&(b(u.ka,p),b(u.ka,u.i),u.h.i.length=0,W(u.i),u.i.length=0),u.l.ra()}}function _l(u,p,v){var T=v instanceof Er?un(v):new Er(v);if(T.g!="")p&&(T.g=p+"."+T.g),Yr(T,T.s);else{var M=f.location;T=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var B=new Er(null);T&&$s(B,T),p&&(B.g=p),M&&Yr(B,M),v&&(B.l=v),T=B}return v=u.D,p=u.ya,v&&p&&We(T,v,p),We(T,"VER",u.la),xr(u,T),T}function wl(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new Tr({eb:v})):new Je(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ho(){}r=Ho.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function qi(){}qi.prototype.g=function(u,p){return new Ht(u,p)};function Ht(u,p){lt.call(this),this.g=new Wo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ne(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ne(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new tr(this)}$(Ht,lt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ct(this.g)},Ht.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ki(u),u=v);p.i.push(new il(p.Ya++,u)),p.G==3&&er(p)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,Ht.aa.N.call(this)};function El(u){yn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}$(El,yn);function Tl(){Kr.call(this),this.status=1}$(Tl,Kr);function tr(u){this.g=u}$(tr,Ho),tr.prototype.ua=function(){ut(this.g,"a")},tr.prototype.ta=function(u){ut(this.g,new El(u))},tr.prototype.sa=function(u){ut(this.g,new Tl)},tr.prototype.ra=function(){ut(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,vv=function(){return new qi},yv=function(){return _r()},gv=vn,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,ku=Pi,tl.COMPLETE="complete",mv=tl,vr.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ta=vr,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,pv=Je}).apply(typeof yu<"u"?yu:typeof self<"u"?self:typeof window<"u"?window:{});const wg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new Dd("@firebase/firestore");function ya(){return pi.logLevel}function fe(r,...e){if(pi.logLevel<=De.DEBUG){const t=e.map(qd);pi.debug(`Firestore (${No}): ${r}`,...t)}}function Ur(r,...e){if(pi.logLevel<=De.ERROR){const t=e.map(qd);pi.error(`Firestore (${No}): ${r}`,...t)}}function To(r,...e){if(pi.logLevel<=De.WARN){const t=e.map(qd);pi.warn(`Firestore (${No}): ${r}`,...t)}}function qd(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+r;throw Ur(e),new Error(e)}function Be(r,e){r||Te()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}}class QI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YI{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ui,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ui)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new _v(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new zt(e)}}class XI{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JI{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new XI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ex{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string"),this.R=t.token,new ZI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=tx(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Fe(r,e){return r<e?-1:r>e?1:0}function Io(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new vt(0,0))}static max(){return new xe(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Oa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xe extends Oa{construct(e,t,i){return new Xe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Xe(t)}static emptyPath(){return new Xe([])}}const nx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Oa{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return nx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Xe.fromString(e))}static fromName(e){return new ye(Xe.fromString(e).popFirst(5))}static empty(){return new ye(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Xe(e.slice()))}}function rx(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new ks(o,ye.empty(),e)}function sx(r){return new ks(r.readTime,r.key,-1)}class ks{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ks(xe.min(),ye.empty(),-1)}static max(){return new ks(xe.max(),ye.empty(),-1)}}function ix(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Fe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ax{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==ox)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,i)=>{t(e)})}static reject(e){return new X((t,i)=>{i(e)})}static waitFor(e){return new X((t,i)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>i(g))}),h=!0,l===o&&t()})}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next(o=>o?X.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new X((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next(E=>{h[_]=E,++f,f===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new X((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function lx(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hd.oe=-1;function sc(r){return r==null}function Bu(r){return r===0&&1/r==-1/0}function ux(r){return typeof r=="number"&&Number.isInteger(r)&&!Bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _i(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ev(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vu(this.root,e,this.comparator,!0)}}class vu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Pt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tg(this.data.getIterator())}getIteratorFrom(e){return new Tg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Tg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new mn([])}unionWith(e){let t=new Dt(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Tv("Invalid base64 string: "+l):l}}(e);return new Ot(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const cx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(r){if(Be(!!r),typeof r=="string"){let e=0;const t=cx.exec(r);if(Be(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(r.seconds),nanos:at(r.nanos)}}function at(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function mi(r){return typeof r=="string"?Ot.fromBase64String(r):Ot.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gd(r){const e=r.mapValue.fields.__previous_value__;return Kd(e)?Gd(e):e}function Va(r){const e=Cs(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,o,l,h,f,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=_}}class La{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u={mapValue:{}};function gi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Kd(r)?4:fx(r)?9007199254740991:dx(r)?10:11:Te()}function fr(r,e){if(r===e)return!0;const t=gi(r);if(t!==gi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Va(r).isEqual(Va(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Cs(o.timestampValue),f=Cs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return mi(o.bytesValue).isEqual(mi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=at(o.doubleValue),f=at(l.doubleValue);return h===f?Bu(h)===Bu(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Io(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Eg(h)!==Eg(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0}(r,e);default:return Te()}}function ja(r,e){return(r.values||[]).find(t=>fr(t,e))!==void 0}function xo(r,e){if(r===e)return 0;const t=gi(r),i=gi(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=at(l.integerValue||l.doubleValue),g=at(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return Ig(r.timestampValue,e.timestampValue);case 4:return Ig(Va(r),Va(e));case 5:return Fe(r.stringValue,e.stringValue);case 6:return function(l,h){const f=mi(l),g=mi(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let _=0;_<f.length&&_<g.length;_++){const E=Fe(f[_],g[_]);if(E!==0)return E}return Fe(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Fe(at(l.latitude),at(h.latitude));return f!==0?f:Fe(at(l.longitude),at(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return xg(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,_,E;const S=l.fields||{},P=h.fields||{},V=(f=S.value)===null||f===void 0?void 0:f.arrayValue,$=(g=P.value)===null||g===void 0?void 0:g.arrayValue,W=Fe(((_=V?.values)===null||_===void 0?void 0:_.length)||0,((E=$?.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:xg(V,$)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===_u.mapValue&&h===_u.mapValue)return 0;if(l===_u.mapValue)return 1;if(h===_u.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const P=Fe(g[S],E[S]);if(P!==0)return P;const V=xo(f[g[S]],_[E[S]]);if(V!==0)return V}return Fe(g.length,E.length)}(r.mapValue,e.mapValue);default:throw Te()}}function Ig(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const t=Cs(r),i=Cs(e),o=Fe(t.seconds,i.seconds);return o!==0?o:Fe(t.nanos,i.nanos)}function xg(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=xo(t[o],i[o]);if(l)return l}return Fe(t.length,i.length)}function So(r){return yd(r)}function yd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Cs(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return mi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=yd(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${yd(t.fields[h])}`;return o+"}"}(r.mapValue):Te()}function Sg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function vd(r){return!!r&&"integerValue"in r}function Qd(r){return!!r&&"arrayValue"in r}function Ag(r){return!!r&&"nullValue"in r}function kg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Cu(r){return!!r&&"mapValue"in r}function dx(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ka(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _i(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ka(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ka(r.arrayValue.values[t]);return e}return Object.assign({},r)}function fx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Cu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=ka(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Cu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Cu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_i(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new sn(ka(this.value))}}function Iv(r){const e=[];return _i(r.fields,(t,i)=>{const o=new bt([t]);if(Cu(i)){const l=Iv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Bt(e,0,xe.min(),xe.min(),xe.min(),sn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,xe.min(),xe.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,xe.min(),xe.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.position=e,this.inclusive=t}}function Cg(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=xo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Rg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function px(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv=class{};class pt extends xv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new gx(e,t,i):t==="array-contains"?new _x(e,i):t==="in"?new wx(e,i):t==="not-in"?new Ex(e,i):t==="array-contains-any"?new Tx(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new yx(e,i):new vx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xo(t,this.value)):t!==null&&gi(this.value)===gi(t)&&this.matchesComparison(xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends xv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hn(e,t)}matches(e){return Sv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sv(r){return r.op==="and"}function Av(r){return mx(r)&&Sv(r)}function mx(r){for(const e of r.filters)if(e instanceof Hn)return!1;return!0}function _d(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+So(r.value);if(Av(r))return r.filters.map(e=>_d(e)).join(",");{const e=r.filters.map(t=>_d(t)).join(",");return`${r.op}(${e})`}}function kv(r,e){return r instanceof pt?function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&fr(i.value,o.value)}(r,e):r instanceof Hn?function(i,o){return o instanceof Hn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,f)=>l&&kv(h,o.filters[f]),!0):!1}(r,e):void Te()}function Cv(r){return r instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`}(r):r instanceof Hn?function(t){return t.op.toString()+" {"+t.getFilters().map(Cv).join(" ,")+"}"}(r):"Filter"}class gx extends pt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class yx extends pt{constructor(e,t){super(e,"in",t),this.keys=Rv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vx extends pt{constructor(e,t){super(e,"not-in",t),this.keys=Rv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class _x extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qd(t)&&ja(t.arrayValue,this.value)}}class wx extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ja(this.value.arrayValue,t)}}class Ex extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ja(this.value.arrayValue,t)}}class Tx extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ja(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function Ng(r,e=null,t=[],i=[],o=null,l=null,h=null){return new Ix(r,e,t,i,o,l,h)}function Yd(r){const e=Se(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>_d(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>So(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>So(i)).join(",")),e.ue=t}return e.ue}function Xd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!px(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!kv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Rg(r.startAt,e.startAt)&&Rg(r.endAt,e.endAt)}function wd(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xx(r,e,t,i,o,l,h,f){return new Qa(r,e,t,i,o,l,h,f)}function Jd(r){return new Qa(r)}function Pg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Nv(r){return r.collectionGroup!==null}function Ca(r){const e=Se(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Dt(bt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(f=f.add(_.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Wu(l,i))}),t.has(bt.keyField().canonicalString())||e.ce.push(new Wu(bt.keyField(),i))}return e.ce}function cr(r){const e=Se(r);return e.le||(e.le=Sx(e,Ca(r))),e.le}function Sx(r,e){if(r.limitType==="F")return Ng(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Wu(o.field,l)});const t=r.endAt?new $u(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new $u(r.startAt.position,r.startAt.inclusive):null;return Ng(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Ed(r,e){const t=r.filters.concat([e]);return new Qa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Td(r,e,t){return new Qa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ic(r,e){return Xd(cr(r),cr(e))&&r.limitType===e.limitType}function Pv(r){return`${Yd(cr(r))}|lt:${r.limitType}`}function po(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Cv(o)).join(", ")}]`),sc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>So(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>So(o)).join(",")),`Target(${i})`}(cr(r))}; limitType=${r.limitType})`}function oc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of Ca(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,f,g){const _=Cg(h,f,g);return h.inclusive?_<=0:_<0}(i.startAt,Ca(i),o)||i.endAt&&!function(h,f,g){const _=Cg(h,f,g);return h.inclusive?_>=0:_>0}(i.endAt,Ca(i),o))}(r,e)}function Ax(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function bv(r){return(e,t)=>{let i=!1;for(const o of Ca(r)){const l=kx(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function kx(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),_=f.data.field(l);return g!==null&&_!==null?xo(g,_):Te()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Ev(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new st(ye.comparator);function zr(){return Cx}const Dv=new st(ye.comparator);function Ia(...r){let e=Dv;for(const t of r)e=e.insert(t.key,t);return e}function Ov(r){let e=Dv;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ai(){return Ra()}function Vv(){return Ra()}function Ra(){return new Po(r=>r.toString(),(r,e)=>r.isEqual(e))}const Rx=new st(ye.comparator),Nx=new Dt(ye.comparator);function Ne(...r){let e=Nx;for(const t of r)e=e.add(t);return e}const Px=new Dt(Fe);function bx(){return Px}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function Lv(r){return{integerValue:""+r}}function Dx(r,e){return ux(e)?Lv(e):Zd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this._=void 0}}function Ox(r,e,t){return r instanceof qu?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Kd(l)&&(l=Gd(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Ma?Mv(r,e):r instanceof Fa?Fv(r,e):function(o,l){const h=jv(o,l),f=bg(h)+bg(o.Pe);return vd(h)&&vd(o.Pe)?Lv(f):Zd(o.serializer,f)}(r,e)}function Vx(r,e,t){return r instanceof Ma?Mv(r,e):r instanceof Fa?Fv(r,e):t}function jv(r,e){return r instanceof Hu?function(i){return vd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class qu extends ac{}class Ma extends ac{constructor(e){super(),this.elements=e}}function Mv(r,e){const t=Uv(e);for(const i of r.elements)t.some(o=>fr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Fa extends ac{constructor(e){super(),this.elements=e}}function Fv(r,e){let t=Uv(e);for(const i of r.elements)t=t.filter(o=>!fr(o,i));return{arrayValue:{values:t}}}class Hu extends ac{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bg(r){return at(r.integerValue||r.doubleValue)}function Uv(r){return Qd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Lx(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof Ma&&o instanceof Ma||i instanceof Fa&&o instanceof Fa?Io(i.elements,o.elements,fr):i instanceof Hu&&o instanceof Hu?fr(i.Pe,o.Pe):i instanceof qu&&o instanceof qu}(r.transform,e.transform)}class jx{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ru(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lc{}function zv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $v(r.key,hr.none()):new Ya(r.key,r.data,hr.none());{const t=r.data,i=sn.empty();let o=new Dt(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new bs(r.key,i,new mn(o.toArray()),hr.none())}}function Mx(r,e,t){r instanceof Ya?function(o,l,h){const f=o.value.clone(),g=Og(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof bs?function(o,l,h){if(!Ru(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Og(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Bv(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Na(r,e,t,i){return r instanceof Ya?function(l,h,f,g){if(!Ru(l.precondition,h))return f;const _=l.value.clone(),E=Vg(l.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(r,e,t,i):r instanceof bs?function(l,h,f,g){if(!Ru(l.precondition,h))return f;const _=Vg(l.fieldTransforms,g,h),E=h.data;return E.setAll(Bv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(S=>S.field))}(r,e,t,i):function(l,h,f){return Ru(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function Fx(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=jv(i.transform,o||null);l!=null&&(t===null&&(t=sn.empty()),t.set(i.field,l))}return t||null}function Dg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Io(i,o,(l,h)=>Lx(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ya extends lc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends lc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Bv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function Og(r,e,t){const i=new Map;Be(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,Vx(h,f,t[o]))}return i}function Vg(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,Ox(l,h,e))}return i}class $v extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ux extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Mx(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Na(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Na(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Vv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=zv(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(xe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(t,i)=>Dg(t,i))&&Io(this.baseMutations,e.baseMutations,(t,i)=>Dg(t,i))}}class ef{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length);let o=function(){return Rx}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new ef(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ve;function Wx(r){switch(r){default:return Te();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Wv(r){if(r===void 0)return Ur("GRPC error has no .code"),K.UNKNOWN;switch(r){case ft.OK:return K.OK;case ft.CANCELLED:return K.CANCELLED;case ft.UNKNOWN:return K.UNKNOWN;case ft.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ft.INTERNAL:return K.INTERNAL;case ft.UNAVAILABLE:return K.UNAVAILABLE;case ft.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ft.NOT_FOUND:return K.NOT_FOUND;case ft.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ft.ABORTED:return K.ABORTED;case ft.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ft.DATA_LOSS:return K.DATA_LOSS;default:return Te()}}(Ve=ft||(ft={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new li([4294967295,4294967295],0);function Lg(r){const e=qx().encode(r),t=new fv;return t.update(e),new Uint8Array(t.digest())}function jg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new li([t,i],0),new li([o,l],0)]}class tf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new xa(`Invalid padding: ${t}`);if(i<0)throw new xa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new xa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=li.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(li.fromNumber(i)));return o.compare(Hx)===1&&(o=new li([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Lg(e),[i,o]=jg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new tf(l,o,t);return i.forEach(f=>h.insert(f)),h}insert(e){if(this.Ie===0)return;const t=Lg(e),[i,o]=jg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uc(xe.min(),o,new st(Fe),zr(),Ne())}}class Xa{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xa(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class qv{constructor(e,t){this.targetId=e,this.me=t}}class Hv{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Mg{constructor(){this.fe=0,this.ge=Ug(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),t=Ne(),i=Ne();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te()}}),new Xa(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Ug()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Kx{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=Fg(),this.Qe=new st(Fe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(wd(l))if(i===0){const h=new ye(l.path);this.Ue(t,h,Bt.newNoDocument(h,xe.min()))}else Be(i===1);else{const h=this.Ye(t);if(h!==i){const f=this.Ze(e),g=f?this.Xe(f,e,h):1;if(g!==0){this.je(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=mi(i).toUint8Array()}catch(g){if(g instanceof Tv)return To("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new tf(h,o,l)}catch(g){return To(g instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((l,h)=>{const f=this.Je(h);if(f){if(l.current&&wd(f.target)){const g=new ye(f.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,Bt.newNoDocument(g,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let i=Ne();this.qe.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new uc(e,t,this.Qe,this.ke,i);return this.ke=zr(),this.qe=Fg(),this.Qe=new st(Fe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(Fe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Fg(){return new st(ye.comparator)}function Ug(){return new st(ye.comparator)}const Gx={asc:"ASCENDING",desc:"DESCENDING"},Qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yx={and:"AND",or:"OR"};class Xx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Id(r,e){return r.useProto3Json||sc(e)?e:{value:e}}function Ku(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Jx(r,e){return Ku(r,e.toTimestamp())}function dr(r){return Be(!!r),xe.fromTimestamp(function(t){const i=Cs(t);return new vt(i.seconds,i.nanos)}(r))}function nf(r,e){return xd(r,e).canonicalString()}function xd(r,e){const t=function(o){return new Xe(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Gv(r){const e=Xe.fromString(r);return Be(Zv(e)),e}function Sd(r,e){return nf(r.databaseId,e.path)}function nd(r,e){const t=Gv(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(Yv(t))}function Qv(r,e){return nf(r.databaseId,e)}function Zx(r){const e=Gv(r);return e.length===4?Xe.emptyPath():Yv(e)}function Ad(r){return new Xe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Yv(r){return Be(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function zg(r,e,t){return{name:Sd(r,e),fields:t.value.mapValue.fields}}function eS(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,E){return _.useProto3Json?(Be(E===void 0||typeof E=="string"),Ot.fromBase64String(E||"")):(Be(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Ot.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(_){const E=_.code===void 0?K.UNKNOWN:Wv(_.code);return new ce(E,_.message||"")}(h);t=new Hv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=nd(r,i.document.name),l=dr(i.document.updateTime),h=i.document.createTime?dr(i.document.createTime):xe.min(),f=new sn({mapValue:{fields:i.document.fields}}),g=Bt.newFoundDocument(o,l,h,f),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Nu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=nd(r,i.document),l=i.readTime?dr(i.readTime):xe.min(),h=Bt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Nu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=nd(r,i.document),l=i.removedTargetIds||[];t=new Nu([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new $x(o,l),f=i.targetId;t=new qv(f,h)}}return t}function tS(r,e){let t;if(e instanceof Ya)t={update:zg(r,e.key,e.value)};else if(e instanceof $v)t={delete:Sd(r,e.key)};else if(e instanceof bs)t={update:zg(r,e.key,e.data),updateMask:cS(e.fieldMask)};else{if(!(e instanceof Ux))return Te();t={verify:Sd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const f=h.transform;if(f instanceof qu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ma)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Fa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Hu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:Jx(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(r,e.precondition)),t}function nS(r,e){return r&&r.length>0?(Be(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?dr(o.updateTime):dr(l);return h.isEqual(xe.min())&&(h=dr(l)),new jx(h,o.transformResults||[])}(t,e))):[]}function rS(r,e){return{documents:[Qv(r,e.path)]}}function sS(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Qv(r,o);const l=function(_){if(_.length!==0)return Jv(Hn.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(E=>function(P){return{field:mo(P.field),direction:aS(P.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Id(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:t,parent:o}}function iS(r){let e=Zx(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(S){const P=Xv(S);return P instanceof Hn&&Av(P)?P.getFilters():[P]}(t.where));let h=[];t.orderBy&&(h=function(S){return S.map(P=>function($){return new Wu(go($.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(P))}(t.orderBy));let f=null;t.limit&&(f=function(S){let P;return P=typeof S=="object"?S.value:S,sc(P)?null:P}(t.limit));let g=null;t.startAt&&(g=function(S){const P=!!S.before,V=S.values||[];return new $u(V,P)}(t.startAt));let _=null;return t.endAt&&(_=function(S){const P=!S.before,V=S.values||[];return new $u(V,P)}(t.endAt)),xx(e,o,h,l,f,"F",g,_)}function oS(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=go(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(r):r.fieldFilter!==void 0?function(t){return pt.create(go(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Hn.create(t.compositeFilter.filters.map(i=>Xv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(r):Te()}function aS(r){return Gx[r]}function lS(r){return Qx[r]}function uS(r){return Yx[r]}function mo(r){return{fieldPath:r.canonicalString()}}function go(r){return bt.fromServerFormat(r.fieldPath)}function Jv(r){return r instanceof pt?function(t){if(t.op==="=="){if(kg(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(Ag(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kg(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(Ag(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:lS(t.op),value:t.value}}}(r):r instanceof Hn?function(t){const i=t.getFilters().map(o=>Jv(o));return i.length===1?i[0]:{compositeFilter:{op:uS(t.op),filters:i}}}(r):Te()}function cS(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i,o,l=xe.min(),h=xe.min(),f=Ot.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.ct=e}}function dS(r){const e=iS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Td(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.un=new pS}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(ks.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class pS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(Xe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.changes=new Po(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Na(i.mutation,o,mn.empty(),vt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ne()){const o=ai();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=Ia();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ai();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ne()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,i,o){let l=zr();const h=Ra(),f=function(){return Ra()}();return t.forEach((g,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof bs)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Na(E.mutation,_,E.mutation.getFieldMask(),vt.now())):h.set(_.key,mn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var S;return f.set(_,new gS(E,(S=h.get(_))!==null&&S!==void 0?S:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Ra();let o=new st((h,f)=>h-f),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let E=i.get(g)||mn.empty();E=f.applyToLocalView(_,E),i.set(g,E);const S=(o.get(f.batchId)||Ne()).add(g);o=o.insert(f.batchId,S)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),_=g.key,E=g.value,S=Vv();E.forEach(P=>{if(!l.has(P)){const V=zv(t.get(P),i.get(P));V!==null&&S.set(P,V),l=l.add(P)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,S))}return X.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(ai());let f=-1,g=l;return h.next(_=>X.forEach(_,(E,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{g=g.insert(E,P)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,g,_,Ne())).next(E=>({batchId:f,changes:Ov(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let o=Ia();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ia();return this.indexManager.getCollectionParents(e,l).next(f=>X.forEach(f,g=>{const _=function(S,P){return new Qa(P,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((S,P)=>{h=h.insert(S,P)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Bt.newInvalidDocument(E)))});let f=Ia();return h.forEach((g,_)=>{const E=l.get(g);E!==void 0&&Na(E.mutation,_,mn.empty(),vt.now()),oc(t,_)&&(f=f.insert(g,_))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:dS(o.bundledQuery),readTime:dr(o.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.overlays=new st(ye.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ai();return X.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.ht(e,t,l)}),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=ai(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=ai(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const f=ai(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>f.set(_,E)),!(f.size()>=o)););return X.resolve(f)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new Bx(t,i));let l=this.Ir.get(t);l===void 0&&(l=Ne(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.Tr=new Dt(St.Er),this.dr=new Dt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new St(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new ye(new Xe([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.dr.forEachInRange([i,o],h=>{this.Vr(h),l.push(h.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Xe([])),i=new St(t,e),o=new St(t,e+1);let l=Ne();return this.dr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new St(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||Fe(e.wr,t.wr)}static Ar(e,t){return Fe(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(St.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zx(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new St(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],h=>{const f=this.Dr(h.wr);l.push(f)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Fe);return t.forEach(o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],f=>{i=i.add(f.wr)})}),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new St(new ye(l),0);let f=new Dt(Fe);return this.br.forEachWhile(g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(f=f.add(g.wr)),!0)},h),X.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Be(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(t.mutations,o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new St(t,0),o=this.br.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.Mr=e,this.docs=function(){return new st(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=zr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))}),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=zr();const h=t.path,f=new ye(h.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||ix(sx(E),i)<=0||(o.has(E.key)||oc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te()}Or(e,t){return X.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new IS(this)}getSize(e){return X.resolve(this.size)}}class IS extends mS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.persistence=e,this.Nr=new Po(t=>Yd(t),Xd),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rf,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ao(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),X.waitFor(l).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Hd(0),this.Kr=!1,this.Kr=!0,this.$r=new wS,this.referenceDelegate=e(this),this.Ur=new xS(this),this.indexManager=new fS,this.remoteDocumentCache=function(o){return new TS(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new hS(t),this.Gr=new vS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _S,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new ES(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new AS(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,t){return X.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class AS extends ax{constructor(e){super(),this.currentSequenceNumber=e}}class sf{constructor(e){this.persistence=e,this.Jr=new rf,this.Yr=null}static Zr(e){return new sf(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,i=>{const o=ye.fromPath(i);return this.ei(e,o).next(l=>{l||t.removeEntry(o,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new of(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vw()?8:lx($t())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Zi(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new kS;return this.Xi(e,t,h).next(f=>{if(l.result=f,this.zi)return this.es(e,t,h,f.size)})}).next(()=>l.result)}es(e,t,i,o){return i.documentReadCount<this.ji?(ya()<=De.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(ya()<=De.DEBUG&&fe("QueryEngine","Query:",po(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(ya()<=De.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):X.resolve())}Yi(e,t){if(Pg(t))return X.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Td(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=Ne(...l);return this.Ji.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,i).next(g=>{const _=this.ts(t,f);return this.ns(t,_,h,g.readTime)?this.Yi(e,Td(t,null,"F")):this.rs(e,_,t,g)}))})))}Zi(e,t,i,o){return Pg(t)||o.isEqual(xe.min())?X.resolve(null):this.Ji.getDocuments(e,i).next(l=>{const h=this.ts(t,l);return this.ns(t,h,i,o)?X.resolve(null):(ya()<=De.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.rs(e,h,t,rx(o,-1)).next(f=>f))})}ts(e,t){let i=new Dt(bv(e));return t.forEach((o,l)=>{oc(e,l)&&(i=i.add(l))}),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return ya()<=De.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",po(t)),this.Ji.getDocumentsMatchingQuery(e,t,ks.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new st(Fe),this._s=new Po(l=>Yd(l),Xd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function NS(r,e,t,i){return new RS(r,e,t,i)}async function e_(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],f=[];let g=Ne();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:f}))})})}function PS(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return function(f,g,_,E){const S=_.batch,P=S.keys();let V=X.resolve();return P.forEach($=>{V=V.next(()=>E.getEntry(g,$)).next(W=>{const b=_.docVersions.get($);Be(b!==null),W.version.compareTo(b)<0&&(S.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))})}),V.next(()=>f.mutationQueue.removeMutationBatch(g,S))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let g=Ne();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(g=g.add(f.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function t_(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function bS(r,e){const t=Se(r),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach((E,S)=>{const P=o.get(S);if(!P)return;f.push(t.Ur.removeMatchingKeys(l,E.removedDocuments,S).next(()=>t.Ur.addMatchingKeys(l,E.addedDocuments,S)));let V=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?V=V.withResumeToken(Ot.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,i)),o=o.insert(S,V),function(W,b,q){return W.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(P,V,E)&&f.push(t.Ur.updateTargetData(l,V))});let g=zr(),_=Ne();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(DS(l,h,e.documentUpdates).next(E=>{g=E.Ps,_=E.Is})),!i.isEqual(xe.min())){const E=t.Ur.getLastRemoteSnapshotVersion(l).next(S=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(E)}return X.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,_)).next(()=>g)}).then(l=>(t.os=o,l))}function DS(r,e,t){let i=Ne(),o=Ne();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=zr();return t.forEach((f,g)=>{const _=l.get(f);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",g.version)}),{Ps:h,Is:o}})}function OS(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function VS(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ur.getTargetData(i,e).next(l=>l?(o=l,X.resolve(o)):t.Ur.allocateTargetId(i).next(h=>(o=new Ts(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function kd(r,e,t){const i=Se(r),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Ga(h))throw h;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Bg(r,e,t){const i=Se(r);let o=xe.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const S=Se(g),P=S._s.get(E);return P!==void 0?X.resolve(S.os.get(P)):S.Ur.getTargetData(_,E)}(i,h,cr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:xe.min(),t?l:Ne())).next(f=>(LS(i,Ax(e),f),{documents:f,Ts:l})))}function LS(r,e,t){let i=r.us.get(e)||xe.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.us.set(e,i)}class $g{constructor(){this.activeTargetIds=bx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jS{constructor(){this.so=new $g,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $g,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu=null;function rd(){return wu===null?wu=function(){return 268435456+Math.round(2147483648*Math.random())}():wu++,"0x"+wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class zS extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,h){const f=rd(),g=this.xo(t,i.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,l,h),this.No(t,g,_,o).then(E=>(fe("RestConnection",`Received RPC '${t}' ${f}: `,E),E),E=>{throw To("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",g,"request:",o),E})}Lo(t,i,o,l,h,f){return this.Mo(t,i,o,l,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}xo(t,i){const o=FS[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=rd();return new Promise((h,f)=>{const g=new pv;g.setWithCredentials(!0),g.listenOnce(mv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case ku.NO_ERROR:const E=g.getResponseJson();fe(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case ku.TIMEOUT:fe(Ut,`RPC '${e}' ${l} timed out`),f(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const S=g.getStatus();if(fe(Ut,`RPC '${e}' ${l} failed with status:`,S,"response text:",g.getResponseText()),S>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=P?.error;if(V&&V.status&&V.message){const $=function(b){const q=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(q)>=0?q:K.UNKNOWN}(V.status);f(new ce($,V.message))}else f(new ce(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ce(K.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{fe(Ut,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(o);fe(Ut,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",_,i,15)})}Bo(e,t,i){const o=rd(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=vv(),f=yv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");fe(Ut,`Creating RPC '${e}' stream ${o}: ${E}`,g);const S=h.createWebChannel(E,g);let P=!1,V=!1;const $=new US({Io:b=>{V?fe(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(P||(fe(Ut,`Opening RPC '${e}' stream ${o} transport.`),S.open(),P=!0),fe(Ut,`RPC '${e}' stream ${o} sending:`,b),S.send(b))},To:()=>S.close()}),W=(b,q,ne)=>{b.listen(q,ae=>{try{ne(ae)}catch(oe){setTimeout(()=>{throw oe},0)}})};return W(S,Ta.EventType.OPEN,()=>{V||(fe(Ut,`RPC '${e}' stream ${o} transport opened.`),$.yo())}),W(S,Ta.EventType.CLOSE,()=>{V||(V=!0,fe(Ut,`RPC '${e}' stream ${o} transport closed`),$.So())}),W(S,Ta.EventType.ERROR,b=>{V||(V=!0,To(Ut,`RPC '${e}' stream ${o} transport errored:`,b),$.So(new ce(K.UNAVAILABLE,"The operation could not be completed")))}),W(S,Ta.EventType.MESSAGE,b=>{var q;if(!V){const ne=b.data[0];Be(!!ne);const ae=ne,oe=ae.error||((q=ae[0])===null||q===void 0?void 0:q.error);if(oe){fe(Ut,`RPC '${e}' stream ${o} received error:`,oe);const he=oe.status;let Z=function(C){const k=ft[C];if(k!==void 0)return Wv(k)}(he),R=oe.message;Z===void 0&&(Z=K.INTERNAL,R="Unknown error status: "+he+" with message "+oe.message),V=!0,$.So(new ce(Z,R)),S.close()}else fe(Ut,`RPC '${e}' stream ${o} received:`,ne),$.bo(ne)}}),W(f,gv.STAT_EVENT,b=>{b.stat===gd.PROXY?fe(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===gd.NOPROXY&&fe(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.wo()},0),$}}function sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(r){return new Xx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t,i,o,l,h,f,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===t&&this.P_(i,o)},i=>{e(()=>{const o=new ce(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BS extends r_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=eS(this.serializer,e),i=function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?dr(h.readTime):xe.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Ad(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=wd(g)?{documents:rS(l,g)}:{query:sS(l,g)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Kv(l,h.resumeToken);const _=Id(l,h.expectedCount);_!==null&&(f.expectedCount=_)}else if(h.snapshotVersion.compareTo(xe.min())>0){f.readTime=Ku(l,h.snapshotVersion.toTimestamp());const _=Id(l,h.expectedCount);_!==null&&(f.expectedCount=_)}return f}(this.serializer,e);const i=oS(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Ad(this.serializer),t.removeTarget=e,this.a_(t)}}class $S extends r_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=nS(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Ad(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>tS(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Mo(e,xd(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(K.UNKNOWN,l.toString())})}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Lo(e,xd(t,i),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(K.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ur(t),this.D_=!1):fe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{i.enqueueAndForget(async()=>{wi(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await async function(g){const _=Se(g);_.L_.add(4),await Ja(_),_.q_.set("Unknown"),_.L_.delete(4),await hc(_)}(this))})}),this.q_=new qS(i,o)}}async function hc(r){if(wi(r))for(const e of r.B_)await e(!0)}async function Ja(r){for(const e of r.B_)await e(!1)}function s_(r,e){const t=Se(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),cf(t)?uf(t):bo(t).r_()&&lf(t,e))}function af(r,e){const t=Se(r),i=bo(t);t.N_.delete(e),i.r_()&&i_(t,e),t.N_.size===0&&(i.r_()?i.o_():wi(t)&&t.q_.set("Unknown"))}function lf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bo(r).A_(e)}function i_(r,e){r.Q_.xe(e),bo(r).R_(e)}function uf(r){r.Q_=new Kx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),bo(r).start(),r.q_.v_()}function cf(r){return wi(r)&&!bo(r).n_()&&r.N_.size>0}function wi(r){return Se(r).L_.size===0}function o_(r){r.Q_=void 0}async function KS(r){r.q_.set("Online")}async function GS(r){r.N_.forEach((e,t)=>{lf(r,e)})}async function QS(r,e){o_(r),cf(r)?(r.q_.M_(e),uf(r)):r.q_.set("Unknown")}async function YS(r,e,t){if(r.q_.set("Online"),e instanceof Hv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))}(r,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gu(r,i)}else if(e instanceof Nu?r.Q_.Ke(e):e instanceof qv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(xe.min()))try{const i=await t_(r.localStore);t.compareTo(i)>=0&&await function(l,h){const f=l.Q_.rt(h);return f.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.N_.get(_);E&&l.N_.set(_,E.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,_)=>{const E=l.N_.get(g);if(!E)return;l.N_.set(g,E.withResumeToken(Ot.EMPTY_BYTE_STRING,E.snapshotVersion)),i_(l,g);const S=new Ts(E.target,g,_,E.sequenceNumber);lf(l,S)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),await Gu(r,i)}}async function Gu(r,e,t){if(!Ga(e))throw e;r.L_.add(1),await Ja(r),r.q_.set("Offline"),t||(t=()=>t_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await hc(r)})}function a_(r,e){return e().catch(t=>Gu(r,t,e))}async function dc(r){const e=Se(r),t=Rs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XS(e);)try{const o=await OS(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,JS(e,o)}catch(o){await Gu(e,o)}l_(e)&&u_(e)}function XS(r){return wi(r)&&r.O_.length<10}function JS(r,e){r.O_.push(e);const t=Rs(r);t.r_()&&t.V_&&t.m_(e.mutations)}function l_(r){return wi(r)&&!Rs(r).n_()&&r.O_.length>0}function u_(r){Rs(r).start()}async function ZS(r){Rs(r).p_()}async function e1(r){const e=Rs(r);for(const t of r.O_)e.m_(t.mutations)}async function t1(r,e,t){const i=r.O_.shift(),o=ef.from(i,e,t);await a_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await dc(r)}async function n1(r,e){e&&Rs(r).V_&&await async function(i,o){if(function(h){return Wx(h)&&h!==K.ABORTED}(o.code)){const l=i.O_.shift();Rs(i).s_(),await a_(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await dc(i)}}(r,e),l_(r)&&u_(r)}async function qg(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=wi(t);t.L_.add(3),await Ja(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await hc(t)}async function r1(r,e){const t=Se(r);e?(t.L_.delete(2),await hc(t)):e||(t.L_.add(2),await Ja(t),t.q_.set("Unknown"))}function bo(r){return r.K_||(r.K_=function(t,i,o){const l=Se(t);return l.w_(),new BS(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:KS.bind(null,r),Ro:GS.bind(null,r),mo:QS.bind(null,r),d_:YS.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),cf(r)?uf(r):r.q_.set("Unknown")):(await r.K_.stop(),o_(r))})),r.K_}function Rs(r){return r.U_||(r.U_=function(t,i,o){const l=Se(t);return l.w_(),new $S(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZS.bind(null,r),mo:n1.bind(null,r),f_:e1.bind(null,r),g_:t1.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await dc(r)):(await r.U_.stop(),r.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new hf(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(r,e){if(Ur("AsyncQueue",`${e}: ${r}`),Ga(r))return new ce(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ia(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.W_=new st(ye.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ko{constructor(e,t,i,o,l,h,f,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new ko(e,t,Eo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class i1{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Se(t),l=o.queries;o.queries=Kg(),l.forEach((h,f)=>{for(const g of f.j_)g.onError(i)})})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function Kg(){return new Po(r=>Pv(r),ic)}async function o1(r,e){const t=Se(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new s1,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=df(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&ff(t)}async function a1(r,e){const t=Se(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function l1(r,e){const t=Se(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.j_)f.X_(o)&&(i=!0);h.z_=o}}i&&ff(t)}function u1(r,e,t){const i=Se(r),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function ff(r){r.Y_.forEach(e=>{e.next()})}var Cd,Gg;(Gg=Cd||(Cd={})).ea="default",Gg.Cache="cache";class c1{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.key=e}}class h_{constructor(e){this.key=e}}class h1{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ne(),this.mutatedKeys=Ne(),this.Aa=bv(e),this.Ra=new Eo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Hg,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const P=o.get(E),V=oc(this.query,S)?S:null,$=!!P&&this.mutatedKeys.has(P.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let b=!1;P&&V?P.data.isEqual(V.data)?$!==W&&(i.track({type:3,doc:V}),b=!0):this.ga(P,V)||(i.track({type:2,doc:V}),b=!0,(g&&this.Aa(V,g)>0||_&&this.Aa(V,_)<0)&&(f=!0)):!P&&V?(i.track({type:0,doc:V}),b=!0):P&&!V&&(i.track({type:1,doc:P}),b=!0,(g||_)&&(f=!0)),b&&(V?(h=h.add(V),l=W?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{Ra:h,fa:i,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((E,S)=>function(V,$){const W=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return W(V)-W($)}(E.type,S.type)||this.Aa(E.doc,S.doc)),this.pa(i),o=o!=null&&o;const f=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,h.length!==0||_?{snapshot:new ko(this.query,e.Ra,l,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ne(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new h_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new c_(i))}),t}ba(e){this.Ta=e.Ts,this.da=Ne();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class d1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class f1{constructor(e){this.key=e,this.va=!1}}class p1{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Po(f=>Pv(f),ic),this.Ma=new Map,this.xa=new Set,this.Oa=new st(ye.comparator),this.Na=new Map,this.La=new rf,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function m1(r,e,t=!0){const i=y_(r);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await d_(i,e,t,!0),o}async function g1(r,e){const t=y_(r);await d_(t,e,!0,!1)}async function d_(r,e,t,i){const o=await VS(r.localStore,cr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await y1(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&s_(r.remoteStore,o),f}async function y1(r,e,t,i,o){r.Ka=(S,P,V)=>async function(W,b,q,ne){let ae=b.view.ma(q);ae.ns&&(ae=await Bg(W.localStore,b.query,!1).then(({documents:R})=>b.view.ma(R,ae)));const oe=ne&&ne.targetChanges.get(b.targetId),he=ne&&ne.targetMismatches.get(b.targetId)!=null,Z=b.view.applyChanges(ae,W.isPrimaryClient,oe,he);return Yg(W,b.targetId,Z.wa),Z.snapshot}(r,S,P,V);const l=await Bg(r.localStore,e,!0),h=new h1(e,l.Ts),f=h.ma(l.documents),g=Xa.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(f,r.isPrimaryClient,g);Yg(r,t,_.wa);const E=new d1(e,t,h);return r.Fa.set(e,E),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),_.snapshot}async function v1(r,e,t){const i=Se(r),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter(h=>!ic(h,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await kd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&af(i.remoteStore,o.targetId),Rd(i,o.targetId)}).catch(Ka)):(Rd(i,o.targetId),await kd(i.localStore,o.targetId,!0))}async function _1(r,e){const t=Se(r),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),af(t.remoteStore,i.targetId))}async function w1(r,e,t){const i=k1(r);try{const o=await function(h,f){const g=Se(h),_=vt.now(),E=f.reduce((V,$)=>V.add($.key),Ne());let S,P;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let $=zr(),W=Ne();return g.cs.getEntries(V,E).next(b=>{$=b,$.forEach((q,ne)=>{ne.isValidDocument()||(W=W.add(q))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,$)).next(b=>{S=b;const q=[];for(const ne of f){const ae=Fx(ne,S.get(ne.key).overlayedDocument);ae!=null&&q.push(new bs(ne.key,ae,Iv(ae.value.mapValue),hr.exists(!0)))}return g.mutationQueue.addMutationBatch(V,_,q,f)}).next(b=>{P=b;const q=b.applyToLocalDocumentSet(S,W);return g.documentOverlayCache.saveOverlays(V,b.batchId,q)})}).then(()=>({batchId:P.batchId,changes:Ov(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let _=h.Ba[h.currentUser.toKey()];_||(_=new st(Fe)),_=_.insert(f,g),h.Ba[h.currentUser.toKey()]=_}(i,o.batchId,t),await Za(i,o.changes),await dc(i.remoteStore)}catch(o){const l=df(o,"Failed to persist write");t.reject(l)}}async function f_(r,e){const t=Se(r);try{const i=await bS(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Na.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Be(h.va):o.removedDocuments.size>0&&(Be(h.va),h.va=!1))}),await Za(t,i,e)}catch(i){await Ka(i)}}function Qg(r,e,t){const i=Se(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach((l,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Se(h);g.onlineState=f;let _=!1;g.queries.forEach((E,S)=>{for(const P of S.j_)P.Z_(f)&&(_=!0)}),_&&ff(g)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function E1(r,e,t){const i=Se(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let h=new st(ye.comparator);h=h.insert(l,Bt.newNoDocument(l,xe.min()));const f=Ne().add(l),g=new uc(xe.min(),new Map,new st(Fe),h,f);await f_(i,g),i.Oa=i.Oa.remove(l),i.Na.delete(e),pf(i)}else await kd(i.localStore,e,!1).then(()=>Rd(i,e,t)).catch(Ka)}async function T1(r,e){const t=Se(r),i=e.batch.batchId;try{const o=await PS(t.localStore,e);m_(t,i,null),p_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Za(t,o)}catch(o){await Ka(o)}}async function I1(r,e,t){const i=Se(r);try{const o=await function(h,f){const g=Se(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,f).next(S=>(Be(S!==null),E=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(i.localStore,e);m_(i,e,t),p_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Za(i,o)}catch(o){await Ka(o)}}function p_(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function m_(r,e,t){const i=Se(r);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Rd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(i=>{r.La.containsKey(i)||g_(r,i)})}function g_(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(af(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),pf(r))}function Yg(r,e,t){for(const i of t)i instanceof c_?(r.La.addReference(i.key,e),x1(r,i)):i instanceof h_?(fe("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||g_(r,i.key)):Te()}function x1(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(fe("SyncEngine","New document in limbo: "+t),r.xa.add(i),pf(r))}function pf(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ye(Xe.fromString(e)),i=r.qa.next();r.Na.set(i,new f1(t)),r.Oa=r.Oa.insert(t,i),s_(r.remoteStore,new Ts(cr(Jd(t.path)),i,"TargetPurposeLimboResolution",Hd.oe))}}async function Za(r,e,t){const i=Se(r),o=[],l=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach((f,g)=>{h.push(i.Ka(g,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const S=_?!_.fromCache:(E=t?.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(_){o.push(_);const S=of.Wi(g.targetId,_);l.push(S)}}))}),await Promise.all(h),i.Ca.d_(o),await async function(g,_){const E=Se(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>X.forEach(_,P=>X.forEach(P.$i,V=>E.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>X.forEach(P.Ui,V=>E.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!Ga(S))throw S;fe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of _){const P=S.targetId;if(!S.fromCache){const V=E.os.get(P),$=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion($);E.os=E.os.insert(P,W)}}}(i.localStore,l))}async function S1(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=await e_(t.localStore,e);t.currentUser=e,function(l,h){l.ka.forEach(f=>{f.forEach(g=>{g.reject(new ce(K.CANCELLED,h))})}),l.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Za(t,i.hs)}}function A1(r,e){const t=Se(r),i=t.Na.get(e);if(i&&i.va)return Ne().add(i.key);{let o=Ne();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const f=t.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function y_(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E1.bind(null,e),e.Ca.d_=l1.bind(null,e.eventManager),e.Ca.$a=u1.bind(null,e.eventManager),e}function k1(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I1.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return NS(this.persistence,new CS,e.initialUser,this.serializer)}Ga(e){return new SS(sf.Zr,this.serializer)}Wa(e){return new jS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class Nd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=S1.bind(null,this.syncEngine),await r1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i1}()}createDatastore(e){const t=cc(e.databaseInfo.databaseId),i=function(l){return new zS(l)}(e.databaseInfo);return function(l,h,f,g){return new WS(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,f){return new HS(i,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Qg(this.syncEngine,t,0),function(){return Wg.D()?new Wg:new MS}())}createSyncEngine(e,t){return function(o,l,h,f,g,_,E){const S=new p1(o,l,h,f,g,_);return E&&(S.Qa=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);fe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Ja(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nd.provider={build:()=>new Nd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=wv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{fe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(fe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=df(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function id(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await e_(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Xg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await N1(r);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>qg(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>qg(e.remoteStore,o)),r._onlineComponents=e}async function N1(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await id(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),await id(r,new Qu)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await id(r,new Qu);return r._offlineComponents}async function v_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await Xg(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await Xg(r,new Nd))),r._onlineComponents}function P1(r){return v_(r).then(e=>e.syncEngine)}async function Jg(r){const e=await v_(r),t=e.eventManager;return t.onListen=m1.bind(null,e.syncEngine),t.onUnlisten=v1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=g1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_1.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r,e,t){if(!t)throw new ce(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function b1(r,e,t,i){if(e===!0&&i===!0)throw new ce(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ey(r){if(!ye.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ty(r){if(ye.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function fc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function ci(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fc(r);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new GI;switch(i.type){case"firstParty":return new JI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Zg.get(t);i&&(fe("ComponentProvider","Removing Datastore"),Zg.delete(t),i.terminate())}(this),Promise.resolve()}}function D1(r,e,t,i={}){var o;const l=(r=ci(r,pc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=zt.MOCK_USER;else{f=Ay(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new zt(_)}r._authCredentials=new QI(new _v(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class on{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Ss extends Do{constructor(e,t,i){super(e,t,Jd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new ye(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function ry(r,e,...t){if(r=_t(r),w_("collection","path",e),r instanceof pc){const i=Xe.fromString(e,...t);return ty(i),new Ss(r,null,i)}{if(!(r instanceof on||r instanceof Ss))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xe.fromString(e,...t));return ty(i),new Ss(r.firestore,null,i)}}function Pu(r,e,...t){if(r=_t(r),arguments.length===1&&(e=wv.newId()),w_("doc","path",e),r instanceof pc){const i=Xe.fromString(e,...t);return ey(i),new on(r,null,new ye(i))}{if(!(r instanceof on||r instanceof Ss))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xe.fromString(e,...t));return ey(i),new on(r.firestore,r instanceof Ss?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n_(this,"async_queue_retry"),this.Vu=()=>{const i=sd();i&&fe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ui;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(i);throw Ur("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=hf.createAndSchedule(this,e,t,i,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function iy(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ua extends pc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new sy,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,await e}}}function O1(r,e){const t=typeof r=="object"?r:Vd(),i=typeof r=="string"?r:"(default)",o=ec(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Iy("firestore");l&&D1(o,...l)}return o}function E_(r){if(r._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||V1(r),r._firestoreClient}function V1(r){var e,t,i;const o=r._freezeSettings(),l=function(f,g,_,E){return new hx(f,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,__(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new R1(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f?._online.build();return{_offline:f?._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Ot.fromBase64String(e))}catch(t){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=/^__.*__$/;class j1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ya(e,this.data,t,this.fieldTransforms)}}class T_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class vf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(I_(this.Cu)&&L1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class M1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||cc(e)}Qu(e,t,i,o=!1){return new vf({Cu:e,methodName:t,qu:i,path:bt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _f(r){const e=r._freezeSettings(),t=cc(r._databaseId);return new M1(r._databaseId,!!e.ignoreUndefinedProperties,t)}function F1(r,e,t,i,o,l={}){const h=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);wf("Data must be an object, but it was:",h,i);const f=x_(i,h);let g,_;if(l.merge)g=new mn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const S of l.mergeFields){const P=Pd(e,S,t);if(!h.contains(P))throw new ce(K.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);A_(E,P)||E.push(P)}g=new mn(E),_=h.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,_=h.fieldTransforms;return new j1(new sn(f),g,_)}class gc extends mf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}function U1(r,e,t,i){const o=r.Qu(1,e,t);wf("Data must be an object, but it was:",o,i);const l=[],h=sn.empty();_i(i,(g,_)=>{const E=Ef(e,g,t);_=_t(_);const S=o.Nu(E);if(_ instanceof gc)l.push(E);else{const P=el(_,S);P!=null&&(l.push(E),h.set(E,P))}});const f=new mn(l);return new T_(h,f,o.fieldTransforms)}function z1(r,e,t,i,o,l){const h=r.Qu(1,e,t),f=[Pd(e,i,t)],g=[o];if(l.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<l.length;P+=2)f.push(Pd(e,l[P])),g.push(l[P+1]);const _=[],E=sn.empty();for(let P=f.length-1;P>=0;--P)if(!A_(_,f[P])){const V=f[P];let $=g[P];$=_t($);const W=h.Nu(V);if($ instanceof gc)_.push(V);else{const b=el($,W);b!=null&&(_.push(V),E.set(V,b))}}const S=new mn(_);return new T_(E,S,h.fieldTransforms)}function B1(r,e,t,i=!1){return el(t,r.Qu(i?4:3,e))}function el(r,e){if(S_(r=_t(r)))return wf("Unsupported field value:",e,r),x_(r,e);if(r instanceof mf)return function(i,o){if(!I_(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const f of i){let g=el(f,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=_t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Dx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:Ku(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ku(o.serializer,l)}}if(i instanceof gf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Co)return{bytesValue:Kv(o.serializer,i._byteString)};if(i instanceof on){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:nf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof yf)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return Zd(f.serializer,g)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${fc(i)}`)}(r,e)}function x_(r,e){const t={};return Ev(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(r,(i,o)=>{const l=el(o,e.Mu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function S_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof gf||r instanceof Co||r instanceof on||r instanceof mf||r instanceof yf)}function wf(r,e,t){if(!S_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=fc(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function Pd(r,e,t){if((e=_t(e))instanceof mc)return e._internalPath;if(typeof e=="string")return Ef(r,e);throw Yu("Field path arguments must be of type string or ",r,!1,void 0,t)}const $1=new RegExp("[~\\*/\\[\\]]");function Ef(r,e,t){if(e.search($1)>=0)throw Yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new mc(...e.split("."))._internalPath}catch{throw Yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Yu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ce(K.INVALID_ARGUMENT,f+r+g)}function A_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(C_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W1 extends k_{data(){return super.data()}}function C_(r,e){return typeof e=="string"?Ef(r,e):e instanceof mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tf{}class H1 extends Tf{}function K1(r,e,...t){let i=[];e instanceof Tf&&i.push(e),i=i.concat(t),function(l){const h=l.filter(g=>g instanceof xf).length,f=l.filter(g=>g instanceof If).length;if(h>1||h>0&&f>0)throw new ce(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)r=o._apply(r);return r}class If extends H1{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new If(e,t,i)}_apply(e){const t=this._parse(e);return R_(e._query,t),new Do(e.firestore,e.converter,Ed(e._query,t))}_parse(e){const t=_f(e.firestore);return function(l,h,f,g,_,E,S){let P;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ay(S,E);const V=[];for(const $ of S)V.push(oy(g,l,$));P={arrayValue:{values:V}}}else P=oy(g,l,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ay(S,E),P=B1(f,h,S,E==="in"||E==="not-in");return pt.create(_,E,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class xf extends Tf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xf(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)R_(h,g),h=Ed(h,g)}(e._query,t),new Do(e.firestore,e.converter,Ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oy(r,e,t){if(typeof(t=_t(t))=="string"){if(t==="")throw new ce(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&t.indexOf("/")!==-1)throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Xe.fromString(t));if(!ye.isDocumentKey(i))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sg(r,new ye(i))}if(t instanceof on)return Sg(r,t._key);throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fc(t)}.`)}function ay(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R_(r,e){const t=function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class G1{convertValue(e,t="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _i(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>at(h.doubleValue));return new yf(l)}convertGeoPoint(e){return new gf(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Gd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Va(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xe.fromString(e);Be(Zv(i));const o=new La(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Ur(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N_ extends k_{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(C_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class bu extends N_{data(e={}){return super.data(e)}}class Y1{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Sa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bu(this._firestore,this._userDataWriter,i.key,i,new Sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Sa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Sa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return f.type!==0&&(_=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:X1(f.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X1(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class P_ extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function ly(r,e,t,...i){r=ci(r,on);const o=ci(r.firestore,Ua),l=_f(o);let h;return h=typeof(e=_t(e))=="string"||e instanceof mc?z1(l,"updateDoc",r._key,e,t,i):U1(l,"updateDoc",r._key,e),b_(o,[h.toMutation(r._key,hr.exists(!0))])}function J1(r,e){const t=ci(r.firestore,Ua),i=Pu(r),o=Q1(r.converter,e);return b_(t,[F1(_f(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,hr.exists(!1))]).then(()=>i)}function uy(r,...e){var t,i,o;r=_t(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||iy(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(iy(e[h])){const S=e[h];e[h]=(t=S.next)===null||t===void 0?void 0:t.bind(S),e[h+1]=(i=S.error)===null||i===void 0?void 0:i.bind(S),e[h+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let g,_,E;if(r instanceof on)_=ci(r.firestore,Ua),E=Jd(r._key.path),g={next:S=>{e[h]&&e[h](Z1(_,r,S))},error:e[h+1],complete:e[h+2]};else{const S=ci(r,Do);_=ci(S.firestore,Ua),E=S._query;const P=new P_(_);g={next:V=>{e[h]&&e[h](new Y1(_,P,S,V))},error:e[h+1],complete:e[h+2]},q1(r._query)}return function(P,V,$,W){const b=new C1(W),q=new c1(V,b,$);return P.asyncQueue.enqueueAndForget(async()=>o1(await Jg(P),q)),()=>{b.Za(),P.asyncQueue.enqueueAndForget(async()=>a1(await Jg(P),q))}}(E_(_),E,f,g)}function b_(r,e){return function(i,o){const l=new ui;return i.asyncQueue.enqueueAndForget(async()=>w1(await P1(i),o,l)),l.promise}(E_(r),e)}function Z1(r,e,t){const i=t.docs.get(e._key),o=new P_(r);return new N_(r,o,e._key,i,new Sa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){No=o})(yi),hi(new As("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new Ua(new YI(i.getProvider("auth-internal")),new ex(i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(_.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ar(wg,"4.7.3",e),ar(wg,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firebasestorage.googleapis.com",eA="storageBucket",tA=2*60*1e3,nA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends mr{constructor(e,t,i=0){super(od(e),`Firebase Storage: ${t} (${od(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return od(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pr||(pr={}));function od(r){return"storage/"+r}function rA(){const r="An unknown error occurred, please check the error payload for server response.";return new gr(pr.UNKNOWN,r)}function sA(){return new gr(pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iA(){return new gr(pr.CANCELED,"User canceled the upload/download.")}function oA(r){return new gr(pr.INVALID_URL,"Invalid URL '"+r+"'.")}function aA(r){return new gr(pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function cy(r){return new gr(pr.INVALID_ARGUMENT,r)}function O_(){return new gr(pr.APP_DELETED,"The Firebase app was deleted.")}function lA(r){return new gr(pr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Wn.makeFromUrl(e,t)}catch{return new Wn(e,"")}if(i.path==="")return i;throw aA(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const h="(/(.*))?$",f=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function _(oe){oe.path_=decodeURIComponent(oe.path)}const E="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",V=new RegExp(`^https?://${S}/${E}/b/${o}/o${P}`,"i"),$={bucket:1,path:3},W=t===D_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",q=new RegExp(`^https?://${W}/${o}/${b}`,"i"),ae=[{regex:f,indices:g,postModify:l},{regex:V,indices:$,postModify:_},{regex:q,indices:{bucket:1,path:2},postModify:_}];for(let oe=0;oe<ae.length;oe++){const he=ae[oe],Z=he.regex.exec(e);if(Z){const R=Z[he.indices.bucket];let I=Z[he.indices.path];I||(I=""),i=new Wn(R,I),he.postModify(i);break}}if(i==null)throw oA(e);return i}}class uA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(r,e,t){let i=1,o=null,l=null,h=!1,f=0;function g(){return f===2}let _=!1;function E(...b){_||(_=!0,e.apply(null,b))}function S(b){o=setTimeout(()=>{o=null,r(V,g())},b)}function P(){l&&clearTimeout(l)}function V(b,...q){if(_){P();return}if(b){P(),E.call(null,b,...q);return}if(g()||h){P(),E.call(null,b,...q);return}i<64&&(i*=2);let ae;f===1?(f=2,ae=0):ae=(i+Math.random())*1e3,S(ae)}let $=!1;function W(b){$||($=!0,P(),!_&&(o!==null?(b||(f=2),clearTimeout(o),S(0)):b||(f=1)))}return S(0),l=setTimeout(()=>{h=!0,W(!0)},t),W}function hA(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(r){return r!==void 0}function hy(r,e,t,i){if(i<e)throw cy(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw cy(`Invalid value for '${r}'. Expected ${t} or less.`)}function fA(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Xu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Xu||(Xu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,i,o,l,h,f,g,_,E,S,P=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=f,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,$)=>{this.resolve_=V,this.reject_=$,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Eu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=f=>{const g=f.loaded,_=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const f=l.getErrorCode()===Xu.NO_ERROR,g=l.getStatus();if(!f||pA(g,this.additionalRetryCodes_)&&this.retry){const E=l.getErrorCode()===Xu.ABORT;i(!1,new Eu(!1,null,E));return}const _=this.successCodes_.indexOf(g)!==-1;i(!0,new Eu(_,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());dA(g)?l(g):l()}catch(g){h(g)}else if(f!==null){const g=rA();g.serverResponse=f.getErrorText(),this.errorCallback_?h(this.errorCallback_(f,g)):h(g)}else if(o.canceled){const g=this.appDelete_?O_():iA();h(g)}else{const g=sA();h(g)}};this.canceled_?t(!1,new Eu(!1,null,!0)):this.backoffId_=cA(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Eu{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function gA(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function yA(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vA(r,e){e&&(r["X-Firebase-GMPID"]=e)}function _A(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function wA(r,e,t,i,o,l,h=!0){const f=fA(r.urlParams),g=r.url+f,_=Object.assign({},r.headers);return vA(_,e),gA(_,t),yA(_,l),_A(_,i),new mA(g,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function TA(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this._service=e,t instanceof Wn?this._location=t:this._location=Wn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ju(e,t)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TA(this._location.path)}get storage(){return this._service}get parent(){const e=EA(this._location.path);if(e===null)return null;const t=new Wn(this._location.bucket,e);return new Ju(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lA(e)}}function dy(r,e){const t=e?.[eA];return t==null?null:Wn.makeFromBucketSpec(t,r)}function IA(r,e,t,i={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:Ay(o,r.app.options.projectId))}class xA{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=D_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tA,this._maxUploadRetryTime=nA,this._requests=new Set,o!=null?this._bucket=Wn.makeFromBucketSpec(o,this._host):this._bucket=dy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=dy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ju(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new uA(O_());{const h=wA(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const fy="@firebase/storage",py="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="storage";function SA(r=Vd(),e){r=_t(r);const i=ec(r,V_).getImmediate({identifier:e}),o=Iy("storage");return o&&AA(i,...o),i}function AA(r,e,t,i={}){IA(r,e,t,i)}function kA(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new xA(t,i,o,e,yi)}function CA(){hi(new As(V_,kA,"PUBLIC").setMultipleInstances(!0)),ar(fy,py,""),ar(fy,py,"esm2017")}CA();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L_=(...r)=>r.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Q.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...f},g)=>Q.createElement("svg",{ref:g,...NA,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:L_("lucide",o),...f},[...h.map(([_,E])=>Q.createElement(_,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=(r,e)=>{const t=Q.forwardRef(({className:i,...o},l)=>Q.createElement(PA,{ref:l,iconNode:e,className:L_(`lucide-${RA(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=et("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=et("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=et("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=et("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=et("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=et("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=et("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=et("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=et("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=et("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=et("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=et("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=et("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=et("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=et("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=et("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=et("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=et("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=et("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=et("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=et("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KA=({setUserId:r})=>{const[e,t]=Q.useState(!0),[i,o]=Q.useState(""),[l,h]=Q.useState(""),[f,g]=Q.useState(""),[_,E]=Q.useState(!1),S=dv(),P=async V=>{V.preventDefault(),g(""),E(!0);try{e?await DT(S,i,l):await bT(S,i,l)}catch($){g($.message)}finally{E(!1)}};return y.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex flex-col justify-center items-center p-4",children:y.jsxs("div",{className:"w-full max-w-md",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(M_,{className:"mx-auto h-12 w-auto text-cyan-500"}),y.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e?"Sign in to your account":"Create a new account"})]}),y.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-xl rounded-2xl p-8",children:[y.jsxs("form",{className:"space-y-6",onSubmit:P,children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email address"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:V=>o(V.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:V=>h(V.target.value),className:"block w-full appearance-none rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 px-3 py-2 placeholder-slate-400 dark:placeholder-slate-500 shadow-sm focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm"})})]}),f&&y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:y.jsx("p",{className:"text-sm text-red-700",children:f})}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:_,className:"flex w-full justify-center rounded-md border border-transparent bg-cyan-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-400",children:_?"Processing...":e?"Sign in":"Create account"})})]}),y.jsx("div",{className:"mt-6",children:y.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[e?"Don't have an account?":"Already have an account?",y.jsx("button",{onClick:()=>t(!e),className:"font-medium text-cyan-600 hover:text-cyan-500 ml-1",children:e?"Sign up":"Sign in"})]})})]})]})})},GA=({currentView:r,setCurrentView:e,onAddOrderClick:t})=>y.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[r!=="dashboard"?y.jsx("button",{onClick:()=>e("dashboard"),className:"p-2 rounded-full hover:bg-gray-100",children:y.jsx(bA,{size:24})}):y.jsx(kf,{className:"h-8 w-8 text-blue-600"}),y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HVAC Dispatch"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>e("billing"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(LA,{size:20})," Billing"]}),y.jsxs("button",{onClick:()=>e("reporting"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(DA,{size:20})," Reporting"]}),y.jsxs("button",{onClick:()=>e("route"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(FA,{size:20})," Route"]}),y.jsxs("button",{onClick:()=>e("dispatch"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(Sf,{size:20})," Dispatch"]}),y.jsxs("button",{onClick:()=>e("customers"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(HA,{size:20})," Customers"]}),y.jsxs("button",{onClick:()=>e("technicians"),className:"flex items-center gap-2 text-gray-600 font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[y.jsx(Af,{size:20})," Technicians"]}),y.jsxs("button",{onClick:t,className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[y.jsx(yc,{size:20})," Add Work Order"]})]})]})})}),QA=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,YA=r=>{const e=QA(r);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},XA=r=>{if(!r)return"";const[e,t]=r.split(":"),i=parseInt(e,10),o=i>=12?"PM":"AM";return`${(i+11)%12+1}:${t} ${o}`},my=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",JA=r=>({completed:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800",open:"bg-yellow-100 text-yellow-800","in progress":"bg-purple-100 text-purple-800","on hold":"bg-pink-100 text-pink-800",cancelled:"bg-red-100 text-red-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",ZA=({order:r,onSelectOrder:e})=>y.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden border-l-4",style:{borderColor:my(r.Priority).borderColor},children:[y.jsxs("div",{className:"p-5",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded-full ${my(r.Priority)}`,children:r.Priority}),y.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${JA(r["Order Status"])}`,children:r["Order Status"]})]}),y.jsxs("p",{className:"text-xs text-gray-500 font-semibold mt-3 flex items-center",children:[y.jsx(j_,{size:12,className:"mr-1.5"})," ",r.Client]}),y.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:[r.Company," - #",r["Loc #"]]}),y.jsx("p",{className:"text-sm text-gray-500 font-medium",children:r.Task}),y.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx(Af,{className:"w-4 h-4 mr-2 text-gray-400"}),y.jsx("span",{children:r.technician?.join(", ")||"Unassigned"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(Sf,{className:"w-4 h-4 mr-2 text-gray-400"}),y.jsxs("span",{children:["Scheduled: ",YA(r["Schedule Date"])||"Not Set"," ",r.startTime&&`(${XA(r.startTime)})`]})]}),r.clientWO&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"font-bold mr-2",children:"Client WO:"}),y.jsx("span",{children:r.clientWO})]})]})]}),y.jsx("div",{className:"bg-gray-50 px-5 py-3",children:y.jsx("button",{onClick:()=>e(r),className:"w-full text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors",children:"View Details"})})]}),ek=({orders:r,onSelectOrder:e,searchTerm:t,setSearchTerm:i,statusFilter:o,setStatusFilter:l})=>y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-8",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{className:"relative md:col-span-2",children:[y.jsx(BA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),y.jsx("input",{type:"text",placeholder:"Search by WO#, Client, Location, Tech...",value:t,onChange:h=>i(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{className:"relative",children:[y.jsx(jA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),y.jsxs("select",{value:o,onChange:h=>l(h.target.value),className:"w-full appearance-none pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[y.jsx("option",{children:"All"}),y.jsx("option",{children:"Open"}),y.jsx("option",{children:"Scheduled"}),y.jsx("option",{children:"In Progress"}),y.jsx("option",{children:"On Hold"}),y.jsx("option",{children:"Completed"}),y.jsx("option",{children:"Cancelled"})]}),y.jsx(VA,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:20})]})]})}),r.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(h=>y.jsx(ZA,{order:h,onSelectOrder:e},h.id))}):y.jsxs("div",{className:"text-center py-16 px-6 bg-white rounded-lg shadow-sm",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No Work Orders Found"}),y.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or filter criteria."})]})]}),tk=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,nk=r=>r?r.getTime()/864e5+25569:null,rk=r=>{const e=tk(r);return e?e.toISOString().split("T")[0]:""},sk=r=>r?nk(new Date(r+"T00:00:00")):null,gy=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",ik=r=>({available:"bg-green-100 text-green-800","on site":"bg-blue-100 text-blue-800","en route":"bg-yellow-100 text-yellow-800","on break":"bg-gray-100 text-gray-800","on call":"bg-teal-100 text-teal-800","day off":"bg-slate-200 text-slate-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",ok=({workOrders:r,technicians:e,onSelectOrder:t,onUpdateOrder:i})=>{const[o,l]=Q.useState(new Date().toISOString().split("T")[0]),h=Array.from({length:13},(b,q)=>q+7),f=e.filter(b=>b.name!=="Unassigned"),g=b=>{const q=f.findIndex(ne=>ne.name===b);return q===-1?-1:q+2},_=b=>{if(!b)return 0;const[q,ne]=b.split(":").map(Number);return isNaN(q)||isNaN(ne)?0:(q-7)*4+ne/15+2},E=r.filter(b=>rk(b["Schedule Date"])===o&&b.startTime&&b.endTime&&b.technician?.length>0),S=r.filter(b=>b["Order Status"]==="Open"||!b.technician||b.technician.length===0).sort((b,q)=>{const ne={Emergency:1,Urgent:2,Regular:3,Low:4};return(ne[b.Priority]||5)-(ne[q.Priority]||5)}),P=(b,q)=>{b.dataTransfer.setData("workOrder",JSON.stringify(q))},V=(b,q,ne)=>{b.preventDefault();const ae=JSON.parse(b.dataTransfer.getData("workOrder")),oe=ne,he=`${String(parseInt(ne.split(":")[0])+2).padStart(2,"0")}:${ne.split(":")[1]}`;i(ae.id,{...ae,technician:[q],"Schedule Date":sk(o),startTime:oe,endTime:he,"Order Status":"Scheduled"})},$=b=>{b.preventDefault();const q=JSON.parse(b.dataTransfer.getData("workOrder"));i(q.id,{...q,technician:[],"Schedule Date":null,startTime:null,endTime:null,"Order Status":"Open"})},W=b=>b.preventDefault();return y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dispatch Board"}),y.jsx("input",{type:"date",value:o,onChange:b=>l(b.target.value),className:"p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("div",{className:"w-1/4 bg-white p-4 rounded-lg shadow-sm",onDrop:$,onDragOver:W,children:[y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Unassigned Jobs"}),y.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:S.map(b=>y.jsxs("div",{draggable:!0,onDragStart:q=>P(q,b),className:`p-2 border-l-4 rounded cursor-grab ${gy(b.Priority)}`,children:[y.jsx("p",{className:"font-bold text-sm",children:b.Company}),y.jsx("p",{className:"text-xs text-gray-600",children:b.Task})]},b.id))})]}),y.jsx("div",{className:"w-3/4 bg-white p-4 rounded-lg shadow-sm overflow-x-auto",children:y.jsxs("div",{className:"grid gap-px bg-gray-200 min-w-max",style:{gridTemplateColumns:`60px repeat(${f.length}, minmax(200px, 1fr))`,gridTemplateRows:`auto repeat(${h.length*4}, 20px)`},children:[y.jsx("div",{className:"bg-gray-100 sticky top-0 z-10"}),f.map(b=>y.jsxs("div",{className:"bg-gray-100 text-center font-bold p-2 sticky top-0 z-10 flex flex-col",children:[y.jsx("span",{children:b.name}),y.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full mt-1 ${ik(b.status)}`,children:b.status})]},b.id)),h.map(b=>y.jsxs(Du.Fragment,{children:[y.jsxs("div",{className:"row-start-auto bg-gray-50 text-right pr-2 text-xs text-gray-500 -translate-y-2 sticky left-0 z-10",style:{gridRow:(b-7)*4+2},children:[b>12?b-12:b,":00 ",b>=12?"PM":"AM"]}),f.map((q,ne)=>y.jsx(Du.Fragment,{children:Array.from({length:4}).map((ae,oe)=>y.jsx("div",{onDrop:he=>V(he,q.name,`${String(b).padStart(2,"0")}:${String(oe*15).padStart(2,"0")}`),onDragOver:W,className:"border-t border-gray-200",style:{gridRow:(b-7)*4+oe+2,gridColumn:ne+2}},`${q.id}-${b}-${oe}`))},q.id))]},b)),E.flatMap(b=>b.technician.map(q=>{const ne=g(q),ae=_(b.startTime),oe=_(b.endTime);return ne<0||!ae||!oe||oe<=ae?null:y.jsxs("div",{draggable:!0,onDragStart:he=>P(he,b),className:`p-2 m-px rounded-lg text-xs cursor-grab overflow-hidden ${gy(b.Priority)}`,style:{gridColumn:ne,gridRow:`${ae} / ${oe}`},onClick:()=>t(b),children:[y.jsx("p",{className:"font-bold truncate",children:b.Company}),y.jsx("p",{className:"truncate",children:b.Task})]},`${b.id}-${q}`)}))]})})]})]})},ak=r=>({"national account":"bg-blue-100 text-blue-800",commercial:"bg-purple-100 text-purple-800",residential:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800",lk=({onClose:r,onAddCustomer:e})=>{const[t,i]=Q.useState(""),[o,l]=Q.useState("Commercial"),[h,f]=Q.useState(""),[g,_]=Q.useState(""),[E,S]=Q.useState(""),[P,V]=Q.useState(""),[$,W]=Q.useState(""),[b,q]=Q.useState("MI"),[ne,ae]=Q.useState(""),oe=he=>{if(he.preventDefault(),!t.trim()){alert("Customer name cannot be empty.");return}e({name:t,type:o,contact:{name:h,email:g,phone:E},billingAddress:{street:P,city:$,state:b,zip:ne},locations:[]}),r()};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:oe,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[y.jsx("div",{className:"p-6 border-b",children:y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Customer"})}),y.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Name"}),y.jsx("input",{type:"text",value:t,onChange:he=>i(he.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Type"}),y.jsxs("select",{value:o,onChange:he=>l(he.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Commercial"}),y.jsx("option",{children:"Residential"}),y.jsx("option",{children:"National Account"}),y.jsx("option",{children:"Maintenance"})]})]})]}),y.jsxs("div",{className:"pt-4 border-t",children:[y.jsx("h3",{className:"font-semibold",children:"Primary Contact"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Name"}),y.jsx("input",{value:h,onChange:he=>f(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Email"}),y.jsx("input",{value:g,onChange:he=>_(he.target.value),type:"email",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Phone"}),y.jsx("input",{value:E,onChange:he=>S(he.target.value),type:"tel",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),y.jsxs("div",{className:"pt-4 border-t",children:[y.jsx("h3",{className:"font-semibold",children:"Billing Address"}),y.jsxs("div",{className:"mt-2",children:[y.jsx("label",{className:"text-xs",children:"Street"}),y.jsx("input",{value:P,onChange:he=>V(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"City"}),y.jsx("input",{value:$,onChange:he=>W(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"State"}),y.jsx("input",{value:b,onChange:he=>q(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Zip"}),y.jsx("input",{value:ne,onChange:he=>ae(he.target.value),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]})]}),y.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:r,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),y.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Save Customer"})]})]})})},uk=({customer:r,onClose:e,onUpdateCustomer:t})=>{const[i,o]=Q.useState(r),l=(f,g=null)=>{const{name:_,value:E}=f.target;o(g?S=>({...S,[g]:{...S[g],[_]:E}}):S=>({...S,[_]:E}))},h=f=>{f.preventDefault(),t(i),e()};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:h,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[y.jsx("div",{className:"p-6 border-b",children:y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Customer"})}),y.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Name"}),y.jsx("input",{type:"text",name:"name",value:i.name,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Customer Type"}),y.jsxs("select",{name:"type",value:i.type,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Commercial"}),y.jsx("option",{children:"Residential"}),y.jsx("option",{children:"National Account"}),y.jsx("option",{children:"Maintenance"})]})]})]}),y.jsxs("div",{className:"pt-4 border-t",children:[y.jsx("h3",{className:"font-semibold",children:"Primary Contact"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Name"}),y.jsx("input",{name:"name",value:i.contact.name,onChange:f=>l(f,"contact"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Email"}),y.jsx("input",{name:"email",value:i.contact.email,onChange:f=>l(f,"contact"),type:"email",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Phone"}),y.jsx("input",{name:"phone",value:i.contact.phone,onChange:f=>l(f,"contact"),type:"tel",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),y.jsxs("div",{className:"pt-4 border-t",children:[y.jsx("h3",{className:"font-semibold",children:"Billing Address"}),y.jsxs("div",{className:"mt-2",children:[y.jsx("label",{className:"text-xs",children:"Street"}),y.jsx("input",{name:"street",value:i.billingAddress.street,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"City"}),y.jsx("input",{name:"city",value:i.billingAddress.city,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"State"}),y.jsx("input",{name:"state",value:i.billingAddress.state,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs",children:"Zip"}),y.jsx("input",{name:"zip",value:i.billingAddress.zip,onChange:f=>l(f,"billingAddress"),type:"text",className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]})]}),y.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},ck=({customer:r,onClose:e,onAddLocation:t})=>{const[i,o]=Q.useState(""),[l,h]=Q.useState(""),[f,g]=Q.useState(""),[_,E]=Q.useState("MI"),S=P=>{if(P.preventDefault(),!i.trim()){alert("Location name cannot be empty.");return}t(r.id,{name:i,locNum:l,city:f,state:_}),e()};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:S,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsx("div",{className:"p-6 border-b",children:y.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Add Location to ",r.name]})}),y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location Name"}),y.jsx("input",{type:"text",value:i,onChange:P=>o(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location #"}),y.jsx("input",{type:"text",value:l,onChange:P=>h(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"City"}),y.jsx("input",{type:"text",value:f,onChange:P=>g(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"State"}),y.jsx("input",{type:"text",value:_,onChange:P=>E(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),y.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),y.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Add Location"})]})]})})},hk=({customers:r,onAddCustomer:e,onUpdateCustomer:t,onAddLocation:i})=>{const[o,l]=Q.useState(!1),[h,f]=Q.useState(null),[g,_]=Q.useState(null);return y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Customer Management"}),y.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[y.jsx(yc,{size:20})," Add New Customer"]})]}),y.jsx("div",{className:"space-y-4",children:r.map(E=>y.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:E.name}),y.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${ak(E.type)}`,children:E.type})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>f(E),className:"text-sm text-blue-600 hover:underline",children:"Edit Details"}),y.jsx("button",{onClick:()=>_(E),className:"text-sm text-green-600 hover:underline",children:"Add Location"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[y.jsxs("div",{className:"text-sm",children:[y.jsx("p",{className:"font-semibold text-gray-600",children:"Primary Contact"}),y.jsxs("p",{className:"flex items-center gap-2",children:[y.jsx(Af,{size:14})," ",E.contact.name]}),y.jsxs("p",{className:"flex items-center gap-2",children:[y.jsx(F_,{size:14})," ",E.contact.email]}),y.jsxs("p",{className:"flex items-center gap-2",children:[y.jsx(U_,{size:14})," ",E.contact.phone]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("p",{className:"font-semibold text-gray-600",children:"Billing Address"}),y.jsx("p",{children:E.billingAddress.street}),y.jsxs("p",{children:[E.billingAddress.city,", ",E.billingAddress.state," ",E.billingAddress.zip]})]})]}),y.jsxs("div",{className:"mt-3 pt-3 border-t",children:[y.jsxs("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:["Service Locations (",E.locations.length,")"]}),y.jsx("div",{className:"pl-4 border-l-2 space-y-1",children:E.locations.map((S,P)=>y.jsxs("div",{className:"text-sm text-gray-700",children:[y.jsx("span",{className:"font-semibold",children:S.name})," (#",S.locNum,") - ",S.city,", ",S.state]},`${S.name}-${S.locNum}-${P}`))})]})]},E.id))}),o&&y.jsx(lk,{onAddCustomer:e,onClose:()=>l(!1)}),h&&y.jsx(uk,{customer:h,onUpdateCustomer:t,onClose:()=>f(null)}),g&&y.jsx(ck,{customer:g,onAddLocation:i,onClose:()=>_(null)})]})},dk=({onClose:r,onAdd:e})=>{const[t,i]=Q.useState(""),[o,l]=Q.useState(""),[h,f]=Q.useState(""),g=_=>{_.preventDefault(),t.trim()&&(e({name:t,email:o,phone:h,status:"Available"}),r())};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:g,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsx("div",{className:"p-6 border-b",children:y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Technician"})}),y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Name"}),y.jsx("input",{type:"text",value:t,onChange:_=>i(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Email"}),y.jsx("input",{type:"email",value:o,onChange:_=>l(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Phone"}),y.jsx("input",{type:"tel",value:h,onChange:_=>f(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]}),y.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:r,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),y.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:"Save Technician"})]})]})})},fk=({technician:r,onClose:e,onUpdate:t})=>{const[i,o]=Q.useState(r),l=f=>o(g=>({...g,[f.target.name]:f.target.value})),h=f=>{f.preventDefault(),t(i),e()};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:h,className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsx("div",{className:"p-6 border-b",children:y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Technician"})}),y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Name"}),y.jsx("input",{type:"text",name:"name",value:i.name,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Email"}),y.jsx("input",{type:"email",name:"email",value:i.email,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Phone"}),y.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Status"}),y.jsxs("select",{name:"status",value:i.status,onChange:l,className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Available"}),y.jsx("option",{children:"En Route"}),y.jsx("option",{children:"On Site"}),y.jsx("option",{children:"On Break"}),y.jsx("option",{children:"On Call"}),y.jsx("option",{children:"Day Off"})]})]})]}),y.jsxs("div",{className:"p-6 bg-gray-50 border-t flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"text-gray-700 font-bold py-2 px-4",children:"Cancel"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})},pk=({technicians:r,onAddTechnician:e,onUpdateTechnician:t,onDeleteTechnician:i})=>{const[o,l]=Q.useState(!1),[h,f]=Q.useState(null);return y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Technician Management"}),y.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[y.jsx(yc,{size:20})," Add New Technician"]})]}),y.jsx("div",{className:"space-y-4",children:r.map(g=>y.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:g.name}),y.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-4 mt-1",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:[y.jsx(F_,{size:14})," ",g.email]}),y.jsxs("span",{className:"flex items-center gap-1.5",children:[y.jsx(U_,{size:14})," ",g.phone]})]})]}),g.name!=="Unassigned"&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>f(g),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:y.jsx($A,{size:16})}),y.jsx("button",{onClick:()=>i(g.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:y.jsx(WA,{size:16})})]})]},g.id))}),o&&y.jsx(dk,{onAdd:e,onClose:()=>l(!1)}),h&&y.jsx(fk,{technician:h,onUpdate:t,onClose:()=>f(null)})]})},B_=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,mk=r=>{const e=B_(r);return e?e.toISOString().split("T")[0]:""},Tu=r=>{if(!r)return"";const[e,t]=r.split(":"),i=parseInt(e,10),o=i>=12?"PM":"AM";return`${(i+11)%12+1}:${t} ${o}`},gk=({workOrders:r,technicians:e})=>{const[t,i]=Q.useState("ALL"),[o,l]=Q.useState("today"),[h,f]=Q.useState(new Date().toISOString().split("T")[0]),[g,_]=Q.useState(new Date().toISOString().split("T")[0]),E=Q.useMemo(()=>{let V=new Date,$=new Date;switch(o){case"today":V.setHours(0,0,0,0),$.setHours(23,59,59,999);break;case"3-day":V.setHours(0,0,0,0),$.setDate(V.getDate()+2),$.setHours(23,59,59,999);break;case"week":const q=V.getDay();V.setDate(V.getDate()-q),V.setHours(0,0,0,0),$.setDate(V.getDate()+6),$.setHours(23,59,59,999);break;case"custom":V=new Date(h+"T00:00:00"),$=new Date(g+"T23:59:59");break}const W=r.filter(q=>{const ne=B_(q["Schedule Date"]);return ne&&ne>=V&&ne<=$}),b=e.find(q=>q.id===t)?.name;return t!=="ALL"?W.filter(q=>q.technician.includes(b)).sort((q,ne)=>(q.startTime||"").localeCompare(ne.startTime||"")):W.sort((q,ne)=>(q.startTime||"").localeCompare(ne.startTime||""))},[t,r,e,o,h,g]),S=Q.useMemo(()=>E.reduce((V,$)=>{const W=mk($["Schedule Date"]);return V[W]||(V[W]={}),$.technician.forEach(b=>{V[W][b]||(V[W][b]=[]),V[W][b].push($)}),V},{}),[E]),P=()=>window.print();return y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 print:hidden",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Route Planning"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("select",{value:o,onChange:V=>l(V.target.value),className:"p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{value:"today",children:"Today"}),y.jsx("option",{value:"3-day",children:"Next 3 Days"}),y.jsx("option",{value:"week",children:"This Week"}),y.jsx("option",{value:"custom",children:"Custom Range"})]}),o==="custom"&&y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"date",value:h,onChange:V=>f(V.target.value),className:"p-2 border border-gray-300 rounded-lg"}),y.jsx("input",{type:"date",value:g,onChange:V=>_(V.target.value),className:"p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("select",{value:t,onChange:V=>i(V.target.value==="ALL"?"ALL":Number(V.target.value)),className:"p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{value:"ALL",children:"All Technicians"}),e.filter(V=>V.name!=="Unassigned").map(V=>y.jsx("option",{value:V.id,children:V.name},V.id))]}),y.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700",children:[y.jsx(zA,{size:20})," Print Route"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"md:col-span-1 print:col-span-3",children:[y.jsx("h3",{className:"font-bold text-lg mb-2",children:"Job Order"}),Object.keys(S).length>0?Object.entries(S).map(([V,$])=>y.jsxs("div",{className:"mb-4",children:[y.jsx("h4",{className:"font-bold text-xl mb-2 p-2 bg-gray-200 rounded-md sticky top-20",children:new Date(V+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries($).map(([W,b])=>y.jsxs("div",{className:"mb-4",children:[t==="ALL"&&y.jsx("h5",{className:"font-bold text-md mb-2 p-2 bg-gray-100 rounded-md",children:W}),y.jsx("div",{className:"space-y-2",children:b.map((q,ne)=>y.jsxs("div",{className:"p-3 border rounded-lg flex items-center gap-4",children:[y.jsx("span",{className:"text-xl font-bold text-gray-400",children:ne+1}),y.jsxs("div",{children:[y.jsxs("p",{className:"font-bold",children:[Tu(q.startTime)," - ",Tu(q.endTime)]}),y.jsxs("p",{children:[q.Company," - ",q.City]}),y.jsx("p",{className:"text-sm text-gray-600",children:q.Task})]})]},q.id))})]},W))]},V)):y.jsx("p",{children:"No jobs scheduled for this selection."})]}),y.jsx("div",{className:"md:col-span-2 bg-gray-200 rounded-lg flex items-center justify-center h-96 print:hidden",children:y.jsx("p",{className:"text-gray-500",children:"Map Placeholder"})})]}),y.jsx("style",{children:"@media print { body * { visibility: hidden; } .print-container, .print-container * { visibility: visible; } .print-container { position: absolute; left: 0; top: 0; width: 100%; } }"}),y.jsxs("div",{className:"print-container hidden print:block",children:[y.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Route for ",t==="ALL"?"All Technicians":e.find(V=>V.id===t)?.name," on ",new Date(h+"T00:00:00").toLocaleDateString()]}),Object.entries(S).map(([V,$])=>y.jsxs("div",{className:"mb-4",children:[y.jsx("h3",{className:"font-bold text-lg mt-4 border-t pt-2",children:new Date(V+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),Object.entries($).map(([W,b])=>y.jsxs("div",{className:"mb-2",children:[y.jsx("h4",{className:"font-semibold text-md mt-2",children:W}),b.map((q,ne)=>y.jsxs("div",{className:"p-2 border-b",children:[y.jsx("p",{children:y.jsxs("strong",{children:[ne+1,". ",Tu(q.startTime)," - ",Tu(q.endTime),": ",q.Company]})}),y.jsxs("p",{children:[q.Task," at ",q.City,", ",q.State]})]},q.id))]},W))]},V))]})]})},yy=r=>r==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r),yk=({invoices:r,quotes:e})=>{const[t,i]=Q.useState("invoices");return y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Billing"}),y.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:[y.jsx(yc,{size:20})," Create Quote"]})]}),y.jsx("div",{className:"border-b border-gray-200",children:y.jsxs("nav",{className:"-mb-px flex gap-6",children:[y.jsx("button",{onClick:()=>i("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="invoices"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Invoices"}),y.jsx("button",{onClick:()=>i("quotes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="quotes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Quotes"})]})}),y.jsxs("div",{className:"mt-6",children:[t==="invoices"&&y.jsx("div",{children:r.map(o=>y.jsxs("div",{children:[o.id," - ",o.customerName," - ",yy(o.amount)," - ",o.status]},o.id))}),t==="quotes"&&y.jsx("div",{children:e.map(o=>y.jsxs("div",{children:[o.id," - ",o.customerName," - ",yy(o.amount)," - ",o.status]},o.id))})]})]})},$_=r=>r&&typeof r=="number"?new Date(Math.round((r-25569)*86400*1e3)):null,W_=r=>r?r.getTime()/864e5+25569:null,vk=r=>{const e=$_(r);return e?e.toISOString().split("T")[0]:""},_k=r=>r?W_(new Date(r+"T00:00:00")):null,wk=r=>r?new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",Ek=r=>r==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r),Tk=r=>{const e=$_(r);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null},Ik=r=>({emergency:"bg-red-100 text-red-800 border-red-500",urgent:"bg-orange-100 text-orange-800 border-orange-500",regular:"bg-blue-100 text-blue-800 border-blue-500",low:"bg-gray-100 text-gray-800 border-gray-500"})[r?.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-500",xk=({order:r,onClose:e,onUpdate:t,onAddNote:i,technicians:o})=>{if(!r)return null;const[l,h]=Q.useState(r["Order Status"]),[f,g]=Q.useState(r.technician||[]),[_,E]=Q.useState(vk(r["Schedule Date"])),[S,P]=Q.useState(r.startTime||""),[V,$]=Q.useState(r.endTime||""),[W,b]=Q.useState(""),[q,ne]=Q.useState(r.clientWO||""),ae=Z=>{const R=f.includes(Z)?f.filter(I=>I!==Z):[...f,Z];g(R)},oe=()=>{const Z={};l!==r["Order Status"]&&(Z["Order Status"]=l,l==="Completed"&&!r["Completed Date"]&&(Z["Completed Date"]=W_(new Date))),JSON.stringify(f)!==JSON.stringify(r.technician)&&(Z.technician=f);const R=_k(_);(R!==r["Schedule Date"]||S!==r.startTime||V!==r.endTime)&&(Z["Schedule Date"]=R,Z.startTime=S,Z.endTime=V,l==="Open"&&_&&(Z["Order Status"]="Scheduled")),q!==r.clientWO&&(Z.clientWO=q),Object.keys(Z).length>0&&t(r.id,Z)},he=[{label:"Work Order #",value:r["WO#"],icon:y.jsx(kf,{})},{label:"Client WO#",value:r.clientWO,icon:y.jsx(j_,{})},{label:"Location",value:`${r.Company} (#${r["Loc #"]})`,icon:y.jsx(OA,{})},{label:"Address",value:`${r.City}, ${r.State}`,icon:y.jsx(MA,{})},{label:"Priority",value:r.Priority,icon:y.jsx(qA,{}),style:`${Ik(r.Priority)} px-2 py-0.5 rounded-full text-xs font-semibold`},{label:"Task",value:r.Task},{label:"NTE Amount",value:Ek(r.NTE)},{label:"Created Date",value:Tk(r["Created Date"])}];return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[y.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Work Order Details"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:y.jsx(z_,{size:28})})]}),y.jsxs("div",{className:"p-6 overflow-y-auto",children:[y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:he.map(Z=>y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-xs text-gray-500 font-medium",children:Z.label}),y.jsxs("span",{className:`text-base text-gray-900 font-semibold flex items-center gap-2 mt-1 ${Z.style||""}`,children:[Z.icon&&y.jsx("span",{className:"text-gray-400",children:Du.cloneElement(Z.icon,{size:16})}),y.jsx("span",{className:Z.style||"",children:Z.value})]})]},Z.label))}),y.jsxs("div",{className:"mt-6 pt-6 border-t",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Job Management"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Status"}),y.jsxs("select",{value:l,onChange:Z=>h(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Open"}),y.jsx("option",{children:"Scheduled"}),y.jsx("option",{children:"In Progress"}),y.jsx("option",{children:"On Hold"}),y.jsx("option",{children:"Completed"}),y.jsx("option",{children:"Cancelled"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Assigned Technicians"}),y.jsx("div",{className:"border p-2 rounded-lg max-h-24 overflow-y-auto",children:o.filter(Z=>Z.name!=="Unassigned").map(Z=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:`tech-${Z.id}`,checked:f.includes(Z.name),onChange:()=>ae(Z.name),className:"mr-2"}),y.jsx("label",{htmlFor:`tech-${Z.id}`,children:Z.name})]},Z.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Schedule Date"}),y.jsx("input",{type:"date",value:_,onChange:Z=>E(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Start Time"}),y.jsx("input",{type:"time",value:S,onChange:Z=>P(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"End Time"}),y.jsx("input",{type:"time",value:V,onChange:Z=>$(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client WO#"}),y.jsx("input",{type:"text",value:q,onChange:Z=>ne(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsx("div",{className:"mt-4 flex justify-end",children:y.jsx("button",{onClick:oe,className:"bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700",children:"Save Changes"})})]}),y.jsxs("div",{className:"mt-6 pt-6 border-t",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3 flex items-center",children:[y.jsx(UA,{size:20,className:"mr-2"}),"Work Notes"]}),y.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto bg-gray-50 p-3 rounded-lg",children:r.notes&&r.notes.length>0?r.notes.sort((Z,R)=>new Date(R.timestamp)-new Date(Z.timestamp)).map((Z,R)=>y.jsxs("div",{className:"text-sm bg-white p-2 rounded shadow-sm",children:[y.jsx("p",{className:"text-gray-800",children:Z.text}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 text-right",children:wk(Z.timestamp)})]},R)):y.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No notes for this job yet."})}),y.jsxs("div",{className:"mt-4",children:[y.jsx("textarea",{value:W,onChange:Z=>b(Z.target.value),placeholder:"Add a new note...",rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg"}),y.jsx("div",{className:"flex justify-end mt-2",children:y.jsx("button",{onClick:()=>i(r.id,W,()=>b("")),disabled:!W.trim(),className:"bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Add Note"})})]})]})]})]})})},Sk=r=>r?r.getTime()/864e5+25569:null,Ak=r=>r?Sk(new Date(r+"T00:00:00")):null,kk=({onClose:r,onAddOrder:e,customers:t})=>{const[i,o]=Q.useState(t[0]?.id||""),[l,h]=Q.useState(""),[f,g]=Q.useState(""),[_,E]=Q.useState("Regular"),[S,P]=Q.useState("Heating & Cooling"),[V,$]=Q.useState(""),[W,b]=Q.useState(""),[q,ne]=Q.useState(""),[ae,oe]=Q.useState(""),[he,Z]=Q.useState(""),R=Q.useMemo(()=>t.find(k=>k.id===i),[i,t]);Q.useEffect(()=>{if(R?.locations?.[0]){const k=R.locations[0];h(`${k.name}-${k.locNum}-0`)}else h("")},[R]);const I=k=>{h(k)},C=k=>{k.preventDefault();const[O,j]=l.split("-").slice(0,2),A=R.locations.find(Ke=>Ke.name===O&&Ke.locNum===j);if(!i||!A||!f){alert("Please fill out all required fields.");return}e({Client:R.name,Company:A.name,"Loc #":A.locNum,Task:f,Priority:_,Category:S,City:A.city,State:A.state,NTE:parseFloat(V)||0,"Schedule Date":Ak(W),startTime:q,endTime:ae,clientWO:he})};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:y.jsxs("form",{onSubmit:C,className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[y.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Work Order"}),y.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:y.jsx(z_,{size:28})})]}),y.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client"}),y.jsx("select",{value:i,onChange:k=>o(parseInt(k.target.value)),className:"w-full p-2 border border-gray-300 rounded-lg",children:t.map(k=>y.jsx("option",{value:k.id,children:k.name},k.id))})]}),R&&y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Location"}),y.jsx("select",{value:l,onChange:k=>I(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:R.locations.map((k,O)=>y.jsxs("option",{value:`${k.name}-${k.locNum}-${O}`,children:[k.name," (#",k.locNum,")"]},`${k.name}-${k.locNum}-${O}`))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Client WO#"}),y.jsx("input",{type:"text",value:he,onChange:k=>Z(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Task / Issue"}),y.jsx("textarea",{value:f,onChange:k=>g(k.target.value),rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg",required:!0})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Priority"}),y.jsxs("select",{value:_,onChange:k=>E(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Regular"}),y.jsx("option",{children:"Low"}),y.jsx("option",{children:"Urgent"}),y.jsx("option",{children:"Emergency"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Category"}),y.jsxs("select",{value:S,onChange:k=>P(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:[y.jsx("option",{children:"Heating & Cooling"}),y.jsx("option",{children:"Refrigeration"}),y.jsx("option",{children:"Maintenance"}),y.jsx("option",{children:"Plumbing"}),y.jsx("option",{children:"Other"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"NTE Amount ($)"}),y.jsx("input",{type:"number",value:V,onChange:k=>$(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",placeholder:"e.g., 500"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Schedule Date"}),y.jsx("input",{type:"date",value:W,onChange:k=>b(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Start Time"}),y.jsx("input",{type:"time",value:q,onChange:k=>ne(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-1",children:"End Time"}),y.jsx("input",{type:"time",value:ae,onChange:k=>oe(k.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]})]}),y.jsx("div",{className:"p-6 bg-gray-50 border-t mt-auto",children:y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700",children:"Create Work Order"})})]})})},Ck={apiKey:"AIzaSyAlev0GFpv3rzRYCJaMALOqlPwaowNfynI",authDomain:"hvac-finance-dashboard.firebaseapp.com",projectId:"hvac-finance-dashboard",storageBucket:"hvac-finance-dashboard.firebasestorage.app",messagingSenderId:"917610618621",appId:"1:917610618621:web:83c621d154c5f62c9be894"},va="hvac-master-dashboard",Cf=Ry(Ck),Rk=dv(Cf),_a=O1(Cf);SA(Cf);const Nk=r=>r?r.getTime()/864e5+25569:null,Pk=()=>{const[r,e]=Q.useState(null),[t,i]=Q.useState(!0),[o,l]=Q.useState("finance"),[h,f]=Q.useState("dashboard"),[g,_]=Q.useState([]),[E,S]=Q.useState([]),[P,V]=Q.useState([]),[$,W]=Q.useState([]),[b,q]=Q.useState([]),[ne,ae]=Q.useState([]),[oe,he]=Q.useState([]),[Z,R]=Q.useState([]),[I,C]=Q.useState([]),[k,O]=Q.useState([]),[j,A]=Q.useState([]),[Ke,wt]=Q.useState([]),[At,Ue]=Q.useState([]),[re,ge]=Q.useState([]),[se,L]=Q.useState([]),[H,me]=Q.useState([]),[Ie,Ae]=Q.useState([]),[ke,Le]=Q.useState(""),[Re,$e]=Q.useState("All"),[tt,Qt]=Q.useState(null),[Br,gn]=Q.useState(!1),[$r,Ds]=Q.useState("dashboard"),[Ei,Ti]=Q.useState(!1),[Oo,Os]=Q.useState(null),[Kn,Gn]=Q.useState("bill"),[Vs,Ls]=Q.useState("dark"),[js,Ii]=Q.useState({key:"dueDay",direction:"ascending"}),[lt,ut]=Q.useState(""),[Qn,xi]=Q.useState(null),[yr,Wr]=Q.useState(0),[Rn,Si]=Q.useState({start:new Date,end:new Date}),[Ai,ki]=Q.useState("monthly"),[Ci,Ri]=Q.useState(!0),[qr,Hr]=Q.useState({});Q.useEffect(()=>{const ct=LT(Rk,Ge=>{e(Ge?Ge.uid:null),i(!1)});return()=>ct()},[]);const vr=Q.useMemo(()=>Rn.start.getFullYear()+"-"+String(Rn.start.getMonth()+1).padStart(2,"0"),[Rn]);Q.useEffect(()=>{if(!r)return;const Ge=Object.entries({bills:_,debts:S,incomes:V,weeklyCosts:W,jobs:q,tasks:ae,invoices:he,taxPayments:R,goals:C,clients:ge,inventory:O,vehicles:A,maintenanceLogs:wt,recurringWork:Ue,workOrders:L,customers:me,technicians:Ae}).map(([Pe,Yn])=>uy(K1(ry(_a,"artifacts",va,"users",r,Pe)),Vt=>{Yn(Vt.docs.map(_n=>({id:_n.id,..._n.data()})))},Vt=>console.error(`Error fetching ${Pe}:`,Vt))),an=uy(Pu(_a,"artifacts",va,"users",r,"paidStatus",vr),Pe=>{Hr(Pe.exists()?Pe.data().status:{})},Pe=>console.error("Error fetching paid status:",Pe));return()=>{Ge.forEach(Pe=>Pe()),an()}},[r,vr]);const Wt=(ct,Ge)=>{const an=Pu(_a,"artifacts",va,"users",r,"workOrders",ct);ly(an,Ge),tt&&tt.id===ct&&Qt(Pe=>({...Pe,...Ge}))},yn=(ct,Ge,an)=>{if(!Ge.trim())return;const Pe={text:Ge.trim(),timestamp:new Date().toISOString()},Yn=Pu(_a,"artifacts",va,"users",r,"workOrders",ct),_n=[...se.find(wr=>wr.id===ct).notes||[],Pe];ly(Yn,{notes:_n}),an()},Kr=ct=>{const Ge=`WO-${Date.now()}`,an={...ct,"WO#":Ge,id:Ge,"Created Date":Nk(new Date),"Order Status":ct["Schedule Date"]?"Scheduled":"Open",notes:[],technician:[]};J1(ry(_a,"artifacts",va,"users",r,"workOrders"),an),gn(!1)},vn=Q.useMemo(()=>se.filter(ct=>(Re==="All"||ct["Order Status"]===Re)&&Object.values(ct).some(Ge=>String(Ge).toLowerCase().includes(ke.toLowerCase()))),[se,ke,Re]),Ms=()=>y.jsx("main",{}),_r=()=>{switch(h){case"customers":return y.jsx(hk,{customers:H});case"dispatch":return y.jsx(ok,{workOrders:se,technicians:Ie,onSelectOrder:Qt,onUpdateOrder:Wt});case"technicians":return y.jsx(pk,{technicians:Ie});case"route":return y.jsx(gk,{workOrders:se,technicians:Ie});case"billing":return y.jsx(yk,{invoices:oe,quotes:[]});default:return y.jsx(ek,{orders:vn,onSelectOrder:Qt,searchTerm:ke,setSearchTerm:Le,statusFilter:Re,setStatusFilter:$e})}};return t?y.jsx("div",{className:"bg-slate-900 text-white min-h-screen flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}):r?y.jsxs("div",{className:"bg-gray-50 min-h-screen font-sans",children:[y.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-20",children:y.jsx("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx(kf,{className:"h-8 w-8 text-blue-600"}),y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HVAC Business Suite"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>l("finance"),className:`font-semibold py-2 px-4 rounded-lg flex items-center gap-2 ${o==="finance"?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:[y.jsx(M_,{size:20})," Finance"]}),y.jsxs("button",{onClick:()=>l("dispatch"),className:`font-semibold py-2 px-4 rounded-lg flex items-center gap-2 ${o==="dispatch"?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:[y.jsx(Sf,{size:20})," Dispatch"]})]})]})})}),o==="dispatch"&&y.jsxs(y.Fragment,{children:[y.jsx(GA,{currentView:h,setCurrentView:f,onAddOrderClick:()=>gn(!0)}),y.jsx("main",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_r()}),tt&&y.jsx(xk,{order:tt,onClose:()=>Qt(null),onUpdate:Wt,onAddNote:yn,technicians:Ie}),Br&&y.jsx(kk,{customers:H,onAddOrder:Kr,onClose:()=>gn(!1)})]}),o==="finance"&&y.jsx("div",{className:`${Vs} bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-white`,children:y.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:Ms()})})]}):y.jsx(KA,{})};rw.createRoot(document.getElementById("root")).render(y.jsx(Du.StrictMode,{children:y.jsx(Pk,{})}));
